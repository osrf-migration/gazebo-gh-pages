{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/710/comments/656105.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/710/_/diff#comment-656105"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 710, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/710.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/710"}}, "title": "Model editor Part 1 - part and joint creation"}, "content": {"raw": "I got a segfault adding a model using the model editor and removing it before saving it. Here is the backtrace of gzclient:\n\n\n```\n#!c++\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7fffd3fff700 (LWP 9881)]\n0x00007fffef897b29 in glBindBufferARB ()\n   from /usr/lib/nvidia-experimental-310/libGL.so.1\n(gdb) bt\n#0  0x00007fffef897b29 in glBindBufferARB ()\n   from /usr/lib/nvidia-experimental-310/libGL.so.1\n#1  0x00007fffd0336cdf in Ogre::GLHardwareVertexBuffer::lockImpl(unsigned long, unsigned long, Ogre::HardwareBuffer::LockOptions) ()\n   from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\n#2  0x00007fffd0332b5d in ?? ()\n   from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\n#3  0x00007ffff7591f13 in lock (options=Ogre::HardwareBuffer::HBL_NORMAL, \n    this=<optimized out>) at /usr/include/OGRE/OgreHardwareBuffer.h:212\n#4  gazebo::rendering::DynamicLines::FillHardwareBuffers (this=0x7fffd12931f8)\n    at /home/caguero/workspace/gazebo/gazebo/rendering/DynamicLines.cc:158\n#5  0x00007ffff7628545 in gazebo::rendering::WireBox::Init (this=0x35cbfb0, \n    _box=...) at /home/caguero/workspace/gazebo/gazebo/rendering/WireBox.cc:99\n#6  0x00007ffff7616e91 in gazebo::rendering::Visual::SetHighlighted (\n    this=0x44cebd0, _highlighted=<optimized out>)\n    at /home/caguero/workspace/gazebo/gazebo/rendering/Visual.cc:1244\n#7  0x00000000004ab32f in gazebo::gui::GLWidget::SetSelectedVisual (this=\n    0x1431810, _vis=...)\n    at /home/caguero/workspace/gazebo/gazebo/gui/GLWidget.cc:836\n#8  0x00000000004ab677 in gazebo::gui::GLWidget::OnRequest (this=0x1431810, \n    _msg=...) at /home/caguero/workspace/gazebo/gazebo/gui/GLWidget.cc:948\n#9  0x00000000004b4bf9 in operator() (a0=..., this=0x146db50)\n    at /usr/include/boost/function/function_template.hpp:1013\n```", "markup": "markdown", "html": "<p>I got a segfault adding a model using the model editor and removing it before saving it. Here is the backtrace of gzclient:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">Program</span> <span class=\"n\">received</span> <span class=\"n\">signal</span> <span class=\"n\">SIGSEGV</span><span class=\"p\">,</span> <span class=\"n\">Segmentation</span> <span class=\"n\">fault</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Switching</span> <span class=\"n\">to</span> <span class=\"n\">Thread</span> <span class=\"mh\">0x7fffd3fff700</span> <span class=\"p\">(</span><span class=\"n\">LWP</span> <span class=\"mi\">9881</span><span class=\"p\">)]</span>\n<span class=\"mh\">0x00007fffef897b29</span> <span class=\"n\">in</span> <span class=\"n\">glBindBufferARB</span> <span class=\"p\">()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">nvidia</span><span class=\"o\">-</span><span class=\"n\">experimental</span><span class=\"o\">-</span><span class=\"mi\">310</span><span class=\"o\">/</span><span class=\"n\">libGL</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.1</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span> <span class=\"n\">bt</span>\n<span class=\"cp\">#0  0x00007fffef897b29 in glBindBufferARB ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">nvidia</span><span class=\"o\">-</span><span class=\"n\">experimental</span><span class=\"o\">-</span><span class=\"mi\">310</span><span class=\"o\">/</span><span class=\"n\">libGL</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.1</span>\n<span class=\"cp\">#1  0x00007fffd0336cdf in Ogre::GLHardwareVertexBuffer::lockImpl(unsigned long, unsigned long, Ogre::HardwareBuffer::LockOptions) ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">OGRE</span><span class=\"o\">-</span><span class=\"mf\">1.7.4</span><span class=\"o\">/</span><span class=\"n\">RenderSystem_GL</span><span class=\"p\">.</span><span class=\"n\">so</span>\n<span class=\"cp\">#2  0x00007fffd0332b5d in ?? ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">OGRE</span><span class=\"o\">-</span><span class=\"mf\">1.7.4</span><span class=\"o\">/</span><span class=\"n\">RenderSystem_GL</span><span class=\"p\">.</span><span class=\"n\">so</span>\n<span class=\"cp\">#3  0x00007ffff7591f13 in lock (options=Ogre::HardwareBuffer::HBL_NORMAL, </span>\n    <span class=\"k\">this</span><span class=\"o\">=&lt;</span><span class=\"n\">optimized</span> <span class=\"n\">out</span><span class=\"o\">&gt;</span><span class=\"p\">)</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">OGRE</span><span class=\"o\">/</span><span class=\"n\">OgreHardwareBuffer</span><span class=\"p\">.</span><span class=\"nl\">h</span><span class=\"p\">:</span><span class=\"mi\">212</span>\n<span class=\"cp\">#4  gazebo::rendering::DynamicLines::FillHardwareBuffers (this=0x7fffd12931f8)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">caguero</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">DynamicLines</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">158</span>\n<span class=\"cp\">#5  0x00007ffff7628545 in gazebo::rendering::WireBox::Init (this=0x35cbfb0, </span>\n    <span class=\"n\">_box</span><span class=\"o\">=</span><span class=\"p\">...)</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">caguero</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">WireBox</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">99</span>\n<span class=\"cp\">#6  0x00007ffff7616e91 in gazebo::rendering::Visual::SetHighlighted (</span>\n    <span class=\"k\">this</span><span class=\"o\">=</span><span class=\"mh\">0x44cebd0</span><span class=\"p\">,</span> <span class=\"n\">_highlighted</span><span class=\"o\">=&lt;</span><span class=\"n\">optimized</span> <span class=\"n\">out</span><span class=\"o\">&gt;</span><span class=\"p\">)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">caguero</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">Visual</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">1244</span>\n<span class=\"cp\">#7  0x00000000004ab32f in gazebo::gui::GLWidget::SetSelectedVisual (this=</span>\n    <span class=\"mh\">0x1431810</span><span class=\"p\">,</span> <span class=\"n\">_vis</span><span class=\"o\">=</span><span class=\"p\">...)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">caguero</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">gui</span><span class=\"o\">/</span><span class=\"n\">GLWidget</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">836</span>\n<span class=\"cp\">#8  0x00000000004ab677 in gazebo::gui::GLWidget::OnRequest (this=0x1431810, </span>\n    <span class=\"n\">_msg</span><span class=\"o\">=</span><span class=\"p\">...)</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">caguero</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">gui</span><span class=\"o\">/</span><span class=\"n\">GLWidget</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">948</span>\n<span class=\"cp\">#9  0x00000000004b4bf9 in operator() (a0=..., this=0x146db50)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">boost</span><span class=\"o\">/</span><span class=\"n\">function</span><span class=\"o\">/</span><span class=\"n\">function_template</span><span class=\"p\">.</span><span class=\"nl\">hpp</span><span class=\"p\">:</span><span class=\"mi\">1013</span>\n</pre></div>", "type": "rendered"}, "created_on": "2013-10-08T19:04:48.876434+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": "2013-10-08T19:05:25.431935+00:00", "type": "pullrequest_comment", "id": 656105}