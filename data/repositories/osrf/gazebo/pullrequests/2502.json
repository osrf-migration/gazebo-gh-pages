{"rendered": {"description": {"raw": "When using cameras for running vision algorithms, the frame rate is often a very important parameter. If the simulated cameras do not provided precisely the expected frame rate, the algorithms are likely to be lost.\r\n\r\nBesides, current implementation of cameras highly depends on the CPU/GPU performance of the host machine when the simulation is running. That means that the frame rate cannot be predicted and that the simulations using camera(s) are not repeatable.\r\n\r\nThe changes proposed in this pull request allows the cameras to run at the desired frame rate whatever the GPU/CPU available on the host. The idea is to put on hold the world update when we need to wait for a camera sensor that requires the current state of the world.\r\n\r\nMuch care has been taken to avoid wasting time in waiting for nothing. In particular, the threads \"world update\" and \"sensors\" are waken up as soon as they can continue their job.\r\n\r\nIt is possible to go back to the legacy working mode by setting the flag \"strict_rate\" to false in camera's parameters.\r\n\r\nThis pull request comes with two other changes located in ignition-math and sdformat:\r\n* https://bitbucket.org/ignitionrobotics/ign-math/pull-requests/134\r\n* https://bitbucket.org/osrf/sdformat/pull-requests/289", "markup": "markdown", "html": "<p>When using cameras for running vision algorithms, the frame rate is often a very important parameter. If the simulated cameras do not provided precisely the expected frame rate, the algorithms are likely to be lost.</p>\n<p>Besides, current implementation of cameras highly depends on the CPU/GPU performance of the host machine when the simulation is running. That means that the frame rate cannot be predicted and that the simulations using camera(s) are not repeatable.</p>\n<p>The changes proposed in this pull request allows the cameras to run at the desired frame rate whatever the GPU/CPU available on the host. The idea is to put on hold the world update when we need to wait for a camera sensor that requires the current state of the world.</p>\n<p>Much care has been taken to avoid wasting time in waiting for nothing. In particular, the threads \"world update\" and \"sensors\" are waken up as soon as they can continue their job.</p>\n<p>It is possible to go back to the legacy working mode by setting the flag \"strict_rate\" to false in camera's parameters.</p>\n<p>This pull request comes with two other changes located in ignition-math and sdformat:\n<em> <a href=\"https://bitbucket.org/ignitionrobotics/ign-math/pull-requests/134\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/ignitionrobotics/ign-math/pull-requests/134</a>\n</em> <a href=\"https://bitbucket.org/osrf/sdformat/pull-requests/289\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/osrf/sdformat/pull-requests/289</a></p>", "type": "rendered"}, "title": {"raw": "Make sure camera's FPS is strictly applied, should the real time factor be impacted", "markup": "markdown", "html": "<p>Make sure camera's FPS is strictly applied, should the real time factor be impacted</p>", "type": "rendered"}}, "type": "pullrequest", "description": "When using cameras for running vision algorithms, the frame rate is often a very important parameter. If the simulated cameras do not provided precisely the expected frame rate, the algorithms are likely to be lost.\r\n\r\nBesides, current implementation of cameras highly depends on the CPU/GPU performance of the host machine when the simulation is running. That means that the frame rate cannot be predicted and that the simulations using camera(s) are not repeatable.\r\n\r\nThe changes proposed in this pull request allows the cameras to run at the desired frame rate whatever the GPU/CPU available on the host. The idea is to put on hold the world update when we need to wait for a camera sensor that requires the current state of the world.\r\n\r\nMuch care has been taken to avoid wasting time in waiting for nothing. In particular, the threads \"world update\" and \"sensors\" are waken up as soon as they can continue their job.\r\n\r\nIt is possible to go back to the legacy working mode by setting the flag \"strict_rate\" to false in camera's parameters.\r\n\r\nThis pull request comes with two other changes located in ignition-math and sdformat:\r\n* https://bitbucket.org/ignitionrobotics/ign-math/pull-requests/134\r\n* https://bitbucket.org/osrf/sdformat/pull-requests/289", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2502/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diffstat/ocrave/gazebo:e7a9e5a6073b%0Dcde54284e90b?from_pullrequest_id=2502"}, "commits": {"href": "data/repositories/osrf/gazebo/pullrequests/2502/commits.json"}, "self": {"href": "data/repositories/osrf/gazebo/pullrequests/2502.json"}, "comments": {"href": "data/repositories/osrf/gazebo/pullrequests/2502/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2502/merge"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2502"}, "activity": {"href": "data/repositories/osrf/gazebo/pullrequests/2502/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/ocrave/gazebo:e7a9e5a6073b%0Dcde54284e90b?from_pullrequest_id=2502"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2502/approve"}, "statuses": {"href": "data/repositories/osrf/gazebo/pullrequests/2502/statuses_page=1.json"}}, "title": "Make sure camera's FPS is strictly applied, should the real time factor be impacted", "close_source_branch": false, "reviewers": [], "id": 2502, "destination": {"commit": {"hash": "cde54284e90b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/cde54284e90b.json"}, "html": {"href": "#!/osrf/gazebo/commits/cde54284e90b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "created_on": "2016-11-15T10:47:38.464842+00:00", "summary": {"raw": "When using cameras for running vision algorithms, the frame rate is often a very important parameter. If the simulated cameras do not provided precisely the expected frame rate, the algorithms are likely to be lost.\r\n\r\nBesides, current implementation of cameras highly depends on the CPU/GPU performance of the host machine when the simulation is running. That means that the frame rate cannot be predicted and that the simulations using camera(s) are not repeatable.\r\n\r\nThe changes proposed in this pull request allows the cameras to run at the desired frame rate whatever the GPU/CPU available on the host. The idea is to put on hold the world update when we need to wait for a camera sensor that requires the current state of the world.\r\n\r\nMuch care has been taken to avoid wasting time in waiting for nothing. In particular, the threads \"world update\" and \"sensors\" are waken up as soon as they can continue their job.\r\n\r\nIt is possible to go back to the legacy working mode by setting the flag \"strict_rate\" to false in camera's parameters.\r\n\r\nThis pull request comes with two other changes located in ignition-math and sdformat:\r\n* https://bitbucket.org/ignitionrobotics/ign-math/pull-requests/134\r\n* https://bitbucket.org/osrf/sdformat/pull-requests/289", "markup": "markdown", "html": "<p>When using cameras for running vision algorithms, the frame rate is often a very important parameter. If the simulated cameras do not provided precisely the expected frame rate, the algorithms are likely to be lost.</p>\n<p>Besides, current implementation of cameras highly depends on the CPU/GPU performance of the host machine when the simulation is running. That means that the frame rate cannot be predicted and that the simulations using camera(s) are not repeatable.</p>\n<p>The changes proposed in this pull request allows the cameras to run at the desired frame rate whatever the GPU/CPU available on the host. The idea is to put on hold the world update when we need to wait for a camera sensor that requires the current state of the world.</p>\n<p>Much care has been taken to avoid wasting time in waiting for nothing. In particular, the threads \"world update\" and \"sensors\" are waken up as soon as they can continue their job.</p>\n<p>It is possible to go back to the legacy working mode by setting the flag \"strict_rate\" to false in camera's parameters.</p>\n<p>This pull request comes with two other changes located in ignition-math and sdformat:\n<em> <a href=\"https://bitbucket.org/ignitionrobotics/ign-math/pull-requests/134\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/ignitionrobotics/ign-math/pull-requests/134</a>\n</em> <a href=\"https://bitbucket.org/osrf/sdformat/pull-requests/289\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/osrf/sdformat/pull-requests/289</a></p>", "type": "rendered"}, "source": {"commit": {"hash": "e7a9e5a6073b", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo/commit/e7a9e5a6073b"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo/commits/e7a9e5a6073b"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f2b7e0a0-04ff-4851-9879-a852a70325b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "ocrave/gazebo", "uuid": "{f2b7e0a0-04ff-4851-9879-a852a70325b2}"}, "branch": {"name": "respect_fps"}}, "comment_count": 35, "state": "DECLINED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2018-04-20T16:04:32.308674+00:00", "type": "participant", "approved": false, "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}}, {"role": "PARTICIPANT", "participated_on": "2018-05-21T13:11:15.452427+00:00", "type": "participant", "approved": false, "user": {"display_name": "samuel lekieffre", "uuid": "{fb91c214-fb22-4bd8-9ecd-59fa5606f448}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bfb91c214-fb22-4bd8-9ecd-59fa5606f448%7D"}, "html": {"href": "https://bitbucket.org/%7Bfb91c214-fb22-4bd8-9ecd-59fa5606f448%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/711b8f132d9815416df59500328659f1d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSL-4.png"}}, "nickname": "slekieffre", "type": "user", "account_id": "557058:0d0672e4-f62e-4297-b00a-3c73d652fb94"}}, {"role": "PARTICIPANT", "participated_on": "2018-04-30T15:03:50.266045+00:00", "type": "participant", "approved": false, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, {"role": "PARTICIPANT", "participated_on": "2018-03-13T15:08:40.522305+00:00", "type": "participant", "approved": false, "user": {"display_name": "Matias N.", "uuid": "{00168a57-7785-4c78-8c89-4f1df08910a1}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B00168a57-7785-4c78-8c89-4f1df08910a1%7D"}, "html": {"href": "https://bitbucket.org/%7B00168a57-7785-4c78-8c89-4f1df08910a1%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8b33df148d3dd24d1cdff5493d6941bcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMN-1.png"}}, "nickname": "v01d", "type": "user", "account_id": "557058:1db9442d-b4e1-4949-968b-79e4371f1c4b"}}, {"role": "PARTICIPANT", "participated_on": "2020-04-06T18:35:36.503365+00:00", "type": "participant", "approved": false, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "PARTICIPANT", "participated_on": "2018-11-16T01:04:21.860436+00:00", "type": "participant", "approved": false, "user": {"display_name": "Stefan Kohlbrecher", "uuid": "{db06b03e-7b31-4483-9018-534df5bd723f}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bdb06b03e-7b31-4483-9018-534df5bd723f%7D"}, "html": {"href": "https://bitbucket.org/%7Bdb06b03e-7b31-4483-9018-534df5bd723f%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/414f1c364e6406dde31a6ef70fbd3d21d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSK-6.png"}}, "nickname": "Stefan_Kohlbrecher", "type": "user", "account_id": "557058:e39b6a62-9eb0-45ca-b27e-4f6445009d3f"}}, {"role": "PARTICIPANT", "participated_on": "2017-09-15T19:16:13.077214+00:00", "type": "participant", "approved": false, "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}}, {"role": "PARTICIPANT", "participated_on": "2018-04-16T16:33:36.840209+00:00", "type": "participant", "approved": false, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}, {"role": "PARTICIPANT", "participated_on": "2016-11-15T21:38:15.212433+00:00", "type": "participant", "approved": false, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}], "reason": "", "updated_on": "2020-04-06T18:35:41.987596+00:00", "author": {"display_name": "samuel lekieffre", "uuid": "{fb91c214-fb22-4bd8-9ecd-59fa5606f448}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bfb91c214-fb22-4bd8-9ecd-59fa5606f448%7D"}, "html": {"href": "https://bitbucket.org/%7Bfb91c214-fb22-4bd8-9ecd-59fa5606f448%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/711b8f132d9815416df59500328659f1d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSL-4.png"}}, "nickname": "slekieffre", "type": "user", "account_id": "557058:0d0672e4-f62e-4297-b00a-3c73d652fb94"}, "merge_commit": null, "closed_by": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}