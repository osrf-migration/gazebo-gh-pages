{"rendered": {"description": {"raw": "This adds support for Heightmaps with DART when using Bullet or ODE collision detectors in DART. It requires changes in [DART PR #1069](https://github.com/dartsim/dart/pull/1069) which has recently been merged and included in DART release 6.6.\r\n\r\nThis relates to issue #909, but it will only fix #909 as soon as DART supports Heightmaps in the default collision detector \\(FCL\\).\r\n\r\nI also found an issue with the heightmaps using the Bullet collision detector when I added the new _TerrainCollision_ test. I have opened a separate issue #2506 for this. Therefore, in this PR the _TerrainCollision_ test is skipped for bullet. When the issue is solved, the test skipping can be undone again.\r\n\r\nDART 6.6 is required. For running the complete test, the following dart packages must be installed:\r\n\r\n    apt-get install libdart6-dev\r\n    apt-get install libdart6-collision-bullet-dev\r\n\r\nand optionally also the use of ODE in dart can be tested, though this is technically not topic of this PR:\r\n\r\n    apt-get install libdart6-collision-ode-dev\r\n\r\nIf the bullet and/or ode extensions are not installed, the tests are skipped.\r\n\r\nI have also added some world files which can be used to visually test how heightmaps work.\r\n\r\nThe following uses a slanted terrain and drops 5 boxes on it. They are expected to roll down the slope.\r\n\r\n     gazebo <src-dir>/test/worlds/heightmap_test_with_boxes.world\r\n\r\nThis world has a valley and drops a sphere on it, which is expected to roll down the valley and stay there.\r\n\r\n     gazebo <src-dir>/test/worlds/heightmap_test_with_boxes.world\r\n\r\nUse the `-e` parameter to change physics as usual.\r\n\r\nWhen using bullet, you'll see it won't work due to issue #2506.\r\n\r\nFor DART, it will only work when using Bullet or ODE as DART collision detector. It won't work with the default DART collision detector yet \\(which uses FCL\\). So to test with DART, we still will need to specify the collision detector to use in the `<physics>` tag. There valley-sphere world has been modified twice to include this tag, once for Bullet and once for ODE:\r\n\r\n    gazebo <src-dir>/test/worlds/heightmap_test_with_sphere_dart_bullet.world\r\n    gazebo <src-dir>/test/worlds/heightmap_test_with_sphere_dart_ode.world", "markup": "markdown", "html": "<p>This adds support for Heightmaps with DART when using Bullet or ODE collision detectors in DART. It requires changes in <a data-is-external-link=\"true\" href=\"https://github.com/dartsim/dart/pull/1069\" rel=\"nofollow\">DART PR #1069</a> which has recently been merged and included in DART release 6.6.</p>\n<p>This relates to issue <a href=\"#!/osrf/gazebo/issues/909/dart-doesnt-support-meshes-or-heightmaps\" rel=\"nofollow\" title=\"DART doesn&#39;t support meshes or heightmaps\" class=\"ap-connect-link\">#909</a>, but it will only fix <a href=\"#!/osrf/gazebo/issues/909/dart-doesnt-support-meshes-or-heightmaps\" rel=\"nofollow\" title=\"DART doesn&#39;t support meshes or heightmaps\" class=\"ap-connect-link\">#909</a> as soon as DART supports Heightmaps in the default collision detector (FCL).</p>\n<p>I also found an issue with the heightmaps using the Bullet collision detector when I added the new <em>TerrainCollision</em> test. I have opened a separate issue <a href=\"#!/osrf/gazebo/issues/2506/bullet-heightmap-transform-is-wrong\" rel=\"nofollow\" title=\"Bullet heightmap transform is wrong\" class=\"ap-connect-link\">#2506</a> for this. Therefore, in this PR the <em>TerrainCollision</em> test is skipped for bullet. When the issue is solved, the test skipping can be undone again.</p>\n<p>DART 6.6 is required. For running the complete test, the following dart packages must be installed:</p>\n<div class=\"codehilite\"><pre><span></span>apt-get install libdart6-dev\napt-get install libdart6-collision-bullet-dev\n</pre></div>\n\n\n<p>and optionally also the use of ODE in dart can be tested, though this is technically not topic of this PR:</p>\n<div class=\"codehilite\"><pre><span></span>apt-get install libdart6-collision-ode-dev\n</pre></div>\n\n\n<p>If the bullet and/or ode extensions are not installed, the tests are skipped.</p>\n<p>I have also added some world files which can be used to visually test how heightmaps work.</p>\n<p>The following uses a slanted terrain and drops 5 boxes on it. They are expected to roll down the slope.</p>\n<div class=\"codehilite\"><pre><span></span> gazebo &lt;src-dir&gt;/test/worlds/heightmap_test_with_boxes.world\n</pre></div>\n\n\n<p>This world has a valley and drops a sphere on it, which is expected to roll down the valley and stay there.</p>\n<div class=\"codehilite\"><pre><span></span> gazebo &lt;src-dir&gt;/test/worlds/heightmap_test_with_boxes.world\n</pre></div>\n\n\n<p>Use the <code>-e</code> parameter to change physics as usual.</p>\n<p>When using bullet, you'll see it won't work due to issue <a href=\"#!/osrf/gazebo/issues/2506/bullet-heightmap-transform-is-wrong\" rel=\"nofollow\" title=\"Bullet heightmap transform is wrong\" class=\"ap-connect-link\">#2506</a>.</p>\n<p>For DART, it will only work when using Bullet or ODE as DART collision detector. It won't work with the default DART collision detector yet (which uses FCL). So to test with DART, we still will need to specify the collision detector to use in the <code>&lt;physics&gt;</code> tag. There valley-sphere world has been modified twice to include this tag, once for Bullet and once for ODE:</p>\n<div class=\"codehilite\"><pre><span></span>gazebo &lt;src-dir&gt;/test/worlds/heightmap_test_with_sphere_dart_bullet.world\ngazebo &lt;src-dir&gt;/test/worlds/heightmap_test_with_sphere_dart_ode.world\n</pre></div>", "type": "rendered"}, "title": {"raw": "Dart heightmap with bullet and ODE", "markup": "markdown", "html": "<p>Dart heightmap with bullet and ODE</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This adds support for Heightmaps with DART when using Bullet or ODE collision detectors in DART. It requires changes in [DART PR #1069](https://github.com/dartsim/dart/pull/1069) which has recently been merged and included in DART release 6.6.\r\n\r\nThis relates to issue #909, but it will only fix #909 as soon as DART supports Heightmaps in the default collision detector \\(FCL\\).\r\n\r\nI also found an issue with the heightmaps using the Bullet collision detector when I added the new _TerrainCollision_ test. I have opened a separate issue #2506 for this. Therefore, in this PR the _TerrainCollision_ test is skipped for bullet. When the issue is solved, the test skipping can be undone again.\r\n\r\nDART 6.6 is required. For running the complete test, the following dart packages must be installed:\r\n\r\n    apt-get install libdart6-dev\r\n    apt-get install libdart6-collision-bullet-dev\r\n\r\nand optionally also the use of ODE in dart can be tested, though this is technically not topic of this PR:\r\n\r\n    apt-get install libdart6-collision-ode-dev\r\n\r\nIf the bullet and/or ode extensions are not installed, the tests are skipped.\r\n\r\nI have also added some world files which can be used to visually test how heightmaps work.\r\n\r\nThe following uses a slanted terrain and drops 5 boxes on it. They are expected to roll down the slope.\r\n\r\n     gazebo <src-dir>/test/worlds/heightmap_test_with_boxes.world\r\n\r\nThis world has a valley and drops a sphere on it, which is expected to roll down the valley and stay there.\r\n\r\n     gazebo <src-dir>/test/worlds/heightmap_test_with_boxes.world\r\n\r\nUse the `-e` parameter to change physics as usual.\r\n\r\nWhen using bullet, you'll see it won't work due to issue #2506.\r\n\r\nFor DART, it will only work when using Bullet or ODE as DART collision detector. It won't work with the default DART collision detector yet \\(which uses FCL\\). So to test with DART, we still will need to specify the collision detector to use in the `<physics>` tag. There valley-sphere world has been modified twice to include this tag, once for Bullet and once for ODE:\r\n\r\n    gazebo <src-dir>/test/worlds/heightmap_test_with_sphere_dart_bullet.world\r\n    gazebo <src-dir>/test/worlds/heightmap_test_with_sphere_dart_ode.world", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2956/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diffstat/osrf/gazebo:ff8939f03173%0Dabca7cbc7cac?from_pullrequest_id=2956"}, "commits": {"href": "data/repositories/osrf/gazebo/pullrequests/2956/commits.json"}, "self": {"href": "data/repositories/osrf/gazebo/pullrequests/2956.json"}, "comments": {"href": "data/repositories/osrf/gazebo/pullrequests/2956/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2956/merge"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2956"}, "activity": {"href": "data/repositories/osrf/gazebo/pullrequests/2956/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:ff8939f03173%0Dabca7cbc7cac?from_pullrequest_id=2956"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2956/approve"}, "statuses": {"href": "data/repositories/osrf/gazebo/pullrequests/2956/statuses_page=1.json"}}, "title": "Dart heightmap with bullet and ODE", "close_source_branch": false, "reviewers": [{"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}], "id": 2956, "destination": {"commit": {"hash": "abca7cbc7cac", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/abca7cbc7cac.json"}, "html": {"href": "#!/osrf/gazebo/commits/abca7cbc7cac"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "created_on": "2018-05-11T22:47:11.092666+00:00", "summary": {"raw": "This adds support for Heightmaps with DART when using Bullet or ODE collision detectors in DART. It requires changes in [DART PR #1069](https://github.com/dartsim/dart/pull/1069) which has recently been merged and included in DART release 6.6.\r\n\r\nThis relates to issue #909, but it will only fix #909 as soon as DART supports Heightmaps in the default collision detector \\(FCL\\).\r\n\r\nI also found an issue with the heightmaps using the Bullet collision detector when I added the new _TerrainCollision_ test. I have opened a separate issue #2506 for this. Therefore, in this PR the _TerrainCollision_ test is skipped for bullet. When the issue is solved, the test skipping can be undone again.\r\n\r\nDART 6.6 is required. For running the complete test, the following dart packages must be installed:\r\n\r\n    apt-get install libdart6-dev\r\n    apt-get install libdart6-collision-bullet-dev\r\n\r\nand optionally also the use of ODE in dart can be tested, though this is technically not topic of this PR:\r\n\r\n    apt-get install libdart6-collision-ode-dev\r\n\r\nIf the bullet and/or ode extensions are not installed, the tests are skipped.\r\n\r\nI have also added some world files which can be used to visually test how heightmaps work.\r\n\r\nThe following uses a slanted terrain and drops 5 boxes on it. They are expected to roll down the slope.\r\n\r\n     gazebo <src-dir>/test/worlds/heightmap_test_with_boxes.world\r\n\r\nThis world has a valley and drops a sphere on it, which is expected to roll down the valley and stay there.\r\n\r\n     gazebo <src-dir>/test/worlds/heightmap_test_with_boxes.world\r\n\r\nUse the `-e` parameter to change physics as usual.\r\n\r\nWhen using bullet, you'll see it won't work due to issue #2506.\r\n\r\nFor DART, it will only work when using Bullet or ODE as DART collision detector. It won't work with the default DART collision detector yet \\(which uses FCL\\). So to test with DART, we still will need to specify the collision detector to use in the `<physics>` tag. There valley-sphere world has been modified twice to include this tag, once for Bullet and once for ODE:\r\n\r\n    gazebo <src-dir>/test/worlds/heightmap_test_with_sphere_dart_bullet.world\r\n    gazebo <src-dir>/test/worlds/heightmap_test_with_sphere_dart_ode.world", "markup": "markdown", "html": "<p>This adds support for Heightmaps with DART when using Bullet or ODE collision detectors in DART. It requires changes in <a data-is-external-link=\"true\" href=\"https://github.com/dartsim/dart/pull/1069\" rel=\"nofollow\">DART PR #1069</a> which has recently been merged and included in DART release 6.6.</p>\n<p>This relates to issue <a href=\"#!/osrf/gazebo/issues/909/dart-doesnt-support-meshes-or-heightmaps\" rel=\"nofollow\" title=\"DART doesn&#39;t support meshes or heightmaps\" class=\"ap-connect-link\">#909</a>, but it will only fix <a href=\"#!/osrf/gazebo/issues/909/dart-doesnt-support-meshes-or-heightmaps\" rel=\"nofollow\" title=\"DART doesn&#39;t support meshes or heightmaps\" class=\"ap-connect-link\">#909</a> as soon as DART supports Heightmaps in the default collision detector (FCL).</p>\n<p>I also found an issue with the heightmaps using the Bullet collision detector when I added the new <em>TerrainCollision</em> test. I have opened a separate issue <a href=\"#!/osrf/gazebo/issues/2506/bullet-heightmap-transform-is-wrong\" rel=\"nofollow\" title=\"Bullet heightmap transform is wrong\" class=\"ap-connect-link\">#2506</a> for this. Therefore, in this PR the <em>TerrainCollision</em> test is skipped for bullet. When the issue is solved, the test skipping can be undone again.</p>\n<p>DART 6.6 is required. For running the complete test, the following dart packages must be installed:</p>\n<div class=\"codehilite\"><pre><span></span>apt-get install libdart6-dev\napt-get install libdart6-collision-bullet-dev\n</pre></div>\n\n\n<p>and optionally also the use of ODE in dart can be tested, though this is technically not topic of this PR:</p>\n<div class=\"codehilite\"><pre><span></span>apt-get install libdart6-collision-ode-dev\n</pre></div>\n\n\n<p>If the bullet and/or ode extensions are not installed, the tests are skipped.</p>\n<p>I have also added some world files which can be used to visually test how heightmaps work.</p>\n<p>The following uses a slanted terrain and drops 5 boxes on it. They are expected to roll down the slope.</p>\n<div class=\"codehilite\"><pre><span></span> gazebo &lt;src-dir&gt;/test/worlds/heightmap_test_with_boxes.world\n</pre></div>\n\n\n<p>This world has a valley and drops a sphere on it, which is expected to roll down the valley and stay there.</p>\n<div class=\"codehilite\"><pre><span></span> gazebo &lt;src-dir&gt;/test/worlds/heightmap_test_with_boxes.world\n</pre></div>\n\n\n<p>Use the <code>-e</code> parameter to change physics as usual.</p>\n<p>When using bullet, you'll see it won't work due to issue <a href=\"#!/osrf/gazebo/issues/2506/bullet-heightmap-transform-is-wrong\" rel=\"nofollow\" title=\"Bullet heightmap transform is wrong\" class=\"ap-connect-link\">#2506</a>.</p>\n<p>For DART, it will only work when using Bullet or ODE as DART collision detector. It won't work with the default DART collision detector yet (which uses FCL). So to test with DART, we still will need to specify the collision detector to use in the <code>&lt;physics&gt;</code> tag. There valley-sphere world has been modified twice to include this tag, once for Bullet and once for ODE:</p>\n<div class=\"codehilite\"><pre><span></span>gazebo &lt;src-dir&gt;/test/worlds/heightmap_test_with_sphere_dart_bullet.world\ngazebo &lt;src-dir&gt;/test/worlds/heightmap_test_with_sphere_dart_ode.world\n</pre></div>", "type": "rendered"}, "source": {"commit": {"hash": "015fc4c0c162", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/JenniferBuehler/gazebo/commit/015fc4c0c162"}, "html": {"href": "https://bitbucket.org/JenniferBuehler/gazebo/commits/015fc4c0c162"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/JenniferBuehler/gazebo"}, "html": {"href": "https://bitbucket.org/JenniferBuehler/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{11522dd5-648b-4e9e-b908-d3e1170ba728}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "JenniferBuehler/gazebo", "uuid": "{11522dd5-648b-4e9e-b908-d3e1170ba728}"}, "branch": {"name": "dart_heightmap_with_bullet"}}, "comment_count": 78, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2018-08-05T14:33:49.386989+00:00", "type": "participant", "approved": false, "user": {"display_name": "Jeongseok Lee", "uuid": "{3907b560-aed7-43bd-bfa9-fd9873322291}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3907b560-aed7-43bd-bfa9-fd9873322291%7D"}, "html": {"href": "https://bitbucket.org/%7B3907b560-aed7-43bd-bfa9-fd9873322291%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/242819b368397b2b4cddf273b2ba9bf8d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJL-0.png"}}, "nickname": "jlee02", "type": "user", "account_id": "557058:e3fbdece-a1d8-4fb6-a9f1-236ecb09bd9d"}}, {"role": "REVIEWER", "participated_on": "2019-01-18T01:17:46.784088+00:00", "type": "participant", "approved": true, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "PARTICIPANT", "participated_on": "2019-01-17T18:01:57.359943+00:00", "type": "participant", "approved": true, "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}}, {"role": "PARTICIPANT", "participated_on": "2019-01-18T01:53:40.654138+00:00", "type": "participant", "approved": false, "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}}], "reason": "", "updated_on": "2019-01-18T01:53:40.663367+00:00", "author": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "merge_commit": {"hash": "ff8939f03173", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/ff8939f03173.json"}, "html": {"href": "#!/osrf/gazebo/commits/ff8939f03173"}}}, "closed_by": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}