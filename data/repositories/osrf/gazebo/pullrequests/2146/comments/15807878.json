{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2146/comments/15807878.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2146/_/diff#comment-15807878"}}, "parent": {"id": 15803601, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2146/comments/15803601.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2146/_/diff#comment-15803601"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2146, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2146.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2146"}}, "title": "Internal tinyxml2"}, "content": {"raw": "Here is a script that will reproduce the problem:\n\n```\n#!ruby\n\n\n#!/usr/bin/env ruby\n\nf = File.open(\"test.log\", \"w\")\n\nf.write(\"<test><![CDATA[\")\nfor i in 0..100000\n  for i in 0..1000\n    f.write('00000000000000000000000000000000000000000000000000')\n  end\nend\nf.write(\"]]></test>\")\n\nf.close()\n```\n\nWhen you playback the log file with tinyxml2 version 2.2, you'll get the following error:\n\n\n```\n#!c++\n\n[Err] [LogPlay.cc:119] Unable to load file[test.log]. Check the Gazebo server log file for more information.\n[Err] [LogPlay.cc:127] EXCEPTION: Error parsing log file\n\n\n```\n\nWhen you playback the logfile with tinyxml2 version 3.0, you'll get:\n\n\n```\n#!c++\n\n[Err] [LogPlay.cc:150] EXCEPTION: Log file is missing the <gazebo_log> element\n\n```\n\nI've included this script the the tinyxml2 issue tracker.\n", "markup": "markdown", "html": "<p>Here is a script that will reproduce the problem:</p>\n<div class=\"codehilite language-ruby\"><pre><span></span><span class=\"ch\">#!/usr/bin/env ruby</span>\n\n<span class=\"n\">f</span> <span class=\"o\">=</span> <span class=\"no\">File</span><span class=\"o\">.</span><span class=\"n\">open</span><span class=\"p\">(</span><span class=\"s2\">&quot;test.log&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;w&quot;</span><span class=\"p\">)</span>\n\n<span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">&quot;&lt;test&gt;&lt;![CDATA[&quot;</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"mi\">0</span><span class=\"o\">..</span><span class=\"mi\">100000</span>\n  <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"mi\">0</span><span class=\"o\">..</span><span class=\"mi\">1000</span>\n    <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s1\">&#39;00000000000000000000000000000000000000000000000000&#39;</span><span class=\"p\">)</span>\n  <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n<span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">&quot;]]&gt;&lt;/test&gt;&quot;</span><span class=\"p\">)</span>\n\n<span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n</pre></div>\n\n\n<p>When you playback the log file with tinyxml2 version 2.2, you'll get the following error:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"p\">[</span><span class=\"n\">Err</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">LogPlay</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">119</span><span class=\"p\">]</span> <span class=\"n\">Unable</span> <span class=\"n\">to</span> <span class=\"n\">load</span> <span class=\"n\">file</span><span class=\"p\">[</span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">log</span><span class=\"p\">].</span> <span class=\"n\">Check</span> <span class=\"n\">the</span> <span class=\"n\">Gazebo</span> <span class=\"n\">server</span> <span class=\"n\">log</span> <span class=\"n\">file</span> <span class=\"k\">for</span> <span class=\"n\">more</span> <span class=\"n\">information</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Err</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">LogPlay</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">127</span><span class=\"p\">]</span> <span class=\"nl\">EXCEPTION</span><span class=\"p\">:</span> <span class=\"n\">Error</span> <span class=\"n\">parsing</span> <span class=\"n\">log</span> <span class=\"n\">file</span>\n</pre></div>\n\n\n<p>When you playback the logfile with tinyxml2 version 3.0, you'll get:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"p\">[</span><span class=\"n\">Err</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">LogPlay</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">150</span><span class=\"p\">]</span> <span class=\"nl\">EXCEPTION</span><span class=\"p\">:</span> <span class=\"n\">Log</span> <span class=\"n\">file</span> <span class=\"n\">is</span> <span class=\"n\">missing</span> <span class=\"n\">the</span> <span class=\"o\">&lt;</span><span class=\"n\">gazebo_log</span><span class=\"o\">&gt;</span> <span class=\"n\">element</span>\n</pre></div>\n\n\n<p>I've included this script the the tinyxml2 issue tracker.</p>", "type": "rendered"}, "created_on": "2016-03-15T23:08:55.556893+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2016-03-15T23:08:55.560084+00:00", "type": "pullrequest_comment", "id": 15807878}