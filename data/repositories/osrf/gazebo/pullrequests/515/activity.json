{"pagelen": 50, "values": [{"approval": {"date": "2013-05-14T20:38:46.776752+00:00", "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/251569.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-251569"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "I'm fine with the current state. Please consider the inclusion of logging_zlib_extra_tests before merging.", "markup": "markdown", "html": "<p>I'm fine with the current state. Please consider the inclusion of logging_zlib_extra_tests before merging.</p>", "type": "rendered"}, "created_on": "2013-05-14T20:38:42.922265+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-05-14T20:38:42.934755+00:00", "type": "pullrequest_comment", "id": 251569}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"update": {"description": "This pull request adds zlib compression as an alternative to bzip2 (both are available via boost). Some testing has shown zlib to have faster compression, though with potentially larger file sizes. Large amounts of memory have been observed to accumulate in buffers while logging with drcsim (see issue #682), so this may mitigate that issue.\r\n\r\nThe default is still bzip2; to test with zlib compression, use the following command-line argument when invoking gazebo: `--record_encoding=zlib`.\r\n\r\nUPDATE:\r\n\r\n* Added @iche033 's changes to LogRecord_TEST and fix to race condition. I had to add a delay in the test since LogRecord::Start may return before the RunWrite, RunUpdate, and Cleanup threads have started, and quickly calling LogRecord::Stop could make things hang.", "title": "Logging speed improvement: add zlib option for compression (fix #682)", "destination": {"commit": {"hash": "eae3d1b7adce", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/eae3d1b7adce.json"}, "html": {"href": "#!/osrf/gazebo/commits/eae3d1b7adce"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "84a1d78168c6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/84a1d78168c6.json"}, "html": {"href": "#!/osrf/gazebo/commits/84a1d78168c6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "logging_zlib"}}, "state": "MERGED", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2013-05-14T20:04:34.847492+00:00"}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"approval": {"date": "2013-05-14T20:04:06.812513+00:00", "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249279.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249279"}}, "parent": {"id": 249255, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249255.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249255"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "ulimit command seems not to change anything.\n\nI'm fine with this modified version to test the Start/Stop. You can merge logging_zlib_extra_tests to get it.  \n\n", "markup": "markdown", "html": "<p>ulimit command seems not to change anything.</p>\n<p>I'm fine with this modified version to test the Start/Stop. You can merge logging_zlib_extra_tests to get it.  </p>", "type": "rendered"}, "created_on": "2013-05-13T21:23:16.750704+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-05-13T21:23:16.758817+00:00", "type": "pullrequest_comment", "id": 249279}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249255.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249255"}}, "parent": {"id": 249207, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249207.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249207"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "Thanks for the tip about files ... \n\nMy friend to trigger the bug is:\n``` \nwhile (true); do ./test/regression/logrecord_stress; done\n```\nModified version for testing is to increase the number of loop cycles, which should focus the test on start/stop. I didn't see this version failing:\n\n```\nTEST(logrecord_stress, StartStopStressing)\n{\n  EXPECT_NO_THROW(\n    gazebo::util::LogRecord *recorder = gazebo::util::LogRecord::Instance();\n    recorder->Init(\"test\");\n\n    for (int j = 0; j < 10000; ++j)\n    {\n      recorder->Start();\n      recorder->Stop();\n    }\n  );\n}\n```\n\n\n\n", "markup": "markdown", "html": "<p>Thanks for the tip about files ... </p>\n<p>My friend to trigger the bug is:</p>\n<div class=\"codehilite\"><pre><span></span>while (true); do ./test/regression/logrecord_stress; done\n</pre></div>\n\n\n<p>Modified version for testing is to increase the number of loop cycles, which should focus the test on start/stop. I didn't see this version failing:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">TEST</span><span class=\"o\">(</span><span class=\"nt\">logrecord_stress</span><span class=\"o\">,</span> <span class=\"nt\">StartStopStressing</span><span class=\"o\">)</span>\n<span class=\"p\">{</span>\n  <span class=\"err\">EXPECT_NO_THROW(</span>\n    <span class=\"n\">gazebo</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"n\">util</span><span class=\"o\">::</span><span class=\"n\">LogRecord</span> <span class=\"o\">*</span><span class=\"n\">recorder</span> <span class=\"o\">=</span> <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">util</span><span class=\"o\">::</span><span class=\"n\">LogRecord</span><span class=\"o\">::</span><span class=\"nf\">Instance</span><span class=\"p\">();</span>\n    <span class=\"err\">recorder-&gt;Init(&quot;test&quot;)</span><span class=\"p\">;</span>\n\n    <span class=\"err\">for</span> <span class=\"err\">(int</span> <span class=\"err\">j</span> <span class=\"err\">=</span> <span class=\"err\">0</span><span class=\"p\">;</span> <span class=\"err\">j</span> <span class=\"err\">&lt;</span> <span class=\"err\">10000</span><span class=\"p\">;</span> <span class=\"err\">++j)</span>\n    <span class=\"err\">{</span>\n      <span class=\"err\">recorder-&gt;Start()</span><span class=\"p\">;</span>\n      <span class=\"err\">recorder-&gt;Stop()</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n  <span class=\"o\">);</span>\n<span class=\"err\">}</span>\n</pre></div>", "type": "rendered"}, "created_on": "2013-05-13T21:12:29.370410+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-05-13T21:12:29.386133+00:00", "type": "pullrequest_comment", "id": 249255}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249207.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249207"}}, "parent": {"id": 249183, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249183.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249183"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "Yes, you're right about the default parameter. Can you `ulimit -c unlimited` and look at the core file? I can't reproduce the problem.\n\nOne other concern is that it will create a new log file in your `.gazebo/log` each time you call Start, so we may be polluting with temporary files with these tests.", "markup": "markdown", "html": "<p>Yes, you're right about the default parameter. Can you <code>ulimit -c unlimited</code> and look at the core file? I can't reproduce the problem.</p>\n<p>One other concern is that it will create a new log file in your <code>.gazebo/log</code> each time you call Start, so we may be polluting with temporary files with these tests.</p>", "type": "rendered"}, "created_on": "2013-05-13T20:59:30.942938+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-05-13T20:59:30.951110+00:00", "type": "pullrequest_comment", "id": 249207}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249183.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249183"}}, "parent": {"id": 249140, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249140.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249140"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "I still see it failing.\n\nStart first parameter will fall to default \"bz2\" if no parameters are passed so I believe the code will go by the same way. Am I missing something?", "markup": "markdown", "html": "<p>I still see it failing.</p>\n<p>Start first parameter will fall to default \"bz2\" if no parameters are passed so I believe the code will go by the same way. Am I missing something?</p>", "type": "rendered"}, "created_on": "2013-05-13T20:46:27.283973+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-05-13T20:46:27.291014+00:00", "type": "pullrequest_comment", "id": 249183}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249140.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249140"}}, "parent": {"id": 249069, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249069.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249069"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "If you call LogRecord::Start with no arguments it will throw. This is a good test though. Can you change `recorder->Start()` to `recorder->Start(\"txt\")`?", "markup": "markdown", "html": "<p>If you call LogRecord::Start with no arguments it will throw. This is a good test though. Can you change <code>recorder-&gt;Start()</code> to <code>recorder-&gt;Start(\"txt\")</code>?</p>", "type": "rendered"}, "created_on": "2013-05-13T20:29:41.398559+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-05-13T20:32:41.283487+00:00", "type": "pullrequest_comment", "id": 249140}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249137.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249137"}}, "parent": {"id": 249069, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249069.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249069"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "`recorder->Stop()` triggers log recorder's cleanup in another thread and previously we didn't have a way to tell when cleanup actually finishes. So we had to add the ` while (!recorder->IsReadyToStart())` loop to make sure of that", "markup": "markdown", "html": "<p><code>recorder-&gt;Stop()</code> triggers log recorder's cleanup in another thread and previously we didn't have a way to tell when cleanup actually finishes. So we had to add the <code>while (!recorder-&gt;IsReadyToStart())</code> loop to make sure of that</p>", "type": "rendered"}, "created_on": "2013-05-13T20:29:09.227309+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2013-05-13T20:29:09.235626+00:00", "type": "pullrequest_comment", "id": 249137}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/249069.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-249069"}}, "parent": {"id": 248669, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248669.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248669"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "I was adding this test (thanks @iche033) to our test suite and tried a slightly modified and evil version, not sure if it makes sense:\n\n```\nTEST(logrecord_stress, StartStopStressing)\n{\n  gazebo::util::LogRecord *recorder = gazebo::util::LogRecord::Instance();\n  EXPECT_TRUE(recorder->Init(\"test\"));\n\n  for (int j = 0; j < 100; ++j)\n  {\n    EXPECT_TRUE(recorder->Start());\n    recorder->Stop();\n  }\n}\n```\n\nSometimes is failing (gdb overhead is making it to work so no bracktrace) with the message:\n\n```\nRunning main() from gtest_main.cc\n[==========] Running 1 test from 1 test case.\n[----------] Global test environment set-up.\n[----------] 1 test from logrecord_stress\n[ RUN      ] logrecord_stress.StartStopStressing\n[       OK ] logrecord_stress.StartStopStressing (10 ms)\n[----------] 1 test from logrecord_stress (10 ms total)\n\n[----------] Global test environment tear-down\n[==========] 1 test from 1 test case ran. (11 ms total)\n[  PASSED  ] 1 test.\nterminate called after throwing an instance of 'boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::lock_error> >'\n  what():  boost::lock_error\n```", "markup": "markdown", "html": "<p>I was adding this test (thanks @iche033) to our test suite and tried a slightly modified and evil version, not sure if it makes sense:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">TEST</span><span class=\"o\">(</span><span class=\"nt\">logrecord_stress</span><span class=\"o\">,</span> <span class=\"nt\">StartStopStressing</span><span class=\"o\">)</span>\n<span class=\"p\">{</span>\n  <span class=\"n\">gazebo</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"n\">util</span><span class=\"o\">::</span><span class=\"n\">LogRecord</span> <span class=\"o\">*</span><span class=\"n\">recorder</span> <span class=\"o\">=</span> <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">util</span><span class=\"o\">::</span><span class=\"n\">LogRecord</span><span class=\"o\">::</span><span class=\"nf\">Instance</span><span class=\"p\">();</span>\n  <span class=\"err\">EXPECT_TRUE(recorder-&gt;Init(&quot;test&quot;))</span><span class=\"p\">;</span>\n\n  <span class=\"err\">for</span> <span class=\"err\">(int</span> <span class=\"err\">j</span> <span class=\"err\">=</span> <span class=\"err\">0</span><span class=\"p\">;</span> <span class=\"err\">j</span> <span class=\"err\">&lt;</span> <span class=\"err\">100</span><span class=\"p\">;</span> <span class=\"err\">++j)</span>\n  <span class=\"err\">{</span>\n    <span class=\"err\">EXPECT_TRUE(recorder-&gt;Start())</span><span class=\"p\">;</span>\n    <span class=\"err\">recorder-&gt;Stop()</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n<span class=\"err\">}</span>\n</pre></div>\n\n\n<p>Sometimes is failing (gdb overhead is making it to work so no bracktrace) with the message:</p>\n<div class=\"codehilite\"><pre><span></span>Running main() from gtest_main.cc\n[==========] Running 1 test from 1 test case.\n[----------] Global test environment set-up.\n[----------] 1 test from logrecord_stress\n[ RUN      ] logrecord_stress.StartStopStressing\n[       OK ] logrecord_stress.StartStopStressing (10 ms)\n[----------] 1 test from logrecord_stress (10 ms total)\n\n[----------] Global test environment tear-down\n[==========] 1 test from 1 test case ran. (11 ms total)\n[  PASSED  ] 1 test.\nterminate called after throwing an instance of &#39;boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;boost::lock_error&gt; &gt;&#39;\n  what():  boost::lock_error\n</pre></div>", "type": "rendered"}, "created_on": "2013-05-13T20:13:19.087260+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-05-13T20:13:19.103394+00:00", "type": "pullrequest_comment", "id": 249069}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"approval": {"date": "2013-05-13T17:47:50.421447+00:00", "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248669.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248669"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "I just tried a quick stress test and it's working for me\n\n\n\n```\n#!c++\n\n  gazebo::util::LogRecord *recorder = gazebo::util::LogRecord::Instance();\n  for (int j = 0; j < 100; ++j)\n  {\n    EXPECT_TRUE(recorder->Init(\"test\"));\n    EXPECT_TRUE(recorder->Start(\"zlib\"));\n    recorder->Stop();\n    int i = 0;\n    while (!recorder->IsReadyToStart())\n    {\n      gazebo::common::Time::MSleep(100);\n      if ((++i % 50) == 0)\n        gzdbg << \"Waiting for recorder->IsReadyToStart()\" << std::endl;\n    }\n  }\n```", "markup": "markdown", "html": "<p>I just tried a quick stress test and it's working for me</p>\n<div class=\"codehilite language-c++\"><pre><span></span>  <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">util</span><span class=\"o\">::</span><span class=\"n\">LogRecord</span> <span class=\"o\">*</span><span class=\"n\">recorder</span> <span class=\"o\">=</span> <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">util</span><span class=\"o\">::</span><span class=\"n\">LogRecord</span><span class=\"o\">::</span><span class=\"n\">Instance</span><span class=\"p\">();</span>\n  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"kt\">int</span> <span class=\"n\">j</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"n\">j</span> <span class=\"o\">&lt;</span> <span class=\"mi\">100</span><span class=\"p\">;</span> <span class=\"o\">++</span><span class=\"n\">j</span><span class=\"p\">)</span>\n  <span class=\"p\">{</span>\n    <span class=\"n\">EXPECT_TRUE</span><span class=\"p\">(</span><span class=\"n\">recorder</span><span class=\"o\">-&gt;</span><span class=\"n\">Init</span><span class=\"p\">(</span><span class=\"s\">&quot;test&quot;</span><span class=\"p\">));</span>\n    <span class=\"n\">EXPECT_TRUE</span><span class=\"p\">(</span><span class=\"n\">recorder</span><span class=\"o\">-&gt;</span><span class=\"n\">Start</span><span class=\"p\">(</span><span class=\"s\">&quot;zlib&quot;</span><span class=\"p\">));</span>\n    <span class=\"n\">recorder</span><span class=\"o\">-&gt;</span><span class=\"n\">Stop</span><span class=\"p\">();</span>\n    <span class=\"kt\">int</span> <span class=\"n\">i</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n    <span class=\"k\">while</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">recorder</span><span class=\"o\">-&gt;</span><span class=\"n\">IsReadyToStart</span><span class=\"p\">())</span>\n    <span class=\"p\">{</span>\n      <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">common</span><span class=\"o\">::</span><span class=\"n\">Time</span><span class=\"o\">::</span><span class=\"n\">MSleep</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">);</span>\n      <span class=\"k\">if</span> <span class=\"p\">((</span><span class=\"o\">++</span><span class=\"n\">i</span> <span class=\"o\">%</span> <span class=\"mi\">50</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n        <span class=\"n\">gzdbg</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;Waiting for recorder-&gt;IsReadyToStart()&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n</pre></div>", "type": "rendered"}, "created_on": "2013-05-13T17:47:10.533994+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2013-05-13T17:47:10.545192+00:00", "type": "pullrequest_comment", "id": 248669}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248601.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248601"}}, "parent": {"id": 248484, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248484.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248484"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "I added a condition variable in 84a1d78 to ensure that the threads have all started before exiting `LogRecord::Start`, so that we don't have to wait before calling `LogRecord::Stop()`.", "markup": "markdown", "html": "<p>I added a condition variable in <a href=\"#!/osrf/gazebo/commits/84a1d78\" rel=\"nofollow\" class=\"ap-connect-link\">84a1d78</a> to ensure that the threads have all started before exiting <code>LogRecord::Start</code>, so that we don't have to wait before calling <code>LogRecord::Stop()</code>.</p>", "type": "rendered"}, "created_on": "2013-05-13T17:23:25.152292+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2013-05-13T17:23:25.163045+00:00", "type": "pullrequest_comment", "id": 248601}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248597.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248597"}}, "parent": {"id": 248592, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248592.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248592"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "No worries.", "markup": "markdown", "html": "<p>No worries.</p>", "type": "rendered"}, "created_on": "2013-05-13T17:21:53.874624+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-05-13T17:21:53.883353+00:00", "type": "pullrequest_comment", "id": 248597}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"update": {"description": "This pull request adds zlib compression as an alternative to bzip2 (both are available via boost). Some testing has shown zlib to have faster compression, though with potentially larger file sizes. Large amounts of memory have been observed to accumulate in buffers while logging with drcsim (see issue #682), so this may mitigate that issue.\r\n\r\nThe default is still bzip2; to test with zlib compression, use the following command-line argument when invoking gazebo: `--record_encoding=zlib`.\r\n\r\nUPDATE:\r\n\r\n* Added @iche033 's changes to LogRecord_TEST and fix to race condition. I had to add a delay in the test since LogRecord::Start may return before the RunWrite, RunUpdate, and Cleanup threads have started, and quickly calling LogRecord::Stop could make things hang.", "title": "Logging speed improvement: add zlib option for compression (fix #682)", "destination": {"commit": {"hash": "eae3d1b7adce", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/eae3d1b7adce.json"}, "html": {"href": "#!/osrf/gazebo/commits/eae3d1b7adce"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "84a1d78168c6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/84a1d78168c6.json"}, "html": {"href": "#!/osrf/gazebo/commits/84a1d78168c6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "logging_zlib"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2013-05-13T17:21:41.156710+00:00"}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248592.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248592"}}, "parent": {"id": 248588, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248588.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248588"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "Indeed, it is. \n```\nDepends: libbz2-1.0, libc6 (>= 2.4), libgcc1 (>= 1:4.1.1), libstdc++6 (>= 4.2.1), zlib1g (>= 1:1.1.4)\n```\nSorry for the noise.", "markup": "markdown", "html": "<p>Indeed, it is. </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">Depends</span><span class=\"o\">:</span> <span class=\"n\">libbz2</span><span class=\"o\">-</span><span class=\"mf\">1.0</span><span class=\"o\">,</span> <span class=\"n\">libc6</span> <span class=\"o\">(&gt;=</span> <span class=\"mf\">2.4</span><span class=\"o\">),</span> <span class=\"n\">libgcc1</span> <span class=\"o\">(&gt;=</span> <span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mf\">4.1</span><span class=\"o\">.</span><span class=\"mi\">1</span><span class=\"o\">),</span> <span class=\"n\">libstdc</span><span class=\"o\">++</span><span class=\"mi\">6</span> <span class=\"o\">(&gt;=</span> <span class=\"mf\">4.2</span><span class=\"o\">.</span><span class=\"mi\">1</span><span class=\"o\">),</span> <span class=\"n\">zlib1g</span> <span class=\"o\">(&gt;=</span> <span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mf\">1.1</span><span class=\"o\">.</span><span class=\"mi\">4</span><span class=\"o\">)</span>\n</pre></div>\n\n\n<p>Sorry for the noise.</p>", "type": "rendered"}, "created_on": "2013-05-13T17:19:56.999690+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-05-13T17:19:57.013837+00:00", "type": "pullrequest_comment", "id": 248592}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248588.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248588"}}, "parent": {"id": 248571, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248571.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248571"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "cmake/SearchForStuff.cmake checks for boost iostreams so it should be sufficient.", "markup": "markdown", "html": "<p>cmake/SearchForStuff.cmake checks for boost iostreams so it should be sufficient.</p>", "type": "rendered"}, "created_on": "2013-05-13T17:18:16.365942+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2013-05-13T17:18:16.374010+00:00", "type": "pullrequest_comment", "id": 248588}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248571.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248571"}}, "parent": {"id": 248566, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248566.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248566"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "It's using boost for zlib, just like it uses boost for bzip2. Do we ever check for the specific parts of boost that we use?", "markup": "markdown", "html": "<p>It's using boost for zlib, just like it uses boost for bzip2. Do we ever check for the specific parts of boost that we use?</p>", "type": "rendered"}, "created_on": "2013-05-13T17:08:42.233253+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-05-13T17:08:42.241172+00:00", "type": "pullrequest_comment", "id": 248571}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248566.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248566"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "I suppose this will imply a new dependency on zlib for our gazebo packages, won't it? Should we write a check in the cmake system also?", "markup": "markdown", "html": "<p>I suppose this will imply a new dependency on zlib for our gazebo packages, won't it? Should we write a check in the cmake system also?</p>", "type": "rendered"}, "created_on": "2013-05-13T17:04:09.467975+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-05-13T17:04:09.481045+00:00", "type": "pullrequest_comment", "id": 248566}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248526.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248526"}}, "parent": {"id": 248494, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248494.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248494"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "That's a good point, so I switched to a `while (!recorder->IsReadyToStart())` in 4201c5a, with a few debug messages so we can see if it's getting stuck there.", "markup": "markdown", "html": "<p>That's a good point, so I switched to a <code>while (!recorder-&gt;IsReadyToStart())</code> in <a href=\"#!/osrf/gazebo/commits/4201c5a\" rel=\"nofollow\" class=\"ap-connect-link\">4201c5a</a>, with a few debug messages so we can see if it's getting stuck there.</p>", "type": "rendered"}, "created_on": "2013-05-13T16:49:48.715611+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2013-05-13T16:49:48.728020+00:00", "type": "pullrequest_comment", "id": 248526}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"update": {"description": "This pull request adds zlib compression as an alternative to bzip2 (both are available via boost). Some testing has shown zlib to have faster compression, though with potentially larger file sizes. Large amounts of memory have been observed to accumulate in buffers while logging with drcsim (see issue #682), so this may mitigate that issue.\r\n\r\nThe default is still bzip2; to test with zlib compression, use the following command-line argument when invoking gazebo: `--record_encoding=zlib`.\r\n\r\nUPDATE:\r\n\r\n* Added @iche033 's changes to LogRecord_TEST and fix to race condition. I had to add a delay in the test since LogRecord::Start may return before the RunWrite, RunUpdate, and Cleanup threads have started, and quickly calling LogRecord::Stop could make things hang.", "title": "Logging speed improvement: add zlib option for compression (fix #682)", "destination": {"commit": {"hash": "eae3d1b7adce", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/eae3d1b7adce.json"}, "html": {"href": "#!/osrf/gazebo/commits/eae3d1b7adce"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "4201c5a93fe0", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/4201c5a93fe0.json"}, "html": {"href": "#!/osrf/gazebo/commits/4201c5a93fe0"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "logging_zlib"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2013-05-13T16:48:47.813044+00:00"}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248494.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248494"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "Timeout implemented using the i < iMax sounds like another possible case for failing under different conditions. What about leave it to max time used in gtest? 'Unit/System testing' it's more about finding failures, not performance errors.", "markup": "markdown", "html": "<p>Timeout implemented using the i &lt; iMax sounds like another possible case for failing under different conditions. What about leave it to max time used in gtest? 'Unit/System testing' it's more about finding failures, not performance errors.</p>", "type": "rendered"}, "created_on": "2013-05-13T16:32:12.914929+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2013-05-13T16:32:12.922516+00:00", "type": "pullrequest_comment", "id": 248494}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/248484.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-248484"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "We should try to not relaying in \"time\" during testing, it will makes things to fail under different conditions (different hardware, different cpu load, etc). One way of fixing this is somewhat polling the recorder about the state until we know it's ready to be stopped.", "markup": "markdown", "html": "<p>We should try to not relaying in \"time\" during testing, it will makes things to fail under different conditions (different hardware, different cpu load, etc). One way of fixing this is somewhat polling the recorder about the state until we know it's ready to be stopped.</p>", "type": "rendered"}, "created_on": "2013-05-13T16:29:59.727598+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2013-05-13T16:29:59.740902+00:00", "type": "pullrequest_comment", "id": 248484}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"update": {"description": "This pull request adds zlib compression as an alternative to bzip2 (both are available via boost). Some testing has shown zlib to have faster compression, though with potentially larger file sizes. Large amounts of memory have been observed to accumulate in buffers while logging with drcsim (see issue #682), so this may mitigate that issue.\r\n\r\nThe default is still bzip2; to test with zlib compression, use the following command-line argument when invoking gazebo: `--record_encoding=zlib`.\r\n\r\nUPDATE:\r\n\r\n* Added @iche033 's changes to LogRecord_TEST and fix to race condition. I had to add a delay in the test since LogRecord::Start may return before the RunWrite, RunUpdate, and Cleanup threads have started, and quickly calling LogRecord::Stop could make things hang.", "title": "Logging speed improvement: add zlib option for compression (fix #682)", "destination": {"commit": {"hash": "eae3d1b7adce", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/eae3d1b7adce.json"}, "html": {"href": "#!/osrf/gazebo/commits/eae3d1b7adce"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "70ddb94f16c0", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/70ddb94f16c0.json"}, "html": {"href": "#!/osrf/gazebo/commits/70ddb94f16c0"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "logging_zlib"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2013-05-11T08:18:04.179092+00:00"}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"update": {"description": "This pull request adds zlib compression as an alternative to bzip2 (both are available via boost). Some testing has shown zlib to have faster compression, though with potentially larger file sizes. Large amounts of memory have been observed to accumulate in buffers while logging with drcsim (see issue #682), so this may mitigate that issue.\r\n\r\nThe default is still bzip2; to test with zlib compression, use the following command-line argument when invoking gazebo: `--record_encoding=zlib`.", "title": "Logging speed improvement: add zlib option for compression (fix #682)", "destination": {"commit": {"hash": "eae3d1b7adce", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/eae3d1b7adce.json"}, "html": {"href": "#!/osrf/gazebo/commits/eae3d1b7adce"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "70ddb94f16c0", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/70ddb94f16c0.json"}, "html": {"href": "#!/osrf/gazebo/commits/70ddb94f16c0"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "logging_zlib"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2013-05-11T08:14:44.816778+00:00"}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/246469.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-246469"}}, "parent": {"id": 246426, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/246426.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-246426"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "Thanks, I tweaked things a bit in 1a59823 and am testing it. I'll merge after testing.", "markup": "markdown", "html": "<p>Thanks, I tweaked things a bit in <a href=\"#!/osrf/gazebo/commits/1a59823\" rel=\"nofollow\" class=\"ap-connect-link\">1a59823</a> and am testing it. I'll merge after testing.</p>", "type": "rendered"}, "created_on": "2013-05-11T05:53:08.563147+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-05-11T05:53:08.574212+00:00", "type": "pullrequest_comment", "id": 246469}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515/comments/246426.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515/_/diff#comment-246426"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "content": {"raw": "I added unit test for zlib in [logging_test](#!/osrf/gazebo/commits/branch/logging_test) branch. I had to add a variable to keep track that the previous logging session has completely finished in between tests so that it doesn't deadlock. Feel free to merge it if you think it's ok.", "markup": "markdown", "html": "<p>I added unit test for zlib in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/commits/branch/logging_test\" rel=\"nofollow\">logging_test</a> branch. I had to add a variable to keep track that the previous logging session has completely finished in between tests so that it doesn't deadlock. Feel free to merge it if you think it's ok.</p>", "type": "rendered"}, "created_on": "2013-05-11T01:55:24.967846+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2013-05-11T01:55:24.977375+00:00", "type": "pullrequest_comment", "id": 246426}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"approval": {"date": "2013-05-10T22:56:38.165843+00:00", "pullrequest": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}, "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"update": {"description": "This pull request adds zlib compression as an alternative to bzip2 (both are available via boost). Some testing has shown zlib to have faster compression, though with potentially larger file sizes. Large amounts of memory have been observed to accumulate in buffers while logging with drcsim (see issue #682), so this may mitigate that issue.\r\n\r\nThe default is still bzip2; to test with zlib compression, use the following command-line argument when invoking gazebo: `--record_encoding=zlib`.", "title": "Logging speed improvement: add zlib option for compression (fix #682)", "destination": {"commit": {"hash": "eae3d1b7adce", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/eae3d1b7adce.json"}, "html": {"href": "#!/osrf/gazebo/commits/eae3d1b7adce"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "58256d2fb347", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/58256d2fb347.json"}, "html": {"href": "#!/osrf/gazebo/commits/58256d2fb347"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "logging_zlib"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2013-05-10T21:21:18.579056+00:00"}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}, {"update": {"description": "This pull request adds zlib compression as an alternative to bzip2 (both are available via boost). Some testing has shown zlib to have faster compression, though with potentially larger file sizes. Large amounts of memory have been observed to accumulate in buffers while logging with drcsim (see issue #682), so this may mitigate that issue.\r\n\r\nThe default is still bzip2; to test with zlib compression, use the following command-line argument when invoking gazebo: `--record_encoding=zlib`.", "title": "Logging speed improvement: add zlib option for compression (fix #682)", "destination": {"commit": {"hash": "eae3d1b7adce", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/eae3d1b7adce.json"}, "html": {"href": "#!/osrf/gazebo/commits/eae3d1b7adce"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "58256d2fb347", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/58256d2fb347.json"}, "html": {"href": "#!/osrf/gazebo/commits/58256d2fb347"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "logging_zlib"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2013-05-10T21:21:18.500005+00:00"}, "pull_request": {"type": "pullrequest", "id": 515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/515"}}, "title": "Logging speed improvement: add zlib option for compression (fix #682)"}}]}