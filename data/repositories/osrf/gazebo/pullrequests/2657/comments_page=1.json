{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/33617657.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:7bbb1a6196a0..0d39ebf2b92b?path=test%2Fintegration%2FCMakeLists.txt"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-33617657"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "place in its alphabetical spot in the list", "markup": "markdown", "html": "<p>place in its alphabetical spot in the list</p>", "type": "rendered"}, "created_on": "2017-03-22T08:54:57.944808+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 107, "from": null, "path": "test/integration/CMakeLists.txt"}, "updated_on": "2017-03-22T08:54:57.949433+00:00", "type": "pullrequest_comment", "id": 33617657}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/33617906.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-33617906"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "the [test fails](http://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/994/testReport/junit/(root)/INTEGRATION_transport_msg_count/test_ran/)", "markup": "markdown", "html": "<p>the <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/994/testReport/junit/(root)/INTEGRATION_transport_msg_count/test_ran/\" rel=\"nofollow\">test fails</a></p>", "type": "rendered"}, "created_on": "2017-03-22T08:57:48.068124+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-03-22T08:57:48.075522+00:00", "type": "pullrequest_comment", "id": 33617906}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/33683777.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-33683777"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Did you comment the `#define TEMP_NEW_APPROACH_TEST` in  Publisher.cc for the tests?", "markup": "markdown", "html": "<p>Did you comment the <code>#define TEMP_NEW_APPROACH_TEST</code> in  Publisher.cc for the tests?</p>", "type": "rendered"}, "created_on": "2017-03-22T21:43:35.049944+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2017-03-22T21:43:35.091120+00:00", "type": "pullrequest_comment", "id": 33683777}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/33684600.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-33684600"}}, "parent": {"id": 33683777, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/33683777.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-33683777"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "sorry, I ran your branch on jenkins without modifications. I'm still reading the summary to get an understanding of the issue; I was just noting that the test fails in the current state of the branch", "markup": "markdown", "html": "<p>sorry, I ran your branch on jenkins without modifications. I'm still reading the summary to get an understanding of the issue; I was just noting that the test fails in the current state of the branch</p>", "type": "rendered"}, "created_on": "2017-03-22T22:01:01.628646+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-03-22T22:01:01.631313+00:00", "type": "pullrequest_comment", "id": 33684600}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/33687351.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-33687351"}}, "parent": {"id": 33684600, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/33684600.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-33684600"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Ok\u2026 hmmm it should not fail with the macro enabled, only with it is disabled\u2026 at least it didn't fail on my machine with the fix. I'll have to look into this. I'm away for a long weekend but will try to squeeze an hour or so in for it", "markup": "markdown", "html": "<p>Ok\u2026 hmmm it should not fail with the macro enabled, only with it is disabled\u2026 at least it didn't fail on my machine with the fix. I'll have to look into this. I'm away for a long weekend but will try to squeeze an hour or so in for it</p>", "type": "rendered"}, "created_on": "2017-03-22T23:05:03.595794+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2017-03-22T23:05:16.335035+00:00", "type": "pullrequest_comment", "id": 33687351}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/33687470.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-33687470"}}, "parent": {"id": 33684600, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/33684600.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-33684600"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Just saw it's a timeout issue (see [jenkins output line 303](http://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/994/console)) so it's not related to the actual bug fix. Will look into it.", "markup": "markdown", "html": "<p>Just saw it's a timeout issue (see <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/994/console\" rel=\"nofollow\">jenkins output line 303</a>) so it's not related to the actual bug fix. Will look into it.</p>", "type": "rendered"}, "created_on": "2017-03-22T23:07:53.574578+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2017-03-22T23:08:28.848343+00:00", "type": "pullrequest_comment", "id": 33687470}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/36370001.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-36370001"}}, "parent": {"id": 33684600, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/33684600.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-33684600"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Started [another build](https://build.osrfoundation.org/job/gazebo-ci-pr_any/547/) because the link doesn't work any more", "markup": "markdown", "html": "<p>Started <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any/547/\" rel=\"nofollow\">another build</a> because the link doesn't work any more</p>", "type": "rendered"}, "created_on": "2017-05-08T05:03:03.359046+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2017-05-08T05:03:03.422682+00:00", "type": "pullrequest_comment", "id": 36370001}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/36372724.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-36372724"}}, "parent": {"id": 33684600, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/33684600.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-33684600"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "How silly of me... the timeout of course happens because this test is not designed to run in automated mode yet, it still requires you to [start a test subscriber in another terminal](#!/osrf/gazebo/pull-requests/2657/fixing-issue-in-which-publishing-of/diff#Ltest/integration/transport_msg_count.ccT90). I'll add the automated version for this.", "markup": "markdown", "html": "<p>How silly of me... the timeout of course happens because this test is not designed to run in automated mode yet, it still requires you to <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/pull-requests/2657/fixing-issue-in-which-publishing-of/diff#Ltest/integration/transport_msg_count.ccT90\" rel=\"nofollow\">start a test subscriber in another terminal</a>. I'll add the automated version for this.</p>", "type": "rendered"}, "created_on": "2017-05-08T06:34:13.235210+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2017-05-08T06:34:13.296086+00:00", "type": "pullrequest_comment", "id": 36372724}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/36372804.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-36372804"}}, "parent": {"id": 36372724, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/36372724.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-36372724"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Ahrmm... brings me to the next question: Any hint on how to simulate a true remote connection? If I just start a subscriber locally in the test source, it won't be truly remote, so it won't work.", "markup": "markdown", "html": "<p>Ahrmm... brings me to the next question: Any hint on how to simulate a true remote connection? If I just start a subscriber locally in the test source, it won't be truly remote, so it won't work.</p>", "type": "rendered"}, "created_on": "2017-05-08T06:35:49.299368+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2017-05-08T06:35:49.342936+00:00", "type": "pullrequest_comment", "id": 36372804}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/36525181.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-36525181"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "I fixed up the test so it now can handle automated testing. Started a [new build](https://build.osrfoundation.org/job/gazebo-ci-pr_any/548/). The test will not be failing because the bug fix is already applied.\nTo disable the bug fix and go back to old code, it is still necessary to define the macro TEMP_NEW_APPROACH_TEST in Publisher.cc, then the test fails.\n\nTo demonstrate how the test normally fails, I will create a branch directly from default with only this test, so we can see that it fails under normal circumstances. Will post the link here as soon as I've got that.", "markup": "markdown", "html": "<p>I fixed up the test so it now can handle automated testing. Started a <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any/548/\" rel=\"nofollow\">new build</a>. The test will not be failing because the bug fix is already applied.\nTo disable the bug fix and go back to old code, it is still necessary to define the macro TEMP_NEW_APPROACH_TEST in Publisher.cc, then the test fails.</p>\n<p>To demonstrate how the test normally fails, I will create a branch directly from default with only this test, so we can see that it fails under normal circumstances. Will post the link here as soon as I've got that.</p>", "type": "rendered"}, "created_on": "2017-05-09T23:01:57.694399+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2017-05-09T23:01:57.765738+00:00", "type": "pullrequest_comment", "id": 36525181}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/36527251.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-36527251"}}, "parent": {"id": 36525181, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/36525181.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-36525181"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Added the same test file to the branch [transport_sendmessage_blocking_issue_test](https://bitbucket.org/JenniferBuehler/gazebo/branch/transport_sendmessage_blocking_issue_test#diff) and [queued a build](https://build.osrfoundation.org/job/gazebo-ci-pr_any/549/). The test should be failing.\n\nQuestion: Should we get rid of the macro ``TEMP_NEW_APPROACH_TEST `` now that we have the other branch with the failing test? Advantage of keeping it would be that you can easily test locally, switching between bugfix applied/not applied. Without the macro, we have to switch between branches and change the test accordingly in the other branch (if we apply changes to the test at all).", "markup": "markdown", "html": "<p>Added the same test file to the branch <a data-is-external-link=\"true\" href=\"https://bitbucket.org/JenniferBuehler/gazebo/branch/transport_sendmessage_blocking_issue_test#diff\" rel=\"nofollow\">transport_sendmessage_blocking_issue_test</a> and <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any/549/\" rel=\"nofollow\">queued a build</a>. The test should be failing.</p>\n<p>Question: Should we get rid of the macro <code>TEMP_NEW_APPROACH_TEST</code> now that we have the other branch with the failing test? Advantage of keeping it would be that you can easily test locally, switching between bugfix applied/not applied. Without the macro, we have to switch between branches and change the test accordingly in the other branch (if we apply changes to the test at all).</p>", "type": "rendered"}, "created_on": "2017-05-10T00:13:34.849540+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2017-05-10T00:13:34.915431+00:00", "type": "pullrequest_comment", "id": 36527251}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/36531900.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-36531900"}}, "parent": {"id": 36527251, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/36527251.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-36527251"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "[It's failing](https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1080/consoleFull) (see test 461 in output log), though it's not listed in the [test failures overview](https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1080/#showFailuresLink), any idea why? In [this build](https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/166/) it is listed as failing...", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1080/consoleFull\" rel=\"nofollow\">It's failing</a> (see test 461 in output log), though it's not listed in the <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1080/#showFailuresLink\" rel=\"nofollow\">test failures overview</a>, any idea why? In <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/166/\" rel=\"nofollow\">this build</a> it is listed as failing...</p>", "type": "rendered"}, "created_on": "2017-05-10T03:33:01.713467+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2017-05-10T03:33:01.783561+00:00", "type": "pullrequest_comment", "id": 36531900}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42961126.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42961126"}}, "parent": {"id": 36527251, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/36527251.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-36527251"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "I think it is fine to remove the preprocessor conditional and just leave the new approach.", "markup": "markdown", "html": "<p>I think it is fine to remove the preprocessor conditional and just leave the new approach.</p>", "type": "rendered"}, "created_on": "2017-08-16T21:06:04.462574+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-16T21:07:47.406324+00:00", "type": "pullrequest_comment", "id": 42961126}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42972219.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42972219"}}, "parent": {"id": 42961126, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42961126.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42961126"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Ok, can do! Does anyone else still need it for testing? If not, I'll remove it.", "markup": "markdown", "html": "<p>Ok, can do! Does anyone else still need it for testing? If not, I'll remove it.</p>", "type": "rendered"}, "created_on": "2017-08-17T02:19:48.549741+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2017-08-17T02:19:48.594028+00:00", "type": "pullrequest_comment", "id": 42972219}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57618515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57618515"}}, "parent": {"id": 42972219, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42972219.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42972219"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "yeah, I think the ifdef's can be removed", "markup": "markdown", "html": "<p>yeah, I think the ifdef's can be removed</p>", "type": "rendered"}, "created_on": "2018-03-01T00:48:52.003055+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-03-01T00:48:52.006028+00:00", "type": "pullrequest_comment", "id": 57618515}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57742997.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57742997"}}, "parent": {"id": 57618515, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57618515.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57618515"}}, "depth": 5}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Done", "markup": "markdown", "html": "<p>Done</p>", "type": "rendered"}, "created_on": "2018-03-02T00:17:27.762722+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2018-03-02T00:17:27.796553+00:00", "type": "pullrequest_comment", "id": 57742997}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/40329486.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=gazebo%2Ftransport%2FPublisher.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-40329486"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "I don't understand the check `!this->pubIds.empty()`. It looks like `this->publication->Publish(...)` calls `CallbackHelper::HandleData(...)` which is an instance of `SubscriptionTransport` which calls `Connection::EnqueueMsg` which saves the bytes to write in a queue on the connection. Even if there are outstanding pubIds, aren't new messages still enqueued on each `Connection` in order they are published?", "markup": "markdown", "html": "<p>I don't understand the check <code>!this-&gt;pubIds.empty()</code>. It looks like <code>this-&gt;publication-&gt;Publish(...)</code> calls <code>CallbackHelper::HandleData(...)</code> which is an instance of <code>SubscriptionTransport</code> which calls <code>Connection::EnqueueMsg</code> which saves the bytes to write in a queue on the connection. Even if there are outstanding pubIds, aren't new messages still enqueued on each <code>Connection</code> in order they are published?</p>", "type": "rendered"}, "created_on": "2017-07-07T16:24:29.836380+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": 171, "path": "gazebo/transport/Publisher.cc"}, "updated_on": "2017-07-07T16:24:29.839524+00:00", "type": "pullrequest_comment", "id": 40329486}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42701435.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=gazebo%2Ftransport%2FPublisher.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42701435"}}, "parent": {"id": 40329486, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/40329486.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-40329486"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Good point, I wasn't 100% sure why this has been done either, I've commented on that in the PR description (which is admittedly painfully long)...\n\n`This can be interpreted as \"if there are any messages which have not finished publishing yet, don't proceed, and instead keep them in the this->messages buffer until the next time SendMessage() is called\". I guess this was done in order to ensure that messages are sent out in the right order (?).`\n\nIt's maybe to prevent calling `Publish()` at all in the first place while there are any messages still hanging around which haven't been finalised with `OnPublishComplete` yet, but I could not find any documentation about why things are set up this way either.", "markup": "markdown", "html": "<p>Good point, I wasn't 100% sure why this has been done either, I've commented on that in the PR description (which is admittedly painfully long)...</p>\n<p><code>This can be interpreted as \"if there are any messages which have not finished publishing yet, don't proceed, and instead keep them in the this-&gt;messages buffer until the next time SendMessage() is called\". I guess this was done in order to ensure that messages are sent out in the right order (?).</code></p>\n<p>It's maybe to prevent calling <code>Publish()</code> at all in the first place while there are any messages still hanging around which haven't been finalised with <code>OnPublishComplete</code> yet, but I could not find any documentation about why things are set up this way either.</p>", "type": "rendered"}, "created_on": "2017-08-12T04:55:14.621991+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "inline": {"to": null, "from": null, "path": "gazebo/transport/Publisher.cc"}, "updated_on": "2017-08-12T04:55:14.708738+00:00", "type": "pullrequest_comment", "id": 42701435}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42962075.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=gazebo%2Ftransport%2FPublisher.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42962075"}}, "parent": {"id": 42701435, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42701435.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42701435"}}, "depth": 2}, "deleted": true, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "", "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2017-08-16T21:23:45.294499+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {"to": null, "from": null, "path": "gazebo/transport/Publisher.cc"}, "updated_on": "2017-08-16T21:29:17.393674+00:00", "type": "pullrequest_comment", "id": 42962075}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42963259.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=gazebo%2Ftransport%2FPublisher.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42963259"}}, "parent": {"id": 42701435, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42701435.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42701435"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "That check does seem odd. It would almost make more sense if it were in a while loop at the end of `SendMessage` to make it block.", "markup": "markdown", "html": "<p>That check does seem odd. It would almost make more sense if it were in a while loop at the end of <code>SendMessage</code> to make it block.</p>", "type": "rendered"}, "created_on": "2017-08-16T21:44:09.544520+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {"to": null, "from": null, "path": "gazebo/transport/Publisher.cc"}, "updated_on": "2017-08-16T21:44:09.547177+00:00", "type": "pullrequest_comment", "id": 42963259}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42972525.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=gazebo%2Ftransport%2FPublisher.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42972525"}}, "parent": {"id": 42963259, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42963259.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42963259"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Yes, maybe that's what was originally intended? Although it's kind of the opposite effect...", "markup": "markdown", "html": "<p>Yes, maybe that's what was originally intended? Although it's kind of the opposite effect...</p>", "type": "rendered"}, "created_on": "2017-08-17T02:31:13.603182+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "inline": {"to": null, "from": null, "path": "gazebo/transport/Publisher.cc"}, "updated_on": "2017-08-17T02:31:13.647695+00:00", "type": "pullrequest_comment", "id": 42972525}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42875976.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42875976"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Should this be `std::min`?", "markup": "markdown", "html": "<p>Should this be <code>std::min</code>?</p>", "type": "rendered"}, "created_on": "2017-08-16T00:16:20.544990+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {"to": 206, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2017-08-16T00:16:20.548050+00:00", "type": "pullrequest_comment", "id": 42875976}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42972346.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42972346"}}, "parent": {"id": 42875976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42875976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42875976"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Hmmmm according to the comment yes... that would have been a silly mistake! Maybe I've thought something else of this at the time, can't remember. Anyway that's only there as a failsafe in case the person testing this changes `numMsgs` to something larger than `bufferSize`, so it wouldn't have had an effect in the tests up until this point, as both numbers are currently the same.\n\nAnyway I've changed this as `std::max` doesn't make sense.", "markup": "markdown", "html": "<p>Hmmmm according to the comment yes... that would have been a silly mistake! Maybe I've thought something else of this at the time, can't remember. Anyway that's only there as a failsafe in case the person testing this changes <code>numMsgs</code> to something larger than <code>bufferSize</code>, so it wouldn't have had an effect in the tests up until this point, as both numbers are currently the same.</p>\n<p>Anyway I've changed this as <code>std::max</code> doesn't make sense.</p>", "type": "rendered"}, "created_on": "2017-08-17T02:24:41.141508+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "inline": {"to": null, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2017-08-17T02:24:41.193661+00:00", "type": "pullrequest_comment", "id": 42972346}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42876117.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42876117"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "I ran this test 10 times without the proposed fix and it failed 4 times and succeeded 6 times.  Is that similar to what you observed or should it fail every time?", "markup": "markdown", "html": "<p>I ran this test 10 times without the proposed fix and it failed 4 times and succeeded 6 times.  Is that similar to what you observed or should it fail every time?</p>", "type": "rendered"}, "created_on": "2017-08-16T00:22:08.082822+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {"to": 201, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2017-08-16T00:22:08.085489+00:00", "type": "pullrequest_comment", "id": 42876117}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42961964.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42961964"}}, "parent": {"id": 42876117, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42876117.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42876117"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "The test succeeded with the fix 10/10 times for me.", "markup": "markdown", "html": "<p>The test succeeded with the fix 10/10 times for me.</p>", "type": "rendered"}, "created_on": "2017-08-16T21:21:38.855583+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {"to": null, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2017-08-16T21:21:38.857923+00:00", "type": "pullrequest_comment", "id": 42961964}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42972073.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42972073"}}, "parent": {"id": 42876117, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42876117.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42876117"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Yes, that's about what I've experienced", "markup": "markdown", "html": "<p>Yes, that's about what I've experienced</p>", "type": "rendered"}, "created_on": "2017-08-17T02:15:49.000333+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "inline": {"to": null, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2017-08-17T02:15:49.046958+00:00", "type": "pullrequest_comment", "id": 42972073}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42876238.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42876238"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "When the publisher get stuck, it tends to fall through this loop without `pub->GetOutgoingCount` reaching `0` in addition to `g_receivedPosesStamped` not reaching `numMsgs`.", "markup": "markdown", "html": "<p>When the publisher get stuck, it tends to fall through this loop without <code>pub-&gt;GetOutgoingCount</code> reaching <code>0</code> in addition to <code>g_receivedPosesStamped</code> not reaching <code>numMsgs</code>.</p>", "type": "rendered"}, "created_on": "2017-08-16T00:26:51.082113+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {"to": 236, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2017-08-16T00:26:51.084573+00:00", "type": "pullrequest_comment", "id": 42876238}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42962778.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=gazebo%2Ftransport%2FPublisher.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42962778"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Since this may or may not process any messages depending on whether pubIds remain, I wonder whether it would be safe to cap the number of messages to handle in one call at 10000. That way the pubIds can't loop around. It may be a trivial point depending on how unlikely it is to overflow 10000.", "markup": "markdown", "html": "<p>Since this may or may not process any messages depending on whether pubIds remain, I wonder whether it would be safe to cap the number of messages to handle in one call at 10000. That way the pubIds can't loop around. It may be a trivial point depending on how unlikely it is to overflow 10000.</p>", "type": "rendered"}, "created_on": "2017-08-16T21:35:47.760530+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {"to": null, "from": 183, "path": "gazebo/transport/Publisher.cc"}, "updated_on": "2017-08-16T21:35:47.763120+00:00", "type": "pullrequest_comment", "id": 42962778}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42972195.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=gazebo%2Ftransport%2FPublisher.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42972195"}}, "parent": {"id": 42962778, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42962778.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42962778"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Agree... anyone else comments on this? I can add that change to this PR.", "markup": "markdown", "html": "<p>Agree... anyone else comments on this? I can add that change to this PR.</p>", "type": "rendered"}, "created_on": "2017-08-17T02:19:14.553565+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "inline": {"to": null, "from": null, "path": "gazebo/transport/Publisher.cc"}, "updated_on": "2017-08-17T02:19:14.595407+00:00", "type": "pullrequest_comment", "id": 42972195}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42966264.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42966264"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "`if (this->IsParent())`", "markup": "markdown", "html": "<p><code>if (this-&gt;IsParent())</code></p>", "type": "rendered"}, "created_on": "2017-08-16T22:58:54.140653+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 44, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2017-08-16T22:58:54.147495+00:00", "type": "pullrequest_comment", "id": 42966264}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42972477.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42972477"}}, "parent": {"id": 42966264, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42966264.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42966264"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Fixed", "markup": "markdown", "html": "<p>Fixed</p>", "type": "rendered"}, "created_on": "2017-08-17T02:29:10.083484+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "inline": {"to": null, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2017-08-17T02:29:10.117854+00:00", "type": "pullrequest_comment", "id": 42972477}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42966279.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42966279"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "`else if (this->IsChild())`", "markup": "markdown", "html": "<p><code>else if (this-&gt;IsChild())</code></p>", "type": "rendered"}, "created_on": "2017-08-16T22:59:17.822371+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 52, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2017-08-16T22:59:17.825724+00:00", "type": "pullrequest_comment", "id": 42966279}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42972472.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:031e74001361..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42972472"}}, "parent": {"id": 42966279, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/42966279.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-42966279"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Fixed", "markup": "markdown", "html": "<p>Fixed</p>", "type": "rendered"}, "created_on": "2017-08-17T02:28:59.521730+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "inline": {"to": null, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2017-08-17T02:28:59.562398+00:00", "type": "pullrequest_comment", "id": 42972472}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57617795.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:92e9d409c51b..43aba6951708?path=test%2Fintegration%2FCMakeLists.txt"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57617795"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "I think this change is no longer necessary since the process fork was added to the test", "markup": "markdown", "html": "<p>I think this change is no longer necessary since the process fork was added to the test</p>", "type": "rendered"}, "created_on": "2018-03-01T00:32:54.797998+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 140, "from": null, "path": "test/integration/CMakeLists.txt"}, "updated_on": "2018-03-01T00:32:54.801296+00:00", "type": "pullrequest_comment", "id": 57617795}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57738273.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:92e9d409c51b..43aba6951708?path=test%2Fintegration%2FCMakeLists.txt"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57738273"}}, "parent": {"id": 57617795, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57617795.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57617795"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "See also my comment above... this is in there because the test currently can only be done manually, a remote subscriber has to be started by the user.  You mean that we can now use a new process fork to start a remote subscriber?", "markup": "markdown", "html": "<p>See also my comment above... this is in there because the test currently can only be done manually, a remote subscriber has to be started by the user.  You mean that we can now use a new process fork to start a remote subscriber?</p>", "type": "rendered"}, "created_on": "2018-03-01T22:47:39.499930+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "inline": {"to": null, "from": null, "path": "test/integration/CMakeLists.txt"}, "updated_on": "2018-03-01T22:48:27.884982+00:00", "type": "pullrequest_comment", "id": 57738273}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57742681.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:92e9d409c51b..43aba6951708?path=test%2Fintegration%2FCMakeLists.txt"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57742681"}}, "parent": {"id": 57738273, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57738273.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57738273"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Aahh I completely forgot I'd already done that :open_mouth:  So long ago! Sorry never mind. So yes, this can be removed now.", "markup": "markdown", "html": "<p>Aahh I completely forgot I'd already done that <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f62e.png\" alt=\"\ud83d\ude2e\" title=\":open_mouth:\" data-emoji-short-name=\":open_mouth:\" />  So long ago! Sorry never mind. So yes, this can be removed now.</p>", "type": "rendered"}, "created_on": "2018-03-02T00:10:21.442763+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "inline": {"to": null, "from": null, "path": "test/integration/CMakeLists.txt"}, "updated_on": "2018-03-02T00:10:21.492736+00:00", "type": "pullrequest_comment", "id": 57742681}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57743979.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:2bdbd28b37a1..43aba6951708?path=test%2Fintegration%2FCMakeLists.txt"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57743979"}}, "parent": {"id": 57742681, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57742681.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57742681"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": ":smile: ", "markup": "markdown", "html": "<p><img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f604.png\" alt=\"\ud83d\ude04\" title=\":smile:\" data-emoji-short-name=\":smile:\" /> </p>", "type": "rendered"}, "created_on": "2018-03-02T00:40:05.487929+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": null, "from": null, "path": "test/integration/CMakeLists.txt"}, "updated_on": "2018-03-02T00:40:05.491312+00:00", "type": "pullrequest_comment", "id": 57743979}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57743171.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57743171"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Queued [another build](https://build.osrfoundation.org/job/gazebo-ci-pr_any/828/) after merging with newest default and two edits in response to comments by @scpeters ", "markup": "markdown", "html": "<p>Queued <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any/828/\" rel=\"nofollow\">another build</a> after merging with newest default and two edits in response to comments by @scpeters </p>", "type": "rendered"}, "created_on": "2018-03-02T00:20:55.124579+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2018-03-02T00:20:55.179582+00:00", "type": "pullrequest_comment", "id": 57743171}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57745349.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57745349"}}, "parent": {"id": 57743171, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57743171.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57743171"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "I just made a few more comments, but I've confirmed that the new test fails without the fix in `Publisher::SendMessage()` and passes with the fix.", "markup": "markdown", "html": "<p>I just made a few more comments, but I've confirmed that the new test fails without the fix in <code>Publisher::SendMessage()</code> and passes with the fix.</p>", "type": "rendered"}, "created_on": "2018-03-02T01:11:00.632816+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-03-02T01:11:00.635642+00:00", "type": "pullrequest_comment", "id": 57745349}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57778211.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57778211"}}, "parent": {"id": 57745349, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57745349.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57745349"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Thanks! I've fixed the things you commented on.", "markup": "markdown", "html": "<p>Thanks! I've fixed the things you commented on.</p>", "type": "rendered"}, "created_on": "2018-03-02T10:39:08.789595+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2018-03-02T10:39:08.820457+00:00", "type": "pullrequest_comment", "id": 57778211}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57745723.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57745723"}}, "parent": {"id": 57743171, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57743171.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57743171"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "I think those builds are using an old branch name", "markup": "markdown", "html": "<p>I think those builds are using an old branch name</p>", "type": "rendered"}, "created_on": "2018-03-02T01:19:36.034916+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-03-02T01:19:36.038149+00:00", "type": "pullrequest_comment", "id": 57745723}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57745742.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57745742"}}, "parent": {"id": 57745723, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57745723.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57745723"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/819/", "markup": "markdown", "html": "<p><a href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/819/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/819/</a></p>", "type": "rendered"}, "created_on": "2018-03-02T01:19:58.585397+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-03-02T01:19:58.588157+00:00", "type": "pullrequest_comment", "id": 57745742}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57777230.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57777230"}}, "parent": {"id": 57745742, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57745742.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57745742"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Oh.. oups :wink: [https://build.osrfoundation.org/job/gazebo-ci-pr\\_any/829/](https://build.osrfoundation.org/job/gazebo-ci-pr_any/829/)", "markup": "markdown", "html": "<p>Oh.. oups <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f609.png\" alt=\"\ud83d\ude09\" title=\":wink:\" data-emoji-short-name=\":wink:\" /> <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any/829/\" rel=\"nofollow\">https://build.osrfoundation.org/job/gazebo-ci-pr_any/829/</a></p>", "type": "rendered"}, "created_on": "2018-03-02T10:31:05.492663+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2018-03-02T10:31:05.553326+00:00", "type": "pullrequest_comment", "id": 57777230}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57825987.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57825987"}}, "parent": {"id": 57777230, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57777230.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57777230"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "there's a few cppcheck errors:\n\n* https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/820/cppcheckResult/", "markup": "markdown", "html": "<p>there's a few cppcheck errors:</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/820/cppcheckResult/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/820/cppcheckResult/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2018-03-02T22:15:54.845700+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-03-02T22:15:54.850500+00:00", "type": "pullrequest_comment", "id": 57825987}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57834844.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57834844"}}, "parent": {"id": 57825987, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57825987.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57825987"}}, "depth": 5}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Oups, I always forget that before pushing :flushed: Fixed.", "markup": "markdown", "html": "<p>Oups, I always forget that before pushing <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f633.png\" alt=\"\ud83d\ude33\" title=\":flushed:\" data-emoji-short-name=\":flushed:\" /> Fixed.</p>", "type": "rendered"}, "created_on": "2018-03-03T08:48:36.190142+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2018-03-03T08:48:36.248306+00:00", "type": "pullrequest_comment", "id": 57834844}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/58024913.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-58024913"}}, "parent": {"id": 57834844, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57834844.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57834844"}}, "depth": 6}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "thanks, new build:\n\n* https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/828/", "markup": "markdown", "html": "<p>thanks, new build:</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/828/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/828/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2018-03-06T10:12:14.801879+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-03-06T10:12:14.804829+00:00", "type": "pullrequest_comment", "id": 58024913}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/58590960.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-58590960"}}, "parent": {"id": 58024913, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/58024913.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-58024913"}}, "depth": 7}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "looks good", "markup": "markdown", "html": "<p>looks good</p>", "type": "rendered"}, "created_on": "2018-03-12T19:21:06.147026+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-03-12T19:21:06.157655+00:00", "type": "pullrequest_comment", "id": 58590960}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57744135.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:2bdbd28b37a1..43aba6951708?path=gazebo%2Ftransport%2FPublisher.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57744135"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "this should be split onto multiple lines", "markup": "markdown", "html": "<p>this should be split onto multiple lines</p>", "type": "rendered"}, "created_on": "2018-03-02T00:43:39.665627+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 247, "from": null, "path": "gazebo/transport/Publisher.cc"}, "updated_on": "2018-03-02T00:43:39.669050+00:00", "type": "pullrequest_comment", "id": 57744135}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57744231.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:2bdbd28b37a1..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57744231"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "`Publishing.cc` doesn't exist. I think you mean `Publication.cc`?", "markup": "markdown", "html": "<p><code>Publishing.cc</code> doesn't exist. I think you mean <code>Publication.cc</code>?</p>", "type": "rendered"}, "created_on": "2018-03-02T00:46:28.722924+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 140, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2018-03-02T00:46:28.726291+00:00", "type": "pullrequest_comment", "id": 57744231}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57744261.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:2bdbd28b37a1..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57744261"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "`ASSERT_FALSE(gazebo::transport::is_stopped());`", "markup": "markdown", "html": "<p><code>ASSERT_FALSE(gazebo::transport::is_stopped());</code></p>", "type": "rendered"}, "created_on": "2018-03-02T00:47:28.236754+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 146, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2018-03-02T00:48:55.212914+00:00", "type": "pullrequest_comment", "id": 57744261}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57744286.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:2bdbd28b37a1..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57744286"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "interfer -> interfere", "markup": "markdown", "html": "<p>interfer -&gt; interfere</p>", "type": "rendered"}, "created_on": "2018-03-02T00:48:06.609343+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 151, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2018-03-02T00:48:06.612966+00:00", "type": "pullrequest_comment", "id": 57744286}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57744303.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:2bdbd28b37a1..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57744303"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "`ASSERT_TRUE(IsParent());`", "markup": "markdown", "html": "<p><code>ASSERT_TRUE(IsParent());</code></p>", "type": "rendered"}, "created_on": "2018-03-02T00:48:37.300092+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 161, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2018-03-02T00:49:06.977657+00:00", "type": "pullrequest_comment", "id": 57744303}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57744384.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:2bdbd28b37a1..43aba6951708?path=test%2Fintegration%2Ftransport_msg_count.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57744384"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "this line can be removed", "markup": "markdown", "html": "<p>this line can be removed</p>", "type": "rendered"}, "created_on": "2018-03-02T00:50:29.616880+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 209, "from": null, "path": "test/integration/transport_msg_count.cc"}, "updated_on": "2018-03-02T00:50:29.620142+00:00", "type": "pullrequest_comment", "id": 57744384}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/57744485.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/JenniferBuehler/gazebo:2bdbd28b37a1..43aba6951708?path=gazebo%2Ftransport%2FPublisher.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-57744485"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "need 3 slashes for doxygen: `/// \\brief ...`", "markup": "markdown", "html": "<p>need 3 slashes for doxygen: <code>/// \\brief ...</code></p>", "type": "rendered"}, "created_on": "2018-03-02T00:52:59.473330+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 77, "from": null, "path": "gazebo/transport/Publisher.hh"}, "updated_on": "2018-03-02T00:52:59.476493+00:00", "type": "pullrequest_comment", "id": 57744485}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/63338469.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-63338469"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Thanks for the thorough explanation! This must have been a perplexing issue when you ran into it.\n\nI think I understand the problem, and this proposed fix makes sense, especially protecting the `pubIds` object with a mutex every time that it's being used.\n\nI had to flex my brain quite a bit in order to grok this line: `this->pubIds[*pubIter] = std::max(1, expRemoteCalls);`. In case it's helpful for others, I'll try to explain my understanding of it, and @JenniferBuehler (or anyone else) can correct me if I'm wrong:\n\n* We need to make sure that `this->pubIds[*pubIter]` gets deleted\n* If any remote subscribers exist, they will try to automatically deal with deleting it (in this case, `expRemoteCalls >= 1`)\n    * If none of the remote subscriptions change between `int expRemoteCalls = this->publication->GetCallbackCount();` and `int result = this->publication->Publish(*iter, ...`, then `this->pubIds[*pubIter]` will automatically be deleted by `OnPublishComplete(~)`.\n        * `int diff = result - expRemoteCalls;` will evaluate to zero, so we will skip the block inside of `if(diff < 0)`, which is okay because we don't need it.\n    * If new remote subscribers show up between `int expRemoteCalls = this->publication->GetCallbackCount();` and `int result = this->publication->Publish(*iter, ...`, then the value of `this->pubIds[*pubIter]` will easily decrement below zero and get automatically deleted.\n        * Some newer remote subscribers might miss the message, but that's what they get for showing up late.\n        * `int diff = result - expRemoteCalls;` will evaluate to greater than zero, so we will skip the block inside of `if(diff < 0)`, which is okay because we don't need it.\n    * If some remote subscribers are deleted between `int expRemoteCalls = this->publication->GetCallbackCount();` and `int result = this->publication->Publish(*iter, ...`, then `this->pubIds[*pubIter]` will not automatically be deleted by `OnPublishComplete(~)`\n        * Each time a remote subscriber calls `OnPublishComplete(~)`, it will think that there are still other remote subscribers that need to get the message, so it won't be deleted by `OnPublishComplete(~)`.\n        * `int diff = result - expRemoteCalls;` will evaluate to less than zero, so we will run the block inside of `if(diff < 0)`, because we need to manually delete `this->pubIds[*pubiter]`.\n            * We will reduce `this->pubIds[*pubIter]` by how much our initial expected remote subscriber count was off by.\n            * This is subtracted in a thread-safe way to avoid race conditions.\n            * If all the expected remote subscribers have seen the message (`this->pubIds[*pubIter] <= 0`), we delete it now.\n            * If some of the expected remote subscribers haven't seen the message yet (`this->pubIds[*pubIter] > 0`), allow `OnPublishComplete(~)` to take care of it whenever the count drops all the way\n                * Since we've applied the correction term (`diff`) to `this->pubIds[*pubIter]`, we should now get the correct behavior out of `OnPublishComplete(~)`.\n\n* If no remote subscribers exist, `this->pubIds[*pubIter]` must be deleted in this function (in this case, `expRemoteCalls == 0`)\n    * We will set `expRemoteCalls` to `1`, so that the following control flow works:\n        * If no remote subscriptions were added, `int diff = result - expRemoteCalls;` will evaluate to `-1`, so we will enter `if(diff < 0)` and manually delete `this->pubIds[*pubIter]`\n            * The previous bullet point would not work if we had left `expRemoteCalls` as `0` instead of making it `1`, because it would not have known the difference between the expected number of remote subscribers being the same as the actual (in which case no manual deletion is needed) or there being no remote subscribers at all (in which case, we need to manually delete).\n    * If remote subscriptions were added, `this->pubIds[*pubIter]` will definitely get automatically deleted.\n    * Remote subscriptions could not have been deleted, because there weren't any to begin with.\n\nThere are probably some loose threads and unfortunate edge cases still in this (like messages getting dropped for new subscribers), but I'm confident that these proposed changes at least fix the specific issue that they're intended to address. I think to fix this system any further would require a major design change, which we already have in `ign-transport`, so there's not much sense in doing it for `gazebo/transport`.\n\nIn other words, these changes look good to me.", "markup": "markdown", "html": "<p>Thanks for the thorough explanation! This must have been a perplexing issue when you ran into it.</p>\n<p>I think I understand the problem, and this proposed fix makes sense, especially protecting the <code>pubIds</code> object with a mutex every time that it's being used.</p>\n<p>I had to flex my brain quite a bit in order to grok this line: <code>this-&gt;pubIds[*pubIter] = std::max(1, expRemoteCalls);</code>. In case it's helpful for others, I'll try to explain my understanding of it, and @JenniferBuehler (or anyone else) can correct me if I'm wrong:</p>\n<ul>\n<li>We need to make sure that <code>this-&gt;pubIds[*pubIter]</code> gets deleted</li>\n<li>\n<p>If any remote subscribers exist, they will try to automatically deal with deleting it (in this case, <code>expRemoteCalls &gt;= 1</code>)</p>\n<ul>\n<li>If none of the remote subscriptions change between <code>int expRemoteCalls = this-&gt;publication-&gt;GetCallbackCount();</code> and <code>int result = this-&gt;publication-&gt;Publish(*iter, ...</code>, then <code>this-&gt;pubIds[*pubIter]</code> will automatically be deleted by <code>OnPublishComplete(~)</code>.<ul>\n<li><code>int diff = result - expRemoteCalls;</code> will evaluate to zero, so we will skip the block inside of <code>if(diff &lt; 0)</code>, which is okay because we don't need it.</li>\n</ul>\n</li>\n<li>If new remote subscribers show up between <code>int expRemoteCalls = this-&gt;publication-&gt;GetCallbackCount();</code> and <code>int result = this-&gt;publication-&gt;Publish(*iter, ...</code>, then the value of <code>this-&gt;pubIds[*pubIter]</code> will easily decrement below zero and get automatically deleted.<ul>\n<li>Some newer remote subscribers might miss the message, but that's what they get for showing up late.</li>\n<li><code>int diff = result - expRemoteCalls;</code> will evaluate to greater than zero, so we will skip the block inside of <code>if(diff &lt; 0)</code>, which is okay because we don't need it.</li>\n</ul>\n</li>\n<li>If some remote subscribers are deleted between <code>int expRemoteCalls = this-&gt;publication-&gt;GetCallbackCount();</code> and <code>int result = this-&gt;publication-&gt;Publish(*iter, ...</code>, then <code>this-&gt;pubIds[*pubIter]</code> will not automatically be deleted by <code>OnPublishComplete(~)</code><ul>\n<li>Each time a remote subscriber calls <code>OnPublishComplete(~)</code>, it will think that there are still other remote subscribers that need to get the message, so it won't be deleted by <code>OnPublishComplete(~)</code>.</li>\n<li><code>int diff = result - expRemoteCalls;</code> will evaluate to less than zero, so we will run the block inside of <code>if(diff &lt; 0)</code>, because we need to manually delete <code>this-&gt;pubIds[*pubiter]</code>.<ul>\n<li>We will reduce <code>this-&gt;pubIds[*pubIter]</code> by how much our initial expected remote subscriber count was off by.</li>\n<li>This is subtracted in a thread-safe way to avoid race conditions.</li>\n<li>If all the expected remote subscribers have seen the message (<code>this-&gt;pubIds[*pubIter] &lt;= 0</code>), we delete it now.</li>\n<li>If some of the expected remote subscribers haven't seen the message yet (<code>this-&gt;pubIds[*pubIter] &gt; 0</code>), allow <code>OnPublishComplete(~)</code> to take care of it whenever the count drops all the way<ul>\n<li>Since we've applied the correction term (<code>diff</code>) to <code>this-&gt;pubIds[*pubIter]</code>, we should now get the correct behavior out of <code>OnPublishComplete(~)</code>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>If no remote subscribers exist, <code>this-&gt;pubIds[*pubIter]</code> must be deleted in this function (in this case, <code>expRemoteCalls == 0</code>)</p>\n<ul>\n<li>We will set <code>expRemoteCalls</code> to <code>1</code>, so that the following control flow works:<ul>\n<li>If no remote subscriptions were added, <code>int diff = result - expRemoteCalls;</code> will evaluate to <code>-1</code>, so we will enter <code>if(diff &lt; 0)</code> and manually delete <code>this-&gt;pubIds[*pubIter]</code><ul>\n<li>The previous bullet point would not work if we had left <code>expRemoteCalls</code> as <code>0</code> instead of making it <code>1</code>, because it would not have known the difference between the expected number of remote subscribers being the same as the actual (in which case no manual deletion is needed) or there being no remote subscribers at all (in which case, we need to manually delete).</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>If remote subscriptions were added, <code>this-&gt;pubIds[*pubIter]</code> will definitely get automatically deleted.</li>\n<li>Remote subscriptions could not have been deleted, because there weren't any to begin with.</li>\n</ul>\n</li>\n</ul>\n<p>There are probably some loose threads and unfortunate edge cases still in this (like messages getting dropped for new subscribers), but I'm confident that these proposed changes at least fix the specific issue that they're intended to address. I think to fix this system any further would require a major design change, which we already have in <code>ign-transport</code>, so there's not much sense in doing it for <code>gazebo/transport</code>.</p>\n<p>In other words, these changes look good to me.</p>", "type": "rendered"}, "created_on": "2018-05-04T00:55:01.590243+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2018-05-04T00:55:01.637956+00:00", "type": "pullrequest_comment", "id": 63338469}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657/comments/63346079.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657/_/diff#comment-63346079"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2657"}}, "title": "Fixing issue in which publishing of messages gets stuck."}, "content": {"raw": "Hi Michael, thanks for reviewing this! Yes this issue was a bit of a head-buster :wink: Thanks also for your additional comment, it will help others who want to undertand what's going on with this transport code. I haven't added more info in the description in order to not make the text even longer and deter people from reading it at all ;-D\n\nThe code is still not nice, as you pointed out. But for same reasons you mentioned \\(it would have to be re-designed\\), I opted for this minimal-change patch. When migrating to `ign-transport` this will anyway be resolved.", "markup": "markdown", "html": "<p>Hi Michael, thanks for reviewing this! Yes this issue was a bit of a head-buster <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f609.png\" alt=\"\ud83d\ude09\" title=\":wink:\" data-emoji-short-name=\":wink:\" /> Thanks also for your additional comment, it will help others who want to undertand what's going on with this transport code. I haven't added more info in the description in order to not make the text even longer and deter people from reading it at all ;-D</p>\n<p>The code is still not nice, as you pointed out. But for same reasons you mentioned (it would have to be re-designed), I opted for this minimal-change patch. When migrating to <code>ign-transport</code> this will anyway be resolved.</p>", "type": "rendered"}, "created_on": "2018-05-04T05:05:23.542121+00:00", "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "updated_on": "2018-05-04T05:05:23.614642+00:00", "type": "pullrequest_comment", "id": 63346079}], "page": 1, "size": 56}