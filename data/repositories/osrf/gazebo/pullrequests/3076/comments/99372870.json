{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3076/comments/99372870.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3076/_/diff#comment-99372870"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3076, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3076.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3076"}}, "title": "Camera intrinsics - conversion of y principal point from OpenCV to OpenGL"}, "content": {"raw": "thanks again for the contribution!\n\nThe Y inversion change sounds good to me. As for the function name change, we adopt a tick-tock deprecation approach to API changes \\(see [Migration guide](#!/osrf/gazebo/src/default/Migration.md)\\). So we need to keep the original `BuildProjectiveMatrix` function but mark it as deprecated, and its implementation will just call the new  `BuildProjectionMatrix` function, e.g. in `Camera.hh`\n\n```\n      public: static ignition::math::Matrix4d BuildProjectiveMatrix(...)\n               GAZEBO_DEPRECATED(11.0);\n```\n\nand in `Camera.cc`:\n\n```\nignition::math::Matrix4d Camera::BuildProjectiveMatrix(...)\n{\n  return Camera::BuildProjectionMatrix(...);\n}\n```\n\nFYI, I\u2019ve backported the camera intrinsics changes to gazebo 9 in pull request #3099", "markup": "markdown", "html": "<p>thanks again for the contribution!</p>\n<p>The Y inversion change sounds good to me. As for the function name change, we adopt a tick-tock deprecation approach to API changes (see <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/default/Migration.md\" rel=\"nofollow\">Migration guide</a>). So we need to keep the original <code>BuildProjectiveMatrix</code> function but mark it as deprecated, and its implementation will just call the new  <code>BuildProjectionMatrix</code> function, e.g. in <code>Camera.hh</code></p>\n<div class=\"codehilite\"><pre><span></span>      public: static ignition::math::Matrix4d BuildProjectiveMatrix(...)\n               GAZEBO_DEPRECATED(11.0);\n</pre></div>\n\n\n<p>and in <code>Camera.cc</code>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">ignition</span><span class=\"p\">::</span><span class=\"nd\">math</span><span class=\"p\">::</span><span class=\"nd\">Matrix4d</span> <span class=\"nt\">Camera</span><span class=\"p\">::</span><span class=\"nd\">BuildProjectiveMatrix</span><span class=\"o\">(...)</span>\n<span class=\"p\">{</span>\n  <span class=\"err\">return</span> <span class=\"n\">Camera</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"nf\">BuildProjectionMatrix</span><span class=\"p\">(</span><span class=\"err\">...</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<p>FYI, I\u2019ve backported the camera intrinsics changes to gazebo 9 in <a href=\"#!/osrf/gazebo/pull-requests/3099/backport-camera-intrinsics-feature\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #3099</a></p>", "type": "rendered"}, "created_on": "2019-04-19T00:26:39.579640+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2019-04-19T00:26:39.586509+00:00", "type": "pullrequest_comment", "id": 99372870}