{"pagelen": 50, "values": [{"update": {"description": "When gzclient exits, gzserver still maintains a list of obsolete callbacks in its `Publication` instances. This results in gzserver being extremely slow during its exit stage, especially with large worlds that contain many entities. This pull request makes sure that all callbacks are removed every time a gzclient exits.", "title": "Make sure gzserver destroys all callbacks when gzclient exits", "destination": {"commit": {"hash": "502ac23ec438", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/502ac23ec438.json"}, "html": {"href": "#!/osrf/gazebo/commits/502ac23ec438"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "cabfdb7c7202", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo/commit/cabfdb7c7202"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo/commits/cabfdb7c7202"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f2b7e0a0-04ff-4851-9879-a852a70325b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "ocrave/gazebo", "uuid": "{f2b7e0a0-04ff-4851-9879-a852a70325b2}"}, "branch": {"name": "fix_exit"}}, "state": "MERGED", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2016-10-18T14:35:54.198909+00:00"}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"approval": {"date": "2016-10-17T21:23:13.652946+00:00", "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/25311417.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-25311417"}}, "parent": {"id": 20928289, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/20928289.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-20928289"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "looking through the code, I see that `node.Fini() / reset()` are all called after pub and sub reset so I believe the comment's been addressed.", "markup": "markdown", "html": "<p>looking through the code, I see that <code>node.Fini() / reset()</code> are all called after pub and sub reset so I believe the comment's been addressed.</p>", "type": "rendered"}, "created_on": "2016-10-17T21:23:08.272989+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2016-10-17T21:23:08.275149+00:00", "type": "pullrequest_comment", "id": 25311417}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/25311300.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-25311300"}}, "parent": {"id": 25307639, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/25307639.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-25307639"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "build looks good", "markup": "markdown", "html": "<p>build looks good</p>", "type": "rendered"}, "created_on": "2016-10-17T21:20:27.222082+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2016-10-17T21:20:27.225232+00:00", "type": "pullrequest_comment", "id": 25311300}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/25307639.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-25307639"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "started one last [jenkins build](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/203)", "markup": "markdown", "html": "<p>started one last <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/203\" rel=\"nofollow\">jenkins build</a></p>", "type": "rendered"}, "created_on": "2016-10-17T20:09:35.078176+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2016-10-17T20:09:35.085663+00:00", "type": "pullrequest_comment", "id": 25307639}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"update": {"description": "When gzclient exits, gzserver still maintains a list of obsolete callbacks in its `Publication` instances. This results in gzserver being extremely slow during its exit stage, especially with large worlds that contain many entities. This pull request makes sure that all callbacks are removed every time a gzclient exits.", "title": "Make sure gzserver destroys all callbacks when gzclient exits", "destination": {"commit": {"hash": "7af563d06884", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/7af563d06884.json"}, "html": {"href": "#!/osrf/gazebo/commits/7af563d06884"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "cabfdb7c7202", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo/commit/cabfdb7c7202"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo/commits/cabfdb7c7202"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f2b7e0a0-04ff-4851-9879-a852a70325b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "ocrave/gazebo", "uuid": "{f2b7e0a0-04ff-4851-9879-a852a70325b2}"}, "branch": {"name": "fix_exit"}}, "state": "OPEN", "author": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "date": "2016-10-10T13:23:32.303649+00:00"}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/20928289.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-20928289"}}, "parent": {"id": 20865279, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/20865279.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-20865279"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "I did a little digging. Try for example adding the following warning message:\n\n~~~\ndiff -r 183ffd507ae0 gazebo/transport/TopicManager.cc\n--- a/gazebo/transport/TopicManager.cc\tFri Jul 01 14:35:59 2016 -0700\n+++ b/gazebo/transport/TopicManager.cc\tTue Jul 12 18:18:14 2016 -0700\n@@ -260,8 +260,14 @@\n   if (publication)\n     publication->RemoveSubscription(_node);\n \n-  ConnectionManager::Instance()->Unsubscribe(_topic,\n-      _node->GetMsgType(_topic));\n+  auto msgType = _node->GetMsgType(_topic);\n+  if (msgType.empty())\n+  {\n+    gzwarn << \"Trying to unsubscribe topic [\" << _topic <<\n+        \"] but message type is unknown\" << std::endl;\n+  }\n+\n+  ConnectionManager::Instance()->Unsubscribe(_topic, msgType);\n \n   this->subscribedNodes[_topic].remove(_node);\n }\n~~~\n\nThe way it currently is, we see a warning message every time we click on the screen, for example.\n\nHowever, if we move `node->Fini` to be below the pub and sub resets, we don't get the warning when clicking.\n\nI'm not sure if not having the message type at that point is critical or not. But this example illustrates how the Pub and Sub destructors are counting on the node's internal state, so we shouldn't clean that internal state before destroying pub and sub.", "markup": "markdown", "html": "<p>I did a little digging. Try for example adding the following warning message:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 183ffd507ae0 gazebo/transport/TopicManager.cc</span>\n<span class=\"gd\">--- a/gazebo/transport/TopicManager.cc  Fri Jul 01 14:35:59 2016 -0700</span>\n<span class=\"gi\">+++ b/gazebo/transport/TopicManager.cc  Tue Jul 12 18:18:14 2016 -0700</span>\n<span class=\"gu\">@@ -260,8 +260,14 @@</span>\n   if (publication)\n     publication-&gt;RemoveSubscription(_node);\n\n<span class=\"gd\">-  ConnectionManager::Instance()-&gt;Unsubscribe(_topic,</span>\n<span class=\"gd\">-      _node-&gt;GetMsgType(_topic));</span>\n<span class=\"gi\">+  auto msgType = _node-&gt;GetMsgType(_topic);</span>\n<span class=\"gi\">+  if (msgType.empty())</span>\n<span class=\"gi\">+  {</span>\n<span class=\"gi\">+    gzwarn &lt;&lt; &quot;Trying to unsubscribe topic [&quot; &lt;&lt; _topic &lt;&lt;</span>\n<span class=\"gi\">+        &quot;] but message type is unknown&quot; &lt;&lt; std::endl;</span>\n<span class=\"gi\">+  }</span>\n<span class=\"gi\">+</span>\n<span class=\"gi\">+  ConnectionManager::Instance()-&gt;Unsubscribe(_topic, msgType);</span>\n\n   this-&gt;subscribedNodes[_topic].remove(_node);\n }\n</pre></div>\n\n\n<p>The way it currently is, we see a warning message every time we click on the screen, for example.</p>\n<p>However, if we move <code>node-&gt;Fini</code> to be below the pub and sub resets, we don't get the warning when clicking.</p>\n<p>I'm not sure if not having the message type at that point is critical or not. But this example illustrates how the Pub and Sub destructors are counting on the node's internal state, so we shouldn't clean that internal state before destroying pub and sub.</p>", "type": "rendered"}, "created_on": "2016-07-13T01:16:24.294197+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2016-07-13T01:21:52.958435+00:00", "type": "pullrequest_comment", "id": 20928289}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/20865279.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-20865279"}}, "parent": {"id": 20859957, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/20859957.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-20859957"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "I don't think there is a problem with this. It's functionally equivalent to the Node destroying publishers and subscribers after the Fini call in its destructor.", "markup": "markdown", "html": "<p>I don't think there is a problem with this. It's functionally equivalent to the Node destroying publishers and subscribers after the Fini call in its destructor.</p>", "type": "rendered"}, "created_on": "2016-07-11T22:39:31.121271+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2016-07-11T22:39:31.126184+00:00", "type": "pullrequest_comment", "id": 20865279}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/20859957.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-20859957"}}, "parent": {"id": 20856022, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/20856022.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-20856022"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "The [Subscriber](#!/osrf/gazebo/src/08b0b80c8a74498e5876eac82bf68e1c52ad0e9b/gazebo/transport/Subscriber.cc?at=default&fileviewer=file-view-default#Subscriber.cc-40)'s destructor calls `Unsubscribe`, which uses the node to unsubscribe it in the `TopicManager` and to remove the callback within the node.\n\nNode [Fini](#!/osrf/gazebo/src/08b0b80c8a74498e5876eac82bf68e1c52ad0e9b/gazebo/transport/Node.cc?at=default&fileviewer=file-view-default#Node.cc-50) does clear all callbacks, but it doesn't unsubscribe each subscriber from the topic manager for example.", "markup": "markdown", "html": "<p>The <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/08b0b80c8a74498e5876eac82bf68e1c52ad0e9b/gazebo/transport/Subscriber.cc?at=default&amp;fileviewer=file-view-default#Subscriber.cc-40\" rel=\"nofollow\">Subscriber</a>'s destructor calls <code>Unsubscribe</code>, which uses the node to unsubscribe it in the <code>TopicManager</code> and to remove the callback within the node.</p>\n<p>Node <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/08b0b80c8a74498e5876eac82bf68e1c52ad0e9b/gazebo/transport/Node.cc?at=default&amp;fileviewer=file-view-default#Node.cc-50\" rel=\"nofollow\">Fini</a> does clear all callbacks, but it doesn't unsubscribe each subscriber from the topic manager for example.</p>", "type": "rendered"}, "created_on": "2016-07-11T20:17:42.801286+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2016-07-11T20:23:31.502665+00:00", "type": "pullrequest_comment", "id": 20859957}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/20856022.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-20856022"}}, "parent": {"id": 20850410, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/20850410.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-20850410"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "The `requestPub` and `responseSub` are not members of `node`. I believe this is fine.", "markup": "markdown", "html": "<p>The <code>requestPub</code> and <code>responseSub</code> are not members of <code>node</code>. I believe this is fine.</p>", "type": "rendered"}, "created_on": "2016-07-11T18:51:20.417029+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2016-07-11T18:51:20.421294+00:00", "type": "pullrequest_comment", "id": 20856022}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/20850410.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-20850410"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "I feel like it's best to call fini on the node only after resetting its pubs and subs, but I don't have any way to prove it right now.", "markup": "markdown", "html": "<p>I feel like it's best to call fini on the node only after resetting its pubs and subs, but I don't have any way to prove it right now.</p>", "type": "rendered"}, "created_on": "2016-07-11T16:50:10.915983+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2016-07-11T16:50:10.921801+00:00", "type": "pullrequest_comment", "id": 20850410}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/20850339.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-20850339"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "Can we move this node reset to be right after node fini? Just want to make sure all the callbacks are properly terminated before deleting the mutexes. It should be enough to reset the subscriber to terminate a callback but I'm not sure this has been well tested yet.", "markup": "markdown", "html": "<p>Can we move this node reset to be right after node fini? Just want to make sure all the callbacks are properly terminated before deleting the mutexes. It should be enough to reset the subscriber to terminate a callback but I'm not sure this has been well tested yet.</p>", "type": "rendered"}, "created_on": "2016-07-11T16:48:41.996684+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2016-07-11T16:48:42.002837+00:00", "type": "pullrequest_comment", "id": 20850339}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"approval": {"date": "2016-07-01T21:38:05.008755+00:00", "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"update": {"description": "When gzclient exits, gzserver still maintains a list of obsolete callbacks in its `Publication` instances. This results in gzserver being extremely slow during its exit stage, especially with large worlds that contain many entities. This pull request makes sure that all callbacks are removed every time a gzclient exits.", "title": "Make sure gzserver destroys all callbacks when gzclient exits", "destination": {"commit": {"hash": "852f7739cd04", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/852f7739cd04.json"}, "html": {"href": "#!/osrf/gazebo/commits/852f7739cd04"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "183ffd507ae0", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo/commit/183ffd507ae0"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo/commits/183ffd507ae0"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f2b7e0a0-04ff-4851-9879-a852a70325b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "ocrave/gazebo", "uuid": "{f2b7e0a0-04ff-4851-9879-a852a70325b2}"}, "branch": {"name": "fix_exit"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2016-07-01T21:37:48.684565+00:00"}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"update": {"description": "When gzclient exits, gzserver still maintains a list of obsolete callbacks in its `Publication` instances. This results in gzserver being extremely slow during its exit stage, especially with large worlds that contain many entities. This pull request makes sure that all callbacks are removed every time a gzclient exits.", "title": "Make sure gzserver destroys all callbacks when gzclient exits", "destination": {"commit": {"hash": "5eb96044e29a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/5eb96044e29a.json"}, "html": {"href": "#!/osrf/gazebo/commits/5eb96044e29a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "d51314cc539b", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo/commit/d51314cc539b"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo/commits/d51314cc539b"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f2b7e0a0-04ff-4851-9879-a852a70325b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "ocrave/gazebo", "uuid": "{f2b7e0a0-04ff-4851-9879-a852a70325b2}"}, "branch": {"name": "fix_exit"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2016-07-01T20:52:17.414383+00:00"}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"update": {"description": "When gzclient exits, gzserver still maintains a list of obsolete callbacks in its `Publication` instances. This results in gzserver being extremely slow during its exit stage, especially with large worlds that contain many entities. This pull request makes sure that all callbacks are removed every time a gzclient exits.", "title": "Make sure gzserver destroys all callbacks when gzclient exits", "destination": {"commit": {"hash": "062899b04731", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/062899b04731.json"}, "html": {"href": "#!/osrf/gazebo/commits/062899b04731"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "cb98885e5381", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo/commit/cb98885e5381"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo/commits/cb98885e5381"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f2b7e0a0-04ff-4851-9879-a852a70325b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "ocrave/gazebo", "uuid": "{f2b7e0a0-04ff-4851-9879-a852a70325b2}"}, "branch": {"name": "fix_exit"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2016-07-01T18:28:49.167622+00:00"}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19606386.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19606386"}}, "parent": {"id": 19161496, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19161496.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19161496"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "It is safer to reset the subscribers and publishers before calling `node->Fini()` so I made the changes.", "markup": "markdown", "html": "<p>It is safer to reset the subscribers and publishers before calling <code>node-&gt;Fini()</code> so I made the changes.</p>", "type": "rendered"}, "created_on": "2016-06-10T13:05:35.070791+00:00", "user": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "inline": {}, "updated_on": "2016-06-10T13:05:35.129961+00:00", "type": "pullrequest_comment", "id": 19606386}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"update": {"description": "When gzclient exits, gzserver still maintains a list of obsolete callbacks in its `Publication` instances. This results in gzserver being extremely slow during its exit stage, especially with large worlds that contain many entities. This pull request makes sure that all callbacks are removed every time a gzclient exits.", "title": "Make sure gzserver destroys all callbacks when gzclient exits", "destination": {"commit": {"hash": "efb73c3847d5", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/efb73c3847d5.json"}, "html": {"href": "#!/osrf/gazebo/commits/efb73c3847d5"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "5d22fb7a1826", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo/commit/5d22fb7a1826"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo/commits/5d22fb7a1826"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f2b7e0a0-04ff-4851-9879-a852a70325b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "ocrave/gazebo", "uuid": "{f2b7e0a0-04ff-4851-9879-a852a70325b2}"}, "branch": {"name": "fix_exit"}}, "state": "OPEN", "author": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "date": "2016-06-10T12:37:33.474944+00:00"}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19161496.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19161496"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "I'm not sure if it matters, but would it make more sense to reset the sub and pub before calling `node->Fini()`? I think `sub` is the highest priority for clearing since it can generate callbacks", "markup": "markdown", "html": "<p>I'm not sure if it matters, but would it make more sense to reset the sub and pub before calling <code>node-&gt;Fini()</code>? I think <code>sub</code> is the highest priority for clearing since it can generate callbacks</p>", "type": "rendered"}, "created_on": "2016-06-01T00:35:39.882966+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2016-06-01T00:35:39.885817+00:00", "type": "pullrequest_comment", "id": 19161496}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19120598.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19120598"}}, "parent": {"id": 19046315, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19046315.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19046315"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "The main issue was that the list of callbacks in `Publication` was not properly cleared after a gzclient exited. So, I would recommend launching a gzserver and monitor the list of `Publication::callbacks` when one or several gzclients are launched and after they exit.", "markup": "markdown", "html": "<p>The main issue was that the list of callbacks in <code>Publication</code> was not properly cleared after a gzclient exited. So, I would recommend launching a gzserver and monitor the list of <code>Publication::callbacks</code> when one or several gzclients are launched and after they exit.</p>", "type": "rendered"}, "created_on": "2016-05-31T10:05:23.767681+00:00", "user": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "updated_on": "2016-05-31T10:05:23.825507+00:00", "type": "pullrequest_comment", "id": 19120598}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19046315.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19046315"}}, "parent": {"id": 18993107, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18993107.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18993107"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "Thanks for addressing all the comments! I'm starting to write an integration test for this. Please let me know if you have any hints of what I should be testing based on what guided you to make the changes you made here. Thanks!", "markup": "markdown", "html": "<p>Thanks for addressing all the comments! I'm starting to write an integration test for this. Please let me know if you have any hints of what I should be testing based on what guided you to make the changes you made here. Thanks!</p>", "type": "rendered"}, "created_on": "2016-05-27T17:15:17.071718+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2016-05-27T17:15:17.073956+00:00", "type": "pullrequest_comment", "id": 19046315}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19023916.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19023916"}}, "parent": {"id": 18992445, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18992445.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18992445"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "I was not able to reproduce those errors with the latest version of this pull request.", "markup": "markdown", "html": "<p>I was not able to reproduce those errors with the latest version of this pull request.</p>", "type": "rendered"}, "created_on": "2016-05-27T09:44:41.775889+00:00", "user": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "updated_on": "2016-05-27T09:44:41.971098+00:00", "type": "pullrequest_comment", "id": 19023916}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19023864.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19023864"}}, "parent": {"id": 19022895, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19022895.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19022895"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "I *backout* this changeset because it does not work with `auto &subscribeNode` and `auto &node`. It successfully compiled but caused some issues at runtime.", "markup": "markdown", "html": "<p>I <em>backout</em> this changeset because it does not work with <code>auto &amp;subscribeNode</code> and <code>auto &amp;node</code>. It successfully compiled but caused some issues at runtime.</p>", "type": "rendered"}, "created_on": "2016-05-27T09:43:24.402901+00:00", "user": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "inline": {}, "updated_on": "2016-05-27T09:43:24.614085+00:00", "type": "pullrequest_comment", "id": 19023864}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"update": {"description": "When gzclient exits, gzserver still maintains a list of obsolete callbacks in its `Publication` instances. This results in gzserver being extremely slow during its exit stage, especially with large worlds that contain many entities. This pull request makes sure that all callbacks are removed every time a gzclient exits.", "title": "Make sure gzserver destroys all callbacks when gzclient exits", "destination": {"commit": {"hash": "17b2f08327b2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/17b2f08327b2.json"}, "html": {"href": "#!/osrf/gazebo/commits/17b2f08327b2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "d9ec1d064645", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo/commit/d9ec1d064645"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo/commits/d9ec1d064645"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f2b7e0a0-04ff-4851-9879-a852a70325b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "ocrave/gazebo", "uuid": "{f2b7e0a0-04ff-4851-9879-a852a70325b2}"}, "branch": {"name": "fix_exit"}}, "state": "OPEN", "author": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "date": "2016-05-27T09:41:40.153372+00:00"}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19023055.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19023055"}}, "parent": {"id": 18992824, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18992824.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18992824"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "Done.", "markup": "markdown", "html": "<p>Done.</p>", "type": "rendered"}, "created_on": "2016-05-27T09:22:58.638874+00:00", "user": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "inline": {}, "updated_on": "2016-05-27T09:22:58.778524+00:00", "type": "pullrequest_comment", "id": 19023055}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19023041.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19023041"}}, "parent": {"id": 18992728, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18992728.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18992728"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "You are right, there is no need to use a shared pointer in that case. I reverted it back and made sure that its callbacks are destroyed in `DataLogger~DataLogger()`.", "markup": "markdown", "html": "<p>You are right, there is no need to use a shared pointer in that case. I reverted it back and made sure that its callbacks are destroyed in <code>DataLogger~DataLogger()</code>.</p>", "type": "rendered"}, "created_on": "2016-05-27T09:22:41.046514+00:00", "user": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "inline": {}, "updated_on": "2016-05-27T09:22:41.231277+00:00", "type": "pullrequest_comment", "id": 19023041}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19022929.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19022929"}}, "parent": {"id": 18993376, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18993376.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18993376"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "You are right, I should not have moved it.", "markup": "markdown", "html": "<p>You are right, I should not have moved it.</p>", "type": "rendered"}, "created_on": "2016-05-27T09:20:17.180975+00:00", "user": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "inline": {}, "updated_on": "2016-05-27T09:20:17.335065+00:00", "type": "pullrequest_comment", "id": 19022929}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"update": {"description": "When gzclient exits, gzserver still maintains a list of obsolete callbacks in its `Publication` instances. This results in gzserver being extremely slow during its exit stage, especially with large worlds that contain many entities. This pull request makes sure that all callbacks are removed every time a gzclient exits.", "title": "Make sure gzserver destroys all callbacks when gzclient exits", "destination": {"commit": {"hash": "17b2f08327b2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/17b2f08327b2.json"}, "html": {"href": "#!/osrf/gazebo/commits/17b2f08327b2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "a9ad1d64f8e3", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo/commit/a9ad1d64f8e3"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo/commits/a9ad1d64f8e3"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f2b7e0a0-04ff-4851-9879-a852a70325b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "ocrave/gazebo", "uuid": "{f2b7e0a0-04ff-4851-9879-a852a70325b2}"}, "branch": {"name": "fix_exit"}}, "state": "OPEN", "author": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "date": "2016-05-27T09:19:55.605606+00:00"}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/19022895.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-19022895"}}, "parent": {"id": 18993541, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18993541.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18993541"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "Done.", "markup": "markdown", "html": "<p>Done.</p>", "type": "rendered"}, "created_on": "2016-05-27T09:19:28.380915+00:00", "user": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "inline": {}, "updated_on": "2016-05-27T09:19:28.578913+00:00", "type": "pullrequest_comment", "id": 19022895}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18993624.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18993624"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "Thanks for the contribution! This helps a lot with our efforts to improve memory management in Gazebo!", "markup": "markdown", "html": "<p>Thanks for the contribution! This helps a lot with our efforts to improve memory management in Gazebo!</p>", "type": "rendered"}, "created_on": "2016-05-26T16:26:17.025677+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2016-05-26T16:26:17.033651+00:00", "type": "pullrequest_comment", "id": 18993624}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18993541.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18993541"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "I think we could use `auto &subscribeNode` and `auto &node` here to avoid making copies. ", "markup": "markdown", "html": "<p>I think we could use <code>auto &amp;subscribeNode</code> and <code>auto &amp;node</code> here to avoid making copies. </p>", "type": "rendered"}, "created_on": "2016-05-26T16:25:04.268460+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2016-05-26T16:25:04.271132+00:00", "type": "pullrequest_comment", "id": 18993541}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18993376.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18993376"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "Could you explain the reason for moving this to the end? I think it could actually be moved up, so we clean all transport before cleaning up the rest. The reason is that we want to clean up callbacks which might try to access other members, such as `mouseMoveVis` before the members become null.", "markup": "markdown", "html": "<p>Could you explain the reason for moving this to the end? I think it could actually be moved up, so we clean all transport before cleaning up the rest. The reason is that we want to clean up callbacks which might try to access other members, such as <code>mouseMoveVis</code> before the members become null.</p>", "type": "rendered"}, "created_on": "2016-05-26T16:22:47.757616+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2016-05-26T16:22:47.766595+00:00", "type": "pullrequest_comment", "id": 18993376}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18993107.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18993107"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "Can you think of a test which could verify the publications are being properly cleaned up now? It would be nice to have one so we don't break it again.", "markup": "markdown", "html": "<p>Can you think of a test which could verify the publications are being properly cleaned up now? It would be nice to have one so we don't break it again.</p>", "type": "rendered"}, "created_on": "2016-05-26T16:17:42.631587+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2016-05-26T16:17:42.641558+00:00", "type": "pullrequest_comment", "id": 18993107}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18992824.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18992824"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "It might be a good idea to check if node is not null before trying to call Fini here. The close event could be called multiple times.", "markup": "markdown", "html": "<p>It might be a good idea to check if node is not null before trying to call Fini here. The close event could be called multiple times.</p>", "type": "rendered"}, "created_on": "2016-05-26T16:12:20.155041+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2016-05-26T16:12:20.162239+00:00", "type": "pullrequest_comment", "id": 18992824}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18992728.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18992728"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "Can you explain the reason for making this into a shared pointer? Will its ownership be shared with others?\n\nSince `gui::DataLogger` inherits from `QDialog` and we give it a parent, we should be safe to assume Qt will take care of its lifetime. I believe that's why we were originally keeping just a raw pointer to it.", "markup": "markdown", "html": "<p>Can you explain the reason for making this into a shared pointer? Will its ownership be shared with others?</p>\n<p>Since <code>gui::DataLogger</code> inherits from <code>QDialog</code> and we give it a parent, we should be safe to assume Qt will take care of its lifetime. I believe that's why we were originally keeping just a raw pointer to it.</p>", "type": "rendered"}, "created_on": "2016-05-26T16:10:22.981488+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2016-05-26T16:10:22.983659+00:00", "type": "pullrequest_comment", "id": 18992728}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322/comments/18992445.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322/_/diff#comment-18992445"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}, "content": {"raw": "[homebrew](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-homebrew-amd64/442/#showFailuresLink) has no unexpected failures\n\n[trusty nvidia](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/423/#showFailuresLink) has no unexpected failures\n\n[xenial no gpu](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/5/) has a couple of test failures, both look new", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-homebrew-amd64/442/#showFailuresLink\" rel=\"nofollow\">homebrew</a> has no unexpected failures</p>\n<p><a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/423/#showFailuresLink\" rel=\"nofollow\">trusty nvidia</a> has no unexpected failures</p>\n<p><a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/5/\" rel=\"nofollow\">xenial no gpu</a> has a couple of test failures, both look new</p>", "type": "rendered"}, "created_on": "2016-05-26T16:05:18.993438+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2016-05-26T16:05:18.995527+00:00", "type": "pullrequest_comment", "id": 18992445}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"update": {"description": "When gzclient exits, gzserver still maintains a list of obsolete callbacks in its `Publication` instances. This results in gzserver being extremely slow during its exit stage, especially with large worlds that contain many entities. This pull request makes sure that all callbacks are removed every time a gzclient exits.", "title": "Make sure gzserver destroys all callbacks when gzclient exits", "destination": {"commit": {"hash": "fcc5126ea08d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/fcc5126ea08d.json"}, "html": {"href": "#!/osrf/gazebo/commits/fcc5126ea08d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b730bdd265b8", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo/commit/b730bdd265b8"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo/commits/b730bdd265b8"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f2b7e0a0-04ff-4851-9879-a852a70325b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "ocrave/gazebo", "uuid": "{f2b7e0a0-04ff-4851-9879-a852a70325b2}"}, "branch": {"name": "fix_exit"}}, "state": "OPEN", "author": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "date": "2016-05-26T09:26:53.960307+00:00"}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}, {"update": {"description": "When gzclient exits, gzserver still maintains a list of obsolete callbacks in its `Publication` instances. This results in gzserver being extremely slow during its exit stage, especially with large worlds that contain many entities. This pull request makes sure that all callbacks are removed every time a gzclient exits.", "title": "Make sure gzserver destroys all callbacks when gzclient exits", "destination": {"commit": {"hash": "fcc5126ea08d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/fcc5126ea08d.json"}, "html": {"href": "#!/osrf/gazebo/commits/fcc5126ea08d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b730bdd265b8", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo/commit/b730bdd265b8"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo/commits/b730bdd265b8"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ocrave/gazebo"}, "html": {"href": "https://bitbucket.org/ocrave/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f2b7e0a0-04ff-4851-9879-a852a70325b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "ocrave/gazebo", "uuid": "{f2b7e0a0-04ff-4851-9879-a852a70325b2}"}, "branch": {"name": "fix_exit"}}, "state": "OPEN", "author": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "date": "2016-05-26T09:26:53.925544+00:00"}, "pull_request": {"type": "pullrequest", "id": 2322, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2322"}}, "title": "Make sure gzserver destroys all callbacks when gzclient exits"}}]}