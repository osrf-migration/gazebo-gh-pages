{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3139/comments/130322159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3139/_/diff#comment-130322159"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3139, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3139.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3139"}}, "title": "Update to ignition citadel dependencies, c++17, cmake 3.10"}, "content": {"raw": "A crash related to SDF:\n\n1. Open model editor\n1. Insert 2 simple shapes\n1. Create a joint between them: the moment the `Create` button is clicked, `gzclient` crashes with this backtrace:\n\n```\nError [Element.cc:788] Missing element description for [use_parent_model_frame]\n[New Thread 0x7fff2ffff700 (LWP 24138)]\n\nThread 1 \"gzclient\" received signal SIGSEGV, Segmentation fault.\n0x00007ffff2953c1f in sdf::v9::Element::Set<bool> (_value=@0x7fffffffc970: false, this=0x0) at /usr/include/c++/8/bits/unique_ptr.h:342\n342           get() const noexcept\n(gdb) bt\n#0  0x00007ffff2953c1f in sdf::v9::Element::Set<bool>(bool const&) (_value=@0x7fffffffc970: false, this=0x0) at /usr/include/c++/8/bits/unique_ptr.h:342\n#1  0x00007ffff2953c1f in gazebo::msgs::AxisToSDF(gazebo::msgs::Axis const&, std::shared_ptr<sdf::v9::Element>) (_msg=..., _sdf=std::shared_ptr<sdf::v9::Element> (use count 2,\nweak count 3) = {...}) at /mnt/TERA/code/gazeboA/gazebo/msgs/msgs.cc:3194\n#2  0x00007ffff296ebfc in gazebo::msgs::JointToSDF(gazebo::msgs::Joint const&, std::shared_ptr<sdf::v9::Element>) (_msg=..., _sdf=...)\n    at /mnt/TERA/code/gazeboA_ws/build/Gazebo/gazebo/msgs/joint.pb.h:1127\n#3  0x00007ffff7360382 in gazebo::gui::JointMaker::FinalizeCreation() (this=0x55555a41a750) at /usr/include/boost/smart_ptr/shared_ptr.hpp:726\n```", "markup": "markdown", "html": "<p>A crash related to SDF:</p>\n<ol>\n<li>Open model editor</li>\n<li>Insert 2 simple shapes</li>\n<li>Create a joint between them: the moment the <code>Create</code> button is clicked, <code>gzclient</code> crashes with this backtrace:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">Error</span> <span class=\"p\">[</span><span class=\"n\">Element</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">788</span><span class=\"p\">]</span> <span class=\"n\">Missing</span> <span class=\"n\">element</span> <span class=\"n\">description</span> <span class=\"k\">for</span> <span class=\"p\">[</span><span class=\"n\">use_parent_model_frame</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">New</span> <span class=\"n\">Thread</span> <span class=\"mh\">0x7fff2ffff700</span> <span class=\"p\">(</span><span class=\"n\">LWP</span> <span class=\"mi\">24138</span><span class=\"p\">)]</span>\n\n<span class=\"n\">Thread</span> <span class=\"mi\">1</span> <span class=\"s\">&quot;gzclient&quot;</span> <span class=\"n\">received</span> <span class=\"n\">signal</span> <span class=\"n\">SIGSEGV</span><span class=\"p\">,</span> <span class=\"n\">Segmentation</span> <span class=\"n\">fault</span><span class=\"p\">.</span>\n<span class=\"mh\">0x00007ffff2953c1f</span> <span class=\"k\">in</span> <span class=\"n\">sdf</span><span class=\"o\">::</span><span class=\"n\">v9</span><span class=\"o\">::</span><span class=\"n\">Element</span><span class=\"o\">::</span><span class=\"n\">Set</span><span class=\"o\">&lt;</span><span class=\"kt\">bool</span><span class=\"o\">&gt;</span> <span class=\"p\">(</span><span class=\"n\">_value</span><span class=\"o\">=</span><span class=\"mh\">@0x7fffffffc970</span><span class=\"o\">:</span> <span class=\"nb\">false</span><span class=\"p\">,</span> <span class=\"n\">this</span><span class=\"o\">=</span><span class=\"mh\">0x0</span><span class=\"p\">)</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">c</span><span class=\"o\">++/</span><span class=\"mi\">8</span><span class=\"o\">/</span><span class=\"n\">bits</span><span class=\"o\">/</span><span class=\"n\">unique_ptr</span><span class=\"p\">.</span><span class=\"nl\">h</span><span class=\"p\">:</span><span class=\"mi\">342</span>\n<span class=\"mi\">342</span>           <span class=\"n\">get</span><span class=\"p\">()</span> <span class=\"k\">const</span> <span class=\"n\">noexcept</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span> <span class=\"n\">bt</span>\n<span class=\"cp\">#0  0x00007ffff2953c1f in sdf::v9::Element::Set&lt;bool&gt;(bool const&amp;) (_value=@0x7fffffffc970: false, this=0x0) at /usr/include</span><span class=\"cpf\">/c++/8/bits/unique_ptr.h:342</span><span class=\"cp\"></span>\n<span class=\"cp\">#1  0x00007ffff2953c1f in gazebo::msgs::AxisToSDF(gazebo::msgs::Axis const&amp;, std::shared_ptr&lt;sdf::v9::Element&gt;) (_msg=..., _sdf=std::shared_ptr&lt;sdf::v9::Element&gt; (use count 2,</span>\n<span class=\"k\">weak</span> <span class=\"n\">count</span> <span class=\"mi\">3</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"p\">{...})</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">mnt</span><span class=\"o\">/</span><span class=\"n\">TERA</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">gazeboA</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">msgs</span><span class=\"o\">/</span><span class=\"n\">msgs</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">3194</span>\n<span class=\"cp\">#2  0x00007ffff296ebfc in gazebo::msgs::JointToSDF(gazebo::msgs::Joint const&amp;, std::shared_ptr&lt;sdf::v9::Element&gt;) (_msg=..., _sdf=...)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">mnt</span><span class=\"o\">/</span><span class=\"n\">TERA</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">gazeboA_ws</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">Gazebo</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">msgs</span><span class=\"o\">/</span><span class=\"n\">joint</span><span class=\"p\">.</span><span class=\"n\">pb</span><span class=\"p\">.</span><span class=\"nl\">h</span><span class=\"p\">:</span><span class=\"mi\">1127</span>\n<span class=\"cp\">#3  0x00007ffff7360382 in gazebo::gui::JointMaker::FinalizeCreation() (this=0x55555a41a750) at /usr/include</span><span class=\"cpf\">/boost/smart_ptr/shared_ptr.hpp:726</span><span class=\"cp\"></span>\n</pre></div>", "type": "rendered"}, "created_on": "2020-01-02T18:39:24.927349+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-01-02T18:39:24.937651+00:00", "type": "pullrequest_comment", "id": 130322159}