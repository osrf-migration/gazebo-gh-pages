{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1057/comments/1669623.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1057/_/diff#comment-1669623"}}, "parent": {"id": 1668525, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1057/comments/1668525.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1057/_/diff#comment-1668525"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1057, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1057.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1057"}}, "title": "Fix memory leak in function that converts common::Image to msgs::Image"}, "content": {"raw": "I am getting the same compile errors as those produced by jenkins:\n\n\n```\n\n/home/ian/depot/clones/gazebo-pr1057/test/performance/image_convert_stress.cc: In member function \u2018virtual void ImageConvertStressTest_ManyConversions_Test::TestBody()\u2019:\n/home/ian/depot/clones/gazebo-pr1057/test/performance/image_convert_stress.cc:49:65: error: no matching function for call to \u2018gazebo::common::Image::SetFromData(unsigned char (*)[], int, int, gazebo::common::Image::PixelFormat)\u2019\n/home/ian/depot/clones/gazebo-pr1057/test/performance/image_convert_stress.cc:49:65: note: candidate is:\n/home/ian/depot/clones/gazebo-pr1057/gazebo/common/Image.hh:123:20: note: void gazebo::common::Image::SetFromData(const unsigned char*, unsigned int, unsigned int, gazebo::common::Image::PixelFormat)\n/home/ian/depot/clones/gazebo-pr1057/gazebo/common/Image.hh:123:20: note:   no known conversion for argument 1 from \u2018unsigned char (*)[]\u2019 to \u2018const unsigned char*\u2019\nIn file included from /usr/include/boost/shared_ptr.hpp:17:0,\n                 from /home/ian/depot/clones/gazebo-pr1057/test/performance/image_convert_stress.cc:18:\n/usr/include/boost/smart_ptr/shared_ptr.hpp: In constructor \u2018boost::shared_ptr<T>::shared_ptr(Y*) [with Y = unsigned char, T = unsigned char []]\u2019:\n/home/ian/depot/clones/gazebo-pr1057/test/performance/image_convert_stress.cc:41:68:   instantiated from here\n/usr/include/boost/smart_ptr/shared_ptr.hpp:187:50: error: cannot convert \u2018unsigned char*\u2019 to \u2018unsigned char (*)[]\u2019 in initialization\nmake[2]: *** [test/performance/CMakeFiles/PERFORMANCE_image_convert_stress.dir/image_convert_stress.cc.o] Error 1\nmake[1]: *** [test/performance/CMakeFiles/PERFORMANCE_image_convert_stress.dir/all] Error 2\n\n```", "markup": "markdown", "html": "<p>I am getting the same compile errors as those produced by jenkins:</p>\n<div class=\"codehilite\"><pre><span></span>/home/ian/depot/clones/gazebo-pr1057/test/performance/image_convert_stress.cc: In member function \u2018virtual void ImageConvertStressTest_ManyConversions_Test::TestBody()\u2019:\n/home/ian/depot/clones/gazebo-pr1057/test/performance/image_convert_stress.cc:49:65: error: no matching function for call to \u2018gazebo::common::Image::SetFromData(unsigned char (*)[], int, int, gazebo::common::Image::PixelFormat)\u2019\n/home/ian/depot/clones/gazebo-pr1057/test/performance/image_convert_stress.cc:49:65: note: candidate is:\n/home/ian/depot/clones/gazebo-pr1057/gazebo/common/Image.hh:123:20: note: void gazebo::common::Image::SetFromData(const unsigned char*, unsigned int, unsigned int, gazebo::common::Image::PixelFormat)\n/home/ian/depot/clones/gazebo-pr1057/gazebo/common/Image.hh:123:20: note:   no known conversion for argument 1 from \u2018unsigned char (*)[]\u2019 to \u2018const unsigned char*\u2019\nIn file included from /usr/include/boost/shared_ptr.hpp:17:0,\n                 from /home/ian/depot/clones/gazebo-pr1057/test/performance/image_convert_stress.cc:18:\n/usr/include/boost/smart_ptr/shared_ptr.hpp: In constructor \u2018boost::shared_ptr&lt;T&gt;::shared_ptr(Y*) [with Y = unsigned char, T = unsigned char []]\u2019:\n/home/ian/depot/clones/gazebo-pr1057/test/performance/image_convert_stress.cc:41:68:   instantiated from here\n/usr/include/boost/smart_ptr/shared_ptr.hpp:187:50: error: cannot convert \u2018unsigned char*\u2019 to \u2018unsigned char (*)[]\u2019 in initialization\nmake[2]: *** [test/performance/CMakeFiles/PERFORMANCE_image_convert_stress.dir/image_convert_stress.cc.o] Error 1\nmake[1]: *** [test/performance/CMakeFiles/PERFORMANCE_image_convert_stress.dir/all] Error 2\n</pre></div>", "type": "rendered"}, "created_on": "2014-04-16T05:35:38.870157+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2014-04-16T05:35:38.877760+00:00", "type": "pullrequest_comment", "id": 1669623}