{"rendered": {"description": {"raw": "This includes minor changes to get BULLET to display the same behaviour as ODE when disabling the physics engine.\r\n\r\nWhen running with ODE and disabling the physics, the contact points still get updated when [PhysicsEngine::UpdateCollision()](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/PhysicsEngine.hh?at=default&fileviewer=file-view-default#PhysicsEngine.hh-67) is called. [World::UpdatePhysics()](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/PhysicsEngine.hh?at=default&fileviewer=file-view-default#PhysicsEngine.hh-106) gets [skipped when physics engine is disabled](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/World.cc?at=default&fileviewer=file-view-default#World.cc-798), but for the ODE contact computation this doesn't matter.\r\n\r\nAssuming this is the expected behaviour, BULLET doesn't do the same: it only clears the contact points in [BulletPhysics::UpdateCollision()](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/bullet/BulletPhysics.cc?at=default&fileviewer=file-view-default#BulletPhysics.cc-459) and doesn't compute the updated contact points (*Note:* DART actually doesn't update the collisions either, but that will be treated in a different PR).\r\n\r\nLuckily this can be fixed quite easily to mirror the behaviour of ODE (see suggested changes).\r\n\r\nIt would be extremely useful to have the same behaviour as ODE in the other physics engines. Sometimes one might want to disable physics, move around the bodies (e.g. via gzclient) and see how the contact points change.\r\n\r\nThe suggested change of this PR will only take effect when the physics are disabled. Nothing changes in the default case.\r\n\r\nI suggest to update the documentation of PhysicsEngine as well, to make it more clear how UpdateCollision() and UpdatePhysics() are expected to behave. I have added a rather lengthy comment in PhysicsEngine.hh which could probably be shortened.", "markup": "markdown", "html": "<p>This includes minor changes to get BULLET to display the same behaviour as ODE when disabling the physics engine.</p>\n<p>When running with ODE and disabling the physics, the contact points still get updated when <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/PhysicsEngine.hh?at=default&amp;fileviewer=file-view-default#PhysicsEngine.hh-67\" rel=\"nofollow\">PhysicsEngine::UpdateCollision()</a> is called. <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/PhysicsEngine.hh?at=default&amp;fileviewer=file-view-default#PhysicsEngine.hh-106\" rel=\"nofollow\">World::UpdatePhysics()</a> gets <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/World.cc?at=default&amp;fileviewer=file-view-default#World.cc-798\" rel=\"nofollow\">skipped when physics engine is disabled</a>, but for the ODE contact computation this doesn't matter.</p>\n<p>Assuming this is the expected behaviour, BULLET doesn't do the same: it only clears the contact points in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/bullet/BulletPhysics.cc?at=default&amp;fileviewer=file-view-default#BulletPhysics.cc-459\" rel=\"nofollow\">BulletPhysics::UpdateCollision()</a> and doesn't compute the updated contact points (<em>Note:</em> DART actually doesn't update the collisions either, but that will be treated in a different PR).</p>\n<p>Luckily this can be fixed quite easily to mirror the behaviour of ODE (see suggested changes).</p>\n<p>It would be extremely useful to have the same behaviour as ODE in the other physics engines. Sometimes one might want to disable physics, move around the bodies (e.g. via gzclient) and see how the contact points change.</p>\n<p>The suggested change of this PR will only take effect when the physics are disabled. Nothing changes in the default case.</p>\n<p>I suggest to update the documentation of PhysicsEngine as well, to make it more clear how UpdateCollision() and UpdatePhysics() are expected to behave. I have added a rather lengthy comment in PhysicsEngine.hh which could probably be shortened.</p>", "type": "rendered"}, "title": {"raw": "Bullet should update contact information if the physics engine is disabled", "markup": "markdown", "html": "<p>Bullet should update contact information if the physics engine is disabled</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This includes minor changes to get BULLET to display the same behaviour as ODE when disabling the physics engine.\r\n\r\nWhen running with ODE and disabling the physics, the contact points still get updated when [PhysicsEngine::UpdateCollision()](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/PhysicsEngine.hh?at=default&fileviewer=file-view-default#PhysicsEngine.hh-67) is called. [World::UpdatePhysics()](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/PhysicsEngine.hh?at=default&fileviewer=file-view-default#PhysicsEngine.hh-106) gets [skipped when physics engine is disabled](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/World.cc?at=default&fileviewer=file-view-default#World.cc-798), but for the ODE contact computation this doesn't matter.\r\n\r\nAssuming this is the expected behaviour, BULLET doesn't do the same: it only clears the contact points in [BulletPhysics::UpdateCollision()](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/bullet/BulletPhysics.cc?at=default&fileviewer=file-view-default#BulletPhysics.cc-459) and doesn't compute the updated contact points (*Note:* DART actually doesn't update the collisions either, but that will be treated in a different PR).\r\n\r\nLuckily this can be fixed quite easily to mirror the behaviour of ODE (see suggested changes).\r\n\r\nIt would be extremely useful to have the same behaviour as ODE in the other physics engines. Sometimes one might want to disable physics, move around the bodies (e.g. via gzclient) and see how the contact points change.\r\n\r\nThe suggested change of this PR will only take effect when the physics are disabled. Nothing changes in the default case.\r\n\r\nI suggest to update the documentation of PhysicsEngine as well, to make it more clear how UpdateCollision() and UpdatePhysics() are expected to behave. I have added a rather lengthy comment in PhysicsEngine.hh which could probably be shortened.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2654/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diffstat/osrf/gazebo:0d39ebf2b92b%0Dcd526975bc8b?from_pullrequest_id=2654"}, "commits": {"href": "data/repositories/osrf/gazebo/pullrequests/2654/commits.json"}, "self": {"href": "data/repositories/osrf/gazebo/pullrequests/2654.json"}, "comments": {"href": "data/repositories/osrf/gazebo/pullrequests/2654/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2654/merge"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2654"}, "activity": {"href": "data/repositories/osrf/gazebo/pullrequests/2654/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:0d39ebf2b92b%0Dcd526975bc8b?from_pullrequest_id=2654"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2654/approve"}, "statuses": {"href": "data/repositories/osrf/gazebo/pullrequests/2654/statuses_page=1.json"}}, "title": "Bullet should update contact information if the physics engine is disabled", "close_source_branch": false, "reviewers": [], "id": 2654, "destination": {"commit": {"hash": "cd526975bc8b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/cd526975bc8b.json"}, "html": {"href": "#!/osrf/gazebo/commits/cd526975bc8b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "created_on": "2017-03-08T10:05:38.385312+00:00", "summary": {"raw": "This includes minor changes to get BULLET to display the same behaviour as ODE when disabling the physics engine.\r\n\r\nWhen running with ODE and disabling the physics, the contact points still get updated when [PhysicsEngine::UpdateCollision()](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/PhysicsEngine.hh?at=default&fileviewer=file-view-default#PhysicsEngine.hh-67) is called. [World::UpdatePhysics()](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/PhysicsEngine.hh?at=default&fileviewer=file-view-default#PhysicsEngine.hh-106) gets [skipped when physics engine is disabled](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/World.cc?at=default&fileviewer=file-view-default#World.cc-798), but for the ODE contact computation this doesn't matter.\r\n\r\nAssuming this is the expected behaviour, BULLET doesn't do the same: it only clears the contact points in [BulletPhysics::UpdateCollision()](#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/bullet/BulletPhysics.cc?at=default&fileviewer=file-view-default#BulletPhysics.cc-459) and doesn't compute the updated contact points (*Note:* DART actually doesn't update the collisions either, but that will be treated in a different PR).\r\n\r\nLuckily this can be fixed quite easily to mirror the behaviour of ODE (see suggested changes).\r\n\r\nIt would be extremely useful to have the same behaviour as ODE in the other physics engines. Sometimes one might want to disable physics, move around the bodies (e.g. via gzclient) and see how the contact points change.\r\n\r\nThe suggested change of this PR will only take effect when the physics are disabled. Nothing changes in the default case.\r\n\r\nI suggest to update the documentation of PhysicsEngine as well, to make it more clear how UpdateCollision() and UpdatePhysics() are expected to behave. I have added a rather lengthy comment in PhysicsEngine.hh which could probably be shortened.", "markup": "markdown", "html": "<p>This includes minor changes to get BULLET to display the same behaviour as ODE when disabling the physics engine.</p>\n<p>When running with ODE and disabling the physics, the contact points still get updated when <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/PhysicsEngine.hh?at=default&amp;fileviewer=file-view-default#PhysicsEngine.hh-67\" rel=\"nofollow\">PhysicsEngine::UpdateCollision()</a> is called. <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/PhysicsEngine.hh?at=default&amp;fileviewer=file-view-default#PhysicsEngine.hh-106\" rel=\"nofollow\">World::UpdatePhysics()</a> gets <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/World.cc?at=default&amp;fileviewer=file-view-default#World.cc-798\" rel=\"nofollow\">skipped when physics engine is disabled</a>, but for the ODE contact computation this doesn't matter.</p>\n<p>Assuming this is the expected behaviour, BULLET doesn't do the same: it only clears the contact points in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/cd526975bc8bdf3813e0600e3ece180870602471/gazebo/physics/bullet/BulletPhysics.cc?at=default&amp;fileviewer=file-view-default#BulletPhysics.cc-459\" rel=\"nofollow\">BulletPhysics::UpdateCollision()</a> and doesn't compute the updated contact points (<em>Note:</em> DART actually doesn't update the collisions either, but that will be treated in a different PR).</p>\n<p>Luckily this can be fixed quite easily to mirror the behaviour of ODE (see suggested changes).</p>\n<p>It would be extremely useful to have the same behaviour as ODE in the other physics engines. Sometimes one might want to disable physics, move around the bodies (e.g. via gzclient) and see how the contact points change.</p>\n<p>The suggested change of this PR will only take effect when the physics are disabled. Nothing changes in the default case.</p>\n<p>I suggest to update the documentation of PhysicsEngine as well, to make it more clear how UpdateCollision() and UpdatePhysics() are expected to behave. I have added a rather lengthy comment in PhysicsEngine.hh which could probably be shortened.</p>", "type": "rendered"}, "source": {"commit": {"hash": "b515f2765c28", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/JenniferBuehler/gazebo/commit/b515f2765c28"}, "html": {"href": "https://bitbucket.org/JenniferBuehler/gazebo/commits/b515f2765c28"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/JenniferBuehler/gazebo"}, "html": {"href": "https://bitbucket.org/JenniferBuehler/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{11522dd5-648b-4e9e-b908-d3e1170ba728}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "JenniferBuehler/gazebo", "uuid": "{11522dd5-648b-4e9e-b908-d3e1170ba728}"}, "branch": {"name": "bullet_update_collisions_when_disabled"}}, "comment_count": 21, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2017-03-14T17:31:44.122139+00:00", "type": "participant", "approved": true, "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}}, {"role": "PARTICIPANT", "participated_on": "2017-03-16T00:00:52.308217+00:00", "type": "participant", "approved": false, "user": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}}, {"role": "PARTICIPANT", "participated_on": "2017-03-17T00:04:34.830999+00:00", "type": "participant", "approved": true, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}], "reason": "", "updated_on": "2017-03-20T21:07:30.906273+00:00", "author": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "merge_commit": {"hash": "0d39ebf2b92b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0d39ebf2b92b.json"}, "html": {"href": "#!/osrf/gazebo/commits/0d39ebf2b92b"}}}, "closed_by": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}