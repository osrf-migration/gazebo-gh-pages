{"pagelen": 50, "values": [{"update": {"description": "Let's take this as an ugly workaround.\r\n\r\nStory: while testing the Apple built, @scpeters [realized](#!/osrf/gazebo/issue/1026/osx-seg-faults-during-plugin-teardown) that the dlclose call make the tests and plugins to segfault on Mach-O. In my works to prepare the hidden by default symbols branch, I have [realized](#!/osrf/gazebo/issue/1066/tests-segfaults-when-calling-dlclose-on) that exactly the same thing was happening.\r\n\r\nI was unable to find the reason (grrrrr) why they are segfaulting under these two circumstances. The workaround is to disable the dlclose call. This should leave the plugin lodaded in memory since the internal counteref is not decrease. \r\n\r\nThe point is that I was able to [verify](#!/osrf/gazebo/issue/1066/tests-segfaults-when-calling-dlclose-on#comment-8815755) that after finishing gazebo or tests, the plugin and the rest of gazebo libraries are not loaded in memory any more. So my opinion is that the impact of not unload the plugin at the right moment (specially if this only occurs while closing the app) is limited.", "title": "Disable dlclose call in plugins", "destination": {"commit": {"hash": "12e147c89c29", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/12e147c89c29.json"}, "html": {"href": "#!/osrf/gazebo/commits/12e147c89c29"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "fe45d6b037b2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/fe45d6b037b2.json"}, "html": {"href": "#!/osrf/gazebo/commits/fe45d6b037b2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "no_dlclose"}}, "state": "MERGED", "author": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "date": "2014-03-03T18:03:13.667708+00:00"}, "pull_request": {"type": "pullrequest", "id": 994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994"}}, "title": "Disable dlclose call in plugins"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994/comments/1331873.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994/_/diff#comment-1331873"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994"}}, "title": "Disable dlclose call in plugins"}, "content": {"raw": "[Jenkins has just a couple test failures](http://build.osrfoundation.org/job/gazebo-any-devel-quantal-amd64-gpu-nvidia/315/testReport/), only one unusual one:\n~~~\n147: [ RUN      ] GripperTest.Close\n147: \u001b[Msg] \u001b\u001bWaiting for master.\u001b\u001b\n147: \u001b\u001b\u001b\u001b[Msg] \u001b\u001bConnected to gazebo master @ \u001b\u001bhttp://127.0.0.1:11345\u001b\u001b\n147: \u001b\u001b\u001b\u001b[Msg] \u001b\u001bPublicized address: \u001b\u001b192.168.1.196\u001b\u001b\n147: \u001b[Wrn] \u001b\u001b[\u001b\u001bModelDatabase.cc\u001b\u001b:\u001b\u001b344\u001b\u001b] \u001b\u001bGetting models from[\u001b\u001bhttp://gazebosim.org/models/\u001b\u001b]. This may take a few seconds.\n147: \u001blibprotobuf FATAL /var/lib/jenkins/workspace/gazebo-any-devel-quantal-amd64-gpu-nvidia/build/gazebo/msgs/wrench.pb.cc:310] CHECK failed: (&from) != (this): \n147: terminate called after throwing an instance of 'google::protobuf::FatalException'\n147: \u001b\u001b\u001b\u001b[Dbg] \u001b\u001b[\u001b\u001bServerFixture.cc\u001b\u001b:\u001b\u001b144\u001b\u001b] \u001b\u001bServerFixture load in \u001b\u001b61.1\u001b\u001b seconds, timeout after \u001b\u001b600\u001b\u001b seconds\n147:   what():  CHECK failed: (&from) != (this): \n147: \u001b\n11/78 Test #147: INTEGRATION_gripper .....................***Exception: Other 80.20 sec\n~~~\nEDIT: I haven't been able to reproduce this, so I don't think it should hold things up.", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-any-devel-quantal-amd64-gpu-nvidia/315/testReport/\" rel=\"nofollow\">Jenkins has just a couple test failures</a>, only one unusual one:</p>\n<div class=\"codehilite\"><pre><span></span>147: [ RUN      ] GripperTest.Close\n147: \u001b[Msg] \u001b\u001bWaiting for master.\u001b\u001b\n147: \u001b\u001b\u001b\u001b[Msg] \u001b\u001bConnected to gazebo master @ \u001b\u001bhttp://127.0.0.1:11345\u001b\u001b\n147: \u001b\u001b\u001b\u001b[Msg] \u001b\u001bPublicized address: \u001b\u001b192.168.1.196\u001b\u001b\n147: \u001b[Wrn] \u001b\u001b[\u001b\u001bModelDatabase.cc\u001b\u001b:\u001b\u001b344\u001b\u001b] \u001b\u001bGetting models from[\u001b\u001bhttp://gazebosim.org/models/\u001b\u001b]. This may take a few seconds.\n147: \u001blibprotobuf FATAL /var/lib/jenkins/workspace/gazebo-any-devel-quantal-amd64-gpu-nvidia/build/gazebo/msgs/wrench.pb.cc:310] CHECK failed: (&amp;from) != (this): \n147: terminate called after throwing an instance of &#39;google::protobuf::FatalException&#39;\n147: \u001b\u001b\u001b\u001b[Dbg] \u001b\u001b[\u001b\u001bServerFixture.cc\u001b\u001b:\u001b\u001b144\u001b\u001b] \u001b\u001bServerFixture load in \u001b\u001b61.1\u001b\u001b seconds, timeout after \u001b\u001b600\u001b\u001b seconds\n147:   what():  CHECK failed: (&amp;from) != (this): \n147: \u001b\n11/78 Test #147: INTEGRATION_gripper .....................***Exception: Other 80.20 sec\n</pre></div>\n\n\n<p>EDIT: I haven't been able to reproduce this, so I don't think it should hold things up.</p>", "type": "rendered"}, "created_on": "2014-02-28T22:24:14.701608+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-03-03T17:54:21.619379+00:00", "type": "pullrequest_comment", "id": 1331873}, "pull_request": {"type": "pullrequest", "id": 994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994"}}, "title": "Disable dlclose call in plugins"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994/comments/1339652.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994/_/diff#comment-1339652"}}, "parent": {"id": 1331873, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994/comments/1331873.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994/_/diff#comment-1331873"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994"}}, "title": "Disable dlclose call in plugins"}, "content": {"raw": "UPDATE: previous comment was affecting hidden_symbols branch and no the one in this pull request. Sorry.", "markup": "markdown", "html": "<p>UPDATE: previous comment was affecting hidden_symbols branch and no the one in this pull request. Sorry.</p>", "type": "rendered"}, "created_on": "2014-03-03T16:47:41.175213+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2014-03-03T16:56:43.831786+00:00", "type": "pullrequest_comment", "id": 1339652}, "pull_request": {"type": "pullrequest", "id": 994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994"}}, "title": "Disable dlclose call in plugins"}}, {"approval": {"date": "2014-03-03T16:16:22.746427+00:00", "pullrequest": {"type": "pullrequest", "id": 994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994"}}, "title": "Disable dlclose call in plugins"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994"}}, "title": "Disable dlclose call in plugins"}}, {"approval": {"date": "2014-03-02T06:24:50.370954+00:00", "pullrequest": {"type": "pullrequest", "id": 994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994"}}, "title": "Disable dlclose call in plugins"}, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, "pull_request": {"type": "pullrequest", "id": 994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994"}}, "title": "Disable dlclose call in plugins"}}, {"update": {"description": "Let's take this as an ugly workaround.\r\n\r\nStory: while testing the Apple built, @scpeters [realized](#!/osrf/gazebo/issue/1026/osx-seg-faults-during-plugin-teardown) that the dlclose call make the tests and plugins to segfault on Mach-O. In my works to prepare the hidden by default symbols branch, I have [realized](#!/osrf/gazebo/issue/1066/tests-segfaults-when-calling-dlclose-on) that exactly the same thing was happening.\r\n\r\nI was unable to find the reason (grrrrr) why they are segfaulting under these two circumstances. The workaround is to disable the dlclose call. This should leave the plugin lodaded in memory since the internal counteref is not decrease. \r\n\r\nThe point is that I was able to [verify](#!/osrf/gazebo/issue/1066/tests-segfaults-when-calling-dlclose-on#comment-8815755) that after finishing gazebo or tests, the plugin and the rest of gazebo libraries are not loaded in memory any more. So my opinion is that the impact of not unload the plugin at the right moment (specially if this only occurs while closing the app) is limited.", "title": "Disable dlclose call in plugins", "destination": {"commit": {"hash": "f5f87276c499", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/f5f87276c499.json"}, "html": {"href": "#!/osrf/gazebo/commits/f5f87276c499"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "fe45d6b037b2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/fe45d6b037b2.json"}, "html": {"href": "#!/osrf/gazebo/commits/fe45d6b037b2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "no_dlclose"}}, "state": "OPEN", "author": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "date": "2014-02-28T20:04:15.141330+00:00"}, "pull_request": {"type": "pullrequest", "id": 994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994"}}, "title": "Disable dlclose call in plugins"}}, {"update": {"description": "Let's take this as an ugly workaround.\r\n\r\nStory: while testing the Apple built, @scpeters [realized](#!/osrf/gazebo/issue/1026/osx-seg-faults-during-plugin-teardown) that the dlclose call make the tests and plugins to segfault on Mach-O. In my works to prepare the hidden by default symbols branch, I have [realized](#!/osrf/gazebo/issue/1066/tests-segfaults-when-calling-dlclose-on) that exactly the same thing was happening.\r\n\r\nI was unable to find the reason (grrrrr) why they are segfaulting under these two circumstances. The workaround is to disable the dlclose call. This should leave the plugin lodaded in memory since the internal counteref is not decrease. \r\n\r\nThe point is that I was able to [verify](#!/osrf/gazebo/issue/1066/tests-segfaults-when-calling-dlclose-on#comment-8815755) that after finishing gazebo or tests, the plugin and the rest of gazebo libraries are not loaded in memory any more. So my opinion is that the impact of not unload the plugin at the right moment (specially if this only occurs while closing the app) is limited.", "title": "Disable dlclose call in plugins", "destination": {"commit": {"hash": "f5f87276c499", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/f5f87276c499.json"}, "html": {"href": "#!/osrf/gazebo/commits/f5f87276c499"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "fe45d6b037b2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/fe45d6b037b2.json"}, "html": {"href": "#!/osrf/gazebo/commits/fe45d6b037b2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "no_dlclose"}}, "state": "OPEN", "author": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "date": "2014-02-28T20:04:15.119693+00:00"}, "pull_request": {"type": "pullrequest", "id": 994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/994"}}, "title": "Disable dlclose call in plugins"}}]}