{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/131120984.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/robustify/gazebo:5f13cffcf8c3..898a67ae1218?path=gazebo%2Fphysics%2FWorld.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-131120984"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3097, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097"}}, "title": "Workaround for road segments in world file not being visible in camera sensor output"}, "content": {"raw": "adding member variables will break ABI on gazebo9; I will suggest an alternative approach after reviewing other parts of this PR", "markup": "markdown", "html": "<p>adding member variables will break ABI on gazebo9; I will suggest an alternative approach after reviewing other parts of this PR</p>", "type": "rendered"}, "created_on": "2020-01-10T00:47:41.527395+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 639, "from": null, "path": "gazebo/physics/World.hh"}, "updated_on": "2020-01-10T00:47:41.531600+00:00", "type": "pullrequest_comment", "id": 131120984}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/131121038.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-131121038"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3097, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097"}}, "title": "Workaround for road segments in world file not being visible in camera sensor output"}, "content": {"raw": "@{557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5} how should we be loading roads? does the approach in this PR make sense?", "markup": "markdown", "html": "<p><span class=\"ap-mention\" data-atlassian-id=\"557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5\">@Ian Chen</span> how should we be loading roads? does the approach in this PR make sense?</p>", "type": "rendered"}, "created_on": "2020-01-10T00:48:30.864018+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2020-01-10T00:48:30.874522+00:00", "type": "pullrequest_comment", "id": 131121038}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/131479951.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-131479951"}}, "parent": {"id": 131121038, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/131121038.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-131121038"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3097, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097"}}, "title": "Workaround for road segments in world file not being visible in camera sensor output"}, "content": {"raw": "I made a comment below. I think this will fix the original issue but I wonder if the duplicate msg retransmission can be avoided.", "markup": "markdown", "html": "<p>I made a comment below. I think this will fix the original issue but I wonder if the duplicate msg retransmission can be avoided.</p>", "type": "rendered"}, "created_on": "2020-01-14T00:10:52.792223+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2020-01-14T00:10:52.798502+00:00", "type": "pullrequest_comment", "id": 131479951}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/131479858.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/robustify/gazebo:5f13cffcf8c3..898a67ae1218?path=gazebo%2Fphysics%2FWorld.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-131479858"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3097, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097"}}, "title": "Workaround for road segments in world file not being visible in camera sensor output"}, "content": {"raw": "I\u2019m not sure about re-transmitting more road msgs whenever a model is added. We could be sending a lot of duplicate road msgs that affects other consumers of this topic. I see that the rendering side has been updated to avoid creating duplicate ogre objects but I think each road msg still creates an empty road visual. If it works with just retransmitting on the first physics update, we should remove the init call here.", "markup": "markdown", "html": "<p>I\u2019m not sure about re-transmitting more road msgs whenever a model is added. We could be sending a lot of duplicate road msgs that affects other consumers of this topic. I see that the rendering side has been updated to avoid creating duplicate ogre objects but I think each road msg still creates an empty road visual. If it works with just retransmitting on the first physics update, we should remove the init call here.</p>", "type": "rendered"}, "created_on": "2020-01-14T00:09:26.697679+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": 2149, "from": null, "path": "gazebo/physics/World.cc"}, "updated_on": "2020-01-14T00:09:26.703419+00:00", "type": "pullrequest_comment", "id": 131479858}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/131487377.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-131487377"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3097, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097"}}, "title": "Workaround for road segments in world file not being visible in camera sensor output"}, "content": {"raw": "I agree that it isn\u2019t ideal to re-transmit the road messages, and the silent catch on the rendering side seems grotesque as well.\n\nWhen I started looking into this, I was loading a world file with a camera sensor built into it. In this case, just transmitting the road messages on the first physics step solves the issue. However, my desired use case is to spawn a car model with a camera sensor attached to it using `gazebo_ros` and its model spawning service. This results in the camera sensor being created after the first physics update, thereby still missing the road messages. I then implemented the workaround where the road messages are re-transmitted when a new model is spawned.\n\nAlso during my analysis I noticed that the last road message that is sent by the world loader is actually visible in the camera output, even when the camera sensor spawns later. This would explain the phenomenon reported in the [answer](http://answers.gazebosim.org/question/12553/road-visuals-not-shown-in-published-camera-image/?answer=20509#post-id-20509) to the gazebosim.org question on this issue. From my ignorance of the underlying messaging layer, this seems to indicate there is a latched message buffer of size 1. If I\u2019m correct in this assumption, perhaps the buffer size could be increased to support a reasonable number of roads in a world?\n\n\u200c", "markup": "markdown", "html": "<p>I agree that it isn\u2019t ideal to re-transmit the road messages, and the silent catch on the rendering side seems grotesque as well.</p>\n<p>When I started looking into this, I was loading a world file with a camera sensor built into it. In this case, just transmitting the road messages on the first physics step solves the issue. However, my desired use case is to spawn a car model with a camera sensor attached to it using <code>gazebo_ros</code> and its model spawning service. This results in the camera sensor being created after the first physics update, thereby still missing the road messages. I then implemented the workaround where the road messages are re-transmitted when a new model is spawned.</p>\n<p>Also during my analysis I noticed that the last road message that is sent by the world loader is actually visible in the camera output, even when the camera sensor spawns later. This would explain the phenomenon reported in the <a data-is-external-link=\"true\" href=\"http://answers.gazebosim.org/question/12553/road-visuals-not-shown-in-published-camera-image/?answer=20509#post-id-20509\" rel=\"nofollow\">answer</a> to the gazebosim.org question on this issue. From my ignorance of the underlying messaging layer, this seems to indicate there is a latched message buffer of size 1. If I\u2019m correct in this assumption, perhaps the buffer size could be increased to support a reasonable number of roads in a world?</p>\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2020-01-14T02:38:17.130157+00:00", "user": {"display_name": "Micho Radovnikovich", "uuid": "{a0c412bd-dfff-4347-ad22-72baef552eea}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba0c412bd-dfff-4347-ad22-72baef552eea%7D"}, "html": {"href": "https://bitbucket.org/%7Ba0c412bd-dfff-4347-ad22-72baef552eea%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:619abb83-31a0-42fe-a248-af179f545e4d/70585065-37d7-4edc-91aa-597b2bcb1d6f/128"}}, "nickname": "Micho Radovnikovich", "type": "user", "account_id": "557058:619abb83-31a0-42fe-a248-af179f545e4d"}, "updated_on": "2020-01-14T02:38:17.372921+00:00", "type": "pullrequest_comment", "id": 131487377}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/131670184.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-131670184"}}, "parent": {"id": 131487377, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/131487377.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-131487377"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3097, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097"}}, "title": "Workaround for road segments in world file not being visible in camera sensor output"}, "content": {"raw": "I took a slightly different approach in [road\\_sensor\\_9](#!/osrf/gazebo/commits/f4229b7519c3526c7be271c0b0c6a55dac3d6b64).  The road msgs are re-published when a scene info request is received \\(this happens when the scene on the sensor side created\\). This ensures that the road msgs are sent only when needed. I also updated the rendering side to make sure duplicate road visuals are not created. \n\nTo verify the fix, I added a camera sensor in `road.world`. To test, launch gazebo with `road.world`, go to topic viewer \\(ctrl\\+t\\) and select `/gazebo/default/camera/link/camera/image` topic. Verify that the roads now appear in the camera images.\n\n@{557058:619abb83-31a0-42fe-a248-af179f545e4d} if you have time, it would be great if you can give it a try and see if it works for your setup, thanks.", "markup": "markdown", "html": "<p>I took a slightly different approach in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/commits/f4229b7519c3526c7be271c0b0c6a55dac3d6b64\" rel=\"nofollow\">road_sensor_9</a>.  The road msgs are re-published when a scene info request is received (this happens when the scene on the sensor side created). This ensures that the road msgs are sent only when needed. I also updated the rendering side to make sure duplicate road visuals are not created. </p>\n<p>To verify the fix, I added a camera sensor in <code>road.world</code>. To test, launch gazebo with <code>road.world</code>, go to topic viewer (ctrl+t) and select <code>/gazebo/default/camera/link/camera/image</code> topic. Verify that the roads now appear in the camera images.</p>\n<p><span class=\"ap-mention\" data-atlassian-id=\"557058:619abb83-31a0-42fe-a248-af179f545e4d\">@Micho Radovnikovich</span> if you have time, it would be great if you can give it a try and see if it works for your setup, thanks.</p>", "type": "rendered"}, "created_on": "2020-01-15T02:40:18.699034+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2020-01-15T02:40:18.760218+00:00", "type": "pullrequest_comment", "id": 131670184}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/131778972.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-131778972"}}, "parent": {"id": 131670184, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/131670184.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-131670184"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3097, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097"}}, "title": "Workaround for road segments in world file not being visible in camera sensor output"}, "content": {"raw": "Thanks! I\u2019ll try it out soon and let you know what the results are.", "markup": "markdown", "html": "<p>Thanks! I\u2019ll try it out soon and let you know what the results are.</p>", "type": "rendered"}, "created_on": "2020-01-15T15:38:55.963261+00:00", "user": {"display_name": "Micho Radovnikovich", "uuid": "{a0c412bd-dfff-4347-ad22-72baef552eea}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba0c412bd-dfff-4347-ad22-72baef552eea%7D"}, "html": {"href": "https://bitbucket.org/%7Ba0c412bd-dfff-4347-ad22-72baef552eea%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:619abb83-31a0-42fe-a248-af179f545e4d/70585065-37d7-4edc-91aa-597b2bcb1d6f/128"}}, "nickname": "Micho Radovnikovich", "type": "user", "account_id": "557058:619abb83-31a0-42fe-a248-af179f545e4d"}, "updated_on": "2020-01-15T15:38:56.180330+00:00", "type": "pullrequest_comment", "id": 131778972}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/132774331.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-132774331"}}, "parent": {"id": 131778972, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/131778972.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-131778972"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3097, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097"}}, "title": "Workaround for road segments in world file not being visible in camera sensor output"}, "content": {"raw": "pull request #3182 works for me. @{557058:619abb83-31a0-42fe-a248-af179f545e4d}, are you ok declining this one?", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/pull-requests/3182/fix-missing-road-segments-in-camera\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #3182</a> works for me. <span class=\"ap-mention\" data-atlassian-id=\"557058:619abb83-31a0-42fe-a248-af179f545e4d\">@Micho Radovnikovich</span>, are you ok declining this one?</p>", "type": "rendered"}, "created_on": "2020-01-23T00:10:23.274968+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-01-23T00:21:49.100336+00:00", "type": "pullrequest_comment", "id": 132774331}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/132775123.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-132775123"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3097, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097"}}, "title": "Workaround for road segments in world file not being visible in camera sensor output"}, "content": {"raw": "I finally got around to testing my setup with the `road_sensor_9` branch, and it works great for me as well! Thanks @{557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5} ! I\u2019ll decline my PR now.", "markup": "markdown", "html": "<p>I finally got around to testing my setup with the <code>road_sensor_9</code> branch, and it works great for me as well! Thanks <span class=\"ap-mention\" data-atlassian-id=\"557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5\">@Ian Chen</span> ! I\u2019ll decline my PR now.</p>", "type": "rendered"}, "created_on": "2020-01-23T00:23:23.945487+00:00", "user": {"display_name": "Micho Radovnikovich", "uuid": "{a0c412bd-dfff-4347-ad22-72baef552eea}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba0c412bd-dfff-4347-ad22-72baef552eea%7D"}, "html": {"href": "https://bitbucket.org/%7Ba0c412bd-dfff-4347-ad22-72baef552eea%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:619abb83-31a0-42fe-a248-af179f545e4d/70585065-37d7-4edc-91aa-597b2bcb1d6f/128"}}, "nickname": "Micho Radovnikovich", "type": "user", "account_id": "557058:619abb83-31a0-42fe-a248-af179f545e4d"}, "updated_on": "2020-01-23T00:23:24.197892+00:00", "type": "pullrequest_comment", "id": 132775123}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/132778122.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-132778122"}}, "parent": {"id": 132775123, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097/comments/132775123.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097/_/diff#comment-132775123"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3097, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3097"}}, "title": "Workaround for road segments in world file not being visible in camera sensor output"}, "content": {"raw": "thanks for working on this and finding the cause of the problem!", "markup": "markdown", "html": "<p>thanks for working on this and finding the cause of the problem!</p>", "type": "rendered"}, "created_on": "2020-01-23T01:13:10.929548+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2020-01-23T01:13:10.941877+00:00", "type": "pullrequest_comment", "id": 132778122}], "page": 1, "size": 10}