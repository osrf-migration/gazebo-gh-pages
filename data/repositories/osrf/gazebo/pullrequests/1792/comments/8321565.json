{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1792/comments/8321565.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:2dcf49a65c12..1105d39b4f78?path=gazebo%2Fsensors%2FAltimeterSensor.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1792/_/diff#comment-8321565"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1792, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1792.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1792"}}, "title": "Altimeter sensor (Redo of pull request #1751)"}, "content": {"raw": "Same question as in the previous pull request, since there's an offset between the parent and the sensor poses, don't we need to take the parent's angular velocity into account here? Something like:\n\n~~~\nignition::math::Vector3d parentLinVel =\n    this->dataPtr->parentLink->GetWorldLinearVel(this->pose.pos).Ign();\n\nignition::math::Vector3d parentAngVel =\n    this->dataPtr->parentLink->GetWorldAngularVel(this->pose.pos).Ign();\n\nignition::math::Vector3d sensorLinVel =\n    parentLinVel + parentAngVel * this->pose.Ign().Length();\n~~~", "markup": "markdown", "html": "<p>Same question as in the previous pull request, since there's an offset between the parent and the sensor poses, don't we need to take the parent's angular velocity into account here? Something like:</p>\n<div class=\"codehilite\"><pre><span></span>ignition::math::Vector3d parentLinVel =\n    this-&gt;dataPtr-&gt;parentLink-&gt;GetWorldLinearVel(this-&gt;pose.pos).Ign();\n\nignition::math::Vector3d parentAngVel =\n    this-&gt;dataPtr-&gt;parentLink-&gt;GetWorldAngularVel(this-&gt;pose.pos).Ign();\n\nignition::math::Vector3d sensorLinVel =\n    parentLinVel + parentAngVel * this-&gt;pose.Ign().Length();\n</pre></div>", "type": "rendered"}, "created_on": "2015-07-16T19:14:52.618936+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 142, "from": null, "outdated": true, "path": "gazebo/sensors/AltimeterSensor.cc"}, "updated_on": "2015-07-16T19:14:52.629037+00:00", "type": "pullrequest_comment", "id": 8321565}