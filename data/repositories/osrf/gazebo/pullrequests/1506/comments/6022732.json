{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1506/comments/6022732.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1506/_/diff#comment-6022732"}}, "parent": {"id": 6016284, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1506/comments/6016284.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1506/_/diff#comment-6016284"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1506, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1506.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1506"}}, "title": "Apply Force/Torque GUI"}, "content": {"raw": "I've rearranged the mutexes on 9f04246\n\n# For `AplyWrenchDialog`:\n\n`SetForce` and `SetTorque` change several variables, and they can be called either from the dialog (spins being edited, buttons being pressed) or when the mouse drags the pink rings. Apparently, if it was only the dialog callbacks it would be fine because all Qt callbacks are called sequentially. But since it also involves a gazebo `MouseEventHandler`, there might be more than one thread involved.\n\n# For `ApplyWrenchVisual`:\n\nEvery function that modifies `forceVisual` and `torqueVisual` is being locked. Except for `UpdateForceVisual` and `UpdateTorqueVisual`, because these functions can be called from `SetMode`, which is locked. Instead, calls to `Update[F/T]` are locked inside `SetForcePos` and `SetCoM`. \n", "markup": "markdown", "html": "<p>I've rearranged the mutexes on <a href=\"#!/osrf/gazebo/commits/9f04246\" rel=\"nofollow\" class=\"ap-connect-link\">9f04246</a></p>\n<h1 id=\"markdown-header-for-aplywrenchdialog\">For <code>AplyWrenchDialog</code>:</h1>\n<p><code>SetForce</code> and <code>SetTorque</code> change several variables, and they can be called either from the dialog (spins being edited, buttons being pressed) or when the mouse drags the pink rings. Apparently, if it was only the dialog callbacks it would be fine because all Qt callbacks are called sequentially. But since it also involves a gazebo <code>MouseEventHandler</code>, there might be more than one thread involved.</p>\n<h1 id=\"markdown-header-for-applywrenchvisual\">For <code>ApplyWrenchVisual</code>:</h1>\n<p>Every function that modifies <code>forceVisual</code> and <code>torqueVisual</code> is being locked. Except for <code>UpdateForceVisual</code> and <code>UpdateTorqueVisual</code>, because these functions can be called from <code>SetMode</code>, which is locked. Instead, calls to <code>Update[F/T]</code> are locked inside <code>SetForcePos</code> and <code>SetCoM</code>. </p>", "type": "rendered"}, "created_on": "2015-04-01T19:13:26.278386+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2015-04-01T19:13:26.283805+00:00", "type": "pullrequest_comment", "id": 6022732}