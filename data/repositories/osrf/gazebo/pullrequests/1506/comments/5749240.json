{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1506/comments/5749240.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1506/_/diff#comment-5749240"}}, "parent": {"id": 5749172, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1506/comments/5749172.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1506/_/diff#comment-5749172"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1506, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1506.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1506"}}, "title": "Apply Force/Torque GUI"}, "content": {"raw": "Got the same backtrace again. If you start a new gzclient after the crash above but keeping the same gzserver, gzserver crashes immediately with this backtrace:\n\n~~~\ngzserver: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access<T>::type boost::shared_ptr<T>::operator->() const [with T = gazebo::transport::Connection; typename boost::detail::sp_member_access<T>::type = gazebo::transport::Connection*]: Assertion `px != 0' failed.\n\nProgram received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fffdc259700 (LWP 851)]\n0x00007ffff49c9cc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\n56\t../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n#0  0x00007ffff49c9cc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\n#1  0x00007ffff49cd0d8 in __GI_abort () at abort.c:89\n#2  0x00007ffff49c2b86 in __assert_fail_base (fmt=0x7ffff4b143d0 \"%s%s%s:%u: %s%sAssertion `%s' failed.\\n%n\", \n    assertion=assertion@entry=0x42afa9 \"px != 0\", file=file@entry=0x42a658 \"/usr/include/boost/smart_ptr/shared_ptr.hpp\", \n    line=line@entry=653, \n    function=function@entry=0x42da40 <boost::shared_ptr<gazebo::transport::Connection>::operator->() const::__PRETTY_FUNCTION__> \"typename boost::detail::sp_member_access<T>::type boost::shared_ptr<T>::operator->() const [with T = gazebo::transport::Connection; typename boost::detail::sp_member_access<T>::type = gazebo::transpor\"...) at assert.c:92\n#3  0x00007ffff49c2c32 in __GI___assert_fail (assertion=0x42afa9 \"px != 0\", file=0x42a658 \"/usr/include/boost/smart_ptr/shared_ptr.hpp\", \n    line=653, \n    function=0x42da40 <boost::shared_ptr<gazebo::transport::Connection>::operator->() const::__PRETTY_FUNCTION__> \"typename boost::detail::sp_member_access<T>::type boost::shared_ptr<T>::operator->() const [with T = gazebo::transport::Connection; typename boost::detail::sp_member_access<T>::type = gazebo::transpor\"...) at assert.c:101\n#4  0x0000000000420a23 in boost::shared_ptr<gazebo::transport::Connection>::operator-> (this=<optimized out>)\n    at /usr/include/boost/smart_ptr/shared_ptr.hpp:653\n#5  0x0000000000423e17 in operator-> (this=0x7fff78002bd8) at /usr/include/boost/thread/lock_types.hpp:331\n#6  gazebo::Master::RunOnce (this=this@entry=0x6c7e00) at /home/louisep/gazebo_source/gazebo/gazebo/Master.cc:367\n#7  0x0000000000423e80 in gazebo::Master::Run (this=0x6c7e00) at /home/louisep/gazebo_source/gazebo/gazebo/Master.cc:334\n#8  0x00007ffff5c0ca4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#9  0x00007ffff6a4a182 in start_thread (arg=0x7fffdc259700) at pthread_create.c:312\n#10 0x00007ffff4a8e00d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\n~~~", "markup": "markdown", "html": "<p>Got the same backtrace again. If you start a new gzclient after the crash above but keeping the same gzserver, gzserver crashes immediately with this backtrace:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">gzserver</span><span class=\"o\">:</span> <span class=\"o\">/</span><span class=\"nt\">usr</span><span class=\"o\">/</span><span class=\"nt\">include</span><span class=\"o\">/</span><span class=\"nt\">boost</span><span class=\"o\">/</span><span class=\"nt\">smart_ptr</span><span class=\"o\">/</span><span class=\"nt\">shared_ptr</span><span class=\"p\">.</span><span class=\"nc\">hpp</span><span class=\"p\">:</span><span class=\"nd\">653</span><span class=\"o\">:</span> <span class=\"nt\">typename</span> <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">detail</span><span class=\"p\">::</span><span class=\"nd\">sp_member_access</span><span class=\"o\">&lt;</span><span class=\"nt\">T</span><span class=\"o\">&gt;</span><span class=\"p\">::</span><span class=\"nd\">type</span> <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"nt\">T</span><span class=\"o\">&gt;</span><span class=\"p\">::</span><span class=\"nd\">operator-</span><span class=\"o\">&gt;()</span> <span class=\"nt\">const</span> <span class=\"cp\">[</span><span class=\"k\">with</span> <span class=\"n\">T</span><span class=\"o\"> =</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::transport::Connection</span><span class=\"p\">;</span> <span class=\"nx\">typename</span> <span class=\"nx\">boost</span><span class=\"nl\">::detail::sp_member_access</span><span class=\"o\">&lt;</span><span class=\"nx\">T</span><span class=\"o\">&gt;</span><span class=\"nl\">::type</span> <span class=\"o\">=</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::transport::Connection</span><span class=\"o\">*</span><span class=\"cp\">]</span><span class=\"o\">:</span> <span class=\"nt\">Assertion</span> <span class=\"err\">`</span><span class=\"nt\">px</span> <span class=\"o\">!=</span> <span class=\"nt\">0</span><span class=\"s1\">&#39; failed.</span>\n\n<span class=\"s1\">Program received signal SIGABRT, Aborted.</span>\n<span class=\"cp\">[</span><span class=\"nx\">Switching</span> <span class=\"k\">to</span> <span class=\"k\">Thread</span> <span class=\"mh\">0x7fffdc259700</span> <span class=\"p\">(</span><span class=\"nx\">LWP</span> <span class=\"mi\">851</span><span class=\"p\">)</span><span class=\"cp\">]</span><span class=\"s1\"></span>\n<span class=\"s1\">0x00007ffff49c9cc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56</span>\n<span class=\"s1\">56  ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.</span>\n<span class=\"s1\">(gdb) bt</span>\n<span class=\"s1\">#0  0x00007ffff49c9cc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56</span>\n<span class=\"s1\">#1  0x00007ffff49cd0d8 in __GI_abort () at abort.c:89</span>\n<span class=\"s1\">#2  0x00007ffff49c2b86 in __assert_fail_base (fmt=0x7ffff4b143d0 &quot;%s%s%s:%u: %s%sAssertion `%s&#39;</span> <span class=\"nt\">failed</span><span class=\"o\">.</span><span class=\"err\">\\</span><span class=\"nt\">n</span><span class=\"o\">%</span><span class=\"nt\">n</span><span class=\"s2\">&quot;, </span>\n<span class=\"s2\">    assertion=assertion@entry=0x42afa9 &quot;</span><span class=\"nt\">px</span> <span class=\"o\">!=</span> <span class=\"nt\">0</span><span class=\"s2\">&quot;, file=file@entry=0x42a658 &quot;</span><span class=\"o\">/</span><span class=\"nt\">usr</span><span class=\"o\">/</span><span class=\"nt\">include</span><span class=\"o\">/</span><span class=\"nt\">boost</span><span class=\"o\">/</span><span class=\"nt\">smart_ptr</span><span class=\"o\">/</span><span class=\"nt\">shared_ptr</span><span class=\"p\">.</span><span class=\"nc\">hpp</span><span class=\"s2\">&quot;, </span>\n<span class=\"s2\">    line=line@entry=653, </span>\n<span class=\"s2\">    function=function@entry=0x42da40 &lt;boost::shared_ptr&lt;gazebo::transport::Connection&gt;::operator-&gt;() const::__PRETTY_FUNCTION__&gt; &quot;</span><span class=\"nt\">typename</span> <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">detail</span><span class=\"p\">::</span><span class=\"nd\">sp_member_access</span><span class=\"o\">&lt;</span><span class=\"nt\">T</span><span class=\"o\">&gt;</span><span class=\"p\">::</span><span class=\"nd\">type</span> <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"nt\">T</span><span class=\"o\">&gt;</span><span class=\"p\">::</span><span class=\"nd\">operator-</span><span class=\"o\">&gt;()</span> <span class=\"nt\">const</span> <span class=\"cp\">[</span><span class=\"k\">with</span> <span class=\"n\">T</span><span class=\"o\"> =</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::transport::Connection</span><span class=\"p\">;</span> <span class=\"nx\">typename</span> <span class=\"nx\">boost</span><span class=\"nl\">::detail::sp_member_access</span><span class=\"o\">&lt;</span><span class=\"nx\">T</span><span class=\"o\">&gt;</span><span class=\"nl\">::type</span> <span class=\"o\">=</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::transpor</span><span class=\"s2\">&quot;...) at assert.c:92</span>\n<span class=\"s2\">#3  0x00007ffff49c2c32 in __GI___assert_fail (assertion=0x42afa9 &quot;</span><span class=\"nx\">px</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"s2\">&quot;, file=0x42a658 &quot;</span><span class=\"p\">/</span><span class=\"nx\">usr</span><span class=\"p\">/</span><span class=\"nb\">include</span><span class=\"p\">/</span><span class=\"nx\">boost</span><span class=\"p\">/</span><span class=\"nx\">smart_ptr</span><span class=\"p\">/</span><span class=\"nx\">shared_ptr.hpp</span><span class=\"s2\">&quot;, </span>\n<span class=\"s2\">    line=653, </span>\n<span class=\"s2\">    function=0x42da40 &lt;boost::shared_ptr&lt;gazebo::transport::Connection&gt;::operator-&gt;() const::__PRETTY_FUNCTION__&gt; &quot;</span><span class=\"nx\">typename</span> <span class=\"nx\">boost</span><span class=\"nl\">::detail::sp_member_access</span><span class=\"o\">&lt;</span><span class=\"nx\">T</span><span class=\"o\">&gt;</span><span class=\"nl\">::type</span> <span class=\"nx\">boost</span><span class=\"nl\">::shared_ptr</span><span class=\"o\">&lt;</span><span class=\"nx\">T</span><span class=\"o\">&gt;</span><span class=\"nl\">::operator</span><span class=\"o\">-&gt;</span><span class=\"p\">()</span> <span class=\"nx\">const</span> <span class=\"err\">[</span><span class=\"k\">with</span> <span class=\"n\">T</span><span class=\"o\"> =</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::transport::Connection</span><span class=\"p\">;</span> <span class=\"nx\">typename</span> <span class=\"nx\">boost</span><span class=\"nl\">::detail::sp_member_access</span><span class=\"o\">&lt;</span><span class=\"nx\">T</span><span class=\"o\">&gt;</span><span class=\"nl\">::type</span> <span class=\"o\">=</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::transpor</span><span class=\"s2\">&quot;...) at assert.c:101</span>\n<span class=\"s2\">#4  0x0000000000420a23 in boost::shared_ptr&lt;gazebo::transport::Connection&gt;::operator-&gt; (this=&lt;optimized out&gt;)</span>\n<span class=\"s2\">    at /usr/include/boost/smart_ptr/shared_ptr.hpp:653</span>\n<span class=\"s2\">#5  0x0000000000423e17 in operator-&gt; (this=0x7fff78002bd8) at /usr/include/boost/thread/lock_types.hpp:331</span>\n<span class=\"s2\">#6  gazebo::Master::RunOnce (this=this@entry=0x6c7e00) at /home/louisep/gazebo_source/gazebo/gazebo/Master.cc:367</span>\n<span class=\"s2\">#7  0x0000000000423e80 in gazebo::Master::Run (this=0x6c7e00) at /home/louisep/gazebo_source/gazebo/gazebo/Master.cc:334</span>\n<span class=\"s2\">#8  0x00007ffff5c0ca4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0</span>\n<span class=\"s2\">#9  0x00007ffff6a4a182 in start_thread (arg=0x7fffdc259700) at pthread_create.c:312</span>\n<span class=\"s2\">#10 0x00007ffff4a8e00d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111</span>\n</pre></div>", "type": "rendered"}, "created_on": "2015-03-19T01:45:14.925077+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2015-03-19T01:45:14.936157+00:00", "type": "pullrequest_comment", "id": 5749240}