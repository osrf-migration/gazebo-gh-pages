{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55372542.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55372542"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "Gazebo crashes for me if I do:\n\n1. Open `test/worlds/16bit_camera.world `\n1. Open the topic viewer for `l16bit_camera_sensor`\n1. On the viewer, change to the `rgb16bit_camera_sensor`\n1. Gazebo crashes with this backtrace:\n\n~~~\n*** Error in `gzclient': munmap_chunk(): invalid pointer: 0x00007faae00a6100 ***\n======= Backtrace: =========\n/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7fab8809b7e5]\n/lib/x86_64-linux-gnu/libc.so.6(cfree+0x1a8)[0x7fab880a8698]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5Image10SharedDtorEv+0x2f)[0x7fab84e775ff]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5ImageD2Ev+0x17)[0x7fab84e77637]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5ImageD0Ev+0x9)[0x7fab84e77659]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs12ImageStampedD1Ev+0x17)[0x7fab84e78337]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs12ImageStampedD0Ev+0x9)[0x7fab84e78359]\n/usr/local/lib/libgazebo_gui.so.7(+0x1fcd01)[0x7fab89279d01]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport4Node15ProcessIncomingEv+0x266)[0x7fab851ff6b6]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport12TopicManager12ProcessNodesEb+0xf7)[0x7fab8520deb7]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport17ConnectionManager9RunUpdateEv+0x103)[0x7fab851f54c3]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport17ConnectionManager3RunEv+0xf8)[0x7fab851f57d8]\n~~~\n\nIf I open `rgb16bit` before ` l16bit` there's no crash", "markup": "markdown", "html": "<p>Gazebo crashes for me if I do:</p>\n<ol>\n<li>Open <code>test/worlds/16bit_camera.world</code></li>\n<li>Open the topic viewer for <code>l16bit_camera_sensor</code></li>\n<li>On the viewer, change to the <code>rgb16bit_camera_sensor</code></li>\n<li>Gazebo crashes with this backtrace:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span>*** Error in `gzclient&#39;: munmap_chunk(): invalid pointer: 0x00007faae00a6100 ***\n======= Backtrace: =========\n/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7fab8809b7e5]\n/lib/x86_64-linux-gnu/libc.so.6(cfree+0x1a8)[0x7fab880a8698]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5Image10SharedDtorEv+0x2f)[0x7fab84e775ff]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5ImageD2Ev+0x17)[0x7fab84e77637]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5ImageD0Ev+0x9)[0x7fab84e77659]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs12ImageStampedD1Ev+0x17)[0x7fab84e78337]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs12ImageStampedD0Ev+0x9)[0x7fab84e78359]\n/usr/local/lib/libgazebo_gui.so.7(+0x1fcd01)[0x7fab89279d01]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport4Node15ProcessIncomingEv+0x266)[0x7fab851ff6b6]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport12TopicManager12ProcessNodesEb+0xf7)[0x7fab8520deb7]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport17ConnectionManager9RunUpdateEv+0x103)[0x7fab851f54c3]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport17ConnectionManager3RunEv+0xf8)[0x7fab851f57d8]\n</pre></div>\n\n\n<p>If I open <code>rgb16bit</code> before <code>l16bit</code> there's no crash</p>", "type": "rendered"}, "created_on": "2018-02-03T02:55:21.605895+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2018-02-03T02:55:21.608989+00:00", "type": "pullrequest_comment", "id": 55372542}