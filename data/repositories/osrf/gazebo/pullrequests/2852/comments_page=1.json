{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/53228683.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:4c3cd22e85b0..afe088345718?path=gazebo%2Frendering%2FCamera.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-53228683"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "adding a virtual function might break ABI", "markup": "markdown", "html": "<p>adding a virtual function might break ABI</p>", "type": "rendered"}, "created_on": "2018-01-09T05:33:03.004158+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 353, "from": null, "path": "gazebo/rendering/Camera.hh"}, "updated_on": "2018-01-09T05:33:03.006185+00:00", "type": "pullrequest_comment", "id": 53228683}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/53229672.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:d5f69e475c40..7deb11ae75f6?path=gazebo%2Frendering%2FCamera.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-53229672"}}, "parent": {"id": 53228683, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/53228683.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-53228683"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "removed \te623a5e", "markup": "markdown", "html": "<p>removed     <a href=\"#!/osrf/gazebo/commits/e623a5e\" rel=\"nofollow\" class=\"ap-connect-link\">e623a5e</a></p>", "type": "rendered"}, "created_on": "2018-01-09T06:02:08.834879+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": null, "from": null, "path": "gazebo/rendering/Camera.hh"}, "updated_on": "2018-01-09T06:02:08.837333+00:00", "type": "pullrequest_comment", "id": 53229672}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54674860.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54674860"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "CI looks ok", "markup": "markdown", "html": "<p>CI looks ok</p>", "type": "rendered"}, "created_on": "2018-01-25T22:20:28.550458+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-25T22:20:28.553083+00:00", "type": "pullrequest_comment", "id": 54674860}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54675783.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:d5f69e475c40..7deb11ae75f6?path=gazebo%2Frendering%2FCamera.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54675783"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "can you add a unit test for this new function?", "markup": "markdown", "html": "<p>can you add a unit test for this new function?</p>", "type": "rendered"}, "created_on": "2018-01-25T22:35:49.656969+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 353, "from": null, "path": "gazebo/rendering/Camera.hh"}, "updated_on": "2018-01-25T22:35:49.659108+00:00", "type": "pullrequest_comment", "id": 54675783}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54682467.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:00aed4c3b1e3..7deb11ae75f6?path=gazebo%2Frendering%2FCamera.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54682467"}}, "parent": {"id": 54675783, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54675783.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54675783"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "added unit test. 066f173", "markup": "markdown", "html": "<p>added unit test. <a href=\"#!/osrf/gazebo/commits/066f173\" rel=\"nofollow\" class=\"ap-connect-link\">066f173</a></p>", "type": "rendered"}, "created_on": "2018-01-26T01:28:54.880512+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": null, "from": null, "path": "gazebo/rendering/Camera.hh"}, "updated_on": "2018-01-26T01:28:54.883463+00:00", "type": "pullrequest_comment", "id": 54682467}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54677294.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:d5f69e475c40..7deb11ae75f6?path=gazebo%2Frendering%2FCamera.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54677294"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "the doxygen for this function on gazebo8 is a little different\n\n* #!/osrf/gazebo/src/bcde3cce06f83b520e6dccdfcd53cce585c00fca/gazebo/rendering/Camera.hh?at=gazebo8&fileviewer=file-view-default#Camera.hh-256\n\n~~~\n      /// \\brief Get the depth of the image in bytes per pixel\n      /// \\return Depth of the image in bytes per pixel\n~~~\n\nwhich do you prefer?", "markup": "markdown", "html": "<p>the doxygen for this function on gazebo8 is a little different</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/src/bcde3cce06f83b520e6dccdfcd53cce585c00fca/gazebo/rendering/Camera.hh?at=gazebo8&amp;fileviewer=file-view-default#Camera.hh-256\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/bcde3cce06f83b520e6dccdfcd53cce585c00fca/gazebo/rendering/Camera.hh?at=gazebo8&amp;fileviewer=file-view-default#Camera.hh-256</a></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>      /// \\brief Get the depth of the image in bytes per pixel\n      /// \\return Depth of the image in bytes per pixel\n</pre></div>\n\n\n<p>which do you prefer?</p>", "type": "rendered"}, "created_on": "2018-01-25T23:06:13.664963+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 381, "from": null, "path": "gazebo/rendering/Camera.hh"}, "updated_on": "2018-01-25T23:06:13.667589+00:00", "type": "pullrequest_comment", "id": 54677294}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54682541.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:00aed4c3b1e3..7deb11ae75f6?path=gazebo%2Frendering%2FCamera.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54682541"}}, "parent": {"id": 54677294, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54677294.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54677294"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "ok ya the gazebo8 doc makes more sense. Normally image depth are given in bits but as long as we make it clear in doc, it should be ok.\n\nI've updated the comment here to be consistent with 8, and also the ImageDepth implementation for 16 bit cameras to match the doc. Also updated test. e90ac9f", "markup": "markdown", "html": "<p>ok ya the gazebo8 doc makes more sense. Normally image depth are given in bits but as long as we make it clear in doc, it should be ok.</p>\n<p>I've updated the comment here to be consistent with 8, and also the ImageDepth implementation for 16 bit cameras to match the doc. Also updated test. <a href=\"#!/osrf/gazebo/commits/e90ac9f\" rel=\"nofollow\" class=\"ap-connect-link\">e90ac9f</a></p>", "type": "rendered"}, "created_on": "2018-01-26T01:31:25.237752+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": null, "from": null, "path": "gazebo/rendering/Camera.hh"}, "updated_on": "2018-01-26T01:31:25.242236+00:00", "type": "pullrequest_comment", "id": 54682541}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54754279.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54754279"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "the new integration test is seg-faulting for me as of  e90ac9f", "markup": "markdown", "html": "<p>the new integration test is seg-faulting for me as of  <a href=\"#!/osrf/gazebo/commits/e90ac9f\" rel=\"nofollow\" class=\"ap-connect-link\">e90ac9f</a></p>", "type": "rendered"}, "created_on": "2018-01-26T18:19:49.809343+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-26T18:19:49.812021+00:00", "type": "pullrequest_comment", "id": 54754279}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54754305.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54754305"}}, "parent": {"id": 54754279, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54754279.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54754279"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "it seg-faults on the `delete [] img2;` at the end of the test", "markup": "markdown", "html": "<p>it seg-faults on the <code>delete [] img2;</code> at the end of the test</p>", "type": "rendered"}, "created_on": "2018-01-26T18:20:09.696887+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-26T18:20:09.699185+00:00", "type": "pullrequest_comment", "id": 54754305}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54767357.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54767357"}}, "parent": {"id": 54754305, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54754305.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54754305"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "fixed. 63c0ef6\n\nrunning one more [xenial-gpu build](https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/455/)", "markup": "markdown", "html": "<p>fixed. <a href=\"#!/osrf/gazebo/commits/63c0ef6\" rel=\"nofollow\" class=\"ap-connect-link\">63c0ef6</a></p>\n<p>running one more <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/455/\" rel=\"nofollow\">xenial-gpu build</a></p>", "type": "rendered"}, "created_on": "2018-01-26T21:29:10.209321+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-01-26T21:29:10.211523+00:00", "type": "pullrequest_comment", "id": 54767357}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54769213.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54769213"}}, "parent": {"id": 54767357, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54767357.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54767357"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "thanks, both tests are working locally for me now", "markup": "markdown", "html": "<p>thanks, both tests are working locally for me now</p>", "type": "rendered"}, "created_on": "2018-01-26T21:59:26.794865+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-26T21:59:26.797307+00:00", "type": "pullrequest_comment", "id": 54769213}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54776212.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54776212"}}, "parent": {"id": 54767357, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54767357.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54767357"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "tests are passing on jenkins too", "markup": "markdown", "html": "<p>tests are passing on jenkins too</p>", "type": "rendered"}, "created_on": "2018-01-27T05:09:07.502294+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-01-27T05:09:07.505207+00:00", "type": "pullrequest_comment", "id": 54776212}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54777195.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54777195"}}, "parent": {"id": 54776212, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54776212.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54776212"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "I'm suspicious about the [ImagesView_TEST](https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/455/testReport/junit/(root)/ImagesView_TEST/Switch/) because that did fail, and it seems to be failing more on the gazebo8 branch than the gazebo7. I test gazebo8 every night, so I have good statistics for that. I'll try to get some for gazebo7 and this branch to see if the changes to ImageFrame are making  those test failures better or worse.", "markup": "markdown", "html": "<p>I'm suspicious about the <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/455/testReport/junit/(root)/ImagesView_TEST/Switch/\" rel=\"nofollow\">ImagesView_TEST</a> because that did fail, and it seems to be failing more on the gazebo8 branch than the gazebo7. I test gazebo8 every night, so I have good statistics for that. I'll try to get some for gazebo7 and this branch to see if the changes to ImageFrame are making  those test failures better or worse.</p>", "type": "rendered"}, "created_on": "2018-01-27T08:24:41.983684+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-27T08:24:41.986275+00:00", "type": "pullrequest_comment", "id": 54777195}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54883494.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54883494"}}, "parent": {"id": 54776212, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54776212.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54776212"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "I'm looking into the UNIT_ImagesView_TEST since it failed in that build, though it's been failing a lot on gazebo7 and gazebo8 too", "markup": "markdown", "html": "<p>I'm looking into the UNIT_ImagesView_TEST since it failed in that build, though it's been failing a lot on gazebo7 and gazebo8 too</p>", "type": "rendered"}, "created_on": "2018-01-29T18:19:11.640478+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-29T18:19:11.644382+00:00", "type": "pullrequest_comment", "id": 54883494}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54884499.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54884499"}}, "parent": {"id": 54883494, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54883494.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54883494"}}, "depth": 5}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "one of the camera rendering events was triggered by the sensor update loop while the qtest fixture was trying to cleanup. I think the following will help:\n\n~~~\ndiff -r 7deb11ae75f6 gazebo/gui/QTestFixture.cc\n--- a/gazebo/gui/QTestFixture.cc\tTue Jan 23 01:05:02 2018 +0000\n+++ b/gazebo/gui/QTestFixture.cc\tMon Jan 29 10:18:07 2018 -0800\n@@ -30,6 +30,7 @@\n #include \"gazebo/gui/QTestFixture.hh\"\n #include \"gazebo/physics/PhysicsIface.hh\"\n #include \"gazebo/rendering/RenderingIface.hh\"\n+#include \"gazebo/sensors/SensorsIface.hh\"\n #include \"gazebo/util/LogRecord.hh\"\n \n /////////////////////////////////////////////////\n@@ -156,6 +157,7 @@\n /////////////////////////////////////////////////\n void QTestFixture::cleanup()\n {\n+  gazebo::sensors::fini();\n   gazebo::rendering::fini();\n \n   if (this->server)\n~~~", "markup": "markdown", "html": "<p>one of the camera rendering events was triggered by the sensor update loop while the qtest fixture was trying to cleanup. I think the following will help:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 7deb11ae75f6 gazebo/gui/QTestFixture.cc</span>\n<span class=\"gd\">--- a/gazebo/gui/QTestFixture.cc    Tue Jan 23 01:05:02 2018 +0000</span>\n<span class=\"gi\">+++ b/gazebo/gui/QTestFixture.cc    Mon Jan 29 10:18:07 2018 -0800</span>\n<span class=\"gu\">@@ -30,6 +30,7 @@</span>\n #include &quot;gazebo/gui/QTestFixture.hh&quot;\n #include &quot;gazebo/physics/PhysicsIface.hh&quot;\n #include &quot;gazebo/rendering/RenderingIface.hh&quot;\n<span class=\"gi\">+#include &quot;gazebo/sensors/SensorsIface.hh&quot;</span>\n #include &quot;gazebo/util/LogRecord.hh&quot;\n\n /////////////////////////////////////////////////\n<span class=\"gu\">@@ -156,6 +157,7 @@</span>\n /////////////////////////////////////////////////\n void QTestFixture::cleanup()\n {\n<span class=\"gi\">+  gazebo::sensors::fini();</span>\n   gazebo::rendering::fini();\n\n   if (this-&gt;server)\n</pre></div>", "type": "rendered"}, "created_on": "2018-01-29T18:30:48.469721+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-29T18:30:48.472220+00:00", "type": "pullrequest_comment", "id": 54884499}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54900936.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54900936"}}, "parent": {"id": 54884499, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54884499.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54884499"}}, "depth": 6}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "thanks! added in 91617bc\n\nqueued [another build](https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/)", "markup": "markdown", "html": "<p>thanks! added in <a href=\"#!/osrf/gazebo/commits/91617bc\" rel=\"nofollow\" class=\"ap-connect-link\">91617bc</a></p>\n<p>queued <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/\" rel=\"nofollow\">another build</a></p>", "type": "rendered"}, "created_on": "2018-01-29T22:01:37.394152+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-01-29T22:01:37.397562+00:00", "type": "pullrequest_comment", "id": 54900936}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54904845.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54904845"}}, "parent": {"id": 54900936, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54900936.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54900936"}}, "depth": 7}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "I was testing gazebo7 and this branch. with the `sensors::fini()` patch applied to gazebo7, the test is passing reliably, but there's a different problem with this branch ([backtrace](https://gist.github.com/scpeters/f97d384bc5052a43376cf2dfc010a5b3))", "markup": "markdown", "html": "<p>I was testing gazebo7 and this branch. with the <code>sensors::fini()</code> patch applied to gazebo7, the test is passing reliably, but there's a different problem with this branch (<a data-is-external-link=\"true\" href=\"https://gist.github.com/scpeters/f97d384bc5052a43376cf2dfc010a5b3\" rel=\"nofollow\">backtrace</a>)</p>", "type": "rendered"}, "created_on": "2018-01-29T22:59:20.892984+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-29T22:59:20.895868+00:00", "type": "pullrequest_comment", "id": 54904845}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54905123.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54905123"}}, "parent": {"id": 54904845, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54904845.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54904845"}}, "depth": 8}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "I can't run the ImagesView test even once on my desktop without getting this crash", "markup": "markdown", "html": "<p>I can't run the ImagesView test even once on my desktop without getting this crash</p>", "type": "rendered"}, "created_on": "2018-01-29T23:03:33.316192+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-29T23:03:33.318826+00:00", "type": "pullrequest_comment", "id": 54905123}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54915565.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54915565"}}, "parent": {"id": 54905123, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54905123.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54905123"}}, "depth": 9}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "I was able to reproduce the bug. It was introduced when trying to make Qt display grayscale images with type `Indexed8`. That didn't work so I just converted to rgb. `ImagesView_TEST` should pass now with changes in 16a731f. \n\nthanks for catching this.\n\n[One more build](https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/462/)\n", "markup": "markdown", "html": "<p>I was able to reproduce the bug. It was introduced when trying to make Qt display grayscale images with type <code>Indexed8</code>. That didn't work so I just converted to rgb. <code>ImagesView_TEST</code> should pass now with changes in <a href=\"#!/osrf/gazebo/commits/16a731f\" rel=\"nofollow\" class=\"ap-connect-link\">16a731f</a>. </p>\n<p>thanks for catching this.</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/462/\" rel=\"nofollow\">One more build</a></p>", "type": "rendered"}, "created_on": "2018-01-30T03:09:48.137413+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-01-30T03:11:05.014654+00:00", "type": "pullrequest_comment", "id": 54915565}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54918886.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54918886"}}, "parent": {"id": 54915565, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/54915565.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-54915565"}}, "depth": 10}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "fix confirmed. ", "markup": "markdown", "html": "<p>fix confirmed. </p>", "type": "rendered"}, "created_on": "2018-01-30T04:48:11.395175+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-01-30T04:48:11.398539+00:00", "type": "pullrequest_comment", "id": 54918886}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55008569.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55008569"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "The test is a little better now, though I've been running it on repeat and found another fix. I saw a backtrace in which `MultiCameraSensor::Render` seg-faulted while `MultiCameraSensor::Fini` was running. That sensor already has a mutex, but it wasn't locking during `Render`, so I've added a lock in the following patch\n\n~~~\ndiff -r 16a731f965db gazebo/sensors/MultiCameraSensor.cc\n--- a/gazebo/sensors/MultiCameraSensor.cc\tMon Jan 29 19:05:02 2018 -0800\n+++ b/gazebo/sensors/MultiCameraSensor.cc\tTue Jan 30 11:06:00 2018 -0800\n@@ -245,6 +245,11 @@\n   }\n \n   // Update all the cameras\n+  std::lock_guard<std::mutex> lock(this->dataPtr->cameraMutex);\n+  if (this->dataPtr->cameras.empty())\n+  {\n+    return;\n+  }\n   for (auto iter = this->dataPtr->cameras.begin();\n       iter != this->dataPtr->cameras.end(); ++iter)\n   {\n~~~", "markup": "markdown", "html": "<p>The test is a little better now, though I've been running it on repeat and found another fix. I saw a backtrace in which <code>MultiCameraSensor::Render</code> seg-faulted while <code>MultiCameraSensor::Fini</code> was running. That sensor already has a mutex, but it wasn't locking during <code>Render</code>, so I've added a lock in the following patch</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 16a731f965db gazebo/sensors/MultiCameraSensor.cc</span>\n<span class=\"gd\">--- a/gazebo/sensors/MultiCameraSensor.cc   Mon Jan 29 19:05:02 2018 -0800</span>\n<span class=\"gi\">+++ b/gazebo/sensors/MultiCameraSensor.cc   Tue Jan 30 11:06:00 2018 -0800</span>\n<span class=\"gu\">@@ -245,6 +245,11 @@</span>\n   }\n\n   // Update all the cameras\n<span class=\"gi\">+  std::lock_guard&lt;std::mutex&gt; lock(this-&gt;dataPtr-&gt;cameraMutex);</span>\n<span class=\"gi\">+  if (this-&gt;dataPtr-&gt;cameras.empty())</span>\n<span class=\"gi\">+  {</span>\n<span class=\"gi\">+    return;</span>\n<span class=\"gi\">+  }</span>\n   for (auto iter = this-&gt;dataPtr-&gt;cameras.begin();\n       iter != this-&gt;dataPtr-&gt;cameras.end(); ++iter)\n   {\n</pre></div>", "type": "rendered"}, "created_on": "2018-01-30T19:09:12.181791+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-30T19:09:12.184090+00:00", "type": "pullrequest_comment", "id": 55008569}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55009072.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55009072"}}, "parent": {"id": 55008569, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55008569.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55008569"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "The test is passing most of the time. I ran it over 50 times with this patch. When it failed, there was a seg-fault and the backtrace showed [ImageFrame::OnImage](https://gist.github.com/scpeters/9125da684d53de0c3c87a54792f1340b#file-full_backtrace-txt-L235) was running at the same time as [processEvents](https://gist.github.com/scpeters/9125da684d53de0c3c87a54792f1340b#file-full_backtrace-txt-L273)\n\nif you have any quick ideas on this, we can try to fix it more, but otherwise we can move on with just the `MultiCameraSensor::Render` patch", "markup": "markdown", "html": "<p>The test is passing most of the time. I ran it over 50 times with this patch. When it failed, there was a seg-fault and the backtrace showed <a data-is-external-link=\"true\" href=\"https://gist.github.com/scpeters/9125da684d53de0c3c87a54792f1340b#file-full_backtrace-txt-L235\" rel=\"nofollow\">ImageFrame::OnImage</a> was running at the same time as <a data-is-external-link=\"true\" href=\"https://gist.github.com/scpeters/9125da684d53de0c3c87a54792f1340b#file-full_backtrace-txt-L273\" rel=\"nofollow\">processEvents</a></p>\n<p>if you have any quick ideas on this, we can try to fix it more, but otherwise we can move on with just the <code>MultiCameraSensor::Render</code> patch</p>", "type": "rendered"}, "created_on": "2018-01-30T19:15:14.049923+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-30T19:15:14.054148+00:00", "type": "pullrequest_comment", "id": 55009072}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55041688.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55041688"}}, "parent": {"id": 55009072, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55009072.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55009072"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "I'm not very sure where the problem is. It took a while but I was finally able to reproduce it after running it 200 times. I'll test some changes and see if there's any luck.", "markup": "markdown", "html": "<p>I'm not very sure where the problem is. It took a while but I was finally able to reproduce it after running it 200 times. I'll test some changes and see if there's any luck.</p>", "type": "rendered"}, "created_on": "2018-01-31T05:31:34.630321+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-01-31T05:31:34.632911+00:00", "type": "pullrequest_comment", "id": 55041688}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55183495.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55183495"}}, "parent": {"id": 55041688, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55041688.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55041688"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "made some changes in f2f2209. I ran the test 300 times and didn't fail.. but it was difficult to reproduce on my laptop so maybe I got lucky ", "markup": "markdown", "html": "<p>made some changes in <a href=\"#!/osrf/gazebo/commits/f2f2209\" rel=\"nofollow\" class=\"ap-connect-link\">f2f2209</a>. I ran the test 300 times and didn't fail.. but it was difficult to reproduce on my laptop so maybe I got lucky </p>", "type": "rendered"}, "created_on": "2018-02-01T10:01:29.717884+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-02-01T10:01:29.722692+00:00", "type": "pullrequest_comment", "id": 55183495}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55258337.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55258337"}}, "parent": {"id": 55183495, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55183495.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55183495"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "it passed 130 times for me and then I got a double free posted here:\n\n* https://gist.github.com/scpeters/59282015402700256619958e289e82d2\n\nI think I'm ready to approve though; I'm going to let it run one more time", "markup": "markdown", "html": "<p>it passed 130 times for me and then I got a double free posted here:</p>\n<ul>\n<li><a href=\"https://gist.github.com/scpeters/59282015402700256619958e289e82d2\" rel=\"nofollow\" class=\"ap-connect-link\">https://gist.github.com/scpeters/59282015402700256619958e289e82d2</a></li>\n</ul>\n<p>I think I'm ready to approve though; I'm going to let it run one more time</p>", "type": "rendered"}, "created_on": "2018-02-01T21:29:22.952910+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-02-01T21:29:22.954992+00:00", "type": "pullrequest_comment", "id": 55258337}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55266023.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55266023"}}, "parent": {"id": 55258337, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55258337.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55258337"}}, "depth": 5}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "2119a87 \n\nqueued a new [xenial-gpu jenkins build](https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/)\n\n", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/2119a87\" rel=\"nofollow\" class=\"ap-connect-link\">2119a87</a> </p>\n<p>queued a new <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/\" rel=\"nofollow\">xenial-gpu jenkins build</a></p>", "type": "rendered"}, "created_on": "2018-02-01T23:28:28.319617+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-02-01T23:28:28.323034+00:00", "type": "pullrequest_comment", "id": 55266023}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55056906.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55056906"}}, "parent": {"id": 55008569, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55008569.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55008569"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "I'll go ahead and commit this patch\n", "markup": "markdown", "html": "<p>I'll go ahead and commit this patch</p>", "type": "rendered"}, "created_on": "2018-01-31T09:11:40.451095+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-31T09:11:40.453625+00:00", "type": "pullrequest_comment", "id": 55056906}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55057030.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55057030"}}, "parent": {"id": 55056906, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55056906.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55056906"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "00aed4c3b1e3", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/00aed4c3b1e3\" rel=\"nofollow\" class=\"ap-connect-link\">00aed4c3b1e3</a></p>", "type": "rendered"}, "created_on": "2018-01-31T09:12:52.108608+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-31T09:12:52.110913+00:00", "type": "pullrequest_comment", "id": 55057030}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55057525.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:00aed4c3b1e3..7deb11ae75f6?path=gazebo%2Fsensors%2FMultiCameraSensor.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55057525"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "@scpeters a few lines above also checks `this->dataPtr->cameras.empty()`, maybe we could just add the mutex at start of function?", "markup": "markdown", "html": "<p>@scpeters a few lines above also checks <code>this-&gt;dataPtr-&gt;cameras.empty()</code>, maybe we could just add the mutex at start of function?</p>", "type": "rendered"}, "created_on": "2018-01-31T09:16:41.954040+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": 249, "from": null, "path": "gazebo/sensors/MultiCameraSensor.cc"}, "updated_on": "2018-01-31T09:16:41.964492+00:00", "type": "pullrequest_comment", "id": 55057525}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55058270.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:00aed4c3b1e3..7deb11ae75f6?path=gazebo%2Fsensors%2FMultiCameraSensor.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55058270"}}, "parent": {"id": 55057525, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55057525.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55057525"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "I left the original checks in so it could exit fast without locking a mutex, but I wanted to check `cameras.empty()` again after getting the mutex to be safe. I did it for unsubstantiated performance reasons, so I'm ok with following your suggestion. Go ahead and change it if you prefer the fewer lines of code.", "markup": "markdown", "html": "<p>I left the original checks in so it could exit fast without locking a mutex, but I wanted to check <code>cameras.empty()</code> again after getting the mutex to be safe. I did it for unsubstantiated performance reasons, so I'm ok with following your suggestion. Go ahead and change it if you prefer the fewer lines of code.</p>", "type": "rendered"}, "created_on": "2018-01-31T09:22:36.989250+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": null, "from": null, "path": "gazebo/sensors/MultiCameraSensor.cc"}, "updated_on": "2018-01-31T09:22:36.992171+00:00", "type": "pullrequest_comment", "id": 55058270}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55183324.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:2119a872b173..f9932187fc9d?path=gazebo%2Fsensors%2FMultiCameraSensor.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55183324"}}, "parent": {"id": 55058270, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55058270.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55058270"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "minor tweak in 11937d2", "markup": "markdown", "html": "<p>minor tweak in <a href=\"#!/osrf/gazebo/commits/11937d2\" rel=\"nofollow\" class=\"ap-connect-link\">11937d2</a></p>", "type": "rendered"}, "created_on": "2018-02-01T09:59:54.098857+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": null, "from": null, "path": "gazebo/sensors/MultiCameraSensor.cc"}, "updated_on": "2018-02-01T09:59:54.101350+00:00", "type": "pullrequest_comment", "id": 55183324}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55266942.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:2119a872b173..f9932187fc9d?path=gazebo%2Fgui%2FQTestFixture.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55266942"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "I guess we can remove this line now that we removed the `sensors::fini` too", "markup": "markdown", "html": "<p>I guess we can remove this line now that we removed the <code>sensors::fini</code> too</p>", "type": "rendered"}, "created_on": "2018-02-01T23:46:25.235295+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 33, "from": null, "path": "gazebo/gui/QTestFixture.cc"}, "updated_on": "2018-02-01T23:46:25.237381+00:00", "type": "pullrequest_comment", "id": 55266942}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55268805.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:2f04b0c702ad..f72e39d0e41d?path=gazebo%2Fgui%2FQTestFixture.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55268805"}}, "parent": {"id": 55266942, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55266942.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55266942"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "done. 051d5ce", "markup": "markdown", "html": "<p>done. <a href=\"#!/osrf/gazebo/commits/051d5ce\" rel=\"nofollow\" class=\"ap-connect-link\">051d5ce</a></p>", "type": "rendered"}, "created_on": "2018-02-02T00:30:01.297532+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": null, "from": null, "path": "gazebo/gui/QTestFixture.cc"}, "updated_on": "2018-02-02T00:30:01.299711+00:00", "type": "pullrequest_comment", "id": 55268805}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55267074.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:2119a872b173..f9932187fc9d?path=gazebo%2Fgui%2FQTestFixture.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55267074"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "yeah, I think this is a good change. I looked in my overnight testing logs, and I see this test fail about 20% of the time with backtraces similar to the ones that inspired this change (one thread calling `rendering::fini` while the server thread is calling `sensors::run_once`)", "markup": "markdown", "html": "<p>yeah, I think this is a good change. I looked in my overnight testing logs, and I see this test fail about 20% of the time with backtraces similar to the ones that inspired this change (one thread calling <code>rendering::fini</code> while the server thread is calling <code>sensors::run_once</code>)</p>", "type": "rendered"}, "created_on": "2018-02-01T23:49:24.099747+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 173, "from": null, "path": "gazebo/gui/QTestFixture.cc"}, "updated_on": "2018-02-01T23:49:24.103470+00:00", "type": "pullrequest_comment", "id": 55267074}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55272606.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55272606"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "I queued a homebrew build; that might finish first", "markup": "markdown", "html": "<p>I queued a homebrew build; that might finish first</p>", "type": "rendered"}, "created_on": "2018-02-02T02:16:40.020215+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-02-02T02:16:40.023267+00:00", "type": "pullrequest_comment", "id": 55272606}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55370973.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55370973"}}, "parent": {"id": 55272606, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55272606.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55272606"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "not sure what happened to that build, jenkins died in middle of tests. Restarted a [new one](https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-homebrew-amd64/1370/)", "markup": "markdown", "html": "<p>not sure what happened to that build, jenkins died in middle of tests. Restarted a <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-homebrew-amd64/1370/\" rel=\"nofollow\">new one</a></p>", "type": "rendered"}, "created_on": "2018-02-03T00:44:11.609918+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-02-03T00:44:11.612438+00:00", "type": "pullrequest_comment", "id": 55370973}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55371695.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55371695"}}, "parent": {"id": 55370973, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55370973.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55370973"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "it was almost finished; I looked through the console output, and it looked ok\n\nthe next build should be fine", "markup": "markdown", "html": "<p>it was almost finished; I looked through the console output, and it looked ok</p>\n<p>the next build should be fine</p>", "type": "rendered"}, "created_on": "2018-02-03T01:20:35.005399+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-02-03T01:20:35.008238+00:00", "type": "pullrequest_comment", "id": 55371695}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55372542.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55372542"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "Gazebo crashes for me if I do:\n\n1. Open `test/worlds/16bit_camera.world `\n1. Open the topic viewer for `l16bit_camera_sensor`\n1. On the viewer, change to the `rgb16bit_camera_sensor`\n1. Gazebo crashes with this backtrace:\n\n~~~\n*** Error in `gzclient': munmap_chunk(): invalid pointer: 0x00007faae00a6100 ***\n======= Backtrace: =========\n/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7fab8809b7e5]\n/lib/x86_64-linux-gnu/libc.so.6(cfree+0x1a8)[0x7fab880a8698]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5Image10SharedDtorEv+0x2f)[0x7fab84e775ff]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5ImageD2Ev+0x17)[0x7fab84e77637]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5ImageD0Ev+0x9)[0x7fab84e77659]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs12ImageStampedD1Ev+0x17)[0x7fab84e78337]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs12ImageStampedD0Ev+0x9)[0x7fab84e78359]\n/usr/local/lib/libgazebo_gui.so.7(+0x1fcd01)[0x7fab89279d01]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport4Node15ProcessIncomingEv+0x266)[0x7fab851ff6b6]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport12TopicManager12ProcessNodesEb+0xf7)[0x7fab8520deb7]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport17ConnectionManager9RunUpdateEv+0x103)[0x7fab851f54c3]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport17ConnectionManager3RunEv+0xf8)[0x7fab851f57d8]\n~~~\n\nIf I open `rgb16bit` before ` l16bit` there's no crash", "markup": "markdown", "html": "<p>Gazebo crashes for me if I do:</p>\n<ol>\n<li>Open <code>test/worlds/16bit_camera.world</code></li>\n<li>Open the topic viewer for <code>l16bit_camera_sensor</code></li>\n<li>On the viewer, change to the <code>rgb16bit_camera_sensor</code></li>\n<li>Gazebo crashes with this backtrace:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span>*** Error in `gzclient&#39;: munmap_chunk(): invalid pointer: 0x00007faae00a6100 ***\n======= Backtrace: =========\n/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7fab8809b7e5]\n/lib/x86_64-linux-gnu/libc.so.6(cfree+0x1a8)[0x7fab880a8698]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5Image10SharedDtorEv+0x2f)[0x7fab84e775ff]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5ImageD2Ev+0x17)[0x7fab84e77637]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs5ImageD0Ev+0x9)[0x7fab84e77659]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs12ImageStampedD1Ev+0x17)[0x7fab84e78337]\n/usr/local/lib/libgazebo_msgs.so.7(_ZN6gazebo4msgs12ImageStampedD0Ev+0x9)[0x7fab84e78359]\n/usr/local/lib/libgazebo_gui.so.7(+0x1fcd01)[0x7fab89279d01]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport4Node15ProcessIncomingEv+0x266)[0x7fab851ff6b6]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport12TopicManager12ProcessNodesEb+0xf7)[0x7fab8520deb7]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport17ConnectionManager9RunUpdateEv+0x103)[0x7fab851f54c3]\n/usr/local/lib/libgazebo_transport.so.7(_ZN6gazebo9transport17ConnectionManager3RunEv+0xf8)[0x7fab851f57d8]\n</pre></div>\n\n\n<p>If I open <code>rgb16bit</code> before <code>l16bit</code> there's no crash</p>", "type": "rendered"}, "created_on": "2018-02-03T02:55:21.605895+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2018-02-03T02:55:21.608989+00:00", "type": "pullrequest_comment", "id": 55372542}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55482373.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55482373"}}, "parent": {"id": 55372542, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55372542.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55372542"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "~~~\nCore was generated by `gzclient --verbose src/gazebo/test/worlds/16bit_camera.world'.\nProgram terminated with signal SIGABRT, Aborted.\n#0  0x00007f164855a428 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54\n54\t../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n[Current thread is 1 (Thread 0x7f161e92b700 (LWP 26188))]\n(gdb) bt\n#0  0x00007f164855a428 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54\n#1  0x00007f164855c02a in __GI_abort () at abort.c:89\n#2  0x00007f164859c7ea in __libc_message (do_abort=do_abort@entry=2, fmt=fmt@entry=0x7f16486b5ed8 \"*** Error in `%s': %s: 0x%s ***\\n\") at ../sysdeps/posix/libc_fatal.c:175\n#3  0x00007f16485a9698 in malloc_printerr (ar_ptr=0x0, ptr=<optimized out>, str=0x7f16486b5f00 \"munmap_chunk(): invalid pointer\", action=<optimized out>) at malloc.c:5006\n#4  munmap_chunk (p=<optimized out>) at malloc.c:2842\n#5  __GI___libc_free (mem=<optimized out>) at malloc.c:2963\n#6  0x00007f164528562f in __gnu_cxx::new_allocator<char>::deallocate (this=0x7f15c400be50, __p=<optimized out>) at /usr/include/c++/5/ext/new_allocator.h:110\n#7  std::allocator_traits<std::allocator<char> >::deallocate (__a=..., __n=<optimized out>, __p=<optimized out>) at /usr/include/c++/5/bits/alloc_traits.h:517\n#8  std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_destroy (__size=<optimized out>, this=0x7f15c400be50) at /usr/include/c++/5/bits/basic_string.h:185\n#9  std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_dispose (this=0x7f15c400be50) at /usr/include/c++/5/bits/basic_string.h:180\n#10 std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string (this=0x7f15c400be50, __in_chrg=<optimized out>) at /usr/include/c++/5/bits/basic_string.h:543\n#11 gazebo::msgs::Image::SharedDtor (this=<optimized out>) at /data_fast/scpeters/ws/gazebo7/build/gazebo/gazebo/msgs/image.pb.cc:148\n#12 0x00007f1645285667 in gazebo::msgs::Image::~Image (this=0x7f15c40070e0, __in_chrg=<optimized out>) at /data_fast/scpeters/ws/gazebo7/build/gazebo/gazebo/msgs/image.pb.cc:143\n#13 0x00007f1645285689 in gazebo::msgs::Image::~Image (this=0x7f15c40070e0, __in_chrg=<optimized out>) at /data_fast/scpeters/ws/gazebo7/build/gazebo/gazebo/msgs/image.pb.cc:144\n#14 0x00007f1645286367 in gazebo::msgs::ImageStamped::~ImageStamped (this=0x7f15c4003980, __in_chrg=<optimized out>) at /data_fast/scpeters/ws/gazebo7/build/gazebo/gazebo/msgs/image_stamped.pb.cc:138\n#15 0x00007f1645286389 in gazebo::msgs::ImageStamped::~ImageStamped (this=0x7f15c4003980, __in_chrg=<optimized out>) at /data_fast/scpeters/ws/gazebo7/build/gazebo/gazebo/msgs/image_stamped.pb.cc:139\n#16 0x00007f1649777541 in boost::detail::sp_counted_base::release (this=0x7f15c4010260) at /usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\n#17 boost::detail::shared_count::~shared_count (this=<synthetic pointer>, __in_chrg=<optimized out>) at /usr/include/boost/smart_ptr/detail/shared_count.hpp:443\n#18 boost::shared_ptr<gazebo::msgs::ImageStamped>::~shared_ptr (this=<synthetic pointer>, __in_chrg=<optimized out>) at /usr/include/boost/smart_ptr/shared_ptr.hpp:323\n#19 gazebo::transport::CallbackHelperT<gazebo::msgs::ImageStamped>::HandleData(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, boost::function<void (unsigned int)>, unsigned int) (this=<optimized out>, _newdata=\"\\n\\004\\b\\006\\020\\000\\022\\217\\220\\034\\b\\300\\002\\020\\360\\001\\030\\006 \\200\\017*\\200\\220\\034\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\"..., _cb=..., _id=0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/CallbackHelper.hh:147\n#20 0x00007f164560d6e6 in gazebo::transport::Node::ProcessIncoming (this=0x5a3cae0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/Node.cc:223\n#21 0x00007f164561bee7 in gazebo::transport::TopicManager::ProcessNodes (this=this@entry=0x7f1649dfe920 <SingletonT<gazebo::transport::TopicManager>::GetInstance()::t>, _onlyOut=_onlyOut@entry=false) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/TopicManager.cc:197\n#22 0x00007f16456034f3 in gazebo::transport::ConnectionManager::RunUpdate (this=this@entry=0x7f1649dfe680 <SingletonT<gazebo::transport::ConnectionManager>::GetInstance()::t>) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/ConnectionManager.cc:283\n#23 0x00007f1645603808 in gazebo::transport::ConnectionManager::Run (this=0x7f1649dfe680 <SingletonT<gazebo::transport::ConnectionManager>::GetInstance()::t>) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/ConnectionManager.cc:314\n#24 0x00007f16465b95d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0\n#25 0x00007f16467d56ba in start_thread (arg=0x7f161e92b700) at pthread_create.c:333\n#26 0x00007f164862c41d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n(gdb)\n~~~", "markup": "markdown", "html": "<div class=\"codehilite\"><pre><span></span>Core was generated by `gzclient --verbose src/gazebo/test/worlds/16bit_camera.world&#39;.\nProgram terminated with signal SIGABRT, Aborted.\n#0  0x00007f164855a428 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54\n54  ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n[Current thread is 1 (Thread 0x7f161e92b700 (LWP 26188))]\n(gdb) bt\n#0  0x00007f164855a428 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54\n#1  0x00007f164855c02a in __GI_abort () at abort.c:89\n#2  0x00007f164859c7ea in __libc_message (do_abort=do_abort@entry=2, fmt=fmt@entry=0x7f16486b5ed8 &quot;*** Error in `%s&#39;: %s: 0x%s ***\\n&quot;) at ../sysdeps/posix/libc_fatal.c:175\n#3  0x00007f16485a9698 in malloc_printerr (ar_ptr=0x0, ptr=&lt;optimized out&gt;, str=0x7f16486b5f00 &quot;munmap_chunk(): invalid pointer&quot;, action=&lt;optimized out&gt;) at malloc.c:5006\n#4  munmap_chunk (p=&lt;optimized out&gt;) at malloc.c:2842\n#5  __GI___libc_free (mem=&lt;optimized out&gt;) at malloc.c:2963\n#6  0x00007f164528562f in __gnu_cxx::new_allocator&lt;char&gt;::deallocate (this=0x7f15c400be50, __p=&lt;optimized out&gt;) at /usr/include/c++/5/ext/new_allocator.h:110\n#7  std::allocator_traits&lt;std::allocator&lt;char&gt; &gt;::deallocate (__a=..., __n=&lt;optimized out&gt;, __p=&lt;optimized out&gt;) at /usr/include/c++/5/bits/alloc_traits.h:517\n#8  std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_M_destroy (__size=&lt;optimized out&gt;, this=0x7f15c400be50) at /usr/include/c++/5/bits/basic_string.h:185\n#9  std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_M_dispose (this=0x7f15c400be50) at /usr/include/c++/5/bits/basic_string.h:180\n#10 std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::~basic_string (this=0x7f15c400be50, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/5/bits/basic_string.h:543\n#11 gazebo::msgs::Image::SharedDtor (this=&lt;optimized out&gt;) at /data_fast/scpeters/ws/gazebo7/build/gazebo/gazebo/msgs/image.pb.cc:148\n#12 0x00007f1645285667 in gazebo::msgs::Image::~Image (this=0x7f15c40070e0, __in_chrg=&lt;optimized out&gt;) at /data_fast/scpeters/ws/gazebo7/build/gazebo/gazebo/msgs/image.pb.cc:143\n#13 0x00007f1645285689 in gazebo::msgs::Image::~Image (this=0x7f15c40070e0, __in_chrg=&lt;optimized out&gt;) at /data_fast/scpeters/ws/gazebo7/build/gazebo/gazebo/msgs/image.pb.cc:144\n#14 0x00007f1645286367 in gazebo::msgs::ImageStamped::~ImageStamped (this=0x7f15c4003980, __in_chrg=&lt;optimized out&gt;) at /data_fast/scpeters/ws/gazebo7/build/gazebo/gazebo/msgs/image_stamped.pb.cc:138\n#15 0x00007f1645286389 in gazebo::msgs::ImageStamped::~ImageStamped (this=0x7f15c4003980, __in_chrg=&lt;optimized out&gt;) at /data_fast/scpeters/ws/gazebo7/build/gazebo/gazebo/msgs/image_stamped.pb.cc:139\n#16 0x00007f1649777541 in boost::detail::sp_counted_base::release (this=0x7f15c4010260) at /usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\n#17 boost::detail::shared_count::~shared_count (this=&lt;synthetic pointer&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/boost/smart_ptr/detail/shared_count.hpp:443\n#18 boost::shared_ptr&lt;gazebo::msgs::ImageStamped&gt;::~shared_ptr (this=&lt;synthetic pointer&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/boost/smart_ptr/shared_ptr.hpp:323\n#19 gazebo::transport::CallbackHelperT&lt;gazebo::msgs::ImageStamped&gt;::HandleData(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, boost::function&lt;void (unsigned int)&gt;, unsigned int) (this=&lt;optimized out&gt;, _newdata=&quot;\\n\\004\\b\\006\\020\\000\\022\\217\\220\\034\\b\\300\\002\\020\\360\\001\\030\\006 \\200\\017*\\200\\220\\034\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062\\263\\062&quot;..., _cb=..., _id=0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/CallbackHelper.hh:147\n#20 0x00007f164560d6e6 in gazebo::transport::Node::ProcessIncoming (this=0x5a3cae0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/Node.cc:223\n#21 0x00007f164561bee7 in gazebo::transport::TopicManager::ProcessNodes (this=this@entry=0x7f1649dfe920 &lt;SingletonT&lt;gazebo::transport::TopicManager&gt;::GetInstance()::t&gt;, _onlyOut=_onlyOut@entry=false) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/TopicManager.cc:197\n#22 0x00007f16456034f3 in gazebo::transport::ConnectionManager::RunUpdate (this=this@entry=0x7f1649dfe680 &lt;SingletonT&lt;gazebo::transport::ConnectionManager&gt;::GetInstance()::t&gt;) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/ConnectionManager.cc:283\n#23 0x00007f1645603808 in gazebo::transport::ConnectionManager::Run (this=0x7f1649dfe680 &lt;SingletonT&lt;gazebo::transport::ConnectionManager&gt;::GetInstance()::t&gt;) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/ConnectionManager.cc:314\n#24 0x00007f16465b95d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0\n#25 0x00007f16467d56ba in start_thread (arg=0x7f161e92b700) at pthread_create.c:333\n#26 0x00007f164862c41d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n(gdb)\n</pre></div>", "type": "rendered"}, "created_on": "2018-02-05T18:36:26.350584+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-02-05T18:36:26.356088+00:00", "type": "pullrequest_comment", "id": 55482373}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55499073.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55499073"}}, "parent": {"id": 55482373, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55482373.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55482373"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "should be fixed. 7502ac5", "markup": "markdown", "html": "<p>should be fixed. <a href=\"#!/osrf/gazebo/commits/7502ac5\" rel=\"nofollow\" class=\"ap-connect-link\">7502ac5</a></p>", "type": "rendered"}, "created_on": "2018-02-05T22:10:04.225530+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-02-05T22:10:04.228754+00:00", "type": "pullrequest_comment", "id": 55499073}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55608250.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:2f04b0c702ad..f72e39d0e41d?path=test%2Fworlds%2F16bit_camera.world"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55608250"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "There are 2 models named box", "markup": "markdown", "html": "<p>There are 2 models named box</p>", "type": "rendered"}, "created_on": "2018-02-06T19:12:00.480521+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 113, "from": null, "path": "test/worlds/16bit_camera.world"}, "updated_on": "2018-02-06T19:12:00.483836+00:00", "type": "pullrequest_comment", "id": 55608250}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55618094.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:5d7295b5b0f1..f72e39d0e41d?path=test%2Fworlds%2F16bit_camera.world"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55618094"}}, "parent": {"id": 55608250, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55608250.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55608250"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "removed duplicate box. dbccd00", "markup": "markdown", "html": "<p>removed duplicate box. <a href=\"#!/osrf/gazebo/commits/dbccd00\" rel=\"nofollow\" class=\"ap-connect-link\">dbccd00</a></p>", "type": "rendered"}, "created_on": "2018-02-06T21:15:58.796653+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": null, "from": null, "path": "test/worlds/16bit_camera.world"}, "updated_on": "2018-02-06T21:15:58.801204+00:00", "type": "pullrequest_comment", "id": 55618094}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55628148.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:5d7295b5b0f1..f72e39d0e41d?path=gazebo%2Fgui%2Fviewers%2FImageFrame.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55628148"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "hey @iche033 I'm working on merging this forward. Is it alright if I drop the ifdef's for old qt versions or should I keep them?", "markup": "markdown", "html": "<p>hey @iche033 I'm working on merging this forward. Is it alright if I drop the ifdef's for old qt versions or should I keep them?</p>", "type": "rendered"}, "created_on": "2018-02-06T23:20:07.423812+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 80, "from": null, "path": "gazebo/gui/viewers/ImageFrame.cc"}, "updated_on": "2018-02-06T23:20:07.433253+00:00", "type": "pullrequest_comment", "id": 55628148}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55629768.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:5d7295b5b0f1..f72e39d0e41d?path=gazebo%2Fgui%2Fviewers%2FImageFrame.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55629768"}}, "parent": {"id": 55628148, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852/comments/55628148.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852/_/diff#comment-55628148"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2852, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2852.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2852"}}, "title": "Add support for 16 bit Grayscale and RGB camera image types."}, "content": {"raw": "sure you can go ahead and drop the ifdefs for old Qt versions", "markup": "markdown", "html": "<p>sure you can go ahead and drop the ifdefs for old Qt versions</p>", "type": "rendered"}, "created_on": "2018-02-06T23:47:54.459432+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": null, "from": null, "path": "gazebo/gui/viewers/ImageFrame.cc"}, "updated_on": "2018-02-06T23:47:54.462349+00:00", "type": "pullrequest_comment", "id": 55629768}], "page": 1, "size": 44}