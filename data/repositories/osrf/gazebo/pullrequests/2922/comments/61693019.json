{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2922/comments/61693019.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2922/_/diff#comment-61693019"}}, "parent": {"id": 61304036, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2922/comments/61304036.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2922/_/diff#comment-61304036"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2922, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2922.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2922"}}, "title": "Stop the world from a plugin"}, "content": {"raw": "I fixed the transport tests because Publisher, PublicationTransport and Publication must be shared objects \\(now that they inherit from `enable_shared_from_this`\\). There is still an issue with gz\\_TEST that I have not yet solved: Publisher is instantiated by `gz model` as a shared\\_ptr but its call to publication->Publish may result in an exception being thrown depending on when Publisher::OnPublishComplete is called:\n\n`'boost::exception_detail::clone_impl<boost::exception_detail::error_info_injectorboost::bad_weak_ptr >'`", "markup": "markdown", "html": "<p>I fixed the transport tests because Publisher, PublicationTransport and Publication must be shared objects (now that they inherit from <code>enable_shared_from_this</code>). There is still an issue with gz_TEST that I have not yet solved: Publisher is instantiated by <code>gz model</code> as a shared_ptr but its call to publication-&gt;Publish may result in an exception being thrown depending on when Publisher::OnPublishComplete is called:</p>\n<p><code>'boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injectorboost::bad_weak_ptr &gt;'</code></p>", "type": "rendered"}, "created_on": "2018-04-16T16:46:32.963908+00:00", "user": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "updated_on": "2018-04-16T16:47:30.600142+00:00", "type": "pullrequest_comment", "id": 61693019}