{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2263/comments/17267195.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2263/_/diff#comment-17267195"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2263, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2263.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2263"}}, "title": "Clean up entities"}, "content": {"raw": "I'm seeing a failure in `INTEGRATION_joint_screw` during teardown of the `JointTestScrew.ScrewJointLimitForce/3` using dart.\n\n~~~\n[ RUN      ] PhysicsEngines/JointTestScrew.ScrewJointLimitForce/3\n[Dbg] [joint_test.hh:64] Params: (0x460c18 pointing to \"dart\", 0x460c1d pointing to \"screw\")\n...\n[Dbg] [ServerFixture.cc:200] ServerFixture load in 0.6 seconds, timeout after 600 seconds\n[Err] [joint_screw.cc:503] dart is broken for this test, because of the pr2 gripper's closed kinematic chain, see issue #1435.\n[Dbg] [ServerFixture.cc:126] ServerFixture::Unload\n\nProgram received signal SIGSEGV, Segmentation fault.\n~~~\n\n~~~\n(gdb) bt\n#0  0x0000000000000321 in ?? ()\n#1  0x00007ffff2b1fbdf in dart::dynamics::Skeleton::~Skeleton() () from /usr/lib/libdart-core.so.4.3\n#2  0x00007ffff2b1ff01 in dart::dynamics::Skeleton::~Skeleton() () from /usr/lib/libdart-core.so.4.3\n#3  0x00007ffff2b5367e in dart::simulation::World::~World() () from /usr/lib/libdart-core.so.4.3\n#4  0x00007ffff2b53811 in dart::simulation::World::~World() () from /usr/lib/libdart-core.so.4.3\n#5  0x00007ffff72b1522 in ~DARTPhysicsPrivate (this=0x7fff7909d340, __in_chrg=<optimized out>) at gazebo/physics/dart/DARTPhysicsPrivate.hh:40\n#6  gazebo::physics::DARTPhysics::~DARTPhysics (this=0x7fffce163840, __in_chrg=<optimized out>) at gazebo/physics/dart/DARTPhysics.cc:74\n#7  0x00007ffff72b1549 in gazebo::physics::DARTPhysics::~DARTPhysics (this=0x7fffce163840, __in_chrg=<optimized out>) at gazebo/physics/dart/DARTPhysics.cc:75\n#8  0x00007ffff723af1e in boost::detail::sp_counted_base::release (this=0x7fffcc9fcb30) at /usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\n#9  0x00007ffff72a9168 in ~shared_count (this=0x7fffce6fc338, __in_chrg=<optimized out>) at /usr/include/boost/smart_ptr/detail/shared_count.hpp:371\n#10 ~shared_ptr (this=0x7fffce6fc330, __in_chrg=<optimized out>) at /usr/include/boost/smart_ptr/shared_ptr.hpp:328\n#11 ~DARTLinkPrivate (this=0x7fffce6fc330, __in_chrg=<optimized out>) at gazebo/physics/dart/DARTLinkPrivate.hh:47\n#12 gazebo::physics::DARTLink::~DARTLink (this=0x7fffce6fb6c0, __in_chrg=<optimized out>) at gazebo/physics/dart/DARTLink.cc:47\n#13 0x00007ffff72a9199 in gazebo::physics::DARTLink::~DARTLink (this=0x7fffce6fb6c0, __in_chrg=<optimized out>) at gazebo/physics/dart/DARTLink.cc:48\n#14 0x00007ffff76e37ce in boost::detail::sp_counted_base::release (this=0x7fffce6fc390) at /usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\n#15 0x00007ffff77164f8 in ~shared_count (this=0x7fffce7ea2a8, __in_chrg=<optimized out>) at /usr/include/boost/smart_ptr/detail/shared_count.hpp:371\n#16 ~shared_ptr (this=0x7fffce7ea2a0, __in_chrg=<optimized out>) at /usr/include/boost/smart_ptr/shared_ptr.hpp:328\n#17 ~RaySensorPrivate (this=0x7fffce7ea280, __in_chrg=<optimized out>) at gazebo/sensors/RaySensorPrivate.hh:32\n#18 operator() (this=<optimized out>, __ptr=0x7fffce7ea280) at /usr/include/c++/4.8/bits/unique_ptr.h:67\n#19 ~unique_ptr (this=0x7fffce6fe060, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/unique_ptr.h:184\n#20 gazebo::sensors::RaySensor::~RaySensor (this=0x7fffce6fdf10, __in_chrg=<optimized out>) at gazebo/sensors/RaySensor.cc:57\n#21 0x00007ffff7716549 in gazebo::sensors::RaySensor::~RaySensor (this=0x7fffce6fdf10, __in_chrg=<optimized out>) at gazebo/sensors/RaySensor.cc:59\n#22 0x0000000000459ea9 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release (this=0x7fffce7ea320) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\n#23 0x00007ffff7723234 in ~__shared_count (this=0x7fffccc72978, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\n#24 ~__shared_ptr (this=0x7fffccc72970, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\n#25 ~shared_ptr (this=0x7fffccc72970, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr.h:93\n#26 _Destroy<std::shared_ptr<gazebo::sensors::Sensor> > (__pointer=0x7fffccc72970) at /usr/include/c++/4.8/bits/stl_construct.h:93\n#27 __destroy<std::shared_ptr<gazebo::sensors::Sensor>*> (__last=<optimized out>, __first=0x7fffccc72970) at /usr/include/c++/4.8/bits/stl_construct.h:103\n#28 _Destroy<std::shared_ptr<gazebo::sensors::Sensor>*> (__last=<optimized out>, __first=<optimized out>) at /usr/include/c++/4.8/bits/stl_construct.h:126\n#29 _Destroy<std::shared_ptr<gazebo::sensors::Sensor>*, std::shared_ptr<gazebo::sensors::Sensor> > (__last=0x7fffccc72980, __first=0x7fffccc72960) at /usr/include/c++/4.8/bits/stl_construct.h:151\n#30 _M_erase_at_end (this=<optimized out>, __pos=0x7fffccc72960) at /usr/include/c++/4.8/bits/stl_vector.h:1352\n#31 clear (this=0x7fffcc00bbe8) at /usr/include/c++/4.8/bits/stl_vector.h:1126\n#32 gazebo::sensors::SensorManager::SensorContainer::Fini (this=0x7fffcc00bbe0) at gazebo/sensors/SensorManager.cc:444\n#33 0x00007ffff77235e9 in gazebo::sensors::SensorManager::Fini (this=0x7ffff7977680 <SingletonT<gazebo::sensors::SensorManager>::GetInstance()::t>) at gazebo/sensors/SensorManager.cc:236\n#34 0x00007ffff771abd1 in gazebo::sensors::fini () at gazebo/sensors/SensorsIface.cc:76\n#35 0x00007ffff79a73fc in gazebo::shutdown () at gazebo/gazebo.cc:142\n#36 0x00007ffff7993fbd in gazebo::Server::Run (this=0x7fffcd0e2290) at gazebo/Server.cc:567\n#37 0x000000000044c796 in gazebo::ServerFixture::RunServer (this=0x747c00, _args=...) at gazebo/test/ServerFixture.cc:270\n#38 0x00007ffff59d6a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#39 0x00007ffff7bc4182 in start_thread (arg=0x7fffd4138700) at pthread_create.c:312\n#40 0x00007ffff4ac647d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n(gdb) \n~~~", "markup": "markdown", "html": "<p>I'm seeing a failure in <code>INTEGRATION_joint_screw</code> during teardown of the <code>JointTestScrew.ScrewJointLimitForce/3</code> using dart.</p>\n<div class=\"codehilite\"><pre><span></span>[ RUN      ] PhysicsEngines/JointTestScrew.ScrewJointLimitForce/3\n[Dbg] [joint_test.hh:64] Params: (0x460c18 pointing to &quot;dart&quot;, 0x460c1d pointing to &quot;screw&quot;)\n...\n[Dbg] [ServerFixture.cc:200] ServerFixture load in 0.6 seconds, timeout after 600 seconds\n[Err] [joint_screw.cc:503] dart is broken for this test, because of the pr2 gripper&#39;s closed kinematic chain, see issue #1435.\n[Dbg] [ServerFixture.cc:126] ServerFixture::Unload\n\nProgram received signal SIGSEGV, Segmentation fault.\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>(gdb) bt\n#0  0x0000000000000321 in ?? ()\n#1  0x00007ffff2b1fbdf in dart::dynamics::Skeleton::~Skeleton() () from /usr/lib/libdart-core.so.4.3\n#2  0x00007ffff2b1ff01 in dart::dynamics::Skeleton::~Skeleton() () from /usr/lib/libdart-core.so.4.3\n#3  0x00007ffff2b5367e in dart::simulation::World::~World() () from /usr/lib/libdart-core.so.4.3\n#4  0x00007ffff2b53811 in dart::simulation::World::~World() () from /usr/lib/libdart-core.so.4.3\n#5  0x00007ffff72b1522 in ~DARTPhysicsPrivate (this=0x7fff7909d340, __in_chrg=&lt;optimized out&gt;) at gazebo/physics/dart/DARTPhysicsPrivate.hh:40\n#6  gazebo::physics::DARTPhysics::~DARTPhysics (this=0x7fffce163840, __in_chrg=&lt;optimized out&gt;) at gazebo/physics/dart/DARTPhysics.cc:74\n#7  0x00007ffff72b1549 in gazebo::physics::DARTPhysics::~DARTPhysics (this=0x7fffce163840, __in_chrg=&lt;optimized out&gt;) at gazebo/physics/dart/DARTPhysics.cc:75\n#8  0x00007ffff723af1e in boost::detail::sp_counted_base::release (this=0x7fffcc9fcb30) at /usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\n#9  0x00007ffff72a9168 in ~shared_count (this=0x7fffce6fc338, __in_chrg=&lt;optimized out&gt;) at /usr/include/boost/smart_ptr/detail/shared_count.hpp:371\n#10 ~shared_ptr (this=0x7fffce6fc330, __in_chrg=&lt;optimized out&gt;) at /usr/include/boost/smart_ptr/shared_ptr.hpp:328\n#11 ~DARTLinkPrivate (this=0x7fffce6fc330, __in_chrg=&lt;optimized out&gt;) at gazebo/physics/dart/DARTLinkPrivate.hh:47\n#12 gazebo::physics::DARTLink::~DARTLink (this=0x7fffce6fb6c0, __in_chrg=&lt;optimized out&gt;) at gazebo/physics/dart/DARTLink.cc:47\n#13 0x00007ffff72a9199 in gazebo::physics::DARTLink::~DARTLink (this=0x7fffce6fb6c0, __in_chrg=&lt;optimized out&gt;) at gazebo/physics/dart/DARTLink.cc:48\n#14 0x00007ffff76e37ce in boost::detail::sp_counted_base::release (this=0x7fffce6fc390) at /usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\n#15 0x00007ffff77164f8 in ~shared_count (this=0x7fffce7ea2a8, __in_chrg=&lt;optimized out&gt;) at /usr/include/boost/smart_ptr/detail/shared_count.hpp:371\n#16 ~shared_ptr (this=0x7fffce7ea2a0, __in_chrg=&lt;optimized out&gt;) at /usr/include/boost/smart_ptr/shared_ptr.hpp:328\n#17 ~RaySensorPrivate (this=0x7fffce7ea280, __in_chrg=&lt;optimized out&gt;) at gazebo/sensors/RaySensorPrivate.hh:32\n#18 operator() (this=&lt;optimized out&gt;, __ptr=0x7fffce7ea280) at /usr/include/c++/4.8/bits/unique_ptr.h:67\n#19 ~unique_ptr (this=0x7fffce6fe060, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/unique_ptr.h:184\n#20 gazebo::sensors::RaySensor::~RaySensor (this=0x7fffce6fdf10, __in_chrg=&lt;optimized out&gt;) at gazebo/sensors/RaySensor.cc:57\n#21 0x00007ffff7716549 in gazebo::sensors::RaySensor::~RaySensor (this=0x7fffce6fdf10, __in_chrg=&lt;optimized out&gt;) at gazebo/sensors/RaySensor.cc:59\n#22 0x0000000000459ea9 in std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release (this=0x7fffce7ea320) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\n#23 0x00007ffff7723234 in ~__shared_count (this=0x7fffccc72978, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\n#24 ~__shared_ptr (this=0x7fffccc72970, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\n#25 ~shared_ptr (this=0x7fffccc72970, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr.h:93\n#26 _Destroy&lt;std::shared_ptr&lt;gazebo::sensors::Sensor&gt; &gt; (__pointer=0x7fffccc72970) at /usr/include/c++/4.8/bits/stl_construct.h:93\n#27 __destroy&lt;std::shared_ptr&lt;gazebo::sensors::Sensor&gt;*&gt; (__last=&lt;optimized out&gt;, __first=0x7fffccc72970) at /usr/include/c++/4.8/bits/stl_construct.h:103\n#28 _Destroy&lt;std::shared_ptr&lt;gazebo::sensors::Sensor&gt;*&gt; (__last=&lt;optimized out&gt;, __first=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_construct.h:126\n#29 _Destroy&lt;std::shared_ptr&lt;gazebo::sensors::Sensor&gt;*, std::shared_ptr&lt;gazebo::sensors::Sensor&gt; &gt; (__last=0x7fffccc72980, __first=0x7fffccc72960) at /usr/include/c++/4.8/bits/stl_construct.h:151\n#30 _M_erase_at_end (this=&lt;optimized out&gt;, __pos=0x7fffccc72960) at /usr/include/c++/4.8/bits/stl_vector.h:1352\n#31 clear (this=0x7fffcc00bbe8) at /usr/include/c++/4.8/bits/stl_vector.h:1126\n#32 gazebo::sensors::SensorManager::SensorContainer::Fini (this=0x7fffcc00bbe0) at gazebo/sensors/SensorManager.cc:444\n#33 0x00007ffff77235e9 in gazebo::sensors::SensorManager::Fini (this=0x7ffff7977680 &lt;SingletonT&lt;gazebo::sensors::SensorManager&gt;::GetInstance()::t&gt;) at gazebo/sensors/SensorManager.cc:236\n#34 0x00007ffff771abd1 in gazebo::sensors::fini () at gazebo/sensors/SensorsIface.cc:76\n#35 0x00007ffff79a73fc in gazebo::shutdown () at gazebo/gazebo.cc:142\n#36 0x00007ffff7993fbd in gazebo::Server::Run (this=0x7fffcd0e2290) at gazebo/Server.cc:567\n#37 0x000000000044c796 in gazebo::ServerFixture::RunServer (this=0x747c00, _args=...) at gazebo/test/ServerFixture.cc:270\n#38 0x00007ffff59d6a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#39 0x00007ffff7bc4182 in start_thread (arg=0x7fffd4138700) at pthread_create.c:312\n#40 0x00007ffff4ac647d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n(gdb) \n</pre></div>", "type": "rendered"}, "created_on": "2016-04-14T20:59:50.301559+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-04-14T20:59:50.304624+00:00", "type": "pullrequest_comment", "id": 17267195}