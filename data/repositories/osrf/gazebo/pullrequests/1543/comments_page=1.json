{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5857667.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5857667"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1543, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543"}}, "title": "Fix clamping of PID command (#1534)"}, "content": {"raw": "Is there an easy test to write for this?", "markup": "markdown", "html": "<p>Is there an easy test to write for this?</p>", "type": "rendered"}, "created_on": "2015-03-24T21:22:36.866164+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2015-03-24T21:22:36.873774+00:00", "type": "pullrequest_comment", "id": 5857667}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5857711.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5857711"}}, "parent": {"id": 5857667, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5857667.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5857667"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1543, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543"}}, "title": "Fix clamping of PID command (#1534)"}, "content": {"raw": "I created #1535 for this reason. The question is whether we do it now or later.", "markup": "markdown", "html": "<p>I created <a href=\"#!/osrf/gazebo/issues/1535/pid-class-needs-a-test\" rel=\"nofollow\" title=\"PID class needs a test\" class=\"ap-connect-link\">#1535</a> for this reason. The question is whether we do it now or later.</p>", "type": "rendered"}, "created_on": "2015-03-24T21:24:43.831042+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-24T21:24:43.839417+00:00", "type": "pullrequest_comment", "id": 5857711}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5857764.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5857764"}}, "parent": {"id": 5857711, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5857711.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5857711"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1543, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543"}}, "title": "Fix clamping of PID command (#1534)"}, "content": {"raw": "Is there a reason not to do it now? ", "markup": "markdown", "html": "<p>Is there a reason not to do it now? </p>", "type": "rendered"}, "created_on": "2015-03-24T21:27:06.550874+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2015-03-24T21:27:06.558129+00:00", "type": "pullrequest_comment", "id": 5857764}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5857918.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5857918"}}, "parent": {"id": 5857764, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5857764.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5857764"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1543, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543"}}, "title": "Fix clamping of PID command (#1534)"}, "content": {"raw": "I knew this was related to a [handsim issue](https://bitbucket.org/osrf/handsim/pull-request/101/reduce-joint-coupling-issue-63/diff), so I thought it could be expedited, but it seems that @hsu has a workaround, so we should just write the test first. I'll decline this while the test is written.", "markup": "markdown", "html": "<p>I knew this was related to a <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/handsim/pull-request/101/reduce-joint-coupling-issue-63/diff\" rel=\"nofollow\">handsim issue</a>, so I thought it could be expedited, but it seems that @hsu has a workaround, so we should just write the test first. I'll decline this while the test is written.</p>", "type": "rendered"}, "created_on": "2015-03-24T21:34:33.442997+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-24T21:34:33.453142+00:00", "type": "pullrequest_comment", "id": 5857918}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5888672.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5888672"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1543, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543"}}, "title": "Fix clamping of PID command (#1534)"}, "content": {"raw": "Now that I look at this more closely, it is a significant change. The `cmdMin` and `cmdMax` values default to 0, so the current code attempts to interpret that as unbounded. If the default behavior should be unbounded, then we should change the default values to be non-zero in order for this change to be useful.", "markup": "markdown", "html": "<p>Now that I look at this more closely, it is a significant change. The <code>cmdMin</code> and <code>cmdMax</code> values default to 0, so the current code attempts to interpret that as unbounded. If the default behavior should be unbounded, then we should change the default values to be non-zero in order for this change to be useful.</p>", "type": "rendered"}, "created_on": "2015-03-26T00:37:04.358753+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-26T00:37:04.366056+00:00", "type": "pullrequest_comment", "id": 5888672}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5888769.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5888769"}}, "parent": {"id": 5888672, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5888672.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5888672"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1543, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543"}}, "title": "Fix clamping of PID command (#1534)"}, "content": {"raw": "Good catch. Would this work:\n\n\n```\n#!c++\n\nif (!math::equal(this->cmdMax, 0.0) || !math::equal(this->cmdMin, 0.0))\n  this->cmd = math::clamp(this->cmd, this->cmdMin, this->cmdMax);\n```\n", "markup": "markdown", "html": "<p>Good catch. Would this work:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">equal</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">cmdMax</span><span class=\"p\">,</span> <span class=\"mf\">0.0</span><span class=\"p\">)</span> <span class=\"o\">||</span> <span class=\"o\">!</span><span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">equal</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">cmdMin</span><span class=\"p\">,</span> <span class=\"mf\">0.0</span><span class=\"p\">))</span>\n  <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">cmd</span> <span class=\"o\">=</span> <span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">clamp</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">cmd</span><span class=\"p\">,</span> <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">cmdMin</span><span class=\"p\">,</span> <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">cmdMax</span><span class=\"p\">);</span>\n</pre></div>", "type": "rendered"}, "created_on": "2015-03-26T00:45:04.673068+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2015-03-26T00:45:04.683813+00:00", "type": "pullrequest_comment", "id": 5888769}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5888891.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5888891"}}, "parent": {"id": 5888769, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5888769.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5888769"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1543, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543"}}, "title": "Fix clamping of PID command (#1534)"}, "content": {"raw": "To me, it would make more sense to default `cmdMax=Inf` and `cmdMin=-Inf` (or suitably large numbers) and then use the clamp function as shown below. Otherwise, there's no way to force the output of a PID to be strictly zero, which is an uncommon use case, but we came across it in handsim.", "markup": "markdown", "html": "<p>To me, it would make more sense to default <code>cmdMax=Inf</code> and <code>cmdMin=-Inf</code> (or suitably large numbers) and then use the clamp function as shown below. Otherwise, there's no way to force the output of a PID to be strictly zero, which is an uncommon use case, but we came across it in handsim.</p>", "type": "rendered"}, "created_on": "2015-03-26T00:55:54.683776+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-26T00:55:54.689435+00:00", "type": "pullrequest_comment", "id": 5888891}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5890015.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5890015"}}, "parent": {"id": 5888891, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543/comments/5888891.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543/_/diff#comment-5888891"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1543, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1543.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1543"}}, "title": "Fix clamping of PID command (#1534)"}, "content": {"raw": "it's unusual to treat pid command of 0.0 as a special case. I like @scpeters suggestion, set default to `+/-inf`. Chances are if a user explicitly goes through the motion of setting pid command bounds to zeros, I doubt the intended behavior is to have an unbounded output?\n\nWhile we're here, what happens/should happen if `cmdMax` < `cmdMin`?", "markup": "markdown", "html": "<p>it's unusual to treat pid command of 0.0 as a special case. I like @scpeters suggestion, set default to <code>+/-inf</code>. Chances are if a user explicitly goes through the motion of setting pid command bounds to zeros, I doubt the intended behavior is to have an unbounded output?</p>\n<p>While we're here, what happens/should happen if <code>cmdMax</code> &lt; <code>cmdMin</code>?</p>", "type": "rendered"}, "created_on": "2015-03-26T03:01:03.467480+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2015-03-26T03:01:20.941979+00:00", "type": "pullrequest_comment", "id": 5890015}], "page": 1, "size": 8}