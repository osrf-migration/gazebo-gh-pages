{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/151/comments/50844.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:92ee630e0227..ae93b3ac0634?path=gazebo%2Frendering%2FContactVisual.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/151/_/diff#comment-50844"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 151, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/151.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/151"}}, "title": "Contact sensor refactor"}, "content": {"raw": "This visualization scales the square of the magnitude and then envelopes the vector length to 0.1 to 0.5 meters. So as I understand, the useful range for visualizing the magnitude is 3.3N to 7.1N. If you change the scaling factor (0.01 currently), it doesn't really help to broaden the visualized magnitudes (i.e. 3.3-7.1 vs 33-71). Instead consider something like:\n\n------------------------------------------------\n\ndouble magScale = 100;\n\ndouble vMax = 0.5;\n\ndouble vMin = 0.1;\n\ndouble vRange = vMax - vMin; // 0.4\n\ndouble offset = vRange - vMin; // 0.3\n\n// Eq in the family of Y = 1/(1+exp(-(x^2)))\n\ndouble normalScale = (2.0 * vRange) / (1 + exp (-force.GetSquaredLength() / magScale)) - offset; \n\n-------------------------------------------------------\n\nWhere magScale, vMin, vMax are user defined scaling parameters. Increasing magScale broadens the magnitudes that can be visualized. Changing vMin and vMax change the lengths of the visualized vectors.\n\nLink to Wolfram alpha for visualizing the above function\nhttp://www.wolframalpha.com/input/?i=0.8%2F%281%2Bexp%28-%28x%5E2%2F100%29%29%29-0.3", "markup": "markdown", "html": "<p>This visualization scales the square of the magnitude and then envelopes the vector length to 0.1 to 0.5 meters. So as I understand, the useful range for visualizing the magnitude is 3.3N to 7.1N. If you change the scaling factor (0.01 currently), it doesn't really help to broaden the visualized magnitudes (i.e. 3.3-7.1 vs 33-71). Instead consider something like:</p>\n<hr />\n<p>double magScale = 100;</p>\n<p>double vMax = 0.5;</p>\n<p>double vMin = 0.1;</p>\n<p>double vRange = vMax - vMin; // 0.4</p>\n<p>double offset = vRange - vMin; // 0.3</p>\n<p>// Eq in the family of Y = 1/(1+exp(-(x^2)))</p>\n<p>double normalScale = (2.0 * vRange) / (1 + exp (-force.GetSquaredLength() / magScale)) - offset; </p>\n<hr />\n<p>Where magScale, vMin, vMax are user defined scaling parameters. Increasing magScale broadens the magnitudes that can be visualized. Changing vMin and vMax change the lengths of the visualized vectors.</p>\n<p>Link to Wolfram alpha for visualizing the above function\n<a href=\"http://www.wolframalpha.com/input/?i=0.8%2F%281%2Bexp%28-%28x%5E2%2F100%29%29%29-0.3\" rel=\"nofollow\" class=\"ap-connect-link\">http://www.wolframalpha.com/input/?i=0.8%2F%281%2Bexp%28-%28x%5E2%2F100%29%29%29-0.3</a></p>", "type": "rendered"}, "created_on": "2012-11-27T23:46:49.241919+00:00", "user": {"display_name": "Stephen Brawner", "uuid": "{f6bd3fe7-4d17-4503-9232-0915d6e97879}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bf6bd3fe7-4d17-4503-9232-0915d6e97879%7D"}, "html": {"href": "https://bitbucket.org/%7Bf6bd3fe7-4d17-4503-9232-0915d6e97879%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/68ef29dce5cc8f01a4d01c17a97226bdd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSB-1.png"}}, "nickname": "brawner", "type": "user", "account_id": "557058:84c67412-a2f4-4754-87f1-e4c1e3fe58fe"}, "inline": {"to": 104, "from": null, "outdated": false, "path": "gazebo/rendering/ContactVisual.cc"}, "updated_on": "2012-11-27T23:50:41.810609+00:00", "type": "pullrequest_comment", "id": 50844}