{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2439/comments/23679458.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2439/_/diff#comment-23679458"}}, "parent": {"id": 23673822, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2439/comments/23673822.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2439/_/diff#comment-23673822"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2439, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2439.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2439"}}, "title": "Fix cleanup of visual with plugins that have callbacks"}, "content": {"raw": "I can confirm the test failure\n\n~~~\n[ RUN      ] SonarVisual_TEST.SonarVisualTest\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.2.91\n[Dbg] [ServerFixture.cc:201] ServerFixture load in 0.6 seconds, timeout after 600 seconds\nSegmentation fault (core dumped)\n~~~\n\n~~~\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007ffff7a9f48a in gazebo::rendering::SonarVisual::~SonarVisual (this=0xb17ef0, __in_chrg=<optimized out>) at gazebo/rendering/SonarVisual.cc:68\n68\t  delete dPtr->sonarRay;\n(gdb) bt\n#0  0x00007ffff7a9f48a in gazebo::rendering::SonarVisual::~SonarVisual (this=0xb17ef0, __in_chrg=<optimized out>) at gazebo/rendering/SonarVisual.cc:68\n#1  0x00007ffff7a9f4b9 in gazebo::rendering::SonarVisual::~SonarVisual (this=0xb17ef0, __in_chrg=<optimized out>) at gazebo/rendering/SonarVisual.cc:70\n#2  0x0000000000413e49 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release (this=0xcb7620) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\n#3  0x0000000000412172 in ~__shared_count (this=<synthetic pointer>, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\n#4  ~__shared_ptr (this=<synthetic pointer>, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\n#5  ~shared_ptr (this=<synthetic pointer>, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr.h:93\n#6  SonarVisual_TEST_SonarVisualTest_Test::TestBody (this=<optimized out>) at gazebo/rendering/SonarVisual_TEST.cc:58\n#7  0x00000000004353c3 in HandleSehExceptionsInMethodIfSupported<testing::Test, void> (location=0x45473f \"the test body\", method=<optimized out>, object=<optimized out>) at test/gtest/src/gtest.cc:2079\n#8  testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void> (object=object@entry=0x78c460, method=<optimized out>, location=location@entry=0x45473f \"the test body\") at test/gtest/src/gtest.cc:2115\n#9  0x0000000000427b57 in testing::Test::Run (this=this@entry=0x78c460) at test/gtest/src/gtest.cc:2152\n#10 0x0000000000427bf6 in testing::TestInfo::Run (this=0x78b4e0) at test/gtest/src/gtest.cc:2327\n#11 0x0000000000427cfd in testing::TestCase::Run (this=0x78b920) at test/gtest/src/gtest.cc:2445\n#12 0x0000000000427f8d in testing::internal::UnitTestImpl::RunAllTests (this=0x78b5a0) at test/gtest/src/gtest.cc:4316\n#13 0x000000000042828e in HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool> (location=<optimized out>, method=<optimized out>, object=<optimized out>) at test/gtest/src/gtest.cc:2079\n#14 HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool> (location=0x455c48 \"auxiliary test code (environments or event listeners)\", method=(bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x427d70 <testing::internal::UnitTestImpl::RunAllTests()>, object=0x78b5a0) at test/gtest/src/gtest.cc:2115\n#15 testing::UnitTest::Run (this=<optimized out>) at test/gtest/src/gtest.cc:3930\n#16 0x00000000004104af in RUN_ALL_TESTS () at test/gtest/include/gtest/gtest.h:2288\n#17 main (argc=1, argv=<optimized out>) at gazebo/rendering/SonarVisual_TEST.cc:65\n(gdb) \n~~~", "markup": "markdown", "html": "<p>I can confirm the test failure</p>\n<div class=\"codehilite\"><pre><span></span>[ RUN      ] SonarVisual_TEST.SonarVisualTest\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.2.91\n[Dbg] [ServerFixture.cc:201] ServerFixture load in 0.6 seconds, timeout after 600 seconds\nSegmentation fault (core dumped)\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>Program received signal SIGSEGV, Segmentation fault.\n0x00007ffff7a9f48a in gazebo::rendering::SonarVisual::~SonarVisual (this=0xb17ef0, __in_chrg=&lt;optimized out&gt;) at gazebo/rendering/SonarVisual.cc:68\n68    delete dPtr-&gt;sonarRay;\n(gdb) bt\n#0  0x00007ffff7a9f48a in gazebo::rendering::SonarVisual::~SonarVisual (this=0xb17ef0, __in_chrg=&lt;optimized out&gt;) at gazebo/rendering/SonarVisual.cc:68\n#1  0x00007ffff7a9f4b9 in gazebo::rendering::SonarVisual::~SonarVisual (this=0xb17ef0, __in_chrg=&lt;optimized out&gt;) at gazebo/rendering/SonarVisual.cc:70\n#2  0x0000000000413e49 in std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release (this=0xcb7620) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\n#3  0x0000000000412172 in ~__shared_count (this=&lt;synthetic pointer&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\n#4  ~__shared_ptr (this=&lt;synthetic pointer&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\n#5  ~shared_ptr (this=&lt;synthetic pointer&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr.h:93\n#6  SonarVisual_TEST_SonarVisualTest_Test::TestBody (this=&lt;optimized out&gt;) at gazebo/rendering/SonarVisual_TEST.cc:58\n#7  0x00000000004353c3 in HandleSehExceptionsInMethodIfSupported&lt;testing::Test, void&gt; (location=0x45473f &quot;the test body&quot;, method=&lt;optimized out&gt;, object=&lt;optimized out&gt;) at test/gtest/src/gtest.cc:2079\n#8  testing::internal::HandleExceptionsInMethodIfSupported&lt;testing::Test, void&gt; (object=object@entry=0x78c460, method=&lt;optimized out&gt;, location=location@entry=0x45473f &quot;the test body&quot;) at test/gtest/src/gtest.cc:2115\n#9  0x0000000000427b57 in testing::Test::Run (this=this@entry=0x78c460) at test/gtest/src/gtest.cc:2152\n#10 0x0000000000427bf6 in testing::TestInfo::Run (this=0x78b4e0) at test/gtest/src/gtest.cc:2327\n#11 0x0000000000427cfd in testing::TestCase::Run (this=0x78b920) at test/gtest/src/gtest.cc:2445\n#12 0x0000000000427f8d in testing::internal::UnitTestImpl::RunAllTests (this=0x78b5a0) at test/gtest/src/gtest.cc:4316\n#13 0x000000000042828e in HandleSehExceptionsInMethodIfSupported&lt;testing::internal::UnitTestImpl, bool&gt; (location=&lt;optimized out&gt;, method=&lt;optimized out&gt;, object=&lt;optimized out&gt;) at test/gtest/src/gtest.cc:2079\n#14 HandleExceptionsInMethodIfSupported&lt;testing::internal::UnitTestImpl, bool&gt; (location=0x455c48 &quot;auxiliary test code (environments or event listeners)&quot;, method=(bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x427d70 &lt;testing::internal::UnitTestImpl::RunAllTests()&gt;, object=0x78b5a0) at test/gtest/src/gtest.cc:2115\n#15 testing::UnitTest::Run (this=&lt;optimized out&gt;) at test/gtest/src/gtest.cc:3930\n#16 0x00000000004104af in RUN_ALL_TESTS () at test/gtest/include/gtest/gtest.h:2288\n#17 main (argc=1, argv=&lt;optimized out&gt;) at gazebo/rendering/SonarVisual_TEST.cc:65\n(gdb) \n</pre></div>", "type": "rendered"}, "created_on": "2016-09-13T18:56:54.648335+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-09-13T18:56:54.651463+00:00", "type": "pullrequest_comment", "id": 23679458}