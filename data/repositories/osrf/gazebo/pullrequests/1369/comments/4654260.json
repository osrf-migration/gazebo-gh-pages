{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1369/comments/4654260.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1369/_/diff#comment-4654260"}}, "parent": {"id": 4643318, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1369/comments/4643318.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1369/_/diff#comment-4643318"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1369, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1369.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1369"}}, "title": "Model Editor: Joint visuals"}, "content": {"raw": "This was happening because, for some reason, the world pose of the link's children wasn't getting updated fast enough, messing with `GetPartWorldCentroid`.\n\nSo on commit 759e8bd, I anchor the hotspot visual to the link's pose rather than the centroid of its visuals. Ultimately, I think this is a good idea because the joint pose is expressed w.r.t. the child link's pose, not the centroid, so the hotspot becomes more informative.\n\nI left the centroid calculation on mouse move during joint creation, not sure about it though.\n\nAnyways, I think that for the current version of the model editor, the link's pose always equals the centroid, because each link has only one visual and one collision visual, both with zero local pose. However, with the part inspector, the user will be able to add more visuals and edit their local poses, thus affecting the centroid. What do you think about all this, @iche033?", "markup": "markdown", "html": "<p>This was happening because, for some reason, the world pose of the link's children wasn't getting updated fast enough, messing with <code>GetPartWorldCentroid</code>.</p>\n<p>So on commit <a href=\"#!/osrf/gazebo/commits/759e8bd\" rel=\"nofollow\" class=\"ap-connect-link\">759e8bd</a>, I anchor the hotspot visual to the link's pose rather than the centroid of its visuals. Ultimately, I think this is a good idea because the joint pose is expressed w.r.t. the child link's pose, not the centroid, so the hotspot becomes more informative.</p>\n<p>I left the centroid calculation on mouse move during joint creation, not sure about it though.</p>\n<p>Anyways, I think that for the current version of the model editor, the link's pose always equals the centroid, because each link has only one visual and one collision visual, both with zero local pose. However, with the part inspector, the user will be able to add more visuals and edit their local poses, thus affecting the centroid. What do you think about all this, @iche033?</p>", "type": "rendered"}, "created_on": "2015-01-15T14:49:07.375891+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2015-01-15T14:49:07.390885+00:00", "type": "pullrequest_comment", "id": 4654260}