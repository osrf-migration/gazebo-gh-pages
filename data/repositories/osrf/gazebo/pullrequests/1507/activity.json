{"pagelen": 50, "values": [{"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value  is less than `1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "8332b61f8485", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/8332b61f8485.json"}, "html": {"href": "#!/osrf/gazebo/commits/8332b61f8485"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "f0434d295868", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/f0434d295868"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/f0434d295868"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-03-24T20:42:44.523429+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"approval": {"date": "2015-03-24T20:16:31.098949+00:00", "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5856075.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5856075"}}, "parent": {"id": 5853448, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5853448.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5853448"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "+1", "markup": "markdown", "html": "<p>+1</p>", "type": "rendered"}, "created_on": "2015-03-24T20:11:26.559045+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2015-03-24T20:11:26.566551+00:00", "type": "pullrequest_comment", "id": 5856075}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5853448.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5853448"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "I'll backport this to gazebo_4.1 after it is merged.", "markup": "markdown", "html": "<p>I'll backport this to gazebo_4.1 after it is merged.</p>", "type": "rendered"}, "created_on": "2015-03-24T18:10:16.944657+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-24T18:10:16.951873+00:00", "type": "pullrequest_comment", "id": 5853448}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5832001.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5832001"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "[most recent Jenkins build here](http://build.osrfoundation.org/job/gazebo-any-external-trusty-amd64-gpu-nvidia/37/)", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-any-external-trusty-amd64-gpu-nvidia/37/\" rel=\"nofollow\">most recent Jenkins build here</a></p>", "type": "rendered"}, "created_on": "2015-03-24T00:32:52.115843+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": "2015-03-24T00:32:52.175234+00:00", "type": "pullrequest_comment", "id": 5832001}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value  is less than `1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "4dc9b5b7ef30", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/4dc9b5b7ef30.json"}, "html": {"href": "#!/osrf/gazebo/commits/4dc9b5b7ef30"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "f0434d295868", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/f0434d295868"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/f0434d295868"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "OPEN", "author": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "date": "2015-03-24T00:28:28.389306+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5830373.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5830373"}}, "parent": {"id": 5830085, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5830085.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5830085"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "yep, it was originally copied wrong and fixed with latest commit. ", "markup": "markdown", "html": "<p>yep, it was originally copied wrong and fixed with latest commit. </p>", "type": "rendered"}, "created_on": "2015-03-23T22:34:25.944203+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": "2015-03-23T22:34:25.983254+00:00", "type": "pullrequest_comment", "id": 5830373}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5830085.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5830085"}}, "parent": {"id": 5830016, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5830016.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5830016"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Looks good. I suppose [the extra <pose>](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437#cl-71) was a copy-paste error?", "markup": "markdown", "html": "<p>Looks good. I suppose <a data-is-external-link=\"true\" href=\"https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437#cl-71\" rel=\"nofollow\">the extra &lt;pose&gt;</a> was a copy-paste error?</p>", "type": "rendered"}, "created_on": "2015-03-23T22:16:49.084371+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2015-03-23T22:16:49.093424+00:00", "type": "pullrequest_comment", "id": 5830085}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5830016.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5830016"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Update: The [change on `i`](https://bitbucket.org/rosebudflyaway/gazebo/src/3da6a07378aa14cb2e024b32bb493243d167eba0/test/integration/joint_revolute.cc?at=world_step_cfm_issue1437#cl-500) was reverted to `10`. \n\nThe world file `revoluate_joint_test.world` is replaced [here](https://bitbucket.org/rosebudflyaway/gazebo/src/3da6a07378aa14cb2e024b32bb493243d167eba0/test/integration/joint_revolute.cc?at=world_step_cfm_issue1437#cl-158) by `revoluate_joint_1437.world`. The latter world file provides more parameters, used for world step. \n\n[Jenkins Build here](http://build.osrfoundation.org/job/gazebo-any-external-trusty-amd64-gpu-nvidia/36/)", "markup": "markdown", "html": "<p>Update: The <a data-is-external-link=\"true\" href=\"https://bitbucket.org/rosebudflyaway/gazebo/src/3da6a07378aa14cb2e024b32bb493243d167eba0/test/integration/joint_revolute.cc?at=world_step_cfm_issue1437#cl-500\" rel=\"nofollow\">change on <code>i</code></a> was reverted to <code>10</code>. </p>\n<p>The world file <code>revoluate_joint_test.world</code> is replaced <a data-is-external-link=\"true\" href=\"https://bitbucket.org/rosebudflyaway/gazebo/src/3da6a07378aa14cb2e024b32bb493243d167eba0/test/integration/joint_revolute.cc?at=world_step_cfm_issue1437#cl-158\" rel=\"nofollow\">here</a> by <code>revoluate_joint_1437.world</code>. The latter world file provides more parameters, used for world step. </p>\n<p><a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-any-external-trusty-amd64-gpu-nvidia/36/\" rel=\"nofollow\">Jenkins Build here</a></p>", "type": "rendered"}, "created_on": "2015-03-23T22:13:30.329463+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": "2015-03-23T22:13:46.242142+00:00", "type": "pullrequest_comment", "id": 5830016}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5829989.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5829989"}}, "parent": {"id": 5828857, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5828857.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5828857"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "got it:\n\n~~~\n$ ../build_release/test/integration/INTEGRATION_joint_revolute --gtest_filter=\"*RevoluteJointWorldStep\"\n...\n[Dbg] [joint_revolute.cc:446] Check SetForce for model pendulum_45deg\n/home/hsu/projects/gazebo_pgs_split/test/integration/joint_revolute.cc:519: Failure\nExpected: (newVel) > (oldVel), actual: -0.00182809 vs 0.0221107\n~~~\n\nIt looks like each pendulum model gets called to:\n\n  1. turn off gravity\n  1. detach upper joint\n\nsequentially, so by the time the second pendulum (45deg one) is tested, it has started falling already.  The initial velocity from falling due to gravity caused the test failure.  By stepping one additional step (11), the coupling effect from gravity, detachment and applying 1Nm torque is somehow avoided. My suggestion is to:\n\n  1. turn off gravity globally\n  2. revert to 10 steps\n\n~~~\n--- a/test/integration/joint_revolute.cc\tMon Mar 16 14:47:39 2015 -0700\n+++ b/test/integration/joint_revolute.cc\tMon Mar 23 15:09:40 2015 -0700\n@@ -437,6 +437,8 @@\n   // Reset world again, disable gravity, detach upper_joint\n   // Then apply torque at lower_joint and verify motion\n   world->Reset();\n+  physics->SetGravity(math::Vector3::Zero);\n+\n   for (modelIter  = modelNames.begin();\n        modelIter != modelNames.end(); ++modelIter)\n   {\n@@ -444,24 +446,6 @@\n     if (model)\n     {\n       gzdbg << \"Check SetForce for model \" << *modelIter << '\\n';\n-      std::vector<std::string>::iterator linkIter;\n-      for (linkIter  = linkNames.begin();\n-           linkIter != linkNames.end(); ++linkIter)\n-      {\n-        link = model->GetLink(*linkIter);\n-        if (link)\n-        {\n-          // Disable gravity for links.\n-          link->SetGravityMode(false);\n-        }\n-        else\n-        {\n-          gzerr << \"Error loading link \" << *linkIter\n-                << \" of model \" << *modelIter << '\\n';\n-          EXPECT_TRUE(link != NULL);\n-        }\n-      }\n-\n       joint = model->GetJoint(\"upper_joint\");\n       if (joint)\n       {\n@@ -497,7 +481,7 @@\n         // Apply positive torque to the lower_joint and step forward.\n         force = 1;\n \n-        for (int i = 0; i < 11; ++i)\n+        for (int i = 0; i < 10; ++i)\n         {\n           joint->SetForce(0, force);\n           world->Step(1);\n~~~", "markup": "markdown", "html": "<p>got it:</p>\n<div class=\"codehilite\"><pre><span></span>$ ../build_release/test/integration/INTEGRATION_joint_revolute --gtest_filter<span class=\"o\">=</span><span class=\"s2\">&quot;*RevoluteJointWorldStep&quot;</span>\n...\n<span class=\"o\">[</span>Dbg<span class=\"o\">]</span> <span class=\"o\">[</span>joint_revolute.cc:446<span class=\"o\">]</span> Check SetForce <span class=\"k\">for</span> model pendulum_45deg\n/home/hsu/projects/gazebo_pgs_split/test/integration/joint_revolute.cc:519: Failure\nExpected: <span class=\"o\">(</span>newVel<span class=\"o\">)</span> &gt; <span class=\"o\">(</span>oldVel<span class=\"o\">)</span>, actual: -0.00182809 vs <span class=\"m\">0</span>.0221107\n</pre></div>\n\n\n<p>It looks like each pendulum model gets called to:</p>\n<ol>\n<li>turn off gravity</li>\n<li>detach upper joint</li>\n</ol>\n<p>sequentially, so by the time the second pendulum (45deg one) is tested, it has started falling already.  The initial velocity from falling due to gravity caused the test failure.  By stepping one additional step (11), the coupling effect from gravity, detachment and applying 1Nm torque is somehow avoided. My suggestion is to:</p>\n<ol>\n<li>turn off gravity globally</li>\n<li>revert to 10 steps</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><span class=\"gd\">--- a/test/integration/joint_revolute.cc    Mon Mar 16 14:47:39 2015 -0700</span>\n<span class=\"gi\">+++ b/test/integration/joint_revolute.cc    Mon Mar 23 15:09:40 2015 -0700</span>\n<span class=\"gu\">@@ -437,6 +437,8 @@</span>\n   // Reset world again, disable gravity, detach upper_joint\n   // Then apply torque at lower_joint and verify motion\n   world-&gt;Reset();\n<span class=\"gi\">+  physics-&gt;SetGravity(math::Vector3::Zero);</span>\n<span class=\"gi\">+</span>\n   for (modelIter  = modelNames.begin();\n        modelIter != modelNames.end(); ++modelIter)\n   {\n<span class=\"gu\">@@ -444,24 +446,6 @@</span>\n     if (model)\n     {\n       gzdbg &lt;&lt; &quot;Check SetForce for model &quot; &lt;&lt; *modelIter &lt;&lt; &#39;\\n&#39;;\n<span class=\"gd\">-      std::vector&lt;std::string&gt;::iterator linkIter;</span>\n<span class=\"gd\">-      for (linkIter  = linkNames.begin();</span>\n<span class=\"gd\">-           linkIter != linkNames.end(); ++linkIter)</span>\n<span class=\"gd\">-      {</span>\n<span class=\"gd\">-        link = model-&gt;GetLink(*linkIter);</span>\n<span class=\"gd\">-        if (link)</span>\n<span class=\"gd\">-        {</span>\n<span class=\"gd\">-          // Disable gravity for links.</span>\n<span class=\"gd\">-          link-&gt;SetGravityMode(false);</span>\n<span class=\"gd\">-        }</span>\n<span class=\"gd\">-        else</span>\n<span class=\"gd\">-        {</span>\n<span class=\"gd\">-          gzerr &lt;&lt; &quot;Error loading link &quot; &lt;&lt; *linkIter</span>\n<span class=\"gd\">-                &lt;&lt; &quot; of model &quot; &lt;&lt; *modelIter &lt;&lt; &#39;\\n&#39;;</span>\n<span class=\"gd\">-          EXPECT_TRUE(link != NULL);</span>\n<span class=\"gd\">-        }</span>\n<span class=\"gd\">-      }</span>\n<span class=\"gd\">-</span>\n       joint = model-&gt;GetJoint(&quot;upper_joint&quot;);\n       if (joint)\n       {\n<span class=\"gu\">@@ -497,7 +481,7 @@</span>\n         // Apply positive torque to the lower_joint and step forward.\n         force = 1;\n\n<span class=\"gd\">-        for (int i = 0; i &lt; 11; ++i)</span>\n<span class=\"gi\">+        for (int i = 0; i &lt; 10; ++i)</span>\n         {\n           joint-&gt;SetForce(0, force);\n           world-&gt;Step(1);\n</pre></div>", "type": "rendered"}, "created_on": "2015-03-23T22:12:13.115747+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "inline": {}, "updated_on": "2015-03-23T22:13:25.894665+00:00", "type": "pullrequest_comment", "id": 5829989}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value  is less than `1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "4dc9b5b7ef30", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/4dc9b5b7ef30.json"}, "html": {"href": "#!/osrf/gazebo/commits/4dc9b5b7ef30"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "3da6a07378aa", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/3da6a07378aa"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/3da6a07378aa"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "OPEN", "author": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "date": "2015-03-23T22:06:38.421501+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5829513.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5829513"}}, "parent": {"id": 5829439, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5829439.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5829439"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "I think I have figured out the failure with `i<10` while pass with `i<11` issue. With `revolute_joint_test.world`, we are supposed to use the default solver: `quick`. So the parameters `erp`, `contact_max_correcting_vel`, `contact_surface_layer`, etc are missing.  While in `revolute_joint_1437.world`, these parameters are there, which fixes the failing issue with `i<10`, I am in the middle of compile for a final test, will update here", "markup": "markdown", "html": "<p>I think I have figured out the failure with <code>i&lt;10</code> while pass with <code>i&lt;11</code> issue. With <code>revolute_joint_test.world</code>, we are supposed to use the default solver: <code>quick</code>. So the parameters <code>erp</code>, <code>contact_max_correcting_vel</code>, <code>contact_surface_layer</code>, etc are missing.  While in <code>revolute_joint_1437.world</code>, these parameters are there, which fixes the failing issue with <code>i&lt;10</code>, I am in the middle of compile for a final test, will update here</p>", "type": "rendered"}, "created_on": "2015-03-23T21:44:30.704698+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "inline": {}, "updated_on": "2015-03-23T21:45:06.557807+00:00", "type": "pullrequest_comment", "id": 5829513}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5829439.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5829439"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Why is this changed?", "markup": "markdown", "html": "<p>Why is this changed?</p>", "type": "rendered"}, "created_on": "2015-03-23T21:39:51.200413+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2015-03-23T21:39:51.209662+00:00", "type": "pullrequest_comment", "id": 5829439}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value  is less than `1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "4dc9b5b7ef30", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/4dc9b5b7ef30.json"}, "html": {"href": "#!/osrf/gazebo/commits/4dc9b5b7ef30"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "8ceecd99eea2", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/8ceecd99eea2"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/8ceecd99eea2"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "OPEN", "author": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "date": "2015-03-23T21:32:54.253490+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5828857.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5828857"}}, "parent": {"id": 5827674, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5827674.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5827674"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "For pendulum at 45 degree, old velocity at `i=3` is `0.0221107` new velocity at `i=4` is `-0.00182809`, which is smaller than that at `i=3`", "markup": "markdown", "html": "<p>For pendulum at 45 degree, old velocity at <code>i=3</code> is <code>0.0221107</code> new velocity at <code>i=4</code> is <code>-0.00182809</code>, which is smaller than that at <code>i=3</code></p>", "type": "rendered"}, "created_on": "2015-03-23T21:06:32.926311+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "inline": {}, "updated_on": "2015-03-23T21:07:01.955647+00:00", "type": "pullrequest_comment", "id": 5828857}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5827674.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5827674"}}, "parent": {"id": 5827412, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5827412.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5827412"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Thanks, how much was it off by?\n\nSorry, don't mean to pester on a seemingly minor point, but I am just wondering if this is related to *softening* of the [bilateral] joint by introducing a finite `cfm` in this PR.", "markup": "markdown", "html": "<p>Thanks, how much was it off by?</p>\n<p>Sorry, don't mean to pester on a seemingly minor point, but I am just wondering if this is related to <em>softening</em> of the [bilateral] joint by introducing a finite <code>cfm</code> in this PR.</p>", "type": "rendered"}, "created_on": "2015-03-23T20:10:54.735078+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "inline": {}, "updated_on": "2015-03-23T20:16:09.702692+00:00", "type": "pullrequest_comment", "id": 5827674}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5827412.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5827412"}}, "parent": {"id": 5827243, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5827243.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5827243"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "When we apply a positive torque on the lower joint of the detached double pendulum, \nwe should expect increasing velocity.  \n\nWhen set `10`, then from `i=3` to `i=4`, the velocity is decreasing instead of increasing. \nHowever, when set to `11`, the test passes \n\nThere might be three causes:\n\n1. numerical issue\n\n2. world->Reset() here, for all the 8 double pendulum, after reset, not all of the double pendulum has velocity as 0, I am not sure whether they should be, but the one that fails the test, has a relatively large velocity after reset the world\n\n3. joint->Detach() here, I know this is to detach the parent and child, but didn't get an idea of the implementation.", "markup": "markdown", "html": "<p>When we apply a positive torque on the lower joint of the detached double pendulum, \nwe should expect increasing velocity.  </p>\n<p>When set <code>10</code>, then from <code>i=3</code> to <code>i=4</code>, the velocity is decreasing instead of increasing. \nHowever, when set to <code>11</code>, the test passes </p>\n<p>There might be three causes:</p>\n<ol>\n<li>\n<p>numerical issue</p>\n</li>\n<li>\n<p>world-&gt;Reset() here, for all the 8 double pendulum, after reset, not all of the double pendulum has velocity as 0, I am not sure whether they should be, but the one that fails the test, has a relatively large velocity after reset the world</p>\n</li>\n<li>\n<p>joint-&gt;Detach() here, I know this is to detach the parent and child, but didn't get an idea of the implementation.</p>\n</li>\n</ol>", "type": "rendered"}, "created_on": "2015-03-23T19:58:10.319780+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "inline": {}, "updated_on": "2015-03-23T19:58:10.382329+00:00", "type": "pullrequest_comment", "id": 5827412}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5827243.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5827243"}}, "parent": {"id": 5825710, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5825710.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5825710"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "what's the failure caused by `10` steps here?", "markup": "markdown", "html": "<p>what's the failure caused by <code>10</code> steps here?</p>", "type": "rendered"}, "created_on": "2015-03-23T19:51:26.167003+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "inline": {}, "updated_on": "2015-03-23T19:51:26.177046+00:00", "type": "pullrequest_comment", "id": 5827243}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5825710.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5825710"}}, "parent": {"id": 5825640, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5825640.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5825640"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "it allows the test to pass with world step", "markup": "markdown", "html": "<p>it allows the test to pass with world step</p>", "type": "rendered"}, "created_on": "2015-03-23T18:46:47.380669+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2015-03-23T18:46:47.387616+00:00", "type": "pullrequest_comment", "id": 5825710}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5825640.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5825640"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "what's the reasoning behind this change?", "markup": "markdown", "html": "<p>what's the reasoning behind this change?</p>", "type": "rendered"}, "created_on": "2015-03-23T18:42:42.580813+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "inline": {}, "updated_on": "2015-03-23T18:42:42.592156+00:00", "type": "pullrequest_comment", "id": 5825640}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5692906.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5692906"}}, "parent": {"id": 5692597, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5692597.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5692597"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Done!", "markup": "markdown", "html": "<p>Done!</p>", "type": "rendered"}, "created_on": "2015-03-16T21:55:05.897066+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "inline": {}, "updated_on": "2015-03-16T21:55:05.919398+00:00", "type": "pullrequest_comment", "id": 5692906}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5692901.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5692901"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Maybe we can backport this fix to 4.1 and 5 after this is merged.", "markup": "markdown", "html": "<p>Maybe we can backport this fix to 4.1 and 5 after this is merged.</p>", "type": "rendered"}, "created_on": "2015-03-16T21:54:24.690156+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-16T21:54:24.695548+00:00", "type": "pullrequest_comment", "id": 5692901}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"approval": {"date": "2015-03-16T21:53:39.689859+00:00", "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value  is less than `1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "cb49452a78b8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/cb49452a78b8.json"}, "html": {"href": "#!/osrf/gazebo/commits/cb49452a78b8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "a9196f3d7eee", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/a9196f3d7eee"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/a9196f3d7eee"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "OPEN", "author": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "date": "2015-03-16T21:47:59.386316+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5692597.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5692597"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Can we revert this whitespace change?", "markup": "markdown", "html": "<p>Can we revert this whitespace change?</p>", "type": "rendered"}, "created_on": "2015-03-16T21:36:44.468388+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2015-03-16T21:36:44.474034+00:00", "type": "pullrequest_comment", "id": 5692597}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5692371.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5692371"}}, "parent": {"id": 5669395, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5669395.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5669395"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "sounds good to me.", "markup": "markdown", "html": "<p>sounds good to me.</p>", "type": "rendered"}, "created_on": "2015-03-16T21:25:20.578603+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "inline": {}, "updated_on": "2015-03-16T21:25:20.585716+00:00", "type": "pullrequest_comment", "id": 5692371}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value  is less than `1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "fd721cefadf8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/fd721cefadf8.json"}, "html": {"href": "#!/osrf/gazebo/commits/fd721cefadf8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "663251461ec3", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/663251461ec3"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/663251461ec3"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "OPEN", "author": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "date": "2015-03-16T16:53:52.859309+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5669395.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5669395"}}, "parent": {"id": 5666152, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5666152.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5666152"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "We initially plan to have this, in order to notify the users that the `cfm` value is set to `1e-6`, but this makes the simulation so slow that I commented it out. \n\nI haven't found a good way to do this. @hsu  Maybe we could remove this for now? \n\n", "markup": "markdown", "html": "<p>We initially plan to have this, in order to notify the users that the <code>cfm</code> value is set to <code>1e-6</code>, but this makes the simulation so slow that I commented it out. </p>\n<p>I haven't found a good way to do this. @hsu  Maybe we could remove this for now? </p>", "type": "rendered"}, "created_on": "2015-03-16T00:04:07.037098+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "inline": {}, "updated_on": "2015-03-16T00:04:07.287728+00:00", "type": "pullrequest_comment", "id": 5669395}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5666152.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5666152"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "These `dMessage` calls are commented out. Are we going to use them?", "markup": "markdown", "html": "<p>These <code>dMessage</code> calls are commented out. Are we going to use them?</p>", "type": "rendered"}, "created_on": "2015-03-15T07:09:43.663394+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2015-03-15T07:09:43.669509+00:00", "type": "pullrequest_comment", "id": 5666152}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5663500.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5663500"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "I did spend some time on this issue. And now the test passed... But I changed one line [here](https://bitbucket.org/rosebudflyaway/gazebo/src/854cf67f5cdbb771a780525b5d9fe2041e91d95b/test/integration/joint_revolute.cc?at=world_step_cfm_issue1437#cl-500) in the test code.  It is really weird, when we run more time steps (`i=11`), the test passed, while run fewer (`i=10`), the test fails. \n\nThere might be three causes:\n \n1. numerical issue \n\n2. `world->Reset()` [here](https://bitbucket.org/rosebudflyaway/gazebo/src/854cf67f5cdbb771a780525b5d9fe2041e91d95b/test/integration/joint_revolute.cc?at=world_step_cfm_issue1437#cl-439), for all the 8 double pendulum, after reset, not all of the double pendulum has velocity as `0`, I am not sure whether they should be, but the one that fails the test, has a relatively large velocity after reset the world \n\n3. `joint->Detach()` [here](https://bitbucket.org/rosebudflyaway/gazebo/src/854cf67f5cdbb771a780525b5d9fe2041e91d95b/test/integration/joint_revolute.cc?at=world_step_cfm_issue1437#cl-475), I know this is to detach the parent and child, but didn't get an idea of the implementation. \n\nThe test passes for now, with `i=11`, Jenkins build [here](http://build.osrfoundation.org/job/gazebo-any-external-trusty-amd64-gpu-nvidia/32/console)\n", "markup": "markdown", "html": "<p>I did spend some time on this issue. And now the test passed... But I changed one line <a data-is-external-link=\"true\" href=\"https://bitbucket.org/rosebudflyaway/gazebo/src/854cf67f5cdbb771a780525b5d9fe2041e91d95b/test/integration/joint_revolute.cc?at=world_step_cfm_issue1437#cl-500\" rel=\"nofollow\">here</a> in the test code.  It is really weird, when we run more time steps (<code>i=11</code>), the test passed, while run fewer (<code>i=10</code>), the test fails. </p>\n<p>There might be three causes:</p>\n<ol>\n<li>\n<p>numerical issue </p>\n</li>\n<li>\n<p><code>world-&gt;Reset()</code> <a data-is-external-link=\"true\" href=\"https://bitbucket.org/rosebudflyaway/gazebo/src/854cf67f5cdbb771a780525b5d9fe2041e91d95b/test/integration/joint_revolute.cc?at=world_step_cfm_issue1437#cl-439\" rel=\"nofollow\">here</a>, for all the 8 double pendulum, after reset, not all of the double pendulum has velocity as <code>0</code>, I am not sure whether they should be, but the one that fails the test, has a relatively large velocity after reset the world </p>\n</li>\n<li>\n<p><code>joint-&gt;Detach()</code> <a data-is-external-link=\"true\" href=\"https://bitbucket.org/rosebudflyaway/gazebo/src/854cf67f5cdbb771a780525b5d9fe2041e91d95b/test/integration/joint_revolute.cc?at=world_step_cfm_issue1437#cl-475\" rel=\"nofollow\">here</a>, I know this is to detach the parent and child, but didn't get an idea of the implementation. </p>\n</li>\n</ol>\n<p>The test passes for now, with <code>i=11</code>, Jenkins build <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-any-external-trusty-amd64-gpu-nvidia/32/console\" rel=\"nofollow\">here</a></p>", "type": "rendered"}, "created_on": "2015-03-14T01:43:02.970146+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": "2015-03-14T01:43:22.337303+00:00", "type": "pullrequest_comment", "id": 5663500}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value  is less than `1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "25f2e961e708", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/25f2e961e708.json"}, "html": {"href": "#!/osrf/gazebo/commits/25f2e961e708"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "0d70af882330", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/0d70af882330"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/0d70af882330"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "OPEN", "author": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "date": "2015-03-14T01:42:21.643339+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value  is less than `1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "25f2e961e708", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/25f2e961e708.json"}, "html": {"href": "#!/osrf/gazebo/commits/25f2e961e708"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "854cf67f5cdb", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/854cf67f5cdb"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/854cf67f5cdb"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "OPEN", "author": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "date": "2015-03-13T23:39:09.320101+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5656727.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5656727"}}, "parent": {"id": 5656369, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5656369.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5656369"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Actually, the `issue_1437_test` branch was created from `gazebo_4.1`. I just merged it with `gazebo5`, so the `SetMaxForce` call has been removed.\n\nTry merging now.", "markup": "markdown", "html": "<p>Actually, the <code>issue_1437_test</code> branch was created from <code>gazebo_4.1</code>. I just merged it with <code>gazebo5</code>, so the <code>SetMaxForce</code> call has been removed.</p>\n<p>Try merging now.</p>", "type": "rendered"}, "created_on": "2015-03-13T16:52:13.641083+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-13T16:52:30.331827+00:00", "type": "pullrequest_comment", "id": 5656727}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5656369.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5656369"}}, "parent": {"id": 5643997, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5643997.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5643997"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Good point, I was adding .world file for test with both server and client, this test makes more sense. `joint->SetMaxForce` [here](#!/osrf/gazebo/src/f611df837745b2e1027b03590762b8af328cc682/test/integration/joint_revolute.cc#cl-140) is deprecated in Gazebo 5. see [note here](#!/osrf/gazebo/src/25f2e961e70803d36301ac22667492cbcc2def25/gazebo/physics/Joint.hh?at=default#cl-365)\n\nAny other function to use in order to set max force? \n", "markup": "markdown", "html": "<p>Good point, I was adding .world file for test with both server and client, this test makes more sense. <code>joint-&gt;SetMaxForce</code> <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/f611df837745b2e1027b03590762b8af328cc682/test/integration/joint_revolute.cc#cl-140\" rel=\"nofollow\">here</a> is deprecated in Gazebo 5. see <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/25f2e961e70803d36301ac22667492cbcc2def25/gazebo/physics/Joint.hh?at=default#cl-365\" rel=\"nofollow\">note here</a></p>\n<p>Any other function to use in order to set max force? </p>", "type": "rendered"}, "created_on": "2015-03-13T16:35:36.397080+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": "2015-03-13T16:35:36.710254+00:00", "type": "pullrequest_comment", "id": 5656369}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5643997.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5643997"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "What do you think about merging in the test I added in f611df8 (branch issue_1437_test)?\n\nAlso, this will fix #1437.", "markup": "markdown", "html": "<p>What do you think about merging in the test I added in <a href=\"#!/osrf/gazebo/commits/f611df8\" rel=\"nofollow\" class=\"ap-connect-link\">f611df8</a> (branch issue_1437_test)?</p>\n<p>Also, this will fix <a href=\"#!/osrf/gazebo/issues/1437/world-step-fails-to-solve-bilateral\" rel=\"nofollow\" title=\"world step fails to solve bilateral constraints\" class=\"ap-connect-link\"><s>#1437</s></a>.</p>", "type": "rendered"}, "created_on": "2015-03-13T08:32:17.224069+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-13T08:32:17.231719+00:00", "type": "pullrequest_comment", "id": 5643997}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5639901.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5639901"}}, "parent": {"id": 5639804, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5639804.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5639804"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Sure, no problem :)", "markup": "markdown", "html": "<p>Sure, no problem :)</p>", "type": "rendered"}, "created_on": "2015-03-13T00:51:44.671903+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "inline": {}, "updated_on": "2015-03-13T00:51:44.723051+00:00", "type": "pullrequest_comment", "id": 5639901}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5639804.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5639804"}}, "parent": {"id": 5633461, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5633461.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5633461"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "yeah, please ignore that comment, I guess the check will not allow this to happen. sorry for the noise.", "markup": "markdown", "html": "<p>yeah, please ignore that comment, I guess the check will not allow this to happen. sorry for the noise.</p>", "type": "rendered"}, "created_on": "2015-03-13T00:43:27.294566+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "inline": {}, "updated_on": "2015-03-13T00:43:27.306478+00:00", "type": "pullrequest_comment", "id": 5639804}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5639138.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5639138"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Looks good.", "markup": "markdown", "html": "<p>Looks good.</p>", "type": "rendered"}, "created_on": "2015-03-13T00:02:21.039077+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2015-03-13T00:02:21.045039+00:00", "type": "pullrequest_comment", "id": 5639138}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5633461.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5633461"}}, "parent": {"id": 5632875, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5632875.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5632875"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "So, do you mean, when original Aii_dDot = -1e-6, then add 1e-6 would make\nit equal to 0 ?\n", "markup": "markdown", "html": "<p>So, do you mean, when original Aii_dDot = -1e-6, then add 1e-6 would make\nit equal to 0 ?</p>", "type": "rendered"}, "created_on": "2015-03-12T18:15:09.911824+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "inline": {}, "updated_on": "2015-03-12T18:15:09.928321+00:00", "type": "pullrequest_comment", "id": 5633461}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5632402.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5632402"}}, "parent": {"id": 5614120, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5614120.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5614120"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "no unusual failures in that build", "markup": "markdown", "html": "<p>no unusual failures in that build</p>", "type": "rendered"}, "created_on": "2015-03-12T17:32:19.377024+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-12T17:32:19.384700+00:00", "type": "pullrequest_comment", "id": 5632402}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5614120.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5614120"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "[jenkins build queued](http://build.osrfoundation.org/job/gazebo-any-external-trusty-amd64-gpu-nvidia/31)", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-any-external-trusty-amd64-gpu-nvidia/31\" rel=\"nofollow\">jenkins build queued</a></p>", "type": "rendered"}, "created_on": "2015-03-12T01:07:34.568511+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-12T01:07:34.576748+00:00", "type": "pullrequest_comment", "id": 5614120}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507/comments/5612982.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507/_/diff#comment-5612982"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}, "content": {"raw": "Another test is `world_step.world` [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/world_step.world?at=world_step_cfm_issue1437), which has embedded sdf code and don't need to download the `double pendulum with base` model. ", "markup": "markdown", "html": "<p>Another test is <code>world_step.world</code> <a data-is-external-link=\"true\" href=\"https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/world_step.world?at=world_step_cfm_issue1437\" rel=\"nofollow\">here</a>, which has embedded sdf code and don't need to download the <code>double pendulum with base</code> model. </p>", "type": "rendered"}, "created_on": "2015-03-11T23:22:38.082735+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": "2015-03-11T23:23:00.936567+00:00", "type": "pullrequest_comment", "id": 5612982}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value  is less than `1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "0f02a13139cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0f02a13139cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/0f02a13139cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9767c2895a30", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/9767c2895a30"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/9767c2895a30"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "OPEN", "author": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "date": "2015-03-11T23:11:47.229798+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value  is less than `1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "0f02a13139cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0f02a13139cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/0f02a13139cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "cfaadea33109", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/cfaadea33109"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/cfaadea33109"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "OPEN", "author": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "date": "2015-03-11T23:07:03.019204+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value `<1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "0f02a13139cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0f02a13139cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/0f02a13139cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "cfaadea33109", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/cfaadea33109"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/cfaadea33109"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "OPEN", "author": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "date": "2015-03-11T23:06:25.433948+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}, {"update": {"description": "Based on the discussion [here](#!/osrf/gazebo/issue/1437/world-step-fails-to-solve-bilateral): \r\n\r\nwhen the denominator is numerically zero (absolute value `<1e-16`, since there can be negative value), `1e-6` is added to the denominator, before doing the `dRecip` operation to get the reciprocal. \r\n\r\nA test world file  with default `cfm=0` named `revolute_joint_1437.world` is added [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/test/worlds/revolute_joint_1437.world?at=world_step_cfm_issue1437).  \r\n\r\nI commented the message for user [here](https://bitbucket.org/rosebudflyaway/gazebo/src/cfaadea331095a7843d5c4a59b03242ad340e09d/deps/opende/src/lcp.cpp?at=world_step_cfm_issue1437#cl-538) and the other three places (search for `dRecip`), since they make the simulation too slow", "title": "fix the dRecip operation for when numerically denominator equals 0", "destination": {"commit": {"hash": "0f02a13139cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0f02a13139cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/0f02a13139cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "cfaadea33109", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo/commit/cfaadea33109"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo/commits/cfaadea33109"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/rosebudflyaway/gazebo"}, "html": {"href": "https://bitbucket.org/rosebudflyaway/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{50359345-5c43-4485-8c6e-822a5baf7b07}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "rosebudflyaway/gazebo", "uuid": "{50359345-5c43-4485-8c6e-822a5baf7b07}"}, "branch": {"name": "world_step_cfm_issue1437"}}, "state": "OPEN", "author": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "date": "2015-03-11T23:06:25.410577+00:00"}, "pull_request": {"type": "pullrequest", "id": 1507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1507"}}, "title": "fix the dRecip operation for when numerically denominator equals 0"}}]}