{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2712/comments/37187566.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:436111cdb3c5..2a03bae6b852?path=gazebo%2Fgui%2FGuiIface.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2712/_/diff#comment-37187566"}}, "parent": {"id": 37178073, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2712/comments/37178073.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2712/_/diff#comment-37178073"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2712, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2712.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2712"}}, "title": "Fix ABI breakage in gazebo 8.1.0 release (issue #2279)"}, "content": {"raw": "not sure if this makes any difference but we could make the variable static so we can use it later in the other function:\n\n~~~\ndiff -r 4633c73e3e5e gazebo/gui/GuiIface.cc\n--- a/gazebo/gui/GuiIface.cc\tWed May 17 18:49:51 2017 -0700\n+++ b/gazebo/gui/GuiIface.cc\tThu May 18 11:52:51 2017 -0700\n@@ -57,8 +57,6 @@\n \n boost::property_tree::ptree g_propTree;\n \n-// Names of all GUI plugins loaded at start. Parsed from command line arguments.\n-std::vector<std::string> g_plugins_to_load;\n \n using namespace gazebo;\n \n@@ -188,6 +186,8 @@\n     std::vector<std::string> pp =\n       vm[\"gui-plugin\"].as<std::vector<std::string> >();\n \n+\n+    static std::vector<std::string> g_plugins_to_load;\n     for (std::vector<std::string>::iterator iter = pp.begin();\n          iter != pp.end(); ++iter)\n     {\n@@ -366,6 +366,8 @@\n             \"Main window's RenderWidget must have been created\");\n \n   // Load each plugin\n+\n+  static std::vector<std::string> g_plugins_to_load;\n   for (auto iter = g_plugins_to_load.begin();\n        iter != g_plugins_to_load.end(); ++iter)\n   {\n@@ -405,6 +407,7 @@\n \n     gzlog << \"Loaded GUI plugin[\" << _filename << \"]\\n\";\n   }\n+  g_plugins_to_load.clear();\n \n #ifndef _WIN32\n   // Now that we're about to run, install a signal handler to allow for\n~~~\n\nif we can bring `AddPlugins` back, that would be great", "markup": "markdown", "html": "<p>not sure if this makes any difference but we could make the variable static so we can use it later in the other function:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 4633c73e3e5e gazebo/gui/GuiIface.cc</span>\n<span class=\"gd\">--- a/gazebo/gui/GuiIface.cc    Wed May 17 18:49:51 2017 -0700</span>\n<span class=\"gi\">+++ b/gazebo/gui/GuiIface.cc    Thu May 18 11:52:51 2017 -0700</span>\n<span class=\"gu\">@@ -57,8 +57,6 @@</span>\n\n boost::property_tree::ptree g_propTree;\n\n<span class=\"gd\">-// Names of all GUI plugins loaded at start. Parsed from command line arguments.</span>\n<span class=\"gd\">-std::vector&lt;std::string&gt; g_plugins_to_load;</span>\n\n using namespace gazebo;\n\n<span class=\"gu\">@@ -188,6 +186,8 @@</span>\n     std::vector&lt;std::string&gt; pp =\n       vm[&quot;gui-plugin&quot;].as&lt;std::vector&lt;std::string&gt; &gt;();\n\n<span class=\"gi\">+</span>\n<span class=\"gi\">+    static std::vector&lt;std::string&gt; g_plugins_to_load;</span>\n     for (std::vector&lt;std::string&gt;::iterator iter = pp.begin();\n          iter != pp.end(); ++iter)\n     {\n<span class=\"gu\">@@ -366,6 +366,8 @@</span>\n             &quot;Main window&#39;s RenderWidget must have been created&quot;);\n\n   // Load each plugin\n<span class=\"gi\">+</span>\n<span class=\"gi\">+  static std::vector&lt;std::string&gt; g_plugins_to_load;</span>\n   for (auto iter = g_plugins_to_load.begin();\n        iter != g_plugins_to_load.end(); ++iter)\n   {\n<span class=\"gu\">@@ -405,6 +407,7 @@</span>\n\n     gzlog &lt;&lt; &quot;Loaded GUI plugin[&quot; &lt;&lt; _filename &lt;&lt; &quot;]\\n&quot;;\n   }\n<span class=\"gi\">+  g_plugins_to_load.clear();</span>\n\n #ifndef _WIN32\n   // Now that we&#39;re about to run, install a signal handler to allow for\n</pre></div>\n\n\n<p>if we can bring <code>AddPlugins</code> back, that would be great</p>", "type": "rendered"}, "created_on": "2017-05-18T18:55:48.713102+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": null, "from": null, "outdated": false, "path": "gazebo/gui/GuiIface.cc"}, "updated_on": "2017-05-18T18:55:48.716527+00:00", "type": "pullrequest_comment", "id": 37187566}