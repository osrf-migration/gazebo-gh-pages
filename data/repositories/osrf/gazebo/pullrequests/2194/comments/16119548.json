{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2194/comments/16119548.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2194/_/diff#comment-16119548"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2194, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2194.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2194"}}, "title": "Fix UNIT_ImagesView_TEST"}, "content": {"raw": "In repeat testing, I still see some flaky failures on homebrew at [ImagesView_TEST.cc:113](#!/osrf/gazebo/src/62aae1c1e2eb/gazebo/gui/viewers/ImagesView_TEST.cc#ImagesView_TEST.cc-113):\n\n~~~\nPASS   : ImagesView_TEST::Construction()\n...\n[Msg] cam1 to cam6\nFAIL!  : ImagesView_TEST::Switch() Compared values are not the same\n   Actual (frame->children().size()): 3\n   Expected (1): 1\n   Loc: [/Users/scpeters/ws/gazebo7/src/gazebo/gazebo/gui/viewers/ImagesView_TEST.cc(113)]\n[Msg] cam6 to cam1\n...\n~~~\n\nAfter adding some debugging print statements, it appears that the failure often occurs between `cam1 to cam6` and `cam6 to cam1` when switching from displaying 1 image to 2 images. We currently expect the number of images to go to 0 (`frame->children().size() == 1`) between switches, but sometimes it seems to jump from 1 directly to 2 images. The test would pass if we removed this expectation.", "markup": "markdown", "html": "<p>In repeat testing, I still see some flaky failures on homebrew at <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/62aae1c1e2eb/gazebo/gui/viewers/ImagesView_TEST.cc#ImagesView_TEST.cc-113\" rel=\"nofollow\">ImagesView_TEST.cc:113</a>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">PASS</span>   <span class=\"o\">:</span> <span class=\"n\">ImagesView_TEST</span><span class=\"o\">::</span><span class=\"n\">Construction</span><span class=\"o\">()</span>\n<span class=\"o\">...</span>\n<span class=\"o\">[</span><span class=\"n\">Msg</span><span class=\"o\">]</span> <span class=\"n\">cam1</span> <span class=\"n\">to</span> <span class=\"n\">cam6</span>\n<span class=\"n\">FAIL</span><span class=\"o\">!</span>  <span class=\"o\">:</span> <span class=\"n\">ImagesView_TEST</span><span class=\"o\">::</span><span class=\"n\">Switch</span><span class=\"o\">()</span> <span class=\"n\">Compared</span> <span class=\"n\">values</span> <span class=\"n\">are</span> <span class=\"n\">not</span> <span class=\"n\">the</span> <span class=\"n\">same</span>\n   <span class=\"n\">Actual</span> <span class=\"o\">(</span><span class=\"n\">frame</span><span class=\"o\">-&gt;</span><span class=\"n\">children</span><span class=\"o\">().</span><span class=\"n\">size</span><span class=\"o\">()):</span> <span class=\"mi\">3</span>\n   <span class=\"n\">Expected</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">):</span> <span class=\"mi\">1</span>\n   <span class=\"n\">Loc</span><span class=\"o\">:</span> <span class=\"o\">[/</span><span class=\"n\">Users</span><span class=\"sr\">/scpeters/ws/gazebo7/src/gazebo/gazebo/gui/viewers/</span><span class=\"n\">ImagesView_TEST</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">(</span><span class=\"mi\">113</span><span class=\"o\">)]</span>\n<span class=\"o\">[</span><span class=\"n\">Msg</span><span class=\"o\">]</span> <span class=\"n\">cam6</span> <span class=\"n\">to</span> <span class=\"n\">cam1</span>\n<span class=\"o\">...</span>\n</pre></div>\n\n\n<p>After adding some debugging print statements, it appears that the failure often occurs between <code>cam1 to cam6</code> and <code>cam6 to cam1</code> when switching from displaying 1 image to 2 images. We currently expect the number of images to go to 0 (<code>frame-&gt;children().size() == 1</code>) between switches, but sometimes it seems to jump from 1 directly to 2 images. The test would pass if we removed this expectation.</p>", "type": "rendered"}, "created_on": "2016-03-22T23:17:23.917839+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-03-22T23:17:23.920009+00:00", "type": "pullrequest_comment", "id": 16119548}