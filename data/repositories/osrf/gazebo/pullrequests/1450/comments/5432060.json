{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1450/comments/5432060.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1450/_/diff#comment-5432060"}}, "parent": {"id": 5431961, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1450/comments/5431961.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1450/_/diff#comment-5431961"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1450, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1450.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1450"}}, "title": "Test for #602 (segfault after Unsubscribe)"}, "content": {"raw": "This may be just because of my unique test environment. I'm running this test on my desktop machine through ssh. After your change, I get:\n\n\n```\n#!c++\n\n[ RUN      ] Issue602Test.Unsubscribe\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.2.43\n[Err] [RenderEngine.cc:682] Can't open display: \n[Wrn] [RenderEngine.cc:92] Unable to create X window. Rendering will be disabled\n[Dbg] [ServerFixture.cc:144] ServerFixture load in 0.4 seconds, timeout after 600 seconds\n[Dbg] [602_unsubscribe_segfault.cc:85] Listening to /gazebo/default/physics/contacts\n[Dbg] [602_unsubscribe_segfault.cc:85] Listening to /gazebo/default/sensor_box/link/box_contact/contacts\n[Dbg] [602_unsubscribe_segfault.cc:85] Listening to /gazebo/default/sensor_box/link/box_contact\n/home/nkoenig/work/gazebo_pr_1450/test/regression/602_unsubscribe_segfault.cc:93: Failure\nExpected: (g_messageCount) > (steps / 2), actual: 13 vs 25\n[Dbg] [602_unsubscribe_segfault.cc:85] Listening to /gazebo/default/sensor_box/link/box_contact2/contacts\n[Dbg] [602_unsubscribe_segfault.cc:85] Listening to /gazebo/default/sensor_box/link/box_contact2\n[Dbg] [ServerFixture.cc:95] ServerFixture::Unload\n[  FAILED  ] Issue602Test.Unsubscribe (1379 ms)\n```\n", "markup": "markdown", "html": "<p>This may be just because of my unique test environment. I'm running this test on my desktop machine through ssh. After your change, I get:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"p\">[</span> <span class=\"n\">RUN</span>      <span class=\"p\">]</span> <span class=\"n\">Issue602Test</span><span class=\"p\">.</span><span class=\"n\">Unsubscribe</span>\n<span class=\"p\">[</span><span class=\"n\">Msg</span><span class=\"p\">]</span> <span class=\"n\">Waiting</span> <span class=\"k\">for</span> <span class=\"n\">master</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Msg</span><span class=\"p\">]</span> <span class=\"n\">Connected</span> <span class=\"n\">to</span> <span class=\"n\">gazebo</span> <span class=\"n\">master</span> <span class=\"err\">@</span> <span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//127.0.0.1:11345</span>\n<span class=\"p\">[</span><span class=\"n\">Msg</span><span class=\"p\">]</span> <span class=\"n\">Publicized</span> <span class=\"nl\">address</span><span class=\"p\">:</span> <span class=\"mf\">172.23.2.43</span>\n<span class=\"p\">[</span><span class=\"n\">Err</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">RenderEngine</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">682</span><span class=\"p\">]</span> <span class=\"n\">Can</span><span class=\"err\">&#39;</span><span class=\"n\">t</span> <span class=\"n\">open</span> <span class=\"nl\">display</span><span class=\"p\">:</span> \n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">RenderEngine</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">92</span><span class=\"p\">]</span> <span class=\"n\">Unable</span> <span class=\"n\">to</span> <span class=\"n\">create</span> <span class=\"n\">X</span> <span class=\"n\">window</span><span class=\"p\">.</span> <span class=\"n\">Rendering</span> <span class=\"n\">will</span> <span class=\"n\">be</span> <span class=\"n\">disabled</span>\n<span class=\"p\">[</span><span class=\"n\">Dbg</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ServerFixture</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">144</span><span class=\"p\">]</span> <span class=\"n\">ServerFixture</span> <span class=\"n\">load</span> <span class=\"n\">in</span> <span class=\"mf\">0.4</span> <span class=\"n\">seconds</span><span class=\"p\">,</span> <span class=\"n\">timeout</span> <span class=\"n\">after</span> <span class=\"mi\">600</span> <span class=\"n\">seconds</span>\n<span class=\"p\">[</span><span class=\"n\">Dbg</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"mi\">602</span><span class=\"n\">_unsubscribe_segfault</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">85</span><span class=\"p\">]</span> <span class=\"n\">Listening</span> <span class=\"n\">to</span> <span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"k\">default</span><span class=\"o\">/</span><span class=\"n\">physics</span><span class=\"o\">/</span><span class=\"n\">contacts</span>\n<span class=\"p\">[</span><span class=\"n\">Dbg</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"mi\">602</span><span class=\"n\">_unsubscribe_segfault</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">85</span><span class=\"p\">]</span> <span class=\"n\">Listening</span> <span class=\"n\">to</span> <span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"k\">default</span><span class=\"o\">/</span><span class=\"n\">sensor_box</span><span class=\"o\">/</span><span class=\"n\">link</span><span class=\"o\">/</span><span class=\"n\">box_contact</span><span class=\"o\">/</span><span class=\"n\">contacts</span>\n<span class=\"p\">[</span><span class=\"n\">Dbg</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"mi\">602</span><span class=\"n\">_unsubscribe_segfault</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">85</span><span class=\"p\">]</span> <span class=\"n\">Listening</span> <span class=\"n\">to</span> <span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"k\">default</span><span class=\"o\">/</span><span class=\"n\">sensor_box</span><span class=\"o\">/</span><span class=\"n\">link</span><span class=\"o\">/</span><span class=\"n\">box_contact</span>\n<span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">nkoenig</span><span class=\"o\">/</span><span class=\"n\">work</span><span class=\"o\">/</span><span class=\"n\">gazebo_pr_1450</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">regression</span><span class=\"o\">/</span><span class=\"mi\">602</span><span class=\"n\">_unsubscribe_segfault</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">93</span><span class=\"o\">:</span> <span class=\"n\">Failure</span>\n<span class=\"nl\">Expected</span><span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"n\">g_messageCount</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"p\">(</span><span class=\"n\">steps</span> <span class=\"o\">/</span> <span class=\"mi\">2</span><span class=\"p\">),</span> <span class=\"nl\">actual</span><span class=\"p\">:</span> <span class=\"mi\">13</span> <span class=\"n\">vs</span> <span class=\"mi\">25</span>\n<span class=\"p\">[</span><span class=\"n\">Dbg</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"mi\">602</span><span class=\"n\">_unsubscribe_segfault</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">85</span><span class=\"p\">]</span> <span class=\"n\">Listening</span> <span class=\"n\">to</span> <span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"k\">default</span><span class=\"o\">/</span><span class=\"n\">sensor_box</span><span class=\"o\">/</span><span class=\"n\">link</span><span class=\"o\">/</span><span class=\"n\">box_contact2</span><span class=\"o\">/</span><span class=\"n\">contacts</span>\n<span class=\"p\">[</span><span class=\"n\">Dbg</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"mi\">602</span><span class=\"n\">_unsubscribe_segfault</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">85</span><span class=\"p\">]</span> <span class=\"n\">Listening</span> <span class=\"n\">to</span> <span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"k\">default</span><span class=\"o\">/</span><span class=\"n\">sensor_box</span><span class=\"o\">/</span><span class=\"n\">link</span><span class=\"o\">/</span><span class=\"n\">box_contact2</span>\n<span class=\"p\">[</span><span class=\"n\">Dbg</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ServerFixture</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">95</span><span class=\"p\">]</span> <span class=\"n\">ServerFixture</span><span class=\"o\">::</span><span class=\"n\">Unload</span>\n<span class=\"p\">[</span>  <span class=\"n\">FAILED</span>  <span class=\"p\">]</span> <span class=\"n\">Issue602Test</span><span class=\"p\">.</span><span class=\"n\">Unsubscribe</span> <span class=\"p\">(</span><span class=\"mi\">1379</span> <span class=\"n\">ms</span><span class=\"p\">)</span>\n</pre></div>", "type": "rendered"}, "created_on": "2015-03-03T00:08:09.566979+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2015-03-03T00:08:09.573487+00:00", "type": "pullrequest_comment", "id": 5432060}