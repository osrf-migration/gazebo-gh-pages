{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3122/comments/117272238.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3122/_/diff#comment-117272238"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3122, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3122.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3122"}}, "title": "fix crash when loading submesh with no bone assignments"}, "content": {"raw": "I just noticed that gzserver now crashes when running `worlds/actor.world` . Here\u2019s a backtrace:\n\n\u200c\n\n```\nThread 48 \"gzserver\" received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7fff53fff700 (LWP 10995)]\ngazebo::common::NodeAnimation::GetFrameCount (this=this@entry=0x630000656e697053) at /usr/include/c++/8/bits/stl_map.h:468\n468       size() const _GLIBCXX_NOEXCEPT\n(gdb) bt\n#0  0x00007ffff6cfc3e0 in gazebo::common::NodeAnimation::GetFrameCount() const (this=this@entry=0x630000656e697053) at /usr/include/c++/8/bits/stl_map.h:468\n#1  0x00007ffff6cfebd5 in gazebo::common::SkeletonAnimation::PoseAtX(double, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) const (this=this@entry=0x555556bd4550, _x=0.0075493629841231402, _node=..., _loop=_loop@entry=true)\n    at /home/ian/code/gz_ws/src/gazebo/gazebo/common/SkeletonAnimation.cc:300\n#2  0x00007ffff5987f30 in gazebo::physics::Actor::Update() (this=0x555556c9f550) at /home/ian/code/gz_ws/src/gazebo/gazebo/physics/Actor.cc:640\n#3  0x00007ffff5a37af5 in gazebo::physics::World::ModelUpdateSingleLoop() (this=0x55555632c240) at /usr/include/boost/smart_ptr/shared_ptr.hpp:732\n#4  0x00007ffff5a40477 in gazebo::physics::World::Update() (this=0x55555632c240) at /usr/include/c++/8/bits/unique_ptr.h:342\n#5  0x00007ffff5a4a1cb in gazebo::physics::World::Step() (this=0x55555632c240) at /home/ian/code/gz_ws/src/gazebo/gazebo/physics/World.cc:671\n#6  0x00007ffff5a4a5cd in gazebo::physics::World::RunLoop() (this=0x55555632c240) at /home/ian/code/gz_ws/src/gazebo/gazebo/physics/World.cc:519\n#7  0x00007ffff697466f in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#8  0x00007ffff5dac6db in start_thread (arg=0x7fff53fff700) at pthread_create.c:463\n#9  0x00007ffff63cf88f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\n```\n\n\u200c", "markup": "markdown", "html": "<p>I just noticed that gzserver now crashes when running <code>worlds/actor.world</code> . Here\u2019s a backtrace:</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span>Thread 48 &quot;gzserver&quot; received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7fff53fff700 (LWP 10995)]\ngazebo::common::NodeAnimation::GetFrameCount (this=this@entry=0x630000656e697053) at /usr/include/c++/8/bits/stl_map.h:468\n468       size() const _GLIBCXX_NOEXCEPT\n(gdb) bt\n#0  0x00007ffff6cfc3e0 in gazebo::common::NodeAnimation::GetFrameCount() const (this=this@entry=0x630000656e697053) at /usr/include/c++/8/bits/stl_map.h:468\n#1  0x00007ffff6cfebd5 in gazebo::common::SkeletonAnimation::PoseAtX(double, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, bool) const (this=this@entry=0x555556bd4550, _x=0.0075493629841231402, _node=..., _loop=_loop@entry=true)\n    at /home/ian/code/gz_ws/src/gazebo/gazebo/common/SkeletonAnimation.cc:300\n#2  0x00007ffff5987f30 in gazebo::physics::Actor::Update() (this=0x555556c9f550) at /home/ian/code/gz_ws/src/gazebo/gazebo/physics/Actor.cc:640\n#3  0x00007ffff5a37af5 in gazebo::physics::World::ModelUpdateSingleLoop() (this=0x55555632c240) at /usr/include/boost/smart_ptr/shared_ptr.hpp:732\n#4  0x00007ffff5a40477 in gazebo::physics::World::Update() (this=0x55555632c240) at /usr/include/c++/8/bits/unique_ptr.h:342\n#5  0x00007ffff5a4a1cb in gazebo::physics::World::Step() (this=0x55555632c240) at /home/ian/code/gz_ws/src/gazebo/gazebo/physics/World.cc:671\n#6  0x00007ffff5a4a5cd in gazebo::physics::World::RunLoop() (this=0x55555632c240) at /home/ian/code/gz_ws/src/gazebo/gazebo/physics/World.cc:519\n#7  0x00007ffff697466f in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#8  0x00007ffff5dac6db in start_thread (arg=0x7fff53fff700) at pthread_create.c:463\n#9  0x00007ffff63cf88f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\n</pre></div>\n\n\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2019-09-17T20:33:57.188838+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2019-09-17T20:33:57.198808+00:00", "type": "pullrequest_comment", "id": 117272238}