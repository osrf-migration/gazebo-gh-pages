{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1989/comments/14022284.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1989/_/diff#comment-14022284"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1989, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1989.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1989"}}, "title": "Atmosphere model"}, "content": {"raw": "For the `AdiabaticAtmosphere`, I think there is a possibility of an inconsistent state. According to wikipedia, the [ideal gas law](https://en.wikipedia.org/wiki/Ideal_gas_law#Molar_form) has the following form: `P = rho * (R / M) * T` where\n\n* `P` is pressure\n* `rho` is density\n* `R` is the universal gas constant\n* `M` is the molar mass of the gas in question\n* `T` is temperature\n\n`R` and `M` are specified as static constants in `AdiabaticAtmosphere`, while the values of `P`, `rho`, and `T` at sea-level are independently stored in `AtmospherePrivate` and provide independent Set functions. The latter three variables could be set independently to values that would violate the ideal gas law.\n\nFor constant values of `R` and `M`, I think the proper way to set the state is with functions that take pairs of variables (`P,T`, `P,rho`, `rho,T`) and use the ideal gas law to compute the value of the third variable. Then the three state variables should satisfy the ideal gas law. Does that make sense?", "markup": "markdown", "html": "<p>For the <code>AdiabaticAtmosphere</code>, I think there is a possibility of an inconsistent state. According to wikipedia, the <a data-is-external-link=\"true\" href=\"https://en.wikipedia.org/wiki/Ideal_gas_law#Molar_form\" rel=\"nofollow\">ideal gas law</a> has the following form: <code>P = rho * (R / M) * T</code> where</p>\n<ul>\n<li><code>P</code> is pressure</li>\n<li><code>rho</code> is density</li>\n<li><code>R</code> is the universal gas constant</li>\n<li><code>M</code> is the molar mass of the gas in question</li>\n<li><code>T</code> is temperature</li>\n</ul>\n<p><code>R</code> and <code>M</code> are specified as static constants in <code>AdiabaticAtmosphere</code>, while the values of <code>P</code>, <code>rho</code>, and <code>T</code> at sea-level are independently stored in <code>AtmospherePrivate</code> and provide independent Set functions. The latter three variables could be set independently to values that would violate the ideal gas law.</p>\n<p>For constant values of <code>R</code> and <code>M</code>, I think the proper way to set the state is with functions that take pairs of variables (<code>P,T</code>, <code>P,rho</code>, <code>rho,T</code>) and use the ideal gas law to compute the value of the third variable. Then the three state variables should satisfy the ideal gas law. Does that make sense?</p>", "type": "rendered"}, "created_on": "2016-01-29T22:58:50.785659+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-01-29T22:58:50.787804+00:00", "type": "pullrequest_comment", "id": 14022284}