{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1751/comments/8078716.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1751/_/diff#comment-8078716"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1751, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1751.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1751"}}, "title": "Add altimeter sensor plus test"}, "content": {"raw": "Some tests fail for me:\n\n~~~\n./gazebo/sensors/UNIT_AltimeterSensor_TEST \n[==========] Running 6 tests from 1 test case.\n[----------] Global test environment set-up.\n[----------] 6 tests from PhysicsEngines/AltimeterSensor_TEST\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/0\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 0.9 seconds, timeout after 600 seconds\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[       OK ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/0 (1034 ms)\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/1\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 1.1 seconds, timeout after 600 seconds\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[       OK ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/1 (1245 ms)\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/2\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 1.2 seconds, timeout after 600 seconds\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[       OK ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/2 (1336 ms)\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/0\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 1.4 seconds, timeout after 600 seconds\nWarning [parser.cc:713] XML Element[topic], child of element[altimeter] not defined in SDF. Ignoring[topic]. You may have an incorrect SDF file, or an sdformat version that doesn't support this element.\n/home/louisep/gazebo_source/gazeboB/gazebo/sensors/AltimeterSensor_TEST.cc:110: Failure\nValue of: altSensor != NULL\n  Actual: false\nExpected: true\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/0, where GetParam() = \"ode\" (1698 ms)\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/1\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 1.4 seconds, timeout after 600 seconds\nWarning [parser.cc:713] XML Element[topic], child of element[altimeter] not defined in SDF. Ignoring[topic]. You may have an incorrect SDF file, or an sdformat version that doesn't support this element.\n/home/louisep/gazebo_source/gazeboB/gazebo/sensors/AltimeterSensor_TEST.cc:110: Failure\nValue of: altSensor != NULL\n  Actual: false\nExpected: true\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/1, where GetParam() = \"bullet\" (1719 ms)\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/2\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn't set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 1.3 seconds, timeout after 600 seconds\nWarning [parser.cc:713] XML Element[topic], child of element[altimeter] not defined in SDF. Ignoring[topic]. You may have an incorrect SDF file, or an sdformat version that doesn't support this element.\n/home/louisep/gazebo_source/gazeboB/gazebo/sensors/AltimeterSensor_TEST.cc:110: Failure\nValue of: altSensor != NULL\n  Actual: false\nExpected: true\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/2, where GetParam() = \"dart\" (1568 ms)\n[----------] 6 tests from PhysicsEngines/AltimeterSensor_TEST (8600 ms total)\n\n[----------] Global test environment tear-down\n[==========] 6 tests from 1 test case ran. (8600 ms total)\n[  PASSED  ] 3 tests.\n[  FAILED  ] 3 tests, listed below:\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/0, where GetParam() = \"ode\"\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/1, where GetParam() = \"bullet\"\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/2, where GetParam() = \"dart\"\n\n 3 FAILED TESTS\n~~~", "markup": "markdown", "html": "<p>Some tests fail for me:</p>\n<div class=\"codehilite\"><pre><span></span>./gazebo/sensors/UNIT_AltimeterSensor_TEST \n[==========] Running 6 tests from 1 test case.\n[----------] Global test environment set-up.\n[----------] 6 tests from PhysicsEngines/AltimeterSensor_TEST\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/0\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 0.9 seconds, timeout after 600 seconds\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[       OK ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/0 (1034 ms)\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/1\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 1.1 seconds, timeout after 600 seconds\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[       OK ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/1 (1245 ms)\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/2\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 1.2 seconds, timeout after 600 seconds\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[       OK ] PhysicsEngines/AltimeterSensor_TEST.BasicAltimeterSensorCheck/2 (1336 ms)\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/0\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 1.4 seconds, timeout after 600 seconds\nWarning [parser.cc:713] XML Element[topic], child of element[altimeter] not defined in SDF. Ignoring[topic]. You may have an incorrect SDF file, or an sdformat version that doesn&#39;t support this element.\n/home/louisep/gazebo_source/gazeboB/gazebo/sensors/AltimeterSensor_TEST.cc:110: Failure\nValue of: altSensor != NULL\n  Actual: false\nExpected: true\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/0, where GetParam() = &quot;ode&quot; (1698 ms)\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/1\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 1.4 seconds, timeout after 600 seconds\nWarning [parser.cc:713] XML Element[topic], child of element[altimeter] not defined in SDF. Ignoring[topic]. You may have an incorrect SDF file, or an sdformat version that doesn&#39;t support this element.\n/home/louisep/gazebo_source/gazeboB/gazebo/sensors/AltimeterSensor_TEST.cc:110: Failure\nValue of: altSensor != NULL\n  Actual: false\nExpected: true\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/1, where GetParam() = &quot;bullet&quot; (1719 ms)\n[ RUN      ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/2\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.52\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [gravity] in physics engine\n[Err] [PhysicsEngine.cc:255] Caught bad any_cast in PhysicsEngine::SetParam: boost::bad_any_cast: failed conversion using boost::any_cast\n[Wrn] [PresetManager.cc:80] Couldn&#39;t set parameter [magnetic_field] in physics engine\n[Dbg] [ServerFixture.cc:154] ServerFixture load in 1.3 seconds, timeout after 600 seconds\nWarning [parser.cc:713] XML Element[topic], child of element[altimeter] not defined in SDF. Ignoring[topic]. You may have an incorrect SDF file, or an sdformat version that doesn&#39;t support this element.\n/home/louisep/gazebo_source/gazeboB/gazebo/sensors/AltimeterSensor_TEST.cc:110: Failure\nValue of: altSensor != NULL\n  Actual: false\nExpected: true\n[Dbg] [ServerFixture.cc:103] ServerFixture::Unload\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/2, where GetParam() = &quot;dart&quot; (1568 ms)\n[----------] 6 tests from PhysicsEngines/AltimeterSensor_TEST (8600 ms total)\n\n[----------] Global test environment tear-down\n[==========] 6 tests from 1 test case ran. (8600 ms total)\n[  PASSED  ] 3 tests.\n[  FAILED  ] 3 tests, listed below:\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/0, where GetParam() = &quot;ode&quot;\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/1, where GetParam() = &quot;bullet&quot;\n[  FAILED  ] PhysicsEngines/AltimeterSensor_TEST.NonzeroAltimeterSensorCheck/2, where GetParam() = &quot;dart&quot;\n\n 3 FAILED TESTS\n</pre></div>", "type": "rendered"}, "created_on": "2015-07-07T17:54:54.344637+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2015-07-07T17:54:54.351850+00:00", "type": "pullrequest_comment", "id": 8078716}