{"pagelen": 50, "values": [{"update": {"description": "fix wrong node weights caused by buffer overflow bug", "title": "fix wrong node weights caused by buffer overflow bug", "destination": {"commit": {"hash": "2b59492f96fc", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2b59492f96fc.json"}, "html": {"href": "#!/osrf/gazebo/commits/2b59492f96fc"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "bf5b3d81b6c5", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/koonpeng/gazebo/commit/bf5b3d81b6c5"}, "html": {"href": "https://bitbucket.org/koonpeng/gazebo/commits/bf5b3d81b6c5"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/koonpeng/gazebo"}, "html": {"href": "https://bitbucket.org/koonpeng/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b31a439c-27c6-4d21-8350-8859b31639b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "koonpeng/gazebo", "uuid": "{b31a439c-27c6-4d21-8350-8859b31639b2}"}, "branch": {"name": "gazebo9-collada-fix"}}, "state": "MERGED", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2019-08-26T19:54:43.333881+00:00"}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"approval": {"date": "2019-08-26T17:13:52.643041+00:00", "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/114345268.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-114345268"}}, "parent": {"id": 114314959, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/114314959.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-114314959"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "content": {"raw": "fixed formatting\n\n[bf5b3d8](https://bitbucket.org/koonpeng/gazebo/commits/bf5b3d81b6c5ad928a69986945cf5c61a581350f?at=gazebo9)", "markup": "markdown", "html": "<p>fixed formatting</p>\n<p><a data-is-external-link=\"true\" href=\"https://bitbucket.org/koonpeng/gazebo/commits/bf5b3d81b6c5ad928a69986945cf5c61a581350f?at=gazebo9\" rel=\"nofollow\">bf5b3d8</a></p>", "type": "rendered"}, "created_on": "2019-08-26T02:47:15.475501+00:00", "user": {"display_name": "Teo Koon Peng", "uuid": "{1ec15fb5-59a2-4750-86ab-0900d87b47c6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D"}, "html": {"href": "https://bitbucket.org/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56fb2af5c994aba4bbdf23b8eec5e2e4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTP-6.png"}}, "nickname": "koonpeng", "type": "user", "account_id": "5bf383ae368afa1e1c7548ea"}, "updated_on": "2019-08-26T02:47:15.598648+00:00", "type": "pullrequest_comment", "id": 114345268}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"update": {"description": "fix wrong node weights caused by buffer overflow bug", "title": "fix wrong node weights caused by buffer overflow bug", "destination": {"commit": {"hash": "2b59492f96fc", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2b59492f96fc.json"}, "html": {"href": "#!/osrf/gazebo/commits/2b59492f96fc"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "bf5b3d81b6c5", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/koonpeng/gazebo/commit/bf5b3d81b6c5"}, "html": {"href": "https://bitbucket.org/koonpeng/gazebo/commits/bf5b3d81b6c5"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/koonpeng/gazebo"}, "html": {"href": "https://bitbucket.org/koonpeng/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b31a439c-27c6-4d21-8350-8859b31639b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "koonpeng/gazebo", "uuid": "{b31a439c-27c6-4d21-8350-8859b31639b2}"}, "branch": {"name": "gazebo9-collada-fix"}}, "state": "OPEN", "author": {"display_name": "Teo Koon Peng", "uuid": "{1ec15fb5-59a2-4750-86ab-0900d87b47c6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D"}, "html": {"href": "https://bitbucket.org/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56fb2af5c994aba4bbdf23b8eec5e2e4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTP-6.png"}}, "nickname": "koonpeng", "type": "user", "account_id": "5bf383ae368afa1e1c7548ea"}, "date": "2019-08-26T02:46:33.382374+00:00"}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/114314959.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-114314959"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "content": {"raw": "A couple of minor code check errors:\n\n```\n./gazebo/common/ColladaLoader.cc:1997:  Lines should be <= 80 characters long  [whitespace/line_length] [2]\n./gazebo/common/ColladaLoader.cc:2064:  Lines should be <= 80 characters long  [whitespace/line_length] [2]\n```", "markup": "markdown", "html": "<p>A couple of minor code check errors:</p>\n<div class=\"codehilite\"><pre><span></span>./gazebo/common/ColladaLoader.cc:1997:  Lines should be &lt;= 80 characters long  [whitespace/line_length] [2]\n./gazebo/common/ColladaLoader.cc:2064:  Lines should be &lt;= 80 characters long  [whitespace/line_length] [2]\n</pre></div>", "type": "rendered"}, "created_on": "2019-08-23T23:00:36.606013+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2019-08-23T23:00:36.613831+00:00", "type": "pullrequest_comment", "id": 114314959}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/114314930.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-114314930"}}, "parent": {"id": 114178040, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/114178040.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-114178040"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "content": {"raw": "ok sounds good. Yeah I understand the differences between the two approaches but I was mainly thinking of keeping code consistency and maybe use asserts to check for bounds if we want to. I'm ok if you think it's safer to go with `.at`", "markup": "markdown", "html": "<p>ok sounds good. Yeah I understand the differences between the two approaches but I was mainly thinking of keeping code consistency and maybe use asserts to check for bounds if we want to. I'm ok if you think it's safer to go with <code>.at</code></p>", "type": "rendered"}, "created_on": "2019-08-23T22:59:59.292253+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2019-08-23T22:59:59.302537+00:00", "type": "pullrequest_comment", "id": 114314930}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/114178040.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-114178040"}}, "parent": {"id": 114173183, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/114173183.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-114173183"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "content": {"raw": "To expand on this:\n\nSince this code only impacts loading, I would estimate that the very minor performance penalty of `.at()` versus `operator[]` is completely negligible.\n\nUsing `.at()` allows us to completely avoid undefined behavior in situations where the assumptions of the loader are not met by the contents of the collada file.\n\nOf course in an ideal implementation, all of the assumptions made by the loader are valid, and the contents of the collada file comply with those assumptions. But we\u2019ve repeatedly come across cases where the logic in the collada loader is flawed, and it\u2019s hard to identify where those flaws are when it results in undefined behavior instead of exceptions.", "markup": "markdown", "html": "<p>To expand on this:</p>\n<p>Since this code only impacts loading, I would estimate that the very minor performance penalty of <code>.at()</code> versus <code>operator[]</code> is completely negligible.</p>\n<p>Using <code>.at()</code> allows us to completely avoid undefined behavior in situations where the assumptions of the loader are not met by the contents of the collada file.</p>\n<p>Of course in an ideal implementation, all of the assumptions made by the loader are valid, and the contents of the collada file comply with those assumptions. But we\u2019ve repeatedly come across cases where the logic in the collada loader is flawed, and it\u2019s hard to identify where those flaws are when it results in undefined behavior instead of exceptions.</p>", "type": "rendered"}, "created_on": "2019-08-23T03:24:15.380929+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2019-08-23T03:24:15.390632+00:00", "type": "pullrequest_comment", "id": 114178040}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/114173183.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-114173183"}}, "parent": {"id": 114164606, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/114164606.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-114164606"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "content": {"raw": "Unlike `std::vector::at()`, the `[]`operator does not do bounds checking. So in this case, it will not provide any protection against buffer overflows. \\([https://en.cppreference.com/w/cpp/container/vector/operator\\_at](https://en.cppreference.com/w/cpp/container/vector/operator_at)\\)", "markup": "markdown", "html": "<p>Unlike <code>std::vector::at()</code>, the <code>[]</code>operator does not do bounds checking. So in this case, it will not provide any protection against buffer overflows. (<a data-is-external-link=\"true\" href=\"https://en.cppreference.com/w/cpp/container/vector/operator_at\" rel=\"nofollow\">https://en.cppreference.com/w/cpp/container/vector/operator_at</a>)</p>", "type": "rendered"}, "created_on": "2019-08-23T01:43:10.997164+00:00", "user": {"display_name": "Teo Koon Peng", "uuid": "{1ec15fb5-59a2-4750-86ab-0900d87b47c6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D"}, "html": {"href": "https://bitbucket.org/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56fb2af5c994aba4bbdf23b8eec5e2e4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTP-6.png"}}, "nickname": "koonpeng", "type": "user", "account_id": "5bf383ae368afa1e1c7548ea"}, "inline": {}, "updated_on": "2019-08-23T01:43:11.289012+00:00", "type": "pullrequest_comment", "id": 114173183}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/114164606.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-114164606"}}, "parent": {"id": 113998922, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/113998922.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-113998922"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "content": {"raw": "looks like the fix for triangles is done a while back in pull request #1133. So the change here looks good to me.\n\nAs for the change to use `std::vector::at() `, can we keep the `[]` operator?", "markup": "markdown", "html": "<p>looks like the fix for triangles is done a while back in <a href=\"#!/osrf/gazebo/pull-requests/1133/fix-actor-animation-loading-and-rendering\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1133</a>. So the change here looks good to me.</p>\n<p>As for the change to use <code>std::vector::at()</code>, can we keep the <code>[]</code> operator?</p>", "type": "rendered"}, "created_on": "2019-08-22T22:47:23.053462+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2019-08-22T22:47:23.069735+00:00", "type": "pullrequest_comment", "id": 114164606}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/114002709.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-114002709"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "content": {"raw": "Videos showing distorted animations before and after this pr.\n\n[https://www.youtube.com/watch?v=nOlPj66Ojtw](https://www.youtube.com/watch?v=nOlPj66Ojtw)\n\n[https://www.youtube.com/watch?v=vrsB\\_MxCOSw](https://www.youtube.com/watch?v=vrsB_MxCOSw)", "markup": "markdown", "html": "<p>Videos showing distorted animations before and after this pr.</p>\n<p><a data-is-external-link=\"true\" href=\"https://www.youtube.com/watch?v=nOlPj66Ojtw\" rel=\"nofollow\">https://www.youtube.com/watch?v=nOlPj66Ojtw</a></p>\n<p><a data-is-external-link=\"true\" href=\"https://www.youtube.com/watch?v=vrsB_MxCOSw\" rel=\"nofollow\">https://www.youtube.com/watch?v=vrsB_MxCOSw</a></p>", "type": "rendered"}, "created_on": "2019-08-22T04:10:04.487508+00:00", "user": {"display_name": "Teo Koon Peng", "uuid": "{1ec15fb5-59a2-4750-86ab-0900d87b47c6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D"}, "html": {"href": "https://bitbucket.org/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56fb2af5c994aba4bbdf23b8eec5e2e4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTP-6.png"}}, "nickname": "koonpeng", "type": "user", "account_id": "5bf383ae368afa1e1c7548ea"}, "updated_on": "2019-08-22T04:10:04.626978+00:00", "type": "pullrequest_comment", "id": 114002709}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/113998922.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-113998922"}}, "parent": {"id": 113998599, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/113998599.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-113998599"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "content": {"raw": "This only affects models using triangles, all our previous models uses polylist so this did not manifest. I'm not sure why it is using `values[daeVertIndex]`but changing it to `daeVertIndex`like it is done in polylist loader fixes distorted animations in some models.", "markup": "markdown", "html": "<p>This only affects models using triangles, all our previous models uses polylist so this did not manifest. I'm not sure why it is using <code>values[daeVertIndex]</code>but changing it to <code>daeVertIndex</code>like it is done in polylist loader fixes distorted animations in some models.</p>", "type": "rendered"}, "created_on": "2019-08-22T02:55:36.214127+00:00", "user": {"display_name": "Teo Koon Peng", "uuid": "{1ec15fb5-59a2-4750-86ab-0900d87b47c6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D"}, "html": {"href": "https://bitbucket.org/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56fb2af5c994aba4bbdf23b8eec5e2e4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTP-6.png"}}, "nickname": "koonpeng", "type": "user", "account_id": "5bf383ae368afa1e1c7548ea"}, "inline": {}, "updated_on": "2019-08-22T02:57:19.590826+00:00", "type": "pullrequest_comment", "id": 113998922}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/113998599.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-113998599"}}, "parent": {"id": 113848071, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/113848071.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-113848071"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "content": {"raw": "Using a `std::vector` instead of a dynamically allocated array is definitely an improvement in my opinion, so let\u2019s definitely keep that change.\n\nI'm more surprised at the change from `values[daeVertIndex]` to just `daeVertIndex`. That strikes me as a super significant behavioral change, so I\u2019d like to really grok what\u2019s happening and understand how that error could have gotten there in the first place.\n\nIf `offsetSize` usually has a value of 2-3, then my intuition tells me that this code should produce undefined behavior for any .dae that has a skeleton with more than 2-3 vertices. Has it really been that broken all this time?", "markup": "markdown", "html": "<p>Using a <code>std::vector</code> instead of a dynamically allocated array is definitely an improvement in my opinion, so let\u2019s definitely keep that change.</p>\n<p>I'm more surprised at the change from <code>values[daeVertIndex]</code> to just <code>daeVertIndex</code>. That strikes me as a super significant behavioral change, so I\u2019d like to really grok what\u2019s happening and understand how that error could have gotten there in the first place.</p>\n<p>If <code>offsetSize</code> usually has a value of 2-3, then my intuition tells me that this code should produce undefined behavior for any .dae that has a skeleton with more than 2-3 vertices. Has it really been that broken all this time?</p>", "type": "rendered"}, "created_on": "2019-08-22T02:48:11.372570+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2019-08-22T02:48:11.384974+00:00", "type": "pullrequest_comment", "id": 113998599}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/113848071.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-113848071"}}, "parent": {"id": 113650410, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/113650410.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-113650410"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "content": {"raw": "`daeVertIndex`stores the index of a vertex defined in the collada file, this can range from 0 to number of vertices.\n\nAt line 1951, `values` is defined as`unsigned int *values = new unsigned int[offsetSize];` `offsetSize` refers to the number of inputs in a `<triangles>`, this is usually 2-3.\n\nwhen`values[daeVertIndex]` is accessed, if `daeVertIndex > offsetSize`, we a buffer overflow read. Compared to `LoadPolylist`'s implementation \\(line 1755\\), its likely that the intended code is `i < skel->GetNumVertNodeWeights(daeVertIndex); ++i)`.\n\nconverting `values`to a `std::vector`and using `std::vector::at`is just a stop gap solution to prevent other potential buffer overflow from `values`. Should I undo the conversion to `std::vector`can only submit the overflow fixes for PR?", "markup": "markdown", "html": "<p><code>daeVertIndex</code>stores the index of a vertex defined in the collada file, this can range from 0 to number of vertices.</p>\n<p>At line 1951, <code>values</code> is defined as<code>unsigned int *values = new unsigned int[offsetSize];</code> <code>offsetSize</code> refers to the number of inputs in a <code>&lt;triangles&gt;</code>, this is usually 2-3.</p>\n<p>when<code>values[daeVertIndex]</code> is accessed, if <code>daeVertIndex &gt; offsetSize</code>, we a buffer overflow read. Compared to <code>LoadPolylist</code>'s implementation (line 1755), its likely that the intended code is <code>i &lt; skel-&gt;GetNumVertNodeWeights(daeVertIndex); ++i)</code>.</p>\n<p>converting <code>values</code>to a <code>std::vector</code>and using <code>std::vector::at</code>is just a stop gap solution to prevent other potential buffer overflow from <code>values</code>. Should I undo the conversion to <code>std::vector</code>can only submit the overflow fixes for PR?</p>", "type": "rendered"}, "created_on": "2019-08-21T07:26:11.917009+00:00", "user": {"display_name": "Teo Koon Peng", "uuid": "{1ec15fb5-59a2-4750-86ab-0900d87b47c6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D"}, "html": {"href": "https://bitbucket.org/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56fb2af5c994aba4bbdf23b8eec5e2e4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTP-6.png"}}, "nickname": "koonpeng", "type": "user", "account_id": "5bf383ae368afa1e1c7548ea"}, "inline": {}, "updated_on": "2019-08-21T07:28:00.317677+00:00", "type": "pullrequest_comment", "id": 113848071}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"approval": {"date": "2019-08-20T03:29:22.297991+00:00", "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115/comments/113650410.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115/_/diff#comment-113650410"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}, "content": {"raw": "Could you provide a high-level explanation of why this was wrong and needed to be changed?", "markup": "markdown", "html": "<p>Could you provide a high-level explanation of why this was wrong and needed to be changed?</p>", "type": "rendered"}, "created_on": "2019-08-20T03:02:00.584173+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2019-08-20T03:02:00.591453+00:00", "type": "pullrequest_comment", "id": 113650410}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"update": {"description": "fix wrong node weights caused by buffer overflow bug", "title": "fix wrong node weights caused by buffer overflow bug", "destination": {"commit": {"hash": "2b59492f96fc", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2b59492f96fc.json"}, "html": {"href": "#!/osrf/gazebo/commits/2b59492f96fc"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "8a858c9a6de5", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/koonpeng/gazebo/commit/8a858c9a6de5"}, "html": {"href": "https://bitbucket.org/koonpeng/gazebo/commits/8a858c9a6de5"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/koonpeng/gazebo"}, "html": {"href": "https://bitbucket.org/koonpeng/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b31a439c-27c6-4d21-8350-8859b31639b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "koonpeng/gazebo", "uuid": "{b31a439c-27c6-4d21-8350-8859b31639b2}"}, "branch": {"name": "gazebo9-collada-fix"}}, "state": "OPEN", "author": {"display_name": "Teo Koon Peng", "uuid": "{1ec15fb5-59a2-4750-86ab-0900d87b47c6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D"}, "html": {"href": "https://bitbucket.org/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56fb2af5c994aba4bbdf23b8eec5e2e4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTP-6.png"}}, "nickname": "koonpeng", "type": "user", "account_id": "5bf383ae368afa1e1c7548ea"}, "date": "2019-08-05T05:40:41.305025+00:00"}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}, {"update": {"description": "fix wrong node weights caused by buffer overflow bug", "title": "fix wrong node weights caused by buffer overflow bug", "destination": {"commit": {"hash": "2b59492f96fc", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2b59492f96fc.json"}, "html": {"href": "#!/osrf/gazebo/commits/2b59492f96fc"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "8a858c9a6de5", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/koonpeng/gazebo/commit/8a858c9a6de5"}, "html": {"href": "https://bitbucket.org/koonpeng/gazebo/commits/8a858c9a6de5"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/koonpeng/gazebo"}, "html": {"href": "https://bitbucket.org/koonpeng/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b31a439c-27c6-4d21-8350-8859b31639b2}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "koonpeng/gazebo", "uuid": "{b31a439c-27c6-4d21-8350-8859b31639b2}"}, "branch": {"name": "gazebo9-collada-fix"}}, "state": "OPEN", "author": {"display_name": "Teo Koon Peng", "uuid": "{1ec15fb5-59a2-4750-86ab-0900d87b47c6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D"}, "html": {"href": "https://bitbucket.org/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56fb2af5c994aba4bbdf23b8eec5e2e4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTP-6.png"}}, "nickname": "koonpeng", "type": "user", "account_id": "5bf383ae368afa1e1c7548ea"}, "date": "2019-08-05T05:40:41.268782+00:00"}, "pull_request": {"type": "pullrequest", "id": 3115, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3115.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3115"}}, "title": "fix wrong node weights caused by buffer overflow bug"}}]}