{"pagelen": 50, "values": [{"update": {"description": "Currently many of our tests link against unnecessary libraries. For example, compiling the math tests requires compiling all of `libgazebo`, which turns a 1 minute task into a 15 minute task.\r\n\r\nThis pull request replaces the hacky `GZ_BUILD_TESTS_EXTRA_EXE_SRCS` cmake variable with a keyword `EXTRA_LIBS` to the gz_build_tests macro specify which libraries to use for linking the tests that use gtest (the GUI tests using `QTest` are not modified). To test with a fresh build folder:\r\n\r\n~~~\r\nmkdir build\r\ncd build\r\ncmake ..\r\ncd gazebo/math\r\nmake -j8\r\n~~~\r\n\r\nThis will be much faster with this branch. The speed-up is most dramatic for math, but there is speed-up for most other tests that are touched here. Also, some folders have a mix of tests that are true unit tests, and tests that use `gazebo_test_fixture`, and I split them up accordingly.\r\n\r\nThere are still some missing dependencies (for example any test worlds that use plugins, or tests that invoke command-line tools), but I would prefer to save this for later.\r\n\r\n[jenkins no-gpu is clean](http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-no-gpu/986/)", "title": "Only link relevant libraries to tests", "destination": {"commit": {"hash": "904da8f5428c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/904da8f5428c.json"}, "html": {"href": "#!/osrf/gazebo/commits/904da8f5428c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo7"}}, "reason": "", "source": {"commit": {"hash": "d21c51d52a18", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/d21c51d52a18.json"}, "html": {"href": "#!/osrf/gazebo/commits/d21c51d52a18"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "unit_test_dependencies"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-03-14T21:20:43.729624+00:00"}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"approval": {"date": "2016-03-14T20:38:21.995412+00:00", "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"approval": {"date": "2016-03-14T14:55:38.412659+00:00", "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"update": {"description": "Currently many of our tests link against unnecessary libraries. For example, compiling the math tests requires compiling all of `libgazebo`, which turns a 1 minute task into a 15 minute task.\r\n\r\nThis pull request replaces the hacky `GZ_BUILD_TESTS_EXTRA_EXE_SRCS` cmake variable with a keyword `EXTRA_LIBS` to the gz_build_tests macro specify which libraries to use for linking the tests that use gtest (the GUI tests using `QTest` are not modified). To test with a fresh build folder:\r\n\r\n~~~\r\nmkdir build\r\ncd build\r\ncmake ..\r\ncd gazebo/math\r\nmake -j8\r\n~~~\r\n\r\nThis will be much faster with this branch. The speed-up is most dramatic for math, but there is speed-up for most other tests that are touched here. Also, some folders have a mix of tests that are true unit tests, and tests that use `gazebo_test_fixture`, and I split them up accordingly.\r\n\r\nThere are still some missing dependencies (for example any test worlds that use plugins, or tests that invoke command-line tools), but I would prefer to save this for later.\r\n\r\n[jenkins no-gpu is clean](http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-no-gpu/986/)", "title": "Only link relevant libraries to tests", "destination": {"commit": {"hash": "183125d6b1a6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/183125d6b1a6.json"}, "html": {"href": "#!/osrf/gazebo/commits/183125d6b1a6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo7"}}, "reason": "", "source": {"commit": {"hash": "d21c51d52a18", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/d21c51d52a18.json"}, "html": {"href": "#!/osrf/gazebo/commits/d21c51d52a18"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "unit_test_dependencies"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-03-10T22:01:20.467650+00:00"}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"update": {"description": "Currently many of our tests link against unnecessary libraries. For example, compiling the math tests requires compiling all of `libgazebo`, which turns a 1 minute task into a 15 minute task.\r\n\r\nThis pull request uses the hacky `GZ_BUILD_TESTS_EXTRA_EXE_SRCS` cmake variable to specify which libraries to use for linking the tests that use gtest (the GUI tests using `QTest` are not modified). To test with a fresh build folder:\r\n\r\n~~~\r\nmkdir build\r\ncd build\r\ncmake ..\r\ncd gazebo/math\r\nmake -j8\r\n~~~\r\n\r\nThis will be much faster with this branch. The speed-up is most dramatic for math, but there is speed-up for most other tests that are touched here. Also, some folders have a mix of tests that are true unit tests, and tests that use `gazebo_test_fixture`, and I split them up accordingly.\r\n\r\nThere are still some missing dependencies (for example any test worlds that use plugins, or tests that invoke command-line tools), but I would prefer to save this for later.\r\n\r\n[jenkins no-gpu is clean](http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-no-gpu/986/)", "title": "Only link relevant libraries to tests", "destination": {"commit": {"hash": "183125d6b1a6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/183125d6b1a6.json"}, "html": {"href": "#!/osrf/gazebo/commits/183125d6b1a6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo7"}}, "reason": "", "source": {"commit": {"hash": "d21c51d52a18", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/d21c51d52a18.json"}, "html": {"href": "#!/osrf/gazebo/commits/d21c51d52a18"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "unit_test_dependencies"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-03-10T21:58:26.587603+00:00"}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/15360838.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-15360838"}}, "parent": {"id": 14930514, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14930514.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14930514"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "content": {"raw": "newer build: http://build.osrfoundation.org/job/gazebo-ci-pr_any-trusty-amd64-gpu-none/178/\n\njust has a flaky test failure", "markup": "markdown", "html": "<p>newer build: <a href=\"http://build.osrfoundation.org/job/gazebo-ci-pr_any-trusty-amd64-gpu-none/178/\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/job/gazebo-ci-pr_any-trusty-amd64-gpu-none/178/</a></p>\n<p>just has a flaky test failure</p>", "type": "rendered"}, "created_on": "2016-03-05T00:34:33.369055+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-03-05T00:34:33.371171+00:00", "type": "pullrequest_comment", "id": 15360838}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14930514.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14930514"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "content": {"raw": "started another jenkins build:\n\n* http://build.osrfoundation.org/job/gazebo-ci-pr_any-trusty-amd64-gpu-none/153/", "markup": "markdown", "html": "<p>started another jenkins build:</p>\n<ul>\n<li><a href=\"http://build.osrfoundation.org/job/gazebo-ci-pr_any-trusty-amd64-gpu-none/153/\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/job/gazebo-ci-pr_any-trusty-amd64-gpu-none/153/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2016-02-24T00:43:32.794220+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-02-24T00:43:32.796312+00:00", "type": "pullrequest_comment", "id": 14930514}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14930509.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14930509"}}, "parent": {"id": 14760259, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14760259.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14760259"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "content": {"raw": "I merged in your changes", "markup": "markdown", "html": "<p>I merged in your changes</p>", "type": "rendered"}, "created_on": "2016-02-24T00:43:24.285535+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-02-24T00:43:24.287636+00:00", "type": "pullrequest_comment", "id": 14930509}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"update": {"description": "Currently many of our tests link against unnecessary libraries. For example, compiling the math tests requires compiling all of `libgazebo`, which turns a 1 minute task into a 15 minute task.\r\n\r\nThis pull request uses the hacky `GZ_BUILD_TESTS_EXTRA_EXE_SRCS` cmake variable to specify which libraries to use for linking the tests that use gtest (the GUI tests using `QTest` are not modified). To test with a fresh build folder:\r\n\r\n~~~\r\nmkdir build\r\ncd build\r\ncmake ..\r\ncd gazebo/math\r\nmake -j8\r\n~~~\r\n\r\nThis will be much faster with this branch. The speed-up is most dramatic for math, but there is speed-up for most other tests that are touched here. Also, some folders have a mix of tests that are true unit tests, and tests that use `gazebo_test_fixture`, and I split them up accordingly.\r\n\r\nThere are still some missing dependencies (for example any test worlds that use plugins, or tests that invoke command-line tools), but I would prefer to save this for later.\r\n\r\n[jenkins no-gpu is clean](http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-no-gpu/986/)", "title": "Only link relevant libraries to tests", "destination": {"commit": {"hash": "94be90ec1c73", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/94be90ec1c73.json"}, "html": {"href": "#!/osrf/gazebo/commits/94be90ec1c73"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo7"}}, "reason": "", "source": {"commit": {"hash": "9d84cce99464", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/9d84cce99464.json"}, "html": {"href": "#!/osrf/gazebo/commits/9d84cce99464"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "unit_test_dependencies"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-02-24T00:29:52.638648+00:00"}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14930134.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14930134"}}, "parent": {"id": 14760259, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14760259.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14760259"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "content": {"raw": "That looks pretty good. The only limitation is that `EXTRA_LIBS` cannot be the name of a test source file or a library. So it's still a little hacky, but it has nicer syntax.", "markup": "markdown", "html": "<p>That looks pretty good. The only limitation is that <code>EXTRA_LIBS</code> cannot be the name of a test source file or a library. So it's still a little hacky, but it has nicer syntax.</p>", "type": "rendered"}, "created_on": "2016-02-24T00:26:13.840736+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-02-24T00:26:13.843747+00:00", "type": "pullrequest_comment", "id": 14930134}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14760259.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14760259"}}, "parent": {"id": 14537503, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14537503.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14537503"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "content": {"raw": "Thanks for the cmake research, I didn't realize cmake's inability to specify named parameters. I felt up to the challenge. What do you think of this: [unit_test_dependencies_nate](#!/osrf/gazebo/branch/unit_test_dependencies_nate?dest=unit_test_dependencies#diff)?", "markup": "markdown", "html": "<p>Thanks for the cmake research, I didn't realize cmake's inability to specify named parameters. I felt up to the challenge. What do you think of this: <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/branch/unit_test_dependencies_nate?dest=unit_test_dependencies#diff\" rel=\"nofollow\">unit_test_dependencies_nate</a>?</p>", "type": "rendered"}, "created_on": "2016-02-18T17:25:09.422428+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2016-02-18T17:25:09.425027+00:00", "type": "pullrequest_comment", "id": 14760259}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14537503.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14537503"}}, "parent": {"id": 14532540, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14532540.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14532540"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "content": {"raw": "I think this would be a much larger change", "markup": "markdown", "html": "<p>I think this would be a much larger change</p>", "type": "rendered"}, "created_on": "2016-02-13T00:56:52.152245+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-02-13T00:56:52.155924+00:00", "type": "pullrequest_comment", "id": 14537503}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14537356.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14537356"}}, "parent": {"id": 14532540, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14532540.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14532540"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "content": {"raw": "The [cmake macro documentation](https://cmake.org/cmake/help/v3.0/command/macro.html) seems to indicate that you should just loop over all the arguments passed to the macro:\n\n~~~\nmacro(_BAR)\n  foreach(arg IN LISTS ARGN)\n    [...]\n  endforeach()\nendmacro()\n~~~\n\nI think a macro can only take a single list of arguments; I'm not sure that it knows how to separate them into separate lists.", "markup": "markdown", "html": "<p>The <a data-is-external-link=\"true\" href=\"https://cmake.org/cmake/help/v3.0/command/macro.html\" rel=\"nofollow\">cmake macro documentation</a> seems to indicate that you should just loop over all the arguments passed to the macro:</p>\n<div class=\"codehilite\"><pre><span></span>macro(_BAR)\n  foreach(arg IN LISTS ARGN)\n    [...]\n  endforeach()\nendmacro()\n</pre></div>\n\n\n<p>I think a macro can only take a single list of arguments; I'm not sure that it knows how to separate them into separate lists.</p>", "type": "rendered"}, "created_on": "2016-02-13T00:37:27.022017+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-02-13T00:37:27.024027+00:00", "type": "pullrequest_comment", "id": 14537356}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14532540.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14532540"}}, "parent": {"id": 14532352, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14532352.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14532352"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "content": {"raw": "I was imagining altering `gz_build_tests` to look like:\n\n```\nmacro(gz_build_tests _sources _dependencies)\n\n  ...\n\ntarget_link_libraries(\nfoo \nbar\n_dependencies)\n\nendmacro()\n```", "markup": "markdown", "html": "<p>I was imagining altering <code>gz_build_tests</code> to look like:</p>\n<div class=\"codehilite\"><pre><span></span>macro(gz_build_tests _sources _dependencies)\n\n  ...\n\ntarget_link_libraries(\nfoo \nbar\n_dependencies)\n\nendmacro()\n</pre></div>", "type": "rendered"}, "created_on": "2016-02-12T21:13:20.933698+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2016-02-12T21:13:20.939057+00:00", "type": "pullrequest_comment", "id": 14532540}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14532352.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14532352"}}, "parent": {"id": 14320189, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14320189.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14320189"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "content": {"raw": "Can it be converted to a function or does it need to be a macro? I'm not sure if targets and tests added in a function will persist outside the scope, like they would with a macro.", "markup": "markdown", "html": "<p>Can it be converted to a function or does it need to be a macro? I'm not sure if targets and tests added in a function will persist outside the scope, like they would with a macro.</p>", "type": "rendered"}, "created_on": "2016-02-12T21:06:14.024717+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-02-12T21:06:14.027770+00:00", "type": "pullrequest_comment", "id": 14532352}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14320189.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14320189"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "content": {"raw": "How do you feel about altering the `gz_build_tests` macro to accept the list of `extra_libs`? This would replace setting the `GZ_BUILD_TESTS_EXTRA_LIBS` variable. \n\nThis change might be easier to maintain, and is a bit more explicit about what `gz_build_tests` requires.", "markup": "markdown", "html": "<p>How do you feel about altering the <code>gz_build_tests</code> macro to accept the list of <code>extra_libs</code>? This would replace setting the <code>GZ_BUILD_TESTS_EXTRA_LIBS</code> variable. </p>\n<p>This change might be easier to maintain, and is a bit more explicit about what <code>gz_build_tests</code> requires.</p>", "type": "rendered"}, "created_on": "2016-02-08T16:48:54.500555+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2016-02-08T16:48:54.507028+00:00", "type": "pullrequest_comment", "id": 14320189}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130/comments/14283259.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130/_/diff#comment-14283259"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}, "content": {"raw": "* another clean [gpu-none build](http://build.osrfoundation.org/job/gazebo-ci-pr_any-trusty-amd64-gpu-none/109/)", "markup": "markdown", "html": "<ul>\n<li>another clean <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-ci-pr_any-trusty-amd64-gpu-none/109/\" rel=\"nofollow\">gpu-none build</a></li>\n</ul>", "type": "rendered"}, "created_on": "2016-02-06T00:27:43.830873+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-02-06T00:27:43.833193+00:00", "type": "pullrequest_comment", "id": 14283259}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"update": {"description": "Currently many of our tests link against unnecessary libraries. For example, compiling the math tests requires compiling all of `libgazebo`, which turns a 1 minute task into a 15 minute task.\r\n\r\nThis pull request uses the hacky `GZ_BUILD_TESTS_EXTRA_EXE_SRCS` cmake variable to specify which libraries to use for linking the tests that use gtest (the GUI tests using `QTest` are not modified). To test with a fresh build folder:\r\n\r\n~~~\r\nmkdir build\r\ncd build\r\ncmake ..\r\ncd gazebo/math\r\nmake -j8\r\n~~~\r\n\r\nThis will be much faster with this branch. The speed-up is most dramatic for math, but there is speed-up for most other tests that are touched here. Also, some folders have a mix of tests that are true unit tests, and tests that use `gazebo_test_fixture`, and I split them up accordingly.\r\n\r\nThere are still some missing dependencies (for example any test worlds that use plugins, or tests that invoke command-line tools), but I would prefer to save this for later.\r\n\r\n[jenkins no-gpu is clean](http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-no-gpu/986/)", "title": "Only link relevant libraries to tests", "destination": {"commit": {"hash": "b26733e0ba6a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/b26733e0ba6a.json"}, "html": {"href": "#!/osrf/gazebo/commits/b26733e0ba6a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo7"}}, "reason": "", "source": {"commit": {"hash": "6509414f10f3", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/6509414f10f3.json"}, "html": {"href": "#!/osrf/gazebo/commits/6509414f10f3"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "unit_test_dependencies"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-02-05T22:25:15.105171+00:00"}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}, {"update": {"description": "Currently many of our tests link against unnecessary libraries. For example, compiling the math tests requires compiling all of `libgazebo`, which turns a 1 minute task into a 15 minute task.\r\n\r\nThis pull request uses the hacky `GZ_BUILD_TESTS_EXTRA_EXE_SRCS` cmake variable to specify which libraries to use for linking the tests that use gtest (the GUI tests using `QTest` are not modified). To test with a fresh build folder:\r\n\r\n~~~\r\nmkdir build\r\ncd build\r\ncmake ..\r\ncd gazebo/math\r\nmake -j8\r\n~~~\r\n\r\nThis will be much faster with this branch. The speed-up is most dramatic for math, but there is speed-up for most other tests that are touched here. Also, some folders have a mix of tests that are true unit tests, and tests that use `gazebo_test_fixture`, and I split them up accordingly.\r\n\r\nThere are still some missing dependencies (for example any test worlds that use plugins, or tests that invoke command-line tools), but I would prefer to save this for later.\r\n\r\n[jenkins no-gpu is clean](http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-no-gpu/986/)", "title": "Only link relevant libraries to tests", "destination": {"commit": {"hash": "b26733e0ba6a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/b26733e0ba6a.json"}, "html": {"href": "#!/osrf/gazebo/commits/b26733e0ba6a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo7"}}, "reason": "", "source": {"commit": {"hash": "6509414f10f3", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/6509414f10f3.json"}, "html": {"href": "#!/osrf/gazebo/commits/6509414f10f3"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "unit_test_dependencies"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-02-05T22:25:15.081781+00:00"}, "pull_request": {"type": "pullrequest", "id": 2130, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2130.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2130"}}, "title": "Only link relevant libraries to tests"}}]}