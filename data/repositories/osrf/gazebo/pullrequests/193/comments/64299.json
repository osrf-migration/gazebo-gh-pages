{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/193/comments/64299.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/193/_/diff#comment-64299"}}, "parent": {"id": 64187, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/193/comments/64187.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/193/_/diff#comment-64187"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 193, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/193.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/193"}}, "title": "A road is not a Model, but is a child of the world. This will cause a crash when accessing model by index."}, "content": {"raw": "My procedure is `gdb gzserver`, then `r sdf/worlds/road.world`, then `gdb gzclient` in a separate terminal. The client and server start fine, though I don't see the ground plane or a road in the render window, just the sky ([see screenshot](http://dl.dropbox.com/u/96660379/road%20render%20problem.png)). I add a unit box to the world, and gzserver aborts. Here's the backtrace:\n~~~\n~/osrf/gazebo_nonmodel_world_child/build_debug$ cd ../sdf/worlds\n~/osrf/gazebo_nonmodel_world_child/sdf/worlds$ gdb gzserver\nGNU gdb (Ubuntu/Linaro 7.4-2012.04-0ubuntu2.1) 7.4-2012.04\nCopyright (C) 2012 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nFor bug reporting instructions, please see:\n<http://bugs.launchpad.net/gdb-linaro/>...\nReading symbols from /home/scpeters/local/bin/gzserver...done.\n(gdb) r road.world \nStarting program: /home/scpeters/local/bin/gzserver road.world\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n[New Thread 0x7fffe4d5c700 (LWP 8310)]\nGazebo multi-robot simulator, version 1.3.0\nCopyright (C) 2012 Nate Koenig, John Hsu, and contributors.\nReleased under the Apache 2 License.\nhttp://gazebosim.org\n\n[New Thread 0x7fffdffff700 (LWP 8311)]\n[New Thread 0x7fffdf5f6700 (LWP 8312)]\nMsg Waiting for master\nMsg Connected to gazebo master @ http://localhost:11345\n[New Thread 0x7fffd7fff700 (LWP 8315)]\n[New Thread 0x7fffd77fe700 (LWP 8316)]\n[New Thread 0x7fffd6ffd700 (LWP 8317)]\n[New Thread 0x7fffd67fc700 (LWP 8318)]\n[New Thread 0x7fffd5ffb700 (LWP 8319)]\n[New Thread 0x7fffd57fa700 (LWP 8320)]\n[New Thread 0x7fffd4ff9700 (LWP 8321)]\n[New Thread 0x7fffbbfff700 (LWP 8322)]\n[New Thread 0x7fffbb7fe700 (LWP 8323)]\n[New Thread 0x7fffbaffd700 (LWP 8327)]\nterminate called after throwing an instance of 'std::bad_alloc'\n  what():  std::bad_alloc\n\nProgram received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fffbaffd700 (LWP 8327)]\n0x00007ffff502e425 in __GI_raise (sig=<optimized out>)\n    at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n64\t../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n#0  0x00007ffff502e425 in __GI_raise (sig=<optimized out>)\n    at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n#1  0x00007ffff5031b8b in __GI_abort () at abort.c:91\n#2  0x00007ffff568469d in __gnu_cxx::__verbose_terminate_handler() ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3  0x00007ffff5682846 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4  0x00007ffff5682873 in std::terminate() ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5  0x00007ffff568296e in __cxa_throw ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6  0x00007ffff562f6a2 in std::__throw_bad_alloc() ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#7  0x00007ffff70c05cc in __gnu_cxx::new_allocator<boost::shared_ptr<gazebo::physics::Joint> >::allocate (this=0x7fffbaffc720, __n=18446744073709548848)\n    at /usr/include/c++/4.6/ext/new_allocator.h:90\n#8  0x00007ffff70bf825 in std::_Vector_base<boost::shared_ptr<gazebo::physics::Joint>, std::allocator<boost::shared_ptr<gazebo::physics::Joint> > >::_M_allocate (this=0x7fffbaffc720, __n=18446744073709548848)\n    at /usr/include/c++/4.6/bits/stl_vector.h:150\n#9  0x00007ffff70dca81 in std::_Vector_base<boost::shared_ptr<gazebo::physics::Joint>, std::allocator<boost::shared_ptr<gazebo::physics::Joint> > >::_Vector_base (this=0x7fffbaffc720, __n=18446744073709548848, __a=...)\n    at /usr/include/c++/4.6/bits/stl_vector.h:123\n---Type <return> to continue, or q <return> to quit---\n#10 0x00007ffff70dbf9f in std::vector<boost::shared_ptr<gazebo::physics::Joint>, std::allocator<boost::shared_ptr<gazebo::physics::Joint> > >::vector (\n    this=0x7fffbaffc720, __x=...) at /usr/include/c++/4.6/bits/stl_vector.h:279\n#11 0x00007ffff70d94f8 in gazebo::physics::ModelState::ModelState (\n    this=0x7fffbaffc7f0, _model=...)\n    at /home/scpeters/osrf/gazebo_nonmodel_world_child/gazebo/physics/ModelState.cc:48\n#12 0x00007ffff71163c2 in gazebo::physics::WorldState::WorldState (\n    this=0x7fffbaffc970, _world=...)\n    at /home/scpeters/osrf/gazebo_nonmodel_world_child/gazebo/physics/WorldState.cc:44\n#13 0x00007ffff70f8cd4 in gazebo::physics::World::Update (this=0x9f9500)\n    at /home/scpeters/osrf/gazebo_nonmodel_world_child/gazebo/physics/World.cc:493\n#14 0x00007ffff70f852e in gazebo::physics::World::Step (this=0x9f9500)\n    at /home/scpeters/osrf/gazebo_nonmodel_world_child/gazebo/physics/World.cc:399\n#15 0x00007ffff70f7d29 in gazebo::physics::World::RunLoop (this=0x9f9500)\n    at /home/scpeters/osrf/gazebo_nonmodel_world_child/gazebo/physics/World.cc:319\n#16 0x00007ffff71135f2 in boost::_mfi::mf0<void, gazebo::physics::World>::operator() (this=0xcf74c8, p=0x9f9500)\n    at /usr/include/boost/bind/mem_fn_template.hpp:49\n---Type <return> to continue, or q <return> to quit---\n#17 0x00007ffff71128da in boost::_bi::list1<boost::_bi::value<gazebo::physics::World*> >::operator()<boost::_mfi::mf0<void, gazebo::physics::World>, boost::_bi::list0> (this=0xcf74d8, f=..., a=...) at /usr/include/boost/bind/bind.hpp:253\n#18 0x00007ffff7111c99 in boost::_bi::bind_t<void, boost::_mfi::mf0<void, gazebo::physics::World>, boost::_bi::list1<boost::_bi::value<gazebo::physics::World*> > >::operator() (this=0xcf74c8) at /usr/include/boost/bind/bind_template.hpp:20\n#19 0x00007ffff7114a2e in boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, gazebo::physics::World>, boost::_bi::list1<boost::_bi::value<gazebo::physics::World*> > > >::run (this=0xcf7340)\n    at /usr/include/boost/thread/detail/thread.hpp:61\n#20 0x00007ffff5d42ce9 in thread_proxy ()\n   from /usr/lib/libboost_thread.so.1.46.1\n#21 0x00007ffff6676e9a in start_thread (arg=0x7fffbaffd700)\n    at pthread_create.c:308\n#22 0x00007ffff50ebcbd in clone ()\n    at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\n#23 0x0000000000000000 in ?? ()\n(gdb) \n~~~", "markup": "markdown", "html": "<p>My procedure is <code>gdb gzserver</code>, then <code>r sdf/worlds/road.world</code>, then <code>gdb gzclient</code> in a separate terminal. The client and server start fine, though I don't see the ground plane or a road in the render window, just the sky (<a data-is-external-link=\"true\" href=\"http://dl.dropbox.com/u/96660379/road%20render%20problem.png\" rel=\"nofollow\">see screenshot</a>). I add a unit box to the world, and gzserver aborts. Here's the backtrace:</p>\n<div class=\"codehilite\"><pre><span></span>~/osrf/gazebo_nonmodel_world_child/build_debug$ cd ../sdf/worlds\n~/osrf/gazebo_nonmodel_world_child/sdf/worlds$ gdb gzserver\nGNU gdb (Ubuntu/Linaro 7.4-2012.04-0ubuntu2.1) 7.4-2012.04\nCopyright (C) 2012 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;\nand &quot;show warranty&quot; for details.\nThis GDB was configured as &quot;x86_64-linux-gnu&quot;.\nFor bug reporting instructions, please see:\n&lt;http://bugs.launchpad.net/gdb-linaro/&gt;...\nReading symbols from /home/scpeters/local/bin/gzserver...done.\n(gdb) r road.world \nStarting program: /home/scpeters/local/bin/gzserver road.world\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library &quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;.\n[New Thread 0x7fffe4d5c700 (LWP 8310)]\nGazebo multi-robot simulator, version 1.3.0\nCopyright (C) 2012 Nate Koenig, John Hsu, and contributors.\nReleased under the Apache 2 License.\nhttp://gazebosim.org\n\n[New Thread 0x7fffdffff700 (LWP 8311)]\n[New Thread 0x7fffdf5f6700 (LWP 8312)]\nMsg Waiting for master\nMsg Connected to gazebo master @ http://localhost:11345\n[New Thread 0x7fffd7fff700 (LWP 8315)]\n[New Thread 0x7fffd77fe700 (LWP 8316)]\n[New Thread 0x7fffd6ffd700 (LWP 8317)]\n[New Thread 0x7fffd67fc700 (LWP 8318)]\n[New Thread 0x7fffd5ffb700 (LWP 8319)]\n[New Thread 0x7fffd57fa700 (LWP 8320)]\n[New Thread 0x7fffd4ff9700 (LWP 8321)]\n[New Thread 0x7fffbbfff700 (LWP 8322)]\n[New Thread 0x7fffbb7fe700 (LWP 8323)]\n[New Thread 0x7fffbaffd700 (LWP 8327)]\nterminate called after throwing an instance of &#39;std::bad_alloc&#39;\n  what():  std::bad_alloc\n\nProgram received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fffbaffd700 (LWP 8327)]\n0x00007ffff502e425 in __GI_raise (sig=&lt;optimized out&gt;)\n    at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n64  ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n#0  0x00007ffff502e425 in __GI_raise (sig=&lt;optimized out&gt;)\n    at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n#1  0x00007ffff5031b8b in __GI_abort () at abort.c:91\n#2  0x00007ffff568469d in __gnu_cxx::__verbose_terminate_handler() ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3  0x00007ffff5682846 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4  0x00007ffff5682873 in std::terminate() ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5  0x00007ffff568296e in __cxa_throw ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6  0x00007ffff562f6a2 in std::__throw_bad_alloc() ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#7  0x00007ffff70c05cc in __gnu_cxx::new_allocator&lt;boost::shared_ptr&lt;gazebo::physics::Joint&gt; &gt;::allocate (this=0x7fffbaffc720, __n=18446744073709548848)\n    at /usr/include/c++/4.6/ext/new_allocator.h:90\n#8  0x00007ffff70bf825 in std::_Vector_base&lt;boost::shared_ptr&lt;gazebo::physics::Joint&gt;, std::allocator&lt;boost::shared_ptr&lt;gazebo::physics::Joint&gt; &gt; &gt;::_M_allocate (this=0x7fffbaffc720, __n=18446744073709548848)\n    at /usr/include/c++/4.6/bits/stl_vector.h:150\n#9  0x00007ffff70dca81 in std::_Vector_base&lt;boost::shared_ptr&lt;gazebo::physics::Joint&gt;, std::allocator&lt;boost::shared_ptr&lt;gazebo::physics::Joint&gt; &gt; &gt;::_Vector_base (this=0x7fffbaffc720, __n=18446744073709548848, __a=...)\n    at /usr/include/c++/4.6/bits/stl_vector.h:123\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n#10 0x00007ffff70dbf9f in std::vector&lt;boost::shared_ptr&lt;gazebo::physics::Joint&gt;, std::allocator&lt;boost::shared_ptr&lt;gazebo::physics::Joint&gt; &gt; &gt;::vector (\n    this=0x7fffbaffc720, __x=...) at /usr/include/c++/4.6/bits/stl_vector.h:279\n#11 0x00007ffff70d94f8 in gazebo::physics::ModelState::ModelState (\n    this=0x7fffbaffc7f0, _model=...)\n    at /home/scpeters/osrf/gazebo_nonmodel_world_child/gazebo/physics/ModelState.cc:48\n#12 0x00007ffff71163c2 in gazebo::physics::WorldState::WorldState (\n    this=0x7fffbaffc970, _world=...)\n    at /home/scpeters/osrf/gazebo_nonmodel_world_child/gazebo/physics/WorldState.cc:44\n#13 0x00007ffff70f8cd4 in gazebo::physics::World::Update (this=0x9f9500)\n    at /home/scpeters/osrf/gazebo_nonmodel_world_child/gazebo/physics/World.cc:493\n#14 0x00007ffff70f852e in gazebo::physics::World::Step (this=0x9f9500)\n    at /home/scpeters/osrf/gazebo_nonmodel_world_child/gazebo/physics/World.cc:399\n#15 0x00007ffff70f7d29 in gazebo::physics::World::RunLoop (this=0x9f9500)\n    at /home/scpeters/osrf/gazebo_nonmodel_world_child/gazebo/physics/World.cc:319\n#16 0x00007ffff71135f2 in boost::_mfi::mf0&lt;void, gazebo::physics::World&gt;::operator() (this=0xcf74c8, p=0x9f9500)\n    at /usr/include/boost/bind/mem_fn_template.hpp:49\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n#17 0x00007ffff71128da in boost::_bi::list1&lt;boost::_bi::value&lt;gazebo::physics::World*&gt; &gt;::operator()&lt;boost::_mfi::mf0&lt;void, gazebo::physics::World&gt;, boost::_bi::list0&gt; (this=0xcf74d8, f=..., a=...) at /usr/include/boost/bind/bind.hpp:253\n#18 0x00007ffff7111c99 in boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, gazebo::physics::World&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;gazebo::physics::World*&gt; &gt; &gt;::operator() (this=0xcf74c8) at /usr/include/boost/bind/bind_template.hpp:20\n#19 0x00007ffff7114a2e in boost::detail::thread_data&lt;boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, gazebo::physics::World&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;gazebo::physics::World*&gt; &gt; &gt; &gt;::run (this=0xcf7340)\n    at /usr/include/boost/thread/detail/thread.hpp:61\n#20 0x00007ffff5d42ce9 in thread_proxy ()\n   from /usr/lib/libboost_thread.so.1.46.1\n#21 0x00007ffff6676e9a in start_thread (arg=0x7fffbaffd700)\n    at pthread_create.c:308\n#22 0x00007ffff50ebcbd in clone ()\n    at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\n#23 0x0000000000000000 in ?? ()\n(gdb) \n</pre></div>", "type": "rendered"}, "created_on": "2012-12-14T17:33:34.376006+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2012-12-14T17:33:34.383979+00:00", "type": "pullrequest_comment", "id": 64299}