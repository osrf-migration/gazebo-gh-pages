{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/936/comments/1160859.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/936/_/diff#comment-1160859"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 936, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/936.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/936"}}, "title": "Fix noise test - take 2"}, "content": {"raw": "Consider this a reply to the thread above:\n\nI didn't understand @nkoenig 's perspective until I read this:\n\n`Noise` should not be used directly since it doesn't know what type of noise to generate. The factory should always be used.\n\nI was confused by that since the pull request that introduced the NoiseFactory didn't replace all instantiations of the Noise class. For example, the [GpsSensor constructor creates Noise classes directly](#!/osrf/gazebo/src/1c4756ad10093433cf103cc650f11cf026216d85/gazebo/sensors/GpsSensor.cc?at=default#cl-33):\n~~~\nthis->horizontalPositionNoise = NoisePtr(new Noise());\n~~~\nThe noise is then populated in [GpsSensor::Load](#!/osrf/gazebo/src/1c4756ad10093433cf103cc650f11cf026216d85/gazebo/sensors/GpsSensor.cc?at=default#cl-58):\n~~~\nthis->horizontalPositionNoise->Load(\n      posElem->GetElement(\"horizontal\")->GetElement(\"noise\"));\n~~~\n\nSince this wasn't changed in that pull request, I assumed that both methods were valid options. If only the factory is the right way, that's fine. I just hadn't realized that.", "markup": "markdown", "html": "<p>Consider this a reply to the thread above:</p>\n<p>I didn't understand @nkoenig 's perspective until I read this:</p>\n<p><code>Noise</code> should not be used directly since it doesn't know what type of noise to generate. The factory should always be used.</p>\n<p>I was confused by that since the pull request that introduced the NoiseFactory didn't replace all instantiations of the Noise class. For example, the <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/1c4756ad10093433cf103cc650f11cf026216d85/gazebo/sensors/GpsSensor.cc?at=default#cl-33\" rel=\"nofollow\">GpsSensor constructor creates Noise classes directly</a>:</p>\n<div class=\"codehilite\"><pre><span></span>this-&gt;horizontalPositionNoise = NoisePtr(new Noise());\n</pre></div>\n\n\n<p>The noise is then populated in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/1c4756ad10093433cf103cc650f11cf026216d85/gazebo/sensors/GpsSensor.cc?at=default#cl-58\" rel=\"nofollow\">GpsSensor::Load</a>:</p>\n<div class=\"codehilite\"><pre><span></span>this-&gt;horizontalPositionNoise-&gt;Load(\n      posElem-&gt;GetElement(&quot;horizontal&quot;)-&gt;GetElement(&quot;noise&quot;));\n</pre></div>\n\n\n<p>Since this wasn't changed in that pull request, I assumed that both methods were valid options. If only the factory is the right way, that's fine. I just hadn't realized that.</p>", "type": "rendered"}, "created_on": "2014-02-01T22:22:22.187379+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-02-01T22:22:55.459798+00:00", "type": "pullrequest_comment", "id": 1160859}