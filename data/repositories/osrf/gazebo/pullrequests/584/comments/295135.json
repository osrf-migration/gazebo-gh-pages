{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/584/comments/295135.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/584/_/diff#comment-295135"}}, "parent": {"id": 295097, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/584/comments/295097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/584/_/diff#comment-295097"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 584, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/584.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/584"}}, "title": "Limit the size of the transport buffers"}, "content": {"raw": "I just got a seg-fault during teardown:\n~~~\nCore was generated by `gazebo/physics/ode/ODEPhysics_TEST'.\nProgram terminated with signal 11, Segmentation fault.\n#0  0x0000000002345160 in ?? ()\n(gdb) bt\n#0  0x0000000002345160 in ?? ()\n#1  0x00007f5927234948 in clear (functor=..., this=<optimized out>)\n    at /usr/include/boost/function/function_template.hpp:504\n#2  clear (this=0x2348178)\n    at /usr/include/boost/function/function_template.hpp:856\n#3  ~function1 (this=0x2348178, __in_chrg=<optimized out>)\n    at /usr/include/boost/function/function_template.hpp:752\n#4  ~function (this=0x2348178, __in_chrg=<optimized out>)\n    at /usr/include/boost/function/function_template.hpp:1043\n#5  ~pair (this=0x2348178, __in_chrg=<optimized out>)\n    at /usr/include/c++/4.6/bits/stl_pair.h:87\n#6  _Destroy<std::pair<boost::function<void(unsigned int)>, unsigned int> > (\n    __pointer=0x2348178) at /usr/include/c++/4.6/bits/stl_construct.h:94\n#7  __destroy<std::pair<boost::function<void(unsigned int)>, unsigned int>*> (\n    __last=<optimized out>, __first=0x2348178)\n    at /usr/include/c++/4.6/bits/stl_construct.h:104\n#8  _Destroy<std::pair<boost::function<void(unsigned int)>, unsigned int>*> (\n    __last=<optimized out>, __first=<optimized out>)\n    at /usr/include/c++/4.6/bits/stl_construct.h:127\n#9  _Destroy<std::pair<boost::function<void(unsigned int)>, unsigned int>*, std::pair<boost::function<void(unsigned int)>, unsigned int> > (\n    __last=<optimized out>, __first=0x2348178)\n    at /usr/include/c++/4.6/bits/stl_construct.h:153\n#10 _M_destroy_data_aux (__last=..., __first=..., this=<optimized out>)\n    at /usr/include/c++/4.6/bits/deque.tcc:797\n#11 std::deque<std::pair<boost::function<void (unsigned int)>, unsigned int>, std::allocator<std::pair<boost::function<void (unsigned int)>, unsigned int> > >::_M_destroy_data(std::_Deque_iterator<std::pair<boost::function<void (unsigned int)>, unsigned int>, std::pair<boost::function<void (unsigned int)>, unsigned int>&, std::pair<boost::function<void (unsigned int)>, unsigned int>*>, std::_Deque_iterator<std::pair<boost::function<void (unsigned int)>, unsigned int>, std::pair<boost::function<void (unsigned int)>, unsigned int>&, std::pair<boost::function<void (unsigned int)>, unsigned int>*>, std::allocator<std::pair<boost::function<void (unsigned int)>, unsigned int> > const&) (__first=..., __last=..., \n    this=<optimized out>) at /usr/include/c++/4.6/bits/stl_deque.h:1816\n#12 0x00007f5927244ed3 in _M_erase_at_end (__pos=..., this=0x7f5906a5ddc8)\n    at /usr/include/c++/4.6/bits/stl_deque.h:1833\n#13 std::deque<std::pair<boost::function<void (unsigned int)>, unsigned int>, std::allocator<std::pair<boost::function<void (unsigned int)>, unsigned int> > >::clear() (this=<optimized out>) at /usr/include/c++/4.6/bits/stl_deque.h:1580\n#14 0x00007f59272371c2 in gazebo::transport::Connection::ProcessWriteQueue (\n    this=0x7f5906a5dd50, _blocking=false)\n    at /home/scpeters/osrf/gazebo3/gazebo/transport/Connection.cc:322\n#15 0x00007f592724c8c8 in gazebo::transport::ConnectionManager::Fini (\n    this=0x672ea0)\n    at /home/scpeters/osrf/gazebo3/gazebo/transport/ConnectionManager.cc:217\n#16 0x00007f5926fe47a0 in gazebo::fini ()\n    at /home/scpeters/osrf/gazebo3/gazebo/gazebo.cc:108\n#17 0x00007f5926fcb1e3 in gazebo::Server::Fini (this=0x7f59043b7540)\n    at /home/scpeters/osrf/gazebo3/gazebo/Server.cc:418\n#18 0x0000000000431649 in ServerFixture::RunServer (this=0x23486c0, \n    _worldFilename=..., _paused=false, _physics=...)\n    at /home/scpeters/osrf/gazebo3/test/ServerFixture.hh:226\n#19 0x00007f5926889ce9 in thread_proxy ()\n   from /usr/lib/libboost_thread.so.1.46.1\n#20 0x00007f5926d8ce9a in start_thread (arg=0x7f5912456700)\n    at pthread_create.c:308\n#21 0x00007f5925e97cbd in clone ()\n    at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\n#22 0x0000000000000000 in ?? ()\n(gdb) \n~~~\n", "markup": "markdown", "html": "<p>I just got a seg-fault during teardown:</p>\n<div class=\"codehilite\"><pre><span></span>Core was generated by `gazebo/physics/ode/ODEPhysics_TEST&#39;.\nProgram terminated with signal 11, Segmentation fault.\n#0  0x0000000002345160 in ?? ()\n(gdb) bt\n#0  0x0000000002345160 in ?? ()\n#1  0x00007f5927234948 in clear (functor=..., this=&lt;optimized out&gt;)\n    at /usr/include/boost/function/function_template.hpp:504\n#2  clear (this=0x2348178)\n    at /usr/include/boost/function/function_template.hpp:856\n#3  ~function1 (this=0x2348178, __in_chrg=&lt;optimized out&gt;)\n    at /usr/include/boost/function/function_template.hpp:752\n#4  ~function (this=0x2348178, __in_chrg=&lt;optimized out&gt;)\n    at /usr/include/boost/function/function_template.hpp:1043\n#5  ~pair (this=0x2348178, __in_chrg=&lt;optimized out&gt;)\n    at /usr/include/c++/4.6/bits/stl_pair.h:87\n#6  _Destroy&lt;std::pair&lt;boost::function&lt;void(unsigned int)&gt;, unsigned int&gt; &gt; (\n    __pointer=0x2348178) at /usr/include/c++/4.6/bits/stl_construct.h:94\n#7  __destroy&lt;std::pair&lt;boost::function&lt;void(unsigned int)&gt;, unsigned int&gt;*&gt; (\n    __last=&lt;optimized out&gt;, __first=0x2348178)\n    at /usr/include/c++/4.6/bits/stl_construct.h:104\n#8  _Destroy&lt;std::pair&lt;boost::function&lt;void(unsigned int)&gt;, unsigned int&gt;*&gt; (\n    __last=&lt;optimized out&gt;, __first=&lt;optimized out&gt;)\n    at /usr/include/c++/4.6/bits/stl_construct.h:127\n#9  _Destroy&lt;std::pair&lt;boost::function&lt;void(unsigned int)&gt;, unsigned int&gt;*, std::pair&lt;boost::function&lt;void(unsigned int)&gt;, unsigned int&gt; &gt; (\n    __last=&lt;optimized out&gt;, __first=0x2348178)\n    at /usr/include/c++/4.6/bits/stl_construct.h:153\n#10 _M_destroy_data_aux (__last=..., __first=..., this=&lt;optimized out&gt;)\n    at /usr/include/c++/4.6/bits/deque.tcc:797\n#11 std::deque&lt;std::pair&lt;boost::function&lt;void (unsigned int)&gt;, unsigned int&gt;, std::allocator&lt;std::pair&lt;boost::function&lt;void (unsigned int)&gt;, unsigned int&gt; &gt; &gt;::_M_destroy_data(std::_Deque_iterator&lt;std::pair&lt;boost::function&lt;void (unsigned int)&gt;, unsigned int&gt;, std::pair&lt;boost::function&lt;void (unsigned int)&gt;, unsigned int&gt;&amp;, std::pair&lt;boost::function&lt;void (unsigned int)&gt;, unsigned int&gt;*&gt;, std::_Deque_iterator&lt;std::pair&lt;boost::function&lt;void (unsigned int)&gt;, unsigned int&gt;, std::pair&lt;boost::function&lt;void (unsigned int)&gt;, unsigned int&gt;&amp;, std::pair&lt;boost::function&lt;void (unsigned int)&gt;, unsigned int&gt;*&gt;, std::allocator&lt;std::pair&lt;boost::function&lt;void (unsigned int)&gt;, unsigned int&gt; &gt; const&amp;) (__first=..., __last=..., \n    this=&lt;optimized out&gt;) at /usr/include/c++/4.6/bits/stl_deque.h:1816\n#12 0x00007f5927244ed3 in _M_erase_at_end (__pos=..., this=0x7f5906a5ddc8)\n    at /usr/include/c++/4.6/bits/stl_deque.h:1833\n#13 std::deque&lt;std::pair&lt;boost::function&lt;void (unsigned int)&gt;, unsigned int&gt;, std::allocator&lt;std::pair&lt;boost::function&lt;void (unsigned int)&gt;, unsigned int&gt; &gt; &gt;::clear() (this=&lt;optimized out&gt;) at /usr/include/c++/4.6/bits/stl_deque.h:1580\n#14 0x00007f59272371c2 in gazebo::transport::Connection::ProcessWriteQueue (\n    this=0x7f5906a5dd50, _blocking=false)\n    at /home/scpeters/osrf/gazebo3/gazebo/transport/Connection.cc:322\n#15 0x00007f592724c8c8 in gazebo::transport::ConnectionManager::Fini (\n    this=0x672ea0)\n    at /home/scpeters/osrf/gazebo3/gazebo/transport/ConnectionManager.cc:217\n#16 0x00007f5926fe47a0 in gazebo::fini ()\n    at /home/scpeters/osrf/gazebo3/gazebo/gazebo.cc:108\n#17 0x00007f5926fcb1e3 in gazebo::Server::Fini (this=0x7f59043b7540)\n    at /home/scpeters/osrf/gazebo3/gazebo/Server.cc:418\n#18 0x0000000000431649 in ServerFixture::RunServer (this=0x23486c0, \n    _worldFilename=..., _paused=false, _physics=...)\n    at /home/scpeters/osrf/gazebo3/test/ServerFixture.hh:226\n#19 0x00007f5926889ce9 in thread_proxy ()\n   from /usr/lib/libboost_thread.so.1.46.1\n#20 0x00007f5926d8ce9a in start_thread (arg=0x7f5912456700)\n    at pthread_create.c:308\n#21 0x00007f5925e97cbd in clone ()\n    at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\n#22 0x0000000000000000 in ?? ()\n(gdb) \n</pre></div>", "type": "rendered"}, "created_on": "2013-06-06T17:23:54.713591+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-06-06T17:23:54.725290+00:00", "type": "pullrequest_comment", "id": 295135}