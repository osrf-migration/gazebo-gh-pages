{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/584/comments/293714.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/584/_/diff#comment-293714"}}, "parent": {"id": 293573, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/584/comments/293573.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/584/_/diff#comment-293573"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 584, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/584.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/584"}}, "title": "Limit the size of the transport buffers"}, "content": {"raw": "I got another segfault after running it for 2383.186 sim time seconds on SL, here is the backtrace which we've seen a few times before\n\n```\n#!c++\n\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\nbtCore was generated by `gzserver -s libgazebo_ros_api_plugin.so vrc_task_1.world -q -r --record_encodin'.\nProgram terminated with signal 6, Aborted.\n#0  0x00007faf2aa31425 in raise () from /lib/x86_64-linux-gnu/libc.so.6\n(gdb) bt\n#0  0x00007faf2aa31425 in raise () from /lib/x86_64-linux-gnu/libc.so.6\n#1  0x00007faf2aa34b8b in abort () from /lib/x86_64-linux-gnu/libc.so.6\n#2  0x00007faf2b08769d in __gnu_cxx::__verbose_terminate_handler() ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3  0x00007faf2b085846 in ?? ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4  0x00007faf2b085873 in std::terminate() ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5  0x00007faf2b08596e in __cxa_throw ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6  0x00007faf2b085e4d in operator new(unsigned long) ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#7  0x00007faf2b06ea89 in std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator<char> const&) ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#8  0x00007faf2c00de40 in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string<char*>(char*, char*, std::allocator<char> const&) () from /usr/lib/libprotobuf.so.7\n#9  0x00007faf2b0686b8 in std::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::str() const ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#10 0x00007faf2d351899 in gazebo::util::LogRecord::Log::Update() ()\n   from /usr/lib/libgazebo_util.so.1\n#11 0x00007faf2d352311 in gazebo::util::LogRecord::Update() ()\n   from /usr/lib/libgazebo_util.so.1\n#12 0x00007faf2d352888 in gazebo::util::LogRecord::RunUpdate() ()\n   from /usr/lib/libgazebo_util.so.1\n#13 0x00007faf2b745ce9 in thread_proxy ()\n   from /usr/lib/libboost_thread.so.1.46.1\n#14 0x00007faf2c2ade9a in start_thread ()\n   from /lib/x86_64-linux-gnu/libpthread.so.0\n#15 0x00007faf2aaeeccd in clone () from /lib/x86_64-linux-gnu/libc.so.6\n#16 0x0000000000000000 in ?? ()\n(gdb) \n\n```\nrelevant msgs from /var/log/kern.log\n\n```\n#!c++\ngzserver[6674]: segfault at 18 ip 00007f3b2a9ea90a sp 00007f3b14b8ecf0 error 4 in libgazebo_transport.so.1.8.5[7f3b2a9af000+85000]`\n\ngzserver[12657]: segfault at 0 ip 00007fb8c89fbdb0 sp 00007fff5c2ab528 error 4 in libOgreMain.so.1.7.4[7fb8c8812000+57c000]\n```", "markup": "markdown", "html": "<p>I got another segfault after running it for 2383.186 sim time seconds on SL, here is the backtrace which we've seen a few times before</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"p\">[</span><span class=\"n\">Thread</span> <span class=\"n\">debugging</span> <span class=\"k\">using</span> <span class=\"n\">libthread_db</span> <span class=\"n\">enabled</span><span class=\"p\">]</span>\n<span class=\"n\">Using</span> <span class=\"n\">host</span> <span class=\"n\">libthread_db</span> <span class=\"n\">library</span> <span class=\"s\">&quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;</span><span class=\"p\">.</span>\n<span class=\"n\">btCore</span> <span class=\"n\">was</span> <span class=\"n\">generated</span> <span class=\"n\">by</span> <span class=\"err\">`</span><span class=\"n\">gzserver</span> <span class=\"o\">-</span><span class=\"n\">s</span> <span class=\"n\">libgazebo_ros_api_plugin</span><span class=\"p\">.</span><span class=\"n\">so</span> <span class=\"n\">vrc_task_1</span><span class=\"p\">.</span><span class=\"n\">world</span> <span class=\"o\">-</span><span class=\"n\">q</span> <span class=\"o\">-</span><span class=\"n\">r</span> <span class=\"o\">--</span><span class=\"n\">record_encodin</span><span class=\"err\">&#39;</span><span class=\"p\">.</span>\n<span class=\"n\">Program</span> <span class=\"n\">terminated</span> <span class=\"n\">with</span> <span class=\"n\">signal</span> <span class=\"mi\">6</span><span class=\"p\">,</span> <span class=\"n\">Aborted</span><span class=\"p\">.</span>\n<span class=\"cp\">#0  0x00007faf2aa31425 in raise () from /lib/x86_64-linux-gnu/libc.so.6</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span> <span class=\"n\">bt</span>\n<span class=\"cp\">#0  0x00007faf2aa31425 in raise () from /lib/x86_64-linux-gnu/libc.so.6</span>\n<span class=\"cp\">#1  0x00007faf2aa34b8b in abort () from /lib/x86_64-linux-gnu/libc.so.6</span>\n<span class=\"cp\">#2  0x00007faf2b08769d in __gnu_cxx::__verbose_terminate_handler() ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">libstdc</span><span class=\"o\">++</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.6</span>\n<span class=\"cp\">#3  0x00007faf2b085846 in ?? ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">libstdc</span><span class=\"o\">++</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.6</span>\n<span class=\"cp\">#4  0x00007faf2b085873 in std::terminate() ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">libstdc</span><span class=\"o\">++</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.6</span>\n<span class=\"cp\">#5  0x00007faf2b08596e in __cxa_throw ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">libstdc</span><span class=\"o\">++</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.6</span>\n<span class=\"cp\">#6  0x00007faf2b085e4d in operator new(unsigned long) ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">libstdc</span><span class=\"o\">++</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.6</span>\n<span class=\"cp\">#7  0x00007faf2b06ea89 in std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator&lt;char&gt; const&amp;) ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">libstdc</span><span class=\"o\">++</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.6</span>\n<span class=\"cp\">#8  0x00007faf2c00de40 in std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::basic_string&lt;char*&gt;(char*, char*, std::allocator&lt;char&gt; const&amp;) () from /usr/lib/libprotobuf.so.7</span>\n<span class=\"cp\">#9  0x00007faf2b0686b8 in std::basic_stringbuf&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::str() const ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">libstdc</span><span class=\"o\">++</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.6</span>\n<span class=\"cp\">#10 0x00007faf2d351899 in gazebo::util::LogRecord::Log::Update() ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">libgazebo_util</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.1</span>\n<span class=\"cp\">#11 0x00007faf2d352311 in gazebo::util::LogRecord::Update() ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">libgazebo_util</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.1</span>\n<span class=\"cp\">#12 0x00007faf2d352888 in gazebo::util::LogRecord::RunUpdate() ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">libgazebo_util</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.1</span>\n<span class=\"cp\">#13 0x00007faf2b745ce9 in thread_proxy ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">libboost_thread</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.1.46.1</span>\n<span class=\"cp\">#14 0x00007faf2c2ade9a in start_thread ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">libpthread</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.0</span>\n<span class=\"cp\">#15 0x00007faf2aaeeccd in clone () from /lib/x86_64-linux-gnu/libc.so.6</span>\n<span class=\"cp\">#16 0x0000000000000000 in ?? ()</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span> \n</pre></div>\n\n\n<p>relevant msgs from /var/log/kern.log</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">gzserver</span><span class=\"p\">[</span><span class=\"mi\">6674</span><span class=\"p\">]</span><span class=\"o\">:</span> <span class=\"n\">segfault</span> <span class=\"n\">at</span> <span class=\"mi\">18</span> <span class=\"n\">ip</span> <span class=\"mf\">00007f</span><span class=\"mi\">3</span><span class=\"n\">b2a9ea90a</span> <span class=\"n\">sp</span> <span class=\"mf\">00007f</span><span class=\"mi\">3</span><span class=\"n\">b14b8ecf0</span> <span class=\"n\">error</span> <span class=\"mi\">4</span> <span class=\"n\">in</span> <span class=\"n\">libgazebo_transport</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.1.8.5</span><span class=\"p\">[</span><span class=\"mf\">7f</span><span class=\"mi\">3</span><span class=\"n\">b2a9af000</span><span class=\"o\">+</span><span class=\"mi\">85000</span><span class=\"p\">]</span><span class=\"err\">`</span>\n\n<span class=\"n\">gzserver</span><span class=\"p\">[</span><span class=\"mi\">12657</span><span class=\"p\">]</span><span class=\"o\">:</span> <span class=\"n\">segfault</span> <span class=\"n\">at</span> <span class=\"mi\">0</span> <span class=\"n\">ip</span> <span class=\"mf\">00007f</span><span class=\"n\">b8c89fbdb0</span> <span class=\"n\">sp</span> <span class=\"mf\">00007ff</span><span class=\"n\">f5c2ab528</span> <span class=\"n\">error</span> <span class=\"mi\">4</span> <span class=\"n\">in</span> <span class=\"n\">libOgreMain</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.1.7.4</span><span class=\"p\">[</span><span class=\"mf\">7f</span><span class=\"n\">b8c8812000</span><span class=\"o\">+</span><span class=\"mi\">57</span><span class=\"n\">c000</span><span class=\"p\">]</span>\n</pre></div>", "type": "rendered"}, "created_on": "2013-06-06T04:12:47.215013+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2013-06-06T04:12:47.229720+00:00", "type": "pullrequest_comment", "id": 293714}