{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/972/comments/1430928.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/972/_/diff#comment-1430928"}}, "parent": {"id": 1430733, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/972/comments/1430733.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/972/_/diff#comment-1430733"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 972, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/972.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/972"}}, "title": "New command line tool"}, "content": {"raw": "Tests are looking better; I think the gazebo_models pull request was necessary (though that means our tests are a little brittle).\n\nMore details on the gzserver zombie; I think it happens when `UNIT_gz_TEST` doesn't finish properly. Both Jenkins jobs had a problem with the test, which led to the zombie, and I `Ctrl+C`'d one on my machine to get the zombie. Is there an easy way to mitigate this issue?\n~~~\n213: Test timeout computed to be: 240\n213: [==========] Running 10 tests from 1 test case.\n213: [----------] Global test environment set-up.\n213: [----------] 10 tests from gzTest\n213: [ RUN      ] gzTest.Alive\n213: [       OK ] gzTest.Alive (2113 ms)\n213: [ RUN      ] gzTest.Joint\n213: [Msg] Waiting for master.\n213: [Msg] Connected to gazebo master @ http://127.0.0.1:11345\n213: [Msg] Publicized address: 192.168.1.196\n213: [       OK ] gzTest.Joint (6135 ms)\n213: [ RUN      ] gzTest.Model\n213: [Msg] Waiting for master.\n213: [Msg] Connected to gazebo master @ http://127.0.0.1:11345\n213: [Msg] Publicized address: 192.168.1.196\n213: UNIT_gz_TEST: /usr/include/boost/smart_ptr/shared_ptr.hpp:424: T* boost::shared_ptr<T>::operator->() const [with T = gazebo::transport::Node]: Assertion `px != 0' failed.\n213: \n213/214 Test #213: UNIT_gz_TEST ...................................***Timeout 240.00 sec\n~~~", "markup": "markdown", "html": "<p>Tests are looking better; I think the gazebo_models pull request was necessary (though that means our tests are a little brittle).</p>\n<p>More details on the gzserver zombie; I think it happens when <code>UNIT_gz_TEST</code> doesn't finish properly. Both Jenkins jobs had a problem with the test, which led to the zombie, and I <code>Ctrl+C</code>'d one on my machine to get the zombie. Is there an easy way to mitigate this issue?</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"n\">Test</span> <span class=\"n\">timeout</span> <span class=\"n\">computed</span> <span class=\"n\">to</span> <span class=\"n\">be</span><span class=\"o\">:</span> <span class=\"mi\">240</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[==========]</span> <span class=\"n\">Running</span> <span class=\"mi\">10</span> <span class=\"n\">tests</span> <span class=\"n\">from</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"k\">case</span><span class=\"o\">.</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"n\">Global</span> <span class=\"n\">test</span> <span class=\"n\">environment</span> <span class=\"kd\">set</span><span class=\"o\">-</span><span class=\"n\">up</span><span class=\"o\">.</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"mi\">10</span> <span class=\"n\">tests</span> <span class=\"n\">from</span> <span class=\"n\">gzTest</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[</span> <span class=\"n\">RUN</span>      <span class=\"o\">]</span> <span class=\"n\">gzTest</span><span class=\"o\">.</span><span class=\"na\">Alive</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[</span>       <span class=\"n\">OK</span> <span class=\"o\">]</span> <span class=\"n\">gzTest</span><span class=\"o\">.</span><span class=\"na\">Alive</span> <span class=\"o\">(</span><span class=\"mi\">2113</span> <span class=\"n\">ms</span><span class=\"o\">)</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[</span> <span class=\"n\">RUN</span>      <span class=\"o\">]</span> <span class=\"n\">gzTest</span><span class=\"o\">.</span><span class=\"na\">Joint</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Msg</span><span class=\"o\">]</span> <span class=\"n\">Waiting</span> <span class=\"k\">for</span> <span class=\"n\">master</span><span class=\"o\">.</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Msg</span><span class=\"o\">]</span> <span class=\"n\">Connected</span> <span class=\"n\">to</span> <span class=\"n\">gazebo</span> <span class=\"n\">master</span> <span class=\"err\">@</span> <span class=\"n\">http</span><span class=\"o\">://</span><span class=\"mf\">127.0</span><span class=\"o\">.</span><span class=\"mf\">0.1</span><span class=\"o\">:</span><span class=\"mi\">11345</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Msg</span><span class=\"o\">]</span> <span class=\"n\">Publicized</span> <span class=\"n\">address</span><span class=\"o\">:</span> <span class=\"mf\">192.168</span><span class=\"o\">.</span><span class=\"mf\">1.196</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[</span>       <span class=\"n\">OK</span> <span class=\"o\">]</span> <span class=\"n\">gzTest</span><span class=\"o\">.</span><span class=\"na\">Joint</span> <span class=\"o\">(</span><span class=\"mi\">6135</span> <span class=\"n\">ms</span><span class=\"o\">)</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[</span> <span class=\"n\">RUN</span>      <span class=\"o\">]</span> <span class=\"n\">gzTest</span><span class=\"o\">.</span><span class=\"na\">Model</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Msg</span><span class=\"o\">]</span> <span class=\"n\">Waiting</span> <span class=\"k\">for</span> <span class=\"n\">master</span><span class=\"o\">.</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Msg</span><span class=\"o\">]</span> <span class=\"n\">Connected</span> <span class=\"n\">to</span> <span class=\"n\">gazebo</span> <span class=\"n\">master</span> <span class=\"err\">@</span> <span class=\"n\">http</span><span class=\"o\">://</span><span class=\"mf\">127.0</span><span class=\"o\">.</span><span class=\"mf\">0.1</span><span class=\"o\">:</span><span class=\"mi\">11345</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Msg</span><span class=\"o\">]</span> <span class=\"n\">Publicized</span> <span class=\"n\">address</span><span class=\"o\">:</span> <span class=\"mf\">192.168</span><span class=\"o\">.</span><span class=\"mf\">1.196</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"n\">UNIT_gz_TEST</span><span class=\"o\">:</span> <span class=\"sr\">/usr/include/boost/smart_ptr/s</span><span class=\"n\">hared_ptr</span><span class=\"o\">.</span><span class=\"na\">hpp</span><span class=\"o\">:</span><span class=\"mi\">424</span><span class=\"o\">:</span> <span class=\"n\">T</span><span class=\"o\">*</span> <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;::</span><span class=\"n\">operator</span><span class=\"o\">-&gt;()</span> <span class=\"kd\">const</span> <span class=\"o\">[</span><span class=\"k\">with</span> <span class=\"n\">T</span> <span class=\"o\">=</span> <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Node</span><span class=\"o\">]:</span> <span class=\"n\">Assertion</span> <span class=\"err\">`</span><span class=\"n\">px</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"err\">&#39;</span> <span class=\"n\">failed</span><span class=\"o\">.</span>\n<span class=\"mi\">213</span><span class=\"o\">:</span> \n<span class=\"mi\">213</span><span class=\"o\">/</span><span class=\"mi\">214</span> <span class=\"n\">Test</span> <span class=\"err\">#</span><span class=\"mi\">213</span><span class=\"o\">:</span> <span class=\"n\">UNIT_gz_TEST</span> <span class=\"o\">...................................***</span><span class=\"n\">Timeout</span> <span class=\"mf\">240.00</span> <span class=\"n\">sec</span>\n</pre></div>", "type": "rendered"}, "created_on": "2014-03-14T23:13:57.555792+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-03-14T23:13:57.569001+00:00", "type": "pullrequest_comment", "id": 1430928}