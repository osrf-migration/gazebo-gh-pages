{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5744097.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5744097"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1531, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531"}}, "title": "Respect system cflags when not using USE_UPSTREAM_CFLAGS"}, "content": {"raw": "@hugomatic @scpeters this tries to address the problem with armhf packages not being compiled with any level of optimization.", "markup": "markdown", "html": "<p>@hugomatic @scpeters this tries to address the problem with armhf packages not being compiled with any level of optimization.</p>", "type": "rendered"}, "created_on": "2015-03-18T20:10:09.971270+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2015-03-18T20:10:09.988693+00:00", "type": "pullrequest_comment", "id": 5744097}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5744358.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5744358"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1531, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531"}}, "title": "Respect system cflags when not using USE_UPSTREAM_CFLAGS"}, "content": {"raw": "Looks good to me. I'll test it first though.", "markup": "markdown", "html": "<p>Looks good to me. I'll test it first though.</p>", "type": "rendered"}, "created_on": "2015-03-18T20:25:27.045543+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-18T20:25:27.057887+00:00", "type": "pullrequest_comment", "id": 5744358}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5744371.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5744371"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1531, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531"}}, "title": "Respect system cflags when not using USE_UPSTREAM_CFLAGS"}, "content": {"raw": "Looks good to me, but I don't know how to test that this PR on my machine, (besides checking that gazebo compile normally). Any suggestion?", "markup": "markdown", "html": "<p>Looks good to me, but I don't know how to test that this PR on my machine, (besides checking that gazebo compile normally). Any suggestion?</p>", "type": "rendered"}, "created_on": "2015-03-18T20:25:50.064185+00:00", "user": {"display_name": "Hugo Boyer", "uuid": "{3d87874e-7099-4981-b04f-57f0272faa7d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D"}, "html": {"href": "https://bitbucket.org/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/21198da8539b599e3633017f5f5f8150d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHB-6.png"}}, "nickname": "hugomatic", "type": "user", "account_id": "557058:869c02bb-b246-4cdc-9db3-0064e8add185"}, "updated_on": "2015-03-18T20:25:50.075054+00:00", "type": "pullrequest_comment", "id": 5744371}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5744514.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5744514"}}, "parent": {"id": 5744371, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5744371.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5744371"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1531, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531"}}, "title": "Respect system cflags when not using USE_UPSTREAM_CFLAGS"}, "content": {"raw": "```cmake .. -DUSE_UPSTREAM_CFLAGS=False -DCMAKE_BUILD_TYPE=Release && make -j VERBOSE=1``` you should see -O3 appearing at some point in the compilation lines.", "markup": "markdown", "html": "<p><code>cmake .. -DUSE_UPSTREAM_CFLAGS=False -DCMAKE_BUILD_TYPE=Release &amp;&amp; make -j VERBOSE=1</code> you should see -O3 appearing at some point in the compilation lines.</p>", "type": "rendered"}, "created_on": "2015-03-18T20:32:24.279308+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2015-03-18T20:32:24.286929+00:00", "type": "pullrequest_comment", "id": 5744514}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5744541.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5744541"}}, "parent": {"id": 5744514, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5744514.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5744514"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1531, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531"}}, "title": "Respect system cflags when not using USE_UPSTREAM_CFLAGS"}, "content": {"raw": "It works (I see the O3s), but it compiles without c++11 support and thus the compilation ultimately fails (SignalStats.cc). Is this expected?", "markup": "markdown", "html": "<p>It works (I see the O3s), but it compiles without c++11 support and thus the compilation ultimately fails (SignalStats.cc). Is this expected?</p>", "type": "rendered"}, "created_on": "2015-03-18T20:33:50.723666+00:00", "user": {"display_name": "Hugo Boyer", "uuid": "{3d87874e-7099-4981-b04f-57f0272faa7d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D"}, "html": {"href": "https://bitbucket.org/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/21198da8539b599e3633017f5f5f8150d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHB-6.png"}}, "nickname": "hugomatic", "type": "user", "account_id": "557058:869c02bb-b246-4cdc-9db3-0064e8add185"}, "updated_on": "2015-03-18T20:48:40.694181+00:00", "type": "pullrequest_comment", "id": 5744541}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5745362.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5745362"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1531, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531"}}, "title": "Respect system cflags when not using USE_UPSTREAM_CFLAGS"}, "content": {"raw": "Can you show how to reproduce the problem on the `gazebo5` branch? I tried the following:\n~~~\n$ hg up gazebo5\n$ mkdir build\n$ cd build\n$ cmake .. -DUSE_UPSTREAM_CFLAGS=False -DCMAKE_BUILD_TYPE=Release\n...\n-- Custom CFlags:  -Wall -Wextra -Wno-long-long -Wno-unused-value -Wno-unused-value -Wno-unused-value -Wno-unused-value -Wfloat-equal -Wshadow -Winit-self -Wswitch-default -Wmissing-include-dirs -pedantic -fvisibility=hidden -fvisibility-inlines-hidden\n-- Build Type: Release\n...\n~~~\nThere are no `-O` flags listed. But if I do:\n~~~\n$ make VERBOSE=1\n~~~\nthen I see `-O3` in the output. What is the failure mode supposed to look like?", "markup": "markdown", "html": "<p>Can you show how to reproduce the problem on the <code>gazebo5</code> branch? I tried the following:</p>\n<div class=\"codehilite\"><pre><span></span>$ hg up gazebo5\n$ mkdir build\n$ <span class=\"nb\">cd</span> build\n$ cmake .. -DUSE_UPSTREAM_CFLAGS<span class=\"o\">=</span>False -DCMAKE_BUILD_TYPE<span class=\"o\">=</span>Release\n...\n-- Custom CFlags:  -Wall -Wextra -Wno-long-long -Wno-unused-value -Wno-unused-value -Wno-unused-value -Wno-unused-value -Wfloat-equal -Wshadow -Winit-self -Wswitch-default -Wmissing-include-dirs -pedantic -fvisibility<span class=\"o\">=</span>hidden -fvisibility-inlines-hidden\n-- Build Type: Release\n...\n</pre></div>\n\n\n<p>There are no <code>-O</code> flags listed. But if I do:</p>\n<div class=\"codehilite\"><pre><span></span>$ make <span class=\"nv\">VERBOSE</span><span class=\"o\">=</span><span class=\"m\">1</span>\n</pre></div>\n\n\n<p>then I see <code>-O3</code> in the output. What is the failure mode supposed to look like?</p>", "type": "rendered"}, "created_on": "2015-03-18T21:08:49.049483+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-18T21:08:49.058710+00:00", "type": "pullrequest_comment", "id": 5745362}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5748747.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5748747"}}, "parent": {"id": 5745362, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5745362.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5745362"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1531, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531"}}, "title": "Respect system cflags when not using USE_UPSTREAM_CFLAGS"}, "content": {"raw": "Ouch ... looking deeper into this, I spoke too fast. It is not really the unset of `CMAKE_CXX_FLAGS` (`CMAKE_C_FLAGS_ALL` is a gazebo internal variable) which is taking optimizations out of the ARM build. What it is really removing the optimization is the overwrite of `DCMAKE_CXX_FLAGS_RELWITHDEBINFO:STRING=\"\"` sent by the rules file when trying to handle SSE flags.\n\nThe problem is not present in debian official package since I've defined [buildsystem=cmake](http://anonscm.debian.org/cgit/debian-science/packages/gazebo.git/tree/debian/rules#n43) which makes the magic of [get the env CPPFLAGS (-O2 -g ...) into CXXFLAGS](https://wiki.debian.org/Hardening#Notes_for_packages_using_CMake) and thus, got used by cmake.\n\nI've modifed the PR to only clean CMAKE_CXX_FLAGS when using our own set.", "markup": "markdown", "html": "<p>Ouch ... looking deeper into this, I spoke too fast. It is not really the unset of <code>CMAKE_CXX_FLAGS</code> (<code>CMAKE_C_FLAGS_ALL</code> is a gazebo internal variable) which is taking optimizations out of the ARM build. What it is really removing the optimization is the overwrite of <code>DCMAKE_CXX_FLAGS_RELWITHDEBINFO:STRING=\"\"</code> sent by the rules file when trying to handle SSE flags.</p>\n<p>The problem is not present in debian official package since I've defined <a data-is-external-link=\"true\" href=\"http://anonscm.debian.org/cgit/debian-science/packages/gazebo.git/tree/debian/rules#n43\" rel=\"nofollow\">buildsystem=cmake</a> which makes the magic of <a data-is-external-link=\"true\" href=\"https://wiki.debian.org/Hardening#Notes_for_packages_using_CMake\" rel=\"nofollow\">get the env CPPFLAGS (-O2 -g ...) into CXXFLAGS</a> and thus, got used by cmake.</p>\n<p>I've modifed the PR to only clean CMAKE_CXX_FLAGS when using our own set.</p>", "type": "rendered"}, "created_on": "2015-03-19T00:47:14.712532+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2015-03-19T00:47:14.721031+00:00", "type": "pullrequest_comment", "id": 5748747}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5752378.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5752378"}}, "parent": {"id": 5748747, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531/comments/5748747.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531/_/diff#comment-5748747"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1531, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1531.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1531"}}, "title": "Respect system cflags when not using USE_UPSTREAM_CFLAGS"}, "content": {"raw": "Thanks, that makes sense now.", "markup": "markdown", "html": "<p>Thanks, that makes sense now.</p>", "type": "rendered"}, "created_on": "2015-03-19T07:47:38.268623+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-03-19T07:47:38.275865+00:00", "type": "pullrequest_comment", "id": 5752378}], "page": 1, "size": 8}