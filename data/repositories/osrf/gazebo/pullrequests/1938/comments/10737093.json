{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1938/comments/10737093.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1938/_/diff#comment-10737093"}}, "parent": {"id": 10692334, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1938/comments/10692334.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1938/_/diff#comment-10692334"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1938, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1938.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1938"}}, "title": "adding Model::CreateJoint method that actually adds the joint to Model::joints member variable."}, "content": {"raw": "appears to be an issue with shared pointers destruction. I am not sure how to fix this properly, but this helps\n~~~\n$ hg diff\ndiff -r 0301bf3f3438 gazebo/physics/World.cc\n--- a/gazebo/physics/World.cc   Fri Oct 09 16:35:56 2015 -0700\n+++ b/gazebo/physics/World.cc   Mon Oct 12 22:52:36 2015 -0700\n@@ -859,7 +859,7 @@\n     this->dataPtr->physicsEngine.reset();\n   }\n\n-  this->dataPtr->models.clear();\n+  // this->dataPtr->models.clear();\n   this->dataPtr->prevStates[0].SetWorld(WorldPtr());\n   this->dataPtr->prevStates[1].SetWorld(WorldPtr());\n~~~", "markup": "markdown", "html": "<p>appears to be an issue with shared pointers destruction. I am not sure how to fix this properly, but this helps</p>\n<div class=\"codehilite\"><pre><span></span>$ hg diff\ndiff -r 0301bf3f3438 gazebo/physics/World.cc\n--- a/gazebo/physics/World.cc   Fri Oct <span class=\"m\">09</span> <span class=\"m\">16</span>:35:56 <span class=\"m\">2015</span> -0700\n+++ b/gazebo/physics/World.cc   Mon Oct <span class=\"m\">12</span> <span class=\"m\">22</span>:52:36 <span class=\"m\">2015</span> -0700\n@@ -859,7 +859,7 @@\n     this-&gt;dataPtr-&gt;physicsEngine.reset<span class=\"o\">()</span><span class=\"p\">;</span>\n   <span class=\"o\">}</span>\n\n-  this-&gt;dataPtr-&gt;models.clear<span class=\"o\">()</span><span class=\"p\">;</span>\n+  // this-&gt;dataPtr-&gt;models.clear<span class=\"o\">()</span><span class=\"p\">;</span>\n   this-&gt;dataPtr-&gt;prevStates<span class=\"o\">[</span><span class=\"m\">0</span><span class=\"o\">]</span>.SetWorld<span class=\"o\">(</span>WorldPtr<span class=\"o\">())</span><span class=\"p\">;</span>\n   this-&gt;dataPtr-&gt;prevStates<span class=\"o\">[</span><span class=\"m\">1</span><span class=\"o\">]</span>.SetWorld<span class=\"o\">(</span>WorldPtr<span class=\"o\">())</span><span class=\"p\">;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2015-10-13T05:53:08.270957+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2015-10-13T05:53:08.284588+00:00", "type": "pullrequest_comment", "id": 10737093}