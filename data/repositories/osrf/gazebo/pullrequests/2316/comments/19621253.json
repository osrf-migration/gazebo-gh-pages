{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2316/comments/19621253.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2316/_/diff#comment-19621253"}}, "parent": {"id": 18587376, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2316/comments/18587376.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2316/_/diff#comment-18587376"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2316, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2316.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2316"}}, "title": "Issue #1959 imu fixes"}, "content": {"raw": "  - I believe @scpeters and [@_jrivero_](https://bitbucket.org/_jrivero_/) are working on making gazebo_ros_pkgs release for gazebo 5 and 7.\n  - [here's a backport of pull request #2339 just in case](#!/osrf/gazebo/branches/compare/issue_1959_gazebo_4.1%0Dgazebo_4.1#diff)\n  - below is a work around for issue #1516\n\n```\n#!c++\n\ndiff -r 55428160771a gazebo/physics/CMakeLists.txt\n--- a/gazebo/physics/CMakeLists.txt\tMon Jun 13 11:52:27 2016 -0700\n+++ b/gazebo/physics/CMakeLists.txt\tMon Jun 13 11:55:28 2016 -0700\n@@ -108,12 +108,13 @@\n configure_file (${CMAKE_CURRENT_SOURCE_DIR}/physics.hh.in\n                 ${CMAKE_CURRENT_BINARY_DIR}/physics.hh)\n \n-gz_add_library(gazebo_physics ${sources})\n+gz_add_library(gazebo_physics STATIC ${sources})\n \n target_link_libraries(gazebo_physics\n   gazebo_common\n   gazebo_util\n   gazebo_physics_ode\n+  gazebo_sensors\n )\n \n if (HAVE_BULLET)\ndiff -r 55428160771a gazebo/physics/ode/CMakeLists.txt\n--- a/gazebo/physics/ode/CMakeLists.txt\tMon Jun 13 11:52:27 2016 -0700\n+++ b/gazebo/physics/ode/CMakeLists.txt\tMon Jun 13 11:55:28 2016 -0700\n@@ -60,8 +60,9 @@\n )\n gz_build_tests(${gtest_sources})\n \n-gz_add_library(gazebo_physics_ode ${headers} ${sources})\n+gz_add_library(gazebo_physics_ode STATIC ${headers} ${sources})\n target_link_libraries(gazebo_physics_ode\n+  gazebo_physics\n   gazebo_ode\n   gazebo_opcode\n   gazebo_math\ndiff -r 55428160771a gazebo/sensors/CMakeLists.txt\n--- a/gazebo/sensors/CMakeLists.txt\tMon Jun 13 11:52:27 2016 -0700\n+++ b/gazebo/sensors/CMakeLists.txt\tMon Jun 13 11:55:28 2016 -0700\n@@ -78,7 +78,7 @@\n configure_file (${CMAKE_CURRENT_SOURCE_DIR}/sensors.hh.in ${CMAKE_CURRENT_BINARY_DIR}/sensors.hh)\n \n \n-add_library(gazebo_sensors SHARED ${sources})\n+add_library(gazebo_sensors STATIC ${sources})\n \n target_link_libraries(gazebo_sensors\n   gazebo_common\n```\n\n\n", "markup": "markdown", "html": "<ul>\n<li>I believe @scpeters and <a data-is-external-link=\"true\" href=\"https://bitbucket.org/_jrivero_/\" rel=\"nofollow\">@<em>jrivero</em></a> are working on making gazebo_ros_pkgs release for gazebo 5 and 7.</li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/branches/compare/issue_1959_gazebo_4.1%0Dgazebo_4.1#diff\" rel=\"nofollow\">here's a backport of pull request #2339 just in case</a></li>\n<li>below is a work around for issue <a href=\"#!/osrf/gazebo/issues/1516/physics-classes-call-sensors-functions\" rel=\"nofollow\" title=\"physics classes call sensors functions\" class=\"ap-connect-link\"><s>#1516</s></a></li>\n</ul>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">diff</span> <span class=\"o\">-</span><span class=\"n\">r</span> <span class=\"mi\">55428160771</span><span class=\"n\">a</span> <span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">physics</span><span class=\"o\">/</span><span class=\"n\">CMakeLists</span><span class=\"p\">.</span><span class=\"n\">txt</span>\n<span class=\"o\">---</span> <span class=\"n\">a</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">physics</span><span class=\"o\">/</span><span class=\"n\">CMakeLists</span><span class=\"p\">.</span><span class=\"n\">txt</span> <span class=\"n\">Mon</span> <span class=\"n\">Jun</span> <span class=\"mi\">13</span> <span class=\"mi\">11</span><span class=\"o\">:</span><span class=\"mi\">52</span><span class=\"o\">:</span><span class=\"mi\">27</span> <span class=\"mi\">2016</span> <span class=\"o\">-</span><span class=\"mo\">0700</span>\n<span class=\"o\">+++</span> <span class=\"n\">b</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">physics</span><span class=\"o\">/</span><span class=\"n\">CMakeLists</span><span class=\"p\">.</span><span class=\"n\">txt</span> <span class=\"n\">Mon</span> <span class=\"n\">Jun</span> <span class=\"mi\">13</span> <span class=\"mi\">11</span><span class=\"o\">:</span><span class=\"mi\">55</span><span class=\"o\">:</span><span class=\"mi\">28</span> <span class=\"mi\">2016</span> <span class=\"o\">-</span><span class=\"mo\">0700</span>\n<span class=\"err\">@@</span> <span class=\"o\">-</span><span class=\"mi\">108</span><span class=\"p\">,</span><span class=\"mi\">12</span> <span class=\"o\">+</span><span class=\"mi\">108</span><span class=\"p\">,</span><span class=\"mi\">13</span> <span class=\"err\">@@</span>\n <span class=\"n\">configure_file</span> <span class=\"p\">(</span><span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">CMAKE_CURRENT_SOURCE_DIR</span><span class=\"p\">}</span><span class=\"o\">/</span><span class=\"n\">physics</span><span class=\"p\">.</span><span class=\"n\">hh</span><span class=\"p\">.</span><span class=\"n\">in</span>\n                 <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">CMAKE_CURRENT_BINARY_DIR</span><span class=\"p\">}</span><span class=\"o\">/</span><span class=\"n\">physics</span><span class=\"p\">.</span><span class=\"n\">hh</span><span class=\"p\">)</span>\n\n<span class=\"o\">-</span><span class=\"n\">gz_add_library</span><span class=\"p\">(</span><span class=\"n\">gazebo_physics</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">sources</span><span class=\"p\">})</span>\n<span class=\"o\">+</span><span class=\"n\">gz_add_library</span><span class=\"p\">(</span><span class=\"n\">gazebo_physics</span> <span class=\"n\">STATIC</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">sources</span><span class=\"p\">})</span>\n\n <span class=\"n\">target_link_libraries</span><span class=\"p\">(</span><span class=\"n\">gazebo_physics</span>\n   <span class=\"n\">gazebo_common</span>\n   <span class=\"n\">gazebo_util</span>\n   <span class=\"n\">gazebo_physics_ode</span>\n<span class=\"o\">+</span>  <span class=\"n\">gazebo_sensors</span>\n <span class=\"p\">)</span>\n\n <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">HAVE_BULLET</span><span class=\"p\">)</span>\n<span class=\"n\">diff</span> <span class=\"o\">-</span><span class=\"n\">r</span> <span class=\"mi\">55428160771</span><span class=\"n\">a</span> <span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">physics</span><span class=\"o\">/</span><span class=\"n\">ode</span><span class=\"o\">/</span><span class=\"n\">CMakeLists</span><span class=\"p\">.</span><span class=\"n\">txt</span>\n<span class=\"o\">---</span> <span class=\"n\">a</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">physics</span><span class=\"o\">/</span><span class=\"n\">ode</span><span class=\"o\">/</span><span class=\"n\">CMakeLists</span><span class=\"p\">.</span><span class=\"n\">txt</span> <span class=\"n\">Mon</span> <span class=\"n\">Jun</span> <span class=\"mi\">13</span> <span class=\"mi\">11</span><span class=\"o\">:</span><span class=\"mi\">52</span><span class=\"o\">:</span><span class=\"mi\">27</span> <span class=\"mi\">2016</span> <span class=\"o\">-</span><span class=\"mo\">0700</span>\n<span class=\"o\">+++</span> <span class=\"n\">b</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">physics</span><span class=\"o\">/</span><span class=\"n\">ode</span><span class=\"o\">/</span><span class=\"n\">CMakeLists</span><span class=\"p\">.</span><span class=\"n\">txt</span> <span class=\"n\">Mon</span> <span class=\"n\">Jun</span> <span class=\"mi\">13</span> <span class=\"mi\">11</span><span class=\"o\">:</span><span class=\"mi\">55</span><span class=\"o\">:</span><span class=\"mi\">28</span> <span class=\"mi\">2016</span> <span class=\"o\">-</span><span class=\"mo\">0700</span>\n<span class=\"err\">@@</span> <span class=\"o\">-</span><span class=\"mi\">60</span><span class=\"p\">,</span><span class=\"mi\">8</span> <span class=\"o\">+</span><span class=\"mi\">60</span><span class=\"p\">,</span><span class=\"mi\">9</span> <span class=\"err\">@@</span>\n <span class=\"p\">)</span>\n <span class=\"n\">gz_build_tests</span><span class=\"p\">(</span><span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">gtest_sources</span><span class=\"p\">})</span>\n\n<span class=\"o\">-</span><span class=\"n\">gz_add_library</span><span class=\"p\">(</span><span class=\"n\">gazebo_physics_ode</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">headers</span><span class=\"p\">}</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">sources</span><span class=\"p\">})</span>\n<span class=\"o\">+</span><span class=\"n\">gz_add_library</span><span class=\"p\">(</span><span class=\"n\">gazebo_physics_ode</span> <span class=\"n\">STATIC</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">headers</span><span class=\"p\">}</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">sources</span><span class=\"p\">})</span>\n <span class=\"n\">target_link_libraries</span><span class=\"p\">(</span><span class=\"n\">gazebo_physics_ode</span>\n<span class=\"o\">+</span>  <span class=\"n\">gazebo_physics</span>\n   <span class=\"n\">gazebo_ode</span>\n   <span class=\"n\">gazebo_opcode</span>\n   <span class=\"n\">gazebo_math</span>\n<span class=\"n\">diff</span> <span class=\"o\">-</span><span class=\"n\">r</span> <span class=\"mi\">55428160771</span><span class=\"n\">a</span> <span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">CMakeLists</span><span class=\"p\">.</span><span class=\"n\">txt</span>\n<span class=\"o\">---</span> <span class=\"n\">a</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">CMakeLists</span><span class=\"p\">.</span><span class=\"n\">txt</span> <span class=\"n\">Mon</span> <span class=\"n\">Jun</span> <span class=\"mi\">13</span> <span class=\"mi\">11</span><span class=\"o\">:</span><span class=\"mi\">52</span><span class=\"o\">:</span><span class=\"mi\">27</span> <span class=\"mi\">2016</span> <span class=\"o\">-</span><span class=\"mo\">0700</span>\n<span class=\"o\">+++</span> <span class=\"n\">b</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">CMakeLists</span><span class=\"p\">.</span><span class=\"n\">txt</span> <span class=\"n\">Mon</span> <span class=\"n\">Jun</span> <span class=\"mi\">13</span> <span class=\"mi\">11</span><span class=\"o\">:</span><span class=\"mi\">55</span><span class=\"o\">:</span><span class=\"mi\">28</span> <span class=\"mi\">2016</span> <span class=\"o\">-</span><span class=\"mo\">0700</span>\n<span class=\"err\">@@</span> <span class=\"o\">-</span><span class=\"mi\">78</span><span class=\"p\">,</span><span class=\"mi\">7</span> <span class=\"o\">+</span><span class=\"mi\">78</span><span class=\"p\">,</span><span class=\"mi\">7</span> <span class=\"err\">@@</span>\n <span class=\"n\">configure_file</span> <span class=\"p\">(</span><span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">CMAKE_CURRENT_SOURCE_DIR</span><span class=\"p\">}</span><span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"p\">.</span><span class=\"n\">hh</span><span class=\"p\">.</span><span class=\"n\">in</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">CMAKE_CURRENT_BINARY_DIR</span><span class=\"p\">}</span><span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"p\">.</span><span class=\"n\">hh</span><span class=\"p\">)</span>\n\n\n<span class=\"o\">-</span><span class=\"n\">add_library</span><span class=\"p\">(</span><span class=\"n\">gazebo_sensors</span> <span class=\"n\">SHARED</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">sources</span><span class=\"p\">})</span>\n<span class=\"o\">+</span><span class=\"n\">add_library</span><span class=\"p\">(</span><span class=\"n\">gazebo_sensors</span> <span class=\"n\">STATIC</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">sources</span><span class=\"p\">})</span>\n\n <span class=\"n\">target_link_libraries</span><span class=\"p\">(</span><span class=\"n\">gazebo_sensors</span>\n   <span class=\"n\">gazebo_common</span>\n</pre></div>", "type": "rendered"}, "created_on": "2016-06-10T17:34:46.462980+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2016-06-13T18:59:07.632913+00:00", "type": "pullrequest_comment", "id": 19621253}