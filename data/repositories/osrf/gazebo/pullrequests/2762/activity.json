{"pagelen": 50, "values": [{"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "562cf6ef3995", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/562cf6ef3995.json"}, "html": {"href": "#!/osrf/gazebo/commits/562cf6ef3995"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "5ff7641e9fef", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/5ff7641e9fef.json"}, "html": {"href": "#!/osrf/gazebo/commits/5ff7641e9fef"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-05-07T07:55:38.874428+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "562cf6ef3995", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/562cf6ef3995.json"}, "html": {"href": "#!/osrf/gazebo/commits/562cf6ef3995"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "5ff7641e9fef", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/5ff7641e9fef.json"}, "html": {"href": "#!/osrf/gazebo/commits/5ff7641e9fef"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-05-07T07:54:31.202793+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"approval": {"date": "2018-05-06T22:28:27.050811+00:00", "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/63465451.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-63465451"}}, "parent": {"id": 63446276, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/63446276.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-63446276"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "this one looks good\n\n* [![Build Status](https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr_any-xenial-amd64-gpu-none&build=889)](https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/889/) https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/889/", "markup": "markdown", "html": "<p>this one looks good</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/889/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr_any-xenial-amd64-gpu-none&amp;build=889\" /></a> <a href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/889/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/889/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2018-05-06T22:28:24.043745+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-05-06T22:28:24.049955+00:00", "type": "pullrequest_comment", "id": 63465451}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/63446276.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-63446276"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "one more build\n\n* [![Build Status](https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr_any-xenial-amd64-gpu-none&build=888)](https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/888/) https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/888/", "markup": "markdown", "html": "<p>one more build</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/888/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr_any-xenial-amd64-gpu-none&amp;build=888\" /></a> <a href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/888/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/888/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2018-05-05T00:48:18.726947+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-05-05T00:48:18.733721+00:00", "type": "pullrequest_comment", "id": 63446276}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "de4206af18d7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/de4206af18d7.json"}, "html": {"href": "#!/osrf/gazebo/commits/de4206af18d7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9a6650ed1fcf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/9a6650ed1fcf.json"}, "html": {"href": "#!/osrf/gazebo/commits/9a6650ed1fcf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-05-05T00:46:00.400283+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "de4206af18d7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/de4206af18d7.json"}, "html": {"href": "#!/osrf/gazebo/commits/de4206af18d7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9a6650ed1fcf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/9a6650ed1fcf.json"}, "html": {"href": "#!/osrf/gazebo/commits/9a6650ed1fcf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-05-05T00:45:58.933474+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/63446249.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-63446249"}}, "parent": {"id": 63445587, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/63445587.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-63445587"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "\n\t\n0346e5f ", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/0346e5f\" rel=\"nofollow\" class=\"ap-connect-link\">0346e5f</a> </p>", "type": "rendered"}, "created_on": "2018-05-05T00:45:33.539559+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-05-05T00:45:33.547985+00:00", "type": "pullrequest_comment", "id": 63446249}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"approval": {"date": "2018-05-05T00:45:33.477908+00:00", "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "de4206af18d7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/de4206af18d7.json"}, "html": {"href": "#!/osrf/gazebo/commits/de4206af18d7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "0346e5fb0858", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0346e5fb0858.json"}, "html": {"href": "#!/osrf/gazebo/commits/0346e5fb0858"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-05-05T00:44:40.041129+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "de4206af18d7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/de4206af18d7.json"}, "html": {"href": "#!/osrf/gazebo/commits/de4206af18d7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "0346e5fb0858", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0346e5fb0858.json"}, "html": {"href": "#!/osrf/gazebo/commits/0346e5fb0858"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-05-05T00:44:35.296990+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/63445587.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-63445587"}}, "parent": {"id": 63445217, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/63445217.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-63445217"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "makes sense. I tried to investigate with valgrind, but couldn't figure it out\n\nlet's disable the test", "markup": "markdown", "html": "<p>makes sense. I tried to investigate with valgrind, but couldn't figure it out</p>\n<p>let's disable the test</p>", "type": "rendered"}, "created_on": "2018-05-05T00:00:35.719189+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-05-05T00:00:35.725367+00:00", "type": "pullrequest_comment", "id": 63445587}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/63445465.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-63445465"}}, "parent": {"id": 63445217, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/63445217.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-63445217"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "I've opened an issue for this: #!/osrf/gazebo/issues/2469/", "markup": "markdown", "html": "<p>I've opened an issue for this: <a href=\"#!/osrf/gazebo/issues/2469/\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/issues/2469/</a></p>", "type": "rendered"}, "created_on": "2018-05-04T23:54:57.447851+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2018-05-04T23:54:57.456211+00:00", "type": "pullrequest_comment", "id": 63445465}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/63445217.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-63445217"}}, "parent": {"id": 62385344, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/62385344.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-62385344"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "I've looked into these test failures, and I think one of the changes that were merged into this PR may have introduced some memory leaks for DARTJoint objects. We probably didn't catch it before this PR, because the test used to be disabled.\n\nBefore the merge, this test was passing on this PR. The test has a segfault if we try to run it for DART on the `default` branch, so it's hard to say exactly where the memory leak may be coming from.\n\nI don't think it makes sense to block this PR on an issue that it revealed but didn't cause. I'd suggest we re-disable the test for DART and open an issue for it.", "markup": "markdown", "html": "<p>I've looked into these test failures, and I think one of the changes that were merged into this PR may have introduced some memory leaks for DARTJoint objects. We probably didn't catch it before this PR, because the test used to be disabled.</p>\n<p>Before the merge, this test was passing on this PR. The test has a segfault if we try to run it for DART on the <code>default</code> branch, so it's hard to say exactly where the memory leak may be coming from.</p>\n<p>I don't think it makes sense to block this PR on an issue that it revealed but didn't cause. I'd suggest we re-disable the test for DART and open an issue for it.</p>", "type": "rendered"}, "created_on": "2018-05-04T23:48:45.590412+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2018-05-04T23:48:45.597295+00:00", "type": "pullrequest_comment", "id": 63445217}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "e08439ebc7ea", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/e08439ebc7ea.json"}, "html": {"href": "#!/osrf/gazebo/commits/e08439ebc7ea"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "15a87f9d0d4f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/15a87f9d0d4f.json"}, "html": {"href": "#!/osrf/gazebo/commits/15a87f9d0d4f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-04-24T06:56:49.771870+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/62387079.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-62387079"}}, "parent": {"id": 62385344, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/62385344.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-62385344"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "homebrew build: [![Build Status](https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr_any-homebrew-amd64&build=1483)](https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1483/) https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1483/", "markup": "markdown", "html": "<p>homebrew build: <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1483/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr_any-homebrew-amd64&amp;build=1483\" /></a> <a href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1483/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1483/</a></p>", "type": "rendered"}, "created_on": "2018-04-24T00:25:10.517436+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-04-24T00:25:10.523665+00:00", "type": "pullrequest_comment", "id": 62387079}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "e08439ebc7ea", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/e08439ebc7ea.json"}, "html": {"href": "#!/osrf/gazebo/commits/e08439ebc7ea"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "ffa92ef279a4", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/ffa92ef279a4.json"}, "html": {"href": "#!/osrf/gazebo/commits/ffa92ef279a4"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-04-24T00:22:01.881385+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/62385344.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-62385344"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "I just resolved conflicts, but there's some test failures now; removing my approval for now\n\n* https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/874/testReport/", "markup": "markdown", "html": "<p>I just resolved conflicts, but there's some test failures now; removing my approval for now</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/874/testReport/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/874/testReport/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2018-04-23T23:40:37.880313+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-04-23T23:40:37.887818+00:00", "type": "pullrequest_comment", "id": 62385344}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "e08439ebc7ea", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/e08439ebc7ea.json"}, "html": {"href": "#!/osrf/gazebo/commits/e08439ebc7ea"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b1d20e53582f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/b1d20e53582f.json"}, "html": {"href": "#!/osrf/gazebo/commits/b1d20e53582f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-04-23T19:05:36.023507+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "e08439ebc7ea", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/e08439ebc7ea.json"}, "html": {"href": "#!/osrf/gazebo/commits/e08439ebc7ea"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b1d20e53582f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/b1d20e53582f.json"}, "html": {"href": "#!/osrf/gazebo/commits/b1d20e53582f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-04-23T19:02:11.438569+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "e08439ebc7ea", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/e08439ebc7ea.json"}, "html": {"href": "#!/osrf/gazebo/commits/e08439ebc7ea"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b1d20e53582f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/b1d20e53582f.json"}, "html": {"href": "#!/osrf/gazebo/commits/b1d20e53582f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-04-23T19:02:06.279161+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "e08439ebc7ea", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/e08439ebc7ea.json"}, "html": {"href": "#!/osrf/gazebo/commits/e08439ebc7ea"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "a2d6979df230", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a2d6979df230.json"}, "html": {"href": "#!/osrf/gazebo/commits/a2d6979df230"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-04-23T18:58:56.697597+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43347947.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43347947"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "one more build:\n\n* https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/43/", "markup": "markdown", "html": "<p>one more build:</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/43/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/43/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2017-08-22T23:39:54.416993+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-22T23:39:54.419642+00:00", "type": "pullrequest_comment", "id": 43347947}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43347322.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43347322"}}, "parent": {"id": 43347134, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43347134.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43347134"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "They are a convenient way to set all the joints together, and I don't think they should cause any problems with the if statements now", "markup": "markdown", "html": "<p>They are a convenient way to set all the joints together, and I don't think they should cause any problems with the if statements now</p>", "type": "rendered"}, "created_on": "2017-08-22T23:22:26.724886+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-22T23:22:26.727120+00:00", "type": "pullrequest_comment", "id": 43347322}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43347134.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43347134"}}, "parent": {"id": 43345148, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43345148.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43345148"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "Thanks. We could deprecate those functions if we don't think they have a purpose.", "markup": "markdown", "html": "<p>Thanks. We could deprecate those functions if we don't think they have a purpose.</p>", "type": "rendered"}, "created_on": "2017-08-22T23:16:28.026368+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-22T23:16:28.028599+00:00", "type": "pullrequest_comment", "id": 43347134}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43345148.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43345148"}}, "parent": {"id": 43344238, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43344238.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43344238"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "Sounds good. I have added them back in 3b96a3f. They are still no longer called in `DARTPhysics::Reset` because I had added code to reset the joint positions in `DARTJoint::Reset`, which works even if the number of joints has changed.", "markup": "markdown", "html": "<p>Sounds good. I have added them back in <a href=\"#!/osrf/gazebo/commits/3b96a3f\" rel=\"nofollow\" class=\"ap-connect-link\">3b96a3f</a>. They are still no longer called in <code>DARTPhysics::Reset</code> because I had added code to reset the joint positions in <code>DARTJoint::Reset</code>, which works even if the number of joints has changed.</p>", "type": "rendered"}, "created_on": "2017-08-22T22:21:51.840014+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-22T22:21:51.842187+00:00", "type": "pullrequest_comment", "id": 43345148}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "1054201b80f7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1054201b80f7.json"}, "html": {"href": "#!/osrf/gazebo/commits/1054201b80f7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "3b96a3f07c76", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/3b96a3f07c76.json"}, "html": {"href": "#!/osrf/gazebo/commits/3b96a3f07c76"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-22T22:18:17.226190+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43344394.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43344394"}}, "parent": {"id": 43344346, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43344346.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43344346"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "thanks!", "markup": "markdown", "html": "<p>thanks!</p>", "type": "rendered"}, "created_on": "2017-08-22T22:05:55.341569+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-22T22:05:55.344049+00:00", "type": "pullrequest_comment", "id": 43344394}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43344346.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43344346"}}, "parent": {"id": 43344319, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43344319.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43344319"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "108e68d", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/108e68d\" rel=\"nofollow\" class=\"ap-connect-link\">108e68d</a></p>", "type": "rendered"}, "created_on": "2017-08-22T22:04:50.837670+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-22T22:04:50.840753+00:00", "type": "pullrequest_comment", "id": 43344346}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43344319.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43344319"}}, "parent": {"id": 43344287, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43344287.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43344287"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "Yes, I just noticed and was changing", "markup": "markdown", "html": "<p>Yes, I just noticed and was changing</p>", "type": "rendered"}, "created_on": "2017-08-22T22:04:19.142159+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-22T22:04:19.144370+00:00", "type": "pullrequest_comment", "id": 43344319}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "1054201b80f7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1054201b80f7.json"}, "html": {"href": "#!/osrf/gazebo/commits/1054201b80f7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "108e68de5dce", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/108e68de5dce.json"}, "html": {"href": "#!/osrf/gazebo/commits/108e68de5dce"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-22T22:04:03.242052+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43344287.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43344287"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "I don't think the helper needs to be virtual", "markup": "markdown", "html": "<p>I don't think the helper needs to be virtual</p>", "type": "rendered"}, "created_on": "2017-08-22T22:03:35.316321+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-22T22:03:35.318807+00:00", "type": "pullrequest_comment", "id": 43344287}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43344238.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43344238"}}, "parent": {"id": 43343254, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43343254.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43343254"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "I would change the asserts to `if` statements and print error messages if the sizes don't match. We could also change this function to return `bool` and return `false` when failing to restore.", "markup": "markdown", "html": "<p>I would change the asserts to <code>if</code> statements and print error messages if the sizes don't match. We could also change this function to return <code>bool</code> and return <code>false</code> when failing to restore.</p>", "type": "rendered"}, "created_on": "2017-08-22T22:02:30.215029+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-22T22:02:30.217235+00:00", "type": "pullrequest_comment", "id": 43344238}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43344213.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43344213"}}, "parent": {"id": 43343251, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43343251.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43343251"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "70f27c1", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/70f27c1\" rel=\"nofollow\" class=\"ap-connect-link\">70f27c1</a></p>", "type": "rendered"}, "created_on": "2017-08-22T22:01:58.930639+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-22T22:01:58.934041+00:00", "type": "pullrequest_comment", "id": 43344213}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "1054201b80f7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1054201b80f7.json"}, "html": {"href": "#!/osrf/gazebo/commits/1054201b80f7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "70f27c1e3dd7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/70f27c1e3dd7.json"}, "html": {"href": "#!/osrf/gazebo/commits/70f27c1e3dd7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-22T22:01:33.670345+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43343254.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43343254"}}, "parent": {"id": 43342786, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43342786.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43342786"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "They assumed a fixed number of DOFs, which is not the case when adding/removing joints. The assertion would fail.", "markup": "markdown", "html": "<p>They assumed a fixed number of DOFs, which is not the case when adding/removing joints. The assertion would fail.</p>", "type": "rendered"}, "created_on": "2017-08-22T21:44:22.044340+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-22T21:44:49.952197+00:00", "type": "pullrequest_comment", "id": 43343254}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43343251.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43343251"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "The `DARTModel::CreateJoint` functions are mostly the same; they differ only by a single line (`auto joint = ...`). Do you mind moving the shared code to a private function called `DARTModel::CreateJointHelper` (or something)?", "markup": "markdown", "html": "<p>The <code>DARTModel::CreateJoint</code> functions are mostly the same; they differ only by a single line (<code>auto joint = ...</code>). Do you mind moving the shared code to a private function called <code>DARTModel::CreateJointHelper</code> (or something)?</p>", "type": "rendered"}, "created_on": "2017-08-22T21:44:19.350423+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-22T21:44:19.353841+00:00", "type": "pullrequest_comment", "id": 43343251}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43342786.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43342786"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "Why are you removing `DARTModel::BackupState` and `DARTModel::RestoreState`?", "markup": "markdown", "html": "<p>Why are you removing <code>DARTModel::BackupState</code> and <code>DARTModel::RestoreState</code>?</p>", "type": "rendered"}, "created_on": "2017-08-22T21:35:40.524848+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-22T21:35:40.528414+00:00", "type": "pullrequest_comment", "id": 43342786}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43257536.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43257536"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "diff without whitespace:\n\n* #!/osrf/gazebo/pull-requests/2762/dart-harness/diff?w=1", "markup": "markdown", "html": "<p>diff without whitespace:</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/pull-requests/2762/dart-harness/diff?w=1\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/pull-requests/2762/dart-harness/diff?w=1</a></li>\n</ul>", "type": "rendered"}, "created_on": "2017-08-22T04:28:00.553464+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-22T04:28:00.555912+00:00", "type": "pullrequest_comment", "id": 43257536}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43247104.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43247104"}}, "parent": {"id": 43246758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43246758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43246758"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "* https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/42/", "markup": "markdown", "html": "<ul>\n<li><a href=\"https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/42/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/42/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2017-08-21T23:05:03.040376+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-21T23:05:03.042653+00:00", "type": "pullrequest_comment", "id": 43247104}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43246758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43246758"}}, "parent": {"id": 43245471, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43245471.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43245471"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "Thanks! Merged in 297ff9e. I modified the test slightly to calculate the expected axis on the fly. I also tested with `axisParentModelFrame` initialized to true and it worked.", "markup": "markdown", "html": "<p>Thanks! Merged in <a href=\"#!/osrf/gazebo/commits/297ff9e\" rel=\"nofollow\" class=\"ap-connect-link\">297ff9e</a>. I modified the test slightly to calculate the expected axis on the fly. I also tested with <code>axisParentModelFrame</code> initialized to true and it worked.</p>", "type": "rendered"}, "created_on": "2017-08-21T22:55:45.907397+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-21T22:55:45.909754+00:00", "type": "pullrequest_comment", "id": 43246758}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "1054201b80f7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1054201b80f7.json"}, "html": {"href": "#!/osrf/gazebo/commits/1054201b80f7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "297ff9ec8563", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/297ff9ec8563.json"}, "html": {"href": "#!/osrf/gazebo/commits/297ff9ec8563"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-21T22:53:45.640468+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43245471.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43245471"}}, "parent": {"id": 43231932, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43231932.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43231932"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "take a look at branch `dart_harness_scpeters`:\n\n* e3d175927a77: add a test for GlobalAxis to tests that detach and re-attach the harness\n* 11a1a0e686ea: parse the joint sdf elements before creating a joint\n\nI believe the second commit would also work even without the changes to Joint.cc in dd3c60f, but it doesn't hurt to have both", "markup": "markdown", "html": "<p>take a look at branch <code>dart_harness_scpeters</code>:</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/commits/e3d175927a77\" rel=\"nofollow\" class=\"ap-connect-link\">e3d175927a77</a>: add a test for GlobalAxis to tests that detach and re-attach the harness</li>\n<li><a href=\"#!/osrf/gazebo/commits/11a1a0e686ea\" rel=\"nofollow\" class=\"ap-connect-link\">11a1a0e686ea</a>: parse the joint sdf elements before creating a joint</li>\n</ul>\n<p>I believe the second commit would also work even without the changes to Joint.cc in <a href=\"#!/osrf/gazebo/commits/dd3c60f\" rel=\"nofollow\" class=\"ap-connect-link\">dd3c60f</a>, but it doesn't hurt to have both</p>", "type": "rendered"}, "created_on": "2017-08-21T22:22:25.073100+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-21T22:22:25.075289+00:00", "type": "pullrequest_comment", "id": 43245471}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43231932.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43231932"}}, "parent": {"id": 43141022, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43141022.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43141022"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "I thought about this problem a little more over the weekend, and I think this happens because we don't pass the sdf string through the joint.sdf parser, so it doesn't add the required parameters.\n\nIt would also be nice to check the GlobalAxis of the joint in the harness test.\n\nI'll suggest patches for these changes.", "markup": "markdown", "html": "<p>I thought about this problem a little more over the weekend, and I think this happens because we don't pass the sdf string through the joint.sdf parser, so it doesn't add the required parameters.</p>\n<p>It would also be nice to check the GlobalAxis of the joint in the harness test.</p>\n<p>I'll suggest patches for these changes.</p>", "type": "rendered"}, "created_on": "2017-08-21T18:19:43.376421+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-21T18:19:43.379817+00:00", "type": "pullrequest_comment", "id": 43231932}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43146261.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43146261"}}, "parent": {"id": 43146238, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43146238.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43146238"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "queued another build\n\n* https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/41/", "markup": "markdown", "html": "<p>queued another build</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/41/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/41/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2017-08-19T00:46:06.614160+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-19T00:46:06.616569+00:00", "type": "pullrequest_comment", "id": 43146261}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43146238.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43146238"}}, "parent": {"id": 43141022, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43141022.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43141022"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "I made the change in dd3c60f. For some reason the DART joint had an [extra transform](#!/osrf/gazebo/src/1054201b80f7768d4f163a73df137a7ecc9e2e3e/gazebo/physics/dart/DARTSliderJoint.cc?at=default&fileviewer=file-view-default#DARTSliderJoint.cc-116) that effectively reversed the model frame (i.e. if axisParentModelFrame was true it used the joint frame and if axixParentModelFrame was false it used the model frame). So, I fixed that as well.", "markup": "markdown", "html": "<p>I made the change in <a href=\"#!/osrf/gazebo/commits/dd3c60f\" rel=\"nofollow\" class=\"ap-connect-link\">dd3c60f</a>. For some reason the DART joint had an <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/1054201b80f7768d4f163a73df137a7ecc9e2e3e/gazebo/physics/dart/DARTSliderJoint.cc?at=default&amp;fileviewer=file-view-default#DARTSliderJoint.cc-116\" rel=\"nofollow\">extra transform</a> that effectively reversed the model frame (i.e. if axisParentModelFrame was true it used the joint frame and if axixParentModelFrame was false it used the model frame). So, I fixed that as well.</p>", "type": "rendered"}, "created_on": "2017-08-19T00:44:29.726521+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-19T00:44:29.729139+00:00", "type": "pullrequest_comment", "id": 43146238}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"update": {"description": "This pull request adds the ability to create joints with `Model::CreateJoint` while using DART physics (see issue #903). It implements joint creation using \"loop\" joints since DART does not support multiple parent joints for a single BodyNode. More specifically, when `CreateJoint` is called a new DART joint *and* BodyNode are added to the skeleton and the BodyNode is then welded to the child link as a slave body. Thus the child link behaves as if it were attached to the new joint. The pull request also supports removing loop joints though not other joints.\r\n\r\nThe added functionality is sufficient to use the harness plugin with DART, so the `harness.cc` integration tests are enabled for DART. Some of the tests in `joint_test.cc` are also enabled although `JointCreationDestructionTest` tends to fail.\r\n\r\n* b3ebe59 makes `Model::CreateJoint` and `Model::RemoveJoint` virtual and overrides them in the `DARTModel` class. 578f1ea actually adds the logic for the `DARTModel` versions of the functions and modifies the `DARTLink` class to keep track of the weld constraints for loop joints as well as slave BodyNodes so that they can be removed later if desired. The code to create loop joints already exists from pull request #2756. However, since `CreateJoint` may be called after the model, joints, etc. have been initialized, it may need to redistribute the mass of the child link with the new slave BodyNode (5496129) and initialize the new joint to achieve the correct weld pose (926045c).\r\n\r\n* 9241cb6 changes how DART joint positions are reset to handle changing numbers of joints after model initialization. Formerly `DARTModel` assumed a fixed number of DOF. Now the joint positions are reset individually within `DARTJoint::Reset`.\r\n\r\n* 8e89ccb moves the allocations of DART joint properties to the joint class constructors since `DARTJoint::Load` is not called if `CreateJoint(name, type, parent, child)` is used to create a joint instead of `CreateJoint(sdf_elem)`. The former call caused segfaults without this change.\r\n\r\n* bb2147b and fd8e271 basically cancel each other out.\r\n\r\nNote: I tested this pull request with pull request #2697, which supports harness re-attaching, and the harness integration tests worked.", "title": "Dart harness", "destination": {"commit": {"hash": "1054201b80f7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1054201b80f7.json"}, "html": {"href": "#!/osrf/gazebo/commits/1054201b80f7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "dd3c60f2a6a8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/dd3c60f2a6a8.json"}, "html": {"href": "#!/osrf/gazebo/commits/dd3c60f2a6a8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "dart_harness"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-19T00:40:03.123174+00:00"}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43143332.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43143332"}}, "parent": {"id": 43141045, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43141045.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43141045"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "~~But what about [this comment](#!/osrf/gazebo/src/91c16588e936649670e66909ae05ba344e94126d/gazebo/physics/Joint.cc?fileviewer=file-view-default#Joint.cc-153)?~~", "markup": "markdown", "html": "<p><del>But what about <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/91c16588e936649670e66909ae05ba344e94126d/gazebo/physics/Joint.cc?fileviewer=file-view-default#Joint.cc-153\" rel=\"nofollow\">this comment</a>?</del></p>", "type": "rendered"}, "created_on": "2017-08-18T22:05:39.943517+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-18T22:23:51.489208+00:00", "type": "pullrequest_comment", "id": 43143332}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43143871.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43143871"}}, "parent": {"id": 43143332, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43143332.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43143332"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "Also, false would be consistent [with sdformat](https://bitbucket.org/osrf/sdformat/src/06eff281aba7a67a75f046578b925e3ca57ef4bc/sdf/1.5/joint.sdf?at=default&fileviewer=file-view-default#joint.sdf-54).", "markup": "markdown", "html": "<p>Also, false would be consistent <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/sdformat/src/06eff281aba7a67a75f046578b925e3ca57ef4bc/sdf/1.5/joint.sdf?at=default&amp;fileviewer=file-view-default#joint.sdf-54\" rel=\"nofollow\">with sdformat</a>.</p>", "type": "rendered"}, "created_on": "2017-08-18T22:23:41.283213+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-18T22:23:41.285693+00:00", "type": "pullrequest_comment", "id": 43143871}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43143436.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43143436"}}, "parent": {"id": 43143332, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762/comments/43143332.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762/_/diff#comment-43143332"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}, "content": {"raw": "Although it seems inconsistent with the comment in pull request #963:\n\"Models written in sdf 1.5 without the use_parent_model_frame tag will be given a default value of false (better behavior). So we will need to communicate this change to our users writing new models, but old models will still work.\"", "markup": "markdown", "html": "<p>Although it seems inconsistent with the comment in <a href=\"#!/osrf/gazebo/pull-requests/963/fix-joint-axis-frames-494\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #963</a>:\n\"Models written in sdf 1.5 without the use_parent_model_frame tag will be given a default value of false (better behavior). So we will need to communicate this change to our users writing new models, but old models will still work.\"</p>", "type": "rendered"}, "created_on": "2017-08-18T22:08:12.499851+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-18T22:08:12.503367+00:00", "type": "pullrequest_comment", "id": 43143436}, "pull_request": {"type": "pullrequest", "id": 2762, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2762"}}, "title": "Dart harness"}}], "next": "data/repositories/osrf/gazebo/pullrequests/2762/activity_ctx=kjUXXHnSz.json"}