{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1969/comments/11759653.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1969/_/diff#comment-11759653"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1969, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1969.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1969"}}, "title": "Publish camera sensor image size even when rendering is not enabled"}, "content": {"raw": "Locally, the test segfaults for me about 40% of the time. Backtrace:\n\n~~~\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7fffdf8a3700 (LWP 29715)]\n0x00007ffff471a8e8 in Ogre::SceneManager::_renderScene(Ogre::Camera*, Ogre::Viewport*, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n(gdb) bt\n#0  0x00007ffff471a8e8 in Ogre::SceneManager::_renderScene(Ogre::Camera*, Ogre::Viewport*, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#1  0x00007ffff458f831 in Ogre::Camera::_renderScene(Ogre::Viewport*, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#2  0x00007ffff46df0de in Ogre::RenderTarget::_updateViewport(Ogre::Viewport*, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#3  0x00007ffff46df09b in Ogre::RenderTarget::_updateAutoUpdatedViewports(bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#4  0x00007ffff46deb3e in Ogre::RenderTarget::updateImpl() ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#5  0x00007ffff46df244 in Ogre::RenderTarget::update(bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#6  0x00007ffff6f0242c in gazebo::rendering::Camera::Render (this=0x7fffd8a2ecc0, \n    _force=_force@entry=false) at /home/louise/code/gazeboB/gazebo/rendering/Camera.cc:406\n#7  0x00007ffff7b4a217 in gazebo::sensors::CameraSensor::Render (this=0x7fffd9179bf0)\n    at /home/louise/code/gazeboB/gazebo/sensors/CameraSensor.cc:187\n#8  0x00007ffff7b7f9a5 in operator() (this=<optimized out>)\n    at /usr/include/boost/function/function_template.hpp:767\n#9  gazebo::event::EventT<void ()>::Signal() (this=0x7ffff68036c0 <gazebo::event::Events::render>)\n    at /home/louise/code/gazeboB/gazebo/common/Event.hh:365\n#10 0x00007ffff7b84763 in operator() (this=<optimized out>)\n    at /home/louise/code/gazeboB/gazebo/common/Event.hh:209\n#11 gazebo::sensors::SensorManager::ImageSensorContainer::Update (this=0x7fffd87e9820, \n    _force=<optimized out>) at /home/louise/code/gazeboB/gazebo/sensors/SensorManager.cc:653\n#12 0x00007ffff7b8426f in gazebo::sensors::SensorManager::Update (\n    this=0x673d80 <SingletonT<gazebo::sensors::SensorManager>::GetInstance()::t>, _force=<optimized out>)\n    at /home/louise/code/gazeboB/gazebo/sensors/SensorManager.cc:159\n#13 0x00007ffff78dcc37 in gazebo::Server::Run (this=0x7fffd8000920)\n    at /home/louise/code/gazeboB/gazebo/Server.cc:516\n#14 0x0000000000414c36 in gazebo::ServerFixture::RunServer (this=0x6edee0, _args=...)\n    at /home/louise/code/gazeboB/gazebo/test/ServerFixture.cc:263\n#15 0x00007ffff5b14a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#16 0x00007ffff727f182 in start_thread (arg=0x7fffdf8a3700) at pthread_create.c:312\n#17 0x00007ffff4c0447d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n~~~", "markup": "markdown", "html": "<p>Locally, the test segfaults for me about 40% of the time. Backtrace:</p>\n<div class=\"codehilite\"><pre><span></span>Program received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7fffdf8a3700 (LWP 29715)]\n0x00007ffff471a8e8 in Ogre::SceneManager::_renderScene(Ogre::Camera*, Ogre::Viewport*, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n(gdb) bt\n#0  0x00007ffff471a8e8 in Ogre::SceneManager::_renderScene(Ogre::Camera*, Ogre::Viewport*, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#1  0x00007ffff458f831 in Ogre::Camera::_renderScene(Ogre::Viewport*, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#2  0x00007ffff46df0de in Ogre::RenderTarget::_updateViewport(Ogre::Viewport*, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#3  0x00007ffff46df09b in Ogre::RenderTarget::_updateAutoUpdatedViewports(bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#4  0x00007ffff46deb3e in Ogre::RenderTarget::updateImpl() ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#5  0x00007ffff46df244 in Ogre::RenderTarget::update(bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#6  0x00007ffff6f0242c in gazebo::rendering::Camera::Render (this=0x7fffd8a2ecc0, \n    _force=_force@entry=false) at /home/louise/code/gazeboB/gazebo/rendering/Camera.cc:406\n#7  0x00007ffff7b4a217 in gazebo::sensors::CameraSensor::Render (this=0x7fffd9179bf0)\n    at /home/louise/code/gazeboB/gazebo/sensors/CameraSensor.cc:187\n#8  0x00007ffff7b7f9a5 in operator() (this=&lt;optimized out&gt;)\n    at /usr/include/boost/function/function_template.hpp:767\n#9  gazebo::event::EventT&lt;void ()&gt;::Signal() (this=0x7ffff68036c0 &lt;gazebo::event::Events::render&gt;)\n    at /home/louise/code/gazeboB/gazebo/common/Event.hh:365\n#10 0x00007ffff7b84763 in operator() (this=&lt;optimized out&gt;)\n    at /home/louise/code/gazeboB/gazebo/common/Event.hh:209\n#11 gazebo::sensors::SensorManager::ImageSensorContainer::Update (this=0x7fffd87e9820, \n    _force=&lt;optimized out&gt;) at /home/louise/code/gazeboB/gazebo/sensors/SensorManager.cc:653\n#12 0x00007ffff7b8426f in gazebo::sensors::SensorManager::Update (\n    this=0x673d80 &lt;SingletonT&lt;gazebo::sensors::SensorManager&gt;::GetInstance()::t&gt;, _force=&lt;optimized out&gt;)\n    at /home/louise/code/gazeboB/gazebo/sensors/SensorManager.cc:159\n#13 0x00007ffff78dcc37 in gazebo::Server::Run (this=0x7fffd8000920)\n    at /home/louise/code/gazeboB/gazebo/Server.cc:516\n#14 0x0000000000414c36 in gazebo::ServerFixture::RunServer (this=0x6edee0, _args=...)\n    at /home/louise/code/gazeboB/gazebo/test/ServerFixture.cc:263\n#15 0x00007ffff5b14a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#16 0x00007ffff727f182 in start_thread (arg=0x7fffdf8a3700) at pthread_create.c:312\n#17 0x00007ffff4c0447d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n</pre></div>", "type": "rendered"}, "created_on": "2015-11-12T23:05:30.989212+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2015-11-12T23:06:00.391842+00:00", "type": "pullrequest_comment", "id": 11759653}