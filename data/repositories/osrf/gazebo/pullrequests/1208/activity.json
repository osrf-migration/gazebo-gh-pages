{"pagelen": 50, "values": [{"update": {"description": "Based on the `arat.world` from pull request #1205, I've created a world plugin called ~~ARATPlugin~~ ArrangePlugin. Here's an example of the sdf parameters that it accepts:\r\n~~~\r\n<plugin name=\"arrange_plugin\" filename=\"libArrangePlugin.so\">\r\n  <model_name>cricket_ball</model_name>\r\n  <model_name>wood_block_10_2_1cm</model_name>\r\n  <model_name>wood_cube_10cm</model_name>\r\n  <model_name>wood_cube_7_5cm</model_name>\r\n  <model_name>wood_cube_5cm</model_name>\r\n  <model_name>wood_cube_2_5cm</model_name>\r\n  <initial_arrangement>wood_blocks</initial_arrangement>\r\n  <arrangement name=\"default\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"cricket_ball\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"wood_blocks\">\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n</plugin>\r\n~~~\r\n\r\nFirst, it accepts a sequence of `model_name` elements, with the names of models that should be arranged. The plugin stores the initial pose of these models internally.\r\n\r\nIt also accepts a sequence of `arrangement` elements that have a name attribute (for arrangement name) and child `pose` elements. The child pose elements have a model attribute that should match one of the `model_name` tags, and then pose data. Note that an arrangement doesn't require all poses to be listed (this will be explained below).\r\n\r\nThere is also an `initial_arrangement` element that should match one of the task names.\r\n\r\nThere is a `ArrangePlugin::SetArrangement` API to switch between tasks (eventually it will listen to a gzstring topic). This function does the following:\r\n\r\n* Iterate through all the models listed in the `model_name` tags.\r\n    * If a given model has a `pose` tag defined under the specified task, then reset the pose of that model using the arrangement-specific pose.\r\n    * If the given model doesn't have a `pose` tag specified, then reset the pose of that model to its initial pose.\r\n\r\nTo illustrate how this might be used, I moved the initial pose of all the objects from the table to 250 meters away (`y=-0.25` -> `y=250`). Then if you set `cricket_ball` as the initial arrangement, it will only put the cricket ball on the table. If you set `wood_blocks` as the initial arrangement, it will put the wood blocks on the table but leave the cricket ball far away.\r\n\r\nThe nice thing is that you can change the arrangements by modifying the plugin xml tags without recompiling the plugin. ~~It's actually kind of a general plugin. Should we give it a more general name than `ARATPlugin`?~~ It has been renamed to ArrangePlugin.\r\n\r\nI also added a `Model::ResetPhysicsStates` API to call `Link::ResetPhysicsStates` for each link in a model. This will reset the velocities to zero and is called whenever we change the pose of an object.", "title": "Add ArrangePlugin to arrange models for tasks", "destination": {"commit": {"hash": "e5db0f013bdc", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/e5db0f013bdc.json"}, "html": {"href": "#!/osrf/gazebo/commits/e5db0f013bdc"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo_4.0"}}, "reason": "", "source": {"commit": {"hash": "061ee8d1aebc", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/061ee8d1aebc.json"}, "html": {"href": "#!/osrf/gazebo/commits/061ee8d1aebc"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "arat_plugin"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2014-10-01T00:52:16.633473+00:00"}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3277513.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3277513"}}, "parent": {"id": 3277378, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3277378.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3277378"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Yep, looks like my original build was out of sync.", "markup": "markdown", "html": "<p>Yep, looks like my original build was out of sync.</p>", "type": "rendered"}, "created_on": "2014-10-01T00:51:28.870750+00:00", "user": {"display_name": "Jackie K", "uuid": "{e3d60b62-b7c7-4863-b9b9-cdae9f123cec}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3d60b62-b7c7-4863-b9b9-cdae9f123cec%7D"}, "html": {"href": "https://bitbucket.org/%7Be3d60b62-b7c7-4863-b9b9-cdae9f123cec%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/ea011fa2919d4bd4568b32b440eda779d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJK-0.png"}}, "nickname": "jacquelinekay", "type": "user", "account_id": "557058:f56c822f-f75c-4665-80f9-6e7764893b9c"}, "updated_on": "2014-10-01T00:51:28.878523+00:00", "type": "pullrequest_comment", "id": 3277513}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3277378.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3277378"}}, "parent": {"id": 3276876, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3276876.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3276876"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Thanks, do you mind doing a pull and rebuild? I think this is fixed as of 6063d56", "markup": "markdown", "html": "<p>Thanks, do you mind doing a pull and rebuild? I think this is fixed as of <a href=\"#!/osrf/gazebo/commits/6063d56\" rel=\"nofollow\" class=\"ap-connect-link\">6063d56</a></p>", "type": "rendered"}, "created_on": "2014-10-01T00:33:35.366491+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-10-01T00:33:35.374260+00:00", "type": "pullrequest_comment", "id": 3277378}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3276931.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3276931"}}, "parent": {"id": 3254709, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3254709.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3254709"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "I don't think that we need to PIMPL`ized the plugins.", "markup": "markdown", "html": "<p>I don't think that we need to PIMPL`ized the plugins.</p>", "type": "rendered"}, "created_on": "2014-09-30T23:30:37.078485+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2014-09-30T23:30:37.084734+00:00", "type": "pullrequest_comment", "id": 3276931}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3276876.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3276876"}}, "parent": {"id": 3276808, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3276808.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3276808"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "\n```\n#!xml\n\n<?xml version=\"1.0\" ?>\n<sdf version=\"1.5\">\n  <world name=\"default\">\n    <include>\n      <uri>model://sun</uri>\n    </include>\n\n    <include>\n      <uri>model://ground_plane</uri>\n    </include>\n\n    <plugin name=\"arrange_plugin\" filename=\"libArrangePlugin.so\">\n      <model_name>cricket_ball</model_name>\n      <initial_arrangement>default</initial_arrangement>\n      <arrangement name=\"default\">\n        <pose model=\"cricket_ball\"> 0 0 0 0 0 0</pose>\n      </arrangement>\n\n    </plugin>\n  </world>\n</sdf>\n\n\n```\n", "markup": "markdown", "html": "<div class=\"codehilite language-xml\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>\n<span class=\"nt\">&lt;sdf</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.5&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;world</span> <span class=\"na\">name=</span><span class=\"s\">&quot;default&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;include&gt;</span>\n      <span class=\"nt\">&lt;uri&gt;</span>model://sun<span class=\"nt\">&lt;/uri&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n\n    <span class=\"nt\">&lt;include&gt;</span>\n      <span class=\"nt\">&lt;uri&gt;</span>model://ground_plane<span class=\"nt\">&lt;/uri&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n\n    <span class=\"nt\">&lt;plugin</span> <span class=\"na\">name=</span><span class=\"s\">&quot;arrange_plugin&quot;</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;libArrangePlugin.so&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;model_name&gt;</span>cricket_ball<span class=\"nt\">&lt;/model_name&gt;</span>\n      <span class=\"nt\">&lt;initial_arrangement&gt;</span>default<span class=\"nt\">&lt;/initial_arrangement&gt;</span>\n      <span class=\"nt\">&lt;arrangement</span> <span class=\"na\">name=</span><span class=\"s\">&quot;default&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;pose</span> <span class=\"na\">model=</span><span class=\"s\">&quot;cricket_ball&quot;</span><span class=\"nt\">&gt;</span> 0 0 0 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n      <span class=\"nt\">&lt;/arrangement&gt;</span>\n\n    <span class=\"nt\">&lt;/plugin&gt;</span>\n  <span class=\"nt\">&lt;/world&gt;</span>\n<span class=\"nt\">&lt;/sdf&gt;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2014-09-30T23:23:57.496284+00:00", "user": {"display_name": "Jackie K", "uuid": "{e3d60b62-b7c7-4863-b9b9-cdae9f123cec}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3d60b62-b7c7-4863-b9b9-cdae9f123cec%7D"}, "html": {"href": "https://bitbucket.org/%7Be3d60b62-b7c7-4863-b9b9-cdae9f123cec%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/ea011fa2919d4bd4568b32b440eda779d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJK-0.png"}}, "nickname": "jacquelinekay", "type": "user", "account_id": "557058:f56c822f-f75c-4665-80f9-6e7764893b9c"}, "updated_on": "2014-09-30T23:24:24.511233+00:00", "type": "pullrequest_comment", "id": 3276876}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3276808.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3276808"}}, "parent": {"id": 3276422, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3276422.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3276422"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Can you provide some plugin sdf tags that will reproduce this error? I thought I fixed this problem with 6063d56", "markup": "markdown", "html": "<p>Can you provide some plugin sdf tags that will reproduce this error? I thought I fixed this problem with <a href=\"#!/osrf/gazebo/commits/6063d56\" rel=\"nofollow\" class=\"ap-connect-link\">6063d56</a></p>", "type": "rendered"}, "created_on": "2014-09-30T23:16:58.570735+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-09-30T23:16:58.578293+00:00", "type": "pullrequest_comment", "id": 3276808}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3276422.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3276422"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "I tested this a bit and produced a new arat.world in 1431ab7. I'll create a pull request for that when this one is merged.\n\nMy only complaint is that when I accidentally place an object in the plugin block that hasn't been declared in the world, I get my favorite Boost assertion error:\n\"gzserver: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access<T>::type boost::shared_ptr<T>::operator->() const [with T = gazebo::physics::Model; typename boost::detail::sp_member_access<T>::type = gazebo::physics::Model*]: Assertion `px != 0' failed.\"\n\nIf it's possible to replace this with a more descriptive error message, that would be awesome.", "markup": "markdown", "html": "<p>I tested this a bit and produced a new arat.world in <a href=\"#!/osrf/gazebo/commits/1431ab7\" rel=\"nofollow\" class=\"ap-connect-link\">1431ab7</a>. I'll create a pull request for that when this one is merged.</p>\n<p>My only complaint is that when I accidentally place an object in the plugin block that hasn't been declared in the world, I get my favorite Boost assertion error:\n\"gzserver: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = gazebo::physics::Model; typename boost::detail::sp_member_access&lt;T&gt;::type = gazebo::physics::Model*]: Assertion `px != 0' failed.\"</p>\n<p>If it's possible to replace this with a more descriptive error message, that would be awesome.</p>", "type": "rendered"}, "created_on": "2014-09-30T22:30:19.096504+00:00", "user": {"display_name": "Jackie K", "uuid": "{e3d60b62-b7c7-4863-b9b9-cdae9f123cec}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3d60b62-b7c7-4863-b9b9-cdae9f123cec%7D"}, "html": {"href": "https://bitbucket.org/%7Be3d60b62-b7c7-4863-b9b9-cdae9f123cec%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/ea011fa2919d4bd4568b32b440eda779d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJK-0.png"}}, "nickname": "jacquelinekay", "type": "user", "account_id": "557058:f56c822f-f75c-4665-80f9-6e7764893b9c"}, "updated_on": "2014-09-30T22:30:19.103642+00:00", "type": "pullrequest_comment", "id": 3276422}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"approval": {"date": "2014-09-30T22:24:14.924424+00:00", "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "user": {"display_name": "Jackie K", "uuid": "{e3d60b62-b7c7-4863-b9b9-cdae9f123cec}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3d60b62-b7c7-4863-b9b9-cdae9f123cec%7D"}, "html": {"href": "https://bitbucket.org/%7Be3d60b62-b7c7-4863-b9b9-cdae9f123cec%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/ea011fa2919d4bd4568b32b440eda779d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJK-0.png"}}, "nickname": "jacquelinekay", "type": "user", "account_id": "557058:f56c822f-f75c-4665-80f9-6e7764893b9c"}}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3254709.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3254709"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "@nkoenig does this need to be PIMPL`ized?", "markup": "markdown", "html": "<p>@nkoenig does this need to be PIMPL`ized?</p>", "type": "rendered"}, "created_on": "2014-09-29T17:09:04.515114+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-09-29T17:09:04.533396+00:00", "type": "pullrequest_comment", "id": 3254709}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3239697.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3239697"}}, "parent": {"id": 3205758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3205758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3205758"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "I added a change log entry. I definitely need to write a tutorial, since this could be a pretty useful plugin.", "markup": "markdown", "html": "<p>I added a change log entry. I definitely need to write a tutorial, since this could be a pretty useful plugin.</p>", "type": "rendered"}, "created_on": "2014-09-27T07:37:08.675265+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-09-27T07:37:08.686831+00:00", "type": "pullrequest_comment", "id": 3239697}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3239694.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3239694"}}, "parent": {"id": 3205559, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3205559.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3205559"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Added a change log entry in 061ee8d1aebc", "markup": "markdown", "html": "<p>Added a change log entry in <a href=\"#!/osrf/gazebo/commits/061ee8d1aebc\" rel=\"nofollow\" class=\"ap-connect-link\">061ee8d1aebc</a></p>", "type": "rendered"}, "created_on": "2014-09-27T07:36:21.651537+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-27T07:36:21.659545+00:00", "type": "pullrequest_comment", "id": 3239694}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3239693.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3239693"}}, "parent": {"id": 3205609, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3205609.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3205609"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "added a GZ_ASSERT in 061ee8d1aebc", "markup": "markdown", "html": "<p>added a GZ_ASSERT in <a href=\"#!/osrf/gazebo/commits/061ee8d1aebc\" rel=\"nofollow\" class=\"ap-connect-link\">061ee8d1aebc</a></p>", "type": "rendered"}, "created_on": "2014-09-27T07:36:11.193995+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-27T07:36:11.200648+00:00", "type": "pullrequest_comment", "id": 3239693}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3239691.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3239691"}}, "parent": {"id": 3205638, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3205638.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3205638"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "fixed in 061ee8d1aebc", "markup": "markdown", "html": "<p>fixed in <a href=\"#!/osrf/gazebo/commits/061ee8d1aebc\" rel=\"nofollow\" class=\"ap-connect-link\">061ee8d1aebc</a></p>", "type": "rendered"}, "created_on": "2014-09-27T07:36:00.027036+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-27T07:36:00.034593+00:00", "type": "pullrequest_comment", "id": 3239691}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"update": {"description": "Based on the `arat.world` from pull request #1205, I've created a world plugin called ~~ARATPlugin~~ ArrangePlugin. Here's an example of the sdf parameters that it accepts:\r\n~~~\r\n<plugin name=\"arrange_plugin\" filename=\"libArrangePlugin.so\">\r\n  <model_name>cricket_ball</model_name>\r\n  <model_name>wood_block_10_2_1cm</model_name>\r\n  <model_name>wood_cube_10cm</model_name>\r\n  <model_name>wood_cube_7_5cm</model_name>\r\n  <model_name>wood_cube_5cm</model_name>\r\n  <model_name>wood_cube_2_5cm</model_name>\r\n  <initial_arrangement>wood_blocks</initial_arrangement>\r\n  <arrangement name=\"default\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"cricket_ball\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"wood_blocks\">\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n</plugin>\r\n~~~\r\n\r\nFirst, it accepts a sequence of `model_name` elements, with the names of models that should be arranged. The plugin stores the initial pose of these models internally.\r\n\r\nIt also accepts a sequence of `arrangement` elements that have a name attribute (for arrangement name) and child `pose` elements. The child pose elements have a model attribute that should match one of the `model_name` tags, and then pose data. Note that an arrangement doesn't require all poses to be listed (this will be explained below).\r\n\r\nThere is also an `initial_arrangement` element that should match one of the task names.\r\n\r\nThere is a `ArrangePlugin::SetArrangement` API to switch between tasks (eventually it will listen to a gzstring topic). This function does the following:\r\n\r\n* Iterate through all the models listed in the `model_name` tags.\r\n    * If a given model has a `pose` tag defined under the specified task, then reset the pose of that model using the arrangement-specific pose.\r\n    * If the given model doesn't have a `pose` tag specified, then reset the pose of that model to its initial pose.\r\n\r\nTo illustrate how this might be used, I moved the initial pose of all the objects from the table to 250 meters away (`y=-0.25` -> `y=250`). Then if you set `cricket_ball` as the initial arrangement, it will only put the cricket ball on the table. If you set `wood_blocks` as the initial arrangement, it will put the wood blocks on the table but leave the cricket ball far away.\r\n\r\nThe nice thing is that you can change the arrangements by modifying the plugin xml tags without recompiling the plugin. ~~It's actually kind of a general plugin. Should we give it a more general name than `ARATPlugin`?~~ It has been renamed to ArrangePlugin.\r\n\r\nI also added a `Model::ResetPhysicsStates` API to call `Link::ResetPhysicsStates` for each link in a model. This will reset the velocities to zero and is called whenever we change the pose of an object.", "title": "Add ArrangePlugin to arrange models for tasks", "destination": {"commit": {"hash": "2009c6a05411", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2009c6a05411.json"}, "html": {"href": "#!/osrf/gazebo/commits/2009c6a05411"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo_4.0"}}, "reason": "", "source": {"commit": {"hash": "061ee8d1aebc", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/061ee8d1aebc.json"}, "html": {"href": "#!/osrf/gazebo/commits/061ee8d1aebc"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "arat_plugin"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2014-09-27T07:35:57.393194+00:00"}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3234500.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3234500"}}, "parent": {"id": 3219154, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3219154.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3219154"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "If the method could fail, I would say that it is fine to return a code or throw an exception. Probably we will have to modify the virtual methods to reflect the fact that they could fail. I agree that with the current environment is probably fine as-it now.", "markup": "markdown", "html": "<p>If the method could fail, I would say that it is fine to return a code or throw an exception. Probably we will have to modify the virtual methods to reflect the fact that they could fail. I agree that with the current environment is probably fine as-it now.</p>", "type": "rendered"}, "created_on": "2014-09-26T16:42:01.302333+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2014-09-26T16:42:01.310348+00:00", "type": "pullrequest_comment", "id": 3234500}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3219154.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3219154"}}, "parent": {"id": 3205657, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3205657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3205657"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Init and Reset are virtual methods so I don't think we can change what they return. `SetArrangement` sends its own console message, so perhaps that is enough? Should I made it return void if I'm not checking the return value anywhere?", "markup": "markdown", "html": "<p>Init and Reset are virtual methods so I don't think we can change what they return. <code>SetArrangement</code> sends its own console message, so perhaps that is enough? Should I made it return void if I'm not checking the return value anywhere?</p>", "type": "rendered"}, "created_on": "2014-09-25T17:46:48.348844+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-25T17:46:48.358652+00:00", "type": "pullrequest_comment", "id": 3219154}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3205758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3205758"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Really nice. I was not able to make it to explode modifying the xml, nice check of input parameters.\n\nWe should probably include a note on the Chagelog in this pull request. And for a future work, a tutorial could help users to discover this new and shiny feature.", "markup": "markdown", "html": "<p>Really nice. I was not able to make it to explode modifying the xml, nice check of input parameters.</p>\n<p>We should probably include a note on the Chagelog in this pull request. And for a future work, a tutorial could help users to discover this new and shiny feature.</p>", "type": "rendered"}, "created_on": "2014-09-24T23:43:13.974817+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2014-09-24T23:43:13.982320+00:00", "type": "pullrequest_comment", "id": 3205758}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3205657.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3205657"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Init an Reset functions are calling `SetArrangement()` but the return value from this funcion (bool) is being ignored. Not sure if it would be  a good idea to return it also in the Init and Reset methods.", "markup": "markdown", "html": "<p>Init an Reset functions are calling <code>SetArrangement()</code> but the return value from this funcion (bool) is being ignored. Not sure if it would be  a good idea to return it also in the Init and Reset methods.</p>", "type": "rendered"}, "created_on": "2014-09-24T23:29:49.256318+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2014-09-24T23:29:49.263976+00:00", "type": "pullrequest_comment", "id": 3205657}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3205638.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3205638"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Typo? Initial -> Current?", "markup": "markdown", "html": "<p>Typo? Initial -&gt; Current?</p>", "type": "rendered"}, "created_on": "2014-09-24T23:27:01.010208+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2014-09-24T23:27:01.017932+00:00", "type": "pullrequest_comment", "id": 3205638}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3205609.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3205609"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Checking null for _world and _sdf would be nice.", "markup": "markdown", "html": "<p>Checking null for _world and _sdf would be nice.</p>", "type": "rendered"}, "created_on": "2014-09-24T23:23:42.817543+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2014-09-24T23:23:42.826868+00:00", "type": "pullrequest_comment", "id": 3205609}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3205559.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3205559"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "I know that we stopped adding new methods to Migration.md, but are we adding them to Changelog or any other place?", "markup": "markdown", "html": "<p>I know that we stopped adding new methods to Migration.md, but are we adding them to Changelog or any other place?</p>", "type": "rendered"}, "created_on": "2014-09-24T23:17:45.093481+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2014-09-24T23:17:45.103137+00:00", "type": "pullrequest_comment", "id": 3205559}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"approval": {"date": "2014-09-24T22:25:44.409885+00:00", "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3203536.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3203536"}}, "parent": {"id": 3201533, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3201533.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3201533"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "I made a fix in 6063d56b36b7; use the following to test:\n~~~\ndiff -r 6063d56b36b7 worlds/arat.world\n--- a/worlds/arat.world\tWed Sep 24 13:28:29 2014 -0700\n+++ b/worlds/arat.world\tWed Sep 24 13:28:36 2014 -0700\n@@ -46,6 +46,7 @@\n     </include>\n \n     <plugin name=\"arrange_plugin\" filename=\"libArrangePlugin.so\">\n+      <model_name>fake_model</model_name>\n       <model_name>cricket_ball</model_name>\n       <model_name>wood_block_10_2_1cm</model_name>\n       <model_name>wood_cube_10cm</model_name>\n~~~", "markup": "markdown", "html": "<p>I made a fix in <a href=\"#!/osrf/gazebo/commits/6063d56b36b7\" rel=\"nofollow\" class=\"ap-connect-link\">6063d56b36b7</a>; use the following to test:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 6063d56b36b7 worlds/arat.world</span>\n<span class=\"gd\">--- a/worlds/arat.world Wed Sep 24 13:28:29 2014 -0700</span>\n<span class=\"gi\">+++ b/worlds/arat.world Wed Sep 24 13:28:36 2014 -0700</span>\n<span class=\"gu\">@@ -46,6 +46,7 @@</span>\n     &lt;/include&gt;\n\n     &lt;plugin name=&quot;arrange_plugin&quot; filename=&quot;libArrangePlugin.so&quot;&gt;\n<span class=\"gi\">+      &lt;model_name&gt;fake_model&lt;/model_name&gt;</span>\n       &lt;model_name&gt;cricket_ball&lt;/model_name&gt;\n       &lt;model_name&gt;wood_block_10_2_1cm&lt;/model_name&gt;\n       &lt;model_name&gt;wood_cube_10cm&lt;/model_name&gt;\n</pre></div>", "type": "rendered"}, "created_on": "2014-09-24T20:29:56.204131+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-09-24T20:29:56.210712+00:00", "type": "pullrequest_comment", "id": 3203536}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3203533.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3203533"}}, "parent": {"id": 3201549, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3201549.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3201549"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Fixed in 6063d56b36b7", "markup": "markdown", "html": "<p>Fixed in <a href=\"#!/osrf/gazebo/commits/6063d56b36b7\" rel=\"nofollow\" class=\"ap-connect-link\">6063d56b36b7</a></p>", "type": "rendered"}, "created_on": "2014-09-24T20:29:26.100444+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-24T20:29:26.113288+00:00", "type": "pullrequest_comment", "id": 3203533}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"update": {"description": "Based on the `arat.world` from pull request #1205, I've created a world plugin called ~~ARATPlugin~~ ArrangePlugin. Here's an example of the sdf parameters that it accepts:\r\n~~~\r\n<plugin name=\"arrange_plugin\" filename=\"libArrangePlugin.so\">\r\n  <model_name>cricket_ball</model_name>\r\n  <model_name>wood_block_10_2_1cm</model_name>\r\n  <model_name>wood_cube_10cm</model_name>\r\n  <model_name>wood_cube_7_5cm</model_name>\r\n  <model_name>wood_cube_5cm</model_name>\r\n  <model_name>wood_cube_2_5cm</model_name>\r\n  <initial_arrangement>wood_blocks</initial_arrangement>\r\n  <arrangement name=\"default\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"cricket_ball\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"wood_blocks\">\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n</plugin>\r\n~~~\r\n\r\nFirst, it accepts a sequence of `model_name` elements, with the names of models that should be arranged. The plugin stores the initial pose of these models internally.\r\n\r\nIt also accepts a sequence of `arrangement` elements that have a name attribute (for arrangement name) and child `pose` elements. The child pose elements have a model attribute that should match one of the `model_name` tags, and then pose data. Note that an arrangement doesn't require all poses to be listed (this will be explained below).\r\n\r\nThere is also an `initial_arrangement` element that should match one of the task names.\r\n\r\nThere is a `ArrangePlugin::SetArrangement` API to switch between tasks (eventually it will listen to a gzstring topic). This function does the following:\r\n\r\n* Iterate through all the models listed in the `model_name` tags.\r\n    * If a given model has a `pose` tag defined under the specified task, then reset the pose of that model using the arrangement-specific pose.\r\n    * If the given model doesn't have a `pose` tag specified, then reset the pose of that model to its initial pose.\r\n\r\nTo illustrate how this might be used, I moved the initial pose of all the objects from the table to 250 meters away (`y=-0.25` -> `y=250`). Then if you set `cricket_ball` as the initial arrangement, it will only put the cricket ball on the table. If you set `wood_blocks` as the initial arrangement, it will put the wood blocks on the table but leave the cricket ball far away.\r\n\r\nThe nice thing is that you can change the arrangements by modifying the plugin xml tags without recompiling the plugin. ~~It's actually kind of a general plugin. Should we give it a more general name than `ARATPlugin`?~~ It has been renamed to ArrangePlugin.\r\n\r\nI also added a `Model::ResetPhysicsStates` API to call `Link::ResetPhysicsStates` for each link in a model. This will reset the velocities to zero and is called whenever we change the pose of an object.", "title": "Add ArrangePlugin to arrange models for tasks", "destination": {"commit": {"hash": "849f5488cb4e", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/849f5488cb4e.json"}, "html": {"href": "#!/osrf/gazebo/commits/849f5488cb4e"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo_4.0"}}, "reason": "", "source": {"commit": {"hash": "6063d56b36b7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/6063d56b36b7.json"}, "html": {"href": "#!/osrf/gazebo/commits/6063d56b36b7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "arat_plugin"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2014-09-24T20:29:00.099030+00:00"}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3201549.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3201549"}}, "parent": {"id": 3201403, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3201403.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3201403"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Yeah. That would be good so that Gazebo doesn't crash when a model is bad.", "markup": "markdown", "html": "<p>Yeah. That would be good so that Gazebo doesn't crash when a model is bad.</p>", "type": "rendered"}, "created_on": "2014-09-24T18:26:54.332138+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2014-09-24T18:26:54.340121+00:00", "type": "pullrequest_comment", "id": 3201549}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3201533.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3201533"}}, "parent": {"id": 3201250, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3201250.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3201250"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "The problem was on my end. I had bad models.", "markup": "markdown", "html": "<p>The problem was on my end. I had bad models.</p>", "type": "rendered"}, "created_on": "2014-09-24T18:26:29.388825+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2014-09-24T18:26:29.398640+00:00", "type": "pullrequest_comment", "id": 3201533}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3201403.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3201403"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Maybe I should check `object->model` here to make sure that it has been found properly.", "markup": "markdown", "html": "<p>Maybe I should check <code>object-&gt;model</code> here to make sure that it has been found properly.</p>", "type": "rendered"}, "created_on": "2014-09-24T18:20:50.118642+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-24T18:20:50.127550+00:00", "type": "pullrequest_comment", "id": 3201403}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3201250.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3201250"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "I think there is a problem when the models have not been downloaded from the model repository. I get the following error:\n\n\n```\n#!c++\n\ngzserver: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access<T>::type boost::shared_ptr<T>::operator->() const [with T = gazebo::physics::Model; typename boost::detail::sp_member_access<T>::type = gazebo::physics::Model*]: Assertion `px != 0' failed.\n```\n\nLooking into this more.\n", "markup": "markdown", "html": "<p>I think there is a problem when the models have not been downloaded from the model repository. I get the following error:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"nl\">gzserver</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">boost</span><span class=\"o\">/</span><span class=\"n\">smart_ptr</span><span class=\"o\">/</span><span class=\"n\">shared_ptr</span><span class=\"p\">.</span><span class=\"nl\">hpp</span><span class=\"p\">:</span><span class=\"mi\">653</span><span class=\"o\">:</span> <span class=\"k\">typename</span> <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">detail</span><span class=\"o\">::</span><span class=\"n\">sp_member_access</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;::</span><span class=\"n\">type</span> <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;::</span><span class=\"k\">operator</span><span class=\"o\">-&gt;</span><span class=\"p\">()</span> <span class=\"k\">const</span> <span class=\"p\">[</span><span class=\"n\">with</span> <span class=\"n\">T</span> <span class=\"o\">=</span> <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">physics</span><span class=\"o\">::</span><span class=\"n\">Model</span><span class=\"p\">;</span> <span class=\"k\">typename</span> <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">detail</span><span class=\"o\">::</span><span class=\"n\">sp_member_access</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;::</span><span class=\"n\">type</span> <span class=\"o\">=</span> <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">physics</span><span class=\"o\">::</span><span class=\"n\">Model</span><span class=\"o\">*</span><span class=\"p\">]</span><span class=\"o\">:</span> <span class=\"n\">Assertion</span> <span class=\"err\">`</span><span class=\"n\">px</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"err\">&#39;</span> <span class=\"n\">failed</span><span class=\"p\">.</span>\n</pre></div>\n\n\n<p>Looking into this more.</p>", "type": "rendered"}, "created_on": "2014-09-24T18:11:06.181112+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2014-09-24T18:11:06.190652+00:00", "type": "pullrequest_comment", "id": 3201250}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"update": {"description": "Based on the `arat.world` from pull request #1205, I've created a world plugin called ~~ARATPlugin~~ ArrangePlugin. Here's an example of the sdf parameters that it accepts:\r\n~~~\r\n<plugin name=\"arrange_plugin\" filename=\"libArrangePlugin.so\">\r\n  <model_name>cricket_ball</model_name>\r\n  <model_name>wood_block_10_2_1cm</model_name>\r\n  <model_name>wood_cube_10cm</model_name>\r\n  <model_name>wood_cube_7_5cm</model_name>\r\n  <model_name>wood_cube_5cm</model_name>\r\n  <model_name>wood_cube_2_5cm</model_name>\r\n  <initial_arrangement>wood_blocks</initial_arrangement>\r\n  <arrangement name=\"default\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"cricket_ball\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"wood_blocks\">\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n</plugin>\r\n~~~\r\n\r\nFirst, it accepts a sequence of `model_name` elements, with the names of models that should be arranged. The plugin stores the initial pose of these models internally.\r\n\r\nIt also accepts a sequence of `arrangement` elements that have a name attribute (for arrangement name) and child `pose` elements. The child pose elements have a model attribute that should match one of the `model_name` tags, and then pose data. Note that an arrangement doesn't require all poses to be listed (this will be explained below).\r\n\r\nThere is also an `initial_arrangement` element that should match one of the task names.\r\n\r\nThere is a `ArrangePlugin::SetArrangement` API to switch between tasks (eventually it will listen to a gzstring topic). This function does the following:\r\n\r\n* Iterate through all the models listed in the `model_name` tags.\r\n    * If a given model has a `pose` tag defined under the specified task, then reset the pose of that model using the arrangement-specific pose.\r\n    * If the given model doesn't have a `pose` tag specified, then reset the pose of that model to its initial pose.\r\n\r\nTo illustrate how this might be used, I moved the initial pose of all the objects from the table to 250 meters away (`y=-0.25` -> `y=250`). Then if you set `cricket_ball` as the initial arrangement, it will only put the cricket ball on the table. If you set `wood_blocks` as the initial arrangement, it will put the wood blocks on the table but leave the cricket ball far away.\r\n\r\nThe nice thing is that you can change the arrangements by modifying the plugin xml tags without recompiling the plugin. ~~It's actually kind of a general plugin. Should we give it a more general name than `ARATPlugin`?~~ It has been renamed to ArrangePlugin.\r\n\r\nI also added a `Model::ResetPhysicsStates` API to call `Link::ResetPhysicsStates` for each link in a model. This will reset the velocities to zero and is called whenever we change the pose of an object.", "title": "Add ArrangePlugin to arrange models for tasks", "destination": {"commit": {"hash": "849f5488cb4e", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/849f5488cb4e.json"}, "html": {"href": "#!/osrf/gazebo/commits/849f5488cb4e"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo_4.0"}}, "reason": "", "source": {"commit": {"hash": "0f69743a0e2f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0f69743a0e2f.json"}, "html": {"href": "#!/osrf/gazebo/commits/0f69743a0e2f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "arat_plugin"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2014-09-24T16:57:34.432640+00:00"}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3200162.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3200162"}}, "parent": {"id": 3200052, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3200052.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3200052"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "removed in 0f69743a0e2f", "markup": "markdown", "html": "<p>removed in <a href=\"#!/osrf/gazebo/commits/0f69743a0e2f\" rel=\"nofollow\" class=\"ap-connect-link\">0f69743a0e2f</a></p>", "type": "rendered"}, "created_on": "2014-09-24T16:57:29.393317+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-24T16:57:29.402940+00:00", "type": "pullrequest_comment", "id": 3200162}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3200052.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3200052"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Do you want this `gzdbg` here?", "markup": "markdown", "html": "<p>Do you want this <code>gzdbg</code> here?</p>", "type": "rendered"}, "created_on": "2014-09-24T16:50:23.387423+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2014-09-24T16:50:23.396000+00:00", "type": "pullrequest_comment", "id": 3200052}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3170932.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3170932"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "jenkins says [abi is ok](http://build.osrfoundation.org/job/gazebo-any_to_any-abichecker-precise-amd64/113/API_ABI_report/)", "markup": "markdown", "html": "<p>jenkins says <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-any_to_any-abichecker-precise-amd64/113/API_ABI_report/\" rel=\"nofollow\">abi is ok</a></p>", "type": "rendered"}, "created_on": "2014-09-23T05:41:23.192722+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-09-23T05:41:23.200039+00:00", "type": "pullrequest_comment", "id": 3170932}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3169468.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3169468"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "I just added an arrangement in 544d1f44453f that will stack the boxes. I noticed that the contact behavior is a bit erratic, so I've made a pull request to update the contact parameters for the wood models:\n\n#!/osrf/gazebo_models/pull-request/87/fix-contact-parameters-for-wood-blocks/diff", "markup": "markdown", "html": "<p>I just added an arrangement in <a href=\"#!/osrf/gazebo/commits/544d1f44453f\" rel=\"nofollow\" class=\"ap-connect-link\">544d1f44453f</a> that will stack the boxes. I noticed that the contact behavior is a bit erratic, so I've made a pull request to update the contact parameters for the wood models:</p>\n<p><a href=\"#!/osrf/gazebo_models/pull-request/87/fix-contact-parameters-for-wood-blocks/diff\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo_models/pull-request/87/fix-contact-parameters-for-wood-blocks/diff</a></p>", "type": "rendered"}, "created_on": "2014-09-23T00:40:50.992431+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-09-23T00:41:12.488308+00:00", "type": "pullrequest_comment", "id": 3169468}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"update": {"description": "Based on the `arat.world` from pull request #1205, I've created a world plugin called ~~ARATPlugin~~ ArrangePlugin. Here's an example of the sdf parameters that it accepts:\r\n~~~\r\n<plugin name=\"arrange_plugin\" filename=\"libArrangePlugin.so\">\r\n  <model_name>cricket_ball</model_name>\r\n  <model_name>wood_block_10_2_1cm</model_name>\r\n  <model_name>wood_cube_10cm</model_name>\r\n  <model_name>wood_cube_7_5cm</model_name>\r\n  <model_name>wood_cube_5cm</model_name>\r\n  <model_name>wood_cube_2_5cm</model_name>\r\n  <initial_arrangement>wood_blocks</initial_arrangement>\r\n  <arrangement name=\"default\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"cricket_ball\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"wood_blocks\">\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n</plugin>\r\n~~~\r\n\r\nFirst, it accepts a sequence of `model_name` elements, with the names of models that should be arranged. The plugin stores the initial pose of these models internally.\r\n\r\nIt also accepts a sequence of `arrangement` elements that have a name attribute (for arrangement name) and child `pose` elements. The child pose elements have a model attribute that should match one of the `model_name` tags, and then pose data. Note that an arrangement doesn't require all poses to be listed (this will be explained below).\r\n\r\nThere is also an `initial_arrangement` element that should match one of the task names.\r\n\r\nThere is a `ArrangePlugin::SetArrangement` API to switch between tasks (eventually it will listen to a gzstring topic). This function does the following:\r\n\r\n* Iterate through all the models listed in the `model_name` tags.\r\n    * If a given model has a `pose` tag defined under the specified task, then reset the pose of that model using the arrangement-specific pose.\r\n    * If the given model doesn't have a `pose` tag specified, then reset the pose of that model to its initial pose.\r\n\r\nTo illustrate how this might be used, I moved the initial pose of all the objects from the table to 250 meters away (`y=-0.25` -> `y=250`). Then if you set `cricket_ball` as the initial arrangement, it will only put the cricket ball on the table. If you set `wood_blocks` as the initial arrangement, it will put the wood blocks on the table but leave the cricket ball far away.\r\n\r\nThe nice thing is that you can change the arrangements by modifying the plugin xml tags without recompiling the plugin. ~~It's actually kind of a general plugin. Should we give it a more general name than `ARATPlugin`?~~ It has been renamed to ArrangePlugin.\r\n\r\nI also added a `Model::ResetPhysicsStates` API to call `Link::ResetPhysicsStates` for each link in a model. This will reset the velocities to zero and is called whenever we change the pose of an object.", "title": "Add ArrangePlugin to arrange models for tasks", "destination": {"commit": {"hash": "034a329082ff", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/034a329082ff.json"}, "html": {"href": "#!/osrf/gazebo/commits/034a329082ff"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo_4.0"}}, "reason": "", "source": {"commit": {"hash": "544d1f44453f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/544d1f44453f.json"}, "html": {"href": "#!/osrf/gazebo/commits/544d1f44453f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "arat_plugin"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2014-09-23T00:38:19.534284+00:00"}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168829.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168829"}}, "parent": {"id": 3168822, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168822.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168822"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "let me know if you prefer your suggestion or my halfway implementation", "markup": "markdown", "html": "<p>let me know if you prefer your suggestion or my halfway implementation</p>", "type": "rendered"}, "created_on": "2014-09-22T23:03:55.498731+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-22T23:03:55.505297+00:00", "type": "pullrequest_comment", "id": 3168829}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168822.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168822"}}, "parent": {"id": 3168544, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168544.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168544"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "in d9c44e425086, I did something in between. I left that block where it is, but I added a check inside the loop that reads the `arrangement` tags to see if `this->initialArrangementName` is an empty string, and to assign the arrangement name if so.", "markup": "markdown", "html": "<p>in <a href=\"#!/osrf/gazebo/commits/d9c44e425086\" rel=\"nofollow\" class=\"ap-connect-link\">d9c44e425086</a>, I did something in between. I left that block where it is, but I added a check inside the loop that reads the <code>arrangement</code> tags to see if <code>this-&gt;initialArrangementName</code> is an empty string, and to assign the arrangement name if so.</p>", "type": "rendered"}, "created_on": "2014-09-22T23:03:22.229896+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-22T23:03:22.243006+00:00", "type": "pullrequest_comment", "id": 3168822}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168807.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168807"}}, "parent": {"id": 3168583, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168583.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168583"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "removed in d9c44e425086", "markup": "markdown", "html": "<p>removed in <a href=\"#!/osrf/gazebo/commits/d9c44e425086\" rel=\"nofollow\" class=\"ap-connect-link\">d9c44e425086</a></p>", "type": "rendered"}, "created_on": "2014-09-22T23:00:33.951401+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-22T23:00:33.960744+00:00", "type": "pullrequest_comment", "id": 3168807}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168806.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168806"}}, "parent": {"id": 3168560, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168560.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168560"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "removed in d9c44e425086", "markup": "markdown", "html": "<p>removed in <a href=\"#!/osrf/gazebo/commits/d9c44e425086\" rel=\"nofollow\" class=\"ap-connect-link\">d9c44e425086</a></p>", "type": "rendered"}, "created_on": "2014-09-22T23:00:17.941327+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-22T23:00:17.955225+00:00", "type": "pullrequest_comment", "id": 3168806}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"update": {"description": "Based on the `arat.world` from pull request #1205, I've created a world plugin called ~~ARATPlugin~~ ArrangePlugin. Here's an example of the sdf parameters that it accepts:\r\n~~~\r\n<plugin name=\"arrange_plugin\" filename=\"libArrangePlugin.so\">\r\n  <model_name>cricket_ball</model_name>\r\n  <model_name>wood_block_10_2_1cm</model_name>\r\n  <model_name>wood_cube_10cm</model_name>\r\n  <model_name>wood_cube_7_5cm</model_name>\r\n  <model_name>wood_cube_5cm</model_name>\r\n  <model_name>wood_cube_2_5cm</model_name>\r\n  <initial_arrangement>wood_blocks</initial_arrangement>\r\n  <arrangement name=\"default\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"cricket_ball\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"wood_blocks\">\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n</plugin>\r\n~~~\r\n\r\nFirst, it accepts a sequence of `model_name` elements, with the names of models that should be arranged. The plugin stores the initial pose of these models internally.\r\n\r\nIt also accepts a sequence of `arrangement` elements that have a name attribute (for arrangement name) and child `pose` elements. The child pose elements have a model attribute that should match one of the `model_name` tags, and then pose data. Note that an arrangement doesn't require all poses to be listed (this will be explained below).\r\n\r\nThere is also an `initial_arrangement` element that should match one of the task names.\r\n\r\nThere is a `ArrangePlugin::SetArrangement` API to switch between tasks (eventually it will listen to a gzstring topic). This function does the following:\r\n\r\n* Iterate through all the models listed in the `model_name` tags.\r\n    * If a given model has a `pose` tag defined under the specified task, then reset the pose of that model using the arrangement-specific pose.\r\n    * If the given model doesn't have a `pose` tag specified, then reset the pose of that model to its initial pose.\r\n\r\nTo illustrate how this might be used, I moved the initial pose of all the objects from the table to 250 meters away (`y=-0.25` -> `y=250`). Then if you set `cricket_ball` as the initial arrangement, it will only put the cricket ball on the table. If you set `wood_blocks` as the initial arrangement, it will put the wood blocks on the table but leave the cricket ball far away.\r\n\r\nThe nice thing is that you can change the arrangements by modifying the plugin xml tags without recompiling the plugin. ~~It's actually kind of a general plugin. Should we give it a more general name than `ARATPlugin`?~~ It has been renamed to ArrangePlugin.\r\n\r\nI also added a `Model::ResetPhysicsStates` API to call `Link::ResetPhysicsStates` for each link in a model. This will reset the velocities to zero and is called whenever we change the pose of an object.", "title": "Add ArrangePlugin to arrange models for tasks", "destination": {"commit": {"hash": "034a329082ff", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/034a329082ff.json"}, "html": {"href": "#!/osrf/gazebo/commits/034a329082ff"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo_4.0"}}, "reason": "", "source": {"commit": {"hash": "d9c44e425086", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/d9c44e425086.json"}, "html": {"href": "#!/osrf/gazebo/commits/d9c44e425086"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "arat_plugin"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2014-09-22T23:00:11.703707+00:00"}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168761.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168761"}}, "parent": {"id": 3168583, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168583.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168583"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "@hsu and I were discussing performance and thought we could try to disable the models that were not in the current arrangement. I will remove these calls, since we don't necessarily want them in the general case (also, I couldn't actually get the models to be disabled).", "markup": "markdown", "html": "<p>@hsu and I were discussing performance and thought we could try to disable the models that were not in the current arrangement. I will remove these calls, since we don't necessarily want them in the general case (also, I couldn't actually get the models to be disabled).</p>", "type": "rendered"}, "created_on": "2014-09-22T22:53:43.296627+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2014-09-22T22:53:43.308591+00:00", "type": "pullrequest_comment", "id": 3168761}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168583.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168583"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Why call `SetEnabled` here, and on line 163?", "markup": "markdown", "html": "<p>Why call <code>SetEnabled</code> here, and on line 163?</p>", "type": "rendered"}, "created_on": "2014-09-22T22:36:17.853231+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2014-09-22T22:36:17.860126+00:00", "type": "pullrequest_comment", "id": 3168583}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168560.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168560"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Should this gzdbg be removed?", "markup": "markdown", "html": "<p>Should this gzdbg be removed?</p>", "type": "rendered"}, "created_on": "2014-09-22T22:34:16.691509+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2014-09-22T22:34:16.700763+00:00", "type": "pullrequest_comment", "id": 3168560}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168546.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168546"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "I should probably make a test for `Model::ResetPhysicsStates`...", "markup": "markdown", "html": "<p>I should probably make a test for <code>Model::ResetPhysicsStates</code>...</p>", "type": "rendered"}, "created_on": "2014-09-22T22:32:50.274775+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-09-22T22:32:50.281446+00:00", "type": "pullrequest_comment", "id": 3168546}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168544.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168544"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "How about moving this block to below the `// Get arrangement information`, and set `this->initialArrangmentName` to be the value in SDF if present or the first element in `this->arrangements` if not present?", "markup": "markdown", "html": "<p>How about moving this block to below the <code>// Get arrangement information</code>, and set <code>this-&gt;initialArrangmentName</code> to be the value in SDF if present or the first element in <code>this-&gt;arrangements</code> if not present?</p>", "type": "rendered"}, "created_on": "2014-09-22T22:32:47.574707+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2014-09-22T22:32:47.585077+00:00", "type": "pullrequest_comment", "id": 3168544}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168536.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168536"}}, "parent": {"id": 3168226, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168226.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168226"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Thanks for the suggestion. I was drawing a blank on what to call it.", "markup": "markdown", "html": "<p>Thanks for the suggestion. I was drawing a blank on what to call it.</p>", "type": "rendered"}, "created_on": "2014-09-22T22:32:14.239020+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-09-22T22:32:14.250326+00:00", "type": "pullrequest_comment", "id": 3168536}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168486.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168486"}}, "parent": {"id": 3168226, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168226.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168226"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "Updated naming in 2a5590027283", "markup": "markdown", "html": "<p>Updated naming in <a href=\"#!/osrf/gazebo/commits/2a5590027283\" rel=\"nofollow\" class=\"ap-connect-link\">2a5590027283</a></p>", "type": "rendered"}, "created_on": "2014-09-22T22:28:21.588607+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-09-22T22:28:21.595054+00:00", "type": "pullrequest_comment", "id": 3168486}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"update": {"description": "Based on the `arat.world` from pull request #1205, I've created a world plugin called ~~ARATPlugin~~ ArrangePlugin. Here's an example of the sdf parameters that it accepts:\r\n~~~\r\n<plugin name=\"arrange_plugin\" filename=\"libArrangePlugin.so\">\r\n  <model_name>cricket_ball</model_name>\r\n  <model_name>wood_block_10_2_1cm</model_name>\r\n  <model_name>wood_cube_10cm</model_name>\r\n  <model_name>wood_cube_7_5cm</model_name>\r\n  <model_name>wood_cube_5cm</model_name>\r\n  <model_name>wood_cube_2_5cm</model_name>\r\n  <initial_arrangement>wood_blocks</initial_arrangement>\r\n  <arrangement name=\"default\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"cricket_ball\">\r\n    <pose model=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n  <arrangement name=\"wood_blocks\">\r\n    <pose model=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose model=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </arrangement>\r\n</plugin>\r\n~~~\r\n\r\nFirst, it accepts a sequence of `model_name` elements, with the names of models that should be arranged. The plugin stores the initial pose of these models internally.\r\n\r\nIt also accepts a sequence of `arrangement` elements that have a name attribute (for arrangement name) and child `pose` elements. The child pose elements have a model attribute that should match one of the `model_name` tags, and then pose data. Note that an arrangement doesn't require all poses to be listed (this will be explained below).\r\n\r\nThere is also an `initial_arrangement` element that should match one of the task names.\r\n\r\nThere is a `ArrangePlugin::SetArrangement` API to switch between tasks (eventually it will listen to a gzstring topic). This function does the following:\r\n\r\n* Iterate through all the models listed in the `model_name` tags.\r\n    * If a given model has a `pose` tag defined under the specified task, then reset the pose of that model using the arrangement-specific pose.\r\n    * If the given model doesn't have a `pose` tag specified, then reset the pose of that model to its initial pose.\r\n\r\nTo illustrate how this might be used, I moved the initial pose of all the objects from the table to 250 meters away (`y=-0.25` -> `y=250`). Then if you set `cricket_ball` as the initial arrangement, it will only put the cricket ball on the table. If you set `wood_blocks` as the initial arrangement, it will put the wood blocks on the table but leave the cricket ball far away.\r\n\r\nThe nice thing is that you can change the arrangements by modifying the plugin xml tags without recompiling the plugin. ~~It's actually kind of a general plugin. Should we give it a more general name than `ARATPlugin`?~~ It has been renamed to ArrangePlugin.\r\n\r\nI also added a `Model::ResetPhysicsStates` API to call `Link::ResetPhysicsStates` for each link in a model. This will reset the velocities to zero and is called whenever we change the pose of an object.", "title": "Add ArrangePlugin to arrange models for tasks", "destination": {"commit": {"hash": "034a329082ff", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/034a329082ff.json"}, "html": {"href": "#!/osrf/gazebo/commits/034a329082ff"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo_4.0"}}, "reason": "", "source": {"commit": {"hash": "2a5590027283", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2a5590027283.json"}, "html": {"href": "#!/osrf/gazebo/commits/2a5590027283"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "arat_plugin"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2014-09-22T22:28:03.371238+00:00"}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"update": {"description": "Based on the `arat.world` from pull request #1205, I've created a world plugin called ARATPlugin. Here's an example of the sdf parameters that it accepts:\r\n~~~\r\n<plugin name=\"arat_plugin\" filename=\"libARATPlugin.so\">\r\n  <modelName>cricket_ball</modelName>\r\n  <modelName>wood_block_10_2_1cm</modelName>\r\n  <modelName>wood_cube_10cm</modelName>\r\n  <modelName>wood_cube_7_5cm</modelName>\r\n  <modelName>wood_cube_5cm</modelName>\r\n  <modelName>wood_cube_2_5cm</modelName>\r\n  <initialTask>wood_blocks</initialTask>\r\n  <task name=\"default\">\r\n    <pose name=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n    <pose name=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose name=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose name=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose name=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose name=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </task>\r\n  <task name=\"cricket_ball\">\r\n    <pose name=\"cricket_ball\"       > 0.6 -0.25 1.015 0 0 0</pose>\r\n  </task>\r\n  <task name=\"wood_blocks\">\r\n    <pose name=\"wood_block_10_2_1cm\"> 0.4 -0.25 1.015 0 0 0</pose>\r\n    <pose name=\"wood_cube_10cm\"     > 0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose name=\"wood_cube_7_5cm\"    > 0.0 -0.25 1.015 0 0 0</pose>\r\n    <pose name=\"wood_cube_5cm\"      >-0.2 -0.25 1.015 0 0 0</pose>\r\n    <pose name=\"wood_cube_2_5cm\"    >-0.4 -0.25 1.015 0 0 0</pose>\r\n  </task>\r\n</plugin>\r\n~~~\r\n\r\nFirst, it accepts a sequence of `modelName` elements, with the names of models that should be pre-arranged for each task. The plugin stores the initial pose of these models internally.\r\n\r\nIt also accepts a sequence of `task` elements that have a name attribute (for task name) and child `pose` elements. The child pose elements have a name attribute that should match one of the `modelName` tags, and then pose data. Note that a task doesn't require all poses to be listed (this will be explained below).\r\n\r\nThere is also an `initialTask` element that should match one of the task names.\r\n\r\nThere is a `ARATPlugin::SetTask` API to switch between tasks (eventually it will listen to a gzstring topic). This function does the following:\r\n\r\n* Iterate through all the models listed in the `modelName` tags.\r\n    * If a given model has a `pose` tag defined under the specified task, then reset the pose of that model using the task-specific pose.\r\n    * If the given model doesn't have a `pose` tag specified, then reset the pose of that model to its initial pose.\r\n\r\nTo illustrate how this might be used, I moved the initial pose of all the objects from the table to 250 meters away (`y=-0.25` -> `y=250`). Then if you set `cricket_ball` as the initial task, it will only put the cricket ball on the table. If you set `wood_blocks` as the initial task, it will put the wood blocks on the table but leave the cricket ball far away.\r\n\r\nThe nice thing is that you can change the tasks by modifying the plugin xml tags without recompiling the plugin. It's actually kind of a general plugin. Should we give it a more general name than `ARATPlugin`?\r\n\r\nI also added a `Model::ResetPhysicsStates` API to call `Link::ResetPhysicsStates` for each link in a model. This will reset the velocities to zero and is called whenever we change the pose of an object.", "title": "Add ARATPlugin to arrange models for tasks", "destination": {"commit": {"hash": "034a329082ff", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/034a329082ff.json"}, "html": {"href": "#!/osrf/gazebo/commits/034a329082ff"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo_4.0"}}, "reason": "", "source": {"commit": {"hash": "2a5590027283", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2a5590027283.json"}, "html": {"href": "#!/osrf/gazebo/commits/2a5590027283"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "arat_plugin"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2014-09-22T22:23:59.137802+00:00"}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208/comments/3168226.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208/_/diff#comment-3168226"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}, "content": {"raw": "This is really nice. We could call the plugin `arrange_plugin`. With that name, `initialTask` would become `initial_arrangement`, and each `task` would be `arrangement`. Might want to rename `modelName` to `model_name` to be more like SDF. The `name` attribute for each `<pose>` could be `model` for better clarity.", "markup": "markdown", "html": "<p>This is really nice. We could call the plugin <code>arrange_plugin</code>. With that name, <code>initialTask</code> would become <code>initial_arrangement</code>, and each <code>task</code> would be <code>arrangement</code>. Might want to rename <code>modelName</code> to <code>model_name</code> to be more like SDF. The <code>name</code> attribute for each <code>&lt;pose&gt;</code> could be <code>model</code> for better clarity.</p>", "type": "rendered"}, "created_on": "2014-09-22T22:02:39.114523+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2014-09-22T22:02:39.124826+00:00", "type": "pullrequest_comment", "id": 3168226}, "pull_request": {"type": "pullrequest", "id": 1208, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1208.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1208"}}, "title": "Add ArrangePlugin to arrange models for tasks"}}], "next": "data/repositories/osrf/gazebo/pullrequests/1208/activity_ctx=64fxgfjub.json"}