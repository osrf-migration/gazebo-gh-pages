{"rendered": {"description": {"raw": "Back in  [#!/osrf/gazebo/pull-requests/2692](#!/osrf/gazebo/pull-requests/2692), I added this part of  CMake code to find OGRE in systems without pkg-config. However, back in time I probably tested these changes with a modified OGRE, as  there are some problems in the current version that  prevent to configure Gazebo successfully with OGRE if `pkg-config` is not available. This PR fixes this problems. \r\n\r\nIn particular, the fixed problems are: \r\n\r\n* There is a nasty bug in CMake \\(see [https://gitlab.kitware.com/cmake/cmake/issues/17135](https://gitlab.kitware.com/cmake/cmake/issues/17135)\\) that  prevents to successfully run a `find_package(<package>)` call if before there was a failed call to `pkg_check_modules(<package> <package>)` . You  can find the details in [https://gitlab.kitware.com/cmake/cmake/issues/17135#note\\_626879](https://gitlab.kitware.com/cmake/cmake/issues/17135#note_626879) , but a workaround is to manually unset the `OGRE_FOUND` cache variable.\r\n* The `OGRE_PLUGINDIR` is used  in the main Gazebo CMakeLists.txt \\(see [#!/osrf/gazebo/src/7c4281fe1229236496a0532515d596dbb4c86e70/CMakeLists.txt#lines-164](#!/osrf/gazebo/src/7c4281fe1229236496a0532515d596dbb4c86e70/CMakeLists.txt#lines-164)\\), but OGRE\u2019s just exports `OGRE_PLUGIN_DIR` . To  be  compatible with the `pkg-config` related code, we just assign to `OGRE_PLUGINDIR` the value  of `OGRE_PLUGIN_DIR` . \r\n\r\n\u200c\r\n\r\nDownstream related PR: [https://github.com/microsoft/vcpkg/pull/8178](https://github.com/microsoft/vcpkg/pull/8178) .\r\n\r\n\u200c", "markup": "markdown", "html": "<p>Back in  <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/pull-requests/2692\" rel=\"nofollow\">#!/osrf/gazebo/pull-requests/2692</a>, I added this part of  CMake code to find OGRE in systems without pkg-config. However, back in time I probably tested these changes with a modified OGRE, as  there are some problems in the current version that  prevent to configure Gazebo successfully with OGRE if <code>pkg-config</code> is not available. This PR fixes this problems. </p>\n<p>In particular, the fixed problems are: </p>\n<ul>\n<li>There is a nasty bug in CMake (see <a data-is-external-link=\"true\" href=\"https://gitlab.kitware.com/cmake/cmake/issues/17135\" rel=\"nofollow\">https://gitlab.kitware.com/cmake/cmake/issues/17135</a>) that  prevents to successfully run a <code>find_package(&lt;package&gt;)</code> call if before there was a failed call to <code>pkg_check_modules(&lt;package&gt; &lt;package&gt;)</code> . You  can find the details in <a data-is-external-link=\"true\" href=\"https://gitlab.kitware.com/cmake/cmake/issues/17135#note_626879\" rel=\"nofollow\">https://gitlab.kitware.com/cmake/cmake/issues/17135#note_626879</a> , but a workaround is to manually unset the <code>OGRE_FOUND</code> cache variable.</li>\n<li>The <code>OGRE_PLUGINDIR</code> is used  in the main Gazebo CMakeLists.txt (see <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/7c4281fe1229236496a0532515d596dbb4c86e70/CMakeLists.txt#lines-164\" rel=\"nofollow\">#!/osrf/gazebo/src/7c4281fe1229236496a0532515d596dbb4c86e70/CMakeLists.txt#lines-164</a>), but OGRE\u2019s just exports <code>OGRE_PLUGIN_DIR</code> . To  be  compatible with the <code>pkg-config</code> related code, we just assign to <code>OGRE_PLUGINDIR</code> the value  of <code>OGRE_PLUGIN_DIR</code> . </li>\n</ul>\n<p>\u200c</p>\n<p>Downstream related PR: <a data-is-external-link=\"true\" href=\"https://github.com/microsoft/vcpkg/pull/8178\" rel=\"nofollow\">https://github.com/microsoft/vcpkg/pull/8178</a> .</p>\n<p>\u200c</p>", "type": "rendered"}, "title": {"raw": "Fixes for finding OGRE with CMake config files", "markup": "markdown", "html": "<p>Fixes for finding OGRE with CMake config files</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Back in  [#!/osrf/gazebo/pull-requests/2692](#!/osrf/gazebo/pull-requests/2692), I added this part of  CMake code to find OGRE in systems without pkg-config. However, back in time I probably tested these changes with a modified OGRE, as  there are some problems in the current version that  prevent to configure Gazebo successfully with OGRE if `pkg-config` is not available. This PR fixes this problems. \r\n\r\nIn particular, the fixed problems are: \r\n\r\n* There is a nasty bug in CMake \\(see [https://gitlab.kitware.com/cmake/cmake/issues/17135](https://gitlab.kitware.com/cmake/cmake/issues/17135)\\) that  prevents to successfully run a `find_package(<package>)` call if before there was a failed call to `pkg_check_modules(<package> <package>)` . You  can find the details in [https://gitlab.kitware.com/cmake/cmake/issues/17135#note\\_626879](https://gitlab.kitware.com/cmake/cmake/issues/17135#note_626879) , but a workaround is to manually unset the `OGRE_FOUND` cache variable.\r\n* The `OGRE_PLUGINDIR` is used  in the main Gazebo CMakeLists.txt \\(see [#!/osrf/gazebo/src/7c4281fe1229236496a0532515d596dbb4c86e70/CMakeLists.txt#lines-164](#!/osrf/gazebo/src/7c4281fe1229236496a0532515d596dbb4c86e70/CMakeLists.txt#lines-164)\\), but OGRE\u2019s just exports `OGRE_PLUGIN_DIR` . To  be  compatible with the `pkg-config` related code, we just assign to `OGRE_PLUGINDIR` the value  of `OGRE_PLUGIN_DIR` . \r\n\r\n\u200c\r\n\r\nDownstream related PR: [https://github.com/microsoft/vcpkg/pull/8178](https://github.com/microsoft/vcpkg/pull/8178) .\r\n\r\n\u200c", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/3126/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diffstat/osrf/gazebo:4339ffb9b664%0D384d36c37c47?from_pullrequest_id=3126"}, "commits": {"href": "data/repositories/osrf/gazebo/pullrequests/3126/commits.json"}, "self": {"href": "data/repositories/osrf/gazebo/pullrequests/3126.json"}, "comments": {"href": "data/repositories/osrf/gazebo/pullrequests/3126/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/3126/merge"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3126"}, "activity": {"href": "data/repositories/osrf/gazebo/pullrequests/3126/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:4339ffb9b664%0D384d36c37c47?from_pullrequest_id=3126"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/3126/approve"}, "statuses": {"href": "data/repositories/osrf/gazebo/pullrequests/3126/statuses_page=1.json"}}, "title": "Fixes for finding OGRE with CMake config files", "close_source_branch": false, "reviewers": [], "id": 3126, "destination": {"commit": {"hash": "384d36c37c47", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/384d36c37c47.json"}, "html": {"href": "#!/osrf/gazebo/commits/384d36c37c47"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo10"}}, "created_on": "2019-09-15T20:46:52.342436+00:00", "summary": {"raw": "Back in  [#!/osrf/gazebo/pull-requests/2692](#!/osrf/gazebo/pull-requests/2692), I added this part of  CMake code to find OGRE in systems without pkg-config. However, back in time I probably tested these changes with a modified OGRE, as  there are some problems in the current version that  prevent to configure Gazebo successfully with OGRE if `pkg-config` is not available. This PR fixes this problems. \r\n\r\nIn particular, the fixed problems are: \r\n\r\n* There is a nasty bug in CMake \\(see [https://gitlab.kitware.com/cmake/cmake/issues/17135](https://gitlab.kitware.com/cmake/cmake/issues/17135)\\) that  prevents to successfully run a `find_package(<package>)` call if before there was a failed call to `pkg_check_modules(<package> <package>)` . You  can find the details in [https://gitlab.kitware.com/cmake/cmake/issues/17135#note\\_626879](https://gitlab.kitware.com/cmake/cmake/issues/17135#note_626879) , but a workaround is to manually unset the `OGRE_FOUND` cache variable.\r\n* The `OGRE_PLUGINDIR` is used  in the main Gazebo CMakeLists.txt \\(see [#!/osrf/gazebo/src/7c4281fe1229236496a0532515d596dbb4c86e70/CMakeLists.txt#lines-164](#!/osrf/gazebo/src/7c4281fe1229236496a0532515d596dbb4c86e70/CMakeLists.txt#lines-164)\\), but OGRE\u2019s just exports `OGRE_PLUGIN_DIR` . To  be  compatible with the `pkg-config` related code, we just assign to `OGRE_PLUGINDIR` the value  of `OGRE_PLUGIN_DIR` . \r\n\r\n\u200c\r\n\r\nDownstream related PR: [https://github.com/microsoft/vcpkg/pull/8178](https://github.com/microsoft/vcpkg/pull/8178) .\r\n\r\n\u200c", "markup": "markdown", "html": "<p>Back in  <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/pull-requests/2692\" rel=\"nofollow\">#!/osrf/gazebo/pull-requests/2692</a>, I added this part of  CMake code to find OGRE in systems without pkg-config. However, back in time I probably tested these changes with a modified OGRE, as  there are some problems in the current version that  prevent to configure Gazebo successfully with OGRE if <code>pkg-config</code> is not available. This PR fixes this problems. </p>\n<p>In particular, the fixed problems are: </p>\n<ul>\n<li>There is a nasty bug in CMake (see <a data-is-external-link=\"true\" href=\"https://gitlab.kitware.com/cmake/cmake/issues/17135\" rel=\"nofollow\">https://gitlab.kitware.com/cmake/cmake/issues/17135</a>) that  prevents to successfully run a <code>find_package(&lt;package&gt;)</code> call if before there was a failed call to <code>pkg_check_modules(&lt;package&gt; &lt;package&gt;)</code> . You  can find the details in <a data-is-external-link=\"true\" href=\"https://gitlab.kitware.com/cmake/cmake/issues/17135#note_626879\" rel=\"nofollow\">https://gitlab.kitware.com/cmake/cmake/issues/17135#note_626879</a> , but a workaround is to manually unset the <code>OGRE_FOUND</code> cache variable.</li>\n<li>The <code>OGRE_PLUGINDIR</code> is used  in the main Gazebo CMakeLists.txt (see <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/7c4281fe1229236496a0532515d596dbb4c86e70/CMakeLists.txt#lines-164\" rel=\"nofollow\">#!/osrf/gazebo/src/7c4281fe1229236496a0532515d596dbb4c86e70/CMakeLists.txt#lines-164</a>), but OGRE\u2019s just exports <code>OGRE_PLUGIN_DIR</code> . To  be  compatible with the <code>pkg-config</code> related code, we just assign to <code>OGRE_PLUGINDIR</code> the value  of <code>OGRE_PLUGIN_DIR</code> . </li>\n</ul>\n<p>\u200c</p>\n<p>Downstream related PR: <a data-is-external-link=\"true\" href=\"https://github.com/microsoft/vcpkg/pull/8178\" rel=\"nofollow\">https://github.com/microsoft/vcpkg/pull/8178</a> .</p>\n<p>\u200c</p>", "type": "rendered"}, "source": {"commit": {"hash": "60dcb1271fac", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/gazebo-20/commit/60dcb1271fac"}, "html": {"href": "https://bitbucket.org/traversaro/gazebo-20/commits/60dcb1271fac"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/traversaro/gazebo-20"}, "html": {"href": "https://bitbucket.org/traversaro/gazebo-20"}, "avatar": {"href": "data/bytebucket.org/ravatar/{549f699e-a554-42d8-b788-611da5f40ffb}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo-20", "full_name": "traversaro/gazebo-20", "uuid": "{549f699e-a554-42d8-b788-611da5f40ffb}"}, "branch": {"name": "Silvio-Traversaro/fixes-for-finding-ogre-with-cmake-config-1568580368146"}}, "comment_count": 5, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2019-11-22T16:42:03.666551+00:00", "type": "participant", "approved": true, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, {"role": "PARTICIPANT", "participated_on": "2019-11-19T20:41:41.335804+00:00", "type": "participant", "approved": false, "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}}, {"role": "PARTICIPANT", "participated_on": "2019-11-18T21:11:47.152841+00:00", "type": "participant", "approved": true, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}], "reason": "", "updated_on": "2019-11-22T16:42:53.845004+00:00", "author": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "merge_commit": {"hash": "4339ffb9b664", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/4339ffb9b664.json"}, "html": {"href": "#!/osrf/gazebo/commits/4339ffb9b664"}}}, "closed_by": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}