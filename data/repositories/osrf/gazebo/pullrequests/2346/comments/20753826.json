{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2346/comments/20753826.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2346/_/diff#comment-20753826"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2346, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2346.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2346"}}, "title": "Added a harness plugin"}, "content": {"raw": "Ok, in addition to a trivial whitespace fix (7dc8848a5ec7), I've made some additional commits that improve failure behavior:\n\n* e71aa0dc83a1: change `parentName.substr(parentName.find(\"::\"))` so that it checks that the result of `find` is not `std::string::npos`, otherwise `substr` will thow an `out_of_range` exception. Gazebo catches it, but gives an unhelpful error message (`[Err] [Model.cc:1076] Exception occured in the Load function of plugin with name[harness] and filename[libgazebo_ros_harness.so]. This plugin will not run.`). With this check, it now gives more helpful error messages:\n\n~~~\n[Err] [Joint.cc:262] EXCEPTION: Couldn't Find Parent Link[fake]\n\n[Err] [HarnessPlugin.cc:84] Unable to load joint[joint1]. Couldn't Find Parent Link[fake]\n\n[Err] [HarnessPlugin.cc:100] No joints specified in the harness plugin.The harness plugin will not run.\n~~~\n\n* 0e926c2539f6: prevents the `HarnessPlugin::Update` function from being called if no joints were found; otherwise gazebo crashes\n", "markup": "markdown", "html": "<p>Ok, in addition to a trivial whitespace fix (<a href=\"#!/osrf/gazebo/commits/7dc8848a5ec7\" rel=\"nofollow\" class=\"ap-connect-link\">7dc8848a5ec7</a>), I've made some additional commits that improve failure behavior:</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/commits/e71aa0dc83a1\" rel=\"nofollow\" class=\"ap-connect-link\">e71aa0dc83a1</a>: change <code>parentName.substr(parentName.find(\"::\"))</code> so that it checks that the result of <code>find</code> is not <code>std::string::npos</code>, otherwise <code>substr</code> will thow an <code>out_of_range</code> exception. Gazebo catches it, but gives an unhelpful error message (<code>[Err] [Model.cc:1076] Exception occured in the Load function of plugin with name[harness] and filename[libgazebo_ros_harness.so]. This plugin will not run.</code>). With this check, it now gives more helpful error messages:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">[Err] [Joint.cc:262] EXCEPTION: Couldn&#39;t Find Parent Link[fake]</span>\n\n<span class=\"k\">[Err] [HarnessPlugin.cc:84] Unable to load joint[joint1]. Couldn&#39;t Find Parent Link[fake]</span>\n\n<span class=\"na\">[Err] [HarnessPlugin.cc:100] No joints specified in the harness plugin.The harness plugin will not run.</span>\n</pre></div>\n\n\n<ul>\n<li><a href=\"#!/osrf/gazebo/commits/0e926c2539f6\" rel=\"nofollow\" class=\"ap-connect-link\">0e926c2539f6</a>: prevents the <code>HarnessPlugin::Update</code> function from being called if no joints were found; otherwise gazebo crashes</li>\n</ul>", "type": "rendered"}, "created_on": "2016-07-08T01:16:22.794792+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-07-08T01:16:22.802303+00:00", "type": "pullrequest_comment", "id": 20753826}