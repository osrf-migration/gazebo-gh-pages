{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2890/comments/58459274.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2890/_/diff#comment-58459274"}}, "parent": {"id": 58440416, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2890/comments/58440416.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2890/_/diff#comment-58440416"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2890, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2890.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2890"}}, "title": "Fix for issues #2297 and #2428"}, "content": {"raw": "I think that error message comes from [WorldState::SetInsertions](#!/osrf/gazebo/src/1540d7970559f2f49571528bb28d171fb062e972/gazebo/physics/WorldState.cc?fileviewer=file-view-default#WorldState.cc-398:402). The sdf string is initially wrapped in `<sdf>` tags when it is inserted via the call to [InsertModelString](#!/osrf/gazebo/src/1540d7970559f2f49571528bb28d171fb062e972/test/regression/2428_log_insertions.cc?fileviewer=file-view-default#2428_log_insertions.cc-57:73), but that gets stripped out in the [WorldState subtraction](#!/osrf/gazebo/src/1540d7970559f2f49571528bb28d171fb062e972/gazebo/physics/WorldState.cc?fileviewer=file-view-default#WorldState.cc-534), so it just starts with `<model>` tags. Then when [WorldState::SetInsertions calls sdf::readString](#!/osrf/gazebo/src/1540d7970559f2f49571528bb28d171fb062e972/gazebo/physics/WorldState.cc?fileviewer=file-view-default#WorldState.cc-372), that function gives an error because the input is not wrapped in `<sdf>` tags.\n\nIt still works, but there is an extraneous console message.", "markup": "markdown", "html": "<p>I think that error message comes from <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/1540d7970559f2f49571528bb28d171fb062e972/gazebo/physics/WorldState.cc?fileviewer=file-view-default#WorldState.cc-398:402\" rel=\"nofollow\">WorldState::SetInsertions</a>. The sdf string is initially wrapped in <code>&lt;sdf&gt;</code> tags when it is inserted via the call to <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/1540d7970559f2f49571528bb28d171fb062e972/test/regression/2428_log_insertions.cc?fileviewer=file-view-default#2428_log_insertions.cc-57:73\" rel=\"nofollow\">InsertModelString</a>, but that gets stripped out in the <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/1540d7970559f2f49571528bb28d171fb062e972/gazebo/physics/WorldState.cc?fileviewer=file-view-default#WorldState.cc-534\" rel=\"nofollow\">WorldState subtraction</a>, so it just starts with <code>&lt;model&gt;</code> tags. Then when <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/1540d7970559f2f49571528bb28d171fb062e972/gazebo/physics/WorldState.cc?fileviewer=file-view-default#WorldState.cc-372\" rel=\"nofollow\">WorldState::SetInsertions calls sdf::readString</a>, that function gives an error because the input is not wrapped in <code>&lt;sdf&gt;</code> tags.</p>\n<p>It still works, but there is an extraneous console message.</p>", "type": "rendered"}, "created_on": "2018-03-09T22:03:06.278806+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-03-09T22:03:06.282512+00:00", "type": "pullrequest_comment", "id": 58459274}