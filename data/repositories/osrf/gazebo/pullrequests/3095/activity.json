{"pagelen": 50, "values": [{"update": {"description": "The LinkPlot3dPlugin can trace the paths of links in a simulation and is used with a `double_pendulum_with_base` model in [plot3d.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/worlds/plot3d.world?at=default&fileviewer=file-view-default). The double pendulum model is `<include>`d into the parent model as a sibling of the plugin element, which causes the double pendulum links to be added to the parent model with model namespacing using the `::` delimiter.\r\n\r\nI tried following this pattern with the example world included in this pull request, which is a modified version of the [friction_cone.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/test/worlds/friction_cone.world?at=default&fileviewer=file-view-default), but it didn't work because this world has models [nested with explicit `<model>` tags](#!/osrf/gazebo/src/c2315ca10a801df4edcc174ccd9a5ccdbae4019d/worlds/friction_pyramid.world?fileviewer=file-view-default#friction_pyramid.world-19:20), and the LinkPlot3dPlugin is not able to find the specified links in this case. When I tried using `::` with the nested model name as a prefix, I saw console errors like the following:\r\n\r\n~~~\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_0::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_1::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_2::link_1] in model [boxes]\r\n~~~\r\n\r\nTo find the links, the plugin needs to get a pointer to the nested model using the `Model::NestedModel` function. So if inside a `<plot>` element you specify a `<model>` tag with a model name alongside the `<link>` tag, it will now use that to search for a link inside a nested model.\r\n\r\nHere's an animation of that test world with this branch:\r\n\r\n* https://vimeo.com/327118010\r\n\r\nand here's another animation if you change the `friction_model` tag to `cone_friction`:\r\n\r\n* https://vimeo.com/327117996", "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models", "destination": {"commit": {"hash": "7e5f4b84705f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/7e5f4b84705f.json"}, "html": {"href": "#!/osrf/gazebo/commits/7e5f4b84705f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "12d74998d697", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/12d74998d697.json"}, "html": {"href": "#!/osrf/gazebo/commits/12d74998d697"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "link_plot_3d_nested_model"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-04-30T17:58:49.613615+00:00"}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"approval": {"date": "2019-04-30T17:41:46.236716+00:00", "pullrequest": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"update": {"description": "The LinkPlot3dPlugin can trace the paths of links in a simulation and is used with a `double_pendulum_with_base` model in [plot3d.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/worlds/plot3d.world?at=default&fileviewer=file-view-default). The double pendulum model is `<include>`d into the parent model as a sibling of the plugin element, which causes the double pendulum links to be added to the parent model with model namespacing using the `::` delimiter.\r\n\r\nI tried following this pattern with the example world included in this pull request, which is a modified version of the [friction_cone.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/test/worlds/friction_cone.world?at=default&fileviewer=file-view-default), but it didn't work because this world has models [nested with explicit `<model>` tags](#!/osrf/gazebo/src/c2315ca10a801df4edcc174ccd9a5ccdbae4019d/worlds/friction_pyramid.world?fileviewer=file-view-default#friction_pyramid.world-19:20), and the LinkPlot3dPlugin is not able to find the specified links in this case. When I tried using `::` with the nested model name as a prefix, I saw console errors like the following:\r\n\r\n~~~\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_0::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_1::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_2::link_1] in model [boxes]\r\n~~~\r\n\r\nTo find the links, the plugin needs to get a pointer to the nested model using the `Model::NestedModel` function. So if inside a `<plot>` element you specify a `<model>` tag with a model name alongside the `<link>` tag, it will now use that to search for a link inside a nested model.\r\n\r\nHere's an animation of that test world with this branch:\r\n\r\n* https://vimeo.com/327118010\r\n\r\nand here's another animation if you change the `friction_model` tag to `cone_friction`:\r\n\r\n* https://vimeo.com/327117996", "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models", "destination": {"commit": {"hash": "7e5f4b84705f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/7e5f4b84705f.json"}, "html": {"href": "#!/osrf/gazebo/commits/7e5f4b84705f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "12d74998d697", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/12d74998d697.json"}, "html": {"href": "#!/osrf/gazebo/commits/12d74998d697"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "link_plot_3d_nested_model"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-04-30T17:38:28.997005+00:00"}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"update": {"description": "The LinkPlot3dPlugin can trace the paths of links in a simulation and is used with a `double_pendulum_with_base` model in [plot3d.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/worlds/plot3d.world?at=default&fileviewer=file-view-default). The double pendulum model is `<include>`d into the parent model as a sibling of the plugin element, which causes the double pendulum links to be added to the parent model with model namespacing using the `::` delimiter.\r\n\r\nI tried following this pattern with the example world included in this pull request, which is a modified version of the [friction_cone.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/test/worlds/friction_cone.world?at=default&fileviewer=file-view-default), but it didn't work because this world has models [nested with explicit `<model>` tags](#!/osrf/gazebo/src/c2315ca10a801df4edcc174ccd9a5ccdbae4019d/worlds/friction_pyramid.world?fileviewer=file-view-default#friction_pyramid.world-19:20), and the LinkPlot3dPlugin is not able to find the specified links in this case. When I tried using `::` with the nested model name as a prefix, I saw console errors like the following:\r\n\r\n~~~\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_0::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_1::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_2::link_1] in model [boxes]\r\n~~~\r\n\r\nTo find the links, the plugin needs to get a pointer to the nested model using the `Model::NestedModel` function. So if inside a `<plot>` element you specify a `<model>` tag with a model name alongside the `<link>` tag, it will now use that to search for a link inside a nested model.\r\n\r\nHere's an animation of that test world with this branch:\r\n\r\n* https://vimeo.com/327118010\r\n\r\nand here's another animation if you change the `friction_model` tag to `cone_friction`:\r\n\r\n* https://vimeo.com/327117996", "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models", "destination": {"commit": {"hash": "7e5f4b84705f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/7e5f4b84705f.json"}, "html": {"href": "#!/osrf/gazebo/commits/7e5f4b84705f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "498592f882c8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/498592f882c8.json"}, "html": {"href": "#!/osrf/gazebo/commits/498592f882c8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "link_plot_3d_nested_model"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2019-04-30T17:33:06.928014+00:00"}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"approval": {"date": "2019-04-11T23:11:14.696307+00:00", "pullrequest": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/98544727.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-98544727"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}, "content": {"raw": "Beautiful!\n\n![friction_pyramid.gif](data/bitbucket.org/repo/jgXqbo/images/1647972127-friction_pyramid.gif)", "markup": "markdown", "html": "<p>Beautiful!</p>\n<p><img alt=\"friction_pyramid.gif\" src=\"data/bitbucket.org/repo/jgXqbo/images/1647972127-friction_pyramid.gif\" /></p>", "type": "rendered"}, "created_on": "2019-04-11T23:11:12.215312+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-04-11T23:11:12.224645+00:00", "type": "pullrequest_comment", "id": 98544727}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96987792.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96987792"}}, "parent": {"id": 96983036, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96983036.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96983036"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}, "content": {"raw": "using `/` as separator for nested models in 9c2b5ae\n\ntested with the following\n\n~~~\ndiff -r 68dbeb55bdaf worlds/friction_pyramid.world\n--- a/worlds/friction_pyramid.world\tThu Mar 28 15:37:26 2019 -0700\n+++ b/worlds/friction_pyramid.world\tFri Mar 29 18:00:49 2019 -0700\n@@ -1506,6 +1506,7 @@\n         </plugin>\n       </model>\n       <model name='box_31'>\n+      <model name='box_31'>\n         <pose>8.827067523629072 -1.7558128981451584 0.1 0 -0 0</pose>\n         <link name='link_1'>\n           <inertial>\n@@ -1553,6 +1554,7 @@\n           <angular>0 0 0</angular>\n         </plugin>\n       </model>\n+      </model>\n       <plugin name=\"3dplot\" filename=\"libLinkPlot3DPlugin.so\">\n         <frequency>10</frequency>\n         <plot>\n@@ -1742,7 +1744,7 @@\n           <material>Gazebo/Blue</material>\n         </plot>\n         <plot>\n-          <model>box_31</model>\n+          <model>box_31/box_31</model>\n           <link>link_1</link>\n           <pose>0 0 1 0 0 0</pose>\n           <material>Gazebo/Blue</material>\n~~~", "markup": "markdown", "html": "<p>using <code>/</code> as separator for nested models in <a href=\"#!/osrf/gazebo/commits/9c2b5ae\" rel=\"nofollow\" class=\"ap-connect-link\">9c2b5ae</a></p>\n<p>tested with the following</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 68dbeb55bdaf worlds/friction_pyramid.world</span>\n<span class=\"gd\">--- a/worlds/friction_pyramid.world Thu Mar 28 15:37:26 2019 -0700</span>\n<span class=\"gi\">+++ b/worlds/friction_pyramid.world Fri Mar 29 18:00:49 2019 -0700</span>\n<span class=\"gu\">@@ -1506,6 +1506,7 @@</span>\n         &lt;/plugin&gt;\n       &lt;/model&gt;\n       &lt;model name=&#39;box_31&#39;&gt;\n<span class=\"gi\">+      &lt;model name=&#39;box_31&#39;&gt;</span>\n         &lt;pose&gt;8.827067523629072 -1.7558128981451584 0.1 0 -0 0&lt;/pose&gt;\n         &lt;link name=&#39;link_1&#39;&gt;\n           &lt;inertial&gt;\n<span class=\"gu\">@@ -1553,6 +1554,7 @@</span>\n           &lt;angular&gt;0 0 0&lt;/angular&gt;\n         &lt;/plugin&gt;\n       &lt;/model&gt;\n<span class=\"gi\">+      &lt;/model&gt;</span>\n       &lt;plugin name=&quot;3dplot&quot; filename=&quot;libLinkPlot3DPlugin.so&quot;&gt;\n         &lt;frequency&gt;10&lt;/frequency&gt;\n         &lt;plot&gt;\n<span class=\"gu\">@@ -1742,7 +1744,7 @@</span>\n           &lt;material&gt;Gazebo/Blue&lt;/material&gt;\n         &lt;/plot&gt;\n         &lt;plot&gt;\n<span class=\"gd\">-          &lt;model&gt;box_31&lt;/model&gt;</span>\n<span class=\"gi\">+          &lt;model&gt;box_31/box_31&lt;/model&gt;</span>\n           &lt;link&gt;link_1&lt;/link&gt;\n           &lt;pose&gt;0 0 1 0 0 0&lt;/pose&gt;\n           &lt;material&gt;Gazebo/Blue&lt;/material&gt;\n</pre></div>", "type": "rendered"}, "created_on": "2019-03-30T01:02:44.153880+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-03-30T01:02:44.161541+00:00", "type": "pullrequest_comment", "id": 96987792}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"update": {"description": "The LinkPlot3dPlugin can trace the paths of links in a simulation and is used with a `double_pendulum_with_base` model in [plot3d.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/worlds/plot3d.world?at=default&fileviewer=file-view-default). The double pendulum model is `<include>`d into the parent model as a sibling of the plugin element, which causes the double pendulum links to be added to the parent model with model namespacing using the `::` delimiter.\r\n\r\nI tried following this pattern with the example world included in this pull request, which is a modified version of the [friction_cone.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/test/worlds/friction_cone.world?at=default&fileviewer=file-view-default), but it didn't work because this world has models [nested with explicit `<model>` tags](#!/osrf/gazebo/src/c2315ca10a801df4edcc174ccd9a5ccdbae4019d/worlds/friction_pyramid.world?fileviewer=file-view-default#friction_pyramid.world-19:20), and the LinkPlot3dPlugin is not able to find the specified links in this case. When I tried using `::` with the nested model name as a prefix, I saw console errors like the following:\r\n\r\n~~~\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_0::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_1::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_2::link_1] in model [boxes]\r\n~~~\r\n\r\nTo find the links, the plugin needs to get a pointer to the nested model using the `Model::NestedModel` function. So if inside a `<plot>` element you specify a `<model>` tag with a model name alongside the `<link>` tag, it will now use that to search for a link inside a nested model.\r\n\r\nHere's an animation of that test world with this branch:\r\n\r\n* https://vimeo.com/327118010\r\n\r\nand here's another animation if you change the `friction_model` tag to `cone_friction`:\r\n\r\n* https://vimeo.com/327117996", "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models", "destination": {"commit": {"hash": "868ff36b8b09", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/868ff36b8b09.json"}, "html": {"href": "#!/osrf/gazebo/commits/868ff36b8b09"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "9c2b5ae09084", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/9c2b5ae09084.json"}, "html": {"href": "#!/osrf/gazebo/commits/9c2b5ae09084"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "link_plot_3d_nested_model"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-03-30T01:01:43.363384+00:00"}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96983446.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96983446"}}, "parent": {"id": 96983178, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96983178.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96983178"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}, "content": {"raw": "True, +1", "markup": "markdown", "html": "<p>True, +1</p>", "type": "rendered"}, "created_on": "2019-03-29T22:20:20.935389+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-03-29T22:20:20.947435+00:00", "type": "pullrequest_comment", "id": 96983446}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96983178.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96983178"}}, "parent": {"id": 96983036, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96983036.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96983036"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}, "content": {"raw": "that link uses `/` as the delimiter, which I would be fine with", "markup": "markdown", "html": "<p>that link uses <code>/</code> as the delimiter, which I would be fine with</p>", "type": "rendered"}, "created_on": "2019-03-29T22:14:33.378567+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-03-29T22:14:33.390614+00:00", "type": "pullrequest_comment", "id": 96983178}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96983036.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96983036"}}, "parent": {"id": 96981720, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96981720.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96981720"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}, "content": {"raw": "How about using the URI style used by plotting for example, i.e. `model::model_name1::model::model_name2::link::link_name`, see an example [here](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/gazebo/physics/Model.cc?at=default&fileviewer=file-view-default#Model.cc-1713).", "markup": "markdown", "html": "<p>How about using the URI style used by plotting for example, i.e. <code>model::model_name1::model::model_name2::link::link_name</code>, see an example <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/gazebo/physics/Model.cc?at=default&amp;fileviewer=file-view-default#Model.cc-1713\" rel=\"nofollow\">here</a>.</p>", "type": "rendered"}, "created_on": "2019-03-29T22:11:22.779317+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-03-29T22:11:22.788662+00:00", "type": "pullrequest_comment", "id": 96983036}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96981720.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96981720"}}, "parent": {"id": 96980493, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96980493.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96980493"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}, "content": {"raw": "do you have a suggested syntax?\n\nfor this model:\n\n~~~\n<model name=\"model1\">\n  <model name=\"model2\">\n    ...\n      <model name=\"modelN\">\n        <link name=\"link\">\n~~~\n\nono option: just put sequential `<model>` tags and depend on the ordering of the tags?\n\n~~~\n    <model>model1</model>\n    <model>model2</model>\n    ...\n    <model>modelN</model>\n    <link>link</link>\n~~~\n", "markup": "markdown", "html": "<p>do you have a suggested syntax?</p>\n<p>for this model:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;model name=&quot;model1&quot;&gt;\n  &lt;model name=&quot;model2&quot;&gt;\n    ...\n      &lt;model name=&quot;modelN&quot;&gt;\n        &lt;link name=&quot;link&quot;&gt;\n</pre></div>\n\n\n<p>ono option: just put sequential <code>&lt;model&gt;</code> tags and depend on the ordering of the tags?</p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"nt\">&lt;model&gt;</span>model1<span class=\"nt\">&lt;/model&gt;</span>\n    <span class=\"nt\">&lt;model&gt;</span>model2<span class=\"nt\">&lt;/model&gt;</span>\n    ...\n    <span class=\"nt\">&lt;model&gt;</span>modelN<span class=\"nt\">&lt;/model&gt;</span>\n    <span class=\"nt\">&lt;link&gt;</span>link<span class=\"nt\">&lt;/link&gt;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2019-03-29T21:48:19.343485+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-03-29T21:48:19.351565+00:00", "type": "pullrequest_comment", "id": 96981720}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96980493.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96980493"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}, "content": {"raw": "If we want to be super general, we may want to support models that are nested arbitrarily deep", "markup": "markdown", "html": "<p>If we want to be super general, we may want to support models that are nested arbitrarily deep</p>", "type": "rendered"}, "created_on": "2019-03-29T21:29:10.713955+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-03-29T21:29:10.722301+00:00", "type": "pullrequest_comment", "id": 96980493}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96979292.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96979292"}}, "parent": {"id": 96946822, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96946822.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96946822"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}, "content": {"raw": "CI looks fine to me, ready for review", "markup": "markdown", "html": "<p>CI looks fine to me, ready for review</p>", "type": "rendered"}, "created_on": "2019-03-29T21:12:58.253014+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-03-29T21:12:58.262740+00:00", "type": "pullrequest_comment", "id": 96979292}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095/comments/96946822.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095/_/diff#comment-96946822"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}, "content": {"raw": "homebrew build computer got disconnected, restarting\n\n* [![Build Status](https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr_any-homebrew-amd64&build=1701)](https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1701/) https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1701/", "markup": "markdown", "html": "<p>homebrew build computer got disconnected, restarting</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1701/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr_any-homebrew-amd64&amp;build=1701\" /></a> <a href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1701/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-pr_any-homebrew-amd64/1701/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2019-03-29T16:00:09.461474+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-03-29T16:00:09.475705+00:00", "type": "pullrequest_comment", "id": 96946822}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"update": {"description": "The LinkPlot3dPlugin can trace the paths of links in a simulation and is used with a `double_pendulum_with_base` model in [plot3d.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/worlds/plot3d.world?at=default&fileviewer=file-view-default). The double pendulum model is `<include>`d into the parent model as a sibling of the plugin element, which causes the double pendulum links to be added to the parent model with model namespacing using the `::` delimiter.\r\n\r\nI tried following this pattern with the example world included in this pull request, which is a modified version of the [friction_cone.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/test/worlds/friction_cone.world?at=default&fileviewer=file-view-default), but it didn't work because this world has models [nested with explicit `<model>` tags](#!/osrf/gazebo/src/c2315ca10a801df4edcc174ccd9a5ccdbae4019d/worlds/friction_pyramid.world?fileviewer=file-view-default#friction_pyramid.world-19:20), and the LinkPlot3dPlugin is not able to find the specified links in this case. When I tried using `::` with the nested model name as a prefix, I saw console errors like the following:\r\n\r\n~~~\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_0::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_1::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_2::link_1] in model [boxes]\r\n~~~\r\n\r\nTo find the links, the plugin needs to get a pointer to the nested model using the `Model::NestedModel` function. So if inside a `<plot>` element you specify a `<model>` tag with a model name alongside the `<link>` tag, it will now use that to search for a link inside a nested model.\r\n\r\nHere's an animation of that test world with this branch:\r\n\r\n* https://vimeo.com/327118010\r\n\r\nand here's another animation if you change the `friction_model` tag to `cone_friction`:\r\n\r\n* https://vimeo.com/327117996", "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models", "destination": {"commit": {"hash": "868ff36b8b09", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/868ff36b8b09.json"}, "html": {"href": "#!/osrf/gazebo/commits/868ff36b8b09"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "68dbeb55bdaf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/68dbeb55bdaf.json"}, "html": {"href": "#!/osrf/gazebo/commits/68dbeb55bdaf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "link_plot_3d_nested_model"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-03-28T22:40:48.083256+00:00"}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}, {"update": {"description": "The LinkPlot3dPlugin can trace the paths of links in a simulation and is used with a `double_pendulum_with_base` model in [plot3d.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/worlds/plot3d.world?at=default&fileviewer=file-view-default). The double pendulum model is `<include>`d into the parent model as a sibling of the plugin element, which causes the double pendulum links to be added to the parent model with model namespacing using the `::` delimiter.\r\n\r\nI tried following this pattern with the example world included in this pull request, which is a modified version of the [friction_cone.world](#!/osrf/gazebo/src/676a14f7642c3516e6a779ac276e8898cd7d0f79/test/worlds/friction_cone.world?at=default&fileviewer=file-view-default), but it didn't work because this world has models [nested with explicit `<model>` tags](#!/osrf/gazebo/src/c2315ca10a801df4edcc174ccd9a5ccdbae4019d/worlds/friction_pyramid.world?fileviewer=file-view-default#friction_pyramid.world-19:20), and the LinkPlot3dPlugin is not able to find the specified links in this case. When I tried using `::` with the nested model name as a prefix, I saw console errors like the following:\r\n\r\n~~~\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_0::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_1::link_1] in model [boxes]\r\n[Err] [LinkPlot3DPlugin.cc:150] Couldn't find link [box_2::link_1] in model [boxes]\r\n~~~\r\n\r\nTo find the links, the plugin needs to get a pointer to the nested model using the `Model::NestedModel` function. So if inside a `<plot>` element you specify a `<model>` tag with a model name alongside the `<link>` tag, it will now use that to search for a link inside a nested model.\r\n\r\nHere's an animation of that test world with this branch:\r\n\r\n* https://vimeo.com/327118010\r\n\r\nand here's another animation if you change the `friction_model` tag to `cone_friction`:\r\n\r\n* https://vimeo.com/327117996", "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models", "destination": {"commit": {"hash": "868ff36b8b09", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/868ff36b8b09.json"}, "html": {"href": "#!/osrf/gazebo/commits/868ff36b8b09"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "68dbeb55bdaf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/68dbeb55bdaf.json"}, "html": {"href": "#!/osrf/gazebo/commits/68dbeb55bdaf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "link_plot_3d_nested_model"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-03-28T22:40:48.025898+00:00"}, "pull_request": {"type": "pullrequest", "id": 3095, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3095"}}, "title": "LinkPlot3dPlugin: read optional <model> tag to find links in nested models"}}]}