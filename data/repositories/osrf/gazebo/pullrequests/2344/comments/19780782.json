{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2344/comments/19780782.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2344/_/diff#comment-19780782"}}, "parent": {"id": 19763661, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2344/comments/19763661.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2344/_/diff#comment-19763661"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2344, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2344.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2344"}}, "title": "Config and cmake fixes for Windows build"}, "content": {"raw": "I've been able to get a ign-transport (which includes zeromq and cppzmq), ign-math and protobuf package resolutions working which enabled a big consolidation of the configure.bat script.\n\nI've removed my hard-coded F:\\ paths and set all dependencies referred to in the configure script to be under the current directory.\n\nThose changes are committed.\n\nOne problem I have encountered is that the ign-transport cmake script is written to detect the ign-transport and zeromq libraries as dll's. I can't think why it's done that way?\n\nignition-transport1-config.cmake line 40: SET(CMAKE_FIND_SUFFIXES \".lib\" \".dll\")\nFindZeroMQ.cmake line 95: find_library(ZeroMQ_LIBRARY_RELEASE\n    NAMES ${_zmq_release_names} zmq libzmq\n    HINTS ${ZeroMQ_ROOT_DIR}/bin\n          ${ZeroMQ_ROOT_DIR}/lib\n    )\n\nI had to remove the \".dll\" suffix or the gazebo cmake script ended up trying to link against libzmq-v120-mt-gd-4_0_4.dll.\n\n**Update:**\nActually the .lib .dll problem for zeromq might be caused by a different cmake lookup script. Removing the \".dll\" suffix didn't actually fix the problem. I had to rename the bin directory under the zeromq tree to make it pick the .lib file. I'll have a bit more of a look into this.", "markup": "markdown", "html": "<p>I've been able to get a ign-transport (which includes zeromq and cppzmq), ign-math and protobuf package resolutions working which enabled a big consolidation of the configure.bat script.</p>\n<p>I've removed my hard-coded F:\\ paths and set all dependencies referred to in the configure script to be under the current directory.</p>\n<p>Those changes are committed.</p>\n<p>One problem I have encountered is that the ign-transport cmake script is written to detect the ign-transport and zeromq libraries as dll's. I can't think why it's done that way?</p>\n<p>ignition-transport1-config.cmake line 40: SET(CMAKE_FIND_SUFFIXES \".lib\" \".dll\")\nFindZeroMQ.cmake line 95: find_library(ZeroMQ_LIBRARY_RELEASE\n    NAMES ${_zmq_release_names} zmq libzmq\n    HINTS ${ZeroMQ_ROOT_DIR}/bin\n          ${ZeroMQ_ROOT_DIR}/lib\n    )</p>\n<p>I had to remove the \".dll\" suffix or the gazebo cmake script ended up trying to link against libzmq-v120-mt-gd-4_0_4.dll.</p>\n<p><strong>Update:</strong>\nActually the .lib .dll problem for zeromq might be caused by a different cmake lookup script. Removing the \".dll\" suffix didn't actually fix the problem. I had to rename the bin directory under the zeromq tree to make it pick the .lib file. I'll have a bit more of a look into this.</p>", "type": "rendered"}, "created_on": "2016-06-15T11:28:08.003296+00:00", "user": {"display_name": "Aaron Clauson", "uuid": "{80d9ee60-d587-47a9-baa5-5005304756a7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B80d9ee60-d587-47a9-baa5-5005304756a7%7D"}, "html": {"href": "https://bitbucket.org/%7B80d9ee60-d587-47a9-baa5-5005304756a7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a91a9c7849303cad7efa3423f1feba30d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsAC-5.png"}}, "nickname": "azaclauson", "type": "user", "account_id": "557058:c389a3f4-daff-47aa-8c04-b81dd4520568"}, "updated_on": "2016-06-15T12:00:59.958405+00:00", "type": "pullrequest_comment", "id": 19780782}