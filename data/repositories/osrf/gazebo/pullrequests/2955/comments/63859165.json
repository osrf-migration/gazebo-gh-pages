{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2955/comments/63859165.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2955/_/diff#comment-63859165"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2955, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2955.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2955"}}, "title": "Fix GpuRaySensor vertical rays"}, "content": {"raw": "That's strange because the tests passed yesterday on my machine. I will check it again tomorrow.\n\nYes, the borders look similar for me but this also depends on the resolution. My guess about the saw looking border: I think it is due to the (vertical) resolution of the depth image. At large incident angles (near 90 degrees) there are big depth steps between neighbouring pixels. You can increase the resolution to reduce that effect but I think just because of the way the depth image is computed we can never completely avoid it. \n\n![laser_saw_shape.JPG](data/bitbucket.org/repo/jgXqbo/images/816016077-laser_saw_shape.JPG)\n\nIdeally we would have a parameter to increase the internal resolution of the first pass depth image without changing the resulting scan size. Unfortunately we can't use the \"resolution\" parameter for that without breaking consistency with the CPU laser.\n\nAlternatively one could try to apply smoothing (anti-aliasing?) to the textures mapped for the second pass. But I'm not sure if that is really a good idea. It could also mess up the ranges.", "markup": "markdown", "html": "<p>That's strange because the tests passed yesterday on my machine. I will check it again tomorrow.</p>\n<p>Yes, the borders look similar for me but this also depends on the resolution. My guess about the saw looking border: I think it is due to the (vertical) resolution of the depth image. At large incident angles (near 90 degrees) there are big depth steps between neighbouring pixels. You can increase the resolution to reduce that effect but I think just because of the way the depth image is computed we can never completely avoid it. </p>\n<p><img alt=\"laser_saw_shape.JPG\" src=\"data/bitbucket.org/repo/jgXqbo/images/816016077-laser_saw_shape.JPG\" /></p>\n<p>Ideally we would have a parameter to increase the internal resolution of the first pass depth image without changing the resulting scan size. Unfortunately we can't use the \"resolution\" parameter for that without breaking consistency with the CPU laser.</p>\n<p>Alternatively one could try to apply smoothing (anti-aliasing?) to the textures mapped for the second pass. But I'm not sure if that is really a good idea. It could also mess up the ranges.</p>", "type": "rendered"}, "created_on": "2018-05-10T08:21:01.355457+00:00", "user": {"display_name": "Jacob Seibert", "uuid": "{1b2f445c-78b0-4f05-a62c-681c2ccf481c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1b2f445c-78b0-4f05-a62c-681c2ccf481c%7D"}, "html": {"href": "https://bitbucket.org/%7B1b2f445c-78b0-4f05-a62c-681c2ccf481c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/initials/JS-5.png"}}, "nickname": "jacob", "type": "user", "account_id": "5acdbbdcb783d22b5dadd70b"}, "updated_on": "2018-05-10T08:36:20.378153+00:00", "type": "pullrequest_comment", "id": 63859165}