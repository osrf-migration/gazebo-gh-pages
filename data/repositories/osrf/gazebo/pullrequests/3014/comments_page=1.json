{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014/comments/75816002.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014/_/diff#comment-75816002"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3014, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014"}}, "title": "[WIP] Address gzserver shutdown speed"}, "content": {"raw": "This doesn't fix the `kill -9` issue, right?", "markup": "markdown", "html": "<p>This doesn't fix the <code>kill -9</code> issue, right?</p>", "type": "rendered"}, "created_on": "2018-09-12T21:27:40.306873+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2018-09-12T21:27:40.316626+00:00", "type": "pullrequest_comment", "id": 75816002}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014/comments/75816033.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:2d0d711a856e..37909779f2fd?path=gazebo%2Ftransport%2FPublisher.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014/_/diff#comment-75816033"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3014, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014"}}, "title": "[WIP] Address gzserver shutdown speed"}, "content": {"raw": "You can capture line 262 in the comment.", "markup": "markdown", "html": "<p>You can capture line 262 in the comment.</p>", "type": "rendered"}, "created_on": "2018-09-12T21:28:05.393887+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": 266, "from": null, "path": "gazebo/transport/Publisher.cc"}, "updated_on": "2018-09-12T21:28:05.401396+00:00", "type": "pullrequest_comment", "id": 75816033}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014/comments/75818803.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:2d0d711a856e..37909779f2fd?path=gazebo%2Ftransport%2FPublisher.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014/_/diff#comment-75818803"}}, "parent": {"id": 75816033, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014/comments/75816033.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014/_/diff#comment-75816033"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3014, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014"}}, "title": "[WIP] Address gzserver shutdown speed"}, "content": {"raw": "Agree, I would like to see if this change disrupts anything on CI, will make a more complete PR when I see that.", "markup": "markdown", "html": "<p>Agree, I would like to see if this change disrupts anything on CI, will make a more complete PR when I see that.</p>", "type": "rendered"}, "created_on": "2018-09-12T22:10:07.921587+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "inline": {"to": null, "from": null, "path": "gazebo/transport/Publisher.cc"}, "updated_on": "2018-09-12T22:10:07.929925+00:00", "type": "pullrequest_comment", "id": 75818803}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014/comments/75818756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014/_/diff#comment-75818756"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3014, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014"}}, "title": "[WIP] Address gzserver shutdown speed"}, "content": {"raw": "If gazebo ends quickly and cleanly with SIGINT and SIGTERM, then you shouldn't need `kill -9` to take it down.  With this modification in the benchmark \\(mud.world\\), it brings shutdown time from 55 seconds \u2192 0.5 seconds.", "markup": "markdown", "html": "<p>If gazebo ends quickly and cleanly with SIGINT and SIGTERM, then you shouldn't need <code>kill -9</code> to take it down.  With this modification in the benchmark (mud.world), it brings shutdown time from 55 seconds \u2192 0.5 seconds.</p>", "type": "rendered"}, "created_on": "2018-09-12T22:09:35.851838+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2018-09-12T22:09:35.858016+00:00", "type": "pullrequest_comment", "id": 75818756}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014/comments/75963053.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014/_/diff#comment-75963053"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3014, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014"}}, "title": "[WIP] Address gzserver shutdown speed"}, "content": {"raw": "The test was failing in CI because a Publisher was shutting down before all of it's `OnPublishComplete` callbacks had been fired.  We can catch the exception here, but I don\u2019t really like this answer.  I\u2019m going to see if I can flush out all of the pending callbacks as the Publisher is being shut down.", "markup": "markdown", "html": "<p>The test was failing in CI because a Publisher was shutting down before all of it's <code>OnPublishComplete</code> callbacks had been fired.  We can catch the exception here, but I don\u2019t really like this answer.  I\u2019m going to see if I can flush out all of the pending callbacks as the Publisher is being shut down.</p>", "type": "rendered"}, "created_on": "2018-09-14T00:42:02.962462+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2018-09-14T00:42:02.969457+00:00", "type": "pullrequest_comment", "id": 75963053}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014/comments/76056611.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014/_/diff#comment-76056611"}}, "parent": {"id": 75963053, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014/comments/75963053.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014/_/diff#comment-75963053"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3014, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014"}}, "title": "[WIP] Address gzserver shutdown speed"}, "content": {"raw": "I\u2019m okay with this solution. It\u2019s not ideal, but a working solution is better than nothing.", "markup": "markdown", "html": "<p>I\u2019m okay with this solution. It\u2019s not ideal, but a working solution is better than nothing.</p>", "type": "rendered"}, "created_on": "2018-09-14T16:30:57.962349+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2018-09-14T16:30:57.969289+00:00", "type": "pullrequest_comment", "id": 76056611}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014/comments/76074287.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014/_/diff#comment-76074287"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3014, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014"}}, "title": "[WIP] Address gzserver shutdown speed"}, "content": {"raw": "Rebuilding Linux: [https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr\\_any-xenial-amd64-gpu-nvidia&build=681](https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr_any-xenial-amd64-gpu-nvidia&build=681)", "markup": "markdown", "html": "<p>Rebuilding Linux: <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr_any-xenial-amd64-gpu-nvidia&amp;build=681\" rel=\"nofollow\">https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-pr_any-xenial-amd64-gpu-nvidia&amp;build=681</a></p>", "type": "rendered"}, "created_on": "2018-09-14T20:01:54.190360+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2018-09-14T20:01:54.197703+00:00", "type": "pullrequest_comment", "id": 76074287}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014/comments/100189015.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:91b2b9a726d0..37909779f2fd?path=gazebo%2Ftransport%2FPublisher.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014/_/diff#comment-100189015"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3014, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3014.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3014"}}, "title": "[WIP] Address gzserver shutdown speed"}, "content": {"raw": "@carromj while testing pull request #3103, I'm seeing some backtraces implicating `Publisher::OnPublishComplete`, and it looks to me like `this->mutex` will be locked inside the `try` block and then immediately released, so the later operations on `this->pubIds` won't be protected by the mutex. Were those operations intentionally excluded from the try-catch, or should I experiment with putting them inside so they will have mutex protection? Hopefully that change doesn't mess up the shutdown", "markup": "markdown", "html": "<p>@carromj while testing <a href=\"#!/osrf/gazebo/pull-requests/3103/fix-race-conditions-in-master\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #3103</a>, I'm seeing some backtraces implicating <code>Publisher::OnPublishComplete</code>, and it looks to me like <code>this-&gt;mutex</code> will be locked inside the <code>try</code> block and then immediately released, so the later operations on <code>this-&gt;pubIds</code> won't be protected by the mutex. Were those operations intentionally excluded from the try-catch, or should I experiment with putting them inside so they will have mutex protection? Hopefully that change doesn't mess up the shutdown</p>", "type": "rendered"}, "created_on": "2019-04-26T18:06:12.546439+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 243, "from": null, "path": "gazebo/transport/Publisher.cc"}, "updated_on": "2019-04-26T18:06:12.618353+00:00", "type": "pullrequest_comment", "id": 100189015}], "page": 1, "size": 8}