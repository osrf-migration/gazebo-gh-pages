{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1054/comments/1581523.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1054/_/diff#comment-1581523"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1054, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1054.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1054"}}, "title": "fix dart and simbody joint axis interpretation incorrect (#1143)"}, "content": {"raw": "`494_joint_axis_frame.cc` is failing with following errors:\n~~~\n$ ../build_release/test/regression/REGRESSION_494_joint_axis_frame --gtest_filter=\"*/2\"\n~~~\n~~~\n[Dbg] [ServerFixture.cc:144] ServerFixture load in 1.1 seconds, timeout after 600 seconds\n[Dbg] [494_joint_axis_frame.cc:82] SpawnJoint revolute child parent\n[Dbg] [SimbodyHingeJoint.cc:178] GetAngleImpl() simbody not yet initialized, initial angle should be zero until <initial_angle> is implemented.\n[Err] [SimbodyJoint.cc:386] SimbodyJoint::SetAnchor:  Not implement in Simbody. Anchor is set during joint construction in SimbodyPhysics.cc\n[Dbg] [SimbodyHingeJoint.cc:55] SetAxis: setting axis is not yet implemented.  The axis are set  during joint construction in SimbodyPhysics.cc for now.\n[Err] [494_joint_axis_frame.cc:118] not worldParent\n[Dbg] [SimbodyHingeJoint.cc:142] GetGlobalAxis() sibmody physics engine not initialized yet, use local axis and initial pose to compute global axis.\n[Err] [494_joint_axis_frame.cc:216] joint t [1] v [1] a [0.965926 0.258819 0] c [0.866026 0.499999 0] p [0 0 0]\n/home/hsu/projects/gazebo_default_20/test/regression/494_joint_axis_frame.cc:223: Failure\nThe difference between vel and _axis.Dot(childVelocity - parentVelocity) is 0.034073972971610633, which exceeds g_tolerance, where\nvel evaluates to 1,\n_axis.Dot(childVelocity - parentVelocity) evaluates to 0.96592602702838937, and\ng_tolerance evaluates to 0.0001.\n[Err] [494_joint_axis_frame.cc:216] joint t [0] v [0] a [0.965926 0.258819 0] c [0 0 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [-1] v [-1] a [0.965926 0.258819 0] c [-0.866026 -0.499999 0] p [0 0 0]\n/home/hsu/projects/gazebo_default_20/test/regression/494_joint_axis_frame.cc:223: Failure\nThe difference between vel and _axis.Dot(childVelocity - parentVelocity) is 0.034073972971610633, which exceeds g_tolerance, where\nvel evaluates to -1,\n_axis.Dot(childVelocity - parentVelocity) evaluates to -0.96592602702838937, and\ng_tolerance evaluates to 0.0001.\n[Dbg] [SimbodyHingeJoint.cc:178] GetAngleImpl() simbody not yet initialized, initial angle should be zero until <initial_angle> is implemented.\n[Err] [SimbodyJoint.cc:386] SimbodyJoint::SetAnchor:  Not implement in Simbody. Anchor is set during joint construction in SimbodyPhysics.cc\n[Dbg] [SimbodyHingeJoint.cc:55] SetAxis: setting axis is not yet implemented.  The axis are set  during joint construction in SimbodyPhysics.cc for now.\n[Err] [494_joint_axis_frame.cc:138] not worldChild\n[Err] [494_joint_axis_frame.cc:216] joint t [1] v [1] a [0.707107 0.707107 0] c [0.707108 0.707106 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [0] v [0] a [0.707107 0.707107 0] c [0 0 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [-1] v [-1] a [0.707107 0.707107 0] c [-0.707108 -0.707106 0] p [0 0 0]\n[Dbg] [494_joint_axis_frame.cc:82] SpawnJoint revolute child world\n[Dbg] [SimbodyHingeJoint.cc:178] GetAngleImpl() simbody not yet initialized, initial angle should be zero until <initial_angle> is implemented.\n[Err] [SimbodyJoint.cc:386] SimbodyJoint::SetAnchor:  Not implement in Simbody. Anchor is set during joint construction in SimbodyPhysics.cc\n[Dbg] [SimbodyHingeJoint.cc:55] SetAxis: setting axis is not yet implemented.  The axis are set  during joint construction in SimbodyPhysics.cc for now.\n[Err] [494_joint_axis_frame.cc:113] worldParent\n/home/hsu/projects/gazebo_default_20/test/regression/494_joint_axis_frame.cc:158: Failure\nValue of: _joint->GetGlobalAxis(0)\n  Actual: 0.866026 0.499999 0\nExpected: _axis\nWhich is: 1 0 0\n[Err] [494_joint_axis_frame.cc:216] joint t [1] v [1] a [1 0 0] c [0.866026 0.499999 0] p [0 0 0]\n/home/hsu/projects/gazebo_default_20/test/regression/494_joint_axis_frame.cc:223: Failure\nThe difference between vel and _axis.Dot(childVelocity - parentVelocity) is 0.13397420841667218, which exceeds g_tolerance, where\nvel evaluates to 1,\n_axis.Dot(childVelocity - parentVelocity) evaluates to 0.86602579158332782, and\ng_tolerance evaluates to 0.0001.\n[Err] [494_joint_axis_frame.cc:216] joint t [0] v [0] a [1 0 0] c [0 0 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [-1] v [-1] a [1 0 0] c [-0.866026 -0.499999 0] p [0 0 0]\n/home/hsu/projects/gazebo_default_20/test/regression/494_joint_axis_frame.cc:223: Failure\nThe difference between vel and _axis.Dot(childVelocity - parentVelocity) is 0.13397420841667218, which exceeds g_tolerance, where\nvel evaluates to -1,\n_axis.Dot(childVelocity - parentVelocity) evaluates to -0.86602579158332782, and\ng_tolerance evaluates to 0.0001.\n[Dbg] [SimbodyHingeJoint.cc:178] GetAngleImpl() simbody not yet initialized, initial angle should be zero until <initial_angle> is implemented.\n[Err] [SimbodyJoint.cc:386] SimbodyJoint::SetAnchor:  Not implement in Simbody. Anchor is set during joint construction in SimbodyPhysics.cc\n[Dbg] [SimbodyHingeJoint.cc:55] SetAxis: setting axis is not yet implemented.  The axis are set  during joint construction in SimbodyPhysics.cc for now.\n[Err] [494_joint_axis_frame.cc:138] not worldChild\n[Err] [494_joint_axis_frame.cc:216] joint t [1] v [1] a [0.707107 0.707107 0] c [0.707108 0.707106 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [0] v [0] a [0.707107 0.707107 0] c [0 0 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [-1] v [-1] a [0.707107 0.707107 0] c [-0.707108 -0.707106 0] p [0 0 0]\n[Dbg] [494_joint_axis_frame.cc:82] SpawnJoint revolute world parent\n[Dbg] [SimbodyHingeJoint.cc:178] GetAngleImpl() simbody not yet initialized, initial angle should be zero until <initial_angle> is implemented.\n[Err] [SimbodyPhysics.cc:641] simbodyJoint [joint] does not have a valid child link, which is required\n[Err] [SimbodyJoint.cc:386] SimbodyJoint::SetAnchor:  Not implement in Simbody. Anchor is set during joint construction in SimbodyPhysics.cc\n[Dbg] [SimbodyHingeJoint.cc:55] SetAxis: setting axis is not yet implemented.  The axis are set  during joint construction in SimbodyPhysics.cc for now.\nSegmentation fault (core dumped)\n~~~", "markup": "markdown", "html": "<p><code>494_joint_axis_frame.cc</code> is failing with following errors:</p>\n<div class=\"codehilite\"><pre><span></span>$ ../build_release/test/regression/REGRESSION_494_joint_axis_frame --gtest_filter<span class=\"o\">=</span><span class=\"s2\">&quot;*/2&quot;</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>[Dbg] [ServerFixture.cc:144] ServerFixture load in 1.1 seconds, timeout after 600 seconds\n[Dbg] [494_joint_axis_frame.cc:82] SpawnJoint revolute child parent\n[Dbg] [SimbodyHingeJoint.cc:178] GetAngleImpl() simbody not yet initialized, initial angle should be zero until &lt;initial_angle&gt; is implemented.\n[Err] [SimbodyJoint.cc:386] SimbodyJoint::SetAnchor:  Not implement in Simbody. Anchor is set during joint construction in SimbodyPhysics.cc\n[Dbg] [SimbodyHingeJoint.cc:55] SetAxis: setting axis is not yet implemented.  The axis are set  during joint construction in SimbodyPhysics.cc for now.\n[Err] [494_joint_axis_frame.cc:118] not worldParent\n[Dbg] [SimbodyHingeJoint.cc:142] GetGlobalAxis() sibmody physics engine not initialized yet, use local axis and initial pose to compute global axis.\n[Err] [494_joint_axis_frame.cc:216] joint t [1] v [1] a [0.965926 0.258819 0] c [0.866026 0.499999 0] p [0 0 0]\n/home/hsu/projects/gazebo_default_20/test/regression/494_joint_axis_frame.cc:223: Failure\nThe difference between vel and _axis.Dot(childVelocity - parentVelocity) is 0.034073972971610633, which exceeds g_tolerance, where\nvel evaluates to 1,\n_axis.Dot(childVelocity - parentVelocity) evaluates to 0.96592602702838937, and\ng_tolerance evaluates to 0.0001.\n[Err] [494_joint_axis_frame.cc:216] joint t [0] v [0] a [0.965926 0.258819 0] c [0 0 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [-1] v [-1] a [0.965926 0.258819 0] c [-0.866026 -0.499999 0] p [0 0 0]\n/home/hsu/projects/gazebo_default_20/test/regression/494_joint_axis_frame.cc:223: Failure\nThe difference between vel and _axis.Dot(childVelocity - parentVelocity) is 0.034073972971610633, which exceeds g_tolerance, where\nvel evaluates to -1,\n_axis.Dot(childVelocity - parentVelocity) evaluates to -0.96592602702838937, and\ng_tolerance evaluates to 0.0001.\n[Dbg] [SimbodyHingeJoint.cc:178] GetAngleImpl() simbody not yet initialized, initial angle should be zero until &lt;initial_angle&gt; is implemented.\n[Err] [SimbodyJoint.cc:386] SimbodyJoint::SetAnchor:  Not implement in Simbody. Anchor is set during joint construction in SimbodyPhysics.cc\n[Dbg] [SimbodyHingeJoint.cc:55] SetAxis: setting axis is not yet implemented.  The axis are set  during joint construction in SimbodyPhysics.cc for now.\n[Err] [494_joint_axis_frame.cc:138] not worldChild\n[Err] [494_joint_axis_frame.cc:216] joint t [1] v [1] a [0.707107 0.707107 0] c [0.707108 0.707106 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [0] v [0] a [0.707107 0.707107 0] c [0 0 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [-1] v [-1] a [0.707107 0.707107 0] c [-0.707108 -0.707106 0] p [0 0 0]\n[Dbg] [494_joint_axis_frame.cc:82] SpawnJoint revolute child world\n[Dbg] [SimbodyHingeJoint.cc:178] GetAngleImpl() simbody not yet initialized, initial angle should be zero until &lt;initial_angle&gt; is implemented.\n[Err] [SimbodyJoint.cc:386] SimbodyJoint::SetAnchor:  Not implement in Simbody. Anchor is set during joint construction in SimbodyPhysics.cc\n[Dbg] [SimbodyHingeJoint.cc:55] SetAxis: setting axis is not yet implemented.  The axis are set  during joint construction in SimbodyPhysics.cc for now.\n[Err] [494_joint_axis_frame.cc:113] worldParent\n/home/hsu/projects/gazebo_default_20/test/regression/494_joint_axis_frame.cc:158: Failure\nValue of: _joint-&gt;GetGlobalAxis(0)\n  Actual: 0.866026 0.499999 0\nExpected: _axis\nWhich is: 1 0 0\n[Err] [494_joint_axis_frame.cc:216] joint t [1] v [1] a [1 0 0] c [0.866026 0.499999 0] p [0 0 0]\n/home/hsu/projects/gazebo_default_20/test/regression/494_joint_axis_frame.cc:223: Failure\nThe difference between vel and _axis.Dot(childVelocity - parentVelocity) is 0.13397420841667218, which exceeds g_tolerance, where\nvel evaluates to 1,\n_axis.Dot(childVelocity - parentVelocity) evaluates to 0.86602579158332782, and\ng_tolerance evaluates to 0.0001.\n[Err] [494_joint_axis_frame.cc:216] joint t [0] v [0] a [1 0 0] c [0 0 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [-1] v [-1] a [1 0 0] c [-0.866026 -0.499999 0] p [0 0 0]\n/home/hsu/projects/gazebo_default_20/test/regression/494_joint_axis_frame.cc:223: Failure\nThe difference between vel and _axis.Dot(childVelocity - parentVelocity) is 0.13397420841667218, which exceeds g_tolerance, where\nvel evaluates to -1,\n_axis.Dot(childVelocity - parentVelocity) evaluates to -0.86602579158332782, and\ng_tolerance evaluates to 0.0001.\n[Dbg] [SimbodyHingeJoint.cc:178] GetAngleImpl() simbody not yet initialized, initial angle should be zero until &lt;initial_angle&gt; is implemented.\n[Err] [SimbodyJoint.cc:386] SimbodyJoint::SetAnchor:  Not implement in Simbody. Anchor is set during joint construction in SimbodyPhysics.cc\n[Dbg] [SimbodyHingeJoint.cc:55] SetAxis: setting axis is not yet implemented.  The axis are set  during joint construction in SimbodyPhysics.cc for now.\n[Err] [494_joint_axis_frame.cc:138] not worldChild\n[Err] [494_joint_axis_frame.cc:216] joint t [1] v [1] a [0.707107 0.707107 0] c [0.707108 0.707106 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [0] v [0] a [0.707107 0.707107 0] c [0 0 0] p [0 0 0]\n[Err] [494_joint_axis_frame.cc:216] joint t [-1] v [-1] a [0.707107 0.707107 0] c [-0.707108 -0.707106 0] p [0 0 0]\n[Dbg] [494_joint_axis_frame.cc:82] SpawnJoint revolute world parent\n[Dbg] [SimbodyHingeJoint.cc:178] GetAngleImpl() simbody not yet initialized, initial angle should be zero until &lt;initial_angle&gt; is implemented.\n[Err] [SimbodyPhysics.cc:641] simbodyJoint [joint] does not have a valid child link, which is required\n[Err] [SimbodyJoint.cc:386] SimbodyJoint::SetAnchor:  Not implement in Simbody. Anchor is set during joint construction in SimbodyPhysics.cc\n[Dbg] [SimbodyHingeJoint.cc:55] SetAxis: setting axis is not yet implemented.  The axis are set  during joint construction in SimbodyPhysics.cc for now.\nSegmentation fault (core dumped)\n</pre></div>", "type": "rendered"}, "created_on": "2014-04-03T23:20:58.819298+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2014-04-03T23:20:58.827732+00:00", "type": "pullrequest_comment", "id": 1581523}