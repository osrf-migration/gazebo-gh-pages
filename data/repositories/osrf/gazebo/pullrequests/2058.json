{"rendered": {"description": {"raw": "Useful for simulating realistic cameras and also for emulating projectors as cameras \\(for spatial augmented reality\\).\r\n\r\nTested in ROS Melodic in Ubuntu 18.04.\r\n\r\nRelated with:\r\n\r\n* [https://bitbucket.org/osrf/sdformat/pull-requests/248/added-camera-intrinsics-fx-fy-cx-cy-s](https://bitbucket.org/osrf/sdformat/pull-requests/248/added-camera-intrinsics-fx-fy-cx-cy-s)\r\n* [https://github.com/ros-simulation/gazebo\\_ros\\_pkgs/pull/767](https://github.com/ros-simulation/gazebo_ros_pkgs/pull/767)\r\n\r\nRelated work:\r\n\r\n* [http://ksimek.github.io/2013/06/03/calibrated\\_cameras\\_in\\_opengl/](http://ksimek.github.io/2013/06/03/calibrated_cameras_in_opengl)\r\n\r\n\u200c\r\n\r\nFor testing this PR:\r\n\r\n* [Gazebo world with a chess board \\(camera\\_intrinsics.world\\).](https://github.com/inesc-tec-robotics/gazebo_projection_mapping/blob/hydro-devel/worlds/camera_intrinsics.world)\r\n* [Some images showing the affect of increasing and decreasing each camera intrinsic parameters](https://github.com/inesc-tec-robotics/gazebo_projection_mapping/tree/hydro-devel/docs/camera_intrinsics)\r\n* [Video showing an augmented reality application that needed the extensions that I made for the gazebo camera](https://www.youtube.com/watch?v=b51MOa9KWZ8)\r\n\r\nFor loading the testing world and viewing the camera image using the gazebo\\_ros\\_pkgs, I created a branch which allows to dynamically change the camera parameters using a CameraInfo message:\r\n\r\n* [https://github.com/carlosmccosta/gazebo\\_ros\\_pkgs/tree/melodic-devel\\_camera\\_intrinsics\\_with\\_dynamic\\_update](https://github.com/carlosmccosta/gazebo_ros_pkgs/tree/melodic-devel_camera_intrinsics_with_dynamic_update)\r\n\r\n> roslaunch gazebo\\_ros empty\\_world.launch world\\_name:=/folder\\_path/camera\\_intrinsics.world  \r\n>  rqt\\_image\\_view /camera\\_sensor/image\\_raw\r\n\r\nShould I include the testing world in [gazebo/worlds](https://bitbucket.org/carlosmccosta/gazebo/src/default/worlds) ?\r\n\r\nFor dynamically changing the camera intrinsics and distortion parameters \\(example\\):\r\n\r\n> rostopic pub /camera\\_sensor/set\\_camera\\_info sensor\\_msgs/CameraInfo \"  \r\n>  header:   \r\n>  seq: 30  \r\n>  stamp:   \r\n>  secs: 228  \r\n>  nsecs: 138000000  \r\n>  frame\\_id: \"camera\\_link\"  \r\n>  height: 800  \r\n>  width: 1280  \r\n>  distortion\\_model: \"plumb\\_bob\"  \r\n>  D: \\[-0.03576145443934453, 0.2722152245603684, -0.0017235085650303857, -0.002987164047049061, 0.0\\]  \r\n>  K: \\[1945.035121562, 0.0, 613.836478629, 0.0, 1945.517200549381, -5.52387198283725, 0.0, 0.0, 1.0\\]  \r\n>  R: \\[1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0\\]  \r\n>  P: \\[1945.035121562, 0.0, 613.836478629, -0.0, 0.0, 1945.517200549381, -5.52387198283725, 0.0, 0.0, 0.0, 1.0, 0.0\\]  \r\n>  binning\\_x: 0  \r\n>  binning\\_y: 0  \r\n>  roi:   \r\n>  x\\_offset: 0  \r\n>  y\\_offset: 0  \r\n>  height: 0  \r\n>  width: 0  \r\n>  do\\_rectify: False\"\r\n\r\nWhen changing the intrinsics values \\(K in the msg above\\), the rendered imaged should have a behavior like this:\r\n\r\n* [http://ksimek.github.io/2013/08/13/intrinsic/](http://ksimek.github.io/2013/08/13/intrinsic)\r\n\r\n\u200c\r\n\r\nP.S.\r\n\r\nFor compiling the gazebo and sdformat with their dependencies retrieved from the [gazebo ppa](http://gazebosim.org/tutorials?tut=install_from_source), I had to disable the ignition-fuel\\_tools in [cmake/SearchForStuff.cmake](https://bitbucket.org/carlosmccosta/gazebo/src/d7edd8df514f19e3cc8d2daf0b0e2bc99d1075cc/cmake/SearchForStuff.cmake#lines-744)", "markup": "markdown", "html": "<p>Useful for simulating realistic cameras and also for emulating projectors as cameras (for spatial augmented reality).</p>\n<p>Tested in ROS Melodic in Ubuntu 18.04.</p>\n<p>Related with:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/sdformat/pull-requests/248/added-camera-intrinsics-fx-fy-cx-cy-s\" rel=\"nofollow\">https://bitbucket.org/osrf/sdformat/pull-requests/248/added-camera-intrinsics-fx-fy-cx-cy-s</a></li>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/ros-simulation/gazebo_ros_pkgs/pull/767\" rel=\"nofollow\">https://github.com/ros-simulation/gazebo_ros_pkgs/pull/767</a></li>\n</ul>\n<p>Related work:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"http://ksimek.github.io/2013/06/03/calibrated_cameras_in_opengl\" rel=\"nofollow\">http://ksimek.github.io/2013/06/03/calibrated_cameras_in_opengl/</a></li>\n</ul>\n<p>\u200c</p>\n<p>For testing this PR:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/inesc-tec-robotics/gazebo_projection_mapping/blob/hydro-devel/worlds/camera_intrinsics.world\" rel=\"nofollow\">Gazebo world with a chess board (camera_intrinsics.world).</a></li>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/inesc-tec-robotics/gazebo_projection_mapping/tree/hydro-devel/docs/camera_intrinsics\" rel=\"nofollow\">Some images showing the affect of increasing and decreasing each camera intrinsic parameters</a></li>\n<li><a data-is-external-link=\"true\" href=\"https://www.youtube.com/watch?v=b51MOa9KWZ8\" rel=\"nofollow\">Video showing an augmented reality application that needed the extensions that I made for the gazebo camera</a></li>\n</ul>\n<p>For loading the testing world and viewing the camera image using the gazebo_ros_pkgs, I created a branch which allows to dynamically change the camera parameters using a CameraInfo message:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/carlosmccosta/gazebo_ros_pkgs/tree/melodic-devel_camera_intrinsics_with_dynamic_update\" rel=\"nofollow\">https://github.com/carlosmccosta/gazebo_ros_pkgs/tree/melodic-devel_camera_intrinsics_with_dynamic_update</a></li>\n</ul>\n<blockquote>\n<p>roslaunch gazebo_ros empty_world.launch world_name:=/folder_path/camera_intrinsics.world<br />\n rqt_image_view /camera_sensor/image_raw</p>\n</blockquote>\n<p>Should I include the testing world in <a data-is-external-link=\"true\" href=\"https://bitbucket.org/carlosmccosta/gazebo/src/default/worlds\" rel=\"nofollow\">gazebo/worlds</a> ?</p>\n<p>For dynamically changing the camera intrinsics and distortion parameters (example):</p>\n<blockquote>\n<p>rostopic pub /camera_sensor/set_camera_info sensor_msgs/CameraInfo \"<br />\n header: <br />\n seq: 30<br />\n stamp: <br />\n secs: 228<br />\n nsecs: <a href=\"#!/osrf/gazebo/commits/138000000\" rel=\"nofollow\" class=\"ap-connect-link\">138000000</a><br />\n frame_id: \"camera_link\"<br />\n height: 800<br />\n width: 1280<br />\n distortion_model: \"plumb_bob\"<br />\n D: [-0.<a href=\"#!/osrf/gazebo/commits/03576145443934453\" rel=\"nofollow\" class=\"ap-connect-link\">03576145443934453</a>, 0.<a href=\"#!/osrf/gazebo/commits/2722152245603684\" rel=\"nofollow\" class=\"ap-connect-link\">2722152245603684</a>, -0.<a href=\"#!/osrf/gazebo/commits/0017235085650303857\" rel=\"nofollow\" class=\"ap-connect-link\">0017235085650303857</a>, -0.<a href=\"#!/osrf/gazebo/commits/002987164047049061\" rel=\"nofollow\" class=\"ap-connect-link\">002987164047049061</a>, 0.0]<br />\n K: [1945.<a href=\"#!/osrf/gazebo/commits/035121562\" rel=\"nofollow\" class=\"ap-connect-link\">035121562</a>, 0.0, 613.<a href=\"#!/osrf/gazebo/commits/836478629\" rel=\"nofollow\" class=\"ap-connect-link\">836478629</a>, 0.0, 1945.<a href=\"#!/osrf/gazebo/commits/517200549381\" rel=\"nofollow\" class=\"ap-connect-link\">517200549381</a>, -5.<a href=\"#!/osrf/gazebo/commits/52387198283725\" rel=\"nofollow\" class=\"ap-connect-link\">52387198283725</a>, 0.0, 0.0, 1.0]<br />\n R: [1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0]<br />\n P: [1945.<a href=\"#!/osrf/gazebo/commits/035121562\" rel=\"nofollow\" class=\"ap-connect-link\">035121562</a>, 0.0, 613.<a href=\"#!/osrf/gazebo/commits/836478629\" rel=\"nofollow\" class=\"ap-connect-link\">836478629</a>, -0.0, 0.0, 1945.<a href=\"#!/osrf/gazebo/commits/517200549381\" rel=\"nofollow\" class=\"ap-connect-link\">517200549381</a>, -5.<a href=\"#!/osrf/gazebo/commits/52387198283725\" rel=\"nofollow\" class=\"ap-connect-link\">52387198283725</a>, 0.0, 0.0, 0.0, 1.0, 0.0]<br />\n binning_x: 0<br />\n binning_y: 0<br />\n roi: <br />\n x_offset: 0<br />\n y_offset: 0<br />\n height: 0<br />\n width: 0<br />\n do_rectify: False\"</p>\n</blockquote>\n<p>When changing the intrinsics values (K in the msg above), the rendered imaged should have a behavior like this:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"http://ksimek.github.io/2013/08/13/intrinsic\" rel=\"nofollow\">http://ksimek.github.io/2013/08/13/intrinsic/</a></li>\n</ul>\n<p>\u200c</p>\n<p>P.S.</p>\n<p>For compiling the gazebo and sdformat with their dependencies retrieved from the <a data-is-external-link=\"true\" href=\"http://gazebosim.org/tutorials?tut=install_from_source\" rel=\"nofollow\">gazebo ppa</a>, I had to disable the ignition-fuel_tools in <a data-is-external-link=\"true\" href=\"https://bitbucket.org/carlosmccosta/gazebo/src/d7edd8df514f19e3cc8d2daf0b0e2bc99d1075cc/cmake/SearchForStuff.cmake#lines-744\" rel=\"nofollow\">cmake/SearchForStuff.cmake</a></p>", "type": "rendered"}, "title": {"raw": "Added camera intrinsics (fx, fy, cx, cy, s).", "markup": "markdown", "html": "<p>Added camera intrinsics (fx, fy, cx, cy, s).</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Useful for simulating realistic cameras and also for emulating projectors as cameras \\(for spatial augmented reality\\).\r\n\r\nTested in ROS Melodic in Ubuntu 18.04.\r\n\r\nRelated with:\r\n\r\n* [https://bitbucket.org/osrf/sdformat/pull-requests/248/added-camera-intrinsics-fx-fy-cx-cy-s](https://bitbucket.org/osrf/sdformat/pull-requests/248/added-camera-intrinsics-fx-fy-cx-cy-s)\r\n* [https://github.com/ros-simulation/gazebo\\_ros\\_pkgs/pull/767](https://github.com/ros-simulation/gazebo_ros_pkgs/pull/767)\r\n\r\nRelated work:\r\n\r\n* [http://ksimek.github.io/2013/06/03/calibrated\\_cameras\\_in\\_opengl/](http://ksimek.github.io/2013/06/03/calibrated_cameras_in_opengl)\r\n\r\n\u200c\r\n\r\nFor testing this PR:\r\n\r\n* [Gazebo world with a chess board \\(camera\\_intrinsics.world\\).](https://github.com/inesc-tec-robotics/gazebo_projection_mapping/blob/hydro-devel/worlds/camera_intrinsics.world)\r\n* [Some images showing the affect of increasing and decreasing each camera intrinsic parameters](https://github.com/inesc-tec-robotics/gazebo_projection_mapping/tree/hydro-devel/docs/camera_intrinsics)\r\n* [Video showing an augmented reality application that needed the extensions that I made for the gazebo camera](https://www.youtube.com/watch?v=b51MOa9KWZ8)\r\n\r\nFor loading the testing world and viewing the camera image using the gazebo\\_ros\\_pkgs, I created a branch which allows to dynamically change the camera parameters using a CameraInfo message:\r\n\r\n* [https://github.com/carlosmccosta/gazebo\\_ros\\_pkgs/tree/melodic-devel\\_camera\\_intrinsics\\_with\\_dynamic\\_update](https://github.com/carlosmccosta/gazebo_ros_pkgs/tree/melodic-devel_camera_intrinsics_with_dynamic_update)\r\n\r\n> roslaunch gazebo\\_ros empty\\_world.launch world\\_name:=/folder\\_path/camera\\_intrinsics.world  \r\n>  rqt\\_image\\_view /camera\\_sensor/image\\_raw\r\n\r\nShould I include the testing world in [gazebo/worlds](https://bitbucket.org/carlosmccosta/gazebo/src/default/worlds) ?\r\n\r\nFor dynamically changing the camera intrinsics and distortion parameters \\(example\\):\r\n\r\n> rostopic pub /camera\\_sensor/set\\_camera\\_info sensor\\_msgs/CameraInfo \"  \r\n>  header:   \r\n>  seq: 30  \r\n>  stamp:   \r\n>  secs: 228  \r\n>  nsecs: 138000000  \r\n>  frame\\_id: \"camera\\_link\"  \r\n>  height: 800  \r\n>  width: 1280  \r\n>  distortion\\_model: \"plumb\\_bob\"  \r\n>  D: \\[-0.03576145443934453, 0.2722152245603684, -0.0017235085650303857, -0.002987164047049061, 0.0\\]  \r\n>  K: \\[1945.035121562, 0.0, 613.836478629, 0.0, 1945.517200549381, -5.52387198283725, 0.0, 0.0, 1.0\\]  \r\n>  R: \\[1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0\\]  \r\n>  P: \\[1945.035121562, 0.0, 613.836478629, -0.0, 0.0, 1945.517200549381, -5.52387198283725, 0.0, 0.0, 0.0, 1.0, 0.0\\]  \r\n>  binning\\_x: 0  \r\n>  binning\\_y: 0  \r\n>  roi:   \r\n>  x\\_offset: 0  \r\n>  y\\_offset: 0  \r\n>  height: 0  \r\n>  width: 0  \r\n>  do\\_rectify: False\"\r\n\r\nWhen changing the intrinsics values \\(K in the msg above\\), the rendered imaged should have a behavior like this:\r\n\r\n* [http://ksimek.github.io/2013/08/13/intrinsic/](http://ksimek.github.io/2013/08/13/intrinsic)\r\n\r\n\u200c\r\n\r\nP.S.\r\n\r\nFor compiling the gazebo and sdformat with their dependencies retrieved from the [gazebo ppa](http://gazebosim.org/tutorials?tut=install_from_source), I had to disable the ignition-fuel\\_tools in [cmake/SearchForStuff.cmake](https://bitbucket.org/carlosmccosta/gazebo/src/d7edd8df514f19e3cc8d2daf0b0e2bc99d1075cc/cmake/SearchForStuff.cmake#lines-744)", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2058/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diffstat/osrf/gazebo:da1314698884%0Dd7edd8df514f?from_pullrequest_id=2058"}, "commits": {"href": "data/repositories/osrf/gazebo/pullrequests/2058/commits.json"}, "self": {"href": "data/repositories/osrf/gazebo/pullrequests/2058.json"}, "comments": {"href": "data/repositories/osrf/gazebo/pullrequests/2058/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2058/merge"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2058"}, "activity": {"href": "data/repositories/osrf/gazebo/pullrequests/2058/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:da1314698884%0Dd7edd8df514f?from_pullrequest_id=2058"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2058/approve"}, "statuses": {"href": "data/repositories/osrf/gazebo/pullrequests/2058/statuses_page=1.json"}}, "title": "Added camera intrinsics (fx, fy, cx, cy, s).", "close_source_branch": false, "reviewers": [{"display_name": "Christian Rauch", "uuid": "{408871b1-9dca-4a44-88df-e8f0dbdba533}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B408871b1-9dca-4a44-88df-e8f0dbdba533%7D"}, "html": {"href": "https://bitbucket.org/%7B408871b1-9dca-4a44-88df-e8f0dbdba533%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a54c27438e4b2d461db222760c23af17d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCR-2.png"}}, "nickname": "christian-rauch", "type": "user", "account_id": "557058:3551aa15-5c14-4b8f-b364-4546b8f30250"}], "id": 2058, "destination": {"commit": {"hash": "d7edd8df514f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/d7edd8df514f.json"}, "html": {"href": "#!/osrf/gazebo/commits/d7edd8df514f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "created_on": "2015-12-18T19:02:45.035106+00:00", "summary": {"raw": "Useful for simulating realistic cameras and also for emulating projectors as cameras \\(for spatial augmented reality\\).\r\n\r\nTested in ROS Melodic in Ubuntu 18.04.\r\n\r\nRelated with:\r\n\r\n* [https://bitbucket.org/osrf/sdformat/pull-requests/248/added-camera-intrinsics-fx-fy-cx-cy-s](https://bitbucket.org/osrf/sdformat/pull-requests/248/added-camera-intrinsics-fx-fy-cx-cy-s)\r\n* [https://github.com/ros-simulation/gazebo\\_ros\\_pkgs/pull/767](https://github.com/ros-simulation/gazebo_ros_pkgs/pull/767)\r\n\r\nRelated work:\r\n\r\n* [http://ksimek.github.io/2013/06/03/calibrated\\_cameras\\_in\\_opengl/](http://ksimek.github.io/2013/06/03/calibrated_cameras_in_opengl)\r\n\r\n\u200c\r\n\r\nFor testing this PR:\r\n\r\n* [Gazebo world with a chess board \\(camera\\_intrinsics.world\\).](https://github.com/inesc-tec-robotics/gazebo_projection_mapping/blob/hydro-devel/worlds/camera_intrinsics.world)\r\n* [Some images showing the affect of increasing and decreasing each camera intrinsic parameters](https://github.com/inesc-tec-robotics/gazebo_projection_mapping/tree/hydro-devel/docs/camera_intrinsics)\r\n* [Video showing an augmented reality application that needed the extensions that I made for the gazebo camera](https://www.youtube.com/watch?v=b51MOa9KWZ8)\r\n\r\nFor loading the testing world and viewing the camera image using the gazebo\\_ros\\_pkgs, I created a branch which allows to dynamically change the camera parameters using a CameraInfo message:\r\n\r\n* [https://github.com/carlosmccosta/gazebo\\_ros\\_pkgs/tree/melodic-devel\\_camera\\_intrinsics\\_with\\_dynamic\\_update](https://github.com/carlosmccosta/gazebo_ros_pkgs/tree/melodic-devel_camera_intrinsics_with_dynamic_update)\r\n\r\n> roslaunch gazebo\\_ros empty\\_world.launch world\\_name:=/folder\\_path/camera\\_intrinsics.world  \r\n>  rqt\\_image\\_view /camera\\_sensor/image\\_raw\r\n\r\nShould I include the testing world in [gazebo/worlds](https://bitbucket.org/carlosmccosta/gazebo/src/default/worlds) ?\r\n\r\nFor dynamically changing the camera intrinsics and distortion parameters \\(example\\):\r\n\r\n> rostopic pub /camera\\_sensor/set\\_camera\\_info sensor\\_msgs/CameraInfo \"  \r\n>  header:   \r\n>  seq: 30  \r\n>  stamp:   \r\n>  secs: 228  \r\n>  nsecs: 138000000  \r\n>  frame\\_id: \"camera\\_link\"  \r\n>  height: 800  \r\n>  width: 1280  \r\n>  distortion\\_model: \"plumb\\_bob\"  \r\n>  D: \\[-0.03576145443934453, 0.2722152245603684, -0.0017235085650303857, -0.002987164047049061, 0.0\\]  \r\n>  K: \\[1945.035121562, 0.0, 613.836478629, 0.0, 1945.517200549381, -5.52387198283725, 0.0, 0.0, 1.0\\]  \r\n>  R: \\[1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0\\]  \r\n>  P: \\[1945.035121562, 0.0, 613.836478629, -0.0, 0.0, 1945.517200549381, -5.52387198283725, 0.0, 0.0, 0.0, 1.0, 0.0\\]  \r\n>  binning\\_x: 0  \r\n>  binning\\_y: 0  \r\n>  roi:   \r\n>  x\\_offset: 0  \r\n>  y\\_offset: 0  \r\n>  height: 0  \r\n>  width: 0  \r\n>  do\\_rectify: False\"\r\n\r\nWhen changing the intrinsics values \\(K in the msg above\\), the rendered imaged should have a behavior like this:\r\n\r\n* [http://ksimek.github.io/2013/08/13/intrinsic/](http://ksimek.github.io/2013/08/13/intrinsic)\r\n\r\n\u200c\r\n\r\nP.S.\r\n\r\nFor compiling the gazebo and sdformat with their dependencies retrieved from the [gazebo ppa](http://gazebosim.org/tutorials?tut=install_from_source), I had to disable the ignition-fuel\\_tools in [cmake/SearchForStuff.cmake](https://bitbucket.org/carlosmccosta/gazebo/src/d7edd8df514f19e3cc8d2daf0b0e2bc99d1075cc/cmake/SearchForStuff.cmake#lines-744)", "markup": "markdown", "html": "<p>Useful for simulating realistic cameras and also for emulating projectors as cameras (for spatial augmented reality).</p>\n<p>Tested in ROS Melodic in Ubuntu 18.04.</p>\n<p>Related with:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/sdformat/pull-requests/248/added-camera-intrinsics-fx-fy-cx-cy-s\" rel=\"nofollow\">https://bitbucket.org/osrf/sdformat/pull-requests/248/added-camera-intrinsics-fx-fy-cx-cy-s</a></li>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/ros-simulation/gazebo_ros_pkgs/pull/767\" rel=\"nofollow\">https://github.com/ros-simulation/gazebo_ros_pkgs/pull/767</a></li>\n</ul>\n<p>Related work:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"http://ksimek.github.io/2013/06/03/calibrated_cameras_in_opengl\" rel=\"nofollow\">http://ksimek.github.io/2013/06/03/calibrated_cameras_in_opengl/</a></li>\n</ul>\n<p>\u200c</p>\n<p>For testing this PR:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/inesc-tec-robotics/gazebo_projection_mapping/blob/hydro-devel/worlds/camera_intrinsics.world\" rel=\"nofollow\">Gazebo world with a chess board (camera_intrinsics.world).</a></li>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/inesc-tec-robotics/gazebo_projection_mapping/tree/hydro-devel/docs/camera_intrinsics\" rel=\"nofollow\">Some images showing the affect of increasing and decreasing each camera intrinsic parameters</a></li>\n<li><a data-is-external-link=\"true\" href=\"https://www.youtube.com/watch?v=b51MOa9KWZ8\" rel=\"nofollow\">Video showing an augmented reality application that needed the extensions that I made for the gazebo camera</a></li>\n</ul>\n<p>For loading the testing world and viewing the camera image using the gazebo_ros_pkgs, I created a branch which allows to dynamically change the camera parameters using a CameraInfo message:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://github.com/carlosmccosta/gazebo_ros_pkgs/tree/melodic-devel_camera_intrinsics_with_dynamic_update\" rel=\"nofollow\">https://github.com/carlosmccosta/gazebo_ros_pkgs/tree/melodic-devel_camera_intrinsics_with_dynamic_update</a></li>\n</ul>\n<blockquote>\n<p>roslaunch gazebo_ros empty_world.launch world_name:=/folder_path/camera_intrinsics.world<br />\n rqt_image_view /camera_sensor/image_raw</p>\n</blockquote>\n<p>Should I include the testing world in <a data-is-external-link=\"true\" href=\"https://bitbucket.org/carlosmccosta/gazebo/src/default/worlds\" rel=\"nofollow\">gazebo/worlds</a> ?</p>\n<p>For dynamically changing the camera intrinsics and distortion parameters (example):</p>\n<blockquote>\n<p>rostopic pub /camera_sensor/set_camera_info sensor_msgs/CameraInfo \"<br />\n header: <br />\n seq: 30<br />\n stamp: <br />\n secs: 228<br />\n nsecs: <a href=\"#!/osrf/gazebo/commits/138000000\" rel=\"nofollow\" class=\"ap-connect-link\">138000000</a><br />\n frame_id: \"camera_link\"<br />\n height: 800<br />\n width: 1280<br />\n distortion_model: \"plumb_bob\"<br />\n D: [-0.<a href=\"#!/osrf/gazebo/commits/03576145443934453\" rel=\"nofollow\" class=\"ap-connect-link\">03576145443934453</a>, 0.<a href=\"#!/osrf/gazebo/commits/2722152245603684\" rel=\"nofollow\" class=\"ap-connect-link\">2722152245603684</a>, -0.<a href=\"#!/osrf/gazebo/commits/0017235085650303857\" rel=\"nofollow\" class=\"ap-connect-link\">0017235085650303857</a>, -0.<a href=\"#!/osrf/gazebo/commits/002987164047049061\" rel=\"nofollow\" class=\"ap-connect-link\">002987164047049061</a>, 0.0]<br />\n K: [1945.<a href=\"#!/osrf/gazebo/commits/035121562\" rel=\"nofollow\" class=\"ap-connect-link\">035121562</a>, 0.0, 613.<a href=\"#!/osrf/gazebo/commits/836478629\" rel=\"nofollow\" class=\"ap-connect-link\">836478629</a>, 0.0, 1945.<a href=\"#!/osrf/gazebo/commits/517200549381\" rel=\"nofollow\" class=\"ap-connect-link\">517200549381</a>, -5.<a href=\"#!/osrf/gazebo/commits/52387198283725\" rel=\"nofollow\" class=\"ap-connect-link\">52387198283725</a>, 0.0, 0.0, 1.0]<br />\n R: [1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0]<br />\n P: [1945.<a href=\"#!/osrf/gazebo/commits/035121562\" rel=\"nofollow\" class=\"ap-connect-link\">035121562</a>, 0.0, 613.<a href=\"#!/osrf/gazebo/commits/836478629\" rel=\"nofollow\" class=\"ap-connect-link\">836478629</a>, -0.0, 0.0, 1945.<a href=\"#!/osrf/gazebo/commits/517200549381\" rel=\"nofollow\" class=\"ap-connect-link\">517200549381</a>, -5.<a href=\"#!/osrf/gazebo/commits/52387198283725\" rel=\"nofollow\" class=\"ap-connect-link\">52387198283725</a>, 0.0, 0.0, 0.0, 1.0, 0.0]<br />\n binning_x: 0<br />\n binning_y: 0<br />\n roi: <br />\n x_offset: 0<br />\n y_offset: 0<br />\n height: 0<br />\n width: 0<br />\n do_rectify: False\"</p>\n</blockquote>\n<p>When changing the intrinsics values (K in the msg above), the rendered imaged should have a behavior like this:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"http://ksimek.github.io/2013/08/13/intrinsic\" rel=\"nofollow\">http://ksimek.github.io/2013/08/13/intrinsic/</a></li>\n</ul>\n<p>\u200c</p>\n<p>P.S.</p>\n<p>For compiling the gazebo and sdformat with their dependencies retrieved from the <a data-is-external-link=\"true\" href=\"http://gazebosim.org/tutorials?tut=install_from_source\" rel=\"nofollow\">gazebo ppa</a>, I had to disable the ignition-fuel_tools in <a data-is-external-link=\"true\" href=\"https://bitbucket.org/carlosmccosta/gazebo/src/d7edd8df514f19e3cc8d2daf0b0e2bc99d1075cc/cmake/SearchForStuff.cmake#lines-744\" rel=\"nofollow\">cmake/SearchForStuff.cmake</a></p>", "type": "rendered"}, "source": {"commit": {"hash": "31c703f8823a", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/carlosmccosta/gazebo/commit/31c703f8823a"}, "html": {"href": "https://bitbucket.org/carlosmccosta/gazebo/commits/31c703f8823a"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/carlosmccosta/gazebo"}, "html": {"href": "https://bitbucket.org/carlosmccosta/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{90445e30-a855-4e50-badb-3fb0d1ad6ecf}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "carlosmccosta/gazebo", "uuid": "{90445e30-a855-4e50-badb-3fb0d1ad6ecf}"}, "branch": {"name": "camera_intrinsics"}}, "comment_count": 43, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2019-01-14T15:07:54.920925+00:00", "type": "participant", "approved": true, "user": {"display_name": "Christian Rauch", "uuid": "{408871b1-9dca-4a44-88df-e8f0dbdba533}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B408871b1-9dca-4a44-88df-e8f0dbdba533%7D"}, "html": {"href": "https://bitbucket.org/%7B408871b1-9dca-4a44-88df-e8f0dbdba533%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a54c27438e4b2d461db222760c23af17d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCR-2.png"}}, "nickname": "christian-rauch", "type": "user", "account_id": "557058:3551aa15-5c14-4b8f-b364-4546b8f30250"}}, {"role": "PARTICIPANT", "participated_on": "2019-04-19T13:15:19.174546+00:00", "type": "participant", "approved": false, "user": {"display_name": "Carlos Miguel Correia da Costa", "uuid": "{8f4eaa49-0391-4770-bde5-edb5358b51a8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8f4eaa49-0391-4770-bde5-edb5358b51a8%7D"}, "html": {"href": "https://bitbucket.org/%7B8f4eaa49-0391-4770-bde5-edb5358b51a8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/323d40c3bb4988fad287b6879453b67dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCC-6.png"}}, "nickname": "carlosmccosta", "type": "user", "account_id": "557058:1675d077-a0e4-4cbc-bcf3-3dcc212ee41c"}}, {"role": "PARTICIPANT", "participated_on": "2018-07-03T20:25:25.837455+00:00", "type": "participant", "approved": false, "user": {"display_name": "Kevin Allen", "uuid": "{29f672ad-72f4-434e-bb0e-c6f2f69974f2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B29f672ad-72f4-434e-bb0e-c6f2f69974f2%7D"}, "html": {"href": "https://bitbucket.org/%7B29f672ad-72f4-434e-bb0e-c6f2f69974f2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/355d0415f6040ffb168f44275ac2ee2fd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsKA-1.png"}}, "nickname": "kev-the-dev", "type": "user", "account_id": "5b04a6cf8a69f52b3ba2e5db"}}, {"role": "PARTICIPANT", "participated_on": "2019-01-16T08:04:14.236497+00:00", "type": "participant", "approved": true, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}], "reason": "", "updated_on": "2019-04-19T13:15:19.191218+00:00", "author": {"display_name": "Carlos Miguel Correia da Costa", "uuid": "{8f4eaa49-0391-4770-bde5-edb5358b51a8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8f4eaa49-0391-4770-bde5-edb5358b51a8%7D"}, "html": {"href": "https://bitbucket.org/%7B8f4eaa49-0391-4770-bde5-edb5358b51a8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/323d40c3bb4988fad287b6879453b67dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCC-6.png"}}, "nickname": "carlosmccosta", "type": "user", "account_id": "557058:1675d077-a0e4-4cbc-bcf3-3dcc212ee41c"}, "merge_commit": {"hash": "da1314698884", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/da1314698884.json"}, "html": {"href": "#!/osrf/gazebo/commits/da1314698884"}}}, "closed_by": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}