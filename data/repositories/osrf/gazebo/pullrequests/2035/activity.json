{"pagelen": 50, "values": [{"update": {"description": "This PR fixes the following test failures on homebrew:\r\n\r\n- UNIT_COMVisual_TEST\r\n\r\n- UNIT_JointVisual_TEST\r\n\r\n- UNIT_LinkFrameVisual_TEST\r\n\r\n- UNIT_SelectionObj_TEST\r\n\r\n- UNIT_SonarVisual_TEST\r\n\r\n- UNIT_Visual_TEST\r\n\r\nAfter trying different approaches, I ended up with a fix that adds the `rendering::load` call to tests that need rendering to be run on the same thread as the test itself. \r\n\r\nI did not make this the default, e.g. by introducing the call in ServerFixture like how it's done in [QTestFixture](#!/osrf/gazebo/src/edf9aedde3dc5ec9b68403651a2f55493b01ded0/gazebo/gui/QTestFixture.cc?at=default&fileviewer=file-view-default#QTestFixture.cc-75), since a few sensor tests need rendering to be run in the server thread and not the test thread.\r\n\r\n[example jenkins homebrew test report](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/691/testReport/) - various `UNIT_*Visual_TEST` test failures\r\n\r\n[new homebrew test result](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/692/testReport/) - tests pass\r\n\r\n\r\n", "title": "Fix rendering test failures on OSX", "destination": {"commit": {"hash": "cc62cd75d213", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/cc62cd75d213.json"}, "html": {"href": "#!/osrf/gazebo/commits/cc62cd75d213"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "49883015849c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/49883015849c.json"}, "html": {"href": "#!/osrf/gazebo/commits/49883015849c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "rendering_tests"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-12-15T01:09:21.406305+00:00"}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"approval": {"date": "2015-12-15T00:58:35.811540+00:00", "pullrequest": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments/12756217.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035/_/diff#comment-12756217"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}, "content": {"raw": "slowly, all failing are being fixes in osX. Thanks Ian!", "markup": "markdown", "html": "<p>slowly, all failing are being fixes in osX. Thanks Ian!</p>", "type": "rendered"}, "created_on": "2015-12-15T00:58:33.183376+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2015-12-15T00:58:33.185991+00:00", "type": "pullrequest_comment", "id": 12756217}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments/12755180.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035/_/diff#comment-12755180"}}, "parent": {"id": 12702507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments/12702507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035/_/diff#comment-12702507"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}, "content": {"raw": "lot's of duplicate code lines removed. thanks!", "markup": "markdown", "html": "<p>lot's of duplicate code lines removed. thanks!</p>", "type": "rendered"}, "created_on": "2015-12-15T00:05:50.709866+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2015-12-15T00:05:50.716783+00:00", "type": "pullrequest_comment", "id": 12755180}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"approval": {"date": "2015-12-14T22:05:27.462501+00:00", "pullrequest": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments/12752370.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035/_/diff#comment-12752370"}}, "parent": {"id": 12702507, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments/12702507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035/_/diff#comment-12702507"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}, "content": {"raw": "thanks, merged!", "markup": "markdown", "html": "<p>thanks, merged!</p>", "type": "rendered"}, "created_on": "2015-12-14T22:04:08.043469+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2015-12-14T22:04:08.046751+00:00", "type": "pullrequest_comment", "id": 12752370}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"update": {"description": "This PR fixes the following test failures on homebrew:\r\n\r\n- UNIT_COMVisual_TEST\r\n\r\n- UNIT_JointVisual_TEST\r\n\r\n- UNIT_LinkFrameVisual_TEST\r\n\r\n- UNIT_SelectionObj_TEST\r\n\r\n- UNIT_SonarVisual_TEST\r\n\r\n- UNIT_Visual_TEST\r\n\r\nAfter trying different approaches, I ended up with a fix that adds the `rendering::load` call to tests that need rendering to be run on the same thread as the test itself. \r\n\r\nI did not make this the default, e.g. by introducing the call in ServerFixture like how it's done in [QTestFixture](#!/osrf/gazebo/src/edf9aedde3dc5ec9b68403651a2f55493b01ded0/gazebo/gui/QTestFixture.cc?at=default&fileviewer=file-view-default#QTestFixture.cc-75), since a few sensor tests need rendering to be run in the server thread and not the test thread.\r\n\r\n[example jenkins homebrew test report](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/691/testReport/) - various `UNIT_*Visual_TEST` test failures\r\n\r\n[new homebrew test result](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/692/testReport/) - tests pass\r\n\r\n\r\n", "title": "Fix rendering test failures on OSX", "destination": {"commit": {"hash": "c61ffc681bb0", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/c61ffc681bb0.json"}, "html": {"href": "#!/osrf/gazebo/commits/c61ffc681bb0"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "49883015849c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/49883015849c.json"}, "html": {"href": "#!/osrf/gazebo/commits/49883015849c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "rendering_tests"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2015-12-14T22:03:45.357791+00:00"}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments/12702507.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035/_/diff#comment-12702507"}}, "parent": {"id": 12695432, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments/12695432.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035/_/diff#comment-12695432"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}, "content": {"raw": "please consider merging in de2e28fb92b4 (branch `rendering_tests_scpeters`)", "markup": "markdown", "html": "<p>please consider merging in <a href=\"#!/osrf/gazebo/commits/de2e28fb92b4\" rel=\"nofollow\" class=\"ap-connect-link\">de2e28fb92b4</a> (branch <code>rendering_tests_scpeters</code>)</p>", "type": "rendered"}, "created_on": "2015-12-11T23:46:38.353944+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-12-11T23:46:38.356205+00:00", "type": "pullrequest_comment", "id": 12702507}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments/12695851.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035/_/diff#comment-12695851"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}, "content": {"raw": "Tests are passing now, thanks!", "markup": "markdown", "html": "<p>Tests are passing now, thanks!</p>", "type": "rendered"}, "created_on": "2015-12-11T19:03:10.969053+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-12-11T19:03:10.971675+00:00", "type": "pullrequest_comment", "id": 12695851}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments/12695432.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035/_/diff#comment-12695432"}}, "parent": {"id": 12694611, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments/12694611.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035/_/diff#comment-12694611"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}, "content": {"raw": "So add a `RenderingTest` class to `ServerFixture.hh` and then these tests can derive from that class instead of `ServerFixture`? Sounds reasonable", "markup": "markdown", "html": "<p>So add a <code>RenderingTest</code> class to <code>ServerFixture.hh</code> and then these tests can derive from that class instead of <code>ServerFixture</code>? Sounds reasonable</p>", "type": "rendered"}, "created_on": "2015-12-11T18:48:08.291818+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-12-11T18:48:08.294260+00:00", "type": "pullrequest_comment", "id": 12695432}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments/12694611.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035/_/diff#comment-12694611"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}, "content": {"raw": "Looking at all the same `rendering::load()` commands repeated, the idea of bringing it into the [google test](https://github.com/google/googletest/blob/master/googletest/docs/Primer.md) `SetUp()` method of a common Fixture class makes sense to me.", "markup": "markdown", "html": "<p>Looking at all the same <code>rendering::load()</code> commands repeated, the idea of bringing it into the <a data-is-external-link=\"true\" href=\"https://github.com/google/googletest/blob/master/googletest/docs/Primer.md\" rel=\"nofollow\">google test</a> <code>SetUp()</code> method of a common Fixture class makes sense to me.</p>", "type": "rendered"}, "created_on": "2015-12-11T18:19:33.845155+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2015-12-11T18:19:33.847145+00:00", "type": "pullrequest_comment", "id": 12694611}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"update": {"description": "This PR fixes the following test failures on homebrew:\r\n\r\n- UNIT_COMVisual_TEST\r\n\r\n- UNIT_JointVisual_TEST\r\n\r\n- UNIT_LinkFrameVisual_TEST\r\n\r\n- UNIT_SelectionObj_TEST\r\n\r\n- UNIT_SonarVisual_TEST\r\n\r\n- UNIT_Visual_TEST\r\n\r\nAfter trying different approaches, I ended up with a fix that adds the `rendering::load` call to tests that need rendering to be run on the same thread as the test itself. \r\n\r\nI did not make this the default, e.g. by introducing the call in ServerFixture like how it's done in [QTestFixture](#!/osrf/gazebo/src/edf9aedde3dc5ec9b68403651a2f55493b01ded0/gazebo/gui/QTestFixture.cc?at=default&fileviewer=file-view-default#QTestFixture.cc-75), since a few sensor tests need rendering to be run in the server thread and not the test thread.\r\n\r\n[example jenkins homebrew test report](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/691/testReport/) - various `UNIT_*Visual_TEST` test failures\r\n\r\n[new homebrew test result](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/692/testReport/) - tests pass\r\n\r\n\r\n", "title": "Fix rendering test failures on OSX", "destination": {"commit": {"hash": "edf9aedde3dc", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/edf9aedde3dc.json"}, "html": {"href": "#!/osrf/gazebo/commits/edf9aedde3dc"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "8cd0f47bdef5", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/8cd0f47bdef5.json"}, "html": {"href": "#!/osrf/gazebo/commits/8cd0f47bdef5"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "rendering_tests"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2015-12-11T17:58:43.779344+00:00"}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}, {"update": {"description": "This PR fixes the following test failures on homebrew:\r\n\r\n- UNIT_COMVisual_TEST\r\n\r\n- UNIT_JointVisual_TEST\r\n\r\n- UNIT_LinkFrameVisual_TEST\r\n\r\n- UNIT_SelectionObj_TEST\r\n\r\n- UNIT_SonarVisual_TEST\r\n\r\n- UNIT_Visual_TEST\r\n\r\nAfter trying different approaches, I ended up with a fix that adds the `rendering::load` call to tests that need rendering to be run on the same thread as the test itself. \r\n\r\nI did not make this the default, e.g. by introducing the call in ServerFixture like how it's done in [QTestFixture](#!/osrf/gazebo/src/edf9aedde3dc5ec9b68403651a2f55493b01ded0/gazebo/gui/QTestFixture.cc?at=default&fileviewer=file-view-default#QTestFixture.cc-75), since a few sensor tests need rendering to be run in the server thread and not the test thread.\r\n\r\n[example jenkins homebrew test report](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/691/testReport/) - various `UNIT_*Visual_TEST` test failures\r\n\r\n[new homebrew test result](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/692/testReport/) - tests pass\r\n\r\n\r\n", "title": "Fix rendering test failures on OSX", "destination": {"commit": {"hash": "edf9aedde3dc", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/edf9aedde3dc.json"}, "html": {"href": "#!/osrf/gazebo/commits/edf9aedde3dc"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "8cd0f47bdef5", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/8cd0f47bdef5.json"}, "html": {"href": "#!/osrf/gazebo/commits/8cd0f47bdef5"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "rendering_tests"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2015-12-11T17:58:43.749574+00:00"}, "pull_request": {"type": "pullrequest", "id": 2035, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}}, "title": "Fix rendering test failures on OSX"}}]}