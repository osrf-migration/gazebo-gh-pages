{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33749042.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2FCMakeLists.txt"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33749042"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "The branch `entity_component_system_prototype` has working unit tests. It looks like this branch is based off `ecs_nogtest_broken_dontmerge` which removed the gtest folder. I don't think this needs to be fixed, the whole prototype will have to be integrated with gazebo's existing cmake files anyways.", "markup": "markdown", "html": "<p>The branch <code>entity_component_system_prototype</code> has working unit tests. It looks like this branch is based off <code>ecs_nogtest_broken_dontmerge</code> which removed the gtest folder. I don't think this needs to be fixed, the whole prototype will have to be integrated with gazebo's existing cmake files anyways.</p>", "type": "rendered"}, "created_on": "2017-03-23T16:35:11.923161+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 13, "from": null, "path": "gz_ecs/CMakeLists.txt"}, "updated_on": "2017-03-23T16:35:11.926614+00:00", "type": "pullrequest_comment", "id": 33749042}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34281691.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2FCMakeLists.txt"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34281691"}}, "parent": {"id": 33749042, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33749042.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33749042"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "Gtest is back in 581b7cc and 5bcd460, and one test is back in 64c54e4.", "markup": "markdown", "html": "<p>Gtest is back in <a href=\"#!/osrf/gazebo/commits/581b7cc\" rel=\"nofollow\" class=\"ap-connect-link\">581b7cc</a> and <a href=\"#!/osrf/gazebo/commits/5bcd460\" rel=\"nofollow\" class=\"ap-connect-link\">5bcd460</a>, and one test is back in <a href=\"#!/osrf/gazebo/commits/64c54e4\" rel=\"nofollow\" class=\"ap-connect-link\">64c54e4</a>.</p>", "type": "rendered"}, "created_on": "2017-03-31T22:52:02.461920+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/CMakeLists.txt"}, "updated_on": "2017-03-31T22:52:02.464844+00:00", "type": "pullrequest_comment", "id": 34281691}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33749927.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fecs%2FEntity.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33749927"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "I think it's important for the entity manager class to assign the ID instead of the entity class picking one. \n\nThe  entity manager can do things like track deleted entities and reuse IDs, and if multiple worlds becomes a thing multiple entity managers can create entities without gaps in the ID space they use. This is important if it's found that the entity manager should use an optimization where every entity has space allocated for every type of component [(described here)](http://robbinmarcus.blogspot.com/2016/07/the-next-step-in-entity-component.html). It's too soon to say if that optimization would be valuable, but having the ID be chosen by the Entity without reusing old IDs eliminates that optimization as an option.", "markup": "markdown", "html": "<p>I think it's important for the entity manager class to assign the ID instead of the entity class picking one. </p>\n<p>The  entity manager can do things like track deleted entities and reuse IDs, and if multiple worlds becomes a thing multiple entity managers can create entities without gaps in the ID space they use. This is important if it's found that the entity manager should use an optimization where every entity has space allocated for every type of component <a data-is-external-link=\"true\" href=\"http://robbinmarcus.blogspot.com/2016/07/the-next-step-in-entity-component.html\" rel=\"nofollow\">(described here)</a>. It's too soon to say if that optimization would be valuable, but having the ID be chosen by the Entity without reusing old IDs eliminates that optimization as an option.</p>", "type": "rendered"}, "created_on": "2017-03-23T16:45:00.736609+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 28, "from": null, "path": "gz_ecs/ecs/Entity.cc"}, "updated_on": "2017-03-23T16:45:00.739409+00:00", "type": "pullrequest_comment", "id": 33749927}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34036684.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fecs%2FEntity.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34036684"}}, "parent": {"id": 33749927, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33749927.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33749927"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "Sounds good to me.", "markup": "markdown", "html": "<p>Sounds good to me.</p>", "type": "rendered"}, "created_on": "2017-03-28T22:34:25.158035+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "path": "gz_ecs/ecs/Entity.cc"}, "updated_on": "2017-03-28T22:34:25.160847+00:00", "type": "pullrequest_comment", "id": 34036684}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34371007.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fecs%2FEntity.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34371007"}}, "parent": {"id": 34036684, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34036684.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34036684"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "Done in #!/osrf/gazebo_experimental/commits/d00c7cc3ef39776bab4339a4ffe68d86dccf252c\nThe EntityComponentDatabase class assigns the ID", "markup": "markdown", "html": "<p>Done in <a href=\"#!/osrf/gazebo_experimental/commits/d00c7cc3ef39776bab4339a4ffe68d86dccf252c\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo_experimental/commits/d00c7cc3ef39776bab4339a4ffe68d86dccf252c</a>\nThe EntityComponentDatabase class assigns the ID</p>", "type": "rendered"}, "created_on": "2017-04-03T21:43:03.023564+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/ecs/Entity.cc"}, "updated_on": "2017-04-03T21:43:03.026696+00:00", "type": "pullrequest_comment", "id": 34371007}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33751274.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fecs%2FManager.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33751274"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "I think any manager should have as little knowledge about types as possible, and definitely not register types for them. Components are closely related to the systems that use them. A third party should be able to create a new system and add a component without editing the manager code to add a component. For example, someone may create a Bluetooth beacon system with a Beacon component. For component storage a manager only needs 1) a component's size and 2) a way to compare the types of two components. ", "markup": "markdown", "html": "<p>I think any manager should have as little knowledge about types as possible, and definitely not register types for them. Components are closely related to the systems that use them. A third party should be able to create a new system and add a component without editing the manager code to add a component. For example, someone may create a Bluetooth beacon system with a Beacon component. For component storage a manager only needs 1) a component's size and 2) a way to compare the types of two components. </p>", "type": "rendered"}, "created_on": "2017-03-23T16:59:08.434355+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 78, "from": null, "path": "gz_ecs/ecs/Manager.cc"}, "updated_on": "2017-03-23T16:59:08.438131+00:00", "type": "pullrequest_comment", "id": 33751274}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34036793.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fecs%2FManager.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34036793"}}, "parent": {"id": 33751274, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33751274.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33751274"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "Good point. \n\nIf we do use a factory design pattern for components, then each component could register themselves. ", "markup": "markdown", "html": "<p>Good point. </p>\n<p>If we do use a factory design pattern for components, then each component could register themselves. </p>", "type": "rendered"}, "created_on": "2017-03-28T22:37:11.274408+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "path": "gz_ecs/ecs/Manager.cc"}, "updated_on": "2017-03-28T22:37:11.276537+00:00", "type": "pullrequest_comment", "id": 34036793}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34371201.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fecs%2FManager.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34371201"}}, "parent": {"id": 33751274, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33751274.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33751274"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "Moved the component registration to main.cc for now #!/osrf/gazebo_experimental/pull-requests/1/components-registered-in-maincc-instead-of/diff", "markup": "markdown", "html": "<p>Moved the component registration to main.cc for now <a href=\"#!/osrf/gazebo_experimental/pull-requests/1/components-registered-in-maincc-instead-of/diff\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo_experimental/pull-requests/1/components-registered-in-maincc-instead-of/diff</a></p>", "type": "rendered"}, "created_on": "2017-04-03T21:47:56.799091+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/ecs/Manager.cc"}, "updated_on": "2017-04-03T21:47:56.802038+00:00", "type": "pullrequest_comment", "id": 34371201}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33752659.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fmain.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33752659"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "By removing the `private` folder, are you saying users making subclasses of systems or instantiating systems outside of an ECS is something that should be supported?", "markup": "markdown", "html": "<p>By removing the <code>private</code> folder, are you saying users making subclasses of systems or instantiating systems outside of an ECS is something that should be supported?</p>", "type": "rendered"}, "created_on": "2017-03-23T17:16:08.589060+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 27, "from": null, "path": "gz_ecs/main.cc"}, "updated_on": "2017-03-23T17:16:08.592463+00:00", "type": "pullrequest_comment", "id": 33752659}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34037342.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fmain.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34037342"}}, "parent": {"id": 33752659, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33752659.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33752659"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "I think we can skip installing header files that are meant to be private, rather than placing them in a separate directory. ", "markup": "markdown", "html": "<p>I think we can skip installing header files that are meant to be private, rather than placing them in a separate directory. </p>", "type": "rendered"}, "created_on": "2017-03-28T22:49:14.110746+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "path": "gz_ecs/main.cc"}, "updated_on": "2017-03-28T22:49:14.113356+00:00", "type": "pullrequest_comment", "id": 34037342}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33752973.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fsystems%2FAddAndPrintResult.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33752973"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "+1 This query result API is much better", "markup": "markdown", "html": "<p>+1 This query result API is much better</p>", "type": "rendered"}, "created_on": "2017-03-23T17:19:48.031773+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 45, "from": null, "path": "gz_ecs/systems/AddAndPrintResult.cc"}, "updated_on": "2017-03-23T17:19:48.034564+00:00", "type": "pullrequest_comment", "id": 33752973}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33753282.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fecs%2FManager.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33753282"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "What if the entity does not exist? Raise an exception? Is there a way to check if a reference is pointing to a `nullptr`?", "markup": "markdown", "html": "<p>What if the entity does not exist? Raise an exception? Is there a way to check if a reference is pointing to a <code>nullptr</code>?</p>", "type": "rendered"}, "created_on": "2017-03-23T17:23:39.970978+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 213, "from": null, "path": "gz_ecs/ecs/Manager.cc"}, "updated_on": "2017-03-23T17:23:39.979192+00:00", "type": "pullrequest_comment", "id": 33753282}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34371066.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fecs%2FManager.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34371066"}}, "parent": {"id": 33753282, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33753282.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33753282"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "Changed to `gazebo::ecs::Entity Manager::Entity()`. If the entity does not exist, `Entity::Id()` on the returned object will be `gazebo::ecs::NO_ENTITY`  #!/osrf/gazebo_experimental/commits/d00c7cc3ef39776bab4339a4ffe68d86dccf252c", "markup": "markdown", "html": "<p>Changed to <code>gazebo::ecs::Entity Manager::Entity()</code>. If the entity does not exist, <code>Entity::Id()</code> on the returned object will be <code>gazebo::ecs::NO_ENTITY</code>  <a href=\"#!/osrf/gazebo_experimental/commits/d00c7cc3ef39776bab4339a4ffe68d86dccf252c\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo_experimental/commits/d00c7cc3ef39776bab4339a4ffe68d86dccf252c</a></p>", "type": "rendered"}, "created_on": "2017-04-03T21:44:22.629635+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/ecs/Manager.cc"}, "updated_on": "2017-04-03T21:44:30.441447+00:00", "type": "pullrequest_comment", "id": 34371066}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33756834.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FManager.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33756834"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "I'm concerned about combining the EntityManager and SystemManager roles into a single class. These are big and very different responsibilities. It sounds like the reasoning for combining the two was to reduce the number of files. I can see how that might look like a good idea because the implementations are still very simple and slow. If combined this source file will be big, and it will be harder to find code among many unrelated functions.\n\nentity/component storage and querying means:\n\n* making sure components that get queried together are tightly packed for cache efficiency\n* returning query results return entities in the same order that components are stored in memory\n* Tracking when components change and including that in the results (If a pose changes, the physics system should move the thing in it's internal world)\n* Offer copy-on-write for components so that each update is deterministic. (The reason for this requires thinking about the system managing responsibility. For example, one system may read a component and another may write to the same component. The system manager will make sure they don't run at the same time, but what if they run on different cores or machines such that sometimes the reader runs first, and sometimes the writer runs first? Simulation behavior becomes dependent on OS scheduling. This becomes deterministic if each update works with a snapshot of the entities/components with the changes being applied after all work is done.)\n\nSystem running means:\n\n* Running systems regularly ever simulation time step\n* Scheduling systems to run in parallel when possible\n\nOther ECS implementations have also made the design choice to split these responsibilities into EntityManager and SystemManager classes. See [artemis-cPP](https://github.com/vinova/Artemis-Cpp) and [EntityX](https://github.com/alecthomas/entityx). Though, both of them also have a convenience class that has an instance of an EntityManager and a SystemManager ( [class World](https://github.com/vinova/Artemis-Cpp/blob/master/include/Artemis/World.h) in Artemis and [class EntityX](https://github.com/alecthomas/entityx/blob/master/entityx/quick.h) in EntityX.", "markup": "markdown", "html": "<p>I'm concerned about combining the EntityManager and SystemManager roles into a single class. These are big and very different responsibilities. It sounds like the reasoning for combining the two was to reduce the number of files. I can see how that might look like a good idea because the implementations are still very simple and slow. If combined this source file will be big, and it will be harder to find code among many unrelated functions.</p>\n<p>entity/component storage and querying means:</p>\n<ul>\n<li>making sure components that get queried together are tightly packed for cache efficiency</li>\n<li>returning query results return entities in the same order that components are stored in memory</li>\n<li>Tracking when components change and including that in the results (If a pose changes, the physics system should move the thing in it's internal world)</li>\n<li>Offer copy-on-write for components so that each update is deterministic. (The reason for this requires thinking about the system managing responsibility. For example, one system may read a component and another may write to the same component. The system manager will make sure they don't run at the same time, but what if they run on different cores or machines such that sometimes the reader runs first, and sometimes the writer runs first? Simulation behavior becomes dependent on OS scheduling. This becomes deterministic if each update works with a snapshot of the entities/components with the changes being applied after all work is done.)</li>\n</ul>\n<p>System running means:</p>\n<ul>\n<li>Running systems regularly ever simulation time step</li>\n<li>Scheduling systems to run in parallel when possible</li>\n</ul>\n<p>Other ECS implementations have also made the design choice to split these responsibilities into EntityManager and SystemManager classes. See <a data-is-external-link=\"true\" href=\"https://github.com/vinova/Artemis-Cpp\" rel=\"nofollow\">artemis-cPP</a> and <a data-is-external-link=\"true\" href=\"https://github.com/alecthomas/entityx\" rel=\"nofollow\">EntityX</a>. Though, both of them also have a convenience class that has an instance of an EntityManager and a SystemManager ( <a data-is-external-link=\"true\" href=\"https://github.com/vinova/Artemis-Cpp/blob/master/include/Artemis/World.h\" rel=\"nofollow\">class World</a> in Artemis and <a data-is-external-link=\"true\" href=\"https://github.com/alecthomas/entityx/blob/master/entityx/quick.h\" rel=\"nofollow\">class EntityX</a> in EntityX.</p>", "type": "rendered"}, "created_on": "2017-03-23T18:09:41.574036+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 36, "from": null, "path": "gz_ecs/include/gazebo/ecs/Manager.hh"}, "updated_on": "2017-03-23T18:09:41.576777+00:00", "type": "pullrequest_comment", "id": 33756834}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34037295.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FManager.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34037295"}}, "parent": {"id": 33756834, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33756834.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33756834"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "This manager class was created to make the user experience a bit cleaner. A convenience class could achieve the same result. I encourage the creation of this convenience class up front so that we all have a good idea of what the simple public API will look like.\n\nIdeally the fact that gazebo is an ECS system is hidden from the user via the convenience class.", "markup": "markdown", "html": "<p>This manager class was created to make the user experience a bit cleaner. A convenience class could achieve the same result. I encourage the creation of this convenience class up front so that we all have a good idea of what the simple public API will look like.</p>\n<p>Ideally the fact that gazebo is an ECS system is hidden from the user via the convenience class.</p>", "type": "rendered"}, "created_on": "2017-03-28T22:48:13.064881+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "path": "gz_ecs/include/gazebo/ecs/Manager.hh"}, "updated_on": "2017-03-28T22:48:13.067534+00:00", "type": "pullrequest_comment", "id": 34037295}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34371151.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FManager.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34371151"}}, "parent": {"id": 33756834, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33756834.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33756834"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "`Manager` now uses `EntityComponentDatabase` to store and query entities/components #!/osrf/gazebo_experimental/commits/d00c7cc3ef39776bab4339a4ffe68d86dccf252c", "markup": "markdown", "html": "<p><code>Manager</code> now uses <code>EntityComponentDatabase</code> to store and query entities/components <a href=\"#!/osrf/gazebo_experimental/commits/d00c7cc3ef39776bab4339a4ffe68d86dccf252c\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo_experimental/commits/d00c7cc3ef39776bab4339a4ffe68d86dccf252c</a></p>", "type": "rendered"}, "created_on": "2017-04-03T21:46:39.364064+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/include/gazebo/ecs/Manager.hh"}, "updated_on": "2017-04-03T21:46:39.366715+00:00", "type": "pullrequest_comment", "id": 34371151}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33838644.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FEntity.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33838644"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "`Cmp` -> `Component`? My first thought was \"compare\" like `strcmp`", "markup": "markdown", "html": "<p><code>Cmp</code> -&gt; <code>Component</code>? My first thought was \"compare\" like <code>strcmp</code></p>", "type": "rendered"}, "created_on": "2017-03-24T18:55:33.917339+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 51, "from": null, "path": "gz_ecs/include/gazebo/ecs/Entity.hh"}, "updated_on": "2017-03-24T18:55:33.920073+00:00", "type": "pullrequest_comment", "id": 33838644}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34036874.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FEntity.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34036874"}}, "parent": {"id": 33838644, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33838644.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33838644"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "The only caveat is that there is symbol conflict with the `ComponentId` type. I think we can get more creative with function naming.", "markup": "markdown", "html": "<p>The only caveat is that there is symbol conflict with the <code>ComponentId</code> type. I think we can get more creative with function naming.</p>", "type": "rendered"}, "created_on": "2017-03-28T22:39:11.446996+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "path": "gz_ecs/include/gazebo/ecs/Entity.hh"}, "updated_on": "2017-03-28T22:39:11.449269+00:00", "type": "pullrequest_comment", "id": 34036874}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34281582.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FEntity.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34281582"}}, "parent": {"id": 34036874, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34036874.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34036874"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "In 64c54e4 I freed the symbol `Component` and removed `ComponentId`. It's described in another comment, but another benefit is the methods `ComponentValue`, `CmpId`, and `CmpType` have been reduced to one method `Component()` due to additional info being stored by the `ComponentFactory`.", "markup": "markdown", "html": "<p>In <a href=\"#!/osrf/gazebo/commits/64c54e4\" rel=\"nofollow\" class=\"ap-connect-link\">64c54e4</a> I freed the symbol <code>Component</code> and removed <code>ComponentId</code>. It's described in another comment, but another benefit is the methods <code>ComponentValue</code>, <code>CmpId</code>, and <code>CmpType</code> have been reduced to one method <code>Component()</code> due to additional info being stored by the <code>ComponentFactory</code>.</p>", "type": "rendered"}, "created_on": "2017-03-31T22:47:01.036324+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/include/gazebo/ecs/Entity.hh"}, "updated_on": "2017-03-31T22:47:01.038763+00:00", "type": "pullrequest_comment", "id": 34281582}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33838850.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FSystem.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33838850"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "The entity and system managers won't change each time step. This could be passed in to Init().", "markup": "markdown", "html": "<p>The entity and system managers won't change each time step. This could be passed in to Init().</p>", "type": "rendered"}, "created_on": "2017-03-24T18:59:24.726119+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 52, "from": null, "path": "gz_ecs/include/gazebo/ecs/System.hh"}, "updated_on": "2017-03-24T18:59:24.728375+00:00", "type": "pullrequest_comment", "id": 33838850}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34038252.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FSystem.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34038252"}}, "parent": {"id": 33838850, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33838850.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33838850"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "+1", "markup": "markdown", "html": "<p>+1</p>", "type": "rendered"}, "created_on": "2017-03-28T23:11:43.855070+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "path": "gz_ecs/include/gazebo/ecs/System.hh"}, "updated_on": "2017-03-28T23:11:43.857162+00:00", "type": "pullrequest_comment", "id": 34038252}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34038350.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FSystem.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34038350"}}, "parent": {"id": 33838850, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/33838850.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-33838850"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "Actually, we might want a separate function to `set` the managers. This way, Gazebo could directly set the managers without requiring each downstream system to set the managers in the `Init()` implementation.", "markup": "markdown", "html": "<p>Actually, we might want a separate function to <code>set</code> the managers. This way, Gazebo could directly set the managers without requiring each downstream system to set the managers in the <code>Init()</code> implementation.</p>", "type": "rendered"}, "created_on": "2017-03-28T23:13:39.118903+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "path": "gz_ecs/include/gazebo/ecs/System.hh"}, "updated_on": "2017-03-28T23:13:39.121271+00:00", "type": "pullrequest_comment", "id": 34038350}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34037409.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fmain.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34037409"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "I want to point out this change. In this branch, entities are auto updating. This reduces complexity and will likely reduce usage errors. There also might be a good reason for *not* using a auto update approach.", "markup": "markdown", "html": "<p>I want to point out this change. In this branch, entities are auto updating. This reduces complexity and will likely reduce usage errors. There also might be a good reason for <em>not</em> using a auto update approach.</p>", "type": "rendered"}, "created_on": "2017-03-28T22:51:00.469439+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": 105, "path": "gz_ecs/main.cc"}, "updated_on": "2017-03-28T22:51:00.472806+00:00", "type": "pullrequest_comment", "id": 34037409}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34038103.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fmain.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34038103"}}, "parent": {"id": 34037409, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34037409.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34037409"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "As in they add themselves to the relevant queries when components are added or removed?", "markup": "markdown", "html": "<p>As in they add themselves to the relevant queries when components are added or removed?</p>", "type": "rendered"}, "created_on": "2017-03-28T23:07:13.403101+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/main.cc"}, "updated_on": "2017-03-28T23:07:13.405323+00:00", "type": "pullrequest_comment", "id": 34038103}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34038224.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fmain.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34038224"}}, "parent": {"id": 34038103, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34038103.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34038103"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "Yeah. I believe the `Manager::AddComponent` function does exactly that. I did not handle component removal.", "markup": "markdown", "html": "<p>Yeah. I believe the <code>Manager::AddComponent</code> function does exactly that. I did not handle component removal.</p>", "type": "rendered"}, "created_on": "2017-03-28T23:11:00.924917+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "path": "gz_ecs/main.cc"}, "updated_on": "2017-03-28T23:11:00.927818+00:00", "type": "pullrequest_comment", "id": 34038224}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34037583.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FComponentFactory.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34037583"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "I'd also like to point out that this is not the ideal way to create components. It bypasses the notion of placing components in adjacent memory to reduce cache misses. I think we just need to get creative here by either override the `new` operator, or using templated structures that contain a component list for the template type.", "markup": "markdown", "html": "<p>I'd also like to point out that this is not the ideal way to create components. It bypasses the notion of placing components in adjacent memory to reduce cache misses. I think we just need to get creative here by either override the <code>new</code> operator, or using templated structures that contain a component list for the template type.</p>", "type": "rendered"}, "created_on": "2017-03-28T22:54:12.559378+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": 55, "from": null, "path": "gz_ecs/include/gazebo/ecs/ComponentFactory.hh"}, "updated_on": "2017-03-28T22:54:12.562578+00:00", "type": "pullrequest_comment", "id": 34037583}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34038014.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FComponentFactory.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34038014"}}, "parent": {"id": 34037583, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34037583.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34037583"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "How about ComponentBase stores the size of Component<T>()? With that it the ecs storage code could copy it next to other components of the same type when it gets added to an entity.", "markup": "markdown", "html": "<p>How about ComponentBase stores the size of Component&lt;T&gt;()? With that it the ecs storage code could copy it next to other components of the same type when it gets added to an entity.</p>", "type": "rendered"}, "created_on": "2017-03-28T23:05:00.954264+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/include/gazebo/ecs/ComponentFactory.hh"}, "updated_on": "2017-03-28T23:05:00.957050+00:00", "type": "pullrequest_comment", "id": 34038014}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34280612.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Finclude%2Fgazebo%2Fecs%2FComponentFactory.hh"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34280612"}}, "parent": {"id": 34037583, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34037583.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34037583"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "In 64c54e4 I changed `ComponentFactory` to store 3 lambdas:\n\n1. One that constructs the object\n1. One that destructs the object\n1. One that moves the object from one location to another\n\nThe first two do so without allocating/freeing memory to allow components to be constructed/destructed adjacent to each other in a large continuous block of already allocated memory. The movement lambda is a premature optimization. I'm thinking it should be eliminated until the performance of moving an object becomes a bottle neck. Alternatively it could call the type's move constructor.\n\nI want to keep the commits I make small so each change is reviewable; however in this case the change to the factory affected nearly every file.", "markup": "markdown", "html": "<p>In <a href=\"#!/osrf/gazebo/commits/64c54e4\" rel=\"nofollow\" class=\"ap-connect-link\">64c54e4</a> I changed <code>ComponentFactory</code> to store 3 lambdas:</p>\n<ol>\n<li>One that constructs the object</li>\n<li>One that destructs the object</li>\n<li>One that moves the object from one location to another</li>\n</ol>\n<p>The first two do so without allocating/freeing memory to allow components to be constructed/destructed adjacent to each other in a large continuous block of already allocated memory. The movement lambda is a premature optimization. I'm thinking it should be eliminated until the performance of moving an object becomes a bottle neck. Alternatively it could call the type's move constructor.</p>\n<p>I want to keep the commits I make small so each change is reviewable; however in this case the change to the factory affected nearly every file.</p>", "type": "rendered"}, "created_on": "2017-03-31T22:12:14.208997+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/include/gazebo/ecs/ComponentFactory.hh"}, "updated_on": "2017-03-31T22:12:14.211610+00:00", "type": "pullrequest_comment", "id": 34280612}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34037749.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fsystems%2FAddAndPrintResult.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34037749"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "There is also something about how component values are retrieved that rubs me the wrong way. It feels cumbersome to define the return type and then also use the type as a string.\n\nJust spit balling, it might be possible to pass the component value into this function via the EntitytQuery class or as a separate parameter. There might be copy and type issues related with that.", "markup": "markdown", "html": "<p>There is also something about how component values are retrieved that rubs me the wrong way. It feels cumbersome to define the return type and then also use the type as a string.</p>\n<p>Just spit balling, it might be possible to pass the component value into this function via the EntitytQuery class or as a separate parameter. There might be copy and type issues related with that.</p>", "type": "rendered"}, "created_on": "2017-03-28T22:58:13.583040+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": 47, "from": null, "path": "gz_ecs/systems/AddAndPrintResult.cc"}, "updated_on": "2017-03-28T22:58:13.585589+00:00", "type": "pullrequest_comment", "id": 34037749}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34281456.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fsystems%2FAddAndPrintResult.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34281456"}}, "parent": {"id": 34037749, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34037749.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34037749"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "In 64c54e4 an entity's component can be gotten without using the name as an argument. Example `entityInstance.Component<::my_ns::MyType>()`. I did this by removing `ComponentId`. Where `ComponentId` was used as a function argument I replaced it with an `EntityId` and `ComponentType`. Where `ComponetId` was used as a key I replaced it with `std::make_pair<EntityId, ComponentType>`. Then I had the `ComponentFactory` store a `typeid(T).hash_code()` of the original type when the type is registered. This  allows the `ComponentFactory` to turn a template type into a `ComponentType`, which allows the API for getting a component to be simplified to not need the component name.\n\nA weak reason for removing ComponentId is that it can become stale when a component is removed from an entity. However, EntityId also becomes stale when an Entity is deleted, and I don't expect that to cause any problems.\n\nI also removed `Component` and `ComponentBase`. They became unnecessary after eliminating `ComponentId`, and removing them freed the symbol `Component`.", "markup": "markdown", "html": "<p>In <a href=\"#!/osrf/gazebo/commits/64c54e4\" rel=\"nofollow\" class=\"ap-connect-link\">64c54e4</a> an entity's component can be gotten without using the name as an argument. Example <code>entityInstance.Component&lt;::my_ns::MyType&gt;()</code>. I did this by removing <code>ComponentId</code>. Where <code>ComponentId</code> was used as a function argument I replaced it with an <code>EntityId</code> and <code>ComponentType</code>. Where <code>ComponetId</code> was used as a key I replaced it with <code>std::make_pair&lt;EntityId, ComponentType&gt;</code>. Then I had the <code>ComponentFactory</code> store a <code>typeid(T).hash_code()</code> of the original type when the type is registered. This  allows the <code>ComponentFactory</code> to turn a template type into a <code>ComponentType</code>, which allows the API for getting a component to be simplified to not need the component name.</p>\n<p>A weak reason for removing ComponentId is that it can become stale when a component is removed from an entity. However, EntityId also becomes stale when an Entity is deleted, and I don't expect that to cause any problems.</p>\n<p>I also removed <code>Component</code> and <code>ComponentBase</code>. They became unnecessary after eliminating <code>ComponentId</code>, and removing them freed the symbol <code>Component</code>.</p>", "type": "rendered"}, "created_on": "2017-03-31T22:42:20.785675+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/systems/AddAndPrintResult.cc"}, "updated_on": "2017-03-31T22:42:20.787925+00:00", "type": "pullrequest_comment", "id": 34281456}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34038495.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fmain.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34038495"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "I'm not sure if it's possible, but it would be great if we could offer and interface that would create an entity with a set of components. For example, as a user I'd like something similar to:\n\n```\nauto e = manager.CreateEntity({\"component_a\", \"component_b\", \"component_c\"});\n```\n\nor maybe\n\n```\nauto e = manager.CreateEntity<component_a, component_b, component_c>();\n```\n\nOr you use decorator pattern (this is still a bit cumbersome)\n\n```\nauto e = manager.CreateEntity().AddComponent<component_a>().AddComponent<component_b>();\n```", "markup": "markdown", "html": "<p>I'm not sure if it's possible, but it would be great if we could offer and interface that would create an entity with a set of components. For example, as a user I'd like something similar to:</p>\n<div class=\"codehilite\"><pre><span></span>auto e = manager.CreateEntity({&quot;component_a&quot;, &quot;component_b&quot;, &quot;component_c&quot;});\n</pre></div>\n\n\n<p>or maybe</p>\n<div class=\"codehilite\"><pre><span></span>auto e = manager.CreateEntity&lt;component_a, component_b, component_c&gt;();\n</pre></div>\n\n\n<p>Or you use decorator pattern (this is still a bit cumbersome)</p>\n<div class=\"codehilite\"><pre><span></span>auto e = manager.CreateEntity().AddComponent&lt;component_a&gt;().AddComponent&lt;component_b&gt;();\n</pre></div>", "type": "rendered"}, "created_on": "2017-03-28T23:18:10.422004+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": 71, "from": null, "path": "gz_ecs/main.cc"}, "updated_on": "2017-03-28T23:18:10.424259+00:00", "type": "pullrequest_comment", "id": 34038495}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34038625.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fmain.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34038625"}}, "parent": {"id": 34038495, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34038495.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34038495"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "Possibly possible with https://en.wikipedia.org/wiki/Variadic_template ?", "markup": "markdown", "html": "<p>Possibly possible with <a href=\"https://en.wikipedia.org/wiki/Variadic_template\" rel=\"nofollow\" class=\"ap-connect-link\">https://en.wikipedia.org/wiki/Variadic_template</a> ?</p>", "type": "rendered"}, "created_on": "2017-03-28T23:22:14.637046+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/main.cc"}, "updated_on": "2017-03-28T23:22:14.639843+00:00", "type": "pullrequest_comment", "id": 34038625}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34095081.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fmain.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34095081"}}, "parent": {"id": 34038625, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34038625.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34038625"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "That could work. I think we can add this as a feature sometime in the future.", "markup": "markdown", "html": "<p>That could work. I think we can add this as a feature sometime in the future.</p>", "type": "rendered"}, "created_on": "2017-03-29T15:16:18.603748+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "path": "gz_ecs/main.cc"}, "updated_on": "2017-03-29T15:16:18.609958+00:00", "type": "pullrequest_comment", "id": 34095081}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34097218.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fmain.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34097218"}}, "parent": {"id": 34095081, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34095081.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34095081"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "I'll leave a TODO in the source so it's not forgotten", "markup": "markdown", "html": "<p>I'll leave a TODO in the source so it's not forgotten</p>", "type": "rendered"}, "created_on": "2017-03-29T15:38:26.387029+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/main.cc"}, "updated_on": "2017-03-29T15:38:26.389572+00:00", "type": "pullrequest_comment", "id": 34097218}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34281634.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:350a7cd26646..b99f32c9ffe2?path=gz_ecs%2Fmain.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34281634"}}, "parent": {"id": 34095081, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34095081.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34095081"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "I added this TODO and a few others in cc3e929", "markup": "markdown", "html": "<p>I added this TODO and a few others in <a href=\"#!/osrf/gazebo/commits/cc3e929\" rel=\"nofollow\" class=\"ap-connect-link\">cc3e929</a></p>", "type": "rendered"}, "created_on": "2017-03-31T22:49:20.560173+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "gz_ecs/main.cc"}, "updated_on": "2017-03-31T22:49:20.562848+00:00", "type": "pullrequest_comment", "id": 34281634}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666/comments/34370896.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666/_/diff#comment-34370896"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2666, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2666"}}, "title": "Ecs nate"}, "content": {"raw": "Moved to new repo #!/osrf/gazebo_experimental", "markup": "markdown", "html": "<p>Moved to new repo <a href=\"#!/osrf/gazebo_experimental\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo_experimental</a></p>", "type": "rendered"}, "created_on": "2017-04-03T21:40:28.846470+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2017-04-03T21:40:28.848889+00:00", "type": "pullrequest_comment", "id": 34370896}], "page": 1, "size": 36}