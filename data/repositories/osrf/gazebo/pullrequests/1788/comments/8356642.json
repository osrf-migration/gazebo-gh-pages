{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1788/comments/8356642.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:None..None?path=gazebo%2Ftest%2FServerFixture.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1788/_/diff#comment-8356642"}}, "parent": {"id": 8356598, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1788/comments/8356598.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1788/_/diff#comment-8356598"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1788, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1788.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1788"}}, "title": "Add magnetometer sensor (Redo of Andrew's pull request)"}, "content": {"raw": "mm I am getting compile errors:\n\n~~~\n/home/ian/depot/clones/gazebo2/gazebo/sensors/AltimeterSensor.cc: In member function \u2018virtual void gazebo::sensors::AltimeterSensor::Load(const string&)\u2019:\n/home/ian/depot/clones/gazebo2/gazebo/sensors/AltimeterSensor.cc:109:62: error: \u2018ignition::math::Pose3d\u2019 has no member named \u2018Ign\u2019\n     this->dataPtr->altMsg.set_vertical_reference((this->pose.Ign() +\n                                                              ^\n/home/ian/depot/clones/gazebo2/gazebo/sensors/AltimeterSensor.cc: In member function \u2018virtual bool gazebo::sensors::AltimeterSensor::UpdateImpl(bool)\u2019:\n/home/ian/depot/clones/gazebo2/gazebo/sensors/AltimeterSensor.cc:139:49: error: \u2018ignition::math::Pose3d\u2019 has no member named \u2018Ign\u2019\n     ignition::math::Pose3d altPose = this->pose.Ign() + parentPose;\n                                                 ^\n/home/ian/depot/clones/gazebo2/gazebo/sensors/AltimeterSensor.cc:142:63: error: \u2018ignition::math::Pose3d\u2019 has no member named \u2018pos\u2019\n       this->dataPtr->parentLink->GetWorldLinearVel(this->pose.pos).Ign();\n                                                               ^\n/home/ian/depot/clones/gazebo2/gazebo/sensors/MagnetometerSensor.cc: In member function \u2018virtual bool gazebo::sensors::MagnetometerSensor::UpdateImpl(bool)\u2019:\n/home/ian/depot/clones/gazebo2/gazebo/sensors/MagnetometerSensor.cc:140:18: error: \u2018ignition::math::Pose3d\u2019 has no member named \u2018Ign\u2019\n       this->pose.Ign() + this->dataPtr->parentLink->GetWorldPose().Ign();\n                  ^\nmake[2]: *** [gazebo/sensors/CMakeFiles/gazebo_sensors.dir/AltimeterSensor.cc.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\n~~~\n\nlooks like we could just remove the Ign() call since they are alreayd ign math types", "markup": "markdown", "html": "<p>mm I am getting compile errors:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">ian</span><span class=\"o\">/</span><span class=\"nt\">depot</span><span class=\"o\">/</span><span class=\"nt\">clones</span><span class=\"o\">/</span><span class=\"nt\">gazebo2</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">sensors</span><span class=\"o\">/</span><span class=\"nt\">AltimeterSensor</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"o\">:</span> <span class=\"nt\">In</span> <span class=\"nt\">member</span> <span class=\"nt\">function</span> <span class=\"err\">\u2018</span><span class=\"nt\">virtual</span> <span class=\"nt\">void</span> <span class=\"nt\">gazebo</span><span class=\"p\">::</span><span class=\"nd\">sensors</span><span class=\"p\">::</span><span class=\"nd\">AltimeterSensor</span><span class=\"p\">::</span><span class=\"nd\">Load</span><span class=\"o\">(</span><span class=\"nt\">const</span> <span class=\"nt\">string</span><span class=\"o\">&amp;)</span><span class=\"err\">\u2019</span><span class=\"o\">:</span>\n<span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">ian</span><span class=\"o\">/</span><span class=\"nt\">depot</span><span class=\"o\">/</span><span class=\"nt\">clones</span><span class=\"o\">/</span><span class=\"nt\">gazebo2</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">sensors</span><span class=\"o\">/</span><span class=\"nt\">AltimeterSensor</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">109</span><span class=\"p\">:</span><span class=\"nd\">62</span><span class=\"o\">:</span> <span class=\"nt\">error</span><span class=\"o\">:</span> <span class=\"err\">\u2018</span><span class=\"nt\">ignition</span><span class=\"p\">::</span><span class=\"nd\">math</span><span class=\"p\">::</span><span class=\"nd\">Pose3d</span><span class=\"err\">\u2019</span> <span class=\"nt\">has</span> <span class=\"nt\">no</span> <span class=\"nt\">member</span> <span class=\"nt\">named</span> <span class=\"err\">\u2018</span><span class=\"nt\">Ign</span><span class=\"err\">\u2019</span>\n     <span class=\"nt\">this-</span><span class=\"o\">&gt;</span><span class=\"nt\">dataPtr-</span><span class=\"o\">&gt;</span><span class=\"nt\">altMsg</span><span class=\"p\">.</span><span class=\"nc\">set_vertical_reference</span><span class=\"o\">((</span><span class=\"nt\">this-</span><span class=\"o\">&gt;</span><span class=\"nt\">pose</span><span class=\"p\">.</span><span class=\"nc\">Ign</span><span class=\"o\">()</span> <span class=\"o\">+</span>\n                                                              <span class=\"o\">^</span>\n<span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">ian</span><span class=\"o\">/</span><span class=\"nt\">depot</span><span class=\"o\">/</span><span class=\"nt\">clones</span><span class=\"o\">/</span><span class=\"nt\">gazebo2</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">sensors</span><span class=\"o\">/</span><span class=\"nt\">AltimeterSensor</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"o\">:</span> <span class=\"nt\">In</span> <span class=\"nt\">member</span> <span class=\"nt\">function</span> <span class=\"err\">\u2018</span><span class=\"nt\">virtual</span> <span class=\"nt\">bool</span> <span class=\"nt\">gazebo</span><span class=\"p\">::</span><span class=\"nd\">sensors</span><span class=\"p\">::</span><span class=\"nd\">AltimeterSensor</span><span class=\"p\">::</span><span class=\"nd\">UpdateImpl</span><span class=\"o\">(</span><span class=\"nt\">bool</span><span class=\"o\">)</span><span class=\"err\">\u2019</span><span class=\"o\">:</span>\n<span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">ian</span><span class=\"o\">/</span><span class=\"nt\">depot</span><span class=\"o\">/</span><span class=\"nt\">clones</span><span class=\"o\">/</span><span class=\"nt\">gazebo2</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">sensors</span><span class=\"o\">/</span><span class=\"nt\">AltimeterSensor</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">139</span><span class=\"p\">:</span><span class=\"nd\">49</span><span class=\"o\">:</span> <span class=\"nt\">error</span><span class=\"o\">:</span> <span class=\"err\">\u2018</span><span class=\"nt\">ignition</span><span class=\"p\">::</span><span class=\"nd\">math</span><span class=\"p\">::</span><span class=\"nd\">Pose3d</span><span class=\"err\">\u2019</span> <span class=\"nt\">has</span> <span class=\"nt\">no</span> <span class=\"nt\">member</span> <span class=\"nt\">named</span> <span class=\"err\">\u2018</span><span class=\"nt\">Ign</span><span class=\"err\">\u2019</span>\n     <span class=\"nt\">ignition</span><span class=\"p\">::</span><span class=\"nd\">math</span><span class=\"p\">::</span><span class=\"nd\">Pose3d</span> <span class=\"nt\">altPose</span> <span class=\"o\">=</span> <span class=\"nt\">this-</span><span class=\"o\">&gt;</span><span class=\"nt\">pose</span><span class=\"p\">.</span><span class=\"nc\">Ign</span><span class=\"o\">()</span> <span class=\"o\">+</span> <span class=\"nt\">parentPose</span><span class=\"o\">;</span>\n                                                 <span class=\"o\">^</span>\n<span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">ian</span><span class=\"o\">/</span><span class=\"nt\">depot</span><span class=\"o\">/</span><span class=\"nt\">clones</span><span class=\"o\">/</span><span class=\"nt\">gazebo2</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">sensors</span><span class=\"o\">/</span><span class=\"nt\">AltimeterSensor</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">142</span><span class=\"p\">:</span><span class=\"nd\">63</span><span class=\"o\">:</span> <span class=\"nt\">error</span><span class=\"o\">:</span> <span class=\"err\">\u2018</span><span class=\"nt\">ignition</span><span class=\"p\">::</span><span class=\"nd\">math</span><span class=\"p\">::</span><span class=\"nd\">Pose3d</span><span class=\"err\">\u2019</span> <span class=\"nt\">has</span> <span class=\"nt\">no</span> <span class=\"nt\">member</span> <span class=\"nt\">named</span> <span class=\"err\">\u2018</span><span class=\"nt\">pos</span><span class=\"err\">\u2019</span>\n       <span class=\"nt\">this-</span><span class=\"o\">&gt;</span><span class=\"nt\">dataPtr-</span><span class=\"o\">&gt;</span><span class=\"nt\">parentLink-</span><span class=\"o\">&gt;</span><span class=\"nt\">GetWorldLinearVel</span><span class=\"o\">(</span><span class=\"nt\">this-</span><span class=\"o\">&gt;</span><span class=\"nt\">pose</span><span class=\"p\">.</span><span class=\"nc\">pos</span><span class=\"o\">)</span><span class=\"p\">.</span><span class=\"nc\">Ign</span><span class=\"o\">();</span>\n                                                               <span class=\"o\">^</span>\n<span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">ian</span><span class=\"o\">/</span><span class=\"nt\">depot</span><span class=\"o\">/</span><span class=\"nt\">clones</span><span class=\"o\">/</span><span class=\"nt\">gazebo2</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">sensors</span><span class=\"o\">/</span><span class=\"nt\">MagnetometerSensor</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"o\">:</span> <span class=\"nt\">In</span> <span class=\"nt\">member</span> <span class=\"nt\">function</span> <span class=\"err\">\u2018</span><span class=\"nt\">virtual</span> <span class=\"nt\">bool</span> <span class=\"nt\">gazebo</span><span class=\"p\">::</span><span class=\"nd\">sensors</span><span class=\"p\">::</span><span class=\"nd\">MagnetometerSensor</span><span class=\"p\">::</span><span class=\"nd\">UpdateImpl</span><span class=\"o\">(</span><span class=\"nt\">bool</span><span class=\"o\">)</span><span class=\"err\">\u2019</span><span class=\"o\">:</span>\n<span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">ian</span><span class=\"o\">/</span><span class=\"nt\">depot</span><span class=\"o\">/</span><span class=\"nt\">clones</span><span class=\"o\">/</span><span class=\"nt\">gazebo2</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">sensors</span><span class=\"o\">/</span><span class=\"nt\">MagnetometerSensor</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">140</span><span class=\"p\">:</span><span class=\"nd\">18</span><span class=\"o\">:</span> <span class=\"nt\">error</span><span class=\"o\">:</span> <span class=\"err\">\u2018</span><span class=\"nt\">ignition</span><span class=\"p\">::</span><span class=\"nd\">math</span><span class=\"p\">::</span><span class=\"nd\">Pose3d</span><span class=\"err\">\u2019</span> <span class=\"nt\">has</span> <span class=\"nt\">no</span> <span class=\"nt\">member</span> <span class=\"nt\">named</span> <span class=\"err\">\u2018</span><span class=\"nt\">Ign</span><span class=\"err\">\u2019</span>\n       <span class=\"nt\">this-</span><span class=\"o\">&gt;</span><span class=\"nt\">pose</span><span class=\"p\">.</span><span class=\"nc\">Ign</span><span class=\"o\">()</span> <span class=\"o\">+</span> <span class=\"nt\">this-</span><span class=\"o\">&gt;</span><span class=\"nt\">dataPtr-</span><span class=\"o\">&gt;</span><span class=\"nt\">parentLink-</span><span class=\"o\">&gt;</span><span class=\"nt\">GetWorldPose</span><span class=\"o\">()</span><span class=\"p\">.</span><span class=\"nc\">Ign</span><span class=\"o\">();</span>\n                  <span class=\"o\">^</span>\n<span class=\"nt\">make</span><span class=\"cp\">[</span><span class=\"mi\">2</span><span class=\"cp\">]</span><span class=\"o\">:</span> <span class=\"o\">***</span> <span class=\"cp\">[</span><span class=\"nx\">gazebo</span><span class=\"p\">/</span><span class=\"nx\">sensors</span><span class=\"p\">/</span><span class=\"nx\">CMakeFiles</span><span class=\"p\">/</span><span class=\"nx\">gazebo_sensors.dir</span><span class=\"p\">/</span><span class=\"nx\">AltimeterSensor.cc.o</span><span class=\"cp\">]</span> <span class=\"nt\">Error</span> <span class=\"nt\">1</span>\n<span class=\"nt\">make</span><span class=\"cp\">[</span><span class=\"mi\">2</span><span class=\"cp\">]</span><span class=\"o\">:</span> <span class=\"o\">***</span> <span class=\"nt\">Waiting</span> <span class=\"nt\">for</span> <span class=\"nt\">unfinished</span> <span class=\"nt\">jobs</span><span class=\"o\">....</span>\n</pre></div>\n\n\n<p>looks like we could just remove the Ign() call since they are alreayd ign math types</p>", "type": "rendered"}, "created_on": "2015-07-18T01:20:21.117460+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": null, "from": null, "outdated": false, "path": "gazebo/test/ServerFixture.cc"}, "updated_on": "2015-07-18T01:20:21.126589+00:00", "type": "pullrequest_comment", "id": 8356642}