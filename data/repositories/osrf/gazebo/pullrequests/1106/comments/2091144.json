{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1106/comments/2091144.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1106/_/diff#comment-2091144"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1106, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1106.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1106"}}, "title": "Added World::RemoveModel to fix issue #1177"}, "content": {"raw": "The `RemoveModelUnPaused` test appears to have a race condition. It usually fails before running 20 times in a row:\n~~~\n# Count the timestamps in world.txt to see how many times the test has passed\nwhile test/integration/INTEGRATION_world --gtest_filter=\"*UnPaused\" ; do date >> world.txt; done\n...\n[ RUN      ] WorldTest.RemoveModelUnPaused\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 192.168.1.182\n[Dbg] [ServerFixture.cc:144] ServerFixture load in 1 seconds, timeout after 600 seconds\nSegmentation fault (core dumped)\n... OR ...\n[==========] Running 1 test from 1 test case.\n[----------] Global test environment set-up.\n[----------] 1 test from WorldTest\n[ RUN      ] WorldTest.RemoveModelUnPaused\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 192.168.1.182\n[Dbg] [ServerFixture.cc:144] ServerFixture load in 0.9 seconds, timeout after 600 seconds\n*** Error in `test/integration/INTEGRATION_world': malloc(): memory corruption (fast): 0x00007fe0c5032320 ***\n~~~\nThe Paused test doesn't fail as often, though I have seen one seg-fault.\n\nI'll put links to the backtraces in reply to this comment.", "markup": "markdown", "html": "<p>The <code>RemoveModelUnPaused</code> test appears to have a race condition. It usually fails before running 20 times in a row:</p>\n<div class=\"codehilite\"><pre><span></span># Count the timestamps in world.txt to see how many times the test has passed\nwhile test/integration/INTEGRATION_world --gtest_filter=&quot;*UnPaused&quot; ; do date &gt;&gt; world.txt; done\n...\n[ RUN      ] WorldTest.RemoveModelUnPaused\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 192.168.1.182\n[Dbg] [ServerFixture.cc:144] ServerFixture load in 1 seconds, timeout after 600 seconds\nSegmentation fault (core dumped)\n... OR ...\n[==========] Running 1 test from 1 test case.\n[----------] Global test environment set-up.\n[----------] 1 test from WorldTest\n[ RUN      ] WorldTest.RemoveModelUnPaused\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 192.168.1.182\n[Dbg] [ServerFixture.cc:144] ServerFixture load in 0.9 seconds, timeout after 600 seconds\n*** Error in `test/integration/INTEGRATION_world&#39;: malloc(): memory corruption (fast): 0x00007fe0c5032320 ***\n</pre></div>\n\n\n<p>The Paused test doesn't fail as often, though I have seen one seg-fault.</p>\n<p>I'll put links to the backtraces in reply to this comment.</p>", "type": "rendered"}, "created_on": "2014-06-10T00:42:22.235115+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-06-10T00:42:22.251071+00:00", "type": "pullrequest_comment", "id": 2091144}