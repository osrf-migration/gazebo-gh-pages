{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1415/comments/4998275.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:None..None?path=gazebo%2Fmsgs%2Fmsgs.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1415/_/diff#comment-4998275"}}, "parent": {"id": 4993766, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1415/comments/4993766.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1415/_/diff#comment-4993766"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1415, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1415.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1415"}}, "title": "Add msgs::VisualToSDF, MaterialToSDF, and ConvertShaderType"}, "content": {"raw": "Ok, I'm just going to be extra verbose to make sure we're on the same page. Here's what I think the two options are:\n\n1. Current code: check `has_normal_map()` only if `has_shader_type()` is true. This would drop the normal map name if the `shader_type` is not specified.\n\n2. Your proposal: create the normal map regardless of the existence of `shader_type`. This would create the following:\n~~~\n<shader>\n  <normal_map>data</normal_map>\n</shader>\n~~~\nWithout the type attribute specified, the [shader will default to \"pixel\"](https://bitbucket.org/osrf/sdformat/src/cb779ddd18d4805e10a238afffde7e85426689ae/sdf/1.5/material.sdf?at=default#cl-19), so the sdf would become:\n~~~\n<shader type=\"pixel\">\n  <normal_map>data</normal_map>\n</shader>\n~~~\nDoes that sound right? Option 2 is fine for me.", "markup": "markdown", "html": "<p>Ok, I'm just going to be extra verbose to make sure we're on the same page. Here's what I think the two options are:</p>\n<ol>\n<li>\n<p>Current code: check <code>has_normal_map()</code> only if <code>has_shader_type()</code> is true. This would drop the normal map name if the <code>shader_type</code> is not specified.</p>\n</li>\n<li>\n<p>Your proposal: create the normal map regardless of the existence of <code>shader_type</code>. This would create the following:</p>\n</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;shader&gt;</span>\n  <span class=\"nt\">&lt;normal_map&gt;</span>data<span class=\"nt\">&lt;/normal_map&gt;</span>\n<span class=\"nt\">&lt;/shader&gt;</span>\n</pre></div>\n\n\n<p>Without the type attribute specified, the <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/sdformat/src/cb779ddd18d4805e10a238afffde7e85426689ae/sdf/1.5/material.sdf?at=default#cl-19\" rel=\"nofollow\">shader will default to \"pixel\"</a>, so the sdf would become:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;shader</span> <span class=\"na\">type=</span><span class=\"s\">&quot;pixel&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;normal_map&gt;</span>data<span class=\"nt\">&lt;/normal_map&gt;</span>\n<span class=\"nt\">&lt;/shader&gt;</span>\n</pre></div>\n\n\n<p>Does that sound right? Option 2 is fine for me.</p>", "type": "rendered"}, "created_on": "2015-02-05T21:27:58.786289+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": null, "from": null, "outdated": false, "path": "gazebo/msgs/msgs.cc"}, "updated_on": "2015-02-05T21:27:58.797365+00:00", "type": "pullrequest_comment", "id": 4998275}