{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2500/comments/26855945.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2500/_/diff#comment-26855945"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2500, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2500.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2500"}}, "title": "Fix wide angle camera background color"}, "content": {"raw": "I tested this with a docker container of xenial and ogre 1.9 and the test fails for me:\n\n~~~\n[ RUN      ] WideAngleCameraSensor.Background\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.17.0.3\n[Dbg] [ServerFixture.cc:201] ServerFixture load in 1.2 seconds, timeout after 600 seconds\n[Wrn] [msgs.cc:1831] Conversion of sensor type[wideanglecamera] not supported.\nINTEGRATION_wideanglecamera_sensor: /build/ogre-1.9-mqY1wq/ogre-1.9-1.9.0+dfsg1/OgreMain/include/OgreAxisAlignedBox.h:252: void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&, const Ogre::Vector3&): Assertion `(min.x <= max.x && min.y <= max.y && min.z <= max.z) && \"The minimum corner of the box must be less than or equal to maximum corner\"' failed.\nAborted (core dumped)\n~~~\n\nPartial backtrace:\n\n~~~\n(gdb) bt\n#0  0x00007ffff4808428 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54\n#1  0x00007ffff480a02a in __GI_abort () at abort.c:89\n#2  0x00007ffff4800bd7 in __assert_fail_base (fmt=<optimized out>, assertion=assertion@entry=0x7ffff3905eb8 \"(min.x <= max.x && min.y <= max.y && min.z <= max.z) && \\\"The minimum corner of the box must be less than or equal to maximum corner\\\"\", file=file@entry=0x7ffff3905e60 \"/build/ogre-1.9-mqY1wq/ogre-1.9-1.9.0+dfsg1/OgreMain/include/OgreAxisAlignedBox.h\", line=line@entry=252, function=function@entry=0x7ffff39425a0 \"void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&, const Ogre::Vector3&)\") at assert.c:92\n#3  0x00007ffff4800c82 in __GI___assert_fail (assertion=0x7ffff3905eb8 \"(min.x <= max.x && min.y <= max.y && min.z <= max.z) && \\\"The minimum corner of the box must be less than or equal to maximum corner\\\"\", file=0x7ffff3905e60 \"/build/ogre-1.9-mqY1wq/ogre-1.9-1.9.0+dfsg1/OgreMain/include/OgreAxisAlignedBox.h\", line=252, function=0x7ffff39425a0 \"void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&, const Ogre::Vector3&)\") at assert.c:101\n#4  0x00007ffff3785c56 in Ogre::Frustum::updateFrustumImpl() const () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#5  0x00007ffff378b725 in Ogre::Frustum::_notifyCurrentCamera(Ogre::Camera*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#6  0x00007ffff374a3fc in Ogre::RenderQueue::processVisibleObject(Ogre::MovableObject*, Ogre::Camera*, bool, Ogre::VisibleObjectsBoundsInfo*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#7  0x00007fffbbdf72e4 in Ogre::OctreeNode::_addToRenderQueue(Ogre::Camera*, Ogre::RenderQueue*, bool, Ogre::VisibleObjectsBoundsInfo*) () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/Plugin_OctreeSceneManager.so\n#8  0x00007fffbbdf3c84 in Ogre::OctreeSceneManager::walkOctree(Ogre::OctreeCamera*, Ogre::RenderQueue*, Ogre::Octree*, Ogre::VisibleObjectsBoundsInfo*, bool, bool) () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/Plugin_OctreeSceneManager.so\n#9  0x00007fffbbdf4131 in Ogre::OctreeSceneManager::_findVisibleObjects(Ogre::Camera*, Ogre::VisibleObjectsBoundsInfo*, bool) () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/Plugin_OctreeSceneManager.so\n#10 0x00007ffff367c25f in Ogre::SceneManager::_renderScene(Ogre::Camera*, Ogre::Viewport*, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#11 0x00007ffff36b8f51 in Ogre::Camera::_renderScene(Ogre::Viewport*, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#12 0x00007ffff365d77a in Ogre::RenderTarget::_updateViewport(Ogre::Viewport*, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#13 0x00007ffff365d5cb in Ogre::RenderTarget::_updateAutoUpdatedViewports(bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#14 0x00007ffff365d11e in Ogre::RenderTarget::updateImpl() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#15 0x00007ffff365dac4 in Ogre::RenderTarget::update(bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#16 0x00007ffff6e353f3 in gazebo::rendering::WideAngleCamera::RenderImpl (this=0x7fffc68494b0) at /home/docker/ws/src/gazebo/gazebo/rendering/WideAngleCamera.cc:696\n#17 0x00007ffff6d3500c in gazebo::rendering::Camera::Render (this=0x7fffc68494b0, _force=<optimized out>) at /home/docker/ws/src/gazebo/gazebo/rendering/Camera.cc:426\n#18 0x00007ffff76d0c68 in gazebo::sensors::CameraSensor::Render (this=0x7fff501550d0) at /home/docker/ws/src/gazebo/gazebo/sensors/CameraSensor.cc:189\n#19 0x00007ffff7711c6d in std::function<void ()>::operator()() const (this=<optimized out>) at /usr/include/c++/5/functional:2267\n#20 gazebo::event::EventT<void ()>::Signal() (this=<optimized out>) at /home/docker/ws/src/gazebo/gazebo/common/Event.hh:299\n#21 gazebo::event::EventT<void ()>::operator()() (this=<optimized out>) at /home/docker/ws/src/gazebo/gazebo/common/Event.hh:143\n#22 gazebo::sensors::SensorManager::ImageSensorContainer::Update (this=0x7fffc4591ad0, _force=<optimized out>) at /home/docker/ws/src/gazebo/gazebo/sensors/SensorManager.cc:698\n#23 0x00007ffff77120f4 in gazebo::sensors::SensorManager::Update (this=this@entry=0x7ffff7969da0 <SingletonT<gazebo::sensors::SensorManager>::GetInstance()::t>, _force=_force@entry=false) at /home/docker/ws/src/gazebo/gazebo/sensors/SensorManager.cc:171\n#24 0x00007ffff770740a in gazebo::sensors::run_once (_force=_force@entry=false) at /home/docker/ws/src/gazebo/gazebo/sensors/SensorsIface.cc:118\n#25 0x00007ffff79875f0 in gazebo::Server::Run (this=0x7fffc4000930) at /home/docker/ws/src/gazebo/gazebo/Server.cc:573\n#26 0x000000000043be3d in gazebo::ServerFixture::RunServer (this=0x764a50, _args=...) at /home/docker/ws/src/gazebo/gazebo/test/ServerFixture.cc:268\n#27 0x00007ffff586a5d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0\n#28 0x00007ffff7bc170a in start_thread (arg=0x7fffcc1af700) at pthread_create.c:333\n#29 0x00007ffff48d982d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n(gdb) \n~~~\n\nFull backtraces here:\n\n* https://gist.github.com/scpeters/0f8b3320dd7b7fd7a866201e4f25d440", "markup": "markdown", "html": "<p>I tested this with a docker container of xenial and ogre 1.9 and the test fails for me:</p>\n<div class=\"codehilite\"><pre><span></span>[ RUN      ] WideAngleCameraSensor.Background\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.17.0.3\n[Dbg] [ServerFixture.cc:201] ServerFixture load in 1.2 seconds, timeout after 600 seconds\n[Wrn] [msgs.cc:1831] Conversion of sensor type[wideanglecamera] not supported.\nINTEGRATION_wideanglecamera_sensor: /build/ogre-1.9-mqY1wq/ogre-1.9-1.9.0+dfsg1/OgreMain/include/OgreAxisAlignedBox.h:252: void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&amp;, const Ogre::Vector3&amp;): Assertion `(min.x &lt;= max.x &amp;&amp; min.y &lt;= max.y &amp;&amp; min.z &lt;= max.z) &amp;&amp; &quot;The minimum corner of the box must be less than or equal to maximum corner&quot;&#39; failed.\nAborted (core dumped)\n</pre></div>\n\n\n<p>Partial backtrace:</p>\n<div class=\"codehilite\"><pre><span></span>(gdb) bt\n#0  0x00007ffff4808428 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54\n#1  0x00007ffff480a02a in __GI_abort () at abort.c:89\n#2  0x00007ffff4800bd7 in __assert_fail_base (fmt=&lt;optimized out&gt;, assertion=assertion@entry=0x7ffff3905eb8 &quot;(min.x &lt;= max.x &amp;&amp; min.y &lt;= max.y &amp;&amp; min.z &lt;= max.z) &amp;&amp; \\&quot;The minimum corner of the box must be less than or equal to maximum corner\\&quot;&quot;, file=file@entry=0x7ffff3905e60 &quot;/build/ogre-1.9-mqY1wq/ogre-1.9-1.9.0+dfsg1/OgreMain/include/OgreAxisAlignedBox.h&quot;, line=line@entry=252, function=function@entry=0x7ffff39425a0 &quot;void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&amp;, const Ogre::Vector3&amp;)&quot;) at assert.c:92\n#3  0x00007ffff4800c82 in __GI___assert_fail (assertion=0x7ffff3905eb8 &quot;(min.x &lt;= max.x &amp;&amp; min.y &lt;= max.y &amp;&amp; min.z &lt;= max.z) &amp;&amp; \\&quot;The minimum corner of the box must be less than or equal to maximum corner\\&quot;&quot;, file=0x7ffff3905e60 &quot;/build/ogre-1.9-mqY1wq/ogre-1.9-1.9.0+dfsg1/OgreMain/include/OgreAxisAlignedBox.h&quot;, line=252, function=0x7ffff39425a0 &quot;void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&amp;, const Ogre::Vector3&amp;)&quot;) at assert.c:101\n#4  0x00007ffff3785c56 in Ogre::Frustum::updateFrustumImpl() const () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#5  0x00007ffff378b725 in Ogre::Frustum::_notifyCurrentCamera(Ogre::Camera*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#6  0x00007ffff374a3fc in Ogre::RenderQueue::processVisibleObject(Ogre::MovableObject*, Ogre::Camera*, bool, Ogre::VisibleObjectsBoundsInfo*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#7  0x00007fffbbdf72e4 in Ogre::OctreeNode::_addToRenderQueue(Ogre::Camera*, Ogre::RenderQueue*, bool, Ogre::VisibleObjectsBoundsInfo*) () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/Plugin_OctreeSceneManager.so\n#8  0x00007fffbbdf3c84 in Ogre::OctreeSceneManager::walkOctree(Ogre::OctreeCamera*, Ogre::RenderQueue*, Ogre::Octree*, Ogre::VisibleObjectsBoundsInfo*, bool, bool) () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/Plugin_OctreeSceneManager.so\n#9  0x00007fffbbdf4131 in Ogre::OctreeSceneManager::_findVisibleObjects(Ogre::Camera*, Ogre::VisibleObjectsBoundsInfo*, bool) () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/Plugin_OctreeSceneManager.so\n#10 0x00007ffff367c25f in Ogre::SceneManager::_renderScene(Ogre::Camera*, Ogre::Viewport*, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#11 0x00007ffff36b8f51 in Ogre::Camera::_renderScene(Ogre::Viewport*, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#12 0x00007ffff365d77a in Ogre::RenderTarget::_updateViewport(Ogre::Viewport*, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#13 0x00007ffff365d5cb in Ogre::RenderTarget::_updateAutoUpdatedViewports(bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#14 0x00007ffff365d11e in Ogre::RenderTarget::updateImpl() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#15 0x00007ffff365dac4 in Ogre::RenderTarget::update(bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#16 0x00007ffff6e353f3 in gazebo::rendering::WideAngleCamera::RenderImpl (this=0x7fffc68494b0) at /home/docker/ws/src/gazebo/gazebo/rendering/WideAngleCamera.cc:696\n#17 0x00007ffff6d3500c in gazebo::rendering::Camera::Render (this=0x7fffc68494b0, _force=&lt;optimized out&gt;) at /home/docker/ws/src/gazebo/gazebo/rendering/Camera.cc:426\n#18 0x00007ffff76d0c68 in gazebo::sensors::CameraSensor::Render (this=0x7fff501550d0) at /home/docker/ws/src/gazebo/gazebo/sensors/CameraSensor.cc:189\n#19 0x00007ffff7711c6d in std::function&lt;void ()&gt;::operator()() const (this=&lt;optimized out&gt;) at /usr/include/c++/5/functional:2267\n#20 gazebo::event::EventT&lt;void ()&gt;::Signal() (this=&lt;optimized out&gt;) at /home/docker/ws/src/gazebo/gazebo/common/Event.hh:299\n#21 gazebo::event::EventT&lt;void ()&gt;::operator()() (this=&lt;optimized out&gt;) at /home/docker/ws/src/gazebo/gazebo/common/Event.hh:143\n#22 gazebo::sensors::SensorManager::ImageSensorContainer::Update (this=0x7fffc4591ad0, _force=&lt;optimized out&gt;) at /home/docker/ws/src/gazebo/gazebo/sensors/SensorManager.cc:698\n#23 0x00007ffff77120f4 in gazebo::sensors::SensorManager::Update (this=this@entry=0x7ffff7969da0 &lt;SingletonT&lt;gazebo::sensors::SensorManager&gt;::GetInstance()::t&gt;, _force=_force@entry=false) at /home/docker/ws/src/gazebo/gazebo/sensors/SensorManager.cc:171\n#24 0x00007ffff770740a in gazebo::sensors::run_once (_force=_force@entry=false) at /home/docker/ws/src/gazebo/gazebo/sensors/SensorsIface.cc:118\n#25 0x00007ffff79875f0 in gazebo::Server::Run (this=0x7fffc4000930) at /home/docker/ws/src/gazebo/gazebo/Server.cc:573\n#26 0x000000000043be3d in gazebo::ServerFixture::RunServer (this=0x764a50, _args=...) at /home/docker/ws/src/gazebo/gazebo/test/ServerFixture.cc:268\n#27 0x00007ffff586a5d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0\n#28 0x00007ffff7bc170a in start_thread (arg=0x7fffcc1af700) at pthread_create.c:333\n#29 0x00007ffff48d982d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n(gdb) \n</pre></div>\n\n\n<p>Full backtraces here:</p>\n<ul>\n<li><a href=\"https://gist.github.com/scpeters/0f8b3320dd7b7fd7a866201e4f25d440\" rel=\"nofollow\" class=\"ap-connect-link\">https://gist.github.com/scpeters/0f8b3320dd7b7fd7a866201e4f25d440</a></li>\n</ul>", "type": "rendered"}, "created_on": "2016-11-15T22:42:35.248165+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-11-15T22:42:35.253855+00:00", "type": "pullrequest_comment", "id": 26855945}