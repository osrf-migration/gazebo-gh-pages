{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42225339.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/pchorak/gazebo:d90e60702127..2c58f1f33766?path=gazebo%2Fphysics%2Fdart%2FDARTLink.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42225339"}}, "parent": {"id": 42054965, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42054965.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42054965"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "More details for those interested: the weld constraints are created before the model is initialized, so all the joint transforms are identity and the bodies are welded with the same frame (since the `dart::constraint::WeldJointConstraint` relative transform is [set when it is constructed](https://github.com/dartsim/dart/blob/master/dart/constraint/WeldJointConstraint.cpp#L64)). The one exception is any free joints, which have their transforms [initialized when they are created](https://bitbucket.org/pchorak/gazebo/src/7201a289d4ae52a9427ad1128790385dfade7701/gazebo/physics/dart/DARTModelPrivate.hh?fileviewer=file-view-default#DARTModelPrivate.hh-186) since they do not have corresponding Gazebo joints and thus are not initialized later with the others. This should never be an issue though because links with parent loop joints will not have a parent free joint. Free joints are only created for links that have 0 parent joints while loop joints are only created for links with >1 parent joints, so the two conditions will never overlap.", "markup": "markdown", "html": "<p>More details for those interested: the weld constraints are created before the model is initialized, so all the joint transforms are identity and the bodies are welded with the same frame (since the <code>dart::constraint::WeldJointConstraint</code> relative transform is <a data-is-external-link=\"true\" href=\"https://github.com/dartsim/dart/blob/master/dart/constraint/WeldJointConstraint.cpp#L64\" rel=\"nofollow\">set when it is constructed</a>). The one exception is any free joints, which have their transforms <a data-is-external-link=\"true\" href=\"https://bitbucket.org/pchorak/gazebo/src/7201a289d4ae52a9427ad1128790385dfade7701/gazebo/physics/dart/DARTModelPrivate.hh?fileviewer=file-view-default#DARTModelPrivate.hh-186\" rel=\"nofollow\">initialized when they are created</a> since they do not have corresponding Gazebo joints and thus are not initialized later with the others. This should never be an issue though because links with parent loop joints will not have a parent free joint. Free joints are only created for links that have 0 parent joints while loop joints are only created for links with &gt;1 parent joints, so the two conditions will never overlap.</p>", "type": "rendered"}, "created_on": "2017-08-04T18:24:36.394015+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {"to": null, "from": null, "outdated": true, "path": "gazebo/physics/dart/DARTLink.cc"}, "updated_on": "2017-08-04T18:26:39.558035+00:00", "type": "pullrequest_comment", "id": 42225339}