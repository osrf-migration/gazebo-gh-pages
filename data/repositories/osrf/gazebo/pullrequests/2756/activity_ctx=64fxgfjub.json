{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42051578.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42051578"}}, "parent": {"id": 42051431, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42051431.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42051431"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "But the `newRoot` here is always added as a root link, implying it must not have any parent joints, and the fact that it doesn't have any parent joints should be identified correctly by the for-loop. It seems to me like it would be incorrect to add a non-root link as a root link, unless there's some post-processing that I haven't gotten to where it will later be connected correctly?", "markup": "markdown", "html": "<p>But the <code>newRoot</code> here is always added as a root link, implying it must not have any parent joints, and the fact that it doesn't have any parent joints should be identified correctly by the for-loop. It seems to me like it would be incorrect to add a non-root link as a root link, unless there's some post-processing that I haven't gotten to where it will later be connected correctly?</p>", "type": "rendered"}, "created_on": "2017-08-02T22:27:46.719198+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-02T22:27:46.789798+00:00", "type": "pullrequest_comment", "id": 42051578}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42051431.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42051431"}}, "parent": {"id": 42050417, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42050417.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42050417"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Interestingly, it is possible to run out of \"links to process\" even though none of the remaining \"links to add\" are root links. For example, if I have a ring where each link's parent is the preceding link. By initializing `newLink` with the first link in the  list, I ensure that at least some link will be added even in this situation.", "markup": "markdown", "html": "<p>Interestingly, it is possible to run out of \"links to process\" even though none of the remaining \"links to add\" are root links. For example, if I have a ring where each link's parent is the preceding link. By initializing <code>newLink</code> with the first link in the  list, I ensure that at least some link will be added even in this situation.</p>", "type": "rendered"}, "created_on": "2017-08-02T22:23:43.917330+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-02T22:23:43.920450+00:00", "type": "pullrequest_comment", "id": 42051431}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42051387.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42051387"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Nitpick: I think this variable name could be more accurate. Maybe something like `loopJoints`. The purpose of this variable seems to be accumulating joints that produce kinematic loops, not joints that are being skipped over or ignored by the model construction (as the current name might suggest).", "markup": "markdown", "html": "<p>Nitpick: I think this variable name could be more accurate. Maybe something like <code>loopJoints</code>. The purpose of this variable seems to be accumulating joints that produce kinematic loops, not joints that are being skipped over or ignored by the model construction (as the current name might suggest).</p>", "type": "rendered"}, "created_on": "2017-08-02T22:22:44.625856+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-02T22:23:13.794288+00:00", "type": "pullrequest_comment", "id": 42051387}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42051309.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42051309"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Very minor: I would propose using `std::deque` here instead of `std::list`, since I think it would be more expressive, and possible slightly more performant (although the performance difference would probably be close to negligible). I believe the rest of the function calls on `linksToProcess` can remain exactly the same even if this is switched to `std::deque`.\n\nIt seems that `linksToAdd` needs to remain a `std::list`, though, because it requires some random access in a few places.", "markup": "markdown", "html": "<p>Very minor: I would propose using <code>std::deque</code> here instead of <code>std::list</code>, since I think it would be more expressive, and possible slightly more performant (although the performance difference would probably be close to negligible). I believe the rest of the function calls on <code>linksToProcess</code> can remain exactly the same even if this is switched to <code>std::deque</code>.</p>\n<p>It seems that <code>linksToAdd</code> needs to remain a <code>std::list</code>, though, because it requires some random access in a few places.</p>", "type": "rendered"}, "created_on": "2017-08-02T22:20:28.631738+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-02T22:21:05.927392+00:00", "type": "pullrequest_comment", "id": 42051309}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42050417.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42050417"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "I would propose initializing this as a nullptr and then after the for-loop we can assert that `newRoot` is not a nullptr (and maybe have some printout to indicate that a bug has been encountered). That might help us to catch bugs if we ever encounter an \"impossible\" situation where we run out of \"links to process\" even though none of the remaining \"links to add\" are root links.", "markup": "markdown", "html": "<p>I would propose initializing this as a nullptr and then after the for-loop we can assert that <code>newRoot</code> is not a nullptr (and maybe have some printout to indicate that a bug has been encountered). That might help us to catch bugs if we ever encounter an \"impossible\" situation where we run out of \"links to process\" even though none of the remaining \"links to add\" are root links.</p>", "type": "rendered"}, "created_on": "2017-08-02T22:00:26.623247+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-02T22:00:26.671184+00:00", "type": "pullrequest_comment", "id": 42050417}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"update": {"description": "This PR makes it possible to load models containing kinematic loops while using DART physics. The approach is loosely inspired by Simbody's `MultibodyGraphMaker`. The main changes are to `DARTModel.cc` and `DARTModelPrivate.hh`. `DARTModel::Init` creates the DART joints and body nodes (links) corresponding to the loaded model. It breaks the model into trees using breadth-first-search starting from links with the world as their parent or no parents, although it may start from arbitrary links (with parents) if they are the only uninitialized links remaining. In a second step, it loops through any remaining uninitialized (loop) joints and creates them. Since DART does not support multiple parent joints for one body node, the loop joints are  paired with slave body nodes, which are attached to the child body nodes with weld constraints. To avoid issues with massless body nodes, the mass of the link is split across the slave body nodes (80364e6).\r\n\r\n`kinematic_loop.cc` tests two types of kinematic loops. One is a 3-link loop anchored to the world so that one link has two parents (world and preceding link). The other is a 4-link free loop where every link has one child and one parent. The tests let the loops move under gravity and make sure they end up in reasonable configurations.\r\n\r\nThe kinematic loops tested caused DART's Dantzig LCP solver to fail. This PR has changes from pull request #2755 (e.g. 6a4c6f9), which make it possible to specify different LCP solvers for DART (Dantzig or PGS).\r\n\r\nI am aware of at least one issue with this PR (see below) that would be good to address before considering merging it.", "title": "Dart kinematic loops", "destination": {"commit": {"hash": "a2e24ead6b45", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a2e24ead6b45.json"}, "html": {"href": "#!/osrf/gazebo/commits/a2e24ead6b45"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "1da2d2eccfb9", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo/commit/1da2d2eccfb9"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo/commits/1da2d2eccfb9"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7130b41e-0983-4752-9e3b-9e2c12cf1268}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "pchorak/gazebo", "uuid": "{7130b41e-0983-4752-9e3b-9e2c12cf1268}"}, "branch": {"name": "dart_kinematic_loops"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-01T18:40:44.990370+00:00"}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/41862903.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-41862903"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "This PR depends on [PR #2755](#!/osrf/gazebo/pull-requests/2755) and [PR #369](https://bitbucket.org/osrf/sdformat/pull-requests/369).", "markup": "markdown", "html": "<p>This PR depends on <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/pull-requests/2755\" rel=\"nofollow\">PR #2755</a> and <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/sdformat/pull-requests/369\" rel=\"nofollow\">PR #369</a>.</p>", "type": "rendered"}, "created_on": "2017-07-31T23:04:33.956383+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-07-31T23:04:33.958560+00:00", "type": "pullrequest_comment", "id": 41862903}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/41291605.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-41291605"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "From discussion with @mxgrey: a potential alternative to tracking the slave body nodes (link fragments) in the `DARTLink` class would be to create additional `DARTLink`s for each fragment.", "markup": "markdown", "html": "<p>From discussion with @mxgrey: a potential alternative to tracking the slave body nodes (link fragments) in the <code>DARTLink</code> class would be to create additional <code>DARTLink</code>s for each fragment.</p>", "type": "rendered"}, "created_on": "2017-07-22T00:04:23.883264+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-07-22T00:04:23.972946+00:00", "type": "pullrequest_comment", "id": 41291605}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/41291462.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-41291462"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "We could potentially make this part more efficient by exposing `DARTModelPrivate::IsInitialized` to keep track of which links have been initialized. On the other hand, the code may be more transparent in its current form.", "markup": "markdown", "html": "<p>We could potentially make this part more efficient by exposing <code>DARTModelPrivate::IsInitialized</code> to keep track of which links have been initialized. On the other hand, the code may be more transparent in its current form.</p>", "type": "rendered"}, "created_on": "2017-07-21T23:55:58.195736+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-07-21T23:55:58.255891+00:00", "type": "pullrequest_comment", "id": 41291462}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/41291412.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-41291412"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "From pull request #2749.", "markup": "markdown", "html": "<p>From <a href=\"#!/osrf/gazebo/pull-requests/2749/fix-issue-1477-and-1090\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #2749</a>.</p>", "type": "rendered"}, "created_on": "2017-07-21T23:52:28.411392+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-07-21T23:52:28.448981+00:00", "type": "pullrequest_comment", "id": 41291412}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/41291408.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-41291408"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "From pull request #2749.", "markup": "markdown", "html": "<p>From <a href=\"#!/osrf/gazebo/pull-requests/2749/fix-issue-1477-and-1090\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #2749</a>.</p>", "type": "rendered"}, "created_on": "2017-07-21T23:52:11.240258+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-07-21T23:52:11.274052+00:00", "type": "pullrequest_comment", "id": 41291408}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/41291369.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-41291369"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Note: Simbody's `MultiBodyGraphMaker` allows implementing certain loop joints [directly with constraints](https://github.com/simbody/simbody/blob/master/SimTKmath/src/MultibodyGraphMaker.cpp#L707) (e.g. weld for fixed joint or ball for ball joint). Implementing similar behavior for DART would require large modifications of the `DARTJoint` class since it makes frequent use of its DART joint (`this->dataPtr->dtJoint`). So, I did not attempt it for now. Additionally, Gazebo currently [does not use this feature](#!/osrf/gazebo/src/801eaafce237e0858670e9354ff9113fe2527f32/gazebo/physics/simbody/SimbodyPhysics.cc?at=default&fileviewer=file-view-default#SimbodyPhysics.cc-839) of Simbody.", "markup": "markdown", "html": "<p>Note: Simbody's <code>MultiBodyGraphMaker</code> allows implementing certain loop joints <a data-is-external-link=\"true\" href=\"https://github.com/simbody/simbody/blob/master/SimTKmath/src/MultibodyGraphMaker.cpp#L707\" rel=\"nofollow\">directly with constraints</a> (e.g. weld for fixed joint or ball for ball joint). Implementing similar behavior for DART would require large modifications of the <code>DARTJoint</code> class since it makes frequent use of its DART joint (<code>this-&gt;dataPtr-&gt;dtJoint</code>). So, I did not attempt it for now. Additionally, Gazebo currently <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/801eaafce237e0858670e9354ff9113fe2527f32/gazebo/physics/simbody/SimbodyPhysics.cc?at=default&amp;fileviewer=file-view-default#SimbodyPhysics.cc-839\" rel=\"nofollow\">does not use this feature</a> of Simbody.</p>", "type": "rendered"}, "created_on": "2017-07-21T23:49:39.499345+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-07-21T23:49:39.569534+00:00", "type": "pullrequest_comment", "id": 41291369}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/41291358.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-41291358"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Issue: Because the links jointed by a loop joint do not share an actual link in the DART skeleton, they are not identified as [adjacent bodies](https://github.com/dartsim/dart/blob/master/dart/collision/CollisionFilter.cpp#L79) during collision detection. The resulting contacts lead to unintended joint friction. A solution would be to specify that the pair of bodies is not collidable. This issue may be related to issue #2237.", "markup": "markdown", "html": "<p>Issue: Because the links jointed by a loop joint do not share an actual link in the DART skeleton, they are not identified as <a data-is-external-link=\"true\" href=\"https://github.com/dartsim/dart/blob/master/dart/collision/CollisionFilter.cpp#L79\" rel=\"nofollow\">adjacent bodies</a> during collision detection. The resulting contacts lead to unintended joint friction. A solution would be to specify that the pair of bodies is not collidable. This issue may be related to issue <a href=\"#!/osrf/gazebo/issues/2237/enable-self-collision-functionality-of\" rel=\"nofollow\" title=\"Enable self-collision functionality of DART engine\" class=\"ap-connect-link\">#2237</a>.</p>", "type": "rendered"}, "created_on": "2017-07-21T23:48:54.078753+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-07-21T23:48:54.196230+00:00", "type": "pullrequest_comment", "id": 41291358}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"update": {"description": "This PR makes it possible to load models containing kinematic loops while using DART physics. The approach is loosely inspired by Simbody's `MultibodyGraphMaker`. The main changes are to `DARTModel.cc` and `DARTModelPrivate.hh`. `DARTModel::Init` creates the DART joints and body nodes (links) corresponding to the loaded model. It breaks the model into trees using breadth-first-search starting from links with the world as their parent or no parents, although it may start from arbitrary links (with parents) if they are the only uninitialized links remaining. In a second step, it loops through any remaining uninitialized (loop) joints and creates them. Since DART does not support multiple parent joints for one body node, the loop joints are  paired with slave body nodes, which are attached to the child body nodes with weld constraints. To avoid issues with massless body nodes, the mass of the link is split across the slave body nodes (80364e6).\r\n\r\n`kinematic_loop.cc` tests two types of kinematic loops. One is a 3-link loop anchored to the world so that one link has two parents (world and preceding link). The other is a 4-link free loop where every link has one child and one parent. The tests let the loops move under gravity and make sure they end up in reasonable configurations.\r\n\r\nThe kinematic loops tested caused DART's Dantzig LCP solver to fail. This PR has changes from pull request #2755 (e.g. 6a4c6f9), which make it possible to specify different LCP solvers for DART (Dantzig or PGS).\r\n\r\nI am aware of at least one issue with this PR (see below) that would be good to address before considering merging it.", "title": "Dart kinematic loops", "destination": {"commit": {"hash": "801eaafce237", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/801eaafce237.json"}, "html": {"href": "#!/osrf/gazebo/commits/801eaafce237"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "80364e662787", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo/commit/80364e662787"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo/commits/80364e662787"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7130b41e-0983-4752-9e3b-9e2c12cf1268}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "pchorak/gazebo", "uuid": "{7130b41e-0983-4752-9e3b-9e2c12cf1268}"}, "branch": {"name": "dart_kinematic_loops"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-07-21T23:48:13.828055+00:00"}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"update": {"description": "This PR makes it possible to load models containing kinematic loops while using DART physics. The approach is loosely inspired by Simbody's `MultibodyGraphMaker`. The main changes are to `DARTModel.cc` and `DARTModelPrivate.hh`. `DARTModel::Init` creates the DART joints and body nodes (links) corresponding to the loaded model. It breaks the model into trees using breadth-first-search starting from links with the world as their parent or no parents, although it may start from arbitrary links (with parents) if they are the only uninitialized links remaining. In a second step, it loops through any remaining uninitialized (loop) joints and creates them. Since DART does not support multiple parent joints for one body node, the loop joints are  paired with slave body nodes, which are attached to the child body nodes with weld constraints. To avoid issues with massless body nodes, the mass of the link is split across the slave body nodes (80364e6).\r\n\r\n`kinematic_loop.cc` tests two types of kinematic loops. One is a 3-link loop anchored to the world so that one link has two parents (world and preceding link). The other is a 4-link free loop where every link has one child and one parent. The tests let the loops move under gravity and make sure they end up in reasonable configurations.\r\n\r\nThe kinematic loops tested caused DART's Dantzig LCP solver to fail. This PR has changes from pull request #2755 (e.g. 6a4c6f9), which make it possible to specify different LCP solvers for DART (Dantzig or PGS).\r\n\r\nI am aware of at least one issue with this PR (see below) that would be good to address before considering merging it.", "title": "Dart kinematic loops", "destination": {"commit": {"hash": "801eaafce237", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/801eaafce237.json"}, "html": {"href": "#!/osrf/gazebo/commits/801eaafce237"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "80364e662787", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo/commit/80364e662787"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo/commits/80364e662787"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7130b41e-0983-4752-9e3b-9e2c12cf1268}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "pchorak/gazebo", "uuid": "{7130b41e-0983-4752-9e3b-9e2c12cf1268}"}, "branch": {"name": "dart_kinematic_loops"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-07-21T23:48:13.771300+00:00"}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}]}