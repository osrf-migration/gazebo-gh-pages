{"pagelen": 50, "values": [{"update": {"description": "This PR makes it possible to load models containing kinematic loops while using DART physics. The approach is loosely inspired by Simbody's `MultibodyGraphMaker`. The main changes are to `DARTModel.cc` and `DARTModelPrivate.hh`. `DARTModel::Init` creates the DART joints and body nodes (links) corresponding to the loaded model. It breaks the model into trees using breadth-first-search starting from links with the world as their parent or no parents, although it may start from arbitrary links (with parents) if they are the only uninitialized links remaining. In a second step, it loops through any remaining uninitialized (loop) joints and creates them. Since DART does not support multiple parent joints for one body node, the loop joints are  paired with slave body nodes, which are attached to the child body nodes with weld constraints. To avoid issues with massless body nodes, the mass of the link is split across the slave body nodes (80364e6).\r\n\r\n`kinematic_loop.cc` tests two types of kinematic loops. One is a 3-link loop anchored to the world so that one link has two parents (world and preceding link). The other is a 4-link free loop where every link has one child and one parent. The tests let the loops move under gravity and make sure they end up in reasonable configurations.\r\n\r\nThe kinematic loops tested caused DART's Dantzig LCP solver to fail. This PR has changes from pull request #2755 (e.g. 6a4c6f9), which make it possible to specify different LCP solvers for DART (Dantzig or PGS).\r\n\r\nI am aware of at least one issue with this PR (see below) that would be good to address before considering merging it.", "title": "Dart kinematic loops", "destination": {"commit": {"hash": "2c58f1f33766", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2c58f1f33766.json"}, "html": {"href": "#!/osrf/gazebo/commits/2c58f1f33766"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "1a204f00ed16", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo/commit/1a204f00ed16"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo/commits/1a204f00ed16"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7130b41e-0983-4752-9e3b-9e2c12cf1268}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "pchorak/gazebo", "uuid": "{7130b41e-0983-4752-9e3b-9e2c12cf1268}"}, "branch": {"name": "dart_kinematic_loops"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2017-08-18T00:53:46.947132+00:00"}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"approval": {"date": "2017-08-18T00:50:11.325173+00:00", "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"update": {"description": "This PR makes it possible to load models containing kinematic loops while using DART physics. The approach is loosely inspired by Simbody's `MultibodyGraphMaker`. The main changes are to `DARTModel.cc` and `DARTModelPrivate.hh`. `DARTModel::Init` creates the DART joints and body nodes (links) corresponding to the loaded model. It breaks the model into trees using breadth-first-search starting from links with the world as their parent or no parents, although it may start from arbitrary links (with parents) if they are the only uninitialized links remaining. In a second step, it loops through any remaining uninitialized (loop) joints and creates them. Since DART does not support multiple parent joints for one body node, the loop joints are  paired with slave body nodes, which are attached to the child body nodes with weld constraints. To avoid issues with massless body nodes, the mass of the link is split across the slave body nodes (80364e6).\r\n\r\n`kinematic_loop.cc` tests two types of kinematic loops. One is a 3-link loop anchored to the world so that one link has two parents (world and preceding link). The other is a 4-link free loop where every link has one child and one parent. The tests let the loops move under gravity and make sure they end up in reasonable configurations.\r\n\r\nThe kinematic loops tested caused DART's Dantzig LCP solver to fail. This PR has changes from pull request #2755 (e.g. 6a4c6f9), which make it possible to specify different LCP solvers for DART (Dantzig or PGS).\r\n\r\nI am aware of at least one issue with this PR (see below) that would be good to address before considering merging it.", "title": "Dart kinematic loops", "destination": {"commit": {"hash": "2c58f1f33766", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2c58f1f33766.json"}, "html": {"href": "#!/osrf/gazebo/commits/2c58f1f33766"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "1a204f00ed16", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo/commit/1a204f00ed16"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo/commits/1a204f00ed16"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7130b41e-0983-4752-9e3b-9e2c12cf1268}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "pchorak/gazebo", "uuid": "{7130b41e-0983-4752-9e3b-9e2c12cf1268}"}, "branch": {"name": "dart_kinematic_loops"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-17T21:53:59.843924+00:00"}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42966284.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42966284"}}, "parent": {"id": 42963917, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42963917.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42963917"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "[9d3bd2b](https://bitbucket.org/pchorak/gazebo/commits/9d3bd2b)", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"https://bitbucket.org/pchorak/gazebo/commits/9d3bd2b\" rel=\"nofollow\">9d3bd2b</a></p>", "type": "rendered"}, "created_on": "2017-08-16T22:59:33.674697+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-16T22:59:33.677384+00:00", "type": "pullrequest_comment", "id": 42966284}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42966243.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42966243"}}, "parent": {"id": 42963590, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42963590.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42963590"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "[44229f3](https://bitbucket.org/pchorak/gazebo/commits/44229f3)", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"https://bitbucket.org/pchorak/gazebo/commits/44229f3\" rel=\"nofollow\">44229f3</a></p>", "type": "rendered"}, "created_on": "2017-08-16T22:58:23.101524+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-16T22:58:23.103908+00:00", "type": "pullrequest_comment", "id": 42966243}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42966220.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42966220"}}, "parent": {"id": 42963069, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42963069.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42963069"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "[29156a4](https://bitbucket.org/pchorak/gazebo/commits/29156a4)", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"https://bitbucket.org/pchorak/gazebo/commits/29156a4\" rel=\"nofollow\">29156a4</a></p>", "type": "rendered"}, "created_on": "2017-08-16T22:57:40.099906+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-16T22:57:40.102431+00:00", "type": "pullrequest_comment", "id": 42966220}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"update": {"description": "This PR makes it possible to load models containing kinematic loops while using DART physics. The approach is loosely inspired by Simbody's `MultibodyGraphMaker`. The main changes are to `DARTModel.cc` and `DARTModelPrivate.hh`. `DARTModel::Init` creates the DART joints and body nodes (links) corresponding to the loaded model. It breaks the model into trees using breadth-first-search starting from links with the world as their parent or no parents, although it may start from arbitrary links (with parents) if they are the only uninitialized links remaining. In a second step, it loops through any remaining uninitialized (loop) joints and creates them. Since DART does not support multiple parent joints for one body node, the loop joints are  paired with slave body nodes, which are attached to the child body nodes with weld constraints. To avoid issues with massless body nodes, the mass of the link is split across the slave body nodes (80364e6).\r\n\r\n`kinematic_loop.cc` tests two types of kinematic loops. One is a 3-link loop anchored to the world so that one link has two parents (world and preceding link). The other is a 4-link free loop where every link has one child and one parent. The tests let the loops move under gravity and make sure they end up in reasonable configurations.\r\n\r\nThe kinematic loops tested caused DART's Dantzig LCP solver to fail. This PR has changes from pull request #2755 (e.g. 6a4c6f9), which make it possible to specify different LCP solvers for DART (Dantzig or PGS).\r\n\r\nI am aware of at least one issue with this PR (see below) that would be good to address before considering merging it.", "title": "Dart kinematic loops", "destination": {"commit": {"hash": "2c58f1f33766", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2c58f1f33766.json"}, "html": {"href": "#!/osrf/gazebo/commits/2c58f1f33766"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9d3bd2bd5e83", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo/commit/9d3bd2bd5e83"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo/commits/9d3bd2bd5e83"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7130b41e-0983-4752-9e3b-9e2c12cf1268}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "pchorak/gazebo", "uuid": "{7130b41e-0983-4752-9e3b-9e2c12cf1268}"}, "branch": {"name": "dart_kinematic_loops"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-16T22:56:55.266772+00:00"}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42965192.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42965192"}}, "parent": {"id": 42964655, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42964655.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42964655"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "yeah, the second one should be `lower`\n\nwow, my bad", "markup": "markdown", "html": "<p>yeah, the second one should be <code>lower</code></p>\n<p>wow, my bad</p>", "type": "rendered"}, "created_on": "2017-08-16T22:28:00.314100+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-16T22:28:00.316435+00:00", "type": "pullrequest_comment", "id": 42965192}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42964655.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42964655"}}, "parent": {"id": 42964139, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42964139.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42964139"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Should both of those be `upper`, or should one be `lower`?", "markup": "markdown", "html": "<p>Should both of those be <code>upper</code>, or should one be <code>lower</code>?</p>", "type": "rendered"}, "created_on": "2017-08-16T22:14:56.886896+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-16T22:14:56.889712+00:00", "type": "pullrequest_comment", "id": 42964655}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42964139.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42964139"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "this should help simbody\n\n~~~\n          <limit>\n            <upper>1.32</upper>\n            <upper>-1.32</upper>\n          </limit>\n~~~", "markup": "markdown", "html": "<p>this should help simbody</p>\n<div class=\"codehilite\"><pre><span></span>          <span class=\"nt\">&lt;limit&gt;</span>\n            <span class=\"nt\">&lt;upper&gt;</span>1.32<span class=\"nt\">&lt;/upper&gt;</span>\n            <span class=\"nt\">&lt;upper&gt;</span>-1.32<span class=\"nt\">&lt;/upper&gt;</span>\n          <span class=\"nt\">&lt;/limit&gt;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-08-16T22:02:45.668576+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-16T22:02:45.671293+00:00", "type": "pullrequest_comment", "id": 42964139}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42963917.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42963917"}}, "parent": {"id": 42963828, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42963828.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42963828"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "maybe set the limits at dAngle * 1.01?", "markup": "markdown", "html": "<p>maybe set the limits at dAngle * 1.01?</p>", "type": "rendered"}, "created_on": "2017-08-16T21:57:26.907407+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-16T21:57:26.909745+00:00", "type": "pullrequest_comment", "id": 42963917}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42963828.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42963828"}}, "parent": {"id": 42962146, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42962146.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42962146"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "that makes sense\n\nbut the simbody behavior looks kinda bad. I wonder if we could add joint limits that are less restrictive than the self collision?", "markup": "markdown", "html": "<p>that makes sense</p>\n<p>but the simbody behavior looks kinda bad. I wonder if we could add joint limits that are less restrictive than the self collision?</p>", "type": "rendered"}, "created_on": "2017-08-16T21:55:30.077937+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-16T21:55:30.080221+00:00", "type": "pullrequest_comment", "id": 42963828}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42963590.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42963590"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "the tests ends up taking a while since it has to simulate 15 seconds for each physics engine\n\nif we get a `PhysicsEnginePtr` and then call `SetRealTimeUpdateRate(0.0)`, it will run much faster\n\nthis could also be set in the world file, but I think it's nicer to set it in the test", "markup": "markdown", "html": "<p>the tests ends up taking a while since it has to simulate 15 seconds for each physics engine</p>\n<p>if we get a <code>PhysicsEnginePtr</code> and then call <code>SetRealTimeUpdateRate(0.0)</code>, it will run much faster</p>\n<p>this could also be set in the world file, but I think it's nicer to set it in the test</p>", "type": "rendered"}, "created_on": "2017-08-16T21:50:38.577960+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-16T21:50:38.581351+00:00", "type": "pullrequest_comment", "id": 42963590}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42963069.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42963069"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "I would just set the gravity this way in the world file and delete these lines:\n\n~~~\n<gravity>0 -10 0</gravity>\n~~~\n\nalso for the other test", "markup": "markdown", "html": "<p>I would just set the gravity this way in the world file and delete these lines:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;gravity&gt;</span>0 -10 0<span class=\"nt\">&lt;/gravity&gt;</span>\n</pre></div>\n\n\n<p>also for the other test</p>", "type": "rendered"}, "created_on": "2017-08-16T21:41:08.059084+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-16T21:41:08.061949+00:00", "type": "pullrequest_comment", "id": 42963069}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42962231.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42962231"}}, "parent": {"id": 42961382, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42961382.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42961382"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Correct. 45deg was intended. The loop rocks a little bit when it lands because the bottom is uneven, so the purpose of this test was just to make sure it hadn't fallen over onto a side (~90deg).", "markup": "markdown", "html": "<p>Correct. 45deg was intended. The loop rocks a little bit when it lands because the bottom is uneven, so the purpose of this test was just to make sure it hadn't fallen over onto a side (~90deg).</p>", "type": "rendered"}, "created_on": "2017-08-16T21:26:20.225339+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-16T21:26:20.228952+00:00", "type": "pullrequest_comment", "id": 42962231}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42962146.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42962146"}}, "parent": {"id": 42961455, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42961455.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42961455"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Yes, but I like having a test with self-collision because the self-collision caused issues for DART originally.", "markup": "markdown", "html": "<p>Yes, but I like having a test with self-collision because the self-collision caused issues for DART originally.</p>", "type": "rendered"}, "created_on": "2017-08-16T21:24:54.003079+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-16T21:24:54.006601+00:00", "type": "pullrequest_comment", "id": 42962146}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42961455.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42961455"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "could we add joint limits instead of depending on self-collision?", "markup": "markdown", "html": "<p>could we add joint limits instead of depending on self-collision?</p>", "type": "rendered"}, "created_on": "2017-08-16T21:12:24.221542+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-16T21:12:24.224985+00:00", "type": "pullrequest_comment", "id": 42961455}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42961382.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42961382"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "this is expecting the dot product between unit vectors to be within plus or minus `sqrt(2)/2`\n\nsince the dot product is like the cosine of angle between vectors, this corresponds to an angle of 45 degrees\n\nI wonder if that could be tightened a bit. I'll take a look", "markup": "markdown", "html": "<p>this is expecting the dot product between unit vectors to be within plus or minus <code>sqrt(2)/2</code></p>\n<p>since the dot product is like the cosine of angle between vectors, this corresponds to an angle of 45 degrees</p>\n<p>I wonder if that could be tightened a bit. I'll take a look</p>", "type": "rendered"}, "created_on": "2017-08-16T21:11:10.854424+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-16T21:11:10.857806+00:00", "type": "pullrequest_comment", "id": 42961382}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42877556.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42877556"}}, "parent": {"id": 41862903, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/41862903.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-41862903"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "these have both been merged", "markup": "markdown", "html": "<p>these have both been merged</p>", "type": "rendered"}, "created_on": "2017-08-16T01:12:46.740819+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-16T01:12:46.743139+00:00", "type": "pullrequest_comment", "id": 42877556}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"update": {"description": "This PR makes it possible to load models containing kinematic loops while using DART physics. The approach is loosely inspired by Simbody's `MultibodyGraphMaker`. The main changes are to `DARTModel.cc` and `DARTModelPrivate.hh`. `DARTModel::Init` creates the DART joints and body nodes (links) corresponding to the loaded model. It breaks the model into trees using breadth-first-search starting from links with the world as their parent or no parents, although it may start from arbitrary links (with parents) if they are the only uninitialized links remaining. In a second step, it loops through any remaining uninitialized (loop) joints and creates them. Since DART does not support multiple parent joints for one body node, the loop joints are  paired with slave body nodes, which are attached to the child body nodes with weld constraints. To avoid issues with massless body nodes, the mass of the link is split across the slave body nodes (80364e6).\r\n\r\n`kinematic_loop.cc` tests two types of kinematic loops. One is a 3-link loop anchored to the world so that one link has two parents (world and preceding link). The other is a 4-link free loop where every link has one child and one parent. The tests let the loops move under gravity and make sure they end up in reasonable configurations.\r\n\r\nThe kinematic loops tested caused DART's Dantzig LCP solver to fail. This PR has changes from pull request #2755 (e.g. 6a4c6f9), which make it possible to specify different LCP solvers for DART (Dantzig or PGS).\r\n\r\nI am aware of at least one issue with this PR (see below) that would be good to address before considering merging it.", "title": "Dart kinematic loops", "destination": {"commit": {"hash": "c1c50dc2390e", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/c1c50dc2390e.json"}, "html": {"href": "#!/osrf/gazebo/commits/c1c50dc2390e"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "d90e60702127", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo/commit/d90e60702127"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo/commits/d90e60702127"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7130b41e-0983-4752-9e3b-9e2c12cf1268}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "pchorak/gazebo", "uuid": "{7130b41e-0983-4752-9e3b-9e2c12cf1268}"}, "branch": {"name": "dart_kinematic_loops"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-08T01:06:10.753394+00:00"}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42332843.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42332843"}}, "parent": {"id": 42332212, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42332212.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42332212"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "`Harness.DetachPaused` has been flaking for a while, I wouldn't worry about it :wink: ", "markup": "markdown", "html": "<p><code>Harness.DetachPaused</code> has been flaking for a while, I wouldn't worry about it <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f609.png\" alt=\"\ud83d\ude09\" title=\":wink:\" data-emoji-short-name=\":wink:\" /> </p>", "type": "rendered"}, "created_on": "2017-08-07T22:33:41.141569+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-08-07T22:33:41.143949+00:00", "type": "pullrequest_comment", "id": 42332843}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"approval": {"date": "2017-08-07T22:18:52.896474+00:00", "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42332212.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42332212"}}, "parent": {"id": 42331974, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42331974.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42331974"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "I'm not sure what caused the failure, but the test isn't enabled for simbody or dart yet, so I don't think it was anything from this PR. I am working on adding dart support for the harness, but that should probably go in another PR.", "markup": "markdown", "html": "<p>I'm not sure what caused the failure, but the test isn't enabled for simbody or dart yet, so I don't think it was anything from this PR. I am working on adding dart support for the harness, but that should probably go in another PR.</p>", "type": "rendered"}, "created_on": "2017-08-07T22:16:28.546069+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-07T22:16:28.548693+00:00", "type": "pullrequest_comment", "id": 42332212}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42331974.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42331974"}}, "parent": {"id": 42133062, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42133062.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42133062"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Do we know the cause of the failure for the harness test? I vaguely remember you mentioning that you were working on something related to a harness. Is that something that can be resolved in this pull request, or should we merge this and then fix that in another PR?", "markup": "markdown", "html": "<p>Do we know the cause of the failure for the harness test? I vaguely remember you mentioning that you were working on something related to a harness. Is that something that can be resolved in this pull request, or should we merge this and then fix that in another PR?</p>", "type": "rendered"}, "created_on": "2017-08-07T22:10:22.442419+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2017-08-07T22:10:22.497451+00:00", "type": "pullrequest_comment", "id": 42331974}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42233062.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42233062"}}, "parent": {"id": 42133062, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42133062.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42133062"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "cppcheck errors fixed in [d90e607](https://bitbucket.org/pchorak/gazebo/commits/d90e607)", "markup": "markdown", "html": "<p>cppcheck errors fixed in <a data-is-external-link=\"true\" href=\"https://bitbucket.org/pchorak/gazebo/commits/d90e607\" rel=\"nofollow\">d90e607</a></p>", "type": "rendered"}, "created_on": "2017-08-04T20:39:08.195252+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-04T20:39:08.197910+00:00", "type": "pullrequest_comment", "id": 42233062}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42133062.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42133062"}}, "parent": {"id": 42056682, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42056682.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42056682"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "build with dart\n\n* https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/32/", "markup": "markdown", "html": "<p>build with dart</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/32/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/32/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2017-08-03T18:16:02.615424+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-04T20:38:51.705294+00:00", "type": "pullrequest_comment", "id": 42133062}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"update": {"description": "This PR makes it possible to load models containing kinematic loops while using DART physics. The approach is loosely inspired by Simbody's `MultibodyGraphMaker`. The main changes are to `DARTModel.cc` and `DARTModelPrivate.hh`. `DARTModel::Init` creates the DART joints and body nodes (links) corresponding to the loaded model. It breaks the model into trees using breadth-first-search starting from links with the world as their parent or no parents, although it may start from arbitrary links (with parents) if they are the only uninitialized links remaining. In a second step, it loops through any remaining uninitialized (loop) joints and creates them. Since DART does not support multiple parent joints for one body node, the loop joints are  paired with slave body nodes, which are attached to the child body nodes with weld constraints. To avoid issues with massless body nodes, the mass of the link is split across the slave body nodes (80364e6).\r\n\r\n`kinematic_loop.cc` tests two types of kinematic loops. One is a 3-link loop anchored to the world so that one link has two parents (world and preceding link). The other is a 4-link free loop where every link has one child and one parent. The tests let the loops move under gravity and make sure they end up in reasonable configurations.\r\n\r\nThe kinematic loops tested caused DART's Dantzig LCP solver to fail. This PR has changes from pull request #2755 (e.g. 6a4c6f9), which make it possible to specify different LCP solvers for DART (Dantzig or PGS).\r\n\r\nI am aware of at least one issue with this PR (see below) that would be good to address before considering merging it.", "title": "Dart kinematic loops", "destination": {"commit": {"hash": "c1c50dc2390e", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/c1c50dc2390e.json"}, "html": {"href": "#!/osrf/gazebo/commits/c1c50dc2390e"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "d90e60702127", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo/commit/d90e60702127"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo/commits/d90e60702127"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7130b41e-0983-4752-9e3b-9e2c12cf1268}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "pchorak/gazebo", "uuid": "{7130b41e-0983-4752-9e3b-9e2c12cf1268}"}, "branch": {"name": "dart_kinematic_loops"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-04T20:38:16.100731+00:00"}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42227105.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42227105"}}, "parent": {"id": 42226916, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42226916.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42226916"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Agreed. In fact, I am working on making the harness plugin work with DART, and it would be convenient to be able to set the `WeldJointConstraint` relative transform. I found a way around it, but I do agree.", "markup": "markdown", "html": "<p>Agreed. In fact, I am working on making the harness plugin work with DART, and it would be convenient to be able to set the <code>WeldJointConstraint</code> relative transform. I found a way around it, but I do agree.</p>", "type": "rendered"}, "created_on": "2017-08-04T18:54:23.530381+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-04T18:54:23.533148+00:00", "type": "pullrequest_comment", "id": 42227105}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42226916.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42226916"}}, "parent": {"id": 42226743, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42226743.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42226743"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Oh, I mean adding the functionality to DART for more broad applications, not necessarily related to this situation. Although I bring it up here because if some of the implementation details of how these structures were being initialized were a little bit different, it could've been much harder to configure the `WeldJointConstraint` correctly. I feel like we just happened to luck out on that matter.", "markup": "markdown", "html": "<p>Oh, I mean adding the functionality to DART for more broad applications, not necessarily related to this situation. Although I bring it up here because if some of the implementation details of how these structures were being initialized were a little bit different, it could've been much harder to configure the <code>WeldJointConstraint</code> correctly. I feel like we just happened to luck out on that matter.</p>", "type": "rendered"}, "created_on": "2017-08-04T18:51:18.699804+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-04T18:51:18.766695+00:00", "type": "pullrequest_comment", "id": 42226916}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42226743.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42226743"}}, "parent": {"id": 42225966, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42225966.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42225966"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Maybe, I am not sure that would be likely though. The fragments that are welded together represent the same link, so it would be odd to give them a relative transform other than identity.", "markup": "markdown", "html": "<p>Maybe, I am not sure that would be likely though. The fragments that are welded together represent the same link, so it would be odd to give them a relative transform other than identity.</p>", "type": "rendered"}, "created_on": "2017-08-04T18:48:25.472261+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-04T18:48:25.476086+00:00", "type": "pullrequest_comment", "id": 42226743}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42225966.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42225966"}}, "parent": {"id": 42225339, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42225339.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42225339"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "I wonder if it might be a good idea to have `dart::constraint::WeldJointConstraint` offer a way to set the relative transform of the constraint. It makes sense to set it automatically during construction, but it seems too presumptuous to me to think that the relative transforms of the bodies at that moment is definitely what the user will want the relative transform of the constraint to be.", "markup": "markdown", "html": "<p>I wonder if it might be a good idea to have <code>dart::constraint::WeldJointConstraint</code> offer a way to set the relative transform of the constraint. It makes sense to set it automatically during construction, but it seems too presumptuous to me to think that the relative transforms of the bodies at that moment is definitely what the user will want the relative transform of the constraint to be.</p>", "type": "rendered"}, "created_on": "2017-08-04T18:35:28.181345+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-04T18:35:28.246230+00:00", "type": "pullrequest_comment", "id": 42225966}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42225339.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42225339"}}, "parent": {"id": 42054965, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42054965.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42054965"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "More details for those interested: the weld constraints are created before the model is initialized, so all the joint transforms are identity and the bodies are welded with the same frame (since the `dart::constraint::WeldJointConstraint` relative transform is [set when it is constructed](https://github.com/dartsim/dart/blob/master/dart/constraint/WeldJointConstraint.cpp#L64)). The one exception is any free joints, which have their transforms [initialized when they are created](https://bitbucket.org/pchorak/gazebo/src/7201a289d4ae52a9427ad1128790385dfade7701/gazebo/physics/dart/DARTModelPrivate.hh?fileviewer=file-view-default#DARTModelPrivate.hh-186) since they do not have corresponding Gazebo joints and thus are not initialized later with the others. This should never be an issue though because links with parent loop joints will not have a parent free joint. Free joints are only created for links that have 0 parent joints while loop joints are only created for links with >1 parent joints, so the two conditions will never overlap.", "markup": "markdown", "html": "<p>More details for those interested: the weld constraints are created before the model is initialized, so all the joint transforms are identity and the bodies are welded with the same frame (since the <code>dart::constraint::WeldJointConstraint</code> relative transform is <a data-is-external-link=\"true\" href=\"https://github.com/dartsim/dart/blob/master/dart/constraint/WeldJointConstraint.cpp#L64\" rel=\"nofollow\">set when it is constructed</a>). The one exception is any free joints, which have their transforms <a data-is-external-link=\"true\" href=\"https://bitbucket.org/pchorak/gazebo/src/7201a289d4ae52a9427ad1128790385dfade7701/gazebo/physics/dart/DARTModelPrivate.hh?fileviewer=file-view-default#DARTModelPrivate.hh-186\" rel=\"nofollow\">initialized when they are created</a> since they do not have corresponding Gazebo joints and thus are not initialized later with the others. This should never be an issue though because links with parent loop joints will not have a parent free joint. Free joints are only created for links that have 0 parent joints while loop joints are only created for links with &gt;1 parent joints, so the two conditions will never overlap.</p>", "type": "rendered"}, "created_on": "2017-08-04T18:24:36.394015+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-04T18:26:39.558035+00:00", "type": "pullrequest_comment", "id": 42225339}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"update": {"description": "This PR makes it possible to load models containing kinematic loops while using DART physics. The approach is loosely inspired by Simbody's `MultibodyGraphMaker`. The main changes are to `DARTModel.cc` and `DARTModelPrivate.hh`. `DARTModel::Init` creates the DART joints and body nodes (links) corresponding to the loaded model. It breaks the model into trees using breadth-first-search starting from links with the world as their parent or no parents, although it may start from arbitrary links (with parents) if they are the only uninitialized links remaining. In a second step, it loops through any remaining uninitialized (loop) joints and creates them. Since DART does not support multiple parent joints for one body node, the loop joints are  paired with slave body nodes, which are attached to the child body nodes with weld constraints. To avoid issues with massless body nodes, the mass of the link is split across the slave body nodes (80364e6).\r\n\r\n`kinematic_loop.cc` tests two types of kinematic loops. One is a 3-link loop anchored to the world so that one link has two parents (world and preceding link). The other is a 4-link free loop where every link has one child and one parent. The tests let the loops move under gravity and make sure they end up in reasonable configurations.\r\n\r\nThe kinematic loops tested caused DART's Dantzig LCP solver to fail. This PR has changes from pull request #2755 (e.g. 6a4c6f9), which make it possible to specify different LCP solvers for DART (Dantzig or PGS).\r\n\r\nI am aware of at least one issue with this PR (see below) that would be good to address before considering merging it.", "title": "Dart kinematic loops", "destination": {"commit": {"hash": "7343f9d4ec32", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/7343f9d4ec32.json"}, "html": {"href": "#!/osrf/gazebo/commits/7343f9d4ec32"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "7201a289d4ae", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo/commit/7201a289d4ae"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo/commits/7201a289d4ae"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7130b41e-0983-4752-9e3b-9e2c12cf1268}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "pchorak/gazebo", "uuid": "{7130b41e-0983-4752-9e3b-9e2c12cf1268}"}, "branch": {"name": "dart_kinematic_loops"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-03T18:01:18.672869+00:00"}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42056682.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42056682"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Thanks @mxgrey! We should be able to run a build test once [PR #370](https://bitbucket.org/osrf/sdformat/pull-requests/370) goes through.", "markup": "markdown", "html": "<p>Thanks @mxgrey! We should be able to run a build test once <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/sdformat/pull-requests/370\" rel=\"nofollow\">PR #370</a> goes through.</p>", "type": "rendered"}, "created_on": "2017-08-03T01:02:06.128022+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-03T01:02:06.136539+00:00", "type": "pullrequest_comment", "id": 42056682}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42056274.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42056274"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "I'm somewhat uneasy about the concept of \"slave links\", because I think it adds a layer of complexity and inconsistency with Gazebo's API which may result in unexpected bugs or difficulty down the road. The other option would be to create extra `DARTLink` and `DARTJoint` objects that correspond to the split `dart::dynamics::BodyNode` and `dart::dynamics::Joint` objects, but this would create a discrepancy between the Gazebo representation of the model and the SDF representation of the model, which is likely to cause problems for end-users. Consequently, I think this \"slave link\" approach is the best solution, despite my concerns.\n\nThis implementation of the slave links looks very good. I think I'll be happy to approve it after we run a build test with the latest changes.\n\nBeing able to support closed-loop kinematics with DART has been in demand for a very long time, so I'm grateful that it's finally been done. Thanks, @pchorak !", "markup": "markdown", "html": "<p>I'm somewhat uneasy about the concept of \"slave links\", because I think it adds a layer of complexity and inconsistency with Gazebo's API which may result in unexpected bugs or difficulty down the road. The other option would be to create extra <code>DARTLink</code> and <code>DARTJoint</code> objects that correspond to the split <code>dart::dynamics::BodyNode</code> and <code>dart::dynamics::Joint</code> objects, but this would create a discrepancy between the Gazebo representation of the model and the SDF representation of the model, which is likely to cause problems for end-users. Consequently, I think this \"slave link\" approach is the best solution, despite my concerns.</p>\n<p>This implementation of the slave links looks very good. I think I'll be happy to approve it after we run a build test with the latest changes.</p>\n<p>Being able to support closed-loop kinematics with DART has been in demand for a very long time, so I'm grateful that it's finally been done. Thanks, @pchorak !</p>", "type": "rendered"}, "created_on": "2017-08-03T00:48:27.874395+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2017-08-03T00:48:27.964000+00:00", "type": "pullrequest_comment", "id": 42056274}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"update": {"description": "This PR makes it possible to load models containing kinematic loops while using DART physics. The approach is loosely inspired by Simbody's `MultibodyGraphMaker`. The main changes are to `DARTModel.cc` and `DARTModelPrivate.hh`. `DARTModel::Init` creates the DART joints and body nodes (links) corresponding to the loaded model. It breaks the model into trees using breadth-first-search starting from links with the world as their parent or no parents, although it may start from arbitrary links (with parents) if they are the only uninitialized links remaining. In a second step, it loops through any remaining uninitialized (loop) joints and creates them. Since DART does not support multiple parent joints for one body node, the loop joints are  paired with slave body nodes, which are attached to the child body nodes with weld constraints. To avoid issues with massless body nodes, the mass of the link is split across the slave body nodes (80364e6).\r\n\r\n`kinematic_loop.cc` tests two types of kinematic loops. One is a 3-link loop anchored to the world so that one link has two parents (world and preceding link). The other is a 4-link free loop where every link has one child and one parent. The tests let the loops move under gravity and make sure they end up in reasonable configurations.\r\n\r\nThe kinematic loops tested caused DART's Dantzig LCP solver to fail. This PR has changes from pull request #2755 (e.g. 6a4c6f9), which make it possible to specify different LCP solvers for DART (Dantzig or PGS).\r\n\r\nI am aware of at least one issue with this PR (see below) that would be good to address before considering merging it.", "title": "Dart kinematic loops", "destination": {"commit": {"hash": "5e024b2ac9c0", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/5e024b2ac9c0.json"}, "html": {"href": "#!/osrf/gazebo/commits/5e024b2ac9c0"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "a2457d51cddf", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo/commit/a2457d51cddf"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo/commits/a2457d51cddf"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7130b41e-0983-4752-9e3b-9e2c12cf1268}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "pchorak/gazebo", "uuid": "{7130b41e-0983-4752-9e3b-9e2c12cf1268}"}, "branch": {"name": "dart_kinematic_loops"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-03T00:08:23.082642+00:00"}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42054965.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42054965"}}, "parent": {"id": 42053267, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42053267.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42053267"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "The transforms should match because of the code in [DARTJoint::Init](https://bitbucket.org/pchorak/gazebo/src/670ba13937f21efd2e4c9d455e1a50b948b03864/gazebo/physics/dart/DARTJoint.cc?at=dart_kinematic_loops&fileviewer=file-view-default#DARTJoint.cc-74). While the DART loop joint has the slave body node as its child, the Gazebo joint still has the original link as its child. So, when the Gazebo loop joint sets the transforms for its corresponding DART (loop) joint, it does so as if the original link were its child, so the frames should be consistent. I confirmed this by printing the transforms for the `free_loop` and `anchored_loop` world.", "markup": "markdown", "html": "<p>The transforms should match because of the code in <a data-is-external-link=\"true\" href=\"https://bitbucket.org/pchorak/gazebo/src/670ba13937f21efd2e4c9d455e1a50b948b03864/gazebo/physics/dart/DARTJoint.cc?at=dart_kinematic_loops&amp;fileviewer=file-view-default#DARTJoint.cc-74\" rel=\"nofollow\">DARTJoint::Init</a>. While the DART loop joint has the slave body node as its child, the Gazebo joint still has the original link as its child. So, when the Gazebo loop joint sets the transforms for its corresponding DART (loop) joint, it does so as if the original link were its child, so the frames should be consistent. I confirmed this by printing the transforms for the <code>free_loop</code> and <code>anchored_loop</code> world.</p>", "type": "rendered"}, "created_on": "2017-08-03T00:05:54.900147+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-03T00:05:54.902721+00:00", "type": "pullrequest_comment", "id": 42054965}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42053489.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42053489"}}, "parent": {"id": 42053413, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42053413.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42053413"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Ok. I'll look into it. Thanks for pointing it out.", "markup": "markdown", "html": "<p>Ok. I'll look into it. Thanks for pointing it out.</p>", "type": "rendered"}, "created_on": "2017-08-02T23:19:30.250867+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-02T23:19:30.253013+00:00", "type": "pullrequest_comment", "id": 42053489}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42053413.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42053413"}}, "parent": {"id": 42053267, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42053267.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42053267"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "I agree, that would be preferable. It would be best to do that in `CreateLoopJointAndNodePair`.", "markup": "markdown", "html": "<p>I agree, that would be preferable. It would be best to do that in <code>CreateLoopJointAndNodePair</code>.</p>", "type": "rendered"}, "created_on": "2017-08-02T23:17:11.364791+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-02T23:17:11.413895+00:00", "type": "pullrequest_comment", "id": 42053413}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42053267.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42053267"}}, "parent": {"id": 42052384, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42052384.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42052384"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Not certain...but if they aren't aligned my preference would be to make them aligned rather than modify the inertial properties.", "markup": "markdown", "html": "<p>Not certain...but if they aren't aligned my preference would be to make them aligned rather than modify the inertial properties.</p>", "type": "rendered"}, "created_on": "2017-08-02T23:12:40.918436+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-02T23:12:40.920816+00:00", "type": "pullrequest_comment", "id": 42053267}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42053177.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42053177"}}, "parent": {"id": 42051387, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42051387.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42051387"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Changed in [670ba13](https://bitbucket.org/pchorak/gazebo/commits/670ba13)", "markup": "markdown", "html": "<p>Changed in <a data-is-external-link=\"true\" href=\"https://bitbucket.org/pchorak/gazebo/commits/670ba13\" rel=\"nofollow\">670ba13</a></p>", "type": "rendered"}, "created_on": "2017-08-02T23:09:55.574324+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-02T23:09:55.577363+00:00", "type": "pullrequest_comment", "id": 42053177}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42053172.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42053172"}}, "parent": {"id": 42052818, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42052818.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42052818"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Changed in [670ba13](https://bitbucket.org/pchorak/gazebo/commits/670ba13)", "markup": "markdown", "html": "<p>Changed in <a data-is-external-link=\"true\" href=\"https://bitbucket.org/pchorak/gazebo/commits/670ba13\" rel=\"nofollow\">670ba13</a></p>", "type": "rendered"}, "created_on": "2017-08-02T23:09:47.513729+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-02T23:09:47.516593+00:00", "type": "pullrequest_comment", "id": 42053172}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"update": {"description": "This PR makes it possible to load models containing kinematic loops while using DART physics. The approach is loosely inspired by Simbody's `MultibodyGraphMaker`. The main changes are to `DARTModel.cc` and `DARTModelPrivate.hh`. `DARTModel::Init` creates the DART joints and body nodes (links) corresponding to the loaded model. It breaks the model into trees using breadth-first-search starting from links with the world as their parent or no parents, although it may start from arbitrary links (with parents) if they are the only uninitialized links remaining. In a second step, it loops through any remaining uninitialized (loop) joints and creates them. Since DART does not support multiple parent joints for one body node, the loop joints are  paired with slave body nodes, which are attached to the child body nodes with weld constraints. To avoid issues with massless body nodes, the mass of the link is split across the slave body nodes (80364e6).\r\n\r\n`kinematic_loop.cc` tests two types of kinematic loops. One is a 3-link loop anchored to the world so that one link has two parents (world and preceding link). The other is a 4-link free loop where every link has one child and one parent. The tests let the loops move under gravity and make sure they end up in reasonable configurations.\r\n\r\nThe kinematic loops tested caused DART's Dantzig LCP solver to fail. This PR has changes from pull request #2755 (e.g. 6a4c6f9), which make it possible to specify different LCP solvers for DART (Dantzig or PGS).\r\n\r\nI am aware of at least one issue with this PR (see below) that would be good to address before considering merging it.", "title": "Dart kinematic loops", "destination": {"commit": {"hash": "5e024b2ac9c0", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/5e024b2ac9c0.json"}, "html": {"href": "#!/osrf/gazebo/commits/5e024b2ac9c0"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "670ba13937f2", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo/commit/670ba13937f2"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo/commits/670ba13937f2"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/pchorak/gazebo"}, "html": {"href": "https://bitbucket.org/pchorak/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7130b41e-0983-4752-9e3b-9e2c12cf1268}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "pchorak/gazebo", "uuid": "{7130b41e-0983-4752-9e3b-9e2c12cf1268}"}, "branch": {"name": "dart_kinematic_loops"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-02T23:08:28.787025+00:00"}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42053048.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42053048"}}, "parent": {"id": 42052100, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42052100.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42052100"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "This made me think of a related question: @scpeters, do I need to worry about the canonical link here?", "markup": "markdown", "html": "<p>This made me think of a related question: @scpeters, do I need to worry about the canonical link here?</p>", "type": "rendered"}, "created_on": "2017-08-02T23:05:35.796789+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-02T23:05:35.804385+00:00", "type": "pullrequest_comment", "id": 42053048}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42052818.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42052818"}}, "parent": {"id": 42052417, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42052417.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42052417"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "However, the function calls will need to be changed, because `std::queue` offers `push` instead of `push_back` and `pop` instead of `pop_front`.", "markup": "markdown", "html": "<p>However, the function calls will need to be changed, because <code>std::queue</code> offers <code>push</code> instead of <code>push_back</code> and <code>pop</code> instead of <code>pop_front</code>.</p>", "type": "rendered"}, "created_on": "2017-08-02T22:59:48.872891+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-02T22:59:48.934973+00:00", "type": "pullrequest_comment", "id": 42052818}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42052613.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42052613"}}, "parent": {"id": 42052417, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42052417.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42052417"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Good point, `std::queue` should also work in this case, and it would be even more expressive. Implementation-wise, the default for `std::queue` is to use a `std::deque` under the hood, and just restrict the API that's available, so there's no performance difference, but it's more explicit about the role that the container will play.", "markup": "markdown", "html": "<p>Good point, <code>std::queue</code> should also work in this case, and it would be even more expressive. Implementation-wise, the default for <code>std::queue</code> is to use a <code>std::deque</code> under the hood, and just restrict the API that's available, so there's no performance difference, but it's more explicit about the role that the container will play.</p>", "type": "rendered"}, "created_on": "2017-08-02T22:54:44.215516+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-02T22:54:44.287199+00:00", "type": "pullrequest_comment", "id": 42052613}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42052417.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42052417"}}, "parent": {"id": 42051309, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42051309.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42051309"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "I see your point. Would a `std::queue` work as well? I noticed deques used elsewhere and was wondering if there is an advantage over queues (besides being able to push/pop from either end).", "markup": "markdown", "html": "<p>I see your point. Would a <code>std::queue</code> work as well? I noticed deques used elsewhere and was wondering if there is an advantage over queues (besides being able to push/pop from either end).</p>", "type": "rendered"}, "created_on": "2017-08-02T22:49:37.424138+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-02T22:49:37.426511+00:00", "type": "pullrequest_comment", "id": 42052417}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42052384.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42052384"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "How certain are we that the frames of the `slaveNode`s will perfectly match the frame of the master node? In the function `CreateLoopJointAndNodePair`, I don't see anything that appears to align their body-fixed frames. If the frames don't match up, then we'll need to modify the inertial properties below to account for that.", "markup": "markdown", "html": "<p>How certain are we that the frames of the <code>slaveNode</code>s will perfectly match the frame of the master node? In the function <code>CreateLoopJointAndNodePair</code>, I don't see anything that appears to align their body-fixed frames. If the frames don't match up, then we'll need to modify the inertial properties below to account for that.</p>", "type": "rendered"}, "created_on": "2017-08-02T22:48:56.987718+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-02T22:48:57.050860+00:00", "type": "pullrequest_comment", "id": 42052384}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42052100.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42052100"}}, "parent": {"id": 42051880, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42051880.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42051880"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Exactly. DART requires an explicit root joint, but a Gazebo model may not have one. So in such a scenario, this loop picks some link and gives it a free parent joint in DART with the world as its parent. The original parent joint (from the preceding link) will eventually be added as a loop joint.", "markup": "markdown", "html": "<p>Exactly. DART requires an explicit root joint, but a Gazebo model may not have one. So in such a scenario, this loop picks some link and gives it a free parent joint in DART with the world as its parent. The original parent joint (from the preceding link) will eventually be added as a loop joint.</p>", "type": "rendered"}, "created_on": "2017-08-02T22:40:54.968974+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "inline": {}, "updated_on": "2017-08-02T22:40:54.971447+00:00", "type": "pullrequest_comment", "id": 42052100}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42051880.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42051880"}}, "parent": {"id": 42051431, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756/comments/42051431.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756/_/diff#comment-42051431"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}, "content": {"raw": "Or is this related to the fact that Gazebo doesn't explicitly express the concept of a \"FreeJoint\", so the link will get added as a root joint from the perspective of DART even though it's not a root joint from the perspective of Gazebo?\n\nEdit: Discussed this in person, and yes, this is the case.", "markup": "markdown", "html": "<p>Or is this related to the fact that Gazebo doesn't explicitly express the concept of a \"FreeJoint\", so the link will get added as a root joint from the perspective of DART even though it's not a root joint from the perspective of Gazebo?</p>\n<p>Edit: Discussed this in person, and yes, this is the case.</p>", "type": "rendered"}, "created_on": "2017-08-02T22:35:06.144674+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-02T22:38:29.811217+00:00", "type": "pullrequest_comment", "id": 42051880}, "pull_request": {"type": "pullrequest", "id": 2756, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2756.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2756"}}, "title": "Dart kinematic loops"}}], "next": "data/repositories/osrf/gazebo/pullrequests/2756/activity_ctx=64fxgfjub.json"}