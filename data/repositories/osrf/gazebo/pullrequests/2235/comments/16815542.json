{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2235/comments/16815542.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2235/_/diff#comment-16815542"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2235, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2235.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2235"}}, "title": "Make expand items in Palette easier."}, "content": {"raw": "This works for me. One suggestion to reduce duplicate code is to use the same slot for all trees and use `QObject::sender()` to get the tree which sent that specific signal. Something like this:\n\n~~~\nvoid Palette::ExpandTree(const QModelIndex &_index)\n{\n  auto tree = qobject_cast<QTreeView *>(QObject::sender());\n\n  if (!tree)\n    return;\n\n  tree->setExpanded(_index, !tree->isExpanded(_index));\n}\n~~~", "markup": "markdown", "html": "<p>This works for me. One suggestion to reduce duplicate code is to use the same slot for all trees and use <code>QObject::sender()</code> to get the tree which sent that specific signal. Something like this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">void</span> <span class=\"nt\">Palette</span><span class=\"p\">::</span><span class=\"nd\">ExpandTree</span><span class=\"o\">(</span><span class=\"nt\">const</span> <span class=\"nt\">QModelIndex</span> <span class=\"o\">&amp;</span><span class=\"nt\">_index</span><span class=\"o\">)</span>\n<span class=\"p\">{</span>\n  <span class=\"err\">auto</span> <span class=\"err\">tree</span> <span class=\"err\">=</span> <span class=\"err\">qobject_cast&lt;QTreeView</span> <span class=\"err\">*&gt;(</span><span class=\"n\">QObject</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"nf\">sender</span><span class=\"p\">());</span>\n\n  <span class=\"err\">if</span> <span class=\"err\">(!tree)</span>\n    <span class=\"err\">return</span><span class=\"p\">;</span>\n\n  <span class=\"err\">tree-&gt;setExpanded(_index,</span> <span class=\"err\">!tree-&gt;isExpanded(_index))</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</pre></div>", "type": "rendered"}, "created_on": "2016-04-05T19:10:28.153062+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2016-04-05T19:10:28.157851+00:00", "type": "pullrequest_comment", "id": 16815542}