{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2201/comments/16108499.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2201/_/diff#comment-16108499"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2201, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2201.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2201"}}, "title": "fix: remove back projection"}, "content": {"raw": "All the tests involving the pr2 seg-faulted in our jenkins build:\n\n* http://build.osrfoundation.org/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/216/testReport/\n\nI've reproduced the seg-fault of `INTEGRATION_pr2`, which happens at the end of the test:\n\n~~~\n$ test/integration/INTEGRATION_pr2 \n[==========] Running 12 tests from 1 test case.\n[----------] Global test environment set-up.\n[----------] 12 tests from PhysicsEngines/PR2Test\n[ RUN      ] PhysicsEngines/PR2Test.LoadPR2/0\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.2.91\n[Dbg] [ServerFixture.cc:145] ServerFixture load in 1 seconds, timeout after 600 seconds\n[Dbg] [ServerFixture.cc:96] ServerFixture::Unload\nSegmentation fault (core dumped)\n~~~\n\n~~~\nCore was generated by `test/integration/INTEGRATION_pr2'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n#0  0x00007f4b412d56ec in gazebo::rendering::Projector::ProjectorFrameListener::~ProjectorFrameListener (this=0x7f4a9a495418, __in_chrg=<optimized out>)\n    at gazebo/rendering/Projector.cc:217\n217\t    this->filterNode->detachObject(this->filterFrustum);\n(gdb) bt\n#0  0x00007f4b412d56ec in gazebo::rendering::Projector::ProjectorFrameListener::~ProjectorFrameListener (this=0x7f4a9a495418, __in_chrg=<optimized out>)\n    at gazebo/rendering/Projector.cc:217\n#1  0x00007f4b412d5aaa in gazebo::rendering::Projector::~Projector (this=0x7f4a9a4953e0, \n    __in_chrg=<optimized out>)\n    at gazebo/rendering/Projector.cc:47\n#2  0x00007f4b412d5af9 in gazebo::rendering::Projector::~Projector (this=0x7f4a9a4953e0, \n    __in_chrg=<optimized out>)\n    at gazebo/rendering/Projector.cc:52\n#3  0x00007f4b412ed52f in gazebo::rendering::Scene::RemoveVisual (this=this@entry=0x7f4b18954680, \n    _vis=...) at gazebo/rendering/Scene.cc:2778\n#4  0x00007f4b412f1312 in gazebo::rendering::Scene::Clear (this=0x7f4b18954680)\n    at gazebo/rendering/Scene.cc:203\n#5  0x00007f4b412db47a in gazebo::rendering::RenderEngine::RemoveScene (\n    this=this@entry=0x69e220 <SingletonT<gazebo::rendering::RenderEngine>::GetInstance()::t>, \n    _name=\"default\")\n    at gazebo/rendering/RenderEngine.cc:225\n#6  0x00007f4b412db607 in gazebo::rendering::RenderEngine::Fini (\n    this=0x69e220 <SingletonT<gazebo::rendering::RenderEngine>::GetInstance()::t>)\n    at gazebo/rendering/RenderEngine.cc:335\n#7  0x00007f4b412e0f81 in gazebo::rendering::fini ()\n    at gazebo/rendering/RenderingIface.cc:66\n#8  0x00007f4b4160c2b6 in gazebo::sensors::fini ()\n    at gazebo/sensors/SensorsIface.cc:71\n#9  0x0000000000467144 in gazebo::shutdown ()\n    at gazebo/gazebo.cc:236\n#10 0x000000000045dc80 in gazebo::Server::Run (this=0x7f4b180008c0)\n    at gazebo/Server.cc:483\n#11 0x0000000000449d53 in gazebo::ServerFixture::RunServer (this=0xa34830, _worldFilename=..., \n    _paused=<optimized out>, _physics=...)\n    at test/ServerFixture.cc:234\n#12 0x00007f4b3fda3a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#13 0x00007f4b409d7182 in start_thread (arg=0x7f4b1dcf6700) at pthread_create.c:312\n#14 0x00007f4b3e9f147d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n(gdb) \n~~~", "markup": "markdown", "html": "<p>All the tests involving the pr2 seg-faulted in our jenkins build:</p>\n<ul>\n<li><a href=\"http://build.osrfoundation.org/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/216/testReport/\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/216/testReport/</a></li>\n</ul>\n<p>I've reproduced the seg-fault of <code>INTEGRATION_pr2</code>, which happens at the end of the test:</p>\n<div class=\"codehilite\"><pre><span></span>$ test/integration/INTEGRATION_pr2 \n<span class=\"o\">[==========]</span> Running <span class=\"m\">12</span> tests from <span class=\"m\">1</span> <span class=\"nb\">test</span> <span class=\"k\">case</span>.\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> Global <span class=\"nb\">test</span> environment set-up.\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> <span class=\"m\">12</span> tests from PhysicsEngines/PR2Test\n<span class=\"o\">[</span> RUN      <span class=\"o\">]</span> PhysicsEngines/PR2Test.LoadPR2/0\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Waiting <span class=\"k\">for</span> master.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Connected to gazebo master @ http://127.0.0.1:11345\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Publicized address: <span class=\"m\">172</span>.23.2.91\n<span class=\"o\">[</span>Dbg<span class=\"o\">]</span> <span class=\"o\">[</span>ServerFixture.cc:145<span class=\"o\">]</span> ServerFixture load in <span class=\"m\">1</span> seconds, timeout after <span class=\"m\">600</span> seconds\n<span class=\"o\">[</span>Dbg<span class=\"o\">]</span> <span class=\"o\">[</span>ServerFixture.cc:96<span class=\"o\">]</span> ServerFixture::Unload\nSegmentation fault <span class=\"o\">(</span>core dumped<span class=\"o\">)</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>Core was generated by `test/integration/INTEGRATION_pr2&#39;.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n#0  0x00007f4b412d56ec in gazebo::rendering::Projector::ProjectorFrameListener::~ProjectorFrameListener (this=0x7f4a9a495418, __in_chrg=&lt;optimized out&gt;)\n    at gazebo/rendering/Projector.cc:217\n217     this-&gt;filterNode-&gt;detachObject(this-&gt;filterFrustum);\n(gdb) bt\n#0  0x00007f4b412d56ec in gazebo::rendering::Projector::ProjectorFrameListener::~ProjectorFrameListener (this=0x7f4a9a495418, __in_chrg=&lt;optimized out&gt;)\n    at gazebo/rendering/Projector.cc:217\n#1  0x00007f4b412d5aaa in gazebo::rendering::Projector::~Projector (this=0x7f4a9a4953e0, \n    __in_chrg=&lt;optimized out&gt;)\n    at gazebo/rendering/Projector.cc:47\n#2  0x00007f4b412d5af9 in gazebo::rendering::Projector::~Projector (this=0x7f4a9a4953e0, \n    __in_chrg=&lt;optimized out&gt;)\n    at gazebo/rendering/Projector.cc:52\n#3  0x00007f4b412ed52f in gazebo::rendering::Scene::RemoveVisual (this=this@entry=0x7f4b18954680, \n    _vis=...) at gazebo/rendering/Scene.cc:2778\n#4  0x00007f4b412f1312 in gazebo::rendering::Scene::Clear (this=0x7f4b18954680)\n    at gazebo/rendering/Scene.cc:203\n#5  0x00007f4b412db47a in gazebo::rendering::RenderEngine::RemoveScene (\n    this=this@entry=0x69e220 &lt;SingletonT&lt;gazebo::rendering::RenderEngine&gt;::GetInstance()::t&gt;, \n    _name=&quot;default&quot;)\n    at gazebo/rendering/RenderEngine.cc:225\n#6  0x00007f4b412db607 in gazebo::rendering::RenderEngine::Fini (\n    this=0x69e220 &lt;SingletonT&lt;gazebo::rendering::RenderEngine&gt;::GetInstance()::t&gt;)\n    at gazebo/rendering/RenderEngine.cc:335\n#7  0x00007f4b412e0f81 in gazebo::rendering::fini ()\n    at gazebo/rendering/RenderingIface.cc:66\n#8  0x00007f4b4160c2b6 in gazebo::sensors::fini ()\n    at gazebo/sensors/SensorsIface.cc:71\n#9  0x0000000000467144 in gazebo::shutdown ()\n    at gazebo/gazebo.cc:236\n#10 0x000000000045dc80 in gazebo::Server::Run (this=0x7f4b180008c0)\n    at gazebo/Server.cc:483\n#11 0x0000000000449d53 in gazebo::ServerFixture::RunServer (this=0xa34830, _worldFilename=..., \n    _paused=&lt;optimized out&gt;, _physics=...)\n    at test/ServerFixture.cc:234\n#12 0x00007f4b3fda3a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#13 0x00007f4b409d7182 in start_thread (arg=0x7f4b1dcf6700) at pthread_create.c:312\n#14 0x00007f4b3e9f147d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n(gdb) \n</pre></div>", "type": "rendered"}, "created_on": "2016-03-22T19:10:43.202508+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-03-22T19:10:43.205224+00:00", "type": "pullrequest_comment", "id": 16108499}