{"rendered": {"description": {"raw": "The `UNIT_IntrospectionClient_TEST` test is [failing to run on OS X](http://build.osrfoundation.org/view/gazebo/job/gazebo-ci-pr_any-homebrew-amd64/111/testReport/(root)/UNIT_IntrospectionClient_TEST/test_ran/). It seg-faults during the `UpdateFilter` sub-test. I've captured a [backtrace](https://gist.github.com/scpeters/6cb3c7fd2d8ef89e8b31) that implicates the `IntrospectionClient::RemoveAllFilters` function.\r\n\r\n`RemoveAllFilters` has a loop that iterates over the `std::map` called `filters` in the private data pointer and calls `RemoveFilter` that erases elements from the map. It seems that there is a memory access error when trying to increment the iterator in the outer loop after its content has already been erased. I've modified the loop to precompute the next element in the map before calling `RemoveFilter`, which fixes the test failure on my machine.", "markup": "markdown", "html": "<p>The <code>UNIT_IntrospectionClient_TEST</code> test is <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/gazebo/job/gazebo-ci-pr_any-homebrew-amd64/111/testReport/(root)/UNIT_IntrospectionClient_TEST/test_ran/\" rel=\"nofollow\">failing to run on OS X</a>. It seg-faults during the <code>UpdateFilter</code> sub-test. I've captured a <a data-is-external-link=\"true\" href=\"https://gist.github.com/scpeters/6cb3c7fd2d8ef89e8b31\" rel=\"nofollow\">backtrace</a> that implicates the <code>IntrospectionClient::RemoveAllFilters</code> function.</p>\n<p><code>RemoveAllFilters</code> has a loop that iterates over the <code>std::map</code> called <code>filters</code> in the private data pointer and calls <code>RemoveFilter</code> that erases elements from the map. It seems that there is a memory access error when trying to increment the iterator in the outer loop after its content has already been erased. I've modified the loop to precompute the next element in the map before calling <code>RemoveFilter</code>, which fixes the test failure on my machine.</p>", "type": "rendered"}, "title": {"raw": "Plotting: fix UNIT_IntrospectionClient_TEST on osx", "markup": "markdown", "html": "<p>Plotting: fix UNIT_IntrospectionClient_TEST on osx</p>", "type": "rendered"}}, "type": "pullrequest", "description": "The `UNIT_IntrospectionClient_TEST` test is [failing to run on OS X](http://build.osrfoundation.org/view/gazebo/job/gazebo-ci-pr_any-homebrew-amd64/111/testReport/(root)/UNIT_IntrospectionClient_TEST/test_ran/). It seg-faults during the `UpdateFilter` sub-test. I've captured a [backtrace](https://gist.github.com/scpeters/6cb3c7fd2d8ef89e8b31) that implicates the `IntrospectionClient::RemoveAllFilters` function.\r\n\r\n`RemoveAllFilters` has a loop that iterates over the `std::map` called `filters` in the private data pointer and calls `RemoveFilter` that erases elements from the map. It seems that there is a memory access error when trying to increment the iterator in the outer loop after its content has already been erased. I've modified the loop to precompute the next element in the map before calling `RemoveFilter`, which fixes the test failure on my machine.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2135/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diffstat/osrf/gazebo:632d3ab161f2%0D505074a3f111?from_pullrequest_id=2135"}, "commits": {"href": "data/repositories/osrf/gazebo/pullrequests/2135/commits.json"}, "self": {"href": "data/repositories/osrf/gazebo/pullrequests/2135.json"}, "comments": {"href": "data/repositories/osrf/gazebo/pullrequests/2135/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2135/merge"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2135"}, "activity": {"href": "data/repositories/osrf/gazebo/pullrequests/2135/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:632d3ab161f2%0D505074a3f111?from_pullrequest_id=2135"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2135/approve"}, "statuses": {"href": "data/repositories/osrf/gazebo/pullrequests/2135/statuses_page=1.json"}}, "title": "Plotting: fix UNIT_IntrospectionClient_TEST on osx", "close_source_branch": true, "reviewers": [{"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}], "id": 2135, "destination": {"commit": {"hash": "505074a3f111", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/505074a3f111.json"}, "html": {"href": "#!/osrf/gazebo/commits/505074a3f111"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "plotting"}}, "created_on": "2016-02-12T06:59:17.641910+00:00", "summary": {"raw": "The `UNIT_IntrospectionClient_TEST` test is [failing to run on OS X](http://build.osrfoundation.org/view/gazebo/job/gazebo-ci-pr_any-homebrew-amd64/111/testReport/(root)/UNIT_IntrospectionClient_TEST/test_ran/). It seg-faults during the `UpdateFilter` sub-test. I've captured a [backtrace](https://gist.github.com/scpeters/6cb3c7fd2d8ef89e8b31) that implicates the `IntrospectionClient::RemoveAllFilters` function.\r\n\r\n`RemoveAllFilters` has a loop that iterates over the `std::map` called `filters` in the private data pointer and calls `RemoveFilter` that erases elements from the map. It seems that there is a memory access error when trying to increment the iterator in the outer loop after its content has already been erased. I've modified the loop to precompute the next element in the map before calling `RemoveFilter`, which fixes the test failure on my machine.", "markup": "markdown", "html": "<p>The <code>UNIT_IntrospectionClient_TEST</code> test is <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/gazebo/job/gazebo-ci-pr_any-homebrew-amd64/111/testReport/(root)/UNIT_IntrospectionClient_TEST/test_ran/\" rel=\"nofollow\">failing to run on OS X</a>. It seg-faults during the <code>UpdateFilter</code> sub-test. I've captured a <a data-is-external-link=\"true\" href=\"https://gist.github.com/scpeters/6cb3c7fd2d8ef89e8b31\" rel=\"nofollow\">backtrace</a> that implicates the <code>IntrospectionClient::RemoveAllFilters</code> function.</p>\n<p><code>RemoveAllFilters</code> has a loop that iterates over the <code>std::map</code> called <code>filters</code> in the private data pointer and calls <code>RemoveFilter</code> that erases elements from the map. It seems that there is a memory access error when trying to increment the iterator in the outer loop after its content has already been erased. I've modified the loop to precompute the next element in the map before calling <code>RemoveFilter</code>, which fixes the test failure on my machine.</p>", "type": "rendered"}, "source": {"commit": {"hash": "a8ff5a7d33ce", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a8ff5a7d33ce.json"}, "html": {"href": "#!/osrf/gazebo/commits/a8ff5a7d33ce"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "plotting_osx_test"}}, "comment_count": 2, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2016-02-18T16:27:40.424127+00:00", "type": "participant", "approved": true, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, {"role": "PARTICIPANT", "participated_on": "2016-02-12T18:45:28.465845+00:00", "type": "participant", "approved": false, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "REVIEWER", "participated_on": "2016-02-19T03:05:40.156773+00:00", "type": "participant", "approved": false, "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}}, {"role": "REVIEWER", "participated_on": "2016-02-12T22:02:10.091144+00:00", "type": "participant", "approved": true, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}], "reason": "", "updated_on": "2016-02-19T03:05:40.161795+00:00", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "merge_commit": {"hash": "632d3ab161f2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/632d3ab161f2.json"}, "html": {"href": "#!/osrf/gazebo/commits/632d3ab161f2"}}}, "closed_by": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}