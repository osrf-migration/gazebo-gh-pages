{"pagelen": 50, "values": [{"update": {"description": "Issue #1981 notes that if the center of gravity (CoG) of a link with joints is moved after the link, joints, etc. have been initialized, it causes the link to jerk suddenly. The problem occurs because Gazebo sets the origin of the ODE body as the link's CoG ([see here](#!/osrf/gazebo/src/c1c50dc2390e9b1fc168ca41a501db5b57119212/gazebo/physics/ode/ODELink.cc?at=default&fileviewer=file-view-default#ODELink.cc-253)). Thus, when the CoG is moved the ODE body's origin moves as well. Before the ODE joints are attached this is not a problem. However, once the joints have been initialized, moving the CoG causes joint constraints to be violated, so the model jumps to correct them.\r\n\r\nThe ODE function `dMassSetParameters` allows one to specify an offset for the CoG, so theoretically the changes in 479d04db6f74c12f0ba745abc2dda83f88ac50e4 would solve the issue. However, ODE does not support setting the CoG offset to anything but zero ([see here](http://ode.org/ode-latest-userguide.html#sec_13_0_0)).\r\n\r\n* ff62c8a allows link CoGs to be moved after initialization by reattaching the ODE joints when `ODELink::UpdateMass` is called. The collision meshes must also be updated, but this is already handled in `ODELink::UpdateCollisionOffsets`.\r\n\r\n* Reattaching the ODE joints resets the joint angles to zero for the current model configuration. This behavior shifts/breaks joint limits and makes the joint angles reported inconsistent. 2b3b1f6 maintains the joint limits and angles by keeping track of the angles of joints when they are reattached to the same parent and child links.\r\n\r\n* b7d3497 adds a test of the joint limits and angles when moving the CoG (i.e. the fix above).\r\n\r\n* 14c8f74 adds code to update the corresponding visuals when a link CoG is moved. It uses the `~/visual` topic, which may not be intended for CoG and inertia visuals but seemed the least intrusive avenue.  Commit 586ab8cd2976599a957c8c48b4acbe4049ed2bf4 (branch ode_move_cog2_test) has a plugin to check that the CoG visual is updated.\r\n\r\n* 59b776a merges the tests from pull request #2341, which now succeed.\r\n\r\n* 827c807 removes the logic that only reattaches the joints if the CoG has moved more than `1e-3` units since the CoG may move in small increments (e.g. internal actuator or liquid shifting within the link).", "title": "Moving the center of gravity of a link with joints in ODE", "destination": {"commit": {"hash": "5f48d294547f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/5f48d294547f.json"}, "html": {"href": "#!/osrf/gazebo/commits/5f48d294547f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "reason": "", "source": {"commit": {"hash": "119119e6e94b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/119119e6e94b.json"}, "html": {"href": "#!/osrf/gazebo/commits/119119e6e94b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "ode_move_cog2"}}, "state": "DECLINED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-04-17T20:08:14.118388+00:00"}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768/comments/145779791.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768/_/diff#comment-145779791"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}, "content": {"raw": "I ran out of time to review this before the GitHub migration, so I created Issue #2711 to remind us to re-open this PR. I will decline this and start the migration.", "markup": "markdown", "html": "<p>I ran out of time to review this before the GitHub migration, so I created Issue <a href=\"#!/osrf/gazebo/issues/2711/re-submit-pull-request-2768-on-github\" rel=\"nofollow\" title=\"Re-submit pull request #2768 on github &quot;Moving the center of gravity of a link with joints in ODE&quot;\" class=\"ap-connect-link\">#2711</a> to remind us to re-open this PR. I will decline this and start the migration.</p>", "type": "rendered"}, "created_on": "2020-04-17T20:08:04.979880+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2020-04-17T20:08:04.982515+00:00", "type": "pullrequest_comment", "id": 145779791}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"update": {"description": "Issue #1981 notes that if the center of gravity (CoG) of a link with joints is moved after the link, joints, etc. have been initialized, it causes the link to jerk suddenly. The problem occurs because Gazebo sets the origin of the ODE body as the link's CoG ([see here](#!/osrf/gazebo/src/c1c50dc2390e9b1fc168ca41a501db5b57119212/gazebo/physics/ode/ODELink.cc?at=default&fileviewer=file-view-default#ODELink.cc-253)). Thus, when the CoG is moved the ODE body's origin moves as well. Before the ODE joints are attached this is not a problem. However, once the joints have been initialized, moving the CoG causes joint constraints to be violated, so the model jumps to correct them.\r\n\r\nThe ODE function `dMassSetParameters` allows one to specify an offset for the CoG, so theoretically the changes in 479d04db6f74c12f0ba745abc2dda83f88ac50e4 would solve the issue. However, ODE does not support setting the CoG offset to anything but zero ([see here](http://ode.org/ode-latest-userguide.html#sec_13_0_0)).\r\n\r\n* ff62c8a allows link CoGs to be moved after initialization by reattaching the ODE joints when `ODELink::UpdateMass` is called. The collision meshes must also be updated, but this is already handled in `ODELink::UpdateCollisionOffsets`.\r\n\r\n* Reattaching the ODE joints resets the joint angles to zero for the current model configuration. This behavior shifts/breaks joint limits and makes the joint angles reported inconsistent. 2b3b1f6 maintains the joint limits and angles by keeping track of the angles of joints when they are reattached to the same parent and child links.\r\n\r\n* b7d3497 adds a test of the joint limits and angles when moving the CoG (i.e. the fix above).\r\n\r\n* 14c8f74 adds code to update the corresponding visuals when a link CoG is moved. It uses the `~/visual` topic, which may not be intended for CoG and inertia visuals but seemed the least intrusive avenue.  Commit 586ab8cd2976599a957c8c48b4acbe4049ed2bf4 (branch ode_move_cog2_test) has a plugin to check that the CoG visual is updated.\r\n\r\n* 59b776a merges the tests from pull request #2341, which now succeed.\r\n\r\n* 827c807 removes the logic that only reattaches the joints if the CoG has moved more than `1e-3` units since the CoG may move in small increments (e.g. internal actuator or liquid shifting within the link).", "title": "Moving the center of gravity of a link with joints in ODE", "destination": {"commit": {"hash": "5f48d294547f", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/5f48d294547f.json"}, "html": {"href": "#!/osrf/gazebo/commits/5f48d294547f"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "reason": "", "source": {"commit": {"hash": "119119e6e94b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/119119e6e94b.json"}, "html": {"href": "#!/osrf/gazebo/commits/119119e6e94b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "ode_move_cog2"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-04-17T20:03:36.184711+00:00"}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"update": {"description": "Issue #1981 notes that if the center of gravity (CoG) of a link with joints is moved after the link, joints, etc. have been initialized, it causes the link to jerk suddenly. The problem occurs because Gazebo sets the origin of the ODE body as the link's CoG ([see here](#!/osrf/gazebo/src/c1c50dc2390e9b1fc168ca41a501db5b57119212/gazebo/physics/ode/ODELink.cc?at=default&fileviewer=file-view-default#ODELink.cc-253)). Thus, when the CoG is moved the ODE body's origin moves as well. Before the ODE joints are attached this is not a problem. However, once the joints have been initialized, moving the CoG causes joint constraints to be violated, so the model jumps to correct them.\r\n\r\nThe ODE function `dMassSetParameters` allows one to specify an offset for the CoG, so theoretically the changes [here](https://bitbucket.org/pchorak/gazebo/commits/479d04db6f74c12f0ba745abc2dda83f88ac50e4) would solve the issue. However, ODE does not support setting the CoG offset to anything but zero ([see here](http://ode.org/ode-latest-userguide.html#sec_13_0_0)).\r\n\r\n* ff62c8a allows link CoGs to be moved after initialization by reattaching the ODE joints when `ODELink::UpdateMass` is called. The collision meshes must also be updated, but this is already handled in `ODELink::UpdateCollisionOffsets`.\r\n\r\n* Reattaching the ODE joints resets the joint angles to zero for the current model configuration. This behavior shifts/breaks joint limits and makes the joint angles reported inconsistent. 2b3b1f6 maintains the joint limits and angles by keeping track of the angles of joints when they are reattached to the same parent and child links.\r\n\r\n* b7d3497 adds a test of the joint limits and angles when moving the CoG (i.e. the fix above).\r\n\r\n* 14c8f74 adds code to update the corresponding visuals when a link CoG is moved. It uses the `~/visual` topic, which may not be intended for CoG and inertia visuals but seemed the least intrusive avenue. [This commit](https://bitbucket.org/pchorak/gazebo/commits/586ab8cd2976599a957c8c48b4acbe4049ed2bf4?at=ode_move_cog2_test) has a plugin to check that the CoG visual is updated.\r\n\r\n* 59b776a merges the tests from pull request #2341, which now succeed.\r\n\r\n* 827c807 removes the logic that only reattaches the joints if the CoG has moved more than `1e-3` units since the CoG may move in small increments (e.g. internal actuator or liquid shifting within the link).", "title": "Moving the center of gravity of a link with joints in ODE", "destination": {"commit": {"hash": "cde54284e90b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/cde54284e90b.json"}, "html": {"href": "#!/osrf/gazebo/commits/cde54284e90b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "reason": "", "source": {"commit": {"hash": "119119e6e94b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/119119e6e94b.json"}, "html": {"href": "#!/osrf/gazebo/commits/119119e6e94b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "ode_move_cog2"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-04-13T08:22:01.014222+00:00"}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"update": {"description": "Issue #1981 notes that if the center of gravity (CoG) of a link with joints is moved after the link, joints, etc. have been initialized, it causes the link to jerk suddenly. The problem occurs because Gazebo sets the origin of the ODE body as the link's CoG ([see here](#!/osrf/gazebo/src/c1c50dc2390e9b1fc168ca41a501db5b57119212/gazebo/physics/ode/ODELink.cc?at=default&fileviewer=file-view-default#ODELink.cc-253)). Thus, when the CoG is moved the ODE body's origin moves as well. Before the ODE joints are attached this is not a problem. However, once the joints have been initialized, moving the CoG causes joint constraints to be violated, so the model jumps to correct them.\r\n\r\nThe ODE function `dMassSetParameters` allows one to specify an offset for the CoG, so theoretically the changes [here](https://bitbucket.org/pchorak/gazebo/commits/479d04db6f74c12f0ba745abc2dda83f88ac50e4) would solve the issue. However, ODE does not support setting the CoG offset to anything but zero ([see here](http://ode.org/ode-latest-userguide.html#sec_13_0_0)).\r\n\r\n* ff62c8a allows link CoGs to be moved after initialization by reattaching the ODE joints when `ODELink::UpdateMass` is called. The collision meshes must also be updated, but this is already handled in `ODELink::UpdateCollisionOffsets`.\r\n\r\n* Reattaching the ODE joints resets the joint angles to zero for the current model configuration. This behavior shifts/breaks joint limits and makes the joint angles reported inconsistent. 2b3b1f6 maintains the joint limits and angles by keeping track of the angles of joints when they are reattached to the same parent and child links.\r\n\r\n* b7d3497 adds a test of the joint limits and angles when moving the CoG (i.e. the fix above).\r\n\r\n* 14c8f74 adds code to update the corresponding visuals when a link CoG is moved. It uses the `~/visual` topic, which may not be intended for CoG and inertia visuals but seemed the least intrusive avenue. [This commit](https://bitbucket.org/pchorak/gazebo/commits/586ab8cd2976599a957c8c48b4acbe4049ed2bf4?at=ode_move_cog2_test) has a plugin to check that the CoG visual is updated.\r\n\r\n* 59b776a merges the tests from pull request #2341, which now succeed.\r\n\r\n* 827c807 removes the logic that only reattaches the joints if the CoG has moved more than `1e-3` units since the CoG may move in small increments (e.g. internal actuator or liquid shifting within the link).", "title": "Moving the center of gravity of a link with joints in ODE", "destination": {"commit": {"hash": "cde54284e90b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/cde54284e90b.json"}, "html": {"href": "#!/osrf/gazebo/commits/cde54284e90b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "reason": "", "source": {"commit": {"hash": "03b2320d9558", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/03b2320d9558.json"}, "html": {"href": "#!/osrf/gazebo/commits/03b2320d9558"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "ode_move_cog2"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-06T18:27:47.061472+00:00"}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"update": {"description": "Issue #1981 notes that if the center of gravity (CoG) of a link with joints is moved after the link, joints, etc. have been initialized, it causes the link to jerk suddenly. The problem occurs because Gazebo sets the origin of the ODE body as the link's CoG ([see here](#!/osrf/gazebo/src/c1c50dc2390e9b1fc168ca41a501db5b57119212/gazebo/physics/ode/ODELink.cc?at=default&fileviewer=file-view-default#ODELink.cc-253)). Thus, when the CoG is moved the ODE body's origin moves as well. Before the ODE joints are attached this is not a problem. However, once the joints have been initialized, moving the CoG causes joint constraints to be violated, so the model jumps to correct them.\r\n\r\nThe ODE function `dMassSetParameters` allows one to specify an offset for the CoG, so theoretically the changes [here](https://bitbucket.org/pchorak/gazebo/commits/479d04db6f74c12f0ba745abc2dda83f88ac50e4) would solve the issue. However, ODE does not support setting the CoG offset to anything but zero ([see here](http://ode.org/ode-latest-userguide.html#sec_13_0_0)).\r\n\r\n* ff62c8a allows link CoGs to be moved after initialization by reattaching the ODE joints when `ODELink::UpdateMass` is called. The collision meshes must also be updated, but this is already handled in `ODELink::UpdateCollisionOffsets`.\r\n\r\n* Reattaching the ODE joints resets the joint angles to zero for the current model configuration. This behavior shifts/breaks joint limits and makes the joint angles reported inconsistent. 2b3b1f6 maintains the joint limits and angles by keeping track of the angles of joints when they are reattached to the same parent and child links.\r\n\r\n* b7d3497 adds a test of the joint limits and angles when moving the CoG (i.e. the fix above).\r\n\r\n* 14c8f74 adds code to update the corresponding visuals when a link CoG is moved. It uses the `~/visual` topic, which may not be intended for CoG and inertia visuals but seemed the least intrusive avenue. [This commit](https://bitbucket.org/pchorak/gazebo/commits/586ab8cd2976599a957c8c48b4acbe4049ed2bf4?at=ode_move_cog2_test) has a plugin to check that the CoG visual is updated.\r\n\r\n* 59b776a merges the tests from pull request #2341, which now succeed.\r\n\r\n* 827c807 removes the logic that only reattaches the joints if the CoG has moved more than `1e-3` units since the CoG may move in small increments (e.g. internal actuator or liquid shifting within the link).", "title": "Moving the center of gravity of a link with joints in ODE", "destination": {"commit": {"hash": "cbcad8ac8734", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/cbcad8ac8734.json"}, "html": {"href": "#!/osrf/gazebo/commits/cbcad8ac8734"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "reason": "", "source": {"commit": {"hash": "03b2320d9558", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/03b2320d9558.json"}, "html": {"href": "#!/osrf/gazebo/commits/03b2320d9558"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "ode_move_cog2"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-01-25T15:52:04.882827+00:00"}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"update": {"description": "Issue #1981 notes that if the center of gravity (CoG) of a link with joints is moved after the link, joints, etc. have been initialized, it causes the link to jerk suddenly. The problem occurs because Gazebo sets the origin of the ODE body as the link's CoG ([see here](#!/osrf/gazebo/src/c1c50dc2390e9b1fc168ca41a501db5b57119212/gazebo/physics/ode/ODELink.cc?at=default&fileviewer=file-view-default#ODELink.cc-253)). Thus, when the CoG is moved the ODE body's origin moves as well. Before the ODE joints are attached this is not a problem. However, once the joints have been initialized, moving the CoG causes joint constraints to be violated, so the model jumps to correct them.\r\n\r\nThe ODE function `dMassSetParameters` allows one to specify an offset for the CoG, so theoretically the changes [here](https://bitbucket.org/pchorak/gazebo/commits/479d04db6f74c12f0ba745abc2dda83f88ac50e4) would solve the issue. However, ODE does not support setting the CoG offset to anything but zero ([see here](http://ode.org/ode-latest-userguide.html#sec_13_0_0)).\r\n\r\n* ff62c8a allows link CoGs to be moved after initialization by reattaching the ODE joints when `ODELink::UpdateMass` is called. The collision meshes must also be updated, but this is already handled in `ODELink::UpdateCollisionOffsets`.\r\n\r\n* Reattaching the ODE joints resets the joint angles to zero for the current model configuration. This behavior shifts/breaks joint limits and makes the joint angles reported inconsistent. 2b3b1f6 maintains the joint limits and angles by keeping track of the angles of joints when they are reattached to the same parent and child links.\r\n\r\n* b7d3497 adds a test of the joint limits and angles when moving the CoG (i.e. the fix above).\r\n\r\n* 14c8f74 adds code to update the corresponding visuals when a link CoG is moved. It uses the `~/visual` topic, which may not be intended for CoG and inertia visuals but seemed the least intrusive avenue. [This commit](https://bitbucket.org/pchorak/gazebo/commits/586ab8cd2976599a957c8c48b4acbe4049ed2bf4?at=ode_move_cog2_test) has a plugin to check that the CoG visual is updated.\r\n\r\n* 59b776a merges the tests from pull request #2341, which now succeed.\r\n\r\n* 827c807 removes the logic that only reattaches the joints if the CoG has moved more than `1e-3` units since the CoG may move in small increments (e.g. internal actuator or liquid shifting within the link).", "title": "Moving the center of gravity of a link with joints in ODE", "destination": {"commit": {"hash": "cbcad8ac8734", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/cbcad8ac8734.json"}, "html": {"href": "#!/osrf/gazebo/commits/cbcad8ac8734"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "reason": "", "source": {"commit": {"hash": "03b2320d9558", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/03b2320d9558.json"}, "html": {"href": "#!/osrf/gazebo/commits/03b2320d9558"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "ode_move_cog2"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-01-25T15:52:04.845453+00:00"}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768/comments/132948583.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768/_/diff#comment-132948583"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}, "content": {"raw": "The ABI-breaking part of this PR has been merged into `default` (soon to be `gazebo11`) on pull request #3185, so this PR can be retargeted at `gazebo11` after the release.", "markup": "markdown", "html": "<p>The ABI-breaking part of this PR has been merged into <code>default</code> (soon to be <code>gazebo11</code>) on <a href=\"#!/osrf/gazebo/pull-requests/3185/add-abi-breaking-change-from-pr-2768\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #3185</a>, so this PR can be retargeted at <code>gazebo11</code> after the release.</p>", "type": "rendered"}, "created_on": "2020-01-23T21:05:26.849453+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-01-23T21:05:26.857973+00:00", "type": "pullrequest_comment", "id": 132948583}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"update": {"description": "Issue #1981 notes that if the center of gravity (CoG) of a link with joints is moved after the link, joints, etc. have been initialized, it causes the link to jerk suddenly. The problem occurs because Gazebo sets the origin of the ODE body as the link's CoG ([see here](#!/osrf/gazebo/src/c1c50dc2390e9b1fc168ca41a501db5b57119212/gazebo/physics/ode/ODELink.cc?at=default&fileviewer=file-view-default#ODELink.cc-253)). Thus, when the CoG is moved the ODE body's origin moves as well. Before the ODE joints are attached this is not a problem. However, once the joints have been initialized, moving the CoG causes joint constraints to be violated, so the model jumps to correct them.\r\n\r\nThe ODE function `dMassSetParameters` allows one to specify an offset for the CoG, so theoretically the changes [here](https://bitbucket.org/pchorak/gazebo/commits/479d04db6f74c12f0ba745abc2dda83f88ac50e4) would solve the issue. However, ODE does not support setting the CoG offset to anything but zero ([see here](http://ode.org/ode-latest-userguide.html#sec_13_0_0)).\r\n\r\n* ff62c8a allows link CoGs to be moved after initialization by reattaching the ODE joints when `ODELink::UpdateMass` is called. The collision meshes must also be updated, but this is already handled in `ODELink::UpdateCollisionOffsets`.\r\n\r\n* Reattaching the ODE joints resets the joint angles to zero for the current model configuration. This behavior shifts/breaks joint limits and makes the joint angles reported inconsistent. 2b3b1f6 maintains the joint limits and angles by keeping track of the angles of joints when they are reattached to the same parent and child links.\r\n\r\n* b7d3497 adds a test of the joint limits and angles when moving the CoG (i.e. the fix above).\r\n\r\n* 14c8f74 adds code to update the corresponding visuals when a link CoG is moved. It uses the `~/visual` topic, which may not be intended for CoG and inertia visuals but seemed the least intrusive avenue. [This commit](https://bitbucket.org/pchorak/gazebo/commits/586ab8cd2976599a957c8c48b4acbe4049ed2bf4?at=ode_move_cog2_test) has a plugin to check that the CoG visual is updated.\r\n\r\n* 59b776a merges the tests from pull request #2341, which now succeed.\r\n\r\n* 827c807 removes the logic that only reattaches the joints if the CoG has moved more than `1e-3` units since the CoG may move in small increments (e.g. internal actuator or liquid shifting within the link).", "title": "Moving the center of gravity of a link with joints in ODE", "destination": {"commit": {"hash": "e7e06492763a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/e7e06492763a.json"}, "html": {"href": "#!/osrf/gazebo/commits/e7e06492763a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "reason": "", "source": {"commit": {"hash": "03b2320d9558", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/03b2320d9558.json"}, "html": {"href": "#!/osrf/gazebo/commits/03b2320d9558"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "ode_move_cog2"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-01-22T22:24:45.051613+00:00"}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"update": {"description": "Issue #1981 notes that if the center of gravity (CoG) of a link with joints is moved after the link, joints, etc. have been initialized, it causes the link to jerk suddenly. The problem occurs because Gazebo sets the origin of the ODE body as the link's CoG ([see here](#!/osrf/gazebo/src/c1c50dc2390e9b1fc168ca41a501db5b57119212/gazebo/physics/ode/ODELink.cc?at=default&fileviewer=file-view-default#ODELink.cc-253)). Thus, when the CoG is moved the ODE body's origin moves as well. Before the ODE joints are attached this is not a problem. However, once the joints have been initialized, moving the CoG causes joint constraints to be violated, so the model jumps to correct them.\r\n\r\nThe ODE function `dMassSetParameters` allows one to specify an offset for the CoG, so theoretically the changes [here](https://bitbucket.org/pchorak/gazebo/commits/479d04db6f74c12f0ba745abc2dda83f88ac50e4) would solve the issue. However, ODE does not support setting the CoG offset to anything but zero ([see here](http://ode.org/ode-latest-userguide.html#sec_13_0_0)).\r\n\r\n* ff62c8a allows link CoGs to be moved after initialization by reattaching the ODE joints when `ODELink::UpdateMass` is called. The collision meshes must also be updated, but this is already handled in `ODELink::UpdateCollisionOffsets`.\r\n\r\n* Reattaching the ODE joints resets the joint angles to zero for the current model configuration. This behavior shifts/breaks joint limits and makes the joint angles reported inconsistent. 2b3b1f6 maintains the joint limits and angles by keeping track of the angles of joints when they are reattached to the same parent and child links.\r\n\r\n* b7d3497 adds a test of the joint limits and angles when moving the CoG (i.e. the fix above).\r\n\r\n* 14c8f74 adds code to update the corresponding visuals when a link CoG is moved. It uses the `~/visual` topic, which may not be intended for CoG and inertia visuals but seemed the least intrusive avenue. [This commit](https://bitbucket.org/pchorak/gazebo/commits/586ab8cd2976599a957c8c48b4acbe4049ed2bf4?at=ode_move_cog2_test) has a plugin to check that the CoG visual is updated.\r\n\r\n* 59b776a merges the tests from pull request #2341, which now succeed.\r\n\r\n* 827c807 removes the logic that only reattaches the joints if the CoG has moved more than `1e-3` units since the CoG may move in small increments (e.g. internal actuator or liquid shifting within the link).", "title": "Moving the center of gravity of a link with joints in ODE", "destination": {"commit": {"hash": "1054201b80f7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1054201b80f7.json"}, "html": {"href": "#!/osrf/gazebo/commits/1054201b80f7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "reason": "", "source": {"commit": {"hash": "36c6361edd72", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/36c6361edd72.json"}, "html": {"href": "#!/osrf/gazebo/commits/36c6361edd72"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "ode_move_cog2"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-18T21:30:10.807842+00:00"}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"update": {"description": "Issue #1981 notes that if the center of gravity (CoG) of a link with joints is moved after the link, joints, etc. have been initialized, it causes the link to jerk suddenly. The problem occurs because Gazebo sets the origin of the ODE body as the link's CoG ([see here](#!/osrf/gazebo/src/c1c50dc2390e9b1fc168ca41a501db5b57119212/gazebo/physics/ode/ODELink.cc?at=default&fileviewer=file-view-default#ODELink.cc-253)). Thus, when the CoG is moved the ODE body's origin moves as well. Before the ODE joints are attached this is not a problem. However, once the joints have been initialized, moving the CoG causes joint constraints to be violated, so the model jumps to correct them.\r\n\r\nThe ODE function `dMassSetParameters` allows one to specify an offset for the CoG, so theoretically the changes [here](https://bitbucket.org/pchorak/gazebo/commits/479d04db6f74c12f0ba745abc2dda83f88ac50e4) would solve the issue. However, ODE does not support setting the CoG offset to anything but zero ([see here](http://ode.org/ode-latest-userguide.html#sec_13_0_0)).\r\n\r\n* ff62c8a allows link CoGs to be moved after initialization by reattaching the ODE joints when `ODELink::UpdateMass` is called. The collision meshes must also be updated, but this is already handled in `ODELink::UpdateCollisionOffsets`.\r\n\r\n* Reattaching the ODE joints resets the joint angles to zero for the current model configuration. This behavior shifts/breaks joint limits and makes the joint angles reported inconsistent. 2b3b1f6 maintains the joint limits and angles by keeping track of the angles of joints when they are reattached to the same parent and child links.\r\n\r\n* b7d3497 adds a test of the joint limits and angles when moving the CoG (i.e. the fix above).\r\n\r\n* 14c8f74 adds code to update the corresponding visuals when a link CoG is moved. It uses the `~/visual` topic, which may not be intended for CoG and inertia visuals but seemed the least intrusive avenue. [This commit](https://bitbucket.org/pchorak/gazebo/commits/586ab8cd2976599a957c8c48b4acbe4049ed2bf4?at=ode_move_cog2_test) has a plugin to check that the CoG visual is updated.\r\n\r\n* 59b776a merges the tests from pull request #2341, which now succeed.\r\n\r\n* 827c807 removes the logic that only reattaches the joints if the CoG has moved more than `1e-3` units since the CoG may move in small increments (e.g. internal actuator or liquid shifting within the link).", "title": "Moving the center of gravity of a link with joints in ODE", "destination": {"commit": {"hash": "1054201b80f7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1054201b80f7.json"}, "html": {"href": "#!/osrf/gazebo/commits/1054201b80f7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "reason": "", "source": {"commit": {"hash": "f49e7f510042", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/f49e7f510042.json"}, "html": {"href": "#!/osrf/gazebo/commits/f49e7f510042"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "ode_move_cog2"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-18T21:27:09.908847+00:00"}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"update": {"description": "Issue #1981 notes that if the center of gravity (CoG) of a link with joints is moved after the link, joints, etc. have been initialized, it causes the link to jerk suddenly. The problem occurs because Gazebo sets the origin of the ODE body as the link's CoG ([see here](#!/osrf/gazebo/src/c1c50dc2390e9b1fc168ca41a501db5b57119212/gazebo/physics/ode/ODELink.cc?at=default&fileviewer=file-view-default#ODELink.cc-253)). Thus, when the CoG is moved the ODE body's origin moves as well. Before the ODE joints are attached this is not a problem. However, once the joints have been initialized, moving the CoG causes joint constraints to be violated, so the model jumps to correct them.\r\n\r\nThe ODE function `dMassSetParameters` allows one to specify an offset for the CoG, so theoretically the changes [here](https://bitbucket.org/pchorak/gazebo/commits/479d04db6f74c12f0ba745abc2dda83f88ac50e4) would solve the issue. However, ODE does not support setting the CoG offset to anything but zero ([see here](http://ode.org/ode-latest-userguide.html#sec_13_0_0)).\r\n\r\n* ff62c8a allows link CoGs to be moved after initialization by reattaching the ODE joints when `ODELink::UpdateMass` is called. The collision meshes must also be updated, but this is already handled in `ODELink::UpdateCollisionOffsets`.\r\n\r\n* Reattaching the ODE joints resets the joint angles to zero for the current model configuration. This behavior shifts/breaks joint limits and makes the joint angles reported inconsistent. 2b3b1f6 maintains the joint limits and angles by keeping track of the angles of joints when they are reattached to the same parent and child links.\r\n\r\n* b7d3497 adds a test of the joint limits and angles when moving the CoG (i.e. the fix above).\r\n\r\n* 14c8f74 adds code to update the corresponding visuals when a link CoG is moved. It uses the `~/visual` topic, which may not be intended for CoG and inertia visuals but seemed the least intrusive avenue. [This commit](https://bitbucket.org/pchorak/gazebo/commits/586ab8cd2976599a957c8c48b4acbe4049ed2bf4?at=ode_move_cog2_test) has a plugin to check that the CoG visual is updated.\r\n\r\n* 59b776a merges the tests from pull request #2341, which now succeed.\r\n\r\n* 827c807 removes the logic that only reattaches the joints if the CoG has moved more than `1e-3` units since the CoG may move in small increments (e.g. internal actuator or liquid shifting within the link).", "title": "Moving the center of gravity of a link with joints in ODE", "destination": {"commit": {"hash": "c1c50dc2390e", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/c1c50dc2390e.json"}, "html": {"href": "#!/osrf/gazebo/commits/c1c50dc2390e"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "reason": "", "source": {"commit": {"hash": "827c807cc5cb", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/827c807cc5cb.json"}, "html": {"href": "#!/osrf/gazebo/commits/827c807cc5cb"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "ode_move_cog2"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-15T23:59:38.206283+00:00"}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}, {"update": {"description": "Issue #1981 notes that if the center of gravity (CoG) of a link with joints is moved after the link, joints, etc. have been initialized, it causes the link to jerk suddenly. The problem occurs because Gazebo sets the origin of the ODE body as the link's CoG ([see here](#!/osrf/gazebo/src/c1c50dc2390e9b1fc168ca41a501db5b57119212/gazebo/physics/ode/ODELink.cc?at=default&fileviewer=file-view-default#ODELink.cc-253)). Thus, when the CoG is moved the ODE body's origin moves as well. Before the ODE joints are attached this is not a problem. However, once the joints have been initialized, moving the CoG causes joint constraints to be violated, so the model jumps to correct them.\r\n\r\nThe ODE function `dMassSetParameters` allows one to specify an offset for the CoG, so theoretically the changes [here](https://bitbucket.org/pchorak/gazebo/commits/479d04db6f74c12f0ba745abc2dda83f88ac50e4) would solve the issue. However, ODE does not support setting the CoG offset to anything but zero ([see here](http://ode.org/ode-latest-userguide.html#sec_13_0_0)).\r\n\r\n* ff62c8a allows link CoGs to be moved after initialization by reattaching the ODE joints when `ODELink::UpdateMass` is called. The collision meshes must also be updated, but this is already handled in `ODELink::UpdateCollisionOffsets`.\r\n\r\n* Reattaching the ODE joints resets the joint angles to zero for the current model configuration. This behavior shifts/breaks joint limits and makes the joint angles reported inconsistent. 2b3b1f6 maintains the joint limits and angles by keeping track of the angles of joints when they are reattached to the same parent and child links.\r\n\r\n* b7d3497 adds a test of the joint limits and angles when moving the CoG (i.e. the fix above).\r\n\r\n* 14c8f74 adds code to update the corresponding visuals when a link CoG is moved. It uses the `~/visual` topic, which may not be intended for CoG and inertia visuals but seemed the least intrusive avenue. [This commit](https://bitbucket.org/pchorak/gazebo/commits/586ab8cd2976599a957c8c48b4acbe4049ed2bf4?at=ode_move_cog2_test) has a plugin to check that the CoG visual is updated.\r\n\r\n* 59b776a merges the tests from pull request #2341, which now succeed.\r\n\r\n* 827c807 removes the logic that only reattaches the joints if the CoG has moved more than `1e-3` units since the CoG may move in small increments (e.g. internal actuator or liquid shifting within the link).", "title": "Moving the center of gravity of a link with joints in ODE", "destination": {"commit": {"hash": "c1c50dc2390e", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/c1c50dc2390e.json"}, "html": {"href": "#!/osrf/gazebo/commits/c1c50dc2390e"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo11"}}, "reason": "", "source": {"commit": {"hash": "827c807cc5cb", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/827c807cc5cb.json"}, "html": {"href": "#!/osrf/gazebo/commits/827c807cc5cb"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "ode_move_cog2"}}, "state": "OPEN", "author": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "date": "2017-08-15T23:59:38.173109+00:00"}, "pull_request": {"type": "pullrequest", "id": 2768, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2768"}}, "title": "Moving the center of gravity of a link with joints in ODE"}}]}