{"pagelen": 50, "values": [{"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "521fbd30887a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/521fbd30887a.json"}, "html": {"href": "#!/osrf/gazebo/commits/521fbd30887a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "80ab9fd6cc00", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/80ab9fd6cc00.json"}, "html": {"href": "#!/osrf/gazebo/commits/80ab9fd6cc00"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "MERGED", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2018-03-07T19:19:51.927989+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58222522.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58222522"}}, "parent": {"id": 58214143, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58214143.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58214143"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "Done 80ab9fd", "markup": "markdown", "html": "<p>Done <a href=\"#!/osrf/gazebo/commits/80ab9fd\" rel=\"nofollow\" class=\"ap-connect-link\">80ab9fd</a></p>", "type": "rendered"}, "created_on": "2018-03-07T19:18:26.991378+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-03-07T19:18:26.994475+00:00", "type": "pullrequest_comment", "id": 58222522}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "521fbd30887a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/521fbd30887a.json"}, "html": {"href": "#!/osrf/gazebo/commits/521fbd30887a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "80ab9fd6cc00", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/80ab9fd6cc00.json"}, "html": {"href": "#!/osrf/gazebo/commits/80ab9fd6cc00"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2018-03-07T19:18:02.997993+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58220265.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58220265"}}, "parent": {"id": 58218246, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58218246.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58218246"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "on it\n", "markup": "markdown", "html": "<p>on it</p>", "type": "rendered"}, "created_on": "2018-03-07T18:53:08.597884+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-03-07T18:53:08.602493+00:00", "type": "pullrequest_comment", "id": 58220265}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58218246.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58218246"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "`const` here too?", "markup": "markdown", "html": "<p><code>const</code> here too?</p>", "type": "rendered"}, "created_on": "2018-03-07T18:29:27.734830+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-03-07T18:29:27.737779+00:00", "type": "pullrequest_comment", "id": 58218246}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58215247.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58215247"}}, "parent": {"id": 58215060, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58215060.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58215060"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "Ooops, my bad. I should have realized that.", "markup": "markdown", "html": "<p>Ooops, my bad. I should have realized that.</p>", "type": "rendered"}, "created_on": "2018-03-07T17:59:15.007850+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {}, "updated_on": "2018-03-07T17:59:15.011515+00:00", "type": "pullrequest_comment", "id": 58215247}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58215060.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58215060"}}, "parent": {"id": 58214635, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58214635.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58214635"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "But this method is being added by this PR, right?", "markup": "markdown", "html": "<p>But this method is being added by this PR, right?</p>", "type": "rendered"}, "created_on": "2018-03-07T17:57:29.245616+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-03-07T17:57:29.250909+00:00", "type": "pullrequest_comment", "id": 58215060}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58214635.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58214635"}}, "parent": {"id": 58214143, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58214143.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58214143"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "Making this method const will break ABI because const is part of the symbol name, but I think it is safe to add an additional method that is const.\n\ni.e.\n```c++\n      /// \\brief Get whether there's at least one sensor container running.\n      /// \\return True if running.\n      public: bool Running();\n\n      /// \\brief Get whether there's at least one sensor container running.\n      /// \\return True if running.\n      public: bool Running() const;\n```", "markup": "markdown", "html": "<p>Making this method const will break ABI because const is part of the symbol name, but I think it is safe to add an additional method that is const.</p>\n<p>i.e.</p>\n<div class=\"codehilite language-c++\"><pre><span></span>      <span class=\"c1\">/// \\brief Get whether there&#39;s at least one sensor container running.</span>\n      <span class=\"c1\">/// \\return True if running.</span>\n      <span class=\"k\">public</span><span class=\"o\">:</span> <span class=\"kt\">bool</span> <span class=\"n\">Running</span><span class=\"p\">();</span>\n\n      <span class=\"c1\">/// \\brief Get whether there&#39;s at least one sensor container running.</span>\n      <span class=\"c1\">/// \\return True if running.</span>\n      <span class=\"k\">public</span><span class=\"o\">:</span> <span class=\"kt\">bool</span> <span class=\"n\">Running</span><span class=\"p\">()</span> <span class=\"k\">const</span><span class=\"p\">;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2018-03-07T17:53:29.325111+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {}, "updated_on": "2018-03-07T17:53:29.328420+00:00", "type": "pullrequest_comment", "id": 58214635}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/58214143.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-58214143"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "I'll make this const", "markup": "markdown", "html": "<p>I'll make this const</p>", "type": "rendered"}, "created_on": "2018-03-07T17:49:03.954112+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-03-07T17:49:03.958008+00:00", "type": "pullrequest_comment", "id": 58214143}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "521fbd30887a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/521fbd30887a.json"}, "html": {"href": "#!/osrf/gazebo/commits/521fbd30887a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "a5934565a9ee", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a5934565a9ee.json"}, "html": {"href": "#!/osrf/gazebo/commits/a5934565a9ee"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2018-03-07T17:42:31.409805+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"approval": {"date": "2018-03-07T15:48:50.112171+00:00", "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"approval": {"date": "2018-02-13T22:00:49.864989+00:00", "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/56228780.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-56228780"}}, "parent": {"id": 56118620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/56118620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-56118620"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "np, thanks for remembering!", "markup": "markdown", "html": "<p>np, thanks for remembering!</p>", "type": "rendered"}, "created_on": "2018-02-13T21:18:08.379253+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-02-13T21:18:08.382287+00:00", "type": "pullrequest_comment", "id": 56228780}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/56121980.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-56121980"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "started another round of jenkins jobs, and I will be ready to approve if they look ok", "markup": "markdown", "html": "<p>started another round of jenkins jobs, and I will be ready to approve if they look ok</p>", "type": "rendered"}, "created_on": "2018-02-13T01:45:09.849732+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-02-13T01:45:09.852632+00:00", "type": "pullrequest_comment", "id": 56121980}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/56121968.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-56121968"}}, "parent": {"id": 56101997, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/56101997.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-56101997"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "I merged it in", "markup": "markdown", "html": "<p>I merged it in</p>", "type": "rendered"}, "created_on": "2018-02-13T01:44:48.760905+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-02-13T01:44:48.763869+00:00", "type": "pullrequest_comment", "id": 56121968}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/56121918.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-56121918"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "this entry was missing", "markup": "markdown", "html": "<p>this entry was missing</p>", "type": "rendered"}, "created_on": "2018-02-13T01:43:16.259722+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-13T01:43:16.262315+00:00", "type": "pullrequest_comment", "id": 56121918}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/56121913.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-56121913"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "these two entries were duplicated", "markup": "markdown", "html": "<p>these two entries were duplicated</p>", "type": "rendered"}, "created_on": "2018-02-13T01:43:07.802182+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-13T01:43:07.805580+00:00", "type": "pullrequest_comment", "id": 56121913}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "40144b3cfdc8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/40144b3cfdc8.json"}, "html": {"href": "#!/osrf/gazebo/commits/40144b3cfdc8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "f826d4060afb", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/f826d4060afb.json"}, "html": {"href": "#!/osrf/gazebo/commits/f826d4060afb"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-02-13T01:40:31.052782+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "40144b3cfdc8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/40144b3cfdc8.json"}, "html": {"href": "#!/osrf/gazebo/commits/40144b3cfdc8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "27b570c31474", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/27b570c31474.json"}, "html": {"href": "#!/osrf/gazebo/commits/27b570c31474"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-02-13T01:29:41.884632+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/56118620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-56118620"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "this is unrelated, but I threw it in because this is targeting gazebo8; hope you don't mind", "markup": "markdown", "html": "<p>this is unrelated, but I threw it in because this is targeting gazebo8; hope you don't mind</p>", "type": "rendered"}, "created_on": "2018-02-13T00:27:30.421407+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-13T00:27:30.424362+00:00", "type": "pullrequest_comment", "id": 56118620}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "40144b3cfdc8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/40144b3cfdc8.json"}, "html": {"href": "#!/osrf/gazebo/commits/40144b3cfdc8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "16806827f958", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/16806827f958.json"}, "html": {"href": "#!/osrf/gazebo/commits/16806827f958"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-02-13T00:26:50.581677+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "40144b3cfdc8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/40144b3cfdc8.json"}, "html": {"href": "#!/osrf/gazebo/commits/40144b3cfdc8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "1953b8f77527", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1953b8f77527.json"}, "html": {"href": "#!/osrf/gazebo/commits/1953b8f77527"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-02-13T00:19:39.168917+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "40144b3cfdc8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/40144b3cfdc8.json"}, "html": {"href": "#!/osrf/gazebo/commits/40144b3cfdc8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "1953b8f77527", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1953b8f77527.json"}, "html": {"href": "#!/osrf/gazebo/commits/1953b8f77527"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-02-13T00:19:34.069789+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "40144b3cfdc8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/40144b3cfdc8.json"}, "html": {"href": "#!/osrf/gazebo/commits/40144b3cfdc8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "7274ff9e5ab8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/7274ff9e5ab8.json"}, "html": {"href": "#!/osrf/gazebo/commits/7274ff9e5ab8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-02-12T21:45:56.548097+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "40144b3cfdc8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/40144b3cfdc8.json"}, "html": {"href": "#!/osrf/gazebo/commits/40144b3cfdc8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "7274ff9e5ab8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/7274ff9e5ab8.json"}, "html": {"href": "#!/osrf/gazebo/commits/7274ff9e5ab8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-02-12T21:45:51.230925+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "40144b3cfdc8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/40144b3cfdc8.json"}, "html": {"href": "#!/osrf/gazebo/commits/40144b3cfdc8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "ac716357f68b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/ac716357f68b.json"}, "html": {"href": "#!/osrf/gazebo/commits/ac716357f68b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-02-12T21:41:53.929846+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "40144b3cfdc8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/40144b3cfdc8.json"}, "html": {"href": "#!/osrf/gazebo/commits/40144b3cfdc8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "ac716357f68b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/ac716357f68b.json"}, "html": {"href": "#!/osrf/gazebo/commits/ac716357f68b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-02-12T21:41:52.736870+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/56101997.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-56101997"}}, "parent": {"id": 55869586, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55869586.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55869586"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "I think I have a fix for the `Scene::Clear` and `TopicManager::ProcessNodes` backtrace I have been seeing. I noticed that the message containers are cleared before the subscribers, so I changed the order and added some mutexes for good measure in db1771d. After further testing, I saw some seg-faults in PhysicsIface, so I added a pointer check before dereferencing in aa67243\n\nI ran the test over 250 times without a backtrace with these changes (in branch `worldless_scpeters`), so it's looking pretty good to me. Please consider merging with branch.", "markup": "markdown", "html": "<p>I think I have a fix for the <code>Scene::Clear</code> and <code>TopicManager::ProcessNodes</code> backtrace I have been seeing. I noticed that the message containers are cleared before the subscribers, so I changed the order and added some mutexes for good measure in <a href=\"#!/osrf/gazebo/commits/db1771d\" rel=\"nofollow\" class=\"ap-connect-link\">db1771d</a>. After further testing, I saw some seg-faults in PhysicsIface, so I added a pointer check before dereferencing in <a href=\"#!/osrf/gazebo/commits/aa67243\" rel=\"nofollow\" class=\"ap-connect-link\">aa67243</a></p>\n<p>I ran the test over 250 times without a backtrace with these changes (in branch <code>worldless_scpeters</code>), so it's looking pretty good to me. Please consider merging with branch.</p>", "type": "rendered"}, "created_on": "2018-02-12T20:08:34.654100+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-02-12T20:08:34.657833+00:00", "type": "pullrequest_comment", "id": 56101997}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55983747.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55983747"}}, "parent": {"id": 55983674, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55983674.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55983674"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "definitely", "markup": "markdown", "html": "<p>definitely</p>", "type": "rendered"}, "created_on": "2018-02-10T00:45:29.592756+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-02-10T00:45:29.595995+00:00", "type": "pullrequest_comment", "id": 55983747}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55983724.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55983724"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "I'm not sure if this check is still needed", "markup": "markdown", "html": "<p>I'm not sure if this check is still needed</p>", "type": "rendered"}, "created_on": "2018-02-10T00:43:49.229628+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-10T00:43:49.233479+00:00", "type": "pullrequest_comment", "id": 55983724}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55983674.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55983674"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "as an aside, this seems like a questionably large sleep in this loop, but who knows", "markup": "markdown", "html": "<p>as an aside, this seems like a questionably large sleep in this loop, but who knows</p>", "type": "rendered"}, "created_on": "2018-02-10T00:41:00.266388+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-10T00:41:00.269798+00:00", "type": "pullrequest_comment", "id": 55983674}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55968954.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55968954"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "@iche033 should we make this use `RenderingFixture` also?", "markup": "markdown", "html": "<p>@iche033 should we make this use <code>RenderingFixture</code> also?</p>", "type": "rendered"}, "created_on": "2018-02-09T19:33:00.310008+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T19:33:00.321177+00:00", "type": "pullrequest_comment", "id": 55968954}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "70dd83822e7e", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/70dd83822e7e.json"}, "html": {"href": "#!/osrf/gazebo/commits/70dd83822e7e"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "da8a4d3b4b2c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/da8a4d3b4b2c.json"}, "html": {"href": "#!/osrf/gazebo/commits/da8a4d3b4b2c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2018-02-09T19:26:27.140387+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55968455.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55968455"}}, "parent": {"id": 55967664, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55967664.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55967664"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "These comments look relevant:\n\n#!/osrf/gazebo/pull-requests/2515/dont-shut-down-gazebo-when-removing-a/diff#comment-31992633", "markup": "markdown", "html": "<p>These comments look relevant:</p>\n<p><a href=\"#!/osrf/gazebo/pull-requests/2515/dont-shut-down-gazebo-when-removing-a/diff#comment-31992633\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/pull-requests/2515/dont-shut-down-gazebo-when-removing-a/diff#comment-31992633</a></p>", "type": "rendered"}, "created_on": "2018-02-09T19:26:21.208114+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-02-09T19:26:21.210718+00:00", "type": "pullrequest_comment", "id": 55968455}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55967664.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55967664"}}, "parent": {"id": 55966746, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55966746.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55966746"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "Yeah I just looked at that issue too, not sure what I meant, maybe that in general the sky is weird on the server", "markup": "markdown", "html": "<p>Yeah I just looked at that issue too, not sure what I meant, maybe that in general the sky is weird on the server</p>", "type": "rendered"}, "created_on": "2018-02-09T19:16:09.718687+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-02-09T19:16:09.722814+00:00", "type": "pullrequest_comment", "id": 55967664}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55966746.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55966746"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "I don't see anything in #1757 about a segfault when deleting the sky", "markup": "markdown", "html": "<p>I don't see anything in <a href=\"#!/osrf/gazebo/issues/1757/clouds-dont-show-on-cameras\" rel=\"nofollow\" title=\"Clouds don&#39;t show on cameras\" class=\"ap-connect-link\">#1757</a> about a segfault when deleting the sky</p>", "type": "rendered"}, "created_on": "2018-02-09T19:03:03.612272+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T19:03:03.616126+00:00", "type": "pullrequest_comment", "id": 55966746}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55966707.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55966707"}}, "parent": {"id": 55966578, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55966578.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55966578"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "the controller has an option in the constructor that says whether the sky should delete the controller:\n\n* #!/osrf/gazebo/src/8a59b5f0f0b9bda21ee905098b47900da492ba9c/gazebo/rendering/skyx/include/BasicController.h?fileviewer=file-view-default#BasicController.h-38:42", "markup": "markdown", "html": "<p>the controller has an option in the constructor that says whether the sky should delete the controller:</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/src/8a59b5f0f0b9bda21ee905098b47900da492ba9c/gazebo/rendering/skyx/include/BasicController.h?fileviewer=file-view-default#BasicController.h-38:42\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/8a59b5f0f0b9bda21ee905098b47900da492ba9c/gazebo/rendering/skyx/include/BasicController.h?fileviewer=file-view-default#BasicController.h-38:42</a></li>\n</ul>", "type": "rendered"}, "created_on": "2018-02-09T19:02:35.897268+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T19:02:35.899847+00:00", "type": "pullrequest_comment", "id": 55966707}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55966578.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55966578"}}, "parent": {"id": 55966252, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55966252.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55966252"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "hummm thanks for investigating, I guess the problem is both on the server and the client scenes then. I'll need to take a closer look into how to properly clean up the sky.", "markup": "markdown", "html": "<p>hummm thanks for investigating, I guess the problem is both on the server and the client scenes then. I'll need to take a closer look into how to properly clean up the sky.</p>", "type": "rendered"}, "created_on": "2018-02-09T19:00:58.866744+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-02-09T19:00:58.869913+00:00", "type": "pullrequest_comment", "id": 55966578}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55966252.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55966252"}}, "parent": {"id": 55966031, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55966031.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55966031"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "that didn't help", "markup": "markdown", "html": "<p>that didn't help</p>", "type": "rendered"}, "created_on": "2018-02-09T18:56:42.651136+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T18:56:42.653886+00:00", "type": "pullrequest_comment", "id": 55966252}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55966031.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55966031"}}, "parent": {"id": 55965847, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55965847.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55965847"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "the pointers are uninitialized; i'll try initializing them in ScenePrivate", "markup": "markdown", "html": "<p>the pointers are uninitialized; i'll try initializing them in ScenePrivate</p>", "type": "rendered"}, "created_on": "2018-02-09T18:53:43.943939+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T18:53:43.947314+00:00", "type": "pullrequest_comment", "id": 55966031}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55965847.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55965847"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "all the gui tests are seg-faulting on this line", "markup": "markdown", "html": "<p>all the gui tests are seg-faulting on this line</p>", "type": "rendered"}, "created_on": "2018-02-09T18:51:39.513891+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T18:51:39.516892+00:00", "type": "pullrequest_comment", "id": 55965847}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55964017.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55964017"}}, "parent": {"id": 55962904, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55962904.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55962904"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "i added checks for the scene pointer before dereferencing in 74f1dcc36aae", "markup": "markdown", "html": "<p>i added checks for the scene pointer before dereferencing in <a href=\"#!/osrf/gazebo/commits/74f1dcc36aae\" rel=\"nofollow\" class=\"ap-connect-link\">74f1dcc36aae</a></p>", "type": "rendered"}, "created_on": "2018-02-09T18:30:44.393676+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T18:30:44.396641+00:00", "type": "pullrequest_comment", "id": 55964017}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"update": {"description": "Continuing the effort to remove worlds, history:\r\n\r\n* Remove blank world: pull request #2220\r\n* Remove world with entities: pull request #2263\r\n* Remove world with joints: pull request #2309\r\n\r\nThe previous PRs added tests to `INTEGRATION_remove_worlds`. With the help of @caguero, we noticed that Gazebo was being shutdown when the world was removed, which should not happen.\r\n\r\nIn order to be able to completely remove a world and then load a new one (issue #158), the Server must outlive worlds.\r\n\r\nThis pull request is mainly about the change in `gazebo/Server.cc` to avoid shutdown. Other changes to support that:\r\n\r\n* cleaning up pointers\r\n* cleaning up transport\r\n* Add `sensors::running()`\r\n* considerably speed up world_remove tests: [9.5s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) instead of [40s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/WorldRemoveTest_WorldRemoveTest/) and [37s](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/) instead of [2min28s](http://build.osrfoundation.org/view/main/view/GazeboDefault/job/gazebo-ci-default-trusty-amd64-gpu-nvidia/253/testReport/(root)/RemoveJointTypes_WorldRemoveJointsTest/)\r\n\r\n\r\nTrusty nvidia is [satisfied](http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-trusty-amd64-gpu-nvidia/761/) (warnings have been fixed in 67c654c)", "title": "Don't shut down gazebo when removing a world -> 8", "destination": {"commit": {"hash": "70dd83822e7e", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/70dd83822e7e.json"}, "html": {"href": "#!/osrf/gazebo/commits/70dd83822e7e"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo8"}}, "reason": "", "source": {"commit": {"hash": "bc99e80596fb", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/bc99e80596fb.json"}, "html": {"href": "#!/osrf/gazebo/commits/bc99e80596fb"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "worldless"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2018-02-09T18:30:36.688644+00:00"}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55964000.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55964000"}}, "parent": {"id": 55903758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55903758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55903758"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "I applied this patch in bc99e80596fb", "markup": "markdown", "html": "<p>I applied this patch in <a href=\"#!/osrf/gazebo/commits/bc99e80596fb\" rel=\"nofollow\" class=\"ap-connect-link\">bc99e80596fb</a></p>", "type": "rendered"}, "created_on": "2018-02-09T18:30:28.723171+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T18:30:28.726021+00:00", "type": "pullrequest_comment", "id": 55964000}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55963175.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55963175"}}, "parent": {"id": 55962904, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55962904.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55962904"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "interesting", "markup": "markdown", "html": "<p>interesting</p>", "type": "rendered"}, "created_on": "2018-02-09T18:18:42.740705+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T18:18:42.743846+00:00", "type": "pullrequest_comment", "id": 55963175}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55962904.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55962904"}}, "parent": {"id": 55961328, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55961328.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55961328"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "Yup, so `scene` is null and on line 89 we call `scene->Clear()`, causing a crash.\n\nWhat I meant was, I would expect scene to be null even if we change to a GPU job", "markup": "markdown", "html": "<p>Yup, so <code>scene</code> is null and on line 89 we call <code>scene-&gt;Clear()</code>, causing a crash.</p>\n<p>What I meant was, I would expect scene to be null even if we change to a GPU job</p>", "type": "rendered"}, "created_on": "2018-02-09T18:14:27.681609+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-02-09T18:14:27.685620+00:00", "type": "pullrequest_comment", "id": 55962904}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55961328.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55961328"}}, "parent": {"id": 55960822, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55960822.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55960822"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "that is `gpu-none`\n\nit fails during the call to GetScene ([ServerFixture.cc:306](#!/osrf/gazebo/src/1e0b9c165e437c07c50668683ab9dab656e8aff7/gazebo/test/ServerFixture.cc?at=worldless&fileviewer=file-view-default#ServerFixture.cc-291:313))", "markup": "markdown", "html": "<p>that is <code>gpu-none</code></p>\n<p>it fails during the call to GetScene (<a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/1e0b9c165e437c07c50668683ab9dab656e8aff7/gazebo/test/ServerFixture.cc?at=worldless&amp;fileviewer=file-view-default#ServerFixture.cc-291:313\" rel=\"nofollow\">ServerFixture.cc:306</a>)</p>", "type": "rendered"}, "created_on": "2018-02-09T17:52:19.888441+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T17:52:19.891264+00:00", "type": "pullrequest_comment", "id": 55961328}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55960822.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55960822"}}, "parent": {"id": 55880935, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55880935.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55880935"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "Interesting, even in the GPU job, I thought the scene wouldn't be created unless the world had a rendering sensor.", "markup": "markdown", "html": "<p>Interesting, even in the GPU job, I thought the scene wouldn't be created unless the world had a rendering sensor.</p>", "type": "rendered"}, "created_on": "2018-02-09T17:46:02.731785+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-02-09T17:46:02.734934+00:00", "type": "pullrequest_comment", "id": 55960822}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55903758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55903758"}}, "parent": {"id": 55880813, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55880813.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55880813"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "this would only run the test if a gpu is present:\n\n~~~\ndiff -r 1e0b9c165e43 test/integration/CMakeLists.txt\n--- a/test/integration/CMakeLists.txt   Thu Feb 08 12:55:15 2018 -0800\n+++ b/test/integration/CMakeLists.txt   Fri Feb 09 01:18:44 2018 -0800\n@@ -105,7 +105,6 @@\n   world_entity_below_point.cc\n   world_playback.cc\n   world_population.cc\n-  world_remove.cc\n   worlds_installed.cc\n   )\n \n@@ -169,6 +168,7 @@\n   speed_pr2.cc\n   visual.cc\n   wideanglecamera_sensor.cc\n+  world_remove.cc\n   world_reset.cc\n )\n gz_build_dri_tests(${dri_tests} EXTRA_LIBS gazebo_test_fixture)\n~~~", "markup": "markdown", "html": "<p>this would only run the test if a gpu is present:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 1e0b9c165e43 test/integration/CMakeLists.txt</span>\n<span class=\"gd\">--- a/test/integration/CMakeLists.txt   Thu Feb 08 12:55:15 2018 -0800</span>\n<span class=\"gi\">+++ b/test/integration/CMakeLists.txt   Fri Feb 09 01:18:44 2018 -0800</span>\n<span class=\"gu\">@@ -105,7 +105,6 @@</span>\n   world_entity_below_point.cc\n   world_playback.cc\n   world_population.cc\n<span class=\"gd\">-  world_remove.cc</span>\n   worlds_installed.cc\n   )\n\n<span class=\"gu\">@@ -169,6 +168,7 @@</span>\n   speed_pr2.cc\n   visual.cc\n   wideanglecamera_sensor.cc\n<span class=\"gi\">+  world_remove.cc</span>\n   world_reset.cc\n )\n gz_build_dri_tests(${dri_tests} EXTRA_LIBS gazebo_test_fixture)\n</pre></div>", "type": "rendered"}, "created_on": "2018-02-09T09:19:34.092920+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T09:19:34.096554+00:00", "type": "pullrequest_comment", "id": 55903758}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55880935.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55880935"}}, "parent": {"id": 55880813, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511/comments/55880813.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511/_/diff#comment-55880813"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}, "content": {"raw": "https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/784/testReport/junit/(root)/INTEGRATION_world_remove/test_ran/\n\n~~~\n359: [ RUN      ] WorldRemoveTest/WorldRemoveTest.RemoveBlankWorld/0\n359: [Msg] Waiting for master.\n359: [Msg] Connected to gazebo master @ http://127.0.0.1:11345\n359: [Msg] Publicized address: 172.17.0.7\n359: [Err] [RenderEngine.cc:725] Can't open display: \n359: [Wrn] [RenderEngine.cc:93] Unable to create X window. Rendering will be disabled\n359: [Wrn] [RenderEngine.cc:293] Cannot initialize render engine since render path type is NONE. Ignore this warning ifrendering has been turned off on purpose.\n359: [Dbg] [ServerFixture.cc:209] ServerFixture load in 0.5 seconds, timeout after 600 seconds\n359: [Err] [ServerFixture.cc:306] Unable to load the rendering scene.\n359: Test will fail/var/lib/jenkins/workspace/gazebo-ci-pr_any-xenial-amd64-gpu-none/gazebo/gazebo/test/ServerFixture.cc:1260: Failure\n359: Failed\n359: ServerFixture timeout (wait more than 0s): while waiting to load rendering scene\n359: INTEGRATION_world_remove: /usr/include/boost/smart_ptr/shared_ptr.hpp:648: typename boost::detail::sp_member_access<T>::type boost::shared_ptr<T>::operator->() const [with T = gazebo::rendering::Scene; typename boost::detail::sp_member_access<T>::type = gazebo::rendering::Scene*]: Assertion `px != 0' failed.\n153/160 Test #359: INTEGRATION_world_remove ..............................***Exception: Other  2.79 sec\n~~~", "markup": "markdown", "html": "<p><a href=\"https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/784/testReport/junit/(root)/INTEGRATION_world_remove/test_ran/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/784/testReport/junit/(root)/INTEGRATION_world_remove/test_ran/</a></p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">359</span><span class=\"o\">:</span> <span class=\"cp\">[</span> <span class=\"nx\">RUN</span>      <span class=\"cp\">]</span> <span class=\"nt\">WorldRemoveTest</span><span class=\"o\">/</span><span class=\"nt\">WorldRemoveTest</span><span class=\"p\">.</span><span class=\"nc\">RemoveBlankWorld</span><span class=\"o\">/</span><span class=\"nt\">0</span>\n<span class=\"nt\">359</span><span class=\"o\">:</span> <span class=\"cp\">[</span><span class=\"nx\">Msg</span><span class=\"cp\">]</span> <span class=\"nt\">Waiting</span> <span class=\"nt\">for</span> <span class=\"nt\">master</span><span class=\"o\">.</span>\n<span class=\"nt\">359</span><span class=\"o\">:</span> <span class=\"cp\">[</span><span class=\"nx\">Msg</span><span class=\"cp\">]</span> <span class=\"nt\">Connected</span> <span class=\"nt\">to</span> <span class=\"nt\">gazebo</span> <span class=\"nt\">master</span> <span class=\"o\">@</span> <span class=\"nt\">http</span><span class=\"o\">://</span><span class=\"nt\">127</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"p\">.</span><span class=\"nc\">1</span><span class=\"p\">:</span><span class=\"nd\">11345</span>\n<span class=\"nt\">359</span><span class=\"o\">:</span> <span class=\"cp\">[</span><span class=\"nx\">Msg</span><span class=\"cp\">]</span> <span class=\"nt\">Publicized</span> <span class=\"nt\">address</span><span class=\"o\">:</span> <span class=\"nt\">172</span><span class=\"p\">.</span><span class=\"nc\">17</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"p\">.</span><span class=\"nc\">7</span>\n<span class=\"nt\">359</span><span class=\"o\">:</span> <span class=\"cp\">[</span><span class=\"nx\">Err</span><span class=\"cp\">]</span> <span class=\"cp\">[</span><span class=\"nx\">RenderEngine.cc</span><span class=\"p\">:</span><span class=\"mi\">725</span><span class=\"cp\">]</span> <span class=\"nt\">Can</span><span class=\"s1\">&#39;t open display: </span>\n<span class=\"s1\">359: </span><span class=\"cp\">[</span><span class=\"nx\">Wrn</span><span class=\"cp\">]</span><span class=\"s1\"> </span><span class=\"cp\">[</span><span class=\"nx\">RenderEngine.cc</span><span class=\"p\">:</span><span class=\"mi\">93</span><span class=\"cp\">]</span><span class=\"s1\"> Unable to create X window. Rendering will be disabled</span>\n<span class=\"s1\">359: </span><span class=\"cp\">[</span><span class=\"nx\">Wrn</span><span class=\"cp\">]</span><span class=\"s1\"> </span><span class=\"cp\">[</span><span class=\"nx\">RenderEngine.cc</span><span class=\"p\">:</span><span class=\"mi\">293</span><span class=\"cp\">]</span><span class=\"s1\"> Cannot initialize render engine since render path type is NONE. Ignore this warning ifrendering has been turned off on purpose.</span>\n<span class=\"s1\">359: </span><span class=\"cp\">[</span><span class=\"nx\">Dbg</span><span class=\"cp\">]</span><span class=\"s1\"> </span><span class=\"cp\">[</span><span class=\"nx\">ServerFixture.cc</span><span class=\"p\">:</span><span class=\"mi\">209</span><span class=\"cp\">]</span><span class=\"s1\"> ServerFixture load in 0.5 seconds, timeout after 600 seconds</span>\n<span class=\"s1\">359: </span><span class=\"cp\">[</span><span class=\"nx\">Err</span><span class=\"cp\">]</span><span class=\"s1\"> </span><span class=\"cp\">[</span><span class=\"nx\">ServerFixture.cc</span><span class=\"p\">:</span><span class=\"mi\">306</span><span class=\"cp\">]</span><span class=\"s1\"> Unable to load the rendering scene.</span>\n<span class=\"s1\">359: Test will fail/var/lib/jenkins/workspace/gazebo-ci-pr_any-xenial-amd64-gpu-none/gazebo/gazebo/test/ServerFixture.cc:1260: Failure</span>\n<span class=\"s1\">359: Failed</span>\n<span class=\"s1\">359: ServerFixture timeout (wait more than 0s): while waiting to load rendering scene</span>\n<span class=\"s1\">359: INTEGRATION_world_remove: /usr/include/boost/smart_ptr/shared_ptr.hpp:648: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const </span><span class=\"cp\">[</span><span class=\"k\">with</span> <span class=\"n\">T</span><span class=\"o\"> =</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::rendering::Scene</span><span class=\"p\">;</span> <span class=\"nx\">typename</span> <span class=\"nx\">boost</span><span class=\"nl\">::detail::sp_member_access</span><span class=\"o\">&lt;</span><span class=\"nx\">T</span><span class=\"o\">&gt;</span><span class=\"nl\">::type</span> <span class=\"o\">=</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::rendering::Scene</span><span class=\"o\">*</span><span class=\"cp\">]</span><span class=\"s1\">: Assertion `px != 0&#39;</span> <span class=\"nt\">failed</span><span class=\"o\">.</span>\n<span class=\"nt\">153</span><span class=\"o\">/</span><span class=\"nt\">160</span> <span class=\"nt\">Test</span> <span class=\"p\">#</span><span class=\"nn\">359</span><span class=\"o\">:</span> <span class=\"nt\">INTEGRATION_world_remove</span> <span class=\"o\">..............................***</span><span class=\"nt\">Exception</span><span class=\"o\">:</span> <span class=\"nt\">Other</span>  <span class=\"nt\">2</span><span class=\"p\">.</span><span class=\"nc\">79</span> <span class=\"nt\">sec</span>\n</pre></div>", "type": "rendered"}, "created_on": "2018-02-09T01:35:07.205457+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2018-02-09T01:35:07.208770+00:00", "type": "pullrequest_comment", "id": 55880935}, "pull_request": {"type": "pullrequest", "id": 2511, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2511.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2511"}}, "title": "Don't shut down gazebo when removing a world -> 8"}}], "next": "data/repositories/osrf/gazebo/pullrequests/2511/activity_ctx=pKSxRfju6.json"}