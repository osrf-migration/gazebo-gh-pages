{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1571/comments/6171840.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1571/_/diff#comment-6171840"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1571, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1571.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1571"}}, "title": "Add model editor selection events and delete menu option"}, "content": {"raw": "Gazebo crashed when I loaded the fire hose in the editor and selected `joint_01` from the palette. I couldn't reproduce this on default:\n\n~~~\ngzclient: /usr/include/OGRE/OgreAxisAlignedBox.h:252: void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&, const Ogre::Vector3&): Assertion `(min.x <= max.x && min.y <= max.y && min.z <= max.z) && \"The minimum corner of the box must be less than or equal to maximum corner\"' failed.\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6c34cc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\n56\t../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n#0  0x00007ffff6c34cc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\n#1  0x00007ffff6c380d8 in __GI_abort () at abort.c:89\n#2  0x00007ffff6c2db86 in __assert_fail_base (fmt=0x7ffff6d7f3d0 \"%s%s%s:%u: %s%sAssertion `%s' failed.\\n%n\", \n    assertion=assertion@entry=0x7ffff6468400 \"(min.x <= max.x && min.y <= max.y && min.z <= max.z) && \\\"The minimum corner of the box must be less than or equal to maximum corner\\\"\", file=file@entry=0x7ffff64683d8 \"/usr/include/OGRE/OgreAxisAlignedBox.h\", line=line@entry=252, \n    function=function@entry=0x7ffff648d600 <_ZZN4Ogre14AxisAlignedBox10setExtentsERKNS_7Vector3ES3_E19__PRETTY_FUNCTION__> \"void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&, const Ogre::Vector3&)\") at assert.c:92\n#3  0x00007ffff6c2dc32 in __GI___assert_fail (\n    assertion=0x7ffff6468400 \"(min.x <= max.x && min.y <= max.y && min.z <= max.z) && \\\"The minimum corner of the box must be less than or equal to maximum corner\\\"\", file=0x7ffff64683d8 \"/usr/include/OGRE/OgreAxisAlignedBox.h\", line=252, \n    function=0x7ffff648d600 <_ZZN4Ogre14AxisAlignedBox10setExtentsERKNS_7Vector3ES3_E19__PRETTY_FUNCTION__> \"void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&, const Ogre::Vector3&)\") at assert.c:101\n#4  0x00007ffff644b353 in Ogre::AxisAlignedBox::setExtents (max=..., min=..., this=0x7fffffffc230)\n    at /usr/include/OGRE/OgreAxisAlignedBox.h:251\n#5  0x00007ffff6458235 in setExtents (max=..., min=..., this=<optimized out>) at /usr/include/OGRE/OgreAny.h:111\n#6  AxisAlignedBox (rkBox=..., this=0x7fffffffc230) at /usr/include/OGRE/OgreAxisAlignedBox.h:113\n#7  gazebo::rendering::Visual::GetBoundsHelper (this=this@entry=0x10077700, node=0x7fff795a3eb0, box=...)\n    at /home/louisep/gazebo_source/gazeboA/gazebo/rendering/Visual.cc:1847\n#8  0x00007ffff64583b7 in gazebo::rendering::Visual::GetBoundingBox (this=this@entry=0x10077700)\n    at /home/louisep/gazebo_source/gazeboA/gazebo/rendering/Visual.cc:1815\n#9  0x00007ffff6458420 in gazebo::rendering::Visual::SetHighlighted (this=0x10077700, _highlighted=<optimized out>)\n    at /home/louisep/gazebo_source/gazeboA/gazebo/rendering/Visual.cc:1478\n#10 0x00007ffff5471f84 in gazebo::gui::JointMaker::SetSelected (this=this@entry=0x3837800, _jointVis=..., _selected=true)\n    at /home/louisep/gazebo_source/gazeboA/gazebo/gui/model/JointMaker.cc:1206\n#11 0x00007ffff5472238 in gazebo::gui::JointMaker::SetSelected (this=0x3837800, _name=..., _selected=<optimized out>)\n    at /home/louisep/gazebo_source/gazeboA/gazebo/gui/model/JointMaker.cc:1196\n#12 0x00007ffff548196d in operator() (a1=true, a0=..., this=0x355f5b0) at /usr/include/boost/function/function_template.hpp:767\n#13 gazebo::event::EventT<void (std::string, bool)>::Signal<std::string, bool>(std::string const&, bool const&) (this=\n    0x7ffff59d6720 <gazebo::gui::model::Events::setSelectedJoint>, _p1=..., _p2=@0x7fffffffc5f0: true)\n    at /home/louisep/gazebo_source/gazeboA/gazebo/common/Event.hh:357\n#14 0x00007ffff54b24d3 in operator()<std::basic_string<char>, bool> (_p2=@0x7fffffffc5f0: true, _p1=..., this=<optimized out>)\n    at /home/louisep/gazebo_source/gazeboA/gazebo/common/Event.hh:214\n#15 gazebo::gui::ModelEditorPalette::OnItemSelectionChanged (this=0x3549cf0)\n    at /home/louisep/gazebo_source/gazeboA/gazebo/gui/model/ModelEditorPalette.cc:484\n~~~", "markup": "markdown", "html": "<p>Gazebo crashed when I loaded the fire hose in the editor and selected <code>joint_01</code> from the palette. I couldn't reproduce this on default:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nl\">gzclient</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">OGRE</span><span class=\"o\">/</span><span class=\"n\">OgreAxisAlignedBox</span><span class=\"p\">.</span><span class=\"nl\">h</span><span class=\"p\">:</span><span class=\"mi\">252</span><span class=\"o\">:</span> <span class=\"kt\">void</span> <span class=\"n\">Ogre</span><span class=\"o\">::</span><span class=\"n\">AxisAlignedBox</span><span class=\"o\">::</span><span class=\"n\">setExtents</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">Ogre</span><span class=\"o\">::</span><span class=\"n\">Vector3</span><span class=\"o\">&amp;</span><span class=\"p\">,</span> <span class=\"k\">const</span> <span class=\"n\">Ogre</span><span class=\"o\">::</span><span class=\"n\">Vector3</span><span class=\"o\">&amp;</span><span class=\"p\">)</span><span class=\"o\">:</span> <span class=\"n\">Assertion</span> <span class=\"err\">`</span><span class=\"p\">(</span><span class=\"n\">min</span><span class=\"p\">.</span><span class=\"n\">x</span> <span class=\"o\">&lt;=</span> <span class=\"n\">max</span><span class=\"p\">.</span><span class=\"n\">x</span> <span class=\"o\">&amp;&amp;</span> <span class=\"n\">min</span><span class=\"p\">.</span><span class=\"n\">y</span> <span class=\"o\">&lt;=</span> <span class=\"n\">max</span><span class=\"p\">.</span><span class=\"n\">y</span> <span class=\"o\">&amp;&amp;</span> <span class=\"n\">min</span><span class=\"p\">.</span><span class=\"n\">z</span> <span class=\"o\">&lt;=</span> <span class=\"n\">max</span><span class=\"p\">.</span><span class=\"n\">z</span><span class=\"p\">)</span> <span class=\"o\">&amp;&amp;</span> <span class=\"s\">&quot;The minimum corner of the box must be less than or equal to maximum corner&quot;</span><span class=\"err\">&#39;</span> <span class=\"n\">failed</span><span class=\"p\">.</span>\n\n<span class=\"n\">Program</span> <span class=\"n\">received</span> <span class=\"n\">signal</span> <span class=\"n\">SIGABRT</span><span class=\"p\">,</span> <span class=\"n\">Aborted</span><span class=\"p\">.</span>\n<span class=\"mh\">0x00007ffff6c34cc9</span> <span class=\"k\">in</span> <span class=\"n\">__GI_raise</span> <span class=\"p\">(</span><span class=\"n\">sig</span><span class=\"o\">=</span><span class=\"n\">sig</span><span class=\"p\">@</span><span class=\"n\">entry</span><span class=\"o\">=</span><span class=\"mi\">6</span><span class=\"p\">)</span> <span class=\"n\">at</span> <span class=\"p\">..</span><span class=\"o\">/</span><span class=\"n\">nptl</span><span class=\"o\">/</span><span class=\"n\">sysdeps</span><span class=\"o\">/</span><span class=\"n\">unix</span><span class=\"o\">/</span><span class=\"n\">sysv</span><span class=\"o\">/</span><span class=\"n\">linux</span><span class=\"o\">/</span><span class=\"n\">raise</span><span class=\"p\">.</span><span class=\"nl\">c</span><span class=\"p\">:</span><span class=\"mi\">56</span>\n<span class=\"mi\">56</span>  <span class=\"p\">..</span><span class=\"o\">/</span><span class=\"n\">nptl</span><span class=\"o\">/</span><span class=\"n\">sysdeps</span><span class=\"o\">/</span><span class=\"n\">unix</span><span class=\"o\">/</span><span class=\"n\">sysv</span><span class=\"o\">/</span><span class=\"n\">linux</span><span class=\"o\">/</span><span class=\"n\">raise</span><span class=\"p\">.</span><span class=\"nl\">c</span><span class=\"p\">:</span> <span class=\"n\">No</span> <span class=\"n\">such</span> <span class=\"n\">file</span> <span class=\"n\">or</span> <span class=\"n\">directory</span><span class=\"p\">.</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span> <span class=\"n\">bt</span>\n<span class=\"cp\">#0  0x00007ffff6c34cc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56</span>\n<span class=\"cp\">#1  0x00007ffff6c380d8 in __GI_abort () at abort.c:89</span>\n<span class=\"cp\">#2  0x00007ffff6c2db86 in __assert_fail_base (fmt=0x7ffff6d7f3d0 &quot;%s%s%s:%u: %s%sAssertion `%s&#39; failed.\\n%n&quot;, </span>\n    <span class=\"n\">assertion</span><span class=\"o\">=</span><span class=\"n\">assertion</span><span class=\"p\">@</span><span class=\"n\">entry</span><span class=\"o\">=</span><span class=\"mh\">0x7ffff6468400</span> <span class=\"s\">&quot;(min.x &lt;= max.x &amp;&amp; min.y &lt;= max.y &amp;&amp; min.z &lt;= max.z) &amp;&amp; </span><span class=\"se\">\\&quot;</span><span class=\"s\">The minimum corner of the box must be less than or equal to maximum corner</span><span class=\"se\">\\&quot;</span><span class=\"s\">&quot;</span><span class=\"p\">,</span> <span class=\"n\">file</span><span class=\"o\">=</span><span class=\"n\">file</span><span class=\"p\">@</span><span class=\"n\">entry</span><span class=\"o\">=</span><span class=\"mh\">0x7ffff64683d8</span> <span class=\"s\">&quot;/usr/include/OGRE/OgreAxisAlignedBox.h&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span><span class=\"o\">=</span><span class=\"n\">line</span><span class=\"p\">@</span><span class=\"n\">entry</span><span class=\"o\">=</span><span class=\"mi\">252</span><span class=\"p\">,</span> \n    <span class=\"n\">function</span><span class=\"o\">=</span><span class=\"n\">function</span><span class=\"p\">@</span><span class=\"n\">entry</span><span class=\"o\">=</span><span class=\"mh\">0x7ffff648d600</span> <span class=\"o\">&lt;</span><span class=\"n\">_ZZN4Ogre14AxisAlignedBox10setExtentsERKNS_7Vector3ES3_E19__PRETTY_FUNCTION__</span><span class=\"o\">&gt;</span> <span class=\"s\">&quot;void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&amp;, const Ogre::Vector3&amp;)&quot;</span><span class=\"p\">)</span> <span class=\"n\">at</span> <span class=\"n\">assert</span><span class=\"p\">.</span><span class=\"nl\">c</span><span class=\"p\">:</span><span class=\"mi\">92</span>\n<span class=\"cp\">#3  0x00007ffff6c2dc32 in __GI___assert_fail (</span>\n    <span class=\"n\">assertion</span><span class=\"o\">=</span><span class=\"mh\">0x7ffff6468400</span> <span class=\"s\">&quot;(min.x &lt;= max.x &amp;&amp; min.y &lt;= max.y &amp;&amp; min.z &lt;= max.z) &amp;&amp; </span><span class=\"se\">\\&quot;</span><span class=\"s\">The minimum corner of the box must be less than or equal to maximum corner</span><span class=\"se\">\\&quot;</span><span class=\"s\">&quot;</span><span class=\"p\">,</span> <span class=\"n\">file</span><span class=\"o\">=</span><span class=\"mh\">0x7ffff64683d8</span> <span class=\"s\">&quot;/usr/include/OGRE/OgreAxisAlignedBox.h&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">252</span><span class=\"p\">,</span> \n    <span class=\"n\">function</span><span class=\"o\">=</span><span class=\"mh\">0x7ffff648d600</span> <span class=\"o\">&lt;</span><span class=\"n\">_ZZN4Ogre14AxisAlignedBox10setExtentsERKNS_7Vector3ES3_E19__PRETTY_FUNCTION__</span><span class=\"o\">&gt;</span> <span class=\"s\">&quot;void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&amp;, const Ogre::Vector3&amp;)&quot;</span><span class=\"p\">)</span> <span class=\"n\">at</span> <span class=\"n\">assert</span><span class=\"p\">.</span><span class=\"nl\">c</span><span class=\"p\">:</span><span class=\"mi\">101</span>\n<span class=\"cp\">#4  0x00007ffff644b353 in Ogre::AxisAlignedBox::setExtents (max=..., min=..., this=0x7fffffffc230)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">OGRE</span><span class=\"o\">/</span><span class=\"n\">OgreAxisAlignedBox</span><span class=\"p\">.</span><span class=\"nl\">h</span><span class=\"p\">:</span><span class=\"mi\">251</span>\n<span class=\"cp\">#5  0x00007ffff6458235 in setExtents (max=..., min=..., this=&lt;optimized out&gt;) at /usr/include</span><span class=\"cpf\">/OGRE/OgreAny.h:111</span><span class=\"cp\"></span>\n<span class=\"cp\">#6  AxisAlignedBox (rkBox=..., this=0x7fffffffc230) at /usr/include</span><span class=\"cpf\">/OGRE/OgreAxisAlignedBox.h:113</span><span class=\"cp\"></span>\n<span class=\"cp\">#7  gazebo::rendering::Visual::GetBoundsHelper (this=this@entry=0x10077700, node=0x7fff795a3eb0, box=...)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">louisep</span><span class=\"o\">/</span><span class=\"n\">gazebo_source</span><span class=\"o\">/</span><span class=\"n\">gazeboA</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">Visual</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">1847</span>\n<span class=\"cp\">#8  0x00007ffff64583b7 in gazebo::rendering::Visual::GetBoundingBox (this=this@entry=0x10077700)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">louisep</span><span class=\"o\">/</span><span class=\"n\">gazebo_source</span><span class=\"o\">/</span><span class=\"n\">gazeboA</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">Visual</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">1815</span>\n<span class=\"cp\">#9  0x00007ffff6458420 in gazebo::rendering::Visual::SetHighlighted (this=0x10077700, _highlighted=&lt;optimized out&gt;)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">louisep</span><span class=\"o\">/</span><span class=\"n\">gazebo_source</span><span class=\"o\">/</span><span class=\"n\">gazeboA</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">Visual</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">1478</span>\n<span class=\"cp\">#10 0x00007ffff5471f84 in gazebo::gui::JointMaker::SetSelected (this=this@entry=0x3837800, _jointVis=..., _selected=true)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">louisep</span><span class=\"o\">/</span><span class=\"n\">gazebo_source</span><span class=\"o\">/</span><span class=\"n\">gazeboA</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">gui</span><span class=\"o\">/</span><span class=\"n\">model</span><span class=\"o\">/</span><span class=\"n\">JointMaker</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">1206</span>\n<span class=\"cp\">#11 0x00007ffff5472238 in gazebo::gui::JointMaker::SetSelected (this=0x3837800, _name=..., _selected=&lt;optimized out&gt;)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">louisep</span><span class=\"o\">/</span><span class=\"n\">gazebo_source</span><span class=\"o\">/</span><span class=\"n\">gazeboA</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">gui</span><span class=\"o\">/</span><span class=\"n\">model</span><span class=\"o\">/</span><span class=\"n\">JointMaker</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">1196</span>\n<span class=\"cp\">#12 0x00007ffff548196d in operator() (a1=true, a0=..., this=0x355f5b0) at /usr/include</span><span class=\"cpf\">/boost/function/function_template.hpp:767</span><span class=\"cp\"></span>\n<span class=\"cp\">#13 gazebo::event::EventT&lt;void (std::string, bool)&gt;::Signal&lt;std::string, bool&gt;(std::string const&amp;, bool const&amp;) (this=</span>\n    <span class=\"mh\">0x7ffff59d6720</span> <span class=\"o\">&lt;</span><span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">gui</span><span class=\"o\">::</span><span class=\"n\">model</span><span class=\"o\">::</span><span class=\"n\">Events</span><span class=\"o\">::</span><span class=\"n\">setSelectedJoint</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">_p1</span><span class=\"o\">=</span><span class=\"p\">...,</span> <span class=\"n\">_p2</span><span class=\"o\">=</span><span class=\"mh\">@0x7fffffffc5f0</span><span class=\"o\">:</span> <span class=\"nb\">true</span><span class=\"p\">)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">louisep</span><span class=\"o\">/</span><span class=\"n\">gazebo_source</span><span class=\"o\">/</span><span class=\"n\">gazeboA</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">common</span><span class=\"o\">/</span><span class=\"n\">Event</span><span class=\"p\">.</span><span class=\"nl\">hh</span><span class=\"p\">:</span><span class=\"mi\">357</span>\n<span class=\"cp\">#14 0x00007ffff54b24d3 in operator()&lt;std::basic_string&lt;char&gt;, bool&gt; (_p2=@0x7fffffffc5f0: true, _p1=..., this=&lt;optimized out&gt;)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">louisep</span><span class=\"o\">/</span><span class=\"n\">gazebo_source</span><span class=\"o\">/</span><span class=\"n\">gazeboA</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">common</span><span class=\"o\">/</span><span class=\"n\">Event</span><span class=\"p\">.</span><span class=\"nl\">hh</span><span class=\"p\">:</span><span class=\"mi\">214</span>\n<span class=\"cp\">#15 gazebo::gui::ModelEditorPalette::OnItemSelectionChanged (this=0x3549cf0)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">louisep</span><span class=\"o\">/</span><span class=\"n\">gazebo_source</span><span class=\"o\">/</span><span class=\"n\">gazeboA</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">gui</span><span class=\"o\">/</span><span class=\"n\">model</span><span class=\"o\">/</span><span class=\"n\">ModelEditorPalette</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">484</span>\n</pre></div>", "type": "rendered"}, "created_on": "2015-04-09T23:00:39.216022+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2015-04-09T23:00:54.132492+00:00", "type": "pullrequest_comment", "id": 6171840}