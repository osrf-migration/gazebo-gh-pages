{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1049/comments/1904690.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:None..None?path=gazebo%2Fphysics%2FCollision.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1049/_/diff#comment-1904690"}}, "parent": {"id": 1893920, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1049/comments/1893920.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1049/_/diff#comment-1893920"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1049, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1049.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1049"}}, "title": "Fix Collision::GetWorldPose (#1124)"}, "content": {"raw": "I updated the test in branch issue_1124_scpeters (79569bb2798f and 9515cbdbe129) to check the link pose and model pose in addition to collision pose:\n~~~\n    EXPECT_EQ(model->GetWorldPose(), newPose);\n    EXPECT_EQ(link->GetWorldPose(), newPose);\n    EXPECT_EQ(coll->GetWorldPose(), newPose);\n~~~\n These additions made the test fail much less frequently (it took at least 10 times as many tries to observe a failure), but when it does fail, the link and collision poses fail together, ie:\n~~~\n[ RUN      ] Issue1124Test.SetModelPose\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 192.168.1.183\n[Dbg] [ServerFixture.cc:144] ServerFixture load in 1 seconds, timeout after 600 seconds\n/home/scpeters/ws/gazebo/src/gazebo/test/regression/1124_collision_pose.cc:57: Failure\nValue of: newPose\n  Actual: 2 2 0.5 0 0 0\nExpected: link->GetWorldPose()\nWhich is: 0 0 0.5 0 0 0\n/home/scpeters/ws/gazebo/src/gazebo/test/regression/1124_collision_pose.cc:58: Failure\nValue of: newPose\n  Actual: 2 2 0.5 0 0 0\nExpected: coll->GetWorldPose()\nWhich is: 0 0 0.5 0 0 0\n[Dbg] [ServerFixture.cc:95] ServerFixture::Unload\n[  FAILED  ] Issue1124Test.SetModelPose (1138 ms)\n~~~", "markup": "markdown", "html": "<p>I updated the test in branch issue_1124_scpeters (<a href=\"#!/osrf/gazebo/commits/79569bb2798f\" rel=\"nofollow\" class=\"ap-connect-link\">79569bb2798f</a> and <a href=\"#!/osrf/gazebo/commits/9515cbdbe129\" rel=\"nofollow\" class=\"ap-connect-link\">9515cbdbe129</a>) to check the link pose and model pose in addition to collision pose:</p>\n<div class=\"codehilite\"><pre><span></span>    EXPECT_EQ(model-&gt;GetWorldPose(), newPose);\n    EXPECT_EQ(link-&gt;GetWorldPose(), newPose);\n    EXPECT_EQ(coll-&gt;GetWorldPose(), newPose);\n</pre></div>\n\n\n<p>These additions made the test fail much less frequently (it took at least 10 times as many tries to observe a failure), but when it does fail, the link and collision poses fail together, ie:</p>\n<div class=\"codehilite\"><pre><span></span>[ RUN      ] Issue1124Test.SetModelPose\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 192.168.1.183\n[Dbg] [ServerFixture.cc:144] ServerFixture load in 1 seconds, timeout after 600 seconds\n/home/scpeters/ws/gazebo/src/gazebo/test/regression/1124_collision_pose.cc:57: Failure\nValue of: newPose\n  Actual: 2 2 0.5 0 0 0\nExpected: link-&gt;GetWorldPose()\nWhich is: 0 0 0.5 0 0 0\n/home/scpeters/ws/gazebo/src/gazebo/test/regression/1124_collision_pose.cc:58: Failure\nValue of: newPose\n  Actual: 2 2 0.5 0 0 0\nExpected: coll-&gt;GetWorldPose()\nWhich is: 0 0 0.5 0 0 0\n[Dbg] [ServerFixture.cc:95] ServerFixture::Unload\n[  FAILED  ] Issue1124Test.SetModelPose (1138 ms)\n</pre></div>", "type": "rendered"}, "created_on": "2014-05-17T01:15:08.305126+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": null, "from": null, "outdated": false, "path": "gazebo/physics/Collision.cc"}, "updated_on": "2014-05-17T01:15:08.311995+00:00", "type": "pullrequest_comment", "id": 1904690}