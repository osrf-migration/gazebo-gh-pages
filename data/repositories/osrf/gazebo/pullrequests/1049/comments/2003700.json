{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1049/comments/2003700.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:None..None?path=gazebo%2Fphysics%2FCollision.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1049/_/diff#comment-2003700"}}, "parent": {"id": 1904690, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1049/comments/1904690.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1049/_/diff#comment-1904690"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1049, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1049.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1049"}}, "title": "Fix Collision::GetWorldPose (#1124)"}, "content": {"raw": "I think is happening when the physics engine updates the pose of the link right after the test sets the pose of the model. Commenting out [this line](#!/osrf/gazebo/src/075e871093dc663fd0c94f3e506d40f7631bc334/gazebo/physics/World.cc?at=default#cl-674) seems to \"fix\" it.\n\nUsing the WorldPoseMutex doesn't work due to deadlock.\n\nI can fix the test by running the world paused.\n\nOn the plus side, this error case won't happen for plugins or programs using the transport library. It'll only be a problem if you happen to run the world in one thread and use the API in another thread.\n", "markup": "markdown", "html": "<p>I think is happening when the physics engine updates the pose of the link right after the test sets the pose of the model. Commenting out <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/075e871093dc663fd0c94f3e506d40f7631bc334/gazebo/physics/World.cc?at=default#cl-674\" rel=\"nofollow\">this line</a> seems to \"fix\" it.</p>\n<p>Using the WorldPoseMutex doesn't work due to deadlock.</p>\n<p>I can fix the test by running the world paused.</p>\n<p>On the plus side, this error case won't happen for plugins or programs using the transport library. It'll only be a problem if you happen to run the world in one thread and use the API in another thread.</p>", "type": "rendered"}, "created_on": "2014-05-29T17:23:17.893916+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "outdated": false, "path": "gazebo/physics/Collision.cc"}, "updated_on": "2014-05-29T17:23:17.903966+00:00", "type": "pullrequest_comment", "id": 2003700}