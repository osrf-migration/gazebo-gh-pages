{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1743/comments/7843768.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1743/_/diff#comment-7843768"}}, "parent": {"id": 7716613, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1743/comments/7716613.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1743/_/diff#comment-7716613"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1743, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1743.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1743"}}, "title": "Added laser lines to laser visualization (default)"}, "content": {"raw": "this fixes the crash and test passes\n\n~~~\ndiff -r 23cd7ba34f78 gazebo/rendering/LaserVisual.cc\n--- a/gazebo/rendering/LaserVisual.cc\tFri Jun 19 15:15:55 2015 -0700\n+++ b/gazebo/rendering/LaserVisual.cc\tFri Jun 26 11:12:01 2015 -0700\n@@ -154,13 +154,13 @@\n       math::Vector3 noHitPt = (axis * noHitRange) + offset.pos;\n \n       // Draw the lines that represent each simulated ray\n-      if (i >= dPtr->rayLines[j]->GetPointCount()/2)\n+      if (i >= dPtr->rayLines[j]->GetPointCount()*0.5)\n       {\n         dPtr->rayLines[j]->AddPoint(offset.pos);\n         if (std::isinf(r))\n           dPtr->rayLines[j]->AddPoint(noHitPt);\n         else\n-          dPtr->rayLines[j]->SetPoint(i*2+1, pt);\n+          dPtr->rayLines[j]->AddPoint(pt);\n       }\n       else\n       {\n~~~", "markup": "markdown", "html": "<p>this fixes the crash and test passes</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 23cd7ba34f78 gazebo/rendering/LaserVisual.cc</span>\n<span class=\"gd\">--- a/gazebo/rendering/LaserVisual.cc   Fri Jun 19 15:15:55 2015 -0700</span>\n<span class=\"gi\">+++ b/gazebo/rendering/LaserVisual.cc   Fri Jun 26 11:12:01 2015 -0700</span>\n<span class=\"gu\">@@ -154,13 +154,13 @@</span>\n       math::Vector3 noHitPt = (axis * noHitRange) + offset.pos;\n\n       // Draw the lines that represent each simulated ray\n<span class=\"gd\">-      if (i &gt;= dPtr-&gt;rayLines[j]-&gt;GetPointCount()/2)</span>\n<span class=\"gi\">+      if (i &gt;= dPtr-&gt;rayLines[j]-&gt;GetPointCount()*0.5)</span>\n       {\n         dPtr-&gt;rayLines[j]-&gt;AddPoint(offset.pos);\n         if (std::isinf(r))\n           dPtr-&gt;rayLines[j]-&gt;AddPoint(noHitPt);\n         else\n<span class=\"gd\">-          dPtr-&gt;rayLines[j]-&gt;SetPoint(i*2+1, pt);</span>\n<span class=\"gi\">+          dPtr-&gt;rayLines[j]-&gt;AddPoint(pt);</span>\n       }\n       else\n       {\n</pre></div>", "type": "rendered"}, "created_on": "2015-06-26T18:12:54.650495+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2015-06-26T18:12:54.658588+00:00", "type": "pullrequest_comment", "id": 7843768}