{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1872/comments/9364524.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:None..None?path=plugins%2FLinearBatteryPlugin.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1872/_/diff#comment-9364524"}}, "parent": {"id": 9362596, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1872/comments/9362596.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1872/_/diff#comment-9362596"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1872, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1872.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1872"}}, "title": "Add battery class (redo of pull request #1782)"}, "content": {"raw": "The `<open_circuit_voltage_constant_coef>` is needed and may differ from the initial voltage value. If you prefer, you can use a bias in your XML:\n\n\n```\n#!xml\n<open_circuit_voltage_constant_coef_bias>0.102</open_circuit_voltage_constant_coef_bias>\n```\n\nAnd then compute the linear coef like this in the `Load()` method:\n```\n#!c++\nthis->e0 = _sdf->Get<double>(\"open_circuit_voltage_constant_coef_bias\") + this->battery->Voltage();\n```\nYou should know that this is just a usage example. In reality, the equation that represents the open-circuit would require more terms.\n", "markup": "markdown", "html": "<p>The <code>&lt;open_circuit_voltage_constant_coef&gt;</code> is needed and may differ from the initial voltage value. If you prefer, you can use a bias in your XML:</p>\n<div class=\"codehilite language-xml\"><pre><span></span><span class=\"nt\">&lt;open_circuit_voltage_constant_coef_bias&gt;</span>0.102<span class=\"nt\">&lt;/open_circuit_voltage_constant_coef_bias&gt;</span>\n</pre></div>\n\n\n<p>And then compute the linear coef like this in the <code>Load()</code> method:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">e0</span> <span class=\"o\">=</span> <span class=\"n\">_sdf</span><span class=\"o\">-&gt;</span><span class=\"n\">Get</span><span class=\"o\">&lt;</span><span class=\"kt\">double</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"s\">&quot;open_circuit_voltage_constant_coef_bias&quot;</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">battery</span><span class=\"o\">-&gt;</span><span class=\"n\">Voltage</span><span class=\"p\">();</span>\n</pre></div>\n\n\n<p>You should know that this is just a usage example. In reality, the equation that represents the open-circuit would require more terms.</p>", "type": "rendered"}, "created_on": "2015-08-25T16:24:36.157215+00:00", "user": {"display_name": "Olivier Crave", "uuid": "{c2c9ac10-3ca6-45ef-a19b-d3a76d065296}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D"}, "html": {"href": "https://bitbucket.org/%7Bc2c9ac10-3ca6-45ef-a19b-d3a76d065296%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a4e0f2b75ca0affe5c82b9650a623d0dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsOC-4.png"}}, "nickname": "ocrave", "type": "user", "account_id": "557058:24cd6b3d-30bb-4c42-9e4b-f5836c392874"}, "inline": {"to": null, "from": null, "outdated": false, "path": "plugins/LinearBatteryPlugin.cc"}, "updated_on": "2015-08-25T16:24:36.223521+00:00", "type": "pullrequest_comment", "id": 9364524}