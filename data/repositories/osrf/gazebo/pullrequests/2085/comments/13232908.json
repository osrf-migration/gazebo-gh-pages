{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2085/comments/13232908.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2085/_/diff#comment-13232908"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2085, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2085.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2085"}}, "title": "Add FollowerPlugin for FTU tutorial"}, "content": {"raw": "I think the casts have to be updated:\n\n~~~\n/home/louisep/gazebo_source/gazeboB/plugins/FollowerPlugin.cc: In member function \u2018bool gazebo::FollowerPlugin::FindSensor(const ModelPtr&)\u2019:\n/home/louisep/gazebo_source/gazeboB/plugins/FollowerPlugin.cc:198:75: error: no matching function for call to \u2018dynamic_pointer_cast(gazebo::sensors::SensorPtr&)\u2019\n             boost::dynamic_pointer_cast<sensors::DepthCameraSensor>(sensor);\n                                                                           ^\n/home/louisep/gazebo_source/gazeboB/plugins/FollowerPlugin.cc:198:75: note: candidate is:\nIn file included from /usr/include/boost/shared_ptr.hpp:17:0,\n                 from /home/louisep/gazebo_source/gazeboB/gazebo/common/CommonTypes.hh:24,\n                 from /home/louisep/gazebo_source/gazeboB/gazebo/common/Plugin.hh:44,\n                 from /home/louisep/gazebo_source/gazeboB/plugins/FollowerPlugin.cc:27:\n/usr/include/boost/smart_ptr/shared_ptr.hpp:808:42: note: template<class T, class U> boost::shared_ptr<X> boost::dynamic_pointer_cast(const boost::shared_ptr<U>&)\n template<class T, class U> shared_ptr<T> dynamic_pointer_cast( shared_ptr<U> const & r ) BOOST_NOEXCEPT\n                                          ^\n/usr/include/boost/smart_ptr/shared_ptr.hpp:808:42: note:   template argument deduction/substitution failed:\n/home/louisep/gazebo_source/gazeboB/plugins/FollowerPlugin.cc:198:75: note:   \u2018gazebo::sensors::SensorPtr {aka std::shared_ptr<gazebo::sensors::Sensor>}\u2019 is not derived from \u2018const boost::shared_ptr<U>\u2019\n             boost::dynamic_pointer_cast<sensors::DepthCameraSensor>(sensor);\n~~~", "markup": "markdown", "html": "<p>I think the casts have to be updated:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">louisep</span><span class=\"o\">/</span><span class=\"nt\">gazebo_source</span><span class=\"o\">/</span><span class=\"nt\">gazeboB</span><span class=\"o\">/</span><span class=\"nt\">plugins</span><span class=\"o\">/</span><span class=\"nt\">FollowerPlugin</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"o\">:</span> <span class=\"nt\">In</span> <span class=\"nt\">member</span> <span class=\"nt\">function</span> <span class=\"err\">\u2018</span><span class=\"nt\">bool</span> <span class=\"nt\">gazebo</span><span class=\"p\">::</span><span class=\"nd\">FollowerPlugin</span><span class=\"p\">::</span><span class=\"nd\">FindSensor</span><span class=\"o\">(</span><span class=\"nt\">const</span> <span class=\"nt\">ModelPtr</span><span class=\"o\">&amp;)</span><span class=\"err\">\u2019</span><span class=\"o\">:</span>\n<span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">louisep</span><span class=\"o\">/</span><span class=\"nt\">gazebo_source</span><span class=\"o\">/</span><span class=\"nt\">gazeboB</span><span class=\"o\">/</span><span class=\"nt\">plugins</span><span class=\"o\">/</span><span class=\"nt\">FollowerPlugin</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">198</span><span class=\"p\">:</span><span class=\"nd\">75</span><span class=\"o\">:</span> <span class=\"nt\">error</span><span class=\"o\">:</span> <span class=\"nt\">no</span> <span class=\"nt\">matching</span> <span class=\"nt\">function</span> <span class=\"nt\">for</span> <span class=\"nt\">call</span> <span class=\"nt\">to</span> <span class=\"err\">\u2018</span><span class=\"nt\">dynamic_pointer_cast</span><span class=\"o\">(</span><span class=\"nt\">gazebo</span><span class=\"p\">::</span><span class=\"nd\">sensors</span><span class=\"p\">::</span><span class=\"nd\">SensorPtr</span><span class=\"o\">&amp;)</span><span class=\"err\">\u2019</span>\n             <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">dynamic_pointer_cast</span><span class=\"o\">&lt;</span><span class=\"nt\">sensors</span><span class=\"p\">::</span><span class=\"nd\">DepthCameraSensor</span><span class=\"o\">&gt;(</span><span class=\"nt\">sensor</span><span class=\"o\">);</span>\n                                                                           <span class=\"o\">^</span>\n<span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">louisep</span><span class=\"o\">/</span><span class=\"nt\">gazebo_source</span><span class=\"o\">/</span><span class=\"nt\">gazeboB</span><span class=\"o\">/</span><span class=\"nt\">plugins</span><span class=\"o\">/</span><span class=\"nt\">FollowerPlugin</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">198</span><span class=\"p\">:</span><span class=\"nd\">75</span><span class=\"o\">:</span> <span class=\"nt\">note</span><span class=\"o\">:</span> <span class=\"nt\">candidate</span> <span class=\"nt\">is</span><span class=\"o\">:</span>\n<span class=\"nt\">In</span> <span class=\"nt\">file</span> <span class=\"nt\">included</span> <span class=\"nt\">from</span> <span class=\"o\">/</span><span class=\"nt\">usr</span><span class=\"o\">/</span><span class=\"nt\">include</span><span class=\"o\">/</span><span class=\"nt\">boost</span><span class=\"o\">/</span><span class=\"nt\">shared_ptr</span><span class=\"p\">.</span><span class=\"nc\">hpp</span><span class=\"p\">:</span><span class=\"nd\">17</span><span class=\"p\">:</span><span class=\"nd\">0</span><span class=\"o\">,</span>\n                 <span class=\"nt\">from</span> <span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">louisep</span><span class=\"o\">/</span><span class=\"nt\">gazebo_source</span><span class=\"o\">/</span><span class=\"nt\">gazeboB</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">common</span><span class=\"o\">/</span><span class=\"nt\">CommonTypes</span><span class=\"p\">.</span><span class=\"nc\">hh</span><span class=\"p\">:</span><span class=\"nd\">24</span><span class=\"o\">,</span>\n                 <span class=\"nt\">from</span> <span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">louisep</span><span class=\"o\">/</span><span class=\"nt\">gazebo_source</span><span class=\"o\">/</span><span class=\"nt\">gazeboB</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">common</span><span class=\"o\">/</span><span class=\"nt\">Plugin</span><span class=\"p\">.</span><span class=\"nc\">hh</span><span class=\"p\">:</span><span class=\"nd\">44</span><span class=\"o\">,</span>\n                 <span class=\"nt\">from</span> <span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">louisep</span><span class=\"o\">/</span><span class=\"nt\">gazebo_source</span><span class=\"o\">/</span><span class=\"nt\">gazeboB</span><span class=\"o\">/</span><span class=\"nt\">plugins</span><span class=\"o\">/</span><span class=\"nt\">FollowerPlugin</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">27</span><span class=\"o\">:</span>\n<span class=\"o\">/</span><span class=\"nt\">usr</span><span class=\"o\">/</span><span class=\"nt\">include</span><span class=\"o\">/</span><span class=\"nt\">boost</span><span class=\"o\">/</span><span class=\"nt\">smart_ptr</span><span class=\"o\">/</span><span class=\"nt\">shared_ptr</span><span class=\"p\">.</span><span class=\"nc\">hpp</span><span class=\"p\">:</span><span class=\"nd\">808</span><span class=\"p\">:</span><span class=\"nd\">42</span><span class=\"o\">:</span> <span class=\"nt\">note</span><span class=\"o\">:</span> <span class=\"nt\">template</span><span class=\"o\">&lt;</span><span class=\"nt\">class</span> <span class=\"nt\">T</span><span class=\"o\">,</span> <span class=\"nt\">class</span> <span class=\"nt\">U</span><span class=\"o\">&gt;</span> <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"nt\">X</span><span class=\"o\">&gt;</span> <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">dynamic_pointer_cast</span><span class=\"o\">(</span><span class=\"nt\">const</span> <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"nt\">U</span><span class=\"o\">&gt;&amp;)</span>\n <span class=\"nt\">template</span><span class=\"o\">&lt;</span><span class=\"nt\">class</span> <span class=\"nt\">T</span><span class=\"o\">,</span> <span class=\"nt\">class</span> <span class=\"nt\">U</span><span class=\"o\">&gt;</span> <span class=\"nt\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"nt\">T</span><span class=\"o\">&gt;</span> <span class=\"nt\">dynamic_pointer_cast</span><span class=\"o\">(</span> <span class=\"nt\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"nt\">U</span><span class=\"o\">&gt;</span> <span class=\"nt\">const</span> <span class=\"o\">&amp;</span> <span class=\"nt\">r</span> <span class=\"o\">)</span> <span class=\"nt\">BOOST_NOEXCEPT</span>\n                                          <span class=\"o\">^</span>\n<span class=\"o\">/</span><span class=\"nt\">usr</span><span class=\"o\">/</span><span class=\"nt\">include</span><span class=\"o\">/</span><span class=\"nt\">boost</span><span class=\"o\">/</span><span class=\"nt\">smart_ptr</span><span class=\"o\">/</span><span class=\"nt\">shared_ptr</span><span class=\"p\">.</span><span class=\"nc\">hpp</span><span class=\"p\">:</span><span class=\"nd\">808</span><span class=\"p\">:</span><span class=\"nd\">42</span><span class=\"o\">:</span> <span class=\"nt\">note</span><span class=\"o\">:</span>   <span class=\"nt\">template</span> <span class=\"nt\">argument</span> <span class=\"nt\">deduction</span><span class=\"o\">/</span><span class=\"nt\">substitution</span> <span class=\"nt\">failed</span><span class=\"o\">:</span>\n<span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">louisep</span><span class=\"o\">/</span><span class=\"nt\">gazebo_source</span><span class=\"o\">/</span><span class=\"nt\">gazeboB</span><span class=\"o\">/</span><span class=\"nt\">plugins</span><span class=\"o\">/</span><span class=\"nt\">FollowerPlugin</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">198</span><span class=\"p\">:</span><span class=\"nd\">75</span><span class=\"o\">:</span> <span class=\"nt\">note</span><span class=\"o\">:</span>   <span class=\"err\">\u2018</span><span class=\"nt\">gazebo</span><span class=\"p\">::</span><span class=\"nd\">sensors</span><span class=\"p\">::</span><span class=\"nd\">SensorPtr</span> <span class=\"p\">{</span><span class=\"err\">aka</span> <span class=\"n\">std</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">sensors</span><span class=\"o\">::</span><span class=\"n\">Sensor</span><span class=\"o\">&gt;</span><span class=\"p\">}</span><span class=\"err\">\u2019</span> <span class=\"nt\">is</span> <span class=\"nt\">not</span> <span class=\"nt\">derived</span> <span class=\"nt\">from</span> <span class=\"err\">\u2018</span><span class=\"nt\">const</span> <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"nt\">U</span><span class=\"o\">&gt;</span><span class=\"err\">\u2019</span>\n             <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">dynamic_pointer_cast</span><span class=\"o\">&lt;</span><span class=\"nt\">sensors</span><span class=\"p\">::</span><span class=\"nd\">DepthCameraSensor</span><span class=\"o\">&gt;(</span><span class=\"nt\">sensor</span><span class=\"o\">);</span>\n</pre></div>", "type": "rendered"}, "created_on": "2016-01-06T21:28:29.179908+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2016-01-06T21:28:29.182458+00:00", "type": "pullrequest_comment", "id": 13232908}