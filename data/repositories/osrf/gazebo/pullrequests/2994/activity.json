{"pagelen": 50, "values": [{"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\n\u200c\r\n\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\n\u200c\r\n\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "72786dfbd2cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/72786dfbd2cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/72786dfbd2cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "ad9f28617ef0", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/ad9f28617ef0"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/ad9f28617ef0"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "MERGED", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2018-07-24T18:16:13.056338+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"approval": {"date": "2018-07-21T00:58:36.040476+00:00", "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70638089.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70638089"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "works great for me", "markup": "markdown", "html": "<p>works great for me</p>", "type": "rendered"}, "created_on": "2018-07-21T00:58:32.222771+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-07-21T00:58:32.229611+00:00", "type": "pullrequest_comment", "id": 70638089}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70637970.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70637970"}}, "parent": {"id": 70637863, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70637863.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70637863"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Oh, I misunderstood your question. Sorry!\n\nI think I have picked old code when I merged this branch with the original branch by meld. It now calls `HasElement` to check them. Thank you for pointing this out.", "markup": "markdown", "html": "<p>Oh, I misunderstood your question. Sorry!</p>\n<p>I think I have picked old code when I merged this branch with the original branch by meld. It now calls <code>HasElement</code> to check them. Thank you for pointing this out.</p>", "type": "rendered"}, "created_on": "2018-07-21T00:49:03.515988+00:00", "user": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "inline": {}, "updated_on": "2018-07-21T00:49:03.576459+00:00", "type": "pullrequest_comment", "id": 70637970}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70637863.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70637863"}}, "parent": {"id": 70635177, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70635177.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70635177"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "I was just thinking that calling `GetElement` will *create* the sdf element if it doesn\u2019t exist. So the concern is that you may get an element with default values that doesn\u2019t correspond to any lights defined in the link", "markup": "markdown", "html": "<p>I was just thinking that calling <code>GetElement</code> will <em>create</em> the sdf element if it doesn\u2019t exist. So the concern is that you may get an element with default values that doesn\u2019t correspond to any lights defined in the link</p>", "type": "rendered"}, "created_on": "2018-07-21T00:40:16.349089+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2018-07-21T00:40:16.355715+00:00", "type": "pullrequest_comment", "id": 70637863}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70636438.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70636438"}}, "parent": {"id": 70632157, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70632157.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70632157"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "That\u2019s right. I added a if statement to check that: [https://bitbucket.org/tidota/gazebo/commits/ad9f28617ef04a3b36f43ca69e74639c12e83462#Lplugins/FlashLightPlugin.ccF668](https://bitbucket.org/tidota/gazebo/commits/ad9f28617ef04a3b36f43ca69e74639c12e83462#Lplugins/FlashLightPlugin.ccF668)", "markup": "markdown", "html": "<p>That\u2019s right. I added a if statement to check that: <a data-is-external-link=\"true\" href=\"https://bitbucket.org/tidota/gazebo/commits/ad9f28617ef04a3b36f43ca69e74639c12e83462#Lplugins/FlashLightPlugin.ccF668\" rel=\"nofollow\">https://bitbucket.org/tidota/gazebo/commits/ad9f28617ef04a3b36f43ca69e74639c12e83462#Lplugins/FlashLightPlugin.ccF668</a></p>", "type": "rendered"}, "created_on": "2018-07-20T23:12:36.601900+00:00", "user": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "inline": {}, "updated_on": "2018-07-20T23:12:36.652482+00:00", "type": "pullrequest_comment", "id": 70636438}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70636365.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70636365"}}, "parent": {"id": 70631898, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70631898.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70631898"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "No, I think I overlooked when I merged the flashlight branch to the led branch. Thanks!\n\n[https://bitbucket.org/tidota/gazebo/commits/ad9f28617ef04a3b36f43ca69e74639c12e83462#Lplugins/FlashLightPlugin.ccF192](https://bitbucket.org/tidota/gazebo/commits/ad9f28617ef04a3b36f43ca69e74639c12e83462#Lplugins/FlashLightPlugin.ccF192)", "markup": "markdown", "html": "<p>No, I think I overlooked when I merged the flashlight branch to the led branch. Thanks!</p>\n<p><a data-is-external-link=\"true\" href=\"https://bitbucket.org/tidota/gazebo/commits/ad9f28617ef04a3b36f43ca69e74639c12e83462#Lplugins/FlashLightPlugin.ccF192\" rel=\"nofollow\">https://bitbucket.org/tidota/gazebo/commits/ad9f28617ef04a3b36f43ca69e74639c12e83462#Lplugins/FlashLightPlugin.ccF192</a></p>", "type": "rendered"}, "created_on": "2018-07-20T23:09:14.908684+00:00", "user": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "inline": {}, "updated_on": "2018-07-20T23:09:14.970835+00:00", "type": "pullrequest_comment", "id": 70636365}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\n\u200c\r\n\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\n\u200c\r\n\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "72786dfbd2cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/72786dfbd2cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/72786dfbd2cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "ad9f28617ef0", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/ad9f28617ef0"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/ad9f28617ef0"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "OPEN", "author": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "date": "2018-07-20T23:07:01.121059+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70635177.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70635177"}}, "parent": {"id": 70632000, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70632000.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70632000"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "When LedPlugin is used, it would need to have moth <visual> and <light> elements if FlashLightPlugin checks the <light> element. I just thought it would be useful if a link is allowed to have only <visual> without <light>. But, it may be a weird feature and may violate inheritance concepts. What do you think?", "markup": "markdown", "html": "<p>When LedPlugin is used, it would need to have moth &lt;visual&gt; and &lt;light&gt; elements if FlashLightPlugin checks the &lt;light&gt; element. I just thought it would be useful if a link is allowed to have only &lt;visual&gt; without &lt;light&gt;. But, it may be a weird feature and may violate inheritance concepts. What do you think?</p>", "type": "rendered"}, "created_on": "2018-07-20T22:28:07.677342+00:00", "user": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "inline": {}, "updated_on": "2018-07-20T22:28:07.738623+00:00", "type": "pullrequest_comment", "id": 70635177}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70633602.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70633602"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "minor style suggestion. We've been trying to remove the `Get` Prefix and use `Count` in place of `Num` in gazebo. So to keep consistency, this could be named as `BlockCount`", "markup": "markdown", "html": "<p>minor style suggestion. We've been trying to remove the <code>Get</code> Prefix and use <code>Count</code> in place of <code>Num</code> in gazebo. So to keep consistency, this could be named as <code>BlockCount</code></p>", "type": "rendered"}, "created_on": "2018-07-20T21:46:36.791523+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2018-07-20T21:46:36.799346+00:00", "type": "pullrequest_comment", "id": 70633602}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70633467.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70633467"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "check light using `HasElement` first?", "markup": "markdown", "html": "<p>check light using <code>HasElement</code> first?</p>", "type": "rendered"}, "created_on": "2018-07-20T21:43:40.175842+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2018-07-20T21:43:40.182424+00:00", "type": "pullrequest_comment", "id": 70633467}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70632762.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70632762"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "for primitive types, I think we've been passing by value and not by const reference, i.e. `const double _duration`", "markup": "markdown", "html": "<p>for primitive types, I think we've been passing by value and not by const reference, i.e. <code>const double _duration</code></p>", "type": "rendered"}, "created_on": "2018-07-20T21:31:44.570858+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2018-07-20T21:31:44.579545+00:00", "type": "pullrequest_comment", "id": 70632762}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70632374.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70632374"}}, "parent": {"id": 70631871, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70631871.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70631871"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "actually I just noticed the variables in `FlashLightSettingPrivate`do have default values", "markup": "markdown", "html": "<p>actually I just noticed the variables in <code>FlashLightSettingPrivate</code>do have default values</p>", "type": "rendered"}, "created_on": "2018-07-20T21:23:52.502509+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2018-07-20T21:23:52.509192+00:00", "type": "pullrequest_comment", "id": 70632374}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70632157.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70632157"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "connect only if `listFlashLight` is not empty?", "markup": "markdown", "html": "<p>connect only if <code>listFlashLight</code> is not empty?</p>", "type": "rendered"}, "created_on": "2018-07-20T21:19:16.979984+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2018-07-20T21:19:16.986792+00:00", "type": "pullrequest_comment", "id": 70632157}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70632000.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70632000"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "checking for the presense of a light element first using `HasElement(\"light\")` is no longer needed?", "markup": "markdown", "html": "<p>checking for the presense of a light element first using <code>HasElement(\"light\")</code> is no longer needed?</p>", "type": "rendered"}, "created_on": "2018-07-20T21:16:43.398311+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2018-07-20T21:16:43.405651+00:00", "type": "pullrequest_comment", "id": 70632000}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70631898.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70631898"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "this changes `rfind` to `find` - that\u2019s on purpose?", "markup": "markdown", "html": "<p>this changes <code>rfind</code> to <code>find</code> - that\u2019s on purpose?</p>", "type": "rendered"}, "created_on": "2018-07-20T21:14:57.275984+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2018-07-20T21:14:57.284638+00:00", "type": "pullrequest_comment", "id": 70631898}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70631871.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70631871"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "set default value? \n\nsame for variables in `FlashLightSettingPrivate`", "markup": "markdown", "html": "<p>set default value? </p>\n<p>same for variables in <code>FlashLightSettingPrivate</code></p>", "type": "rendered"}, "created_on": "2018-07-20T21:14:15.070381+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2018-07-20T21:14:15.077891+00:00", "type": "pullrequest_comment", "id": 70631871}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"approval": {"date": "2018-07-20T20:00:56.999207+00:00", "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70624900.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70624900"}}, "parent": {"id": 70622976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70622976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70622976"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "I agree. I changed both nested loops.\n\n[https://bitbucket.org/tidota/gazebo/commits/71dcdffa0a1cd84b36fa65c27c38d0dd13596ada#Ltest/integration/led\\_plugin.ccF110](https://bitbucket.org/tidota/gazebo/commits/71dcdffa0a1cd84b36fa65c27c38d0dd13596ada#Ltest/integration/led_plugin.ccF110)\n\n[https://bitbucket.org/tidota/gazebo/commits/71dcdffa0a1cd84b36fa65c27c38d0dd13596ada#Ltest/integration/led\\_plugin.ccF138](https://bitbucket.org/tidota/gazebo/commits/71dcdffa0a1cd84b36fa65c27c38d0dd13596ada#Ltest/integration/led_plugin.ccF138)", "markup": "markdown", "html": "<p>I agree. I changed both nested loops.</p>\n<p><a data-is-external-link=\"true\" href=\"https://bitbucket.org/tidota/gazebo/commits/71dcdffa0a1cd84b36fa65c27c38d0dd13596ada#Ltest/integration/led_plugin.ccF110\" rel=\"nofollow\">https://bitbucket.org/tidota/gazebo/commits/71dcdffa0a1cd84b36fa65c27c38d0dd13596ada#Ltest/integration/led_plugin.ccF110</a></p>\n<p><a data-is-external-link=\"true\" href=\"https://bitbucket.org/tidota/gazebo/commits/71dcdffa0a1cd84b36fa65c27c38d0dd13596ada#Ltest/integration/led_plugin.ccF138\" rel=\"nofollow\">https://bitbucket.org/tidota/gazebo/commits/71dcdffa0a1cd84b36fa65c27c38d0dd13596ada#Ltest/integration/led_plugin.ccF138</a></p>", "type": "rendered"}, "created_on": "2018-07-20T19:25:39.434667+00:00", "user": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "inline": {}, "updated_on": "2018-07-20T19:25:39.498063+00:00", "type": "pullrequest_comment", "id": 70624900}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\n\u200c\r\n\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\n\u200c\r\n\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "72786dfbd2cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/72786dfbd2cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/72786dfbd2cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "71dcdffa0a1c", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/71dcdffa0a1c"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/71dcdffa0a1c"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "OPEN", "author": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "date": "2018-07-20T19:21:57.417434+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70623493.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70623493"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "`return it != this->flashLight[0].colors.end()` instead of the `if/else` block?", "markup": "markdown", "html": "<p><code>return it != this-&gt;flashLight[0].colors.end()</code> instead of the <code>if/else</code> block?</p>", "type": "rendered"}, "created_on": "2018-07-20T19:07:25.890505+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-20T19:07:39.119737+00:00", "type": "pullrequest_comment", "id": 70623493}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70623098.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70623098"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Nit: Use `0u` for unsigned literals.", "markup": "markdown", "html": "<p>Nit: Use <code>0u</code> for unsigned literals.</p>", "type": "rendered"}, "created_on": "2018-07-20T19:01:47.405234+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-20T19:01:47.413933+00:00", "type": "pullrequest_comment", "id": 70623098}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70622976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70622976"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "I think is safer if you move the `lock` outside of the two `for` loops to make sure that the image is not changed between iterations of the `for`.", "markup": "markdown", "html": "<p>I think is safer if you move the <code>lock</code> outside of the two <code>for</code> loops to make sure that the image is not changed between iterations of the <code>for</code>.</p>", "type": "rendered"}, "created_on": "2018-07-20T19:00:13.292117+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-20T19:00:13.300976+00:00", "type": "pullrequest_comment", "id": 70622976}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70502506.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70502506"}}, "parent": {"id": 70492669, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70492669.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70492669"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Done: [https://bitbucket.org/tidota/gazebo/commits/46332798a2fd865c6e7b7c82e0d4912bf8080414?at=gazebo9#Ltest/integration/led\\_plugin.ccF107](https://bitbucket.org/tidota/gazebo/commits/46332798a2fd865c6e7b7c82e0d4912bf8080414?at=gazebo9#Ltest/integration/led_plugin.ccF107)", "markup": "markdown", "html": "<p>Done: <a data-is-external-link=\"true\" href=\"https://bitbucket.org/tidota/gazebo/commits/46332798a2fd865c6e7b7c82e0d4912bf8080414?at=gazebo9#Ltest/integration/led_plugin.ccF107\" rel=\"nofollow\">https://bitbucket.org/tidota/gazebo/commits/46332798a2fd865c6e7b7c82e0d4912bf8080414?at=gazebo9#Ltest/integration/led_plugin.ccF107</a></p>", "type": "rendered"}, "created_on": "2018-07-19T19:08:58.718101+00:00", "user": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "inline": {}, "updated_on": "2018-07-19T19:08:58.769926+00:00", "type": "pullrequest_comment", "id": 70502506}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\n\u200c\r\n\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\n\u200c\r\n\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "72786dfbd2cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/72786dfbd2cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/72786dfbd2cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "46332798a2fd", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/46332798a2fd"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/46332798a2fd"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "OPEN", "author": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "date": "2018-07-19T19:06:36.725279+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70492864.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70492864"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Nit: Add `//////////////////////////////////////////////////` separator here.", "markup": "markdown", "html": "<p>Nit: Add <code>//////////////////////////////////////////////////</code> separator here.</p>", "type": "rendered"}, "created_on": "2018-07-19T17:30:55.580898+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-19T17:30:55.591012+00:00", "type": "pullrequest_comment", "id": 70492864}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70492669.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70492669"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "I think you should take the mutex before reading `img` here and in the next \\`for\\` loop.", "markup": "markdown", "html": "<p>I think you should take the mutex before reading <code>img</code> here and in the next `for` loop.</p>", "type": "rendered"}, "created_on": "2018-07-19T17:28:48.810508+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-19T17:28:48.820487+00:00", "type": "pullrequest_comment", "id": 70492669}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70492591.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70492591"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Can we make this global variables members of the `LedPluginTest` class?", "markup": "markdown", "html": "<p>Can we make this global variables members of the <code>LedPluginTest</code> class?</p>", "type": "rendered"}, "created_on": "2018-07-19T17:27:58.119496+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-19T17:27:58.125889+00:00", "type": "pullrequest_comment", "id": 70492591}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70372341.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70372341"}}, "parent": {"id": 70358063, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70358063.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70358063"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "~~Done: ~~[~~https://bitbucket.org/tidota/gazebo/commits/f5f047cf4765a535435f9f6a8c02a337b4deaa98?at=gazebo9~~](https://bitbucket.org/tidota/gazebo/commits/f5f047cf4765a535435f9f6a8c02a337b4deaa98?at=gazebo9)\n\nSorry, it had a typo: [https://bitbucket.org/tidota/gazebo/commits/0b8368336908d267bc5b1cbb769cfb338525db4b?at=gazebo9](https://bitbucket.org/tidota/gazebo/commits/0b8368336908d267bc5b1cbb769cfb338525db4b?at=gazebo9)", "markup": "markdown", "html": "<p><del>Done: </del><a data-is-external-link=\"true\" href=\"https://bitbucket.org/tidota/gazebo/commits/f5f047cf4765a535435f9f6a8c02a337b4deaa98?at=gazebo9\" rel=\"nofollow\"><del>https://bitbucket.org/tidota/gazebo/commits/f5f047cf4765a535435f9f6a8c02a337b4deaa98?at=gazebo9</del></a></p>\n<p>Sorry, it had a typo: <a data-is-external-link=\"true\" href=\"https://bitbucket.org/tidota/gazebo/commits/0b8368336908d267bc5b1cbb769cfb338525db4b?at=gazebo9\" rel=\"nofollow\">https://bitbucket.org/tidota/gazebo/commits/0b8368336908d267bc5b1cbb769cfb338525db4b?at=gazebo9</a></p>", "type": "rendered"}, "created_on": "2018-07-18T20:36:01.638158+00:00", "user": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "inline": {}, "updated_on": "2018-07-18T20:42:30.558944+00:00", "type": "pullrequest_comment", "id": 70372341}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\n\u200c\r\n\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\n\u200c\r\n\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "72786dfbd2cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/72786dfbd2cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/72786dfbd2cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "0b8368336908", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/0b8368336908"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/0b8368336908"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "OPEN", "author": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "date": "2018-07-18T20:40:08.188101+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\n\u200c\r\n\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\n\u200c\r\n\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "72786dfbd2cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/72786dfbd2cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/72786dfbd2cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "f5f047cf4765", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/f5f047cf4765"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/f5f047cf4765"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "OPEN", "author": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "date": "2018-07-18T20:37:02.088649+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\n\u200c\r\n\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\n\u200c\r\n\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "72786dfbd2cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/72786dfbd2cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/72786dfbd2cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "f5f047cf4765", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/f5f047cf4765"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/f5f047cf4765"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "OPEN", "author": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "date": "2018-07-18T20:34:43.155624+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70372024.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70372024"}}, "parent": {"id": 70360508, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70360508.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70360508"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Done: [https://bitbucket.org/tidota/gazebo/commits/97c14771a735ec70e986340cc31ddf145ead4ebd?at=gazebo9](https://bitbucket.org/tidota/gazebo/commits/97c14771a735ec70e986340cc31ddf145ead4ebd?at=gazebo9)", "markup": "markdown", "html": "<p>Done: <a data-is-external-link=\"true\" href=\"https://bitbucket.org/tidota/gazebo/commits/97c14771a735ec70e986340cc31ddf145ead4ebd?at=gazebo9\" rel=\"nofollow\">https://bitbucket.org/tidota/gazebo/commits/97c14771a735ec70e986340cc31ddf145ead4ebd?at=gazebo9</a></p>", "type": "rendered"}, "created_on": "2018-07-18T20:32:19.634198+00:00", "user": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "updated_on": "2018-07-18T20:32:19.685973+00:00", "type": "pullrequest_comment", "id": 70372024}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70371661.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70371661"}}, "parent": {"id": 70358670, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70358670.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70358670"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Yes!: [https://bitbucket.org/tidota/gazebo/commits/4ca704daf47c913c2cc2a53f18d490a792a2c5df?at=gazebo9#Lplugins/LedPlugin.ccF95](https://bitbucket.org/tidota/gazebo/commits/4ca704daf47c913c2cc2a53f18d490a792a2c5df?at=gazebo9#Lplugins/LedPlugin.ccF95)", "markup": "markdown", "html": "<p>Yes!: <a data-is-external-link=\"true\" href=\"https://bitbucket.org/tidota/gazebo/commits/4ca704daf47c913c2cc2a53f18d490a792a2c5df?at=gazebo9#Lplugins/LedPlugin.ccF95\" rel=\"nofollow\">https://bitbucket.org/tidota/gazebo/commits/4ca704daf47c913c2cc2a53f18d490a792a2c5df?at=gazebo9#Lplugins/LedPlugin.ccF95</a></p>", "type": "rendered"}, "created_on": "2018-07-18T20:28:27.426782+00:00", "user": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "inline": {}, "updated_on": "2018-07-18T20:28:27.474764+00:00", "type": "pullrequest_comment", "id": 70371661}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70371297.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70371297"}}, "parent": {"id": 70357816, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70357816.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70357816"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "That\u2019s right. I removed it. Thanks!\n\n[https://bitbucket.org/tidota/gazebo/commits/4ca704daf47c913c2cc2a53f18d490a792a2c5df?at=gazebo9#Lplugins/LedPlugin.hhF22](https://bitbucket.org/tidota/gazebo/commits/4ca704daf47c913c2cc2a53f18d490a792a2c5df?at=gazebo9#Lplugins/LedPlugin.hhF22)", "markup": "markdown", "html": "<p>That\u2019s right. I removed it. Thanks!</p>\n<p><a data-is-external-link=\"true\" href=\"https://bitbucket.org/tidota/gazebo/commits/4ca704daf47c913c2cc2a53f18d490a792a2c5df?at=gazebo9#Lplugins/LedPlugin.hhF22\" rel=\"nofollow\">https://bitbucket.org/tidota/gazebo/commits/4ca704daf47c913c2cc2a53f18d490a792a2c5df?at=gazebo9#Lplugins/LedPlugin.hhF22</a></p>", "type": "rendered"}, "created_on": "2018-07-18T20:24:48.254165+00:00", "user": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "inline": {}, "updated_on": "2018-07-18T20:24:48.316871+00:00", "type": "pullrequest_comment", "id": 70371297}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\n\u200c\r\n\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\n\u200c\r\n\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "72786dfbd2cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/72786dfbd2cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/72786dfbd2cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "97c14771a735", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/97c14771a735"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/97c14771a735"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "OPEN", "author": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "date": "2018-07-18T20:20:53.563054+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70360508.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70360508"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Could you add an entry in the Changelog, please?", "markup": "markdown", "html": "<p>Could you add an entry in the Changelog, please?</p>", "type": "rendered"}, "created_on": "2018-07-18T18:25:30.783779+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": "2018-07-18T18:25:30.793893+00:00", "type": "pullrequest_comment", "id": 70360508}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70359912.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70359912"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Could you add an example similar to what you did in `FlashLightPlugin`?", "markup": "markdown", "html": "<p>Could you add an example similar to what you did in <code>FlashLightPlugin</code>?</p>", "type": "rendered"}, "created_on": "2018-07-18T18:19:27.261091+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-18T18:19:27.269786+00:00", "type": "pullrequest_comment", "id": 70359912}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70359830.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70359830"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "**accesses**?", "markup": "markdown", "html": "<p><strong>accesses</strong>?</p>", "type": "rendered"}, "created_on": "2018-07-18T18:18:32.857344+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-18T18:18:32.865476+00:00", "type": "pullrequest_comment", "id": 70359830}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70358942.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70358942"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "**July 16**", "markup": "markdown", "html": "<p><strong>July 16</strong></p>", "type": "rendered"}, "created_on": "2018-07-18T18:09:14.923591+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-18T18:09:14.931501+00:00", "type": "pullrequest_comment", "id": 70358942}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70358870.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70358870"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "**July 16**", "markup": "markdown", "html": "<p><strong>July 16</strong></p>", "type": "rendered"}, "created_on": "2018-07-18T18:08:41.355293+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-18T18:08:41.366928+00:00", "type": "pullrequest_comment", "id": 70358870}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70358670.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70358670"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Do you need a `break` here for exit the `for` loop when the visual has been found?", "markup": "markdown", "html": "<p>Do you need a <code>break</code> here for exit the <code>for</code> loop when the visual has been found?</p>", "type": "rendered"}, "created_on": "2018-07-18T18:06:29.976643+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-18T18:06:29.983591+00:00", "type": "pullrequest_comment", "id": 70358670}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70358063.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70358063"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Maybe you could avoid this `else` branch by initializing the member variables with the default values. The same comment applies to `defaultEmmisiveColor`.", "markup": "markdown", "html": "<p>Maybe you could avoid this <code>else</code> branch by initializing the member variables with the default values. The same comment applies to <code>defaultEmmisiveColor</code>.</p>", "type": "rendered"}, "created_on": "2018-07-18T17:59:43.041333+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-18T17:59:43.048290+00:00", "type": "pullrequest_comment", "id": 70358063}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70357816.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70357816"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "I think this `include` is not needed.", "markup": "markdown", "html": "<p>I think this <code>include</code> is not needed.</p>", "type": "rendered"}, "created_on": "2018-07-18T17:57:07.567382+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2018-07-18T17:57:37.330467+00:00", "type": "pullrequest_comment", "id": 70357816}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70248431.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70248431"}}, "parent": {"id": 70223574, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70223574.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70223574"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "Oh, I see. If the old one is merged, I will consider making independent LED plugin.", "markup": "markdown", "html": "<p>Oh, I see. If the old one is merged, I will consider making independent LED plugin.</p>", "type": "rendered"}, "created_on": "2018-07-18T00:40:49.886104+00:00", "user": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "updated_on": "2018-07-18T00:40:49.938973+00:00", "type": "pullrequest_comment", "id": 70248431}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994/comments/70223574.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994/_/diff#comment-70223574"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}, "content": {"raw": "This changes the ABI of `FlashLightPlugin` by adding virtual functions\n\n* https://build.osrfoundation.org/job/gazebo-abichecker-any_to_any-xenial-amd64/658/API_5fABI_20report/\n\nthat is ok if we merge this before making another gazebo9 release, since `FlashLightPlugin` has not yet been released", "markup": "markdown", "html": "<p>This changes the ABI of <code>FlashLightPlugin</code> by adding virtual functions</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/job/gazebo-abichecker-any_to_any-xenial-amd64/658/API_5fABI_20report/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-abichecker-any_to_any-xenial-amd64/658/API_5fABI_20report/</a></li>\n</ul>\n<p>that is ok if we merge this before making another gazebo9 release, since <code>FlashLightPlugin</code> has not yet been released</p>", "type": "rendered"}, "created_on": "2018-07-17T18:48:23.740555+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-07-17T18:48:23.748443+00:00", "type": "pullrequest_comment", "id": 70223574}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\n\u200c\r\n\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\n\u200c\r\n\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "76458029277d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/76458029277d.json"}, "html": {"href": "#!/osrf/gazebo/commits/76458029277d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "afd5a3255620", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/afd5a3255620"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/afd5a3255620"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "OPEN", "author": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "date": "2018-07-17T01:27:02.952967+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\n\u200c\r\n\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "76458029277d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/76458029277d.json"}, "html": {"href": "#!/osrf/gazebo/commits/76458029277d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "afd5a3255620", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/afd5a3255620"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/afd5a3255620"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "OPEN", "author": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "date": "2018-07-17T01:26:06.626308+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "76458029277d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/76458029277d.json"}, "html": {"href": "#!/osrf/gazebo/commits/76458029277d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "afd5a3255620", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/afd5a3255620"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/afd5a3255620"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "OPEN", "author": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "date": "2018-07-17T01:25:32.081831+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}, {"update": {"description": "# Overview\r\n\r\n`LedPlugin` to blink a visual object, synchronizing the `FlashLightPlugin`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1622346296-led.gif)\r\nAnd an updated version of the `FlashLightPlugin` so it can switch colors of the light.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/4260459456-color_blocks.gif)\r\nIt accepts `<block>` element as a plugin parameter to define a light pattern. The example below defines that the light element \\(`link1/light_source` \\) casts red light for 0.6 sec, followed by 0.2 sec of green light and 0.5 sec of dim, and it repeats this pattern.\r\n\r\n    <plugin ... >\r\n      <light>\r\n        <id>link1/light_source</id>\r\n        <block>\r\n          <duration>0.6</duration>\r\n          <interval>0</interval>\r\n          <color>1 0 0</color>\r\n        </block>\r\n        <block>\r\n          <duration>0.2</duration>\r\n          <interval>0.5</interval>\r\n          <color>0 1 0</color>\r\n        </block>\r\n      </light>\r\n    </plugin>\r\n\r\n# Implementation of LedPlugin\r\n\r\nHere are details about the structure and implementation of `LedPlugin`.\r\n\r\n`LedPlugin` inherits the `FlashLightPlugin`. The following diagram shows the internal components.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1335009940-LED.png)\r\n`FlashLightPlugin` has a list of `FlashLightSetting` objects, each of which takes care of an individual light object. They call `Flash` and `Dim` functions which send a message to `~/light/modify` topic at a specified timing, i.e., duration and interval time.\r\n\r\n`LedPlugin` extends this structure and has a list of `LedSetting` objects which are descendants of `FlashLightSetting`. They override `Flash` and `Dim` functions to send a message to `~/visual` topic so a corresponding visual object can be updated synchronously.\r\n\r\n## Initialization of extended setting objects\r\n\r\nThe data inside `LedPlugin` and `FlashLightPlugin` are implemented in PIMPL, and they are invisible to each other. This causes a problem when a `FlashLightSetting` is extended. It needs to be instantiated in `LedPlugin` while the objects are stored inside `FlashLightPlugin`. Also an object needs to be initialized by data in each level.\r\n\r\nTo have `LedPlugin` hold an extension class of `FlashLightSetting`, it overrides two functions: `CreateSetting` and `InitSettingBySpecificData`.\r\n\r\n![](https://bitbucket.org/repo/oLe6g9a/images/1601523865-initLED.png)\r\nThe `Load` function of the plugin reads SDF data and creates a setting object for each light. \\(1. Call and 2. Instantiate in the diagram\\) It first calls `CreateSetting` function. This function is overridden and instantiates the corresponding class. That is,\r\n\r\n```c++\r\nstd::shared_ptr<FlashLightSetting> LedPlugin::CreateSetting(\r\n  const sdf::ElementPtr &_sdf,\r\n  const physics::ModelPtr &_model,\r\n  const common::Time &_currentTime)\r\n{\r\n  return std::make_shared<LedSetting>(_sdf, _model, _currentTime);\r\n}\r\n```\r\n\r\nAfter that, it calls `InitSettingBySpecificData` function, which initializes variables in `LedSetting`. It also calls the parent's function so those in `FlashLightSetting` are also initialized. \\(4. Call 5. Initialize 6. Initialize in the diagram\\)\r\n\r\nP.S. I am sorry for this complicated structure. I appreciate any comments and suggestions!", "title": "LED plugin and color blocks to FlashLight Plugin", "destination": {"commit": {"hash": "76458029277d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/76458029277d.json"}, "html": {"href": "#!/osrf/gazebo/commits/76458029277d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "afd5a3255620", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo/commit/afd5a3255620"}, "html": {"href": "https://bitbucket.org/tidota/gazebo/commits/afd5a3255620"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/tidota/gazebo"}, "html": {"href": "https://bitbucket.org/tidota/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9b232d84-6bca-45a4-84c7-bfa140709a88}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "tidota/gazebo", "uuid": "{9b232d84-6bca-45a4-84c7-bfa140709a88}"}, "branch": {"name": "led_plugin"}}, "state": "OPEN", "author": {"display_name": "Tetsuya Idota", "uuid": "{e3645666-978a-455a-85c4-dcc342a8d822}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D"}, "html": {"href": "https://bitbucket.org/%7Be3645666-978a-455a-85c4-dcc342a8d822%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8cb890d7583a1f6b8a01419ebed6ac26d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTI-1.png"}}, "nickname": "tidota", "type": "user", "account_id": "5aa97fa8e78b8c2a7c886fd3"}, "date": "2018-07-17T01:25:32.046356+00:00"}, "pull_request": {"type": "pullrequest", "id": 2994, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2994.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2994"}}, "title": "LED plugin and color blocks to FlashLight Plugin"}}]}