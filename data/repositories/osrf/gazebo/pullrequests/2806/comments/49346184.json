{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2806/comments/49346184.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:ac6199712cb8..5d175791f71e?path=worlds%2Flensflare_plugin.world"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2806/_/diff#comment-49346184"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2806, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2806.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2806"}}, "title": "Add camera lens flare effect"}, "content": {"raw": "Suggestion, add wideangle and multi cameras to the example too. Here's what I've been testing with for example:\n\n~~~\n    <!-- wide-angle camera model with lens flare plugin -->\n    <model name=\"wide_angle_camera_lensflare\">\n      <static>true</static>\n      <pose>0 2 0.05 0 0 0</pose>\n      <link name=\"link\">\n        <visual name=\"visual\">\n          <geometry>\n            <box>\n              <size>0.1 0.1 0.1</size>\n            </box>\n          </geometry>\n        </visual>\n        <sensor name=\"camera\" type=\"wideanglecamera\">\n          <camera>\n            <horizontal_fov>1.047</horizontal_fov>\n            <image>\n              <width>320</width>\n              <height>240</height>\n            </image>\n            <clip>\n              <near>0.1</near>\n              <far>100</far>\n            </clip>\n            <lens>\n              <type>gnomonical</type>\n              <scale_to_hfov>true</scale_to_hfov>\n              <cutoff_angle>1.5707</cutoff_angle>\n              <env_texture_size>512</env_texture_size>\n            </lens>\n          </camera>\n          <always_on>1</always_on>\n          <update_rate>30</update_rate>\n          <visualize>true</visualize>\n          <plugin name=\"lensflare\" filename=\"libLensFlareSensorPlugin.so\"/>\n        </sensor>\n      </link>\n    </model>\n\n    <!-- multi-camera model with lens flare plugin -->\n    <model name=\"multi_camera_lensflare\">\n      <static>true</static>\n      <pose>0 4 0.05 0 0 0</pose>\n      <link name=\"link\">\n        <visual name=\"visual\">\n          <geometry>\n            <box>\n              <size>0.1 0.1 0.1</size>\n            </box>\n          </geometry>\n        </visual>\n        <sensor type=\"multicamera\" name=\"stereo_camera\">\n          <update_rate>30.0</update_rate>\n          <camera name=\"left\">\n            <horizontal_fov>1.3962634</horizontal_fov>\n            <image>\n              <width>800</width>\n              <height>800</height>\n              <format>R8G8B8</format>\n            </image>\n            <clip>\n              <near>0.02</near>\n              <far>300</far>\n            </clip>\n            <noise>\n              <type>gaussian</type>\n              <mean>0.0</mean>\n              <stddev>0.007</stddev>\n            </noise>\n          </camera>\n          <camera name=\"right\">\n            <pose>0 -0.07 0 0 0 0</pose>\n            <horizontal_fov>1.3962634</horizontal_fov>\n            <image>\n              <width>800</width>\n              <height>800</height>\n              <format>R8G8B8</format>\n            </image>\n            <clip>\n              <near>0.02</near>\n              <far>300</far>\n            </clip>\n            <noise>\n              <type>gaussian</type>\n              <mean>0.0</mean>\n              <stddev>0.007</stddev>\n            </noise>\n          </camera>\n          <visualize>true</visualize>\n          <plugin name=\"lensflare\" filename=\"libLensFlareSensorPlugin.so\"/>\n        </sensor>\n      </link>\n    </model>\n~~~", "markup": "markdown", "html": "<p>Suggestion, add wideangle and multi cameras to the example too. Here's what I've been testing with for example:</p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"c\">&lt;!-- wide-angle camera model with lens flare plugin --&gt;</span>\n    <span class=\"nt\">&lt;model</span> <span class=\"na\">name=</span><span class=\"s\">&quot;wide_angle_camera_lensflare&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;static&gt;</span>true<span class=\"nt\">&lt;/static&gt;</span>\n      <span class=\"nt\">&lt;pose&gt;</span>0 2 0.05 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n      <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;link&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&quot;visual&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;geometry&gt;</span>\n            <span class=\"nt\">&lt;box&gt;</span>\n              <span class=\"nt\">&lt;size&gt;</span>0.1 0.1 0.1<span class=\"nt\">&lt;/size&gt;</span>\n            <span class=\"nt\">&lt;/box&gt;</span>\n          <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/visual&gt;</span>\n        <span class=\"nt\">&lt;sensor</span> <span class=\"na\">name=</span><span class=\"s\">&quot;camera&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;wideanglecamera&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;camera&gt;</span>\n            <span class=\"nt\">&lt;horizontal_fov&gt;</span>1.047<span class=\"nt\">&lt;/horizontal_fov&gt;</span>\n            <span class=\"nt\">&lt;image&gt;</span>\n              <span class=\"nt\">&lt;width&gt;</span>320<span class=\"nt\">&lt;/width&gt;</span>\n              <span class=\"nt\">&lt;height&gt;</span>240<span class=\"nt\">&lt;/height&gt;</span>\n            <span class=\"nt\">&lt;/image&gt;</span>\n            <span class=\"nt\">&lt;clip&gt;</span>\n              <span class=\"nt\">&lt;near&gt;</span>0.1<span class=\"nt\">&lt;/near&gt;</span>\n              <span class=\"nt\">&lt;far&gt;</span>100<span class=\"nt\">&lt;/far&gt;</span>\n            <span class=\"nt\">&lt;/clip&gt;</span>\n            <span class=\"nt\">&lt;lens&gt;</span>\n              <span class=\"nt\">&lt;type&gt;</span>gnomonical<span class=\"nt\">&lt;/type&gt;</span>\n              <span class=\"nt\">&lt;scale_to_hfov&gt;</span>true<span class=\"nt\">&lt;/scale_to_hfov&gt;</span>\n              <span class=\"nt\">&lt;cutoff_angle&gt;</span>1.5707<span class=\"nt\">&lt;/cutoff_angle&gt;</span>\n              <span class=\"nt\">&lt;env_texture_size&gt;</span>512<span class=\"nt\">&lt;/env_texture_size&gt;</span>\n            <span class=\"nt\">&lt;/lens&gt;</span>\n          <span class=\"nt\">&lt;/camera&gt;</span>\n          <span class=\"nt\">&lt;always_on&gt;</span>1<span class=\"nt\">&lt;/always_on&gt;</span>\n          <span class=\"nt\">&lt;update_rate&gt;</span>30<span class=\"nt\">&lt;/update_rate&gt;</span>\n          <span class=\"nt\">&lt;visualize&gt;</span>true<span class=\"nt\">&lt;/visualize&gt;</span>\n          <span class=\"nt\">&lt;plugin</span> <span class=\"na\">name=</span><span class=\"s\">&quot;lensflare&quot;</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;libLensFlareSensorPlugin.so&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/sensor&gt;</span>\n      <span class=\"nt\">&lt;/link&gt;</span>\n    <span class=\"nt\">&lt;/model&gt;</span>\n\n    <span class=\"c\">&lt;!-- multi-camera model with lens flare plugin --&gt;</span>\n    <span class=\"nt\">&lt;model</span> <span class=\"na\">name=</span><span class=\"s\">&quot;multi_camera_lensflare&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;static&gt;</span>true<span class=\"nt\">&lt;/static&gt;</span>\n      <span class=\"nt\">&lt;pose&gt;</span>0 4 0.05 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n      <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;link&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&quot;visual&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;geometry&gt;</span>\n            <span class=\"nt\">&lt;box&gt;</span>\n              <span class=\"nt\">&lt;size&gt;</span>0.1 0.1 0.1<span class=\"nt\">&lt;/size&gt;</span>\n            <span class=\"nt\">&lt;/box&gt;</span>\n          <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/visual&gt;</span>\n        <span class=\"nt\">&lt;sensor</span> <span class=\"na\">type=</span><span class=\"s\">&quot;multicamera&quot;</span> <span class=\"na\">name=</span><span class=\"s\">&quot;stereo_camera&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;update_rate&gt;</span>30.0<span class=\"nt\">&lt;/update_rate&gt;</span>\n          <span class=\"nt\">&lt;camera</span> <span class=\"na\">name=</span><span class=\"s\">&quot;left&quot;</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;horizontal_fov&gt;</span>1.3962634<span class=\"nt\">&lt;/horizontal_fov&gt;</span>\n            <span class=\"nt\">&lt;image&gt;</span>\n              <span class=\"nt\">&lt;width&gt;</span>800<span class=\"nt\">&lt;/width&gt;</span>\n              <span class=\"nt\">&lt;height&gt;</span>800<span class=\"nt\">&lt;/height&gt;</span>\n              <span class=\"nt\">&lt;format&gt;</span>R8G8B8<span class=\"nt\">&lt;/format&gt;</span>\n            <span class=\"nt\">&lt;/image&gt;</span>\n            <span class=\"nt\">&lt;clip&gt;</span>\n              <span class=\"nt\">&lt;near&gt;</span>0.02<span class=\"nt\">&lt;/near&gt;</span>\n              <span class=\"nt\">&lt;far&gt;</span>300<span class=\"nt\">&lt;/far&gt;</span>\n            <span class=\"nt\">&lt;/clip&gt;</span>\n            <span class=\"nt\">&lt;noise&gt;</span>\n              <span class=\"nt\">&lt;type&gt;</span>gaussian<span class=\"nt\">&lt;/type&gt;</span>\n              <span class=\"nt\">&lt;mean&gt;</span>0.0<span class=\"nt\">&lt;/mean&gt;</span>\n              <span class=\"nt\">&lt;stddev&gt;</span>0.007<span class=\"nt\">&lt;/stddev&gt;</span>\n            <span class=\"nt\">&lt;/noise&gt;</span>\n          <span class=\"nt\">&lt;/camera&gt;</span>\n          <span class=\"nt\">&lt;camera</span> <span class=\"na\">name=</span><span class=\"s\">&quot;right&quot;</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;pose&gt;</span>0 -0.07 0 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n            <span class=\"nt\">&lt;horizontal_fov&gt;</span>1.3962634<span class=\"nt\">&lt;/horizontal_fov&gt;</span>\n            <span class=\"nt\">&lt;image&gt;</span>\n              <span class=\"nt\">&lt;width&gt;</span>800<span class=\"nt\">&lt;/width&gt;</span>\n              <span class=\"nt\">&lt;height&gt;</span>800<span class=\"nt\">&lt;/height&gt;</span>\n              <span class=\"nt\">&lt;format&gt;</span>R8G8B8<span class=\"nt\">&lt;/format&gt;</span>\n            <span class=\"nt\">&lt;/image&gt;</span>\n            <span class=\"nt\">&lt;clip&gt;</span>\n              <span class=\"nt\">&lt;near&gt;</span>0.02<span class=\"nt\">&lt;/near&gt;</span>\n              <span class=\"nt\">&lt;far&gt;</span>300<span class=\"nt\">&lt;/far&gt;</span>\n            <span class=\"nt\">&lt;/clip&gt;</span>\n            <span class=\"nt\">&lt;noise&gt;</span>\n              <span class=\"nt\">&lt;type&gt;</span>gaussian<span class=\"nt\">&lt;/type&gt;</span>\n              <span class=\"nt\">&lt;mean&gt;</span>0.0<span class=\"nt\">&lt;/mean&gt;</span>\n              <span class=\"nt\">&lt;stddev&gt;</span>0.007<span class=\"nt\">&lt;/stddev&gt;</span>\n            <span class=\"nt\">&lt;/noise&gt;</span>\n          <span class=\"nt\">&lt;/camera&gt;</span>\n          <span class=\"nt\">&lt;visualize&gt;</span>true<span class=\"nt\">&lt;/visualize&gt;</span>\n          <span class=\"nt\">&lt;plugin</span> <span class=\"na\">name=</span><span class=\"s\">&quot;lensflare&quot;</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;libLensFlareSensorPlugin.so&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/sensor&gt;</span>\n      <span class=\"nt\">&lt;/link&gt;</span>\n    <span class=\"nt\">&lt;/model&gt;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-11-10T23:26:26.249991+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": null, "from": null, "outdated": true, "path": "worlds/lensflare_plugin.world"}, "updated_on": "2017-11-10T23:26:26.252322+00:00", "type": "pullrequest_comment", "id": 49346184}