{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2710/comments/40448877.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2710/_/diff#comment-40448877"}}, "parent": {"id": 39306053, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2710/comments/39306053.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2710/_/diff#comment-39306053"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2710, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2710.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2710"}}, "title": "Fix disabling mesh shadows"}, "content": {"raw": "Finally got the tests to pass. The problem only occurs with ogre 1.9 and when running the `INTEGRATION_visual` test without installing gazebo (to reproduce, remove `[install_prefix]/share/gazebo-7`). The test loads `rtshaderlib` instead of of ogre1.9-compatible version `rtshaderlib150` so the shadows are not generated. The problem does not occur if gazebo is installed because our [cmake](#!/osrf/gazebo/src/c84f221dc301830070c384a5b7512246c13e5b52/media/CMakeLists.txt?at=mesh_shadow_test_7&fileviewer=file-view-default#CMakeLists.txt-9) checks the ogre version and installs the correct version `rtshaderlib`  to the install path. \n\nFixed by [these changes in RenderEngine.cc](#!/osrf/gazebo/pull-requests/2710/fix-disabling-mesh-shadows/diff#Lgazebo/rendering/RenderEngine.ccT593)\n\njenkins:\n\n[xenial-gpu](https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/233/) - ok\n\n[homebrew](https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-homebrew-amd64/1139/) - ok\n\n[abi](https://build.osrfoundation.org/job/gazebo-abichecker-any_to_any-xenial-amd64/351/API_ABI_report/) - ok\n\n", "markup": "markdown", "html": "<p>Finally got the tests to pass. The problem only occurs with ogre 1.9 and when running the <code>INTEGRATION_visual</code> test without installing gazebo (to reproduce, remove <code>[install_prefix]/share/gazebo-7</code>). The test loads <code>rtshaderlib</code> instead of of ogre1.9-compatible version <code>rtshaderlib150</code> so the shadows are not generated. The problem does not occur if gazebo is installed because our <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/c84f221dc301830070c384a5b7512246c13e5b52/media/CMakeLists.txt?at=mesh_shadow_test_7&amp;fileviewer=file-view-default#CMakeLists.txt-9\" rel=\"nofollow\">cmake</a> checks the ogre version and installs the correct version <code>rtshaderlib</code>  to the install path. </p>\n<p>Fixed by <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/pull-requests/2710/fix-disabling-mesh-shadows/diff#Lgazebo/rendering/RenderEngine.ccT593\" rel=\"nofollow\">these changes in RenderEngine.cc</a></p>\n<p>jenkins:</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-xenial-amd64-gpu-nvidia/233/\" rel=\"nofollow\">xenial-gpu</a> - ok</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-ci-pr_any-homebrew-amd64/1139/\" rel=\"nofollow\">homebrew</a> - ok</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-abichecker-any_to_any-xenial-amd64/351/API_ABI_report/\" rel=\"nofollow\">abi</a> - ok</p>", "type": "rendered"}, "created_on": "2017-07-10T22:39:03.836541+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2017-07-10T22:39:03.839522+00:00", "type": "pullrequest_comment", "id": 40448877}