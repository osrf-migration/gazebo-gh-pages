{"rendered": {"description": {"raw": "Issue #236 had been fixed but regressed and wasn't captured by the current test. I've updated the test to capture the regression and fixed the problem (Sensors stopped updating after Reset World). The main issue was that `SensorManager::SimTimeEventHandler` (used in [SensorContainer::RunLoop](#!/osrf/gazebo/src/9ad03400ac953b5702ba8181d54f2fd1aab6f566/gazebo/sensors/SensorManager.cc#cl-513)) wasn't responding to the reset time signals. So I add a `this->runCondition.notify_one()` to `SensorContainer::ResetLastUpdateTimes` and added a mutex for good measure. The updated test now passes.\r\n\r\nWhile I was fixing tests, I noticed that the contact_sensor test has been failing 100% of the time (#796). The test involves placing a sphere on top of a box, and for some reason this causes the ODE contact to be very noisy. I changed the `min_depth` on the box to 5 mm, and it is fixed.", "markup": "markdown", "html": "<p>Issue <a href=\"#!/osrf/gazebo/issues/236/race-condition-in-time-reset-for-sensors\" rel=\"nofollow\" title=\"Race condition in time reset for sensors\" class=\"ap-connect-link\"><s>#236</s></a> had been fixed but regressed and wasn't captured by the current test. I've updated the test to capture the regression and fixed the problem (Sensors stopped updating after Reset World). The main issue was that <code>SensorManager::SimTimeEventHandler</code> (used in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/9ad03400ac953b5702ba8181d54f2fd1aab6f566/gazebo/sensors/SensorManager.cc#cl-513\" rel=\"nofollow\">SensorContainer::RunLoop</a>) wasn't responding to the reset time signals. So I add a <code>this-&gt;runCondition.notify_one()</code> to <code>SensorContainer::ResetLastUpdateTimes</code> and added a mutex for good measure. The updated test now passes.</p>\n<p>While I was fixing tests, I noticed that the contact_sensor test has been failing 100% of the time (<a href=\"#!/osrf/gazebo/issues/796/contactsensorstacktestode-test-failures\" rel=\"nofollow\" title=\"ContactSensor.StackTestODE test failures\" class=\"ap-connect-link\"><s>#796</s></a>). The test involves placing a sphere on top of a box, and for some reason this causes the ODE contact to be very noisy. I changed the <code>min_depth</code> on the box to 5 mm, and it is fixed.</p>", "type": "rendered"}, "title": {"raw": "Fix regression of #236, also contact_sensor test #796", "markup": "markdown", "html": "<p>Fix regression of <a href=\"#!/osrf/gazebo/issues/236/race-condition-in-time-reset-for-sensors\" rel=\"nofollow\" title=\"Race condition in time reset for sensors\" class=\"ap-connect-link\"><s>#236</s></a>, also contact_sensor test <a href=\"#!/osrf/gazebo/issues/796/contactsensorstacktestode-test-failures\" rel=\"nofollow\" title=\"ContactSensor.StackTestODE test failures\" class=\"ap-connect-link\"><s>#796</s></a></p>", "type": "rendered"}}, "type": "pullrequest", "description": "Issue #236 had been fixed but regressed and wasn't captured by the current test. I've updated the test to capture the regression and fixed the problem (Sensors stopped updating after Reset World). The main issue was that `SensorManager::SimTimeEventHandler` (used in [SensorContainer::RunLoop](#!/osrf/gazebo/src/9ad03400ac953b5702ba8181d54f2fd1aab6f566/gazebo/sensors/SensorManager.cc#cl-513)) wasn't responding to the reset time signals. So I add a `this->runCondition.notify_one()` to `SensorContainer::ResetLastUpdateTimes` and added a mutex for good measure. The updated test now passes.\r\n\r\nWhile I was fixing tests, I noticed that the contact_sensor test has been failing 100% of the time (#796). The test involves placing a sphere on top of a box, and for some reason this causes the ODE contact to be very noisy. I changed the `min_depth` on the box to 5 mm, and it is fixed.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/685/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diffstat/osrf/gazebo:f011853533af%0D6bdf22079f13?from_pullrequest_id=685"}, "commits": {"href": "data/repositories/osrf/gazebo/pullrequests/685/commits.json"}, "self": {"href": "data/repositories/osrf/gazebo/pullrequests/685.json"}, "comments": {"href": "data/repositories/osrf/gazebo/pullrequests/685/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/685/merge"}, "html": {"href": "#!/osrf/gazebo/pull-requests/685"}, "activity": {"href": "data/repositories/osrf/gazebo/pullrequests/685/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:f011853533af%0D6bdf22079f13?from_pullrequest_id=685"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/685/approve"}, "statuses": {"href": "data/repositories/osrf/gazebo/pullrequests/685/statuses_page=1.json"}}, "title": "Fix regression of #236, also contact_sensor test #796", "close_source_branch": true, "reviewers": [], "id": 685, "destination": {"commit": {"hash": "6bdf22079f13", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/6bdf22079f13.json"}, "html": {"href": "#!/osrf/gazebo/commits/6bdf22079f13"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "created_on": "2013-08-29T23:31:42.869994+00:00", "summary": {"raw": "Issue #236 had been fixed but regressed and wasn't captured by the current test. I've updated the test to capture the regression and fixed the problem (Sensors stopped updating after Reset World). The main issue was that `SensorManager::SimTimeEventHandler` (used in [SensorContainer::RunLoop](#!/osrf/gazebo/src/9ad03400ac953b5702ba8181d54f2fd1aab6f566/gazebo/sensors/SensorManager.cc#cl-513)) wasn't responding to the reset time signals. So I add a `this->runCondition.notify_one()` to `SensorContainer::ResetLastUpdateTimes` and added a mutex for good measure. The updated test now passes.\r\n\r\nWhile I was fixing tests, I noticed that the contact_sensor test has been failing 100% of the time (#796). The test involves placing a sphere on top of a box, and for some reason this causes the ODE contact to be very noisy. I changed the `min_depth` on the box to 5 mm, and it is fixed.", "markup": "markdown", "html": "<p>Issue <a href=\"#!/osrf/gazebo/issues/236/race-condition-in-time-reset-for-sensors\" rel=\"nofollow\" title=\"Race condition in time reset for sensors\" class=\"ap-connect-link\"><s>#236</s></a> had been fixed but regressed and wasn't captured by the current test. I've updated the test to capture the regression and fixed the problem (Sensors stopped updating after Reset World). The main issue was that <code>SensorManager::SimTimeEventHandler</code> (used in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/9ad03400ac953b5702ba8181d54f2fd1aab6f566/gazebo/sensors/SensorManager.cc#cl-513\" rel=\"nofollow\">SensorContainer::RunLoop</a>) wasn't responding to the reset time signals. So I add a <code>this-&gt;runCondition.notify_one()</code> to <code>SensorContainer::ResetLastUpdateTimes</code> and added a mutex for good measure. The updated test now passes.</p>\n<p>While I was fixing tests, I noticed that the contact_sensor test has been failing 100% of the time (<a href=\"#!/osrf/gazebo/issues/796/contactsensorstacktestode-test-failures\" rel=\"nofollow\" title=\"ContactSensor.StackTestODE test failures\" class=\"ap-connect-link\"><s>#796</s></a>). The test involves placing a sphere on top of a box, and for some reason this causes the ODE contact to be very noisy. I changed the <code>min_depth</code> on the box to 5 mm, and it is fixed.</p>", "type": "rendered"}, "source": {"commit": {"hash": "5a4fef46a250", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/5a4fef46a250.json"}, "html": {"href": "#!/osrf/gazebo/commits/5a4fef46a250"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "issue_236_regression"}}, "comment_count": 10, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2013-09-05T21:47:35.578928+00:00", "type": "participant", "approved": true, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, {"role": "PARTICIPANT", "participated_on": "2013-09-05T23:00:21.124604+00:00", "type": "participant", "approved": false, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "PARTICIPANT", "participated_on": "2013-09-05T18:54:43.766430+00:00", "type": "participant", "approved": false, "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}}, {"role": "PARTICIPANT", "participated_on": "2013-09-04T18:59:49.692906+00:00", "type": "participant", "approved": true, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}], "reason": "", "updated_on": "2013-09-05T23:04:15.987139+00:00", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "merge_commit": {"hash": "f011853533af", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/f011853533af.json"}, "html": {"href": "#!/osrf/gazebo/commits/f011853533af"}}}, "closed_by": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}