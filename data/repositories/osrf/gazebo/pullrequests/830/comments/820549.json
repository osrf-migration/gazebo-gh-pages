{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/830/comments/820549.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/830/_/diff#comment-820549"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 830, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/830.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/830"}}, "title": "Add ability to control camera via messages"}, "content": {"raw": "The integration test is failing:\n\n```\n#!c++\n\n/home/caguero/workspace/gazebo/test/integration/camera_follow.cc:77: Failure\nThe difference between camera->GetWorldPose().pos.x and 9.9 is 5.2735470771789554, which exceeds 0.1, where\ncamera->GetWorldPose().pos.x evaluates to 4.6264529228210449,\n9.9 evaluates to 9.9000000000000004, and\n0.1 evaluates to 0.10000000000000001.\n/home/caguero/workspace/gazebo/test/integration/camera_follow.cc:78: Failure\nThe difference between camera->GetWorldPose().pos.y and 9.9 is 5.2735470771789554, which exceeds 0.1, where\ncamera->GetWorldPose().pos.y evaluates to 4.6264529228210449,\n9.9 evaluates to 9.9000000000000004, and\n0.1 evaluates to 0.10000000000000001.\n[  FAILED  ] CameraFollow.Follow (2362 ms)\n[----------] 1 test from CameraFollow (2362 ms total)\n\n[----------] Global test environment tear-down\n[==========] 1 test from 1 test case ran. (2362 ms total)\n[  PASSED  ] 0 tests.\n[  FAILED  ] 1 test, listed below:\n[  FAILED  ] CameraFollow.Follow\n\n 1 FAILED TEST\n\n```\nIt seems that the camera does not stay just above the object that followed. I believe the camera stays around ~5 meters/units from the object.", "markup": "markdown", "html": "<p>The integration test is failing:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">caguero</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">integration</span><span class=\"o\">/</span><span class=\"n\">camera_follow</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">77</span><span class=\"o\">:</span> <span class=\"n\">Failure</span>\n<span class=\"n\">The</span> <span class=\"n\">difference</span> <span class=\"n\">between</span> <span class=\"n\">camera</span><span class=\"o\">-&gt;</span><span class=\"n\">GetWorldPose</span><span class=\"p\">().</span><span class=\"n\">pos</span><span class=\"p\">.</span><span class=\"n\">x</span> <span class=\"n\">and</span> <span class=\"mf\">9.9</span> <span class=\"n\">is</span> <span class=\"mf\">5.2735470771789554</span><span class=\"p\">,</span> <span class=\"n\">which</span> <span class=\"n\">exceeds</span> <span class=\"mf\">0.1</span><span class=\"p\">,</span> <span class=\"n\">where</span>\n<span class=\"n\">camera</span><span class=\"o\">-&gt;</span><span class=\"n\">GetWorldPose</span><span class=\"p\">().</span><span class=\"n\">pos</span><span class=\"p\">.</span><span class=\"n\">x</span> <span class=\"n\">evaluates</span> <span class=\"n\">to</span> <span class=\"mf\">4.6264529228210449</span><span class=\"p\">,</span>\n<span class=\"mf\">9.9</span> <span class=\"n\">evaluates</span> <span class=\"n\">to</span> <span class=\"mf\">9.9000000000000004</span><span class=\"p\">,</span> <span class=\"n\">and</span>\n<span class=\"mf\">0.1</span> <span class=\"n\">evaluates</span> <span class=\"n\">to</span> <span class=\"mf\">0.10000000000000001</span><span class=\"p\">.</span>\n<span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">caguero</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">integration</span><span class=\"o\">/</span><span class=\"n\">camera_follow</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">78</span><span class=\"o\">:</span> <span class=\"n\">Failure</span>\n<span class=\"n\">The</span> <span class=\"n\">difference</span> <span class=\"n\">between</span> <span class=\"n\">camera</span><span class=\"o\">-&gt;</span><span class=\"n\">GetWorldPose</span><span class=\"p\">().</span><span class=\"n\">pos</span><span class=\"p\">.</span><span class=\"n\">y</span> <span class=\"n\">and</span> <span class=\"mf\">9.9</span> <span class=\"n\">is</span> <span class=\"mf\">5.2735470771789554</span><span class=\"p\">,</span> <span class=\"n\">which</span> <span class=\"n\">exceeds</span> <span class=\"mf\">0.1</span><span class=\"p\">,</span> <span class=\"n\">where</span>\n<span class=\"n\">camera</span><span class=\"o\">-&gt;</span><span class=\"n\">GetWorldPose</span><span class=\"p\">().</span><span class=\"n\">pos</span><span class=\"p\">.</span><span class=\"n\">y</span> <span class=\"n\">evaluates</span> <span class=\"n\">to</span> <span class=\"mf\">4.6264529228210449</span><span class=\"p\">,</span>\n<span class=\"mf\">9.9</span> <span class=\"n\">evaluates</span> <span class=\"n\">to</span> <span class=\"mf\">9.9000000000000004</span><span class=\"p\">,</span> <span class=\"n\">and</span>\n<span class=\"mf\">0.1</span> <span class=\"n\">evaluates</span> <span class=\"n\">to</span> <span class=\"mf\">0.10000000000000001</span><span class=\"p\">.</span>\n<span class=\"p\">[</span>  <span class=\"n\">FAILED</span>  <span class=\"p\">]</span> <span class=\"n\">CameraFollow</span><span class=\"p\">.</span><span class=\"n\">Follow</span> <span class=\"p\">(</span><span class=\"mi\">2362</span> <span class=\"n\">ms</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"o\">----------</span><span class=\"p\">]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"n\">CameraFollow</span> <span class=\"p\">(</span><span class=\"mi\">2362</span> <span class=\"n\">ms</span> <span class=\"n\">total</span><span class=\"p\">)</span>\n\n<span class=\"p\">[</span><span class=\"o\">----------</span><span class=\"p\">]</span> <span class=\"n\">Global</span> <span class=\"n\">test</span> <span class=\"n\">environment</span> <span class=\"n\">tear</span><span class=\"o\">-</span><span class=\"n\">down</span>\n<span class=\"p\">[</span><span class=\"o\">==========</span><span class=\"p\">]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"k\">case</span> <span class=\"n\">ran</span><span class=\"p\">.</span> <span class=\"p\">(</span><span class=\"mi\">2362</span> <span class=\"n\">ms</span> <span class=\"n\">total</span><span class=\"p\">)</span>\n<span class=\"p\">[</span>  <span class=\"n\">PASSED</span>  <span class=\"p\">]</span> <span class=\"mi\">0</span> <span class=\"n\">tests</span><span class=\"p\">.</span>\n<span class=\"p\">[</span>  <span class=\"n\">FAILED</span>  <span class=\"p\">]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span><span class=\"p\">,</span> <span class=\"n\">listed</span> <span class=\"nl\">below</span><span class=\"p\">:</span>\n<span class=\"p\">[</span>  <span class=\"n\">FAILED</span>  <span class=\"p\">]</span> <span class=\"n\">CameraFollow</span><span class=\"p\">.</span><span class=\"n\">Follow</span>\n\n <span class=\"mi\">1</span> <span class=\"n\">FAILED</span> <span class=\"n\">TEST</span>\n</pre></div>\n\n\n<p>It seems that the camera does not stay just above the object that followed. I believe the camera stays around ~5 meters/units from the object.</p>", "type": "rendered"}, "created_on": "2013-11-15T00:45:15.514022+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": "2013-11-15T00:45:15.522275+00:00", "type": "pullrequest_comment", "id": 820549}