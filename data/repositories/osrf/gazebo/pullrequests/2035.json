{"rendered": {"description": {"raw": "This PR fixes the following test failures on homebrew:\r\n\r\n- UNIT_COMVisual_TEST\r\n\r\n- UNIT_JointVisual_TEST\r\n\r\n- UNIT_LinkFrameVisual_TEST\r\n\r\n- UNIT_SelectionObj_TEST\r\n\r\n- UNIT_SonarVisual_TEST\r\n\r\n- UNIT_Visual_TEST\r\n\r\nAfter trying different approaches, I ended up with a fix that adds the `rendering::load` call to tests that need rendering to be run on the same thread as the test itself. \r\n\r\nI did not make this the default, e.g. by introducing the call in ServerFixture like how it's done in [QTestFixture](#!/osrf/gazebo/src/edf9aedde3dc5ec9b68403651a2f55493b01ded0/gazebo/gui/QTestFixture.cc?at=default&fileviewer=file-view-default#QTestFixture.cc-75), since a few sensor tests need rendering to be run in the server thread and not the test thread.\r\n\r\n[example jenkins homebrew test report](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/691/testReport/) - various `UNIT_*Visual_TEST` test failures\r\n\r\n[new homebrew test result](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/692/testReport/) - tests pass\r\n\r\n\r\n", "markup": "markdown", "html": "<p>This PR fixes the following test failures on homebrew:</p>\n<ul>\n<li>\n<p>UNIT_COMVisual_TEST</p>\n</li>\n<li>\n<p>UNIT_JointVisual_TEST</p>\n</li>\n<li>\n<p>UNIT_LinkFrameVisual_TEST</p>\n</li>\n<li>\n<p>UNIT_SelectionObj_TEST</p>\n</li>\n<li>\n<p>UNIT_SonarVisual_TEST</p>\n</li>\n<li>\n<p>UNIT_Visual_TEST</p>\n</li>\n</ul>\n<p>After trying different approaches, I ended up with a fix that adds the <code>rendering::load</code> call to tests that need rendering to be run on the same thread as the test itself. </p>\n<p>I did not make this the default, e.g. by introducing the call in ServerFixture like how it's done in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/edf9aedde3dc5ec9b68403651a2f55493b01ded0/gazebo/gui/QTestFixture.cc?at=default&amp;fileviewer=file-view-default#QTestFixture.cc-75\" rel=\"nofollow\">QTestFixture</a>, since a few sensor tests need rendering to be run in the server thread and not the test thread.</p>\n<p><a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/691/testReport/\" rel=\"nofollow\">example jenkins homebrew test report</a> - various <code>UNIT_*Visual_TEST</code> test failures</p>\n<p><a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/692/testReport/\" rel=\"nofollow\">new homebrew test result</a> - tests pass</p>", "type": "rendered"}, "title": {"raw": "Fix rendering test failures on OSX", "markup": "markdown", "html": "<p>Fix rendering test failures on OSX</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This PR fixes the following test failures on homebrew:\r\n\r\n- UNIT_COMVisual_TEST\r\n\r\n- UNIT_JointVisual_TEST\r\n\r\n- UNIT_LinkFrameVisual_TEST\r\n\r\n- UNIT_SelectionObj_TEST\r\n\r\n- UNIT_SonarVisual_TEST\r\n\r\n- UNIT_Visual_TEST\r\n\r\nAfter trying different approaches, I ended up with a fix that adds the `rendering::load` call to tests that need rendering to be run on the same thread as the test itself. \r\n\r\nI did not make this the default, e.g. by introducing the call in ServerFixture like how it's done in [QTestFixture](#!/osrf/gazebo/src/edf9aedde3dc5ec9b68403651a2f55493b01ded0/gazebo/gui/QTestFixture.cc?at=default&fileviewer=file-view-default#QTestFixture.cc-75), since a few sensor tests need rendering to be run in the server thread and not the test thread.\r\n\r\n[example jenkins homebrew test report](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/691/testReport/) - various `UNIT_*Visual_TEST` test failures\r\n\r\n[new homebrew test result](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/692/testReport/) - tests pass\r\n\r\n\r\n", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2035/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diffstat/osrf/gazebo:da7701c00bdb%0Dcc62cd75d213?from_pullrequest_id=2035"}, "commits": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/commits.json"}, "self": {"href": "data/repositories/osrf/gazebo/pullrequests/2035.json"}, "comments": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2035/merge"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2035"}, "activity": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:da7701c00bdb%0Dcc62cd75d213?from_pullrequest_id=2035"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/2035/approve"}, "statuses": {"href": "data/repositories/osrf/gazebo/pullrequests/2035/statuses_page=1.json"}}, "title": "Fix rendering test failures on OSX", "close_source_branch": true, "reviewers": [], "id": 2035, "destination": {"commit": {"hash": "cc62cd75d213", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/cc62cd75d213.json"}, "html": {"href": "#!/osrf/gazebo/commits/cc62cd75d213"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "created_on": "2015-12-11T17:58:43.744738+00:00", "summary": {"raw": "This PR fixes the following test failures on homebrew:\r\n\r\n- UNIT_COMVisual_TEST\r\n\r\n- UNIT_JointVisual_TEST\r\n\r\n- UNIT_LinkFrameVisual_TEST\r\n\r\n- UNIT_SelectionObj_TEST\r\n\r\n- UNIT_SonarVisual_TEST\r\n\r\n- UNIT_Visual_TEST\r\n\r\nAfter trying different approaches, I ended up with a fix that adds the `rendering::load` call to tests that need rendering to be run on the same thread as the test itself. \r\n\r\nI did not make this the default, e.g. by introducing the call in ServerFixture like how it's done in [QTestFixture](#!/osrf/gazebo/src/edf9aedde3dc5ec9b68403651a2f55493b01ded0/gazebo/gui/QTestFixture.cc?at=default&fileviewer=file-view-default#QTestFixture.cc-75), since a few sensor tests need rendering to be run in the server thread and not the test thread.\r\n\r\n[example jenkins homebrew test report](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/691/testReport/) - various `UNIT_*Visual_TEST` test failures\r\n\r\n[new homebrew test result](http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/692/testReport/) - tests pass\r\n\r\n\r\n", "markup": "markdown", "html": "<p>This PR fixes the following test failures on homebrew:</p>\n<ul>\n<li>\n<p>UNIT_COMVisual_TEST</p>\n</li>\n<li>\n<p>UNIT_JointVisual_TEST</p>\n</li>\n<li>\n<p>UNIT_LinkFrameVisual_TEST</p>\n</li>\n<li>\n<p>UNIT_SelectionObj_TEST</p>\n</li>\n<li>\n<p>UNIT_SonarVisual_TEST</p>\n</li>\n<li>\n<p>UNIT_Visual_TEST</p>\n</li>\n</ul>\n<p>After trying different approaches, I ended up with a fix that adds the <code>rendering::load</code> call to tests that need rendering to be run on the same thread as the test itself. </p>\n<p>I did not make this the default, e.g. by introducing the call in ServerFixture like how it's done in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/edf9aedde3dc5ec9b68403651a2f55493b01ded0/gazebo/gui/QTestFixture.cc?at=default&amp;fileviewer=file-view-default#QTestFixture.cc-75\" rel=\"nofollow\">QTestFixture</a>, since a few sensor tests need rendering to be run in the server thread and not the test thread.</p>\n<p><a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/691/testReport/\" rel=\"nofollow\">example jenkins homebrew test report</a> - various <code>UNIT_*Visual_TEST</code> test failures</p>\n<p><a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-any-devel-homebrew-amd64/692/testReport/\" rel=\"nofollow\">new homebrew test result</a> - tests pass</p>", "type": "rendered"}, "source": {"commit": {"hash": "49883015849c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/49883015849c.json"}, "html": {"href": "#!/osrf/gazebo/commits/49883015849c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "rendering_tests"}}, "comment_count": 7, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2015-12-15T00:58:35.811540+00:00", "type": "participant", "approved": true, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, {"role": "PARTICIPANT", "participated_on": "2015-12-14T22:05:27.462501+00:00", "type": "participant", "approved": true, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "PARTICIPANT", "participated_on": "2015-12-14T22:04:08.046751+00:00", "type": "participant", "approved": false, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}], "reason": "", "updated_on": "2015-12-15T01:09:21.390997+00:00", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "merge_commit": {"hash": "da7701c00bdb", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/da7701c00bdb.json"}, "html": {"href": "#!/osrf/gazebo/commits/da7701c00bdb"}}}, "closed_by": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}