{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2450/comments/25544019.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2450/_/diff#comment-25544019"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2450, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2450.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2450"}}, "title": "Ardupilot Refactor and minor improvements"}, "content": {"raw": "@hsu @tfoote I carrefully check gazebo plugin on ardupilot side. It send motor command between 0 and 1.0 as rc value are bound between 1000 and 2000. \nUsing ARMING_REQUIRE   2.000000 , make send -1 value when no rc input as rc 3 will be 0, so the motor ouput is  (0 - 1000) / 1000 = -1 . but that value is only for APM start up it can be send to motor. \n\nSo we got two solutions : \n- we change the clamp Line 794 to 0 1.0 range. I think it is the easiest change, but require to adjust model parameter (setting offset to 0 for propeller) and we got the same behaviour for quad, plane ,and rover. Using this solve the  issue of plane takeoff whitout input from APM ...\n- I change gazebo pluggin on apm side to output motor between -1 1 for plane, \n\nWhat do you think ?", "markup": "markdown", "html": "<p>@hsu @tfoote I carrefully check gazebo plugin on ardupilot side. It send motor command between 0 and 1.0 as rc value are bound between 1000 and 2000. \nUsing ARMING_REQUIRE   2.000000 , make send -1 value when no rc input as rc 3 will be 0, so the motor ouput is  (0 - 1000) / 1000 = -1 . but that value is only for APM start up it can be send to motor. </p>\n<p>So we got two solutions : \n- we change the clamp Line 794 to 0 1.0 range. I think it is the easiest change, but require to adjust model parameter (setting offset to 0 for propeller) and we got the same behaviour for quad, plane ,and rover. Using this solve the  issue of plane takeoff whitout input from APM ...\n- I change gazebo pluggin on apm side to output motor between -1 1 for plane, </p>\n<p>What do you think ?</p>", "type": "rendered"}, "created_on": "2016-10-21T07:47:46.762382+00:00", "user": {"display_name": "pierre kancir", "uuid": "{9a97d859-5959-4a68-af43-bdcceee662f0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9a97d859-5959-4a68-af43-bdcceee662f0%7D"}, "html": {"href": "https://bitbucket.org/%7B9a97d859-5959-4a68-af43-bdcceee662f0%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7e77466a3ea95f7e0b79b1c06a2d4e65d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPK-3.png"}}, "nickname": "pkancir", "type": "user", "account_id": "557058:be5780af-c696-491c-bf8f-4ffe804dc642"}, "updated_on": "2016-10-21T07:47:46.840707+00:00", "type": "pullrequest_comment", "id": 25544019}