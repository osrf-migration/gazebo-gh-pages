{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/934/comments/1162911.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/934/_/diff#comment-1162911"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 934, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/934.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/934"}}, "title": "Add function to remove filter in ContactManager"}, "content": {"raw": "You've added this function, but there's nothing that calls it other than the test. You say the sensors don't need to call it because the physics thread finishes first, but what if a model containing a sensor is deleted? It should remove the filter in that case.\n\nI see\n[Gripper.cc](#!/osrf/gazebo/src/3bd08807f5d9997e9d51eed9276350bac523c4bf/gazebo/physics/Gripper.cc?at=default#cl-107),\n[Link.cc](#!/osrf/gazebo/src/3bd08807f5d9997e9d51eed9276350bac523c4bf/gazebo/physics/Link.cc?at=default#cl-199),\n[ContactSensor.cc](#!/osrf/gazebo/src/3bd08807f5d9997e9d51eed9276350bac523c4bf/gazebo/sensors/ContactSensor.cc?at=default#cl-115), and\n[SonarSensor.cc](#!/osrf/gazebo/src/3bd08807f5d9997e9d51eed9276350bac523c4bf/gazebo/sensors/SonarSensor.cc?at=default#cl-169) calling CreateFilter, and I think they should all call RemoveFilter during teardown in case they get deleted before the end of the simulation.", "markup": "markdown", "html": "<p>You've added this function, but there's nothing that calls it other than the test. You say the sensors don't need to call it because the physics thread finishes first, but what if a model containing a sensor is deleted? It should remove the filter in that case.</p>\n<p>I see\n<a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/3bd08807f5d9997e9d51eed9276350bac523c4bf/gazebo/physics/Gripper.cc?at=default#cl-107\" rel=\"nofollow\">Gripper.cc</a>,\n<a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/3bd08807f5d9997e9d51eed9276350bac523c4bf/gazebo/physics/Link.cc?at=default#cl-199\" rel=\"nofollow\">Link.cc</a>,\n<a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/3bd08807f5d9997e9d51eed9276350bac523c4bf/gazebo/sensors/ContactSensor.cc?at=default#cl-115\" rel=\"nofollow\">ContactSensor.cc</a>, and\n<a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/3bd08807f5d9997e9d51eed9276350bac523c4bf/gazebo/sensors/SonarSensor.cc?at=default#cl-169\" rel=\"nofollow\">SonarSensor.cc</a> calling CreateFilter, and I think they should all call RemoveFilter during teardown in case they get deleted before the end of the simulation.</p>", "type": "rendered"}, "created_on": "2014-02-03T08:15:56.691197+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-02-03T08:15:56.700205+00:00", "type": "pullrequest_comment", "id": 1162911}