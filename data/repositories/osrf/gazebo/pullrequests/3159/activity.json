{"pagelen": 50, "values": [{"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "898a67ae1218", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/898a67ae1218.json"}, "html": {"href": "#!/osrf/gazebo/commits/898a67ae1218"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "29304ee9a7cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/29304ee9a7cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/29304ee9a7cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-01-16T07:53:43.014151+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"approval": {"date": "2020-01-15T18:29:03.076532+00:00", "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131807441.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131807441"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "LGTM, just triggered one last round of CI.", "markup": "markdown", "html": "<p>LGTM, just triggered one last round of CI.</p>", "type": "rendered"}, "created_on": "2020-01-15T18:29:00.664037+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-01-15T18:29:00.673115+00:00", "type": "pullrequest_comment", "id": 131807441}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "898a67ae1218", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/898a67ae1218.json"}, "html": {"href": "#!/osrf/gazebo/commits/898a67ae1218"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "29304ee9a7cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/29304ee9a7cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/29304ee9a7cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-01-15T18:28:17.078200+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "898a67ae1218", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/898a67ae1218.json"}, "html": {"href": "#!/osrf/gazebo/commits/898a67ae1218"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "29304ee9a7cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/29304ee9a7cf.json"}, "html": {"href": "#!/osrf/gazebo/commits/29304ee9a7cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-01-15T18:28:17.031417+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131627426.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131627426"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "I approve the latest changes", "markup": "markdown", "html": "<p>I approve the latest changes</p>", "type": "rendered"}, "created_on": "2020-01-14T18:25:18.435801+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2020-01-14T18:25:18.442771+00:00", "type": "pullrequest_comment", "id": 131627426}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"approval": {"date": "2020-01-14T18:25:10.460544+00:00", "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131626711.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131626711"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "I moved a block of code dealing with nested models up above the message publishing code in 55168a9 since it seems more logically consistent to me, though it increased the diff a bit (sorry!)", "markup": "markdown", "html": "<p>I moved a block of code dealing with nested models up above the message publishing code in <a href=\"#!/osrf/gazebo/commits/55168a9\" rel=\"nofollow\" class=\"ap-connect-link\">55168a9</a> since it seems more logically consistent to me, though it increased the diff a bit (sorry!)</p>", "type": "rendered"}, "created_on": "2020-01-14T18:19:27.523024+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2020-01-14T18:19:27.530604+00:00", "type": "pullrequest_comment", "id": 131626711}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131626568.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131626568"}}, "parent": {"id": 131448234, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131448234.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131448234"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "ok, that makes sense, I added some extra scope around `tmpMsg` in a600271 to emphasize that it is not used", "markup": "markdown", "html": "<p>ok, that makes sense, I added some extra scope around <code>tmpMsg</code> in <a href=\"#!/osrf/gazebo/commits/a600271\" rel=\"nofollow\" class=\"ap-connect-link\">a600271</a> to emphasize that it is not used</p>", "type": "rendered"}, "created_on": "2020-01-14T18:18:05.981014+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2020-01-14T18:18:05.989471+00:00", "type": "pullrequest_comment", "id": 131626568}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "898a67ae1218", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/898a67ae1218.json"}, "html": {"href": "#!/osrf/gazebo/commits/898a67ae1218"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "55168a90b2bb", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/55168a90b2bb.json"}, "html": {"href": "#!/osrf/gazebo/commits/55168a90b2bb"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-01-14T18:16:13.818837+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131448234.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131448234"}}, "parent": {"id": 131446045, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131446045.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131446045"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "expanded comment and explicitly copy only visual geom msg in [263229](#!/osrf/gazebo/commits/8263229bcc775caba8919e5736892dc6efd07219)", "markup": "markdown", "html": "<p>expanded comment and explicitly copy only visual geom msg in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/commits/8263229bcc775caba8919e5736892dc6efd07219\" rel=\"nofollow\">263229</a></p>", "type": "rendered"}, "created_on": "2020-01-13T18:51:20.173986+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2020-01-13T18:51:20.182671+00:00", "type": "pullrequest_comment", "id": 131448234}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "0c0a755f4215", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0c0a755f4215.json"}, "html": {"href": "#!/osrf/gazebo/commits/0c0a755f4215"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "8263229bcc77", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/8263229bcc77.json"}, "html": {"href": "#!/osrf/gazebo/commits/8263229bcc77"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2020-01-13T18:50:30.248788+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131446045.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131446045"}}, "parent": {"id": 131277019, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131277019.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131277019"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "The `FillMsg` call fills the temporary msg `tmpMsg` so does not actually modify the msg to be sent. I had to call it on order for the link to update its visual msgs with the latest values from sdf.", "markup": "markdown", "html": "<p>The <code>FillMsg</code> call fills the temporary msg <code>tmpMsg</code> so does not actually modify the msg to be sent. I had to call it on order for the link to update its visual msgs with the latest values from sdf.</p>", "type": "rendered"}, "created_on": "2020-01-13T18:33:29.892199+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2020-01-13T18:33:39.600619+00:00", "type": "pullrequest_comment", "id": 131446045}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131277019.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131277019"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "doesn't `Link::FillMsg` already add the visuals?\n\n* #!/osrf/gazebo/src/624358de7da1d1b1733d4127174c1a90a1a9f5eb/gazebo/physics/Link.cc#lines-975:1038\n\nit seems like this would duplicate the visuals in the message", "markup": "markdown", "html": "<p>doesn't <code>Link::FillMsg</code> already add the visuals?</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/src/624358de7da1d1b1733d4127174c1a90a1a9f5eb/gazebo/physics/Link.cc#lines-975:1038\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/624358de7da1d1b1733d4127174c1a90a1a9f5eb/gazebo/physics/Link.cc#lines-975:1038</a></li>\n</ul>\n<p>it seems like this would duplicate the visuals in the message</p>", "type": "rendered"}, "created_on": "2020-01-11T01:49:19.730997+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2020-01-11T01:49:19.736733+00:00", "type": "pullrequest_comment", "id": 131277019}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "0c0a755f4215", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0c0a755f4215.json"}, "html": {"href": "#!/osrf/gazebo/commits/0c0a755f4215"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "624358de7da1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/624358de7da1.json"}, "html": {"href": "#!/osrf/gazebo/commits/624358de7da1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2020-01-11T00:30:32.422722+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131275441.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131275441"}}, "parent": {"id": 131260604, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131260604.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131260604"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "Found that here were many other fields to remove so I just ended up manually looping through the links and copying the visual msgs instead. [02213eb](#!/osrf/gazebo/commits/02213ebd279dbe5225011588a6f55176e2ced4f1)", "markup": "markdown", "html": "<p>Found that here were many other fields to remove so I just ended up manually looping through the links and copying the visual msgs instead. <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/commits/02213ebd279dbe5225011588a6f55176e2ced4f1\" rel=\"nofollow\">02213eb</a></p>", "type": "rendered"}, "created_on": "2020-01-11T00:29:03.855978+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2020-01-11T00:29:03.864885+00:00", "type": "pullrequest_comment", "id": 131275441}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "0c0a755f4215", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0c0a755f4215.json"}, "html": {"href": "#!/osrf/gazebo/commits/0c0a755f4215"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "02213ebd279d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/02213ebd279d.json"}, "html": {"href": "#!/osrf/gazebo/commits/02213ebd279d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2020-01-11T00:27:09.824438+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131260604.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131260604"}}, "parent": {"id": 131257425, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131257425.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131257425"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "I suppose you could delete all the other info from the message after `FillMsg` returns?", "markup": "markdown", "html": "<p>I suppose you could delete all the other info from the message after <code>FillMsg</code> returns?</p>", "type": "rendered"}, "created_on": "2020-01-10T20:28:04.333077+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2020-01-10T20:28:04.340185+00:00", "type": "pullrequest_comment", "id": 131260604}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131257425.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131257425"}}, "parent": {"id": 131256951, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131256951.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131256951"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "> We could just publish model scale and visual geometry information \n\n+1 to that if it's not much trouble", "markup": "markdown", "html": "<blockquote>\n<p>We could just publish model scale and visual geometry information </p>\n</blockquote>\n<p>+1 to that if it's not much trouble</p>", "type": "rendered"}, "created_on": "2020-01-10T19:54:50.251255+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-01-10T19:54:50.264913+00:00", "type": "pullrequest_comment", "id": 131257425}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131256951.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131256951"}}, "parent": {"id": 131091211, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131091211.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131091211"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "The `physics::Link` classes keps track of [some visual changes](#!/osrf/gazebo/src/2219f7f608e24f2bef587ff6a3a61f6448666044/gazebo/physics/Link.cc#lines-1422) but not all so yeah there will likely be inconsistencies if the user modifies other properties of visuals through `~/visual` or visual plugins. We could just publish model scale and visual geometry information ", "markup": "markdown", "html": "<p>The <code>physics::Link</code> classes keps track of <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/2219f7f608e24f2bef587ff6a3a61f6448666044/gazebo/physics/Link.cc#lines-1422\" rel=\"nofollow\">some visual changes</a> but not all so yeah there will likely be inconsistencies if the user modifies other properties of visuals through <code>~/visual</code> or visual plugins. We could just publish model scale and visual geometry information </p>", "type": "rendered"}, "created_on": "2020-01-10T19:50:24.836728+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2020-01-10T19:50:24.844716+00:00", "type": "pullrequest_comment", "id": 131256951}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/131091211.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-131091211"}}, "parent": {"id": 130948608, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/130948608.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-130948608"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "The only concern I'd have is whether all the information is up-to-date. For example, I'm not sure if physics is keeping track of visual changes. So the message may be publishing outdated info.", "markup": "markdown", "html": "<p>The only concern I'd have is whether all the information is up-to-date. For example, I'm not sure if physics is keeping track of visual changes. So the message may be publishing outdated info.</p>", "type": "rendered"}, "created_on": "2020-01-09T19:15:56.453365+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-01-09T19:15:56.461525+00:00", "type": "pullrequest_comment", "id": 131091211}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "c61d27f4607a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/c61d27f4607a.json"}, "html": {"href": "#!/osrf/gazebo/commits/c61d27f4607a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "76362ac7eee1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/76362ac7eee1.json"}, "html": {"href": "#!/osrf/gazebo/commits/76362ac7eee1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-01-09T05:56:41.047579+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "c61d27f4607a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/c61d27f4607a.json"}, "html": {"href": "#!/osrf/gazebo/commits/c61d27f4607a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "76362ac7eee1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/76362ac7eee1.json"}, "html": {"href": "#!/osrf/gazebo/commits/76362ac7eee1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-01-09T05:56:37.601121+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/130948608.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-130948608"}}, "parent": {"id": 130947769, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/130947769.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-130947769"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "yeah it\u2019s publishing more information. The important fields needed on the rendering side are the model scale and visual geometry fields. We could just publish these two fields but it made the fix more complicated and hacky so I decided to send the full msg for completeness. The common use case for this API is when using the scale tool which does not happen frequently so I think should be fine.", "markup": "markdown", "html": "<p>yeah it\u2019s publishing more information. The important fields needed on the rendering side are the model scale and visual geometry fields. We could just publish these two fields but it made the fix more complicated and hacky so I decided to send the full msg for completeness. The common use case for this API is when using the scale tool which does not happen frequently so I think should be fine.</p>", "type": "rendered"}, "created_on": "2020-01-09T02:19:23.790455+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2020-01-09T02:19:23.799148+00:00", "type": "pullrequest_comment", "id": 130948608}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/130947769.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-130947769"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "I think this is now publishing more information; is that ok?", "markup": "markdown", "html": "<p>I think this is now publishing more information; is that ok?</p>", "type": "rendered"}, "created_on": "2020-01-09T02:00:36.419627+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2020-01-09T02:00:36.426645+00:00", "type": "pullrequest_comment", "id": 130947769}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159/comments/130947686.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159/_/diff#comment-130947686"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}, "content": {"raw": "I was able to reproduce the race condition occasionally with the following patch:\n\n~~~\ndiff -r cf962dda2966 gazebo/physics/Link.cc\n--- a/gazebo/physics/Link.cc    Wed Jan 08 17:49:06 2020 -0800\n+++ b/gazebo/physics/Link.cc    Wed Jan 08 17:57:54 2020 -0800\n@@ -1068,6 +1068,8 @@\n     msgs::Light *lightMsg = _msg.add_light();\n     light->FillMsg(*lightMsg);\n   }\n+  gzerr << \"Link::FillMsg MSleep(15)\" << std::endl;\n+  common::Time::MSleep(15);\n }\n \n //////////////////////////////////////////////////\n~~~\n\non gazebo9 with this patch, it fails with complaints about the scale, but one of the links is also missing from the model message. with this branch and that patch, I don't see any errors", "markup": "markdown", "html": "<p>I was able to reproduce the race condition occasionally with the following patch:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r cf962dda2966 gazebo/physics/Link.cc</span>\n<span class=\"gd\">--- a/gazebo/physics/Link.cc    Wed Jan 08 17:49:06 2020 -0800</span>\n<span class=\"gi\">+++ b/gazebo/physics/Link.cc    Wed Jan 08 17:57:54 2020 -0800</span>\n<span class=\"gu\">@@ -1068,6 +1068,8 @@</span>\n     msgs::Light *lightMsg = _msg.add_light();\n     light-&gt;FillMsg(*lightMsg);\n   }\n<span class=\"gi\">+  gzerr &lt;&lt; &quot;Link::FillMsg MSleep(15)&quot; &lt;&lt; std::endl;</span>\n<span class=\"gi\">+  common::Time::MSleep(15);</span>\n }\n\n //////////////////////////////////////////////////\n</pre></div>\n\n\n<p>on gazebo9 with this patch, it fails with complaints about the scale, but one of the links is also missing from the model message. with this branch and that patch, I don't see any errors</p>", "type": "rendered"}, "created_on": "2020-01-09T01:59:13.403241+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2020-01-09T01:59:13.409104+00:00", "type": "pullrequest_comment", "id": 130947686}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "c61d27f4607a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/c61d27f4607a.json"}, "html": {"href": "#!/osrf/gazebo/commits/c61d27f4607a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "cf962dda2966", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/cf962dda2966.json"}, "html": {"href": "#!/osrf/gazebo/commits/cf962dda2966"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-01-09T01:49:47.943534+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "c61d27f4607a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/c61d27f4607a.json"}, "html": {"href": "#!/osrf/gazebo/commits/c61d27f4607a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "a773bf2d621a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a773bf2d621a.json"}, "html": {"href": "#!/osrf/gazebo/commits/a773bf2d621a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-01-09T00:27:03.144295+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "c61d27f4607a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/c61d27f4607a.json"}, "html": {"href": "#!/osrf/gazebo/commits/c61d27f4607a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "a773bf2d621a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a773bf2d621a.json"}, "html": {"href": "#!/osrf/gazebo/commits/a773bf2d621a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-01-09T00:26:55.187082+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "57552a22ae31", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/57552a22ae31.json"}, "html": {"href": "#!/osrf/gazebo/commits/57552a22ae31"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "e220509e9d05", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/e220509e9d05.json"}, "html": {"href": "#!/osrf/gazebo/commits/e220509e9d05"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2019-12-16T22:08:30.165305+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}, {"update": {"description": "A race condition can happen on startup on the rendering side when a plugin calls `Model::SetScale`, which leads to incorrect scale of visual being set.\r\n\r\nThe problem occurs if the model msg with scale information arrives on the rendering side before the initial scene msg is processed. In this case, the visual now incorrectly associates the new scale with the initial visual geometry size instead of updating the geometry to a size based on the new scale. \r\n\r\nThe workaround is to send the full model msg from the physics side to the rendering side with visuals data when a scale is set to make sure both scale and geometry data are processed at the same time.\r\n\r\nNote that the problem is difficult to reproduce. We ran into the problem when launching a simulation that takes >10 econds to load. The test added does not reproduce the problem but it verifies the contents of the new model msg when `Model::SetScale` is called.", "title": "Workaround for race condition when setting model scale", "destination": {"commit": {"hash": "57552a22ae31", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/57552a22ae31.json"}, "html": {"href": "#!/osrf/gazebo/commits/57552a22ae31"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo9"}}, "reason": "", "source": {"commit": {"hash": "e220509e9d05", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/e220509e9d05.json"}, "html": {"href": "#!/osrf/gazebo/commits/e220509e9d05"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "debug_scale"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2019-12-16T22:08:30.127957+00:00"}, "pull_request": {"type": "pullrequest", "id": 3159, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/3159.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/3159"}}, "title": "Workaround for race condition when setting model scale"}}]}