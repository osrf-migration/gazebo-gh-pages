{"pagelen": 50, "values": [{"update": {"description": "Because of some differences in workflow between ODE and DART, the collision reporting that was being done for DART was a little bit nonsensical. It would report the collisions encountered on the simulation step *before* the last one, producing out-of-date information.\r\n\r\nBut even more of a problem was that this opened us up to segfaulting if an object was removed between the last time step and the current one. The solution that was put into place to resolve this was to perform a simulation step each time an object is removed from the DART world. This is also problematic since it means the whole world will be taking a forward time step each time a single object is removed, with no way for the user to control it.\r\n\r\nThis pull request shuffles some of the workflow around for DART so that collision reporting occurs immediately after the collision detection is performed. We also no longer perform forward time steps when removing objects from the simulation, so the forward simulation is entirely under the control of the user once again.", "title": "Fixing the collision reporting for DART", "destination": {"commit": {"hash": "a2e24ead6b45", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a2e24ead6b45.json"}, "html": {"href": "#!/osrf/gazebo/commits/a2e24ead6b45"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "14429deb5733", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo/commit/14429deb5733"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo/commits/14429deb5733"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{db441b9a-5483-4728-b3af-1135ccc99e42}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "mxgrey/gazebo", "uuid": "{db441b9a-5483-4728-b3af-1135ccc99e42}"}, "branch": {"name": "FixCollisionReportingForDart"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2017-08-02T18:51:01.409954+00:00"}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/42038199.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-42038199"}}, "parent": {"id": 42030442, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/42030442.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-42030442"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "I think merging this branch with default from `osrf/gazebo` would have fixed the JointState_TEST.cc errors also (40c062d,  801eaaf), but your fix is equivalent", "markup": "markdown", "html": "<p>I think merging this branch with default from <code>osrf/gazebo</code> would have fixed the JointState_TEST.cc errors also (<a href=\"#!/osrf/gazebo/commits/40c062d\" rel=\"nofollow\" class=\"ap-connect-link\">40c062d</a>,  <a href=\"#!/osrf/gazebo/commits/801eaaf\" rel=\"nofollow\" class=\"ap-connect-link\">801eaaf</a>), but your fix is equivalent</p>", "type": "rendered"}, "created_on": "2017-08-02T18:49:40.418250+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-02T18:49:40.420740+00:00", "type": "pullrequest_comment", "id": 42038199}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"approval": {"date": "2017-08-02T18:44:50.363458+00:00", "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/42037862.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-42037862"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "Looks good to me. The new test succeeds with the other changes in the PR and fails without them. The PR also solves the segfault in `FactoryTest.Box/2` I observed when using DARTS PGS LCP solver.\n~~~\ndiff -r a2e24ead6b45 gazebo/physics/dart/DARTPhysics.cc\n--- a/gazebo/physics/dart/DARTPhysics.cc\tFri Jul 28 18:52:53 2017 +0000\n+++ b/gazebo/physics/dart/DARTPhysics.cc\tWed Aug 02 11:43:44 2017 -0700\n@@ -65,6 +65,9 @@\n DARTPhysics::DARTPhysics(WorldPtr _world)\n     : PhysicsEngine(_world), dataPtr(new DARTPhysicsPrivate())\n {\n+  this->dataPtr->dtWorld->getConstraintSolver()->setLCPSolver(\n+      dart::common::make_unique<dart::constraint::PGSLCPSolver>(\n+      this->dataPtr->dtWorld->getTimeStep()));\n }\n \n //////////////////////////////////////////////////\n~~~", "markup": "markdown", "html": "<p>Looks good to me. The new test succeeds with the other changes in the PR and fails without them. The PR also solves the segfault in <code>FactoryTest.Box/2</code> I observed when using DARTS PGS LCP solver.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r a2e24ead6b45 gazebo/physics/dart/DARTPhysics.cc</span>\n<span class=\"gd\">--- a/gazebo/physics/dart/DARTPhysics.cc    Fri Jul 28 18:52:53 2017 +0000</span>\n<span class=\"gi\">+++ b/gazebo/physics/dart/DARTPhysics.cc    Wed Aug 02 11:43:44 2017 -0700</span>\n<span class=\"gu\">@@ -65,6 +65,9 @@</span>\n DARTPhysics::DARTPhysics(WorldPtr _world)\n     : PhysicsEngine(_world), dataPtr(new DARTPhysicsPrivate())\n {\n<span class=\"gi\">+  this-&gt;dataPtr-&gt;dtWorld-&gt;getConstraintSolver()-&gt;setLCPSolver(</span>\n<span class=\"gi\">+      dart::common::make_unique&lt;dart::constraint::PGSLCPSolver&gt;(</span>\n<span class=\"gi\">+      this-&gt;dataPtr-&gt;dtWorld-&gt;getTimeStep()));</span>\n }\n\n //////////////////////////////////////////////////\n</pre></div>", "type": "rendered"}, "created_on": "2017-08-02T18:44:44.759692+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-02T18:44:44.763326+00:00", "type": "pullrequest_comment", "id": 42037862}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/42030442.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-42030442"}}, "parent": {"id": 41966953, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41966953.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41966953"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "I'm not sure where those new errors in JointState_TEST.cc came from since I never touched that file, but I've fixed them anyway (along with the BulletPhysics.cc white space) in 14429de", "markup": "markdown", "html": "<p>I'm not sure where those new errors in JointState_TEST.cc came from since I never touched that file, but I've fixed them anyway (along with the BulletPhysics.cc white space) in <a href=\"#!/osrf/gazebo/commits/14429de\" rel=\"nofollow\" class=\"ap-connect-link\">14429de</a></p>", "type": "rendered"}, "created_on": "2017-08-02T16:59:39.664085+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2017-08-02T16:59:39.712788+00:00", "type": "pullrequest_comment", "id": 42030442}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"update": {"description": "Because of some differences in workflow between ODE and DART, the collision reporting that was being done for DART was a little bit nonsensical. It would report the collisions encountered on the simulation step *before* the last one, producing out-of-date information.\r\n\r\nBut even more of a problem was that this opened us up to segfaulting if an object was removed between the last time step and the current one. The solution that was put into place to resolve this was to perform a simulation step each time an object is removed from the DART world. This is also problematic since it means the whole world will be taking a forward time step each time a single object is removed, with no way for the user to control it.\r\n\r\nThis pull request shuffles some of the workflow around for DART so that collision reporting occurs immediately after the collision detection is performed. We also no longer perform forward time steps when removing objects from the simulation, so the forward simulation is entirely under the control of the user once again.", "title": "Fixing the collision reporting for DART", "destination": {"commit": {"hash": "a2e24ead6b45", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a2e24ead6b45.json"}, "html": {"href": "#!/osrf/gazebo/commits/a2e24ead6b45"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "14429deb5733", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo/commit/14429deb5733"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo/commits/14429deb5733"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{db441b9a-5483-4728-b3af-1135ccc99e42}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "mxgrey/gazebo", "uuid": "{db441b9a-5483-4728-b3af-1135ccc99e42}"}, "branch": {"name": "FixCollisionReportingForDart"}}, "state": "OPEN", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "date": "2017-08-02T16:58:30.622910+00:00"}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41966953.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41966953"}}, "parent": {"id": 41961441, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41961441.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41961441"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "just a whitespace error in BulletPhysics.cc:\n\n* https://build.osrfoundation.org/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/26/cppcheckResult/", "markup": "markdown", "html": "<p>just a whitespace error in BulletPhysics.cc:</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/26/cppcheckResult/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/26/cppcheckResult/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2017-08-02T04:31:57.608038+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-02T04:31:57.610233+00:00", "type": "pullrequest_comment", "id": 41966953}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41961441.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41961441"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "ok, one final build to confirm you've fixed bullet:\n\n* https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/26/", "markup": "markdown", "html": "<p>ok, one final build to confirm you've fixed bullet:</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/26/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/26/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2017-08-02T01:06:16.735638+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-02T01:06:16.737676+00:00", "type": "pullrequest_comment", "id": 41961441}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41961398.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41961398"}}, "parent": {"id": 41960325, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41960325.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41960325"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "This is now fixed in eb6ea4d thanks for the help!", "markup": "markdown", "html": "<p>This is now fixed in <a href=\"#!/osrf/gazebo/commits/eb6ea4d\" rel=\"nofollow\" class=\"ap-connect-link\">eb6ea4d</a> thanks for the help!</p>", "type": "rendered"}, "created_on": "2017-08-02T01:04:51.457327+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-02T01:04:51.504512+00:00", "type": "pullrequest_comment", "id": 41961398}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"update": {"description": "Because of some differences in workflow between ODE and DART, the collision reporting that was being done for DART was a little bit nonsensical. It would report the collisions encountered on the simulation step *before* the last one, producing out-of-date information.\r\n\r\nBut even more of a problem was that this opened us up to segfaulting if an object was removed between the last time step and the current one. The solution that was put into place to resolve this was to perform a simulation step each time an object is removed from the DART world. This is also problematic since it means the whole world will be taking a forward time step each time a single object is removed, with no way for the user to control it.\r\n\r\nThis pull request shuffles some of the workflow around for DART so that collision reporting occurs immediately after the collision detection is performed. We also no longer perform forward time steps when removing objects from the simulation, so the forward simulation is entirely under the control of the user once again.", "title": "Fixing the collision reporting for DART", "destination": {"commit": {"hash": "a2e24ead6b45", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a2e24ead6b45.json"}, "html": {"href": "#!/osrf/gazebo/commits/a2e24ead6b45"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "eb6ea4dfbf75", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo/commit/eb6ea4dfbf75"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo/commits/eb6ea4dfbf75"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{db441b9a-5483-4728-b3af-1135ccc99e42}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "mxgrey/gazebo", "uuid": "{db441b9a-5483-4728-b3af-1135ccc99e42}"}, "branch": {"name": "FixCollisionReportingForDart"}}, "state": "OPEN", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "date": "2017-08-02T01:03:25.651154+00:00"}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"approval": {"date": "2017-08-02T00:27:55.366632+00:00", "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41960325.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41960325"}}, "parent": {"id": 41960229, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41960229.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41960229"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "that's probably easy to fix, but there's also the aspect of bullet not cleaning up everything after supposedly deleting that model", "markup": "markdown", "html": "<p>that's probably easy to fix, but there's also the aspect of bullet not cleaning up everything after supposedly deleting that model</p>", "type": "rendered"}, "created_on": "2017-08-02T00:26:46.332896+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-02T00:26:46.335181+00:00", "type": "pullrequest_comment", "id": 41960325}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41960229.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41960229"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "I did some debugging on this failing test case and confirmed that `GetContactCount() == 1` with bullet, but after some printing, I found that while the set of contacts returned by `GetContact(0)` has two collision pointers, it doesn't have any contact points. The ContactManager doesn't publish empty contacts messages like this due to the following check:\n\n* #!/osrf/gazebo/src/a2e24ead6b45c637436c5f38b906c5d327e4f6b1/gazebo/physics/ContactManager.cc?at=default&fileviewer=file-view-default#ContactManager.cc-307:308\n\nSo there is probably a place in bullet that creates a data structure before knowing that it will actually have any contact points", "markup": "markdown", "html": "<p>I did some debugging on this failing test case and confirmed that <code>GetContactCount() == 1</code> with bullet, but after some printing, I found that while the set of contacts returned by <code>GetContact(0)</code> has two collision pointers, it doesn't have any contact points. The ContactManager doesn't publish empty contacts messages like this due to the following check:</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/src/a2e24ead6b45c637436c5f38b906c5d327e4f6b1/gazebo/physics/ContactManager.cc?at=default&amp;fileviewer=file-view-default#ContactManager.cc-307:308\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/a2e24ead6b45c637436c5f38b906c5d327e4f6b1/gazebo/physics/ContactManager.cc?at=default&amp;fileviewer=file-view-default#ContactManager.cc-307:308</a></li>\n</ul>\n<p>So there is probably a place in bullet that creates a data structure before knowing that it will actually have any contact points</p>", "type": "rendered"}, "created_on": "2017-08-02T00:24:26.152696+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-02T00:24:26.154948+00:00", "type": "pullrequest_comment", "id": 41960229}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41957593.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41957593"}}, "parent": {"id": 41947517, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41947517.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41947517"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "I've created a test which fails without this pull request. The only problem is that bullet fails one part of the new test. For the time being, I'm having it skip the test for bullet. I assume I should open an issue about bullet's failing and then refer to the issue in a comment in the code, is that correct?", "markup": "markdown", "html": "<p>I've created a test which fails without this pull request. The only problem is that bullet fails one part of the new test. For the time being, I'm having it skip the test for bullet. I assume I should open an issue about bullet's failing and then refer to the issue in a comment in the code, is that correct?</p>", "type": "rendered"}, "created_on": "2017-08-01T23:11:07.106423+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2017-08-01T23:11:07.164297+00:00", "type": "pullrequest_comment", "id": 41957593}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"update": {"description": "Because of some differences in workflow between ODE and DART, the collision reporting that was being done for DART was a little bit nonsensical. It would report the collisions encountered on the simulation step *before* the last one, producing out-of-date information.\r\n\r\nBut even more of a problem was that this opened us up to segfaulting if an object was removed between the last time step and the current one. The solution that was put into place to resolve this was to perform a simulation step each time an object is removed from the DART world. This is also problematic since it means the whole world will be taking a forward time step each time a single object is removed, with no way for the user to control it.\r\n\r\nThis pull request shuffles some of the workflow around for DART so that collision reporting occurs immediately after the collision detection is performed. We also no longer perform forward time steps when removing objects from the simulation, so the forward simulation is entirely under the control of the user once again.", "title": "Fixing the collision reporting for DART", "destination": {"commit": {"hash": "a2e24ead6b45", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a2e24ead6b45.json"}, "html": {"href": "#!/osrf/gazebo/commits/a2e24ead6b45"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "215056745bd7", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo/commit/215056745bd7"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo/commits/215056745bd7"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{db441b9a-5483-4728-b3af-1135ccc99e42}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "mxgrey/gazebo", "uuid": "{db441b9a-5483-4728-b3af-1135ccc99e42}"}, "branch": {"name": "FixCollisionReportingForDart"}}, "state": "OPEN", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "date": "2017-08-01T23:09:21.509044+00:00"}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41947923.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41947923"}}, "parent": {"id": 41947517, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41947517.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41947517"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "Let me play around with that test real quick to see if I can force it to fail by tweaking my changes. That should be a good indication that these changes are doing the right thing.", "markup": "markdown", "html": "<p>Let me play around with that test real quick to see if I can force it to fail by tweaking my changes. That should be a good indication that these changes are doing the right thing.</p>", "type": "rendered"}, "created_on": "2017-08-01T19:57:14.890854+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2017-08-01T20:52:32.264575+00:00", "type": "pullrequest_comment", "id": 41947923}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41947517.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41947517"}}, "parent": {"id": 41867057, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41867057.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41867057"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "ready to approve if you think the existing integration test is sufficient", "markup": "markdown", "html": "<p>ready to approve if you think the existing integration test is sufficient</p>", "type": "rendered"}, "created_on": "2017-08-01T19:50:12.112148+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-01T19:50:12.114541+00:00", "type": "pullrequest_comment", "id": 41947517}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41947492.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41947492"}}, "parent": {"id": 41867084, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41867084.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41867084"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "looks good to me", "markup": "markdown", "html": "<p>looks good to me</p>", "type": "rendered"}, "created_on": "2017-08-01T19:49:42.107111+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-01T19:49:42.109362+00:00", "type": "pullrequest_comment", "id": 41947492}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41867084.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41867084"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "started a jenkins dart:\n\n* https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/24/", "markup": "markdown", "html": "<p>started a jenkins dart:</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/24/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/upstream-dart/job/gazebo-any_dart4-devel-xenial-amd64-gpu-nvidia_docker/24/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2017-08-01T01:09:17.105934+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-01T01:09:17.108421+00:00", "type": "pullrequest_comment", "id": 41867084}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41867057.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41867057"}}, "parent": {"id": 41866982, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41866982.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41866982"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "Actually, it looks like we already have one in [INTEGRATION_contacts_update](#!/osrf/gazebo/src/a2e24ead6b45c637436c5f38b906c5d327e4f6b1/test/integration/contacts_update.cc?at=default&fileviewer=file-view-default). Is there anything you think we should add to that test that would be relevant to this fix?", "markup": "markdown", "html": "<p>Actually, it looks like we already have one in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/a2e24ead6b45c637436c5f38b906c5d327e4f6b1/test/integration/contacts_update.cc?at=default&amp;fileviewer=file-view-default\" rel=\"nofollow\">INTEGRATION_contacts_update</a>. Is there anything you think we should add to that test that would be relevant to this fix?</p>", "type": "rendered"}, "created_on": "2017-08-01T01:08:02.754023+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-01T01:08:02.757339+00:00", "type": "pullrequest_comment", "id": 41867057}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41866982.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41866982"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "I'll see about adding a test for collision checking when physics is disabled", "markup": "markdown", "html": "<p>I'll see about adding a test for collision checking when physics is disabled</p>", "type": "rendered"}, "created_on": "2017-08-01T01:05:07.773991+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-01T01:05:07.776865+00:00", "type": "pullrequest_comment", "id": 41866982}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41866974.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41866974"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "It looks like some code got moved around so that some functions could be defined as `static` and avoid a prototype declaration. I understand the desire to avoid unnecessary duplication, but I see two drawbacks for in this specific pull request:\n\n1. It makes the diff more complicated and harder to review, maybe harder for reviewers to catch bugs. This is a small enough PR that it wasn't that hard for me to review, but I encourage and value simple diffs.\n\n2. Usually we put doxygen for functions in the header file next to function prototypes, but there's no prototypes or doxygen for the new static functions. We should document somewhere.\n\n(we talked about this in person, but I'm just following up to keep others in the loop)", "markup": "markdown", "html": "<p>It looks like some code got moved around so that some functions could be defined as <code>static</code> and avoid a prototype declaration. I understand the desire to avoid unnecessary duplication, but I see two drawbacks for in this specific pull request:</p>\n<ol>\n<li>\n<p>It makes the diff more complicated and harder to review, maybe harder for reviewers to catch bugs. This is a small enough PR that it wasn't that hard for me to review, but I encourage and value simple diffs.</p>\n</li>\n<li>\n<p>Usually we put doxygen for functions in the header file next to function prototypes, but there's no prototypes or doxygen for the new static functions. We should document somewhere.</p>\n</li>\n</ol>\n<p>(we talked about this in person, but I'm just following up to keep others in the loop)</p>", "type": "rendered"}, "created_on": "2017-08-01T01:04:38.255400+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-08-01T01:04:38.258038+00:00", "type": "pullrequest_comment", "id": 41866974}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41866030.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41866030"}}, "parent": {"id": 41865946, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41865946.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41865946"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "never mind", "markup": "markdown", "html": "<p>never mind</p>", "type": "rendered"}, "created_on": "2017-08-01T00:32:14.807533+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-01T00:32:14.810099+00:00", "type": "pullrequest_comment", "id": 41866030}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/41865946.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-41865946"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "did you want to update the header file to match this change?", "markup": "markdown", "html": "<p>did you want to update the header file to match this change?</p>", "type": "rendered"}, "created_on": "2017-08-01T00:30:14.981773+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2017-08-01T00:30:14.984852+00:00", "type": "pullrequest_comment", "id": 41865946}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"update": {"description": "Because of some differences in workflow between ODE and DART, the collision reporting that was being done for DART was a little bit nonsensical. It would report the collisions encountered on the simulation step *before* the last one, producing out-of-date information.\r\n\r\nBut even more of a problem was that this opened us up to segfaulting if an object was removed between the last time step and the current one. The solution that was put into place to resolve this was to perform a simulation step each time an object is removed from the DART world. This is also problematic since it means the whole world will be taking a forward time step each time a single object is removed, with no way for the user to control it.\r\n\r\nThis pull request shuffles some of the workflow around for DART so that collision reporting occurs immediately after the collision detection is performed. We also no longer perform forward time steps when removing objects from the simulation, so the forward simulation is entirely under the control of the user once again.", "title": "Fixing the collision reporting for DART", "destination": {"commit": {"hash": "a2e24ead6b45", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a2e24ead6b45.json"}, "html": {"href": "#!/osrf/gazebo/commits/a2e24ead6b45"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "4c2f12c90e6e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo/commit/4c2f12c90e6e"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo/commits/4c2f12c90e6e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{db441b9a-5483-4728-b3af-1135ccc99e42}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "mxgrey/gazebo", "uuid": "{db441b9a-5483-4728-b3af-1135ccc99e42}"}, "branch": {"name": "FixCollisionReportingForDart"}}, "state": "OPEN", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "date": "2017-07-31T17:39:42.020021+00:00"}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}, {"update": {"description": "Because of some differences in workflow between ODE and DART, the collision reporting that was being done for DART was a little bit nonsensical. It would report the collisions encountered on the simulation step *before* the last one, producing out-of-date information.\r\n\r\nBut even more of a problem was that this opened us up to segfaulting if an object was removed between the last time step and the current one. The solution that was put into place to resolve this was to perform a simulation step each time an object is removed from the DART world. This is also problematic since it means the whole world will be taking a forward time step each time a single object is removed, with no way for the user to control it.\r\n\r\nThis pull request shuffles some of the workflow around for DART so that collision reporting occurs immediately after the collision detection is performed. We also no longer perform forward time steps when removing objects from the simulation, so the forward simulation is entirely under the control of the user once again.", "title": "Fixing the collision reporting for DART", "destination": {"commit": {"hash": "a2e24ead6b45", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a2e24ead6b45.json"}, "html": {"href": "#!/osrf/gazebo/commits/a2e24ead6b45"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "4c2f12c90e6e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo/commit/4c2f12c90e6e"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo/commits/4c2f12c90e6e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/mxgrey/gazebo"}, "html": {"href": "https://bitbucket.org/mxgrey/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{db441b9a-5483-4728-b3af-1135ccc99e42}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo", "full_name": "mxgrey/gazebo", "uuid": "{db441b9a-5483-4728-b3af-1135ccc99e42}"}, "branch": {"name": "FixCollisionReportingForDart"}}, "state": "OPEN", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "date": "2017-07-31T17:39:41.973623+00:00"}, "pull_request": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}}]}