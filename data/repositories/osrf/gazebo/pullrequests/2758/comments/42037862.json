{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758/comments/42037862.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758/_/diff#comment-42037862"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2758, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2758.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2758"}}, "title": "Fixing the collision reporting for DART"}, "content": {"raw": "Looks good to me. The new test succeeds with the other changes in the PR and fails without them. The PR also solves the segfault in `FactoryTest.Box/2` I observed when using DARTS PGS LCP solver.\n~~~\ndiff -r a2e24ead6b45 gazebo/physics/dart/DARTPhysics.cc\n--- a/gazebo/physics/dart/DARTPhysics.cc\tFri Jul 28 18:52:53 2017 +0000\n+++ b/gazebo/physics/dart/DARTPhysics.cc\tWed Aug 02 11:43:44 2017 -0700\n@@ -65,6 +65,9 @@\n DARTPhysics::DARTPhysics(WorldPtr _world)\n     : PhysicsEngine(_world), dataPtr(new DARTPhysicsPrivate())\n {\n+  this->dataPtr->dtWorld->getConstraintSolver()->setLCPSolver(\n+      dart::common::make_unique<dart::constraint::PGSLCPSolver>(\n+      this->dataPtr->dtWorld->getTimeStep()));\n }\n \n //////////////////////////////////////////////////\n~~~", "markup": "markdown", "html": "<p>Looks good to me. The new test succeeds with the other changes in the PR and fails without them. The PR also solves the segfault in <code>FactoryTest.Box/2</code> I observed when using DARTS PGS LCP solver.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r a2e24ead6b45 gazebo/physics/dart/DARTPhysics.cc</span>\n<span class=\"gd\">--- a/gazebo/physics/dart/DARTPhysics.cc    Fri Jul 28 18:52:53 2017 +0000</span>\n<span class=\"gi\">+++ b/gazebo/physics/dart/DARTPhysics.cc    Wed Aug 02 11:43:44 2017 -0700</span>\n<span class=\"gu\">@@ -65,6 +65,9 @@</span>\n DARTPhysics::DARTPhysics(WorldPtr _world)\n     : PhysicsEngine(_world), dataPtr(new DARTPhysicsPrivate())\n {\n<span class=\"gi\">+  this-&gt;dataPtr-&gt;dtWorld-&gt;getConstraintSolver()-&gt;setLCPSolver(</span>\n<span class=\"gi\">+      dart::common::make_unique&lt;dart::constraint::PGSLCPSolver&gt;(</span>\n<span class=\"gi\">+      this-&gt;dataPtr-&gt;dtWorld-&gt;getTimeStep()));</span>\n }\n\n //////////////////////////////////////////////////\n</pre></div>", "type": "rendered"}, "created_on": "2017-08-02T18:44:44.759692+00:00", "user": {"display_name": "Peter Horak", "uuid": "{c72abe74-c12a-4128-a6fc-94f3844ac8ef}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D"}, "html": {"href": "https://bitbucket.org/%7Bc72abe74-c12a-4128-a6fc-94f3844ac8ef%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a/87d803b7-3e50-40c1-8159-a5c20abd84ea/128"}}, "nickname": "pchorak", "type": "user", "account_id": "557058:451ed60b-3cfa-4a97-b4d3-a3fc34c2b21a"}, "updated_on": "2017-08-02T18:44:44.763326+00:00", "type": "pullrequest_comment", "id": 42037862}