{"pagelen": 50, "values": [{"update": {"description": "We have built custom debs of bullet 2.82 for trusty that have double precision enabled, but the debs in Ubuntu vivid use single precision. It still works but with less accuracy and with [some test failures](http://build.osrfoundation.org/job/gazebo-any-devel-vivid-amd64-gpu-intel/1/) (note the test names ending in `/1`). This PR relaxes test expectations to allow them to pass with single-precision bullet.\r\n\r\n* In several instances where `EXPECT_DOUBLE_EQ` is used, I just change it to `EXPECT_FLOAT_EQ` for all physics engines. This slightly weakens the test for engines that are using double precision, but I think it's close enough.\r\n\r\n* In other instances, I check the size of `btScalar` and set different tolerances based on trial and error to make the tests pass.\r\n\r\n* In the contact_sensor test, the normal had correct magnitude but opposite sign, so I take the absolute value.\r\n\r\nThe tests now pass in a [gazebo-any-devel-vivid jenkins job](http://build.osrfoundation.org/job/gazebo-any-devel-vivid-amd64-gpu-intel/4/).", "title": "Relax physics tolerances for single-precision bullet", "destination": {"commit": {"hash": "9f4ce9d8855a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/9f4ce9d8855a.json"}, "html": {"href": "#!/osrf/gazebo/commits/9f4ce9d8855a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo5"}}, "reason": "", "source": {"commit": {"hash": "28d961794f18", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/28d961794f18.json"}, "html": {"href": "#!/osrf/gazebo/commits/28d961794f18"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "bullet_single_5"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-11-16T17:28:38.338848+00:00"}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}, {"approval": {"date": "2015-11-16T16:46:08.737743+00:00", "pullrequest": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}, {"approval": {"date": "2015-11-13T20:07:30.322729+00:00", "pullrequest": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976/comments/11795271.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976/_/diff#comment-11795271"}}, "parent": {"id": 11564110, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976/comments/11564110.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976/_/diff#comment-11564110"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}, "content": {"raw": "yep sounds good", "markup": "markdown", "html": "<p>yep sounds good</p>", "type": "rendered"}, "created_on": "2015-11-13T20:07:12.074041+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2015-11-13T20:07:12.079150+00:00", "type": "pullrequest_comment", "id": 11795271}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976/comments/11564110.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976/_/diff#comment-11564110"}}, "parent": {"id": 11562746, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976/comments/11562746.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976/_/diff#comment-11562746"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}, "content": {"raw": "A macro is an interesting idea, but different actions are required. Sometimes it is switching `EXPECT_FLOAT_EQ` to `EXPECT_DOUBLE_EQ`, which would be easier to generalize, since it always has two arguments. But other times, we are using `EXPECT_NEAR` and want to relax the tolerances (in this case on lines 535-536, they are multiplied by 1.6 and 2.3). In this case, we want to execute some extra code. The `#ifdef HAVE_BULLET` complicates things too.\n\nI could try to generalize the `EXPECT_FLOAT_EQ` logic, but it didn't seem like that much of a difference.", "markup": "markdown", "html": "<p>A macro is an interesting idea, but different actions are required. Sometimes it is switching <code>EXPECT_FLOAT_EQ</code> to <code>EXPECT_DOUBLE_EQ</code>, which would be easier to generalize, since it always has two arguments. But other times, we are using <code>EXPECT_NEAR</code> and want to relax the tolerances (in this case on lines 535-536, they are multiplied by 1.6 and 2.3). In this case, we want to execute some extra code. The <code>#ifdef HAVE_BULLET</code> complicates things too.</p>\n<p>I could try to generalize the <code>EXPECT_FLOAT_EQ</code> logic, but it didn't seem like that much of a difference.</p>", "type": "rendered"}, "created_on": "2015-11-06T17:57:27.505433+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2015-11-06T17:57:27.508608+00:00", "type": "pullrequest_comment", "id": 11564110}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976/comments/11562746.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976/_/diff#comment-11562746"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}, "content": {"raw": "cool, should this be made a macro or static function that determines if we need to use `EXPECT_FLOAT_EQ` or `EXPECT_DOUBLE_EQ`?", "markup": "markdown", "html": "<p>cool, should this be made a macro or static function that determines if we need to use <code>EXPECT_FLOAT_EQ</code> or <code>EXPECT_DOUBLE_EQ</code>?</p>", "type": "rendered"}, "created_on": "2015-11-06T17:14:33.651647+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2015-11-06T17:14:33.658860+00:00", "type": "pullrequest_comment", "id": 11562746}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976/comments/11444591.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976/_/diff#comment-11444591"}}, "parent": {"id": 11444561, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976/comments/11444561.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976/_/diff#comment-11444561"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}, "content": {"raw": "aside from that, the jenkins builds are clean:\n\n* http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-homebrew-amd64/619/\n* http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/610/\n* http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-no-gpu/823/", "markup": "markdown", "html": "<p>aside from that, the jenkins builds are clean:</p>\n<ul>\n<li><a href=\"http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-homebrew-amd64/619/\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-homebrew-amd64/619/</a></li>\n<li><a href=\"http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/610/\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/610/</a></li>\n<li><a href=\"http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-no-gpu/823/\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/view/gazebo/job/gazebo-any-devel-trusty-amd64-no-gpu/823/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2015-11-04T01:41:06.273680+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-11-04T01:41:06.275739+00:00", "type": "pullrequest_comment", "id": 11444591}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976/comments/11444583.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976/_/diff#comment-11444583"}}, "parent": {"id": 11444561, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976/comments/11444561.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976/_/diff#comment-11444561"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}, "content": {"raw": "[code checker fixed](https://drone.io/bitbucket.org/osrf/gazebo/9918)", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"https://drone.io/bitbucket.org/osrf/gazebo/9918\" rel=\"nofollow\">code checker fixed</a></p>", "type": "rendered"}, "created_on": "2015-11-04T01:40:36.365906+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-11-04T01:40:36.367943+00:00", "type": "pullrequest_comment", "id": 11444583}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976/comments/11444561.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976/_/diff#comment-11444561"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}, "content": {"raw": "There was a code checker complaint about reducing variable scope. There was an extra pair of curly braces in physics.cc that I removed in 28d961794f. The commit message says whitespace only, but that's not correct. It's best to view the commit without whitespace:\n\n* #!/osrf/gazebo/commits/28d961794f181db3ebaafff26f5717c6532df17d?w=1\n\nThe view this whole pull request without whitespace:\n\n* #!/osrf/gazebo/pull-requests/1976/relax-physics-tolerances-for-single/diff?w=1", "markup": "markdown", "html": "<p>There was a code checker complaint about reducing variable scope. There was an extra pair of curly braces in physics.cc that I removed in <a href=\"#!/osrf/gazebo/commits/28d961794f\" rel=\"nofollow\" class=\"ap-connect-link\">28d961794f</a>. The commit message says whitespace only, but that's not correct. It's best to view the commit without whitespace:</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/commits/28d961794f181db3ebaafff26f5717c6532df17d?w=1\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/commits/28d961794f181db3ebaafff26f5717c6532df17d?w=1</a></li>\n</ul>\n<p>The view this whole pull request without whitespace:</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/pull-requests/1976/relax-physics-tolerances-for-single/diff?w=1\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/pull-requests/1976/relax-physics-tolerances-for-single/diff?w=1</a></li>\n</ul>", "type": "rendered"}, "created_on": "2015-11-04T01:39:12.234871+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-11-04T01:39:12.237076+00:00", "type": "pullrequest_comment", "id": 11444561}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}, {"update": {"description": "We have built custom debs of bullet 2.82 for trusty that have double precision enabled, but the debs in Ubuntu vivid use single precision. It still works but with less accuracy and with [some test failures](http://build.osrfoundation.org/job/gazebo-any-devel-vivid-amd64-gpu-intel/1/) (note the test names ending in `/1`). This PR relaxes test expectations to allow them to pass with single-precision bullet.\r\n\r\n* In several instances where `EXPECT_DOUBLE_EQ` is used, I just change it to `EXPECT_FLOAT_EQ` for all physics engines. This slightly weakens the test for engines that are using double precision, but I think it's close enough.\r\n\r\n* In other instances, I check the size of `btScalar` and set different tolerances based on trial and error to make the tests pass.\r\n\r\n* In the contact_sensor test, the normal had correct magnitude but opposite sign, so I take the absolute value.\r\n\r\nThe tests now pass in a [gazebo-any-devel-vivid jenkins job](http://build.osrfoundation.org/job/gazebo-any-devel-vivid-amd64-gpu-intel/4/).", "title": "Relax physics tolerances for single-precision bullet", "destination": {"commit": {"hash": "0acd5a447f12", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/0acd5a447f12.json"}, "html": {"href": "#!/osrf/gazebo/commits/0acd5a447f12"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo5"}}, "reason": "", "source": {"commit": {"hash": "28d961794f18", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/28d961794f18.json"}, "html": {"href": "#!/osrf/gazebo/commits/28d961794f18"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "bullet_single_5"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-11-04T01:35:40.950455+00:00"}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}, {"update": {"description": "We have built custom debs of bullet 2.82 for trusty that have double precision enabled, but the debs in Ubuntu vivid use single precision. It still works but with less accuracy and with [some test failures](http://build.osrfoundation.org/job/gazebo-any-devel-vivid-amd64-gpu-intel/1/) (note the test names ending in `/1`). This PR relaxes test expectations to allow them to pass with single-precision bullet.\r\n\r\n* In several instances where `EXPECT_DOUBLE_EQ` is used, I just change it to `EXPECT_FLOAT_EQ` for all physics engines. This slightly weakens the test for engines that are using double precision, but I think it's close enough.\r\n\r\n* In other instances, I check the size of `btScalar` and set different tolerances based on trial and error to make the tests pass.\r\n\r\n* In the contact_sensor test, the normal had correct magnitude but opposite sign, so I take the absolute value.\r\n\r\nThe tests now pass in a [gazebo-any-devel-vivid jenkins job](http://build.osrfoundation.org/job/gazebo-any-devel-vivid-amd64-gpu-intel/4/).", "title": "Relax physics tolerances for single-precision bullet", "destination": {"commit": {"hash": "23899a0e721a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/23899a0e721a.json"}, "html": {"href": "#!/osrf/gazebo/commits/23899a0e721a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo5"}}, "reason": "", "source": {"commit": {"hash": "ae9e96030a41", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/ae9e96030a41.json"}, "html": {"href": "#!/osrf/gazebo/commits/ae9e96030a41"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "bullet_single_5"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-11-03T22:33:07.309722+00:00"}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}, {"update": {"description": "We have built custom debs of bullet 2.82 for trusty that have double precision enabled, but the debs in Ubuntu vivid use single precision. It still works but with less accuracy and with [some test failures](http://build.osrfoundation.org/job/gazebo-any-devel-vivid-amd64-gpu-intel/1/) (note the test names ending in `/1`). This PR relaxes test expectations to allow them to pass with single-precision bullet.\r\n\r\n* In several instances where `EXPECT_DOUBLE_EQ` is used, I just change it to `EXPECT_FLOAT_EQ` for all physics engines. This slightly weakens the test for engines that are using double precision, but I think it's close enough.\r\n\r\n* In other instances, I check the size of `btScalar` and set different tolerances based on trial and error to make the tests pass.\r\n\r\n* In the contact_sensor test, the normal had correct magnitude but opposite sign, so I take the absolute value.\r\n\r\nThe tests now pass in a [gazebo-any-devel-vivid jenkins job](http://build.osrfoundation.org/job/gazebo-any-devel-vivid-amd64-gpu-intel/4/).", "title": "Relax physics tolerances for single-precision bullet", "destination": {"commit": {"hash": "23899a0e721a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/23899a0e721a.json"}, "html": {"href": "#!/osrf/gazebo/commits/23899a0e721a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo5"}}, "reason": "", "source": {"commit": {"hash": "ae9e96030a41", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/ae9e96030a41.json"}, "html": {"href": "#!/osrf/gazebo/commits/ae9e96030a41"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "bullet_single_5"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-11-03T22:33:07.274688+00:00"}, "pull_request": {"type": "pullrequest", "id": 1976, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1976.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1976"}}, "title": "Relax physics tolerances for single-precision bullet"}}]}