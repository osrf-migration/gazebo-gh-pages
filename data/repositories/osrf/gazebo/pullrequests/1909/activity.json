{"pagelen": 50, "values": [{"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "96835b3fdd03", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/96835b3fdd03.json"}, "html": {"href": "#!/osrf/gazebo/commits/96835b3fdd03"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "f6ac5f6c6578", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/f6ac5f6c6578.json"}, "html": {"href": "#!/osrf/gazebo/commits/f6ac5f6c6578"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-10-07T18:55:49.790919+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"approval": {"date": "2015-10-07T18:47:30.340972+00:00", "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10603760.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10603760"}}, "parent": {"id": 10601719, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10601719.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10601719"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "That's a nice approach. I'd rather handle that in a separate issue, since it's a bit broader than the scope of this pull request.", "markup": "markdown", "html": "<p>That's a nice approach. I'd rather handle that in a separate issue, since it's a bit broader than the scope of this pull request.</p>", "type": "rendered"}, "created_on": "2015-10-07T18:38:08.023957+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-10-07T18:38:08.028640+00:00", "type": "pullrequest_comment", "id": 10603760}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10602226.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10602226"}}, "parent": {"id": 10601064, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10601064.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10601064"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "f6ac5f6", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/f6ac5f6\" rel=\"nofollow\" class=\"ap-connect-link\">f6ac5f6</a></p>", "type": "rendered"}, "created_on": "2015-10-07T18:02:57.760478+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2015-10-07T18:02:57.763259+00:00", "type": "pullrequest_comment", "id": 10602226}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "96835b3fdd03", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/96835b3fdd03.json"}, "html": {"href": "#!/osrf/gazebo/commits/96835b3fdd03"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "f6ac5f6c6578", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/f6ac5f6c6578.json"}, "html": {"href": "#!/osrf/gazebo/commits/f6ac5f6c6578"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-10-07T18:02:41.852988+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "96835b3fdd03", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/96835b3fdd03.json"}, "html": {"href": "#!/osrf/gazebo/commits/96835b3fdd03"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "f6ac5f6c6578", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/f6ac5f6c6578.json"}, "html": {"href": "#!/osrf/gazebo/commits/f6ac5f6c6578"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-10-07T18:02:32.954526+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10602175.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10602175"}}, "parent": {"id": 10601514, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10601514.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10601514"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "it could remove some duplicated code, but I would have to create member variables (for example `WorldPtr world`)\n\nI'll keep it in mind for the future, but I'll leave it as is for now", "markup": "markdown", "html": "<p>it could remove some duplicated code, but I would have to create member variables (for example <code>WorldPtr world</code>)</p>\n<p>I'll keep it in mind for the future, but I'll leave it as is for now</p>", "type": "rendered"}, "created_on": "2015-10-07T18:01:56.315543+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2015-10-07T18:01:56.319243+00:00", "type": "pullrequest_comment", "id": 10602175}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10601719.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10601719"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "Another optional suggestion: Take a look at the [worlds/CMakeLists.txt](https://bitbucket.org/osrf/swarm/src/117101775af898955ebb9782788ff10ed6392ed3/worlds/CMakeLists.txt?at=default&fileviewer=file-view-default) that we use for Swarm project. We automatically generate the world files based on the .erb . ", "markup": "markdown", "html": "<p>Another optional suggestion: Take a look at the <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/swarm/src/117101775af898955ebb9782788ff10ed6392ed3/worlds/CMakeLists.txt?at=default&amp;fileviewer=file-view-default\" rel=\"nofollow\">worlds/CMakeLists.txt</a> that we use for Swarm project. We automatically generate the world files based on the .erb . </p>", "type": "rendered"}, "created_on": "2015-10-07T17:49:35.315546+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": "2015-10-07T17:49:35.319192+00:00", "type": "pullrequest_comment", "id": 10601719}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10601514.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10601514"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "You could move all the common code shared among `InertialAccessors`, `SetCoG` and `SetMass` to the `InertiaMsgTest` constructor. You'll probably have to declare some member variables. Only if you think it will remove duplicated code.\n\nE.g.:\n\n```\n#!c++\nLoad(\"worlds/seesaw.world\", true, _physicsEngine);\nphysics::WorldPtr world = physics::get_world(\"default\");\nASSERT_TRUE(world != NULL);\n```", "markup": "markdown", "html": "<p>You could move all the common code shared among <code>InertialAccessors</code>, <code>SetCoG</code> and <code>SetMass</code> to the <code>InertiaMsgTest</code> constructor. You'll probably have to declare some member variables. Only if you think it will remove duplicated code.</p>\n<p>E.g.:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">Load</span><span class=\"p\">(</span><span class=\"s\">&quot;worlds/seesaw.world&quot;</span><span class=\"p\">,</span> <span class=\"nb\">true</span><span class=\"p\">,</span> <span class=\"n\">_physicsEngine</span><span class=\"p\">);</span>\n<span class=\"n\">physics</span><span class=\"o\">::</span><span class=\"n\">WorldPtr</span> <span class=\"n\">world</span> <span class=\"o\">=</span> <span class=\"n\">physics</span><span class=\"o\">::</span><span class=\"n\">get_world</span><span class=\"p\">(</span><span class=\"s\">&quot;default&quot;</span><span class=\"p\">);</span>\n<span class=\"n\">ASSERT_TRUE</span><span class=\"p\">(</span><span class=\"n\">world</span> <span class=\"o\">!=</span> <span class=\"nb\">NULL</span><span class=\"p\">);</span>\n</pre></div>", "type": "rendered"}, "created_on": "2015-10-07T17:44:20.876839+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2015-10-07T17:46:31.197492+00:00", "type": "pullrequest_comment", "id": 10601514}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10601064.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10601064"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "`#include <string>`?", "markup": "markdown", "html": "<p><code>#include &lt;string&gt;</code>?</p>", "type": "rendered"}, "created_on": "2015-10-07T17:32:10.470282+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2015-10-07T17:32:10.486050+00:00", "type": "pullrequest_comment", "id": 10601064}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10601028.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10601028"}}, "parent": {"id": 10465786, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10465786.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10465786"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "I created issue #1754 to continue this discussion, since I think I'll get two approvals before I have a chance to get this working with simbody.", "markup": "markdown", "html": "<p>I created issue <a href=\"#!/osrf/gazebo/issues/1754/update-inertia-during-simulation-in\" rel=\"nofollow\" title=\"Update inertia during simulation in simbody\" class=\"ap-connect-link\">#1754</a> to continue this discussion, since I think I'll get two approvals before I have a chance to get this working with simbody.</p>", "type": "rendered"}, "created_on": "2015-10-07T17:31:15.858741+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-10-07T17:31:15.861780+00:00", "type": "pullrequest_comment", "id": 10601028}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10600938.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10600938"}}, "parent": {"id": 10600873, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10600873.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10600873"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "thanks", "markup": "markdown", "html": "<p>thanks</p>", "type": "rendered"}, "created_on": "2015-10-07T17:28:49.381558+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-10-07T17:28:49.384650+00:00", "type": "pullrequest_comment", "id": 10600938}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10600873.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10600873"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "Merged from `gazebo6` and fixed conflicts in 51c23a9 ", "markup": "markdown", "html": "<p>Merged from <code>gazebo6</code> and fixed conflicts in <a href=\"#!/osrf/gazebo/commits/51c23a9\" rel=\"nofollow\" class=\"ap-connect-link\">51c23a9</a> </p>", "type": "rendered"}, "created_on": "2015-10-07T17:27:04.172728+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": "2015-10-07T17:27:34.052082+00:00", "type": "pullrequest_comment", "id": 10600873}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "96835b3fdd03", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/96835b3fdd03.json"}, "html": {"href": "#!/osrf/gazebo/commits/96835b3fdd03"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "51c23a9d7efb", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/51c23a9d7efb.json"}, "html": {"href": "#!/osrf/gazebo/commits/51c23a9d7efb"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2015-10-07T17:26:24.575904+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10465786.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10465786"}}, "parent": {"id": 10465682, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10465682.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10465682"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "Right, it looks like he calls `SimbodyLink::RestoreSimbodyState` and `SimbodyJoint::RestoreSimbodyState` in that loop\n\n* #!/osrf/gazebo/src/cef82190003ad/gazebo/physics/simbody/SimbodyPhysics.cc#SimbodyPhysics.cc-342\n\nthanks for the tips", "markup": "markdown", "html": "<p>Right, it looks like he calls <code>SimbodyLink::RestoreSimbodyState</code> and <code>SimbodyJoint::RestoreSimbodyState</code> in that loop</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/src/cef82190003ad/gazebo/physics/simbody/SimbodyPhysics.cc#SimbodyPhysics.cc-342\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/cef82190003ad/gazebo/physics/simbody/SimbodyPhysics.cc#SimbodyPhysics.cc-342</a></li>\n</ul>\n<p>thanks for the tips</p>", "type": "rendered"}, "created_on": "2015-10-02T19:05:41.741644+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-10-02T19:05:41.745808+00:00", "type": "pullrequest_comment", "id": 10465786}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10465682.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10465682"}}, "parent": {"id": 10465143, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10465143.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10465143"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "@scpeters, something like that could work. That's probably not sufficient though because realizeTopology() creates a virgin state in which basically everything is set to zero. If there was an existing state its values need to get transferred to the new one. Something like `SimbodyPhysics::reinitializeSystemWithCompatibleState()` that would include `newstate=realizeTopology(); newstate.updY()=oldstate.getY(); integ->initialize(newstate);` @hsu already has some similar code in there somewhere for reinitializing a modified System with an *incompatible* state, where he rummages through all the old joints to transfer any state information that is still present in the new state.", "markup": "markdown", "html": "<p>@scpeters, something like that could work. That's probably not sufficient though because realizeTopology() creates a virgin state in which basically everything is set to zero. If there was an existing state its values need to get transferred to the new one. Something like <code>SimbodyPhysics::reinitializeSystemWithCompatibleState()</code> that would include <code>newstate=realizeTopology(); newstate.updY()=oldstate.getY(); integ-&gt;initialize(newstate);</code> @hsu already has some similar code in there somewhere for reinitializing a modified System with an <em>incompatible</em> state, where he rummages through all the old joints to transfer any state information that is still present in the new state.</p>", "type": "rendered"}, "created_on": "2015-10-02T19:02:30.210810+00:00", "user": {"display_name": "Michael Sherman", "uuid": "{997c6f1e-e2a3-4f0e-8fa4-fed745840d50}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D"}, "html": {"href": "https://bitbucket.org/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/355dea43ed612b7be3c9361df2d52213d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMS-2.png"}}, "nickname": "sherm1", "type": "user", "account_id": "557058:4590c319-b75f-4187-93d4-6cec61da74f7"}, "updated_on": "2015-10-02T19:02:30.239378+00:00", "type": "pullrequest_comment", "id": 10465682}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10465143.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10465143"}}, "parent": {"id": 10465004, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10465004.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10465004"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "@sherm1 maybe we should add a function to `SimbodyPhysics` that will call `realizeTopology` and then `this->integ->initialize(state)` so it can be called by `SimbodyLink`?", "markup": "markdown", "html": "<p>@sherm1 maybe we should add a function to <code>SimbodyPhysics</code> that will call <code>realizeTopology</code> and then <code>this-&gt;integ-&gt;initialize(state)</code> so it can be called by <code>SimbodyLink</code>?</p>", "type": "rendered"}, "created_on": "2015-10-02T18:45:35.990507+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-10-02T18:45:35.998942+00:00", "type": "pullrequest_comment", "id": 10465143}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10465004.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10465004"}}, "parent": {"id": 10268930, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10268930.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10268930"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "ok, so maybe I just need to call `SimTK::State state = this->system.realizeTopology();`?\n\n* #!/osrf/gazebo/src/cef82190003ad/gazebo/physics/simbody/SimbodyPhysics.cc#SimbodyPhysics.cc-340", "markup": "markdown", "html": "<p>ok, so maybe I just need to call <code>SimTK::State state = this-&gt;system.realizeTopology();</code>?</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/src/cef82190003ad/gazebo/physics/simbody/SimbodyPhysics.cc#SimbodyPhysics.cc-340\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/cef82190003ad/gazebo/physics/simbody/SimbodyPhysics.cc#SimbodyPhysics.cc-340</a></li>\n</ul>", "type": "rendered"}, "created_on": "2015-10-02T18:41:05.319882+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-10-02T18:41:05.330103+00:00", "type": "pullrequest_comment", "id": 10465004}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464687.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464687"}}, "parent": {"id": 10464471, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464471.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464471"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "I need to check that it still compiles, since this loop is modifying some of the children", "markup": "markdown", "html": "<p>I need to check that it still compiles, since this loop is modifying some of the children</p>", "type": "rendered"}, "created_on": "2015-10-02T18:30:45.557193+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2015-10-02T18:30:45.560642+00:00", "type": "pullrequest_comment", "id": 10464687}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464647.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464647"}}, "parent": {"id": 10464628, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464628.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464628"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "Sounds good.", "markup": "markdown", "html": "<p>Sounds good.</p>", "type": "rendered"}, "created_on": "2015-10-02T18:29:42.895173+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T18:29:42.898632+00:00", "type": "pullrequest_comment", "id": 10464647}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464628.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464628"}}, "parent": {"id": 10464543, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464543.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464543"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "thanks for the review and the updates. In the other two tests, I expect gravity to be acting, otherwise it won't tip the seesaw over. However in this `InertialAccessors` test I don't need gravity, so I removed this small block of code (27a67cfe1e47)", "markup": "markdown", "html": "<p>thanks for the review and the updates. In the other two tests, I expect gravity to be acting, otherwise it won't tip the seesaw over. However in this <code>InertialAccessors</code> test I don't need gravity, so I removed this small block of code (<a href=\"#!/osrf/gazebo/commits/27a67cfe1e47\" rel=\"nofollow\" class=\"ap-connect-link\">27a67cfe1e47</a>)</p>", "type": "rendered"}, "created_on": "2015-10-02T18:29:03.241676+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2015-10-02T18:29:03.245591+00:00", "type": "pullrequest_comment", "id": 10464628}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "1d3bd2f42512", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1d3bd2f42512.json"}, "html": {"href": "#!/osrf/gazebo/commits/1d3bd2f42512"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "27a67cfe1e47", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/27a67cfe1e47.json"}, "html": {"href": "#!/osrf/gazebo/commits/27a67cfe1e47"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-10-02T18:27:55.573230+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"approval": {"date": "2015-10-02T18:27:11.915065+00:00", "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464549.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464549"}}, "parent": {"id": 10460673, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460673.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460673"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "16fffe3", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/16fffe3\" rel=\"nofollow\" class=\"ap-connect-link\">16fffe3</a></p>", "type": "rendered"}, "created_on": "2015-10-02T18:26:44.931528+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T18:26:44.934415+00:00", "type": "pullrequest_comment", "id": 10464549}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464546.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464546"}}, "parent": {"id": 10460663, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460663.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460663"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "16fffe3", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/16fffe3\" rel=\"nofollow\" class=\"ap-connect-link\">16fffe3</a></p>", "type": "rendered"}, "created_on": "2015-10-02T18:26:41.459998+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T18:26:41.467718+00:00", "type": "pullrequest_comment", "id": 10464546}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464543.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464543"}}, "parent": {"id": 10460619, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460619.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460619"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "16fffe3", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/16fffe3\" rel=\"nofollow\" class=\"ap-connect-link\">16fffe3</a></p>", "type": "rendered"}, "created_on": "2015-10-02T18:26:37.865281+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T18:26:37.868082+00:00", "type": "pullrequest_comment", "id": 10464543}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "1d3bd2f42512", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1d3bd2f42512.json"}, "html": {"href": "#!/osrf/gazebo/commits/1d3bd2f42512"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "16fffe32ac10", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/16fffe32ac10.json"}, "html": {"href": "#!/osrf/gazebo/commits/16fffe32ac10"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2015-10-02T18:26:23.794532+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "1d3bd2f42512", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1d3bd2f42512.json"}, "html": {"href": "#!/osrf/gazebo/commits/1d3bd2f42512"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "16fffe32ac10", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/16fffe32ac10.json"}, "html": {"href": "#!/osrf/gazebo/commits/16fffe32ac10"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2015-10-02T18:26:23.630932+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464472.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464472"}}, "parent": {"id": 10460508, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460508.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460508"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "b0f4dde", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/b0f4dde\" rel=\"nofollow\" class=\"ap-connect-link\">b0f4dde</a></p>", "type": "rendered"}, "created_on": "2015-10-02T18:23:59.749593+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T18:23:59.752702+00:00", "type": "pullrequest_comment", "id": 10464472}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464471.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464471"}}, "parent": {"id": 10460495, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460495.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460495"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "b0f4dde", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/b0f4dde\" rel=\"nofollow\" class=\"ap-connect-link\">b0f4dde</a></p>", "type": "rendered"}, "created_on": "2015-10-02T18:23:56.151300+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T18:23:56.157527+00:00", "type": "pullrequest_comment", "id": 10464471}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10464467.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10464467"}}, "parent": {"id": 10460467, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460467.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460467"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "b0f4dde", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/commits/b0f4dde\" rel=\"nofollow\" class=\"ap-connect-link\">b0f4dde</a></p>", "type": "rendered"}, "created_on": "2015-10-02T18:23:52.440452+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T18:23:52.443141+00:00", "type": "pullrequest_comment", "id": 10464467}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "1d3bd2f42512", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1d3bd2f42512.json"}, "html": {"href": "#!/osrf/gazebo/commits/1d3bd2f42512"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "b0f4dde35dca", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/b0f4dde35dca.json"}, "html": {"href": "#!/osrf/gazebo/commits/b0f4dde35dca"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2015-10-02T18:23:47.515578+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "1d3bd2f42512", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1d3bd2f42512.json"}, "html": {"href": "#!/osrf/gazebo/commits/1d3bd2f42512"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "b0f4dde35dca", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/b0f4dde35dca.json"}, "html": {"href": "#!/osrf/gazebo/commits/b0f4dde35dca"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2015-10-02T18:23:40.761684+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "1d3bd2f42512", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1d3bd2f42512.json"}, "html": {"href": "#!/osrf/gazebo/commits/1d3bd2f42512"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "d8771da5fcf2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/d8771da5fcf2.json"}, "html": {"href": "#!/osrf/gazebo/commits/d8771da5fcf2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2015-10-02T18:08:50.690047+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460673.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460673"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "Ditto", "markup": "markdown", "html": "<p>Ditto</p>", "type": "rendered"}, "created_on": "2015-10-02T16:09:48.899315+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T16:09:48.901903+00:00", "type": "pullrequest_comment", "id": 10460673}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460663.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460663"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "Same as above.", "markup": "markdown", "html": "<p>Same as above.</p>", "type": "rendered"}, "created_on": "2015-10-02T16:09:22.793677+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T16:09:22.796972+00:00", "type": "pullrequest_comment", "id": 10460663}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460619.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460619"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "Do you need this, or did you want to check the gravity vector?", "markup": "markdown", "html": "<p>Do you need this, or did you want to check the gravity vector?</p>", "type": "rendered"}, "created_on": "2015-10-02T16:07:48.537212+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T16:07:48.540576+00:00", "type": "pullrequest_comment", "id": 10460619}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "1f8a448d1fbf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1f8a448d1fbf.json"}, "html": {"href": "#!/osrf/gazebo/commits/1f8a448d1fbf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "7a6ce0b160c4", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/7a6ce0b160c4.json"}, "html": {"href": "#!/osrf/gazebo/commits/7a6ce0b160c4"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2015-10-02T16:05:26.910440+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "1f8a448d1fbf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1f8a448d1fbf.json"}, "html": {"href": "#!/osrf/gazebo/commits/1f8a448d1fbf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "7a6ce0b160c4", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/7a6ce0b160c4.json"}, "html": {"href": "#!/osrf/gazebo/commits/7a6ce0b160c4"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2015-10-02T16:05:20.326668+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460508.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460508"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "Same as above.", "markup": "markdown", "html": "<p>Same as above.</p>", "type": "rendered"}, "created_on": "2015-10-02T16:04:08.998183+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T16:04:09.010291+00:00", "type": "pullrequest_comment", "id": 10460508}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460495.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460495"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "Can this be `auto const &childe : this->children`?", "markup": "markdown", "html": "<p>Can this be <code>auto const &amp;childe : this-&gt;children</code>?</p>", "type": "rendered"}, "created_on": "2015-10-02T16:03:39.731123+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T16:03:39.734575+00:00", "type": "pullrequest_comment", "id": 10460495}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10460467.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10460467"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "Can this be `auto const &child : this->children`?", "markup": "markdown", "html": "<p>Can this be <code>auto const &amp;child : this-&gt;children</code>?</p>", "type": "rendered"}, "created_on": "2015-10-02T16:02:36.295305+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2015-10-02T16:02:36.299330+00:00", "type": "pullrequest_comment", "id": 10460467}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "1f8a448d1fbf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1f8a448d1fbf.json"}, "html": {"href": "#!/osrf/gazebo/commits/1f8a448d1fbf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "5f2f44407438", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/5f2f44407438.json"}, "html": {"href": "#!/osrf/gazebo/commits/5f2f44407438"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2015-10-02T16:02:05.805759+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "1f50d42b51b3", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1f50d42b51b3.json"}, "html": {"href": "#!/osrf/gazebo/commits/1f50d42b51b3"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "a5851be54e1c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/a5851be54e1c.json"}, "html": {"href": "#!/osrf/gazebo/commits/a5851be54e1c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-10-01T23:44:15.043928+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "6caf5e00d9ec", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/6caf5e00d9ec.json"}, "html": {"href": "#!/osrf/gazebo/commits/6caf5e00d9ec"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "e6d86755cfb1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/e6d86755cfb1.json"}, "html": {"href": "#!/osrf/gazebo/commits/e6d86755cfb1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-10-01T19:19:19.707607+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10268930.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10268930"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "I think this will require using the same Gazebo code that @hsu wrote for reinitializing after adding new bodies to the system. If I remember it correctly it is basically a re-creation of the system and a new state, followed by a transfer of all the corresponding information from the old state to the new one. In the case where only mass properties have been changed, the generalized coordinates q and speeds u will be exactly the same in the old and new states so can be copied in bulk with `newState.updY()=oldState.getY()` where Y is a vector containing all the continuous state variables concatenated together. That's easier than what John had to do because he had to go joint-by-joint to find corresponding coordinates, but you might be able to just re-use John's method.", "markup": "markdown", "html": "<p>I think this will require using the same Gazebo code that @hsu wrote for reinitializing after adding new bodies to the system. If I remember it correctly it is basically a re-creation of the system and a new state, followed by a transfer of all the corresponding information from the old state to the new one. In the case where only mass properties have been changed, the generalized coordinates q and speeds u will be exactly the same in the old and new states so can be copied in bulk with <code>newState.updY()=oldState.getY()</code> where Y is a vector containing all the continuous state variables concatenated together. That's easier than what John had to do because he had to go joint-by-joint to find corresponding coordinates, but you might be able to just re-use John's method.</p>", "type": "rendered"}, "created_on": "2015-09-27T21:44:56.124641+00:00", "user": {"display_name": "Michael Sherman", "uuid": "{997c6f1e-e2a3-4f0e-8fa4-fed745840d50}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D"}, "html": {"href": "https://bitbucket.org/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/355dea43ed612b7be3c9361df2d52213d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMS-2.png"}}, "nickname": "sherm1", "type": "user", "account_id": "557058:4590c319-b75f-4187-93d4-6cec61da74f7"}, "updated_on": "2015-09-27T21:44:56.134270+00:00", "type": "pullrequest_comment", "id": 10268930}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10266666.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10266666"}}, "parent": {"id": 10263161, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10263161.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10263161"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "I'm giving it a try. To which stage should I reinitialize the state? Also, how do I reinitialize the system?", "markup": "markdown", "html": "<p>I'm giving it a try. To which stage should I reinitialize the state? Also, how do I reinitialize the system?</p>", "type": "rendered"}, "created_on": "2015-09-27T07:55:11.797108+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-09-27T07:55:11.799385+00:00", "type": "pullrequest_comment", "id": 10266666}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean\r\n\r\nUpdate: more happy jenkins builds\r\n\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-homebrew-amd64/532/\r\n* http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-gpu-nvidia/524/", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "2c88cd6b8063", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2c88cd6b8063.json"}, "html": {"href": "#!/osrf/gazebo/commits/2c88cd6b8063"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "985ed5dffda4", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/985ed5dffda4.json"}, "html": {"href": "#!/osrf/gazebo/commits/985ed5dffda4"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-09-26T20:26:55.864319+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909/comments/10263161.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909/_/diff#comment-10263161"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}, "content": {"raw": "Hi, Steve. Simbody maintains mass properties as (mass, center of mass, *unit* inertia) so changing the mass has the effect of updating the inertia properties also. (Not sure why everyone doesn't do it that way -- everyone stores the COM mass-unweighted; it is inconsistent to apply the mass to the second mass moment but not the first, which is m*COM.)\n\nFor a SimbodyLink, you would get writable access to the corresponding `SimTK::MobilizedBody`, which is (conceptually) a (body,joint) pair. To get writable access to the contained `SimTK::Body`, use mobod.updBody(). Then:\n```c++\nBody& body = mobod.updBody();\nconst MassProperties& old = body.getDefaultRigidBodyMassProperties();\nbody.setDefaultRigidBodyMassProperties(MassProperties(newmass, old.getMassCenter(), old.getUnitInertia());\n``` \n\nCurrently that's the only way to change mass properties in an already-built Simbody MultibodySystem. Because it is changing the \"default\" mass properties it is considered a topological change to the *System* and requires reinitializing the system and state. That might be too extreme for what you have in mind. I have on my things-to-do list to allow changing the mass props within an existing State, leaving the system alone. If that turns out to be necessary, please file a Simbody issue; I don't think there is one currently.\n\nRegards,\nSherm", "markup": "markdown", "html": "<p>Hi, Steve. Simbody maintains mass properties as (mass, center of mass, <em>unit</em> inertia) so changing the mass has the effect of updating the inertia properties also. (Not sure why everyone doesn't do it that way -- everyone stores the COM mass-unweighted; it is inconsistent to apply the mass to the second mass moment but not the first, which is m*COM.)</p>\n<p>For a SimbodyLink, you would get writable access to the corresponding <code>SimTK::MobilizedBody</code>, which is (conceptually) a (body,joint) pair. To get writable access to the contained <code>SimTK::Body</code>, use mobod.updBody(). Then:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">Body</span><span class=\"o\">&amp;</span> <span class=\"n\">body</span> <span class=\"o\">=</span> <span class=\"n\">mobod</span><span class=\"p\">.</span><span class=\"n\">updBody</span><span class=\"p\">();</span>\n<span class=\"k\">const</span> <span class=\"n\">MassProperties</span><span class=\"o\">&amp;</span> <span class=\"n\">old</span> <span class=\"o\">=</span> <span class=\"n\">body</span><span class=\"p\">.</span><span class=\"n\">getDefaultRigidBodyMassProperties</span><span class=\"p\">();</span>\n<span class=\"n\">body</span><span class=\"p\">.</span><span class=\"n\">setDefaultRigidBodyMassProperties</span><span class=\"p\">(</span><span class=\"n\">MassProperties</span><span class=\"p\">(</span><span class=\"n\">newmass</span><span class=\"p\">,</span> <span class=\"n\">old</span><span class=\"p\">.</span><span class=\"n\">getMassCenter</span><span class=\"p\">(),</span> <span class=\"n\">old</span><span class=\"p\">.</span><span class=\"n\">getUnitInertia</span><span class=\"p\">());</span>\n</pre></div>\n\n\n<p>Currently that's the only way to change mass properties in an already-built Simbody MultibodySystem. Because it is changing the \"default\" mass properties it is considered a topological change to the <em>System</em> and requires reinitializing the system and state. That might be too extreme for what you have in mind. I have on my things-to-do list to allow changing the mass props within an existing State, leaving the system alone. If that turns out to be necessary, please file a Simbody issue; I don't think there is one currently.</p>\n<p>Regards,\nSherm</p>", "type": "rendered"}, "created_on": "2015-09-26T01:31:23.482555+00:00", "user": {"display_name": "Michael Sherman", "uuid": "{997c6f1e-e2a3-4f0e-8fa4-fed745840d50}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D"}, "html": {"href": "https://bitbucket.org/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/355dea43ed612b7be3c9361df2d52213d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMS-2.png"}}, "nickname": "sherm1", "type": "user", "account_id": "557058:4590c319-b75f-4187-93d4-6cec61da74f7"}, "updated_on": "2015-09-26T01:32:21.230800+00:00", "type": "pullrequest_comment", "id": 10263161}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}, {"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "2c88cd6b8063", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2c88cd6b8063.json"}, "html": {"href": "#!/osrf/gazebo/commits/2c88cd6b8063"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "985ed5dffda4", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/985ed5dffda4.json"}, "html": {"href": "#!/osrf/gazebo/commits/985ed5dffda4"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-09-25T23:30:53.098884+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}], "next": "data/repositories/osrf/gazebo/pullrequests/1909/activity_ctx=kjUXXHnSz.json"}