{"pagelen": 50, "values": [{"update": {"description": "This is based on a [design document for graphical inertia modification](#!/osrf/gazebo_design/src/default/inertia_resize/inertia_resize.md). This adds tests to confirm that modifying mass and center-of-mass location with a `~/model/modify` message will actually update the inertia. Updating the inertia matrix will follow in a subsequent pull request.\r\n\r\nThe first test `InertialAccessors` updates inertial properties with a message and verifies that the C++ API reflects the change. This tests passes with each physics engine, since it is only checking the `physics::Inertial` object.\r\n\r\nThe `SetMass` and `SetCoG` tests use the `seesaw.world`, which has a few boxes stacked together and balancing:\r\n\r\n![seesaw.png](https://bitbucket.org/repo/jgXqbo/images/4131299900-seesaw.png)\r\n\r\nOne test increases the mass on one of the balanced boxes, and the other test moves the center-of-mass of the balancing plank away from the center. Each test assumes that the seesaw will tip over.\r\n\r\nThese tests require the `Link::UpdateMass` virtual function to be implemented for each physics engine. I added `BulletLink::UpdateMass`, `SimbodyLink::UpdateMass` and `DARTLink::UpdateMass` since they did not exist. I verified that the [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean.\r\n\r\nI fixed `SetMass` for bullet in ca3b4789ed0b and for DART in b2fd97c7b7b4. As a bonus, `SetCoG` was fixed for DART by those changes as well.\r\n\r\nThe `SetCoG` test was broken for ODE; fixing it required updating all the collision offsets. Bullet will require something similar, though I haven\u2019t attempted it yet.\r\n\r\nFor the ODE fix, I also reduced some code duplication by calling `ODELink::UpdateSurface` from `ODELink::Init` and creating `ODELink::UpdateCollisionOffsets` that could be called from `Init` and `UpdateMass`. \r\n\r\nI haven\u2019t tried with Simbody. I\u2019ll cc @sherm1 to see what he recommends.\r\n\r\nJenkins results:\r\n\r\n* [ABI checker](http://build.osrfoundation.org/view/API_ABI%20checker/job/gazebo-any_to_any-abichecker-vivid-amd64/24/API_ABI_report/) is clean\r\n\r\n* [trusty no-gpu](http://build.osrfoundation.org/job/gazebo-any-devel-trusty-amd64-no-gpu/680/) is clean\r\n\r\n* [trusty nvidia dart4](http://build.osrfoundation.org/view/gazebo/job/gazebo-any_dart4-devel-trusty-amd64-gpu-nvidia/85) is clean", "title": "Update inertia properties during simulation: part 1", "destination": {"commit": {"hash": "2c88cd6b8063", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/2c88cd6b8063.json"}, "html": {"href": "#!/osrf/gazebo/commits/2c88cd6b8063"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo6"}}, "reason": "", "source": {"commit": {"hash": "985ed5dffda4", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/985ed5dffda4.json"}, "html": {"href": "#!/osrf/gazebo/commits/985ed5dffda4"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "inertia_msgs"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2015-09-25T23:30:53.071629+00:00"}, "pull_request": {"type": "pullrequest", "id": 1909, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1909.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1909"}}, "title": "Update inertia properties during simulation: part 1"}}]}