{"rendered": {"description": {"raw": "I wanted pull request #1199 merged so I could make another pull request, but there was a test failure I didn't notice at the time:\r\n~~~\r\n[ RUN      ] PhysicsEngines/HeightmapTest.PhysicsLoad/1\r\n...\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n[Switching to Thread 0x7fffd9828700 (LWP 6940)]\r\ngazebo::math::Vector3::Vector3 (this=0x7fffd9826fc0, _x=@0x68: <error reading variable>, _y=@0x70: <error reading variable>, \r\n    _z=@0x78: <error reading variable>) at /tmp/gazebo_build/source/gazebo/math/Vector3.cc:42\r\n42\t    : x(_x), y(_y), z(_z)\r\n(gdb) bt\r\n#0  gazebo::math::Vector3::Vector3 (this=0x7fffd9826fc0, _x=@0x68: <error reading variable>, _y=@0x70: <error reading variable>, \r\n    _z=@0x78: <error reading variable>) at /tmp/gazebo_build/source/gazebo/math/Vector3.cc:42\r\n#1  0x00007ffff198b270 in ConvertVector3 (_bt=...) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletTypes.hh:62\r\n#2  ConvertPose (_bt=...) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletTypes.hh:96\r\n#3  gazebo::physics::BulletMotionState::setWorldTransform (this=0x7fffd43ac930) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletMotionState.cc:58\r\n#4  0x00007ffff1970a10 in gazebo::physics::BulletHeightmapShape::Init (this=<optimized out>)\r\n    at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletHeightmapShape.cc:97\r\n#5  0x00007ffff75e1062 in gazebo::physics::Collision::Init (this=0x7fffd68249a0) at /tmp/gazebo_build/source/gazebo/physics/Collision.cc:108\r\n#6  0x00007ffff7620eb0 in gazebo::physics::Link::Init (this=this@entry=0x7fffd413c420) at /tmp/gazebo_build/source/gazebo/physics/Link.cc:241\r\n#7  0x00007ffff197ed06 in gazebo::physics::BulletLink::Init (this=0x7fffd413c420) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletLink.cc:72\r\n#8  0x00007ffff7632fe7 in gazebo::physics::Model::Init (this=0x7fffd42c2e10) at /tmp/gazebo_build/source/gazebo/physics/Model.cc:171\r\n#9  0x00007ffff76609bb in gazebo::physics::World::Init (this=0x7fffd4d53a00) at /tmp/gazebo_build/source/gazebo/physics/World.cc:332\r\n#10 0x00007ffff7645cb2 in gazebo::physics::init_worlds () at /tmp/gazebo_build/source/gazebo/physics/PhysicsIface.cc:93\r\n#11 0x00000000004422e5 in gazebo::Server::LoadImpl (this=this@entry=0x7fffd4a3b690, _elem=..., _physics=...) at /tmp/gazebo_build/source/gazebo/Server.cc:402\r\n#12 0x0000000000442cdc in gazebo::Server::LoadFile (this=0x7fffd4a3b690, _filename=..., _physics=...) at /tmp/gazebo_build/source/gazebo/Server.cc:304\r\n#13 0x0000000000455032 in ServerFixture::RunServer (this=0x8e9ed0, _worldFilename=..., _paused=<optimized out>, _physics=...)\r\n    at /tmp/gazebo_build/source/test/ServerFixture.cc:219\r\n#14 0x00007ffff5ab3a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#15 0x00007ffff66e4182 in start_thread (arg=0x7fffd9828700) at pthread_create.c:312\r\n#16 0x00007ffff4700fbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n(gdb)\r\n~~~\r\nThe key element is the change to [BulletMotionState.cc](#!/osrf/gazebo/commits/1eaf9674dd66c0266a54216e3beaf68a4feb27cd#chg-gazebo/physics/bullet/BulletMotionState.cc), which presumed the existence of a bullet link data structure, which was being accessed too early by the `BulletHeightmap::Init` function class.\r\n\r\nThe Jenkins gpu jobs are required to see this test failure, but they are currently not running due to build machine issues.", "markup": "markdown", "html": "<p>I wanted <a href=\"#!/osrf/gazebo/pull-requests/1199/partial-fixes-for-bullet-off-by-one\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1199</a> merged so I could make another pull request, but there was a test failure I didn't notice at the time:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">[</span> <span class=\"n\">RUN</span>      <span class=\"p\">]</span> <span class=\"n\">PhysicsEngines</span><span class=\"o\">/</span><span class=\"n\">HeightmapTest</span><span class=\"p\">.</span><span class=\"n\">PhysicsLoad</span><span class=\"o\">/</span><span class=\"mi\">1</span>\n<span class=\"p\">...</span>\n<span class=\"n\">Program</span> <span class=\"n\">received</span> <span class=\"n\">signal</span> <span class=\"n\">SIGSEGV</span><span class=\"p\">,</span> <span class=\"n\">Segmentation</span> <span class=\"n\">fault</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Switching</span> <span class=\"n\">to</span> <span class=\"n\">Thread</span> <span class=\"mh\">0x7fffd9828700</span> <span class=\"p\">(</span><span class=\"n\">LWP</span> <span class=\"mi\">6940</span><span class=\"p\">)]</span>\n<span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">Vector3</span><span class=\"o\">::</span><span class=\"n\">Vector3</span> <span class=\"p\">(</span><span class=\"n\">this</span><span class=\"o\">=</span><span class=\"mh\">0x7fffd9826fc0</span><span class=\"p\">,</span> <span class=\"n\">_x</span><span class=\"o\">=</span><span class=\"mh\">@0x68</span><span class=\"o\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">error</span> <span class=\"n\">reading</span> <span class=\"n\">variable</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">_y</span><span class=\"o\">=</span><span class=\"mh\">@0x70</span><span class=\"o\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">error</span> <span class=\"n\">reading</span> <span class=\"n\">variable</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> \n    <span class=\"n\">_z</span><span class=\"o\">=</span><span class=\"mh\">@0x78</span><span class=\"o\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">error</span> <span class=\"n\">reading</span> <span class=\"n\">variable</span><span class=\"o\">&gt;</span><span class=\"p\">)</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo_build</span><span class=\"o\">/</span><span class=\"n\">source</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">math</span><span class=\"o\">/</span><span class=\"n\">Vector3</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">42</span>\n<span class=\"mi\">42</span>      <span class=\"o\">:</span> <span class=\"n\">x</span><span class=\"p\">(</span><span class=\"n\">_x</span><span class=\"p\">),</span> <span class=\"n\">y</span><span class=\"p\">(</span><span class=\"n\">_y</span><span class=\"p\">),</span> <span class=\"n\">z</span><span class=\"p\">(</span><span class=\"n\">_z</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span> <span class=\"n\">bt</span>\n<span class=\"cp\">#0  gazebo::math::Vector3::Vector3 (this=0x7fffd9826fc0, _x=@0x68: &lt;error reading variable&gt;, _y=@0x70: &lt;error reading variable&gt;, </span>\n    <span class=\"n\">_z</span><span class=\"o\">=</span><span class=\"mh\">@0x78</span><span class=\"o\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">error</span> <span class=\"n\">reading</span> <span class=\"n\">variable</span><span class=\"o\">&gt;</span><span class=\"p\">)</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo_build</span><span class=\"o\">/</span><span class=\"n\">source</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">math</span><span class=\"o\">/</span><span class=\"n\">Vector3</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">42</span>\n<span class=\"cp\">#1  0x00007ffff198b270 in ConvertVector3 (_bt=...) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletTypes.hh:62</span>\n<span class=\"cp\">#2  ConvertPose (_bt=...) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletTypes.hh:96</span>\n<span class=\"cp\">#3  gazebo::physics::BulletMotionState::setWorldTransform (this=0x7fffd43ac930) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletMotionState.cc:58</span>\n<span class=\"cp\">#4  0x00007ffff1970a10 in gazebo::physics::BulletHeightmapShape::Init (this=&lt;optimized out&gt;)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo_build</span><span class=\"o\">/</span><span class=\"n\">source</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">physics</span><span class=\"o\">/</span><span class=\"n\">bullet</span><span class=\"o\">/</span><span class=\"n\">BulletHeightmapShape</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">97</span>\n<span class=\"cp\">#5  0x00007ffff75e1062 in gazebo::physics::Collision::Init (this=0x7fffd68249a0) at /tmp/gazebo_build/source/gazebo/physics/Collision.cc:108</span>\n<span class=\"cp\">#6  0x00007ffff7620eb0 in gazebo::physics::Link::Init (this=this@entry=0x7fffd413c420) at /tmp/gazebo_build/source/gazebo/physics/Link.cc:241</span>\n<span class=\"cp\">#7  0x00007ffff197ed06 in gazebo::physics::BulletLink::Init (this=0x7fffd413c420) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletLink.cc:72</span>\n<span class=\"cp\">#8  0x00007ffff7632fe7 in gazebo::physics::Model::Init (this=0x7fffd42c2e10) at /tmp/gazebo_build/source/gazebo/physics/Model.cc:171</span>\n<span class=\"cp\">#9  0x00007ffff76609bb in gazebo::physics::World::Init (this=0x7fffd4d53a00) at /tmp/gazebo_build/source/gazebo/physics/World.cc:332</span>\n<span class=\"cp\">#10 0x00007ffff7645cb2 in gazebo::physics::init_worlds () at /tmp/gazebo_build/source/gazebo/physics/PhysicsIface.cc:93</span>\n<span class=\"cp\">#11 0x00000000004422e5 in gazebo::Server::LoadImpl (this=this@entry=0x7fffd4a3b690, _elem=..., _physics=...) at /tmp/gazebo_build/source/gazebo/Server.cc:402</span>\n<span class=\"cp\">#12 0x0000000000442cdc in gazebo::Server::LoadFile (this=0x7fffd4a3b690, _filename=..., _physics=...) at /tmp/gazebo_build/source/gazebo/Server.cc:304</span>\n<span class=\"cp\">#13 0x0000000000455032 in ServerFixture::RunServer (this=0x8e9ed0, _worldFilename=..., _paused=&lt;optimized out&gt;, _physics=...)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo_build</span><span class=\"o\">/</span><span class=\"n\">source</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">ServerFixture</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">219</span>\n<span class=\"cp\">#14 0x00007ffff5ab3a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0</span>\n<span class=\"cp\">#15 0x00007ffff66e4182 in start_thread (arg=0x7fffd9828700) at pthread_create.c:312</span>\n<span class=\"cp\">#16 0x00007ffff4700fbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>The key element is the change to <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/commits/1eaf9674dd66c0266a54216e3beaf68a4feb27cd#chg-gazebo/physics/bullet/BulletMotionState.cc\" rel=\"nofollow\">BulletMotionState.cc</a>, which presumed the existence of a bullet link data structure, which was being accessed too early by the <code>BulletHeightmap::Init</code> function class.</p>\n<p>The Jenkins gpu jobs are required to see this test failure, but they are currently not running due to build machine issues.</p>", "type": "rendered"}, "title": {"raw": "Fix heightmap test failure caused by pull request #1199", "markup": "markdown", "html": "<p>Fix heightmap test failure caused by <a href=\"#!/osrf/gazebo/pull-requests/1199/partial-fixes-for-bullet-off-by-one\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1199</a></p>", "type": "rendered"}}, "type": "pullrequest", "description": "I wanted pull request #1199 merged so I could make another pull request, but there was a test failure I didn't notice at the time:\r\n~~~\r\n[ RUN      ] PhysicsEngines/HeightmapTest.PhysicsLoad/1\r\n...\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n[Switching to Thread 0x7fffd9828700 (LWP 6940)]\r\ngazebo::math::Vector3::Vector3 (this=0x7fffd9826fc0, _x=@0x68: <error reading variable>, _y=@0x70: <error reading variable>, \r\n    _z=@0x78: <error reading variable>) at /tmp/gazebo_build/source/gazebo/math/Vector3.cc:42\r\n42\t    : x(_x), y(_y), z(_z)\r\n(gdb) bt\r\n#0  gazebo::math::Vector3::Vector3 (this=0x7fffd9826fc0, _x=@0x68: <error reading variable>, _y=@0x70: <error reading variable>, \r\n    _z=@0x78: <error reading variable>) at /tmp/gazebo_build/source/gazebo/math/Vector3.cc:42\r\n#1  0x00007ffff198b270 in ConvertVector3 (_bt=...) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletTypes.hh:62\r\n#2  ConvertPose (_bt=...) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletTypes.hh:96\r\n#3  gazebo::physics::BulletMotionState::setWorldTransform (this=0x7fffd43ac930) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletMotionState.cc:58\r\n#4  0x00007ffff1970a10 in gazebo::physics::BulletHeightmapShape::Init (this=<optimized out>)\r\n    at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletHeightmapShape.cc:97\r\n#5  0x00007ffff75e1062 in gazebo::physics::Collision::Init (this=0x7fffd68249a0) at /tmp/gazebo_build/source/gazebo/physics/Collision.cc:108\r\n#6  0x00007ffff7620eb0 in gazebo::physics::Link::Init (this=this@entry=0x7fffd413c420) at /tmp/gazebo_build/source/gazebo/physics/Link.cc:241\r\n#7  0x00007ffff197ed06 in gazebo::physics::BulletLink::Init (this=0x7fffd413c420) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletLink.cc:72\r\n#8  0x00007ffff7632fe7 in gazebo::physics::Model::Init (this=0x7fffd42c2e10) at /tmp/gazebo_build/source/gazebo/physics/Model.cc:171\r\n#9  0x00007ffff76609bb in gazebo::physics::World::Init (this=0x7fffd4d53a00) at /tmp/gazebo_build/source/gazebo/physics/World.cc:332\r\n#10 0x00007ffff7645cb2 in gazebo::physics::init_worlds () at /tmp/gazebo_build/source/gazebo/physics/PhysicsIface.cc:93\r\n#11 0x00000000004422e5 in gazebo::Server::LoadImpl (this=this@entry=0x7fffd4a3b690, _elem=..., _physics=...) at /tmp/gazebo_build/source/gazebo/Server.cc:402\r\n#12 0x0000000000442cdc in gazebo::Server::LoadFile (this=0x7fffd4a3b690, _filename=..., _physics=...) at /tmp/gazebo_build/source/gazebo/Server.cc:304\r\n#13 0x0000000000455032 in ServerFixture::RunServer (this=0x8e9ed0, _worldFilename=..., _paused=<optimized out>, _physics=...)\r\n    at /tmp/gazebo_build/source/test/ServerFixture.cc:219\r\n#14 0x00007ffff5ab3a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#15 0x00007ffff66e4182 in start_thread (arg=0x7fffd9828700) at pthread_create.c:312\r\n#16 0x00007ffff4700fbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n(gdb)\r\n~~~\r\nThe key element is the change to [BulletMotionState.cc](#!/osrf/gazebo/commits/1eaf9674dd66c0266a54216e3beaf68a4feb27cd#chg-gazebo/physics/bullet/BulletMotionState.cc), which presumed the existence of a bullet link data structure, which was being accessed too early by the `BulletHeightmap::Init` function class.\r\n\r\nThe Jenkins gpu jobs are required to see this test failure, but they are currently not running due to build machine issues.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/1217/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diffstat/osrf/gazebo:4eadebad82e9%0D1eaf9674dd66?from_pullrequest_id=1217"}, "commits": {"href": "data/repositories/osrf/gazebo/pullrequests/1217/commits.json"}, "self": {"href": "data/repositories/osrf/gazebo/pullrequests/1217.json"}, "comments": {"href": "data/repositories/osrf/gazebo/pullrequests/1217/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/1217/merge"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1217"}, "activity": {"href": "data/repositories/osrf/gazebo/pullrequests/1217/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/osrf/gazebo:4eadebad82e9%0D1eaf9674dd66?from_pullrequest_id=1217"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/pullrequests/1217/approve"}, "statuses": {"href": "data/repositories/osrf/gazebo/pullrequests/1217/statuses_page=1.json"}}, "title": "Fix heightmap test failure caused by pull request #1199", "close_source_branch": true, "reviewers": [], "id": 1217, "destination": {"commit": {"hash": "1eaf9674dd66", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/1eaf9674dd66.json"}, "html": {"href": "#!/osrf/gazebo/commits/1eaf9674dd66"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "gazebo_3.1"}}, "created_on": "2014-10-01T16:41:36.807930+00:00", "summary": {"raw": "I wanted pull request #1199 merged so I could make another pull request, but there was a test failure I didn't notice at the time:\r\n~~~\r\n[ RUN      ] PhysicsEngines/HeightmapTest.PhysicsLoad/1\r\n...\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n[Switching to Thread 0x7fffd9828700 (LWP 6940)]\r\ngazebo::math::Vector3::Vector3 (this=0x7fffd9826fc0, _x=@0x68: <error reading variable>, _y=@0x70: <error reading variable>, \r\n    _z=@0x78: <error reading variable>) at /tmp/gazebo_build/source/gazebo/math/Vector3.cc:42\r\n42\t    : x(_x), y(_y), z(_z)\r\n(gdb) bt\r\n#0  gazebo::math::Vector3::Vector3 (this=0x7fffd9826fc0, _x=@0x68: <error reading variable>, _y=@0x70: <error reading variable>, \r\n    _z=@0x78: <error reading variable>) at /tmp/gazebo_build/source/gazebo/math/Vector3.cc:42\r\n#1  0x00007ffff198b270 in ConvertVector3 (_bt=...) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletTypes.hh:62\r\n#2  ConvertPose (_bt=...) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletTypes.hh:96\r\n#3  gazebo::physics::BulletMotionState::setWorldTransform (this=0x7fffd43ac930) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletMotionState.cc:58\r\n#4  0x00007ffff1970a10 in gazebo::physics::BulletHeightmapShape::Init (this=<optimized out>)\r\n    at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletHeightmapShape.cc:97\r\n#5  0x00007ffff75e1062 in gazebo::physics::Collision::Init (this=0x7fffd68249a0) at /tmp/gazebo_build/source/gazebo/physics/Collision.cc:108\r\n#6  0x00007ffff7620eb0 in gazebo::physics::Link::Init (this=this@entry=0x7fffd413c420) at /tmp/gazebo_build/source/gazebo/physics/Link.cc:241\r\n#7  0x00007ffff197ed06 in gazebo::physics::BulletLink::Init (this=0x7fffd413c420) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletLink.cc:72\r\n#8  0x00007ffff7632fe7 in gazebo::physics::Model::Init (this=0x7fffd42c2e10) at /tmp/gazebo_build/source/gazebo/physics/Model.cc:171\r\n#9  0x00007ffff76609bb in gazebo::physics::World::Init (this=0x7fffd4d53a00) at /tmp/gazebo_build/source/gazebo/physics/World.cc:332\r\n#10 0x00007ffff7645cb2 in gazebo::physics::init_worlds () at /tmp/gazebo_build/source/gazebo/physics/PhysicsIface.cc:93\r\n#11 0x00000000004422e5 in gazebo::Server::LoadImpl (this=this@entry=0x7fffd4a3b690, _elem=..., _physics=...) at /tmp/gazebo_build/source/gazebo/Server.cc:402\r\n#12 0x0000000000442cdc in gazebo::Server::LoadFile (this=0x7fffd4a3b690, _filename=..., _physics=...) at /tmp/gazebo_build/source/gazebo/Server.cc:304\r\n#13 0x0000000000455032 in ServerFixture::RunServer (this=0x8e9ed0, _worldFilename=..., _paused=<optimized out>, _physics=...)\r\n    at /tmp/gazebo_build/source/test/ServerFixture.cc:219\r\n#14 0x00007ffff5ab3a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#15 0x00007ffff66e4182 in start_thread (arg=0x7fffd9828700) at pthread_create.c:312\r\n#16 0x00007ffff4700fbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n(gdb)\r\n~~~\r\nThe key element is the change to [BulletMotionState.cc](#!/osrf/gazebo/commits/1eaf9674dd66c0266a54216e3beaf68a4feb27cd#chg-gazebo/physics/bullet/BulletMotionState.cc), which presumed the existence of a bullet link data structure, which was being accessed too early by the `BulletHeightmap::Init` function class.\r\n\r\nThe Jenkins gpu jobs are required to see this test failure, but they are currently not running due to build machine issues.", "markup": "markdown", "html": "<p>I wanted <a href=\"#!/osrf/gazebo/pull-requests/1199/partial-fixes-for-bullet-off-by-one\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1199</a> merged so I could make another pull request, but there was a test failure I didn't notice at the time:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">[</span> <span class=\"n\">RUN</span>      <span class=\"p\">]</span> <span class=\"n\">PhysicsEngines</span><span class=\"o\">/</span><span class=\"n\">HeightmapTest</span><span class=\"p\">.</span><span class=\"n\">PhysicsLoad</span><span class=\"o\">/</span><span class=\"mi\">1</span>\n<span class=\"p\">...</span>\n<span class=\"n\">Program</span> <span class=\"n\">received</span> <span class=\"n\">signal</span> <span class=\"n\">SIGSEGV</span><span class=\"p\">,</span> <span class=\"n\">Segmentation</span> <span class=\"n\">fault</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Switching</span> <span class=\"n\">to</span> <span class=\"n\">Thread</span> <span class=\"mh\">0x7fffd9828700</span> <span class=\"p\">(</span><span class=\"n\">LWP</span> <span class=\"mi\">6940</span><span class=\"p\">)]</span>\n<span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">Vector3</span><span class=\"o\">::</span><span class=\"n\">Vector3</span> <span class=\"p\">(</span><span class=\"n\">this</span><span class=\"o\">=</span><span class=\"mh\">0x7fffd9826fc0</span><span class=\"p\">,</span> <span class=\"n\">_x</span><span class=\"o\">=</span><span class=\"mh\">@0x68</span><span class=\"o\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">error</span> <span class=\"n\">reading</span> <span class=\"n\">variable</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">_y</span><span class=\"o\">=</span><span class=\"mh\">@0x70</span><span class=\"o\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">error</span> <span class=\"n\">reading</span> <span class=\"n\">variable</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> \n    <span class=\"n\">_z</span><span class=\"o\">=</span><span class=\"mh\">@0x78</span><span class=\"o\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">error</span> <span class=\"n\">reading</span> <span class=\"n\">variable</span><span class=\"o\">&gt;</span><span class=\"p\">)</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo_build</span><span class=\"o\">/</span><span class=\"n\">source</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">math</span><span class=\"o\">/</span><span class=\"n\">Vector3</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">42</span>\n<span class=\"mi\">42</span>      <span class=\"o\">:</span> <span class=\"n\">x</span><span class=\"p\">(</span><span class=\"n\">_x</span><span class=\"p\">),</span> <span class=\"n\">y</span><span class=\"p\">(</span><span class=\"n\">_y</span><span class=\"p\">),</span> <span class=\"n\">z</span><span class=\"p\">(</span><span class=\"n\">_z</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span> <span class=\"n\">bt</span>\n<span class=\"cp\">#0  gazebo::math::Vector3::Vector3 (this=0x7fffd9826fc0, _x=@0x68: &lt;error reading variable&gt;, _y=@0x70: &lt;error reading variable&gt;, </span>\n    <span class=\"n\">_z</span><span class=\"o\">=</span><span class=\"mh\">@0x78</span><span class=\"o\">:</span> <span class=\"o\">&lt;</span><span class=\"n\">error</span> <span class=\"n\">reading</span> <span class=\"n\">variable</span><span class=\"o\">&gt;</span><span class=\"p\">)</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo_build</span><span class=\"o\">/</span><span class=\"n\">source</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">math</span><span class=\"o\">/</span><span class=\"n\">Vector3</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">42</span>\n<span class=\"cp\">#1  0x00007ffff198b270 in ConvertVector3 (_bt=...) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletTypes.hh:62</span>\n<span class=\"cp\">#2  ConvertPose (_bt=...) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletTypes.hh:96</span>\n<span class=\"cp\">#3  gazebo::physics::BulletMotionState::setWorldTransform (this=0x7fffd43ac930) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletMotionState.cc:58</span>\n<span class=\"cp\">#4  0x00007ffff1970a10 in gazebo::physics::BulletHeightmapShape::Init (this=&lt;optimized out&gt;)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo_build</span><span class=\"o\">/</span><span class=\"n\">source</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">physics</span><span class=\"o\">/</span><span class=\"n\">bullet</span><span class=\"o\">/</span><span class=\"n\">BulletHeightmapShape</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">97</span>\n<span class=\"cp\">#5  0x00007ffff75e1062 in gazebo::physics::Collision::Init (this=0x7fffd68249a0) at /tmp/gazebo_build/source/gazebo/physics/Collision.cc:108</span>\n<span class=\"cp\">#6  0x00007ffff7620eb0 in gazebo::physics::Link::Init (this=this@entry=0x7fffd413c420) at /tmp/gazebo_build/source/gazebo/physics/Link.cc:241</span>\n<span class=\"cp\">#7  0x00007ffff197ed06 in gazebo::physics::BulletLink::Init (this=0x7fffd413c420) at /tmp/gazebo_build/source/gazebo/physics/bullet/BulletLink.cc:72</span>\n<span class=\"cp\">#8  0x00007ffff7632fe7 in gazebo::physics::Model::Init (this=0x7fffd42c2e10) at /tmp/gazebo_build/source/gazebo/physics/Model.cc:171</span>\n<span class=\"cp\">#9  0x00007ffff76609bb in gazebo::physics::World::Init (this=0x7fffd4d53a00) at /tmp/gazebo_build/source/gazebo/physics/World.cc:332</span>\n<span class=\"cp\">#10 0x00007ffff7645cb2 in gazebo::physics::init_worlds () at /tmp/gazebo_build/source/gazebo/physics/PhysicsIface.cc:93</span>\n<span class=\"cp\">#11 0x00000000004422e5 in gazebo::Server::LoadImpl (this=this@entry=0x7fffd4a3b690, _elem=..., _physics=...) at /tmp/gazebo_build/source/gazebo/Server.cc:402</span>\n<span class=\"cp\">#12 0x0000000000442cdc in gazebo::Server::LoadFile (this=0x7fffd4a3b690, _filename=..., _physics=...) at /tmp/gazebo_build/source/gazebo/Server.cc:304</span>\n<span class=\"cp\">#13 0x0000000000455032 in ServerFixture::RunServer (this=0x8e9ed0, _worldFilename=..., _paused=&lt;optimized out&gt;, _physics=...)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo_build</span><span class=\"o\">/</span><span class=\"n\">source</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">ServerFixture</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">219</span>\n<span class=\"cp\">#14 0x00007ffff5ab3a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0</span>\n<span class=\"cp\">#15 0x00007ffff66e4182 in start_thread (arg=0x7fffd9828700) at pthread_create.c:312</span>\n<span class=\"cp\">#16 0x00007ffff4700fbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>The key element is the change to <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/commits/1eaf9674dd66c0266a54216e3beaf68a4feb27cd#chg-gazebo/physics/bullet/BulletMotionState.cc\" rel=\"nofollow\">BulletMotionState.cc</a>, which presumed the existence of a bullet link data structure, which was being accessed too early by the <code>BulletHeightmap::Init</code> function class.</p>\n<p>The Jenkins gpu jobs are required to see this test failure, but they are currently not running due to build machine issues.</p>", "type": "rendered"}, "source": {"commit": {"hash": "00730f46810c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/00730f46810c.json"}, "html": {"href": "#!/osrf/gazebo/commits/00730f46810c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "branch": {"name": "issue_1194_testfix"}}, "comment_count": 0, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2014-10-03T00:45:40.672104+00:00", "type": "participant", "approved": true, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, {"role": "PARTICIPANT", "participated_on": "2014-10-01T17:29:11.526628+00:00", "type": "participant", "approved": true, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}], "reason": "", "updated_on": "2014-10-03T00:47:45.015032+00:00", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "merge_commit": {"hash": "4eadebad82e9", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/gazebo/commit/4eadebad82e9.json"}, "html": {"href": "#!/osrf/gazebo/commits/4eadebad82e9"}}}, "closed_by": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}