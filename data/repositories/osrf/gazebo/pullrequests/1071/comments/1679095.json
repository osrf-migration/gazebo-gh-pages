{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1071/comments/1679095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1071/_/diff#comment-1679095"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 1071, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/1071.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/1071"}}, "title": "Fix Camera GetWorldRotation() -> 2.2"}, "content": {"raw": "test fails 1 out of 2 tries with following errors:\n\n~~~\n$ ../build_release/test/integration/INTEGRATION_multicamera_sensor \n[==========] Running 2 tests from 1 test case.\n[----------] Global test environment set-up.\n[----------] 2 tests from MultiCameraSensor\n[ RUN      ] MultiCameraSensor.CameraRotationTest\nMsg Waiting for master\nMsg Connected to gazebo master @ http://127.0.0.1:11345\nMsg Publicized address: 192.168.1.162\nWarning [parser.cc:344] Converting a deprecated source[/home/hsu/projects/gazebo_camera_rotation_fix/test/worlds/camera_rotation_test.world].\nWarning [Converter.cc:59]   Version[1.3] to Version[1.5]\n  Please use the gzsdf tool to update your SDF files.\n    $ gzsdf convert [sdf_file]\nDbg ServerFixture load in 1 seconds, timeout after 600 seconds\nDbg ServerFixture::Unload\n[       OK ] MultiCameraSensor.CameraRotationTest (1801 ms)\n[ RUN      ] MultiCameraSensor.CameraRotationWorldPoseTest\nMsg Waiting for master\nMsg Connected to gazebo master @ http://127.0.0.1:11345\nMsg Publicized address: 192.168.1.162\nWarning [parser.cc:344] Converting a deprecated source[/home/hsu/projects/gazebo_camera_rotation_fix/test/worlds/camera_rotation_test.world].\nWarning [Converter.cc:59]   Version[1.3] to Version[1.5]\n  Please use the gzsdf tool to update your SDF files.\n    $ gzsdf convert [sdf_file]\nDbg ServerFixture load in 0.9 seconds, timeout after 600 seconds\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:392: Failure\nValue of: multicamera1->GetCamera(0)->GetWorldPose()\n  Actual: 0 1 0 0 0 0\nExpected: cameraPose + multicamera1->GetPose() + model1->GetWorldPose()\nWhich is: 0 11 1 0 0 0\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:396: Failure\nValue of: multicamera1->GetCamera(1)->GetWorldPose()\n  Actual: 0 0 0 0 0 0\nExpected: multicamera1->GetPose() + model1->GetWorldPose()\nWhich is: 0 10 1 0 0 0\nDbg model1 [0 10 1 0 0 0]\nsensor1 [0 10 1 0 0 0]\nmulticamera1 [0 10 1 0 0 0]\ncamera left WorldPose [0 1 0 0 0 0]\ncamera right WorldPose [0 0 0 0 0 0]\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:415: Failure\nValue of: camera2->GetCamera()->GetWorldPose()\n  Actual: 0 0 0 0 0 0\nExpected: model2->GetWorldPose()\nWhich is: 0 11 1 0 0 0\nDbg model2 [0 11 1 0 0 0]\nsensor2 [0 11 1 0 0 0]\ncamera2 [0 11 1 0 0 0]\ncamera WorldPose [0 0 0 0 0 0]\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:440: Failure\nValue of: multicamera3->GetCamera(0)->GetWorldPose()\n  Actual: 0 1 0 0 0 0\nExpected: cameraPose + multicamera3->GetPose() + model3->GetWorldPose()\nWhich is: -0.204442 0.946596 1.24932 1.2 1.3 1.4\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:444: Failure\nValue of: multicamera3->GetCamera(1)->GetWorldPose()\n  Actual: 0 0 0 0 0 0\nExpected: multicamera3->GetPose() + model3->GetWorldPose()\nWhich is: 0 0 1 1.2 1.3 1.4\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:445: Failure\nValue of: multicamera3->GetCamera(1)->GetWorldPose()\n  Actual: 0 0 0 0 0 0\nExpected: model3->GetWorldPose()\nWhich is: 0 0 1 1.2 1.3 1.4\nDbg model3 [0 0 1 1.2 1.3 1.4]\nsensor3 [0 0 1 1.2 1.3 1.4]\nmulticamera3 [0 0 1 1.2 1.3 1.4]\ncamera left  WorldPose [0 1 0 0 0 0]\ncamera right WorldPose [0 0 0 0 0 0]\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:472: Failure\nValue of: multicamera4->GetCamera(0)->GetWorldPose()\n  Actual: -0.204442 0.946596 0.249319 1.2 1.3 1.4\nExpected: cameraPose + multicamera4->GetPose() + model4->GetWorldPose()\nWhich is: -0.204442 0.946596 1.24932 1.2 1.3 1.4\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:483: Failure\nValue of: multicamera4->GetCamera(1)->GetWorldPose()\n  Actual: 0 0 0 1.2 1.3 1.4\nExpected: cameraPose + multicamera4->GetPose() + model4->GetWorldPose()\nWhich is: 0 0 1 1.2 1.3 1.4\nDbg model4 [0 0 1 0 0 0]\nsensor4 [0 0 1 0 0 0]\nmulticamera4 [0 0 1 0 0 0]\ncamera1 WorldPose [-0.204442 0.946596 0.249319 1.2 1.3 1.4]\ncamera2 WorldPose [0 0 0 1.2 1.3 1.4]\nDbg ServerFixture::Unload\n[  FAILED  ] MultiCameraSensor.CameraRotationWorldPoseTest (1055 ms)\n[----------] 2 tests from MultiCameraSensor (2856 ms total)\n\n[----------] Global test environment tear-down\n[==========] 2 tests from 1 test case ran. (2856 ms total)\n[  PASSED  ] 1 test.\n[  FAILED  ] 1 test, listed below:\n[  FAILED  ] MultiCameraSensor.CameraRotationWorldPoseTest\n~~~", "markup": "markdown", "html": "<p>test fails 1 out of 2 tries with following errors:</p>\n<div class=\"codehilite\"><pre><span></span>$ ../build_release/test/integration/INTEGRATION_multicamera_sensor \n<span class=\"o\">[==========]</span> Running <span class=\"m\">2</span> tests from <span class=\"m\">1</span> <span class=\"nb\">test</span> <span class=\"k\">case</span>.\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> Global <span class=\"nb\">test</span> environment set-up.\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> <span class=\"m\">2</span> tests from MultiCameraSensor\n<span class=\"o\">[</span> RUN      <span class=\"o\">]</span> MultiCameraSensor.CameraRotationTest\nMsg Waiting <span class=\"k\">for</span> master\nMsg Connected to gazebo master @ http://127.0.0.1:11345\nMsg Publicized address: <span class=\"m\">192</span>.168.1.162\nWarning <span class=\"o\">[</span>parser.cc:344<span class=\"o\">]</span> Converting a deprecated source<span class=\"o\">[</span>/home/hsu/projects/gazebo_camera_rotation_fix/test/worlds/camera_rotation_test.world<span class=\"o\">]</span>.\nWarning <span class=\"o\">[</span>Converter.cc:59<span class=\"o\">]</span>   Version<span class=\"o\">[</span><span class=\"m\">1</span>.3<span class=\"o\">]</span> to Version<span class=\"o\">[</span><span class=\"m\">1</span>.5<span class=\"o\">]</span>\n  Please use the gzsdf tool to update your SDF files.\n    $ gzsdf convert <span class=\"o\">[</span>sdf_file<span class=\"o\">]</span>\nDbg ServerFixture load in <span class=\"m\">1</span> seconds, timeout after <span class=\"m\">600</span> seconds\nDbg ServerFixture::Unload\n<span class=\"o\">[</span>       OK <span class=\"o\">]</span> MultiCameraSensor.CameraRotationTest <span class=\"o\">(</span><span class=\"m\">1801</span> ms<span class=\"o\">)</span>\n<span class=\"o\">[</span> RUN      <span class=\"o\">]</span> MultiCameraSensor.CameraRotationWorldPoseTest\nMsg Waiting <span class=\"k\">for</span> master\nMsg Connected to gazebo master @ http://127.0.0.1:11345\nMsg Publicized address: <span class=\"m\">192</span>.168.1.162\nWarning <span class=\"o\">[</span>parser.cc:344<span class=\"o\">]</span> Converting a deprecated source<span class=\"o\">[</span>/home/hsu/projects/gazebo_camera_rotation_fix/test/worlds/camera_rotation_test.world<span class=\"o\">]</span>.\nWarning <span class=\"o\">[</span>Converter.cc:59<span class=\"o\">]</span>   Version<span class=\"o\">[</span><span class=\"m\">1</span>.3<span class=\"o\">]</span> to Version<span class=\"o\">[</span><span class=\"m\">1</span>.5<span class=\"o\">]</span>\n  Please use the gzsdf tool to update your SDF files.\n    $ gzsdf convert <span class=\"o\">[</span>sdf_file<span class=\"o\">]</span>\nDbg ServerFixture load in <span class=\"m\">0</span>.9 seconds, timeout after <span class=\"m\">600</span> seconds\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:392: Failure\nValue of: multicamera1-&gt;GetCamera<span class=\"o\">(</span><span class=\"m\">0</span><span class=\"o\">)</span>-&gt;GetWorldPose<span class=\"o\">()</span>\n  Actual: <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span>\nExpected: cameraPose + multicamera1-&gt;GetPose<span class=\"o\">()</span> + model1-&gt;GetWorldPose<span class=\"o\">()</span>\nWhich is: <span class=\"m\">0</span> <span class=\"m\">11</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span>\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:396: Failure\nValue of: multicamera1-&gt;GetCamera<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span>-&gt;GetWorldPose<span class=\"o\">()</span>\n  Actual: <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span>\nExpected: multicamera1-&gt;GetPose<span class=\"o\">()</span> + model1-&gt;GetWorldPose<span class=\"o\">()</span>\nWhich is: <span class=\"m\">0</span> <span class=\"m\">10</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span>\nDbg model1 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">10</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\nsensor1 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">10</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\nmulticamera1 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">10</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\ncamera left WorldPose <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\ncamera right WorldPose <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:415: Failure\nValue of: camera2-&gt;GetCamera<span class=\"o\">()</span>-&gt;GetWorldPose<span class=\"o\">()</span>\n  Actual: <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span>\nExpected: model2-&gt;GetWorldPose<span class=\"o\">()</span>\nWhich is: <span class=\"m\">0</span> <span class=\"m\">11</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span>\nDbg model2 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">11</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\nsensor2 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">11</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\ncamera2 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">11</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\ncamera WorldPose <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:440: Failure\nValue of: multicamera3-&gt;GetCamera<span class=\"o\">(</span><span class=\"m\">0</span><span class=\"o\">)</span>-&gt;GetWorldPose<span class=\"o\">()</span>\n  Actual: <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span>\nExpected: cameraPose + multicamera3-&gt;GetPose<span class=\"o\">()</span> + model3-&gt;GetWorldPose<span class=\"o\">()</span>\nWhich is: -0.204442 <span class=\"m\">0</span>.946596 <span class=\"m\">1</span>.24932 <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:444: Failure\nValue of: multicamera3-&gt;GetCamera<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span>-&gt;GetWorldPose<span class=\"o\">()</span>\n  Actual: <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span>\nExpected: multicamera3-&gt;GetPose<span class=\"o\">()</span> + model3-&gt;GetWorldPose<span class=\"o\">()</span>\nWhich is: <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:445: Failure\nValue of: multicamera3-&gt;GetCamera<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span>-&gt;GetWorldPose<span class=\"o\">()</span>\n  Actual: <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span>\nExpected: model3-&gt;GetWorldPose<span class=\"o\">()</span>\nWhich is: <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4\nDbg model3 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4<span class=\"o\">]</span>\nsensor3 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4<span class=\"o\">]</span>\nmulticamera3 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4<span class=\"o\">]</span>\ncamera left  WorldPose <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\ncamera right WorldPose <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:472: Failure\nValue of: multicamera4-&gt;GetCamera<span class=\"o\">(</span><span class=\"m\">0</span><span class=\"o\">)</span>-&gt;GetWorldPose<span class=\"o\">()</span>\n  Actual: -0.204442 <span class=\"m\">0</span>.946596 <span class=\"m\">0</span>.249319 <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4\nExpected: cameraPose + multicamera4-&gt;GetPose<span class=\"o\">()</span> + model4-&gt;GetWorldPose<span class=\"o\">()</span>\nWhich is: -0.204442 <span class=\"m\">0</span>.946596 <span class=\"m\">1</span>.24932 <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4\n/home/hsu/projects/gazebo_camera_rotation_fix/test/integration/multicamera_sensor.cc:483: Failure\nValue of: multicamera4-&gt;GetCamera<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span>-&gt;GetWorldPose<span class=\"o\">()</span>\n  Actual: <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4\nExpected: cameraPose + multicamera4-&gt;GetPose<span class=\"o\">()</span> + model4-&gt;GetWorldPose<span class=\"o\">()</span>\nWhich is: <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4\nDbg model4 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\nsensor4 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\nmulticamera4 <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">1</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"o\">]</span>\ncamera1 WorldPose <span class=\"o\">[</span>-0.204442 <span class=\"m\">0</span>.946596 <span class=\"m\">0</span>.249319 <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4<span class=\"o\">]</span>\ncamera2 WorldPose <span class=\"o\">[</span><span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">0</span> <span class=\"m\">1</span>.2 <span class=\"m\">1</span>.3 <span class=\"m\">1</span>.4<span class=\"o\">]</span>\nDbg ServerFixture::Unload\n<span class=\"o\">[</span>  FAILED  <span class=\"o\">]</span> MultiCameraSensor.CameraRotationWorldPoseTest <span class=\"o\">(</span><span class=\"m\">1055</span> ms<span class=\"o\">)</span>\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> <span class=\"m\">2</span> tests from MultiCameraSensor <span class=\"o\">(</span><span class=\"m\">2856</span> ms total<span class=\"o\">)</span>\n\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> Global <span class=\"nb\">test</span> environment tear-down\n<span class=\"o\">[==========]</span> <span class=\"m\">2</span> tests from <span class=\"m\">1</span> <span class=\"nb\">test</span> <span class=\"k\">case</span> ran. <span class=\"o\">(</span><span class=\"m\">2856</span> ms total<span class=\"o\">)</span>\n<span class=\"o\">[</span>  PASSED  <span class=\"o\">]</span> <span class=\"m\">1</span> test.\n<span class=\"o\">[</span>  FAILED  <span class=\"o\">]</span> <span class=\"m\">1</span> test, listed below:\n<span class=\"o\">[</span>  FAILED  <span class=\"o\">]</span> MultiCameraSensor.CameraRotationWorldPoseTest\n</pre></div>", "type": "rendered"}, "created_on": "2014-04-17T00:04:52.041990+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2014-04-17T00:04:52.051112+00:00", "type": "pullrequest_comment", "id": 1679095}