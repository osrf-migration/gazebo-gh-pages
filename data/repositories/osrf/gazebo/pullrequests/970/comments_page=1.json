{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970/comments/1269826.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970/_/diff#comment-1269826"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 970, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970"}}, "title": "Updates to propshop plugin and tweaks to rendering"}, "content": {"raw": "It seems like after the change to the startup sequence it's hanging on [this line](#!/osrf/gazebo/src/fab31545a57692676adef43dff51cf7b31075740/plugins/ModelPropShop.cc#cl-116) `this->factoryPub->WaitForConnection();`. \n\nI had to make a couple of minor changes, see [propshop_fixes_ian](#!/osrf/gazebo/commits/948ac80c198e40a6b44057a2b488977953deda71), to get it going, mainly by delaying the factory msg publishing and fixing a `boost::lock_error` when shutting down gazebo.", "markup": "markdown", "html": "<p>It seems like after the change to the startup sequence it's hanging on <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/fab31545a57692676adef43dff51cf7b31075740/plugins/ModelPropShop.cc#cl-116\" rel=\"nofollow\">this line</a> <code>this-&gt;factoryPub-&gt;WaitForConnection();</code>. </p>\n<p>I had to make a couple of minor changes, see <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/commits/948ac80c198e40a6b44057a2b488977953deda71\" rel=\"nofollow\">propshop_fixes_ian</a>, to get it going, mainly by delaying the factory msg publishing and fixing a <code>boost::lock_error</code> when shutting down gazebo.</p>", "type": "rendered"}, "created_on": "2014-02-20T03:19:50.374457+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2014-02-20T03:19:50.381455+00:00", "type": "pullrequest_comment", "id": 1269826}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970/comments/1292437.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970/_/diff#comment-1292437"}}, "parent": {"id": 1269826, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970/comments/1269826.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970/_/diff#comment-1269826"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 970, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970"}}, "title": "Updates to propshop plugin and tweaks to rendering"}, "content": {"raw": "Thanks. I took a slightly different approach to the deadlock and used your fix for the boost lock error in 5560c69", "markup": "markdown", "html": "<p>Thanks. I took a slightly different approach to the deadlock and used your fix for the boost lock error in <a href=\"#!/osrf/gazebo/commits/5560c69\" rel=\"nofollow\" class=\"ap-connect-link\">5560c69</a></p>", "type": "rendered"}, "created_on": "2014-02-24T17:54:26.041867+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2014-02-24T17:54:26.051809+00:00", "type": "pullrequest_comment", "id": 1292437}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970/comments/1303390.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970/_/diff#comment-1303390"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 970, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970"}}, "title": "Updates to propshop plugin and tweaks to rendering"}, "content": {"raw": "Looks good to me.\n\nJust noticed a minor corner case in gzprop where it fails if you pass a file in the current directory, ie:\n~~~\n$ pwd\n/home/ubuntu/.gazebo/models/pr2\n$ gzprop model.sdf\n/home/ubuntu/bin/gzprop:50:in `mkdir': Permission denied - /meta (Errno::EACCES)\n\tfrom /home/ubuntu/bin/gzprop:50:in `<main>'\n~~~\nIt tries and fails to create a folder named /meta (definitely don't recommend to use sudo).\n\nThe following patch should detect this case and give an appropriate error message:\n~~~\ndiff -r 5560c69c3e56 tools/gzprop\n--- a/tools/gzprop\tMon Feb 24 09:52:43 2014 -0800\n+++ b/tools/gzprop\tTue Feb 25 12:16:39 2014 -0800\n@@ -24,7 +24,7 @@\n   abort(\"\")\n end\n \n-# Get the model directory\n+# Get the model file name\n modelFile = ARGV[0]\n \n modelParts = modelFile.split('/')\n@@ -35,6 +35,11 @@\n   abort(\"Missing model file [#{modelFile}]\")\n end\n \n+# Make sure the file wasn't specified in the current directory\n+if modelDir.empty?\n+  abort(\"Cannot specify file in the current directory\")\n+end\n+\n # Get the name of the model (last part of the directory name)\n modelName = modelParts[-2]\n \n~~~", "markup": "markdown", "html": "<p>Looks good to me.</p>\n<p>Just noticed a minor corner case in gzprop where it fails if you pass a file in the current directory, ie:</p>\n<div class=\"codehilite\"><pre><span></span>$ <span class=\"nb\">pwd</span>\n/home/ubuntu/.gazebo/models/pr2\n$ gzprop model.sdf\n/home/ubuntu/bin/gzprop:50:in <span class=\"sb\">`</span>mkdir<span class=\"s1\">&#39;: Permission denied - /meta (Errno::EACCES)</span>\n<span class=\"s1\">    from /home/ubuntu/bin/gzprop:50:in `&lt;main&gt;&#39;</span>\n</pre></div>\n\n\n<p>It tries and fails to create a folder named /meta (definitely don't recommend to use sudo).</p>\n<p>The following patch should detect this case and give an appropriate error message:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 5560c69c3e56 tools/gzprop</span>\n<span class=\"gd\">--- a/tools/gzprop  Mon Feb 24 09:52:43 2014 -0800</span>\n<span class=\"gi\">+++ b/tools/gzprop  Tue Feb 25 12:16:39 2014 -0800</span>\n<span class=\"gu\">@@ -24,7 +24,7 @@</span>\n   abort(&quot;&quot;)\n end\n\n<span class=\"gd\">-# Get the model directory</span>\n<span class=\"gi\">+# Get the model file name</span>\n modelFile = ARGV[0]\n\n modelParts = modelFile.split(&#39;/&#39;)\n<span class=\"gu\">@@ -35,6 +35,11 @@</span>\n   abort(&quot;Missing model file [#{modelFile}]&quot;)\n end\n\n<span class=\"gi\">+# Make sure the file wasn&#39;t specified in the current directory</span>\n<span class=\"gi\">+if modelDir.empty?</span>\n<span class=\"gi\">+  abort(&quot;Cannot specify file in the current directory&quot;)</span>\n<span class=\"gi\">+end</span>\n<span class=\"gi\">+</span>\n # Get the name of the model (last part of the directory name)\n modelName = modelParts[-2]\n</pre></div>", "type": "rendered"}, "created_on": "2014-02-25T20:19:50.074165+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-02-25T20:19:50.083880+00:00", "type": "pullrequest_comment", "id": 1303390}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970/comments/1304729.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970/_/diff#comment-1304729"}}, "parent": {"id": 1303390, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970/comments/1303390.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970/_/diff#comment-1303390"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 970, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970"}}, "title": "Updates to propshop plugin and tweaks to rendering"}, "content": {"raw": "What do you think about creating a temp directory to hold the meta information? Then you could call \n\n`gzprop model.sdf`\n\nI'll start on this unless you have another idea.", "markup": "markdown", "html": "<p>What do you think about creating a temp directory to hold the meta information? Then you could call </p>\n<p><code>gzprop model.sdf</code></p>\n<p>I'll start on this unless you have another idea.</p>", "type": "rendered"}, "created_on": "2014-02-25T23:49:35.082543+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2014-02-25T23:49:35.093938+00:00", "type": "pullrequest_comment", "id": 1304729}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970/comments/1304749.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970/_/diff#comment-1304749"}}, "parent": {"id": 1304729, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970/comments/1304729.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970/_/diff#comment-1304729"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 970, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970"}}, "title": "Updates to propshop plugin and tweaks to rendering"}, "content": {"raw": "That's even better. The patch was just a quick fix because I wanted to make a concrete suggestion and not a complaint.\n\nThe only trick will be finding the model name. You may be able to get that from the model.config or by calling `pwd`.", "markup": "markdown", "html": "<p>That's even better. The patch was just a quick fix because I wanted to make a concrete suggestion and not a complaint.</p>\n<p>The only trick will be finding the model name. You may be able to get that from the model.config or by calling <code>pwd</code>.</p>", "type": "rendered"}, "created_on": "2014-02-25T23:55:30.818873+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-02-25T23:55:30.833529+00:00", "type": "pullrequest_comment", "id": 1304749}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970/comments/1304943.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970/_/diff#comment-1304943"}}, "parent": {"id": 1304749, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970/comments/1304749.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970/_/diff#comment-1304749"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 970, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/970.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/970"}}, "title": "Updates to propshop plugin and tweaks to rendering"}, "content": {"raw": "Okay. I think it's fixed.\n\nThanks for the suggestion. My complaint box is now a little jealous.", "markup": "markdown", "html": "<p>Okay. I think it's fixed.</p>\n<p>Thanks for the suggestion. My complaint box is now a little jealous.</p>", "type": "rendered"}, "created_on": "2014-02-26T00:34:28.557472+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2014-02-26T00:34:28.565501+00:00", "type": "pullrequest_comment", "id": 1304943}], "page": 1, "size": 6}