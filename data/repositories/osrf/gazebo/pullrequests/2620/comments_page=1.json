{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30276164.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30276164"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "I believe this issue is specific to running gazebo on ubuntu on macbook retina displays. Do you have any problem with mouse picking after making these changes?\n\nThe value of the `devicePixelRatio` is eventually used to create the Ogre render window with the correct width and height in Ogre's Cocoa Window class. However, in this case you're on ubuntu and not OSX so ogre ignores that value. The changes in this patch will likely double the size of the gzclient render window on OSX. \n\nA quick and dirty workaround could be to only do this on non-apple OS's.\n\n~~~\ndiff -r 2e71e0091b49 gazebo/gui/GLWidget.cc\n--- a/gazebo/gui/GLWidget.cc\tFri Jan 20 23:58:49 2017 +0000\n+++ b/gazebo/gui/GLWidget.cc\tTue Jan 24 16:05:25 2017 -0800\n@@ -244,10 +244,21 @@\n     // windowhandle() is available in qt5 only\n     double ratio = this->windowHandle()->devicePixelRatio();\n \n+    int w = this->width();\n+    int h = this->height();\n+\n+#if not defined(__APPLE__)\n+    // handle high dpi rendering on non-apple OS\n+    // e.g. unbuntu on macbook retina display\n+    // ogre will ignore the device ratio param so scale\n+    // the window ourselves\n+    w *= ratio;\n+    h *= ratio;\n+#endif\n     // Create the OGRE render window\n     this->dataPtr->windowId =\n       rendering::RenderEngine::Instance()->GetWindowManager()->\n-        CreateWindow(winHandle, this->width(), this->height(), ratio);\n+        CreateWindow(winHandle, w, h, ratio);\n \n     // Attach the user camera to the window\n     rendering::RenderEngine::Instance()->GetWindowManager()->SetCamera(\n~~~\n\nBut we need to make sure mouse picking still functions correctly with these changes.\n\n\n", "markup": "markdown", "html": "<p>I believe this issue is specific to running gazebo on ubuntu on macbook retina displays. Do you have any problem with mouse picking after making these changes?</p>\n<p>The value of the <code>devicePixelRatio</code> is eventually used to create the Ogre render window with the correct width and height in Ogre's Cocoa Window class. However, in this case you're on ubuntu and not OSX so ogre ignores that value. The changes in this patch will likely double the size of the gzclient render window on OSX. </p>\n<p>A quick and dirty workaround could be to only do this on non-apple OS's.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 2e71e0091b49 gazebo/gui/GLWidget.cc</span>\n<span class=\"gd\">--- a/gazebo/gui/GLWidget.cc    Fri Jan 20 23:58:49 2017 +0000</span>\n<span class=\"gi\">+++ b/gazebo/gui/GLWidget.cc    Tue Jan 24 16:05:25 2017 -0800</span>\n<span class=\"gu\">@@ -244,10 +244,21 @@</span>\n     // windowhandle() is available in qt5 only\n     double ratio = this-&gt;windowHandle()-&gt;devicePixelRatio();\n\n<span class=\"gi\">+    int w = this-&gt;width();</span>\n<span class=\"gi\">+    int h = this-&gt;height();</span>\n<span class=\"gi\">+</span>\n<span class=\"gi\">+#if not defined(__APPLE__)</span>\n<span class=\"gi\">+    // handle high dpi rendering on non-apple OS</span>\n<span class=\"gi\">+    // e.g. unbuntu on macbook retina display</span>\n<span class=\"gi\">+    // ogre will ignore the device ratio param so scale</span>\n<span class=\"gi\">+    // the window ourselves</span>\n<span class=\"gi\">+    w *= ratio;</span>\n<span class=\"gi\">+    h *= ratio;</span>\n<span class=\"gi\">+#endif</span>\n     // Create the OGRE render window\n     this-&gt;dataPtr-&gt;windowId =\n       rendering::RenderEngine::Instance()-&gt;GetWindowManager()-&gt;\n<span class=\"gd\">-        CreateWindow(winHandle, this-&gt;width(), this-&gt;height(), ratio);</span>\n<span class=\"gi\">+        CreateWindow(winHandle, w, h, ratio);</span>\n\n     // Attach the user camera to the window\n     rendering::RenderEngine::Instance()-&gt;GetWindowManager()-&gt;SetCamera(\n</pre></div>\n\n\n<p>But we need to make sure mouse picking still functions correctly with these changes.</p>", "type": "rendered"}, "created_on": "2017-01-25T00:14:49.575434+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2017-01-25T00:14:49.577806+00:00", "type": "pullrequest_comment", "id": 30276164}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30276223.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30276223"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "Yep yep, wasn't sure if that was much of a cross-platform solution.  Maybe it's more of an OGRE bug?  Anyone else on Ubuntu experiencing this issue?  I'll try to get a screenshot as soon as it finishes compiling, and I'll do a bit of testing for mouse picking.", "markup": "markdown", "html": "<p>Yep yep, wasn't sure if that was much of a cross-platform solution.  Maybe it's more of an OGRE bug?  Anyone else on Ubuntu experiencing this issue?  I'll try to get a screenshot as soon as it finishes compiling, and I'll do a bit of testing for mouse picking.</p>", "type": "rendered"}, "created_on": "2017-01-25T00:16:36.808573+00:00", "user": {"display_name": "Stephen Sinclair", "uuid": "{fdfe8af1-20be-4213-929c-76ca03a98c9e}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D"}, "html": {"href": "https://bitbucket.org/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7c7c3cf7a6e43916a9c03ffdd1d77e58d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSS-0.png"}}, "nickname": "radarsat1", "type": "user", "account_id": "557058:09fe48b3-cecf-4ae6-a621-12965234c939"}, "updated_on": "2017-01-25T00:16:36.848737+00:00", "type": "pullrequest_comment", "id": 30276223}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30276741.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30276741"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "Here's what I see without (left) and with (right) this patch..\n\n![gazebo8-hidpi-problem.jpg](data/bitbucket.org/repo/jgXqbo/images/497783814-gazebo8-hidpi-problem.jpg)\n\nIn both cases the mouse picking seems to work correctly. That is, the yellow dot appears under the mouse cursor and I can select objects correctly.", "markup": "markdown", "html": "<p>Here's what I see without (left) and with (right) this patch..</p>\n<p><img alt=\"gazebo8-hidpi-problem.jpg\" src=\"data/bitbucket.org/repo/jgXqbo/images/497783814-gazebo8-hidpi-problem.jpg\" /></p>\n<p>In both cases the mouse picking seems to work correctly. That is, the yellow dot appears under the mouse cursor and I can select objects correctly.</p>", "type": "rendered"}, "created_on": "2017-01-25T00:32:24.401902+00:00", "user": {"display_name": "Stephen Sinclair", "uuid": "{fdfe8af1-20be-4213-929c-76ca03a98c9e}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D"}, "html": {"href": "https://bitbucket.org/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7c7c3cf7a6e43916a9c03ffdd1d77e58d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSS-0.png"}}, "nickname": "radarsat1", "type": "user", "account_id": "557058:09fe48b3-cecf-4ae6-a621-12965234c939"}, "updated_on": "2017-01-25T00:32:24.464657+00:00", "type": "pullrequest_comment", "id": 30276741}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30276928.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30276928"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "I worry that even with that work-around you propose, it would only affect certain versions of OGRE, and thus break on different versions of Ubuntu for example.  It might be safest to leave it and allow OGRE to make a fix in due time, or alternatively provide a work-around as a user configurable option.  Either configuration parameter or an environment variable -- in fact I was surprised that QT_SCALE_FACTOR did not fix this, but setting it had no effect for me.  http://doc.qt.io/qt-5/highdpi.html", "markup": "markdown", "html": "<p>I worry that even with that work-around you propose, it would only affect certain versions of OGRE, and thus break on different versions of Ubuntu for example.  It might be safest to leave it and allow OGRE to make a fix in due time, or alternatively provide a work-around as a user configurable option.  Either configuration parameter or an environment variable -- in fact I was surprised that QT_SCALE_FACTOR did not fix this, but setting it had no effect for me.  <a href=\"http://doc.qt.io/qt-5/highdpi.html\" rel=\"nofollow\" class=\"ap-connect-link\">http://doc.qt.io/qt-5/highdpi.html</a></p>", "type": "rendered"}, "created_on": "2017-01-25T00:38:21.000604+00:00", "user": {"display_name": "Stephen Sinclair", "uuid": "{fdfe8af1-20be-4213-929c-76ca03a98c9e}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D"}, "html": {"href": "https://bitbucket.org/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7c7c3cf7a6e43916a9c03ffdd1d77e58d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSS-0.png"}}, "nickname": "radarsat1", "type": "user", "account_id": "557058:09fe48b3-cecf-4ae6-a621-12965234c939"}, "updated_on": "2017-01-25T00:38:21.057235+00:00", "type": "pullrequest_comment", "id": 30276928}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30277375.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30277375"}}, "parent": {"id": 30276928, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30276928.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30276928"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "ya the problem comes from Qt5 + Ogre integration. Qt5 added support for high dpi rendering and started working in points instead of pixels, while ogre stays in pixels. This mismatch of units resulted in this incorrect render window size. OGRE 2.0+ fixed a few issues with configuring the scale factor of Cocoa render windows and we backported those fixes to our ogre 1.9 homebrew bottle. I don't know if they (ogre) consider the case of ubuntu on retina displays and I couldn't find evidence in their GLX window class for scaling render windows so they may not support it.\n", "markup": "markdown", "html": "<p>ya the problem comes from Qt5 + Ogre integration. Qt5 added support for high dpi rendering and started working in points instead of pixels, while ogre stays in pixels. This mismatch of units resulted in this incorrect render window size. OGRE 2.0+ fixed a few issues with configuring the scale factor of Cocoa render windows and we backported those fixes to our ogre 1.9 homebrew bottle. I don't know if they (ogre) consider the case of ubuntu on retina displays and I couldn't find evidence in their GLX window class for scaling render windows so they may not support it.</p>", "type": "rendered"}, "created_on": "2017-01-25T00:52:17.160000+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2017-01-25T00:52:49.934440+00:00", "type": "pullrequest_comment", "id": 30277375}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30277907.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30277907"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "I will try to test on Yakkety (perhaps in Docker) and if it is fixed there then I wouldn't bother patching it.  Unfortunately I don't know if I can get that done by tomorrow.  Or maybe I can just install the latest version of Ogre and give that a try.  I'll check your homebrew bottle.  At the worst case perhaps you can stick a patch it the Debian packages specifically for Xenial etc.", "markup": "markdown", "html": "<p>I will try to test on Yakkety (perhaps in Docker) and if it is fixed there then I wouldn't bother patching it.  Unfortunately I don't know if I can get that done by tomorrow.  Or maybe I can just install the latest version of Ogre and give that a try.  I'll check your homebrew bottle.  At the worst case perhaps you can stick a patch it the Debian packages specifically for Xenial etc.</p>", "type": "rendered"}, "created_on": "2017-01-25T01:12:46.849317+00:00", "user": {"display_name": "Stephen Sinclair", "uuid": "{fdfe8af1-20be-4213-929c-76ca03a98c9e}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D"}, "html": {"href": "https://bitbucket.org/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7c7c3cf7a6e43916a9c03ffdd1d77e58d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSS-0.png"}}, "nickname": "radarsat1", "type": "user", "account_id": "557058:09fe48b3-cecf-4ae6-a621-12965234c939"}, "updated_on": "2017-01-25T01:12:46.905041+00:00", "type": "pullrequest_comment", "id": 30277907}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30278330.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30278330"}}, "parent": {"id": 30277907, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30277907.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30277907"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "Gazebo as of now will only work with ogre versions <= 1.9 and I believe that's also the latest version released in the debs. We're dropping support for trusty in gazebo8 so that leaves two possible ogre versions: 1.8 and 1.9. So testing with these 2 should be sufficient.\n\n[This](https://github.com/osrf/homebrew-simulation/blob/master/ogre1.9.rb) is the ogre 1.9 homebrew formula we're using, which pulls in the cocoa window patch.", "markup": "markdown", "html": "<p>Gazebo as of now will only work with ogre versions &lt;= 1.9 and I believe that's also the latest version released in the debs. We're dropping support for trusty in gazebo8 so that leaves two possible ogre versions: 1.8 and 1.9. So testing with these 2 should be sufficient.</p>\n<p><a data-is-external-link=\"true\" href=\"https://github.com/osrf/homebrew-simulation/blob/master/ogre1.9.rb\" rel=\"nofollow\">This</a> is the ogre 1.9 homebrew formula we're using, which pulls in the cocoa window patch.</p>", "type": "rendered"}, "created_on": "2017-01-25T01:29:33.509312+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2017-01-25T01:29:33.511465+00:00", "type": "pullrequest_comment", "id": 30278330}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30335095.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30335095"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "Ah I see, so the fix is implemented on one platform ;)  Well, in any case I can confirm that this is still a problem with the hg v1.9 branch of Ogre on Linux.  I'll see if I can propose a more robust fix in this context. I guess the \"real\" fix is to update Ogre in the long run (assuming it's fixed in later versions), so some kind of temporary fix in the deb package might actually be the appropriate interim measure.\n\nBut here's a potential work-around: according to that patch, window->getWidth() and window->getHeight() should return the requested height multiplied by the devicePixelRatio.  So if this is *not* done, then the requested width and height have to change.  I'll see if I can code this up, I don't know if it's too complicated for what it's worth though..", "markup": "markdown", "html": "<p>Ah I see, so the fix is implemented on one platform ;)  Well, in any case I can confirm that this is still a problem with the hg v1.9 branch of Ogre on Linux.  I'll see if I can propose a more robust fix in this context. I guess the \"real\" fix is to update Ogre in the long run (assuming it's fixed in later versions), so some kind of temporary fix in the deb package might actually be the appropriate interim measure.</p>\n<p>But here's a potential work-around: according to that patch, window-&gt;getWidth() and window-&gt;getHeight() should return the requested height multiplied by the devicePixelRatio.  So if this is <em>not</em> done, then the requested width and height have to change.  I'll see if I can code this up, I don't know if it's too complicated for what it's worth though..</p>", "type": "rendered"}, "created_on": "2017-01-25T17:51:25.636339+00:00", "user": {"display_name": "Stephen Sinclair", "uuid": "{fdfe8af1-20be-4213-929c-76ca03a98c9e}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D"}, "html": {"href": "https://bitbucket.org/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7c7c3cf7a6e43916a9c03ffdd1d77e58d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSS-0.png"}}, "nickname": "radarsat1", "type": "user", "account_id": "557058:09fe48b3-cecf-4ae6-a621-12965234c939"}, "updated_on": "2017-01-25T17:51:25.684247+00:00", "type": "pullrequest_comment", "id": 30335095}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30338752.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30338752"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "The PR now reflects this idea.  It fixes the problem for me while hopefully getting around the OS X Ogre patch, but I am not able to test that for now.", "markup": "markdown", "html": "<p>The PR now reflects this idea.  It fixes the problem for me while hopefully getting around the OS X Ogre patch, but I am not able to test that for now.</p>", "type": "rendered"}, "created_on": "2017-01-25T18:53:33.786161+00:00", "user": {"display_name": "Stephen Sinclair", "uuid": "{fdfe8af1-20be-4213-929c-76ca03a98c9e}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D"}, "html": {"href": "https://bitbucket.org/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7c7c3cf7a6e43916a9c03ffdd1d77e58d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSS-0.png"}}, "nickname": "radarsat1", "type": "user", "account_id": "557058:09fe48b3-cecf-4ae6-a621-12965234c939"}, "updated_on": "2017-01-25T18:53:33.835144+00:00", "type": "pullrequest_comment", "id": 30338752}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30662991.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30662991"}}, "parent": {"id": 30338752, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30338752.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30338752"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "thanks, it's a cleaner solution. I tested it a bit on OSX on my macbook but strangely the `windowSizeRatio` returns a weird value `6.64` after window creation. The target `_width` was `664` but `window->getWidth` returns `200`. I'm not sure what Ogre's Cocoa Window is doing there. It worked fine for me on my desktop running xenial - the ratio is 1 as expected. \n\n", "markup": "markdown", "html": "<p>thanks, it's a cleaner solution. I tested it a bit on OSX on my macbook but strangely the <code>windowSizeRatio</code> returns a weird value <code>6.64</code> after window creation. The target <code>_width</code> was <code>664</code> but <code>window-&gt;getWidth</code> returns <code>200</code>. I'm not sure what Ogre's Cocoa Window is doing there. It worked fine for me on my desktop running xenial - the ratio is 1 as expected. </p>", "type": "rendered"}, "created_on": "2017-02-01T02:59:37.881010+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2017-02-01T03:04:02.876730+00:00", "type": "pullrequest_comment", "id": 30662991}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30663246.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30663246"}}, "parent": {"id": 30662991, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30662991.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30662991"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "it worked on OSX if I call `window->resize(_width, _height)` immediately after the `createRenderWindow` call and I get the correct `windowSizeRatio`", "markup": "markdown", "html": "<p>it worked on OSX if I call <code>window-&gt;resize(_width, _height)</code> immediately after the <code>createRenderWindow</code> call and I get the correct <code>windowSizeRatio</code></p>", "type": "rendered"}, "created_on": "2017-02-01T03:10:42.250216+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2017-02-01T03:10:42.252541+00:00", "type": "pullrequest_comment", "id": 30663246}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30663385.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30663385"}}, "parent": {"id": 30663246, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30663246.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30663246"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "Interesting. I'll get a Gazebo testing environment set up on my Mac before updating the PR but hopefully we can get something to be reliable.  I have no way of testing on Windows right now.", "markup": "markdown", "html": "<p>Interesting. I'll get a Gazebo testing environment set up on my Mac before updating the PR but hopefully we can get something to be reliable.  I have no way of testing on Windows right now.</p>", "type": "rendered"}, "created_on": "2017-02-01T03:16:59.281403+00:00", "user": {"display_name": "Stephen Sinclair", "uuid": "{fdfe8af1-20be-4213-929c-76ca03a98c9e}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D"}, "html": {"href": "https://bitbucket.org/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7c7c3cf7a6e43916a9c03ffdd1d77e58d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSS-0.png"}}, "nickname": "radarsat1", "type": "user", "account_id": "557058:09fe48b3-cecf-4ae6-a621-12965234c939"}, "updated_on": "2017-02-01T03:16:59.341515+00:00", "type": "pullrequest_comment", "id": 30663385}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30663398.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/radarsat1/gazebo:ccbb3af9105e..e77aae902cde?path=gazebo%2Frendering%2FWindowManager.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30663398"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "Can you add a check here to set `windowSizeRatio` only if `window->getWidth() > 0`? On the server side we create dummy gl context and that results in a 0 width window on OSX.\n\nThe gazebo coding style guide also recommends a max line width of 80 characters", "markup": "markdown", "html": "<p>Can you add a check here to set <code>windowSizeRatio</code> only if <code>window-&gt;getWidth() &gt; 0</code>? On the server side we create dummy gl context and that results in a 0 width window on OSX.</p>\n<p>The gazebo coding style guide also recommends a max line width of 80 characters</p>", "type": "rendered"}, "created_on": "2017-02-01T03:17:34.856940+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {"to": 135, "from": null, "path": "gazebo/rendering/WindowManager.cc"}, "updated_on": "2017-02-01T03:17:34.859515+00:00", "type": "pullrequest_comment", "id": 30663398}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30663436.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/diff/radarsat1/gazebo:ccbb3af9105e..e77aae902cde?path=gazebo%2Frendering%2FWindowManager.cc"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30663436"}}, "parent": {"id": 30663398, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620/comments/30663398.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620/_/diff#comment-30663398"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2620, "links": {"self": {"href": "data/repositories/osrf/gazebo/pullrequests/2620.json"}, "html": {"href": "#!/osrf/gazebo/pull-requests/2620"}}, "title": "Fix HIDPI issue with GLWidget window size."}, "content": {"raw": "Oh, yeah, that sound very reasonable.  Zero division ftw.  I'll take a look.", "markup": "markdown", "html": "<p>Oh, yeah, that sound very reasonable.  Zero division ftw.  I'll take a look.</p>", "type": "rendered"}, "created_on": "2017-02-01T03:19:29.828544+00:00", "user": {"display_name": "Stephen Sinclair", "uuid": "{fdfe8af1-20be-4213-929c-76ca03a98c9e}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D"}, "html": {"href": "https://bitbucket.org/%7Bfdfe8af1-20be-4213-929c-76ca03a98c9e%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7c7c3cf7a6e43916a9c03ffdd1d77e58d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSS-0.png"}}, "nickname": "radarsat1", "type": "user", "account_id": "557058:09fe48b3-cecf-4ae6-a621-12965234c939"}, "inline": {"to": null, "from": null, "path": "gazebo/rendering/WindowManager.cc"}, "updated_on": "2017-02-01T03:19:29.869295+00:00", "type": "pullrequest_comment", "id": 30663436}], "page": 1, "size": 14}