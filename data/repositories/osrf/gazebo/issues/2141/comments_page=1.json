{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141/comments/33845201.json"}, "html": {"href": "#!/osrf/gazebo/issues/2141#comment-33845201"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141.json"}}, "type": "issue", "id": 2141, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Risk of mixing ign-math2 and ign-math3 ABIs in gazebo8"}, "content": {"raw": "I've [implemented the inline namespace for the Box class](https://bitbucket.org/ignitionrobotics/ign-math/commits/ac81a830cdc5adbe480cf1effcdd89bbae5a1d18) of ign-math as a test and it works as expected. Note that I did not need to modify the Box_TEST.cc file, which means\nthat third party software is ok with using ignition/math generic namespaces.\n\n```\njrivero@nium ~ $ nm -D\n/usr/lib/x86_64-linux-gnu/libignition-math3.so.3.0.0  | grep Box | head -n 1\n000000000000fba0 T _ZN8ignition4math3Box3MaxEv\n\njrivero@nium ign-math $ (inline_namespaces_tests *) nm -D\nbuild/src/libignition-math3.so.3.0.0  | grep Box | head -n 1\n000000000000fc10 T _ZN8ignition4math2v33Box3MaxEv\n```", "markup": "markdown", "html": "<p>I've <a data-is-external-link=\"true\" href=\"https://bitbucket.org/ignitionrobotics/ign-math/commits/ac81a830cdc5adbe480cf1effcdd89bbae5a1d18\" rel=\"nofollow\">implemented the inline namespace for the Box class</a> of ign-math as a test and it works as expected. Note that I did not need to modify the Box_TEST.cc file, which means\nthat third party software is ok with using ignition/math generic namespaces.</p>\n<div class=\"codehilite\"><pre><span></span>jrivero@nium ~ $ nm -D\n/usr/lib/x86_64-linux-gnu/libignition-math3.so.3.0.0  | grep Box | head -n 1\n000000000000fba0 T _ZN8ignition4math3Box3MaxEv\n\njrivero@nium ign-math $ (inline_namespaces_tests *) nm -D\nbuild/src/libignition-math3.so.3.0.0  | grep Box | head -n 1\n000000000000fc10 T _ZN8ignition4math2v33Box3MaxEv\n</pre></div>", "type": "rendered"}, "created_on": "2017-01-21T01:39:59.217909+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": null, "type": "issue_comment", "id": 33845201}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141/comments/33926018.json"}, "html": {"href": "#!/osrf/gazebo/issues/2141#comment-33926018"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141.json"}}, "type": "issue", "id": 2141, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Risk of mixing ign-math2 and ign-math3 ABIs in gazebo8"}, "content": {"raw": "I'm pretty sure that we could have worked around the ABI problems by using the inline namespaces, however there are other problems coming from mixing ignition libraries (like having a software which requires different dependencies that in configuring time end up calling two different cmake modules of the same ignition library). There are solution for these problems too, but they are not trivial and discouraged at this time of the gazebo8 release.\n\nWe finally decided to go with the following plan for releasing gazebo8:\n\n * Make ignition-math2 and ignition-math3 to conflict each other. Only one can be present in the system.\n * Release sdfomat5, using ignition-math3\n * Release gazebo8, using sdformat5 (so no ign-math2 libraries is present in the mix).", "markup": "markdown", "html": "<p>I'm pretty sure that we could have worked around the ABI problems by using the inline namespaces, however there are other problems coming from mixing ignition libraries (like having a software which requires different dependencies that in configuring time end up calling two different cmake modules of the same ignition library). There are solution for these problems too, but they are not trivial and discouraged at this time of the gazebo8 release.</p>\n<p>We finally decided to go with the following plan for releasing gazebo8:</p>\n<ul>\n<li>Make ignition-math2 and ignition-math3 to conflict each other. Only one can be present in the system.</li>\n<li>Release sdfomat5, using ignition-math3</li>\n<li>Release gazebo8, using sdformat5 (so no ign-math2 libraries is present in the mix).</li>\n</ul>", "type": "rendered"}, "created_on": "2017-01-25T00:32:45.475600+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": null, "type": "issue_comment", "id": 33926018}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141/comments/34259173.json"}, "html": {"href": "#!/osrf/gazebo/issues/2141#comment-34259173"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141.json"}}, "type": "issue", "id": 2141, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Risk of mixing ign-math2 and ign-math3 ABIs in gazebo8"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2017-02-08T17:00:04.977417+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": null, "type": "issue_comment", "id": 34259173}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141/comments/34582997.json"}, "html": {"href": "#!/osrf/gazebo/issues/2141#comment-34582997"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141.json"}}, "type": "issue", "id": 2141, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Risk of mixing ign-math2 and ign-math3 ABIs in gazebo8"}, "content": {"raw": "Is there more to be done here? Should we retitle this issue to mention `inline namespaces`?", "markup": "markdown", "html": "<p>Is there more to be done here? Should we retitle this issue to mention <code>inline namespaces</code>?</p>", "type": "rendered"}, "created_on": "2017-02-22T00:37:48.031190+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 34582997}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141/comments/34601075.json"}, "html": {"href": "#!/osrf/gazebo/issues/2141#comment-34601075"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141.json"}}, "type": "issue", "id": 2141, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Risk of mixing ign-math2 and ign-math3 ABIs in gazebo8"}, "content": {"raw": "My 2 cents: in the specific case of `gazebo` and `ignition-math`, using `inline namespaces` will make the problem of mixing ABI more explicit \n(a compilation error rather then a run-time enigmatic crash) but will not enable mixing different major versions of ignition-math and its dependencies. \n\n`inline namespaces` work fine in preventing errors in \"private\" dependencies, such as the two (incompatible) copies of ipopt in this bug: #!/osrf/gazebo/issues/2005/segfault-when-calling-ipopt-virtual-method . In Gazebo and its dependencies case, however, the `ignition-math` classes are used in all the public interfaces, so it is common\npractice that Gazebo calls a method in a dependent library that returns an ignition-math object, and assigns it to a member of a Gazebo class, that itself is a ignition-math object . \nUsing `inline namespaces` all this assignements will result in compile errors, if two different versions of ignition-math would be used across gazebo and its dependencies.", "markup": "markdown", "html": "<p>My 2 cents: in the specific case of <code>gazebo</code> and <code>ignition-math</code>, using <code>inline namespaces</code> will make the problem of mixing ABI more explicit \n(a compilation error rather then a run-time enigmatic crash) but will not enable mixing different major versions of ignition-math and its dependencies. </p>\n<p><code>inline namespaces</code> work fine in preventing errors in \"private\" dependencies, such as the two (incompatible) copies of ipopt in this bug: <a href=\"#!/osrf/gazebo/issues/2005/segfault-when-calling-ipopt-virtual-method\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/issues/2005/segfault-when-calling-ipopt-virtual-method</a> . In Gazebo and its dependencies case, however, the <code>ignition-math</code> classes are used in all the public interfaces, so it is common\npractice that Gazebo calls a method in a dependent library that returns an ignition-math object, and assigns it to a member of a Gazebo class, that itself is a ignition-math object . \nUsing <code>inline namespaces</code> all this assignements will result in compile errors, if two different versions of ignition-math would be used across gazebo and its dependencies.</p>", "type": "rendered"}, "created_on": "2017-02-22T14:55:53.940778+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2017-02-22T14:56:05.923400+00:00", "type": "issue_comment", "id": 34601075}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141/comments/44019783.json"}, "html": {"href": "#!/osrf/gazebo/issues/2141#comment-44019783"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2141.json"}}, "type": "issue", "id": 2141, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Risk of mixing ign-math2 and ign-math3 ABIs in gazebo8"}, "content": {"raw": "fixed some time ago", "markup": "markdown", "html": "<p>fixed some time ago</p>", "type": "rendered"}, "created_on": "2018-03-19T18:55:57.256668+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": null, "type": "issue_comment", "id": 44019783}], "page": 1, "size": 6}