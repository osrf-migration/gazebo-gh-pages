{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2668/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2668.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2668/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2668/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2668/intermittent-exception-an-object-of-type"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2668/vote"}}, "reporter": {"display_name": "Martin Pecka", "uuid": "{41691c43-4ae0-49ba-ba45-3c36439f5af2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D"}, "html": {"href": "https://bitbucket.org/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d1ad32a09564f856909994613fdbc37cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMP-1.png"}}, "nickname": "peci1", "type": "user", "account_id": "557058:434ecab2-e510-4ede-8f9a-1c2a5a4032e1"}, "title": "Intermittent exception: An object of type 'Light' with name 'sun' already exists.", "component": {"name": "rendering", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122881.json"}}}, "votes": 1, "watches": 1, "content": {"raw": "This bug doesn\u2019t happen regularly, so it\u2019s probably a timing/livelock issue. It happened when I started gzserver and then gzclient via a single roslaunch file. \r\n\r\nI\u2019m using many custom Gazebo and ROS plugins, but none interfere with lights and the scene I\u2019m loading also has lights untouched compared to empty.world. I\u2019m on Gazebo 9.11.0 installed from OSRF PPA on Ubuntu 18.04.\r\n\r\n\u200c\r\n\r\n```\r\nOGRE EXCEPTION(4:ItemIdentityException): An object of type 'Light' with name 'sun' already exists. in SceneManager::createMovableObject at /build/ogre-1.9-B6QkmW/ogre-1.9-1.9.0+dfsg1/OgreMain/src/OgreSceneManager.cpp (line 6832)\\nUnable to create a light\\n\"\r\n```\r\n\r\n\u200c\r\n\r\n```\r\n#0  0x00007f9ce5844e97 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\r\n#1  0x00007f9ce5846801 in __GI_abort () at abort.c:79\r\n#2  0x00007f9ce5e9b957 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#3  0x00007f9ce5ea1ab6 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#4  0x00007f9ce5ea1af1 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#5  0x00007f9ce5ea1d24 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#6  0x00007f9ce527f19c in gazebo::rendering::Light::Load() (this=this@entry=0x55b111116b00)\r\n    at ./gazebo/rendering/Light.cc:93\r\n#7  0x00007f9ce527f921 in gazebo::rendering::Light::LoadFromMsg(gazebo::msgs::Light const&) (this=0x55b111116b00, _msg=...) at ./gazebo/rendering/Light.cc:175\r\n#8  0x00007f9ce52b9c91 in gazebo::rendering::Scene::ProcessLightFactoryMsg(boost::shared_ptr<gazebo::msgs::Light const> const&) (this=this@entry=0x55b10e2e7b00, _msg=...) at ./gazebo/rendering/Scene.cc:2943\r\n#9  0x00007f9ce52c7c8b in gazebo::rendering::Scene::PreRender() (this=0x55b10e2e7b00)\r\n    at ./gazebo/rendering/Scene.cc:2012\r\n#10 0x00007f9ce76f1d81 in std::function<void ()>::operator()() const (this=<optimized out>)\r\n    at /usr/include/c++/7/bits/std_function.h:706\r\n#11 0x00007f9ce76f1d81 in gazebo::event::EventT<void ()>::Signal() (this=0x7f9ce758b040 <gazebo::event::Events::preRender>) at ./gazebo/common/Event.hh:277\r\n#12 0x00007f9ce76e95bc in gazebo::event::EventT<void ()>::operator()() (this=<optimized out>)\r\n    at ./gazebo/common/Event.hh:121\r\n#13 0x00007f9ce76e95bc in gazebo::gui::GLWidget::paintEvent(QPaintEvent*) (this=<optimized out>, _e=0x7ffef1e28850) at ./gazebo/gui/GLWidget.cc:288\r\n#14 0x00007f9ce4a9f048 in QWidget::event(QEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#15 0x00007f9ce4a6083c in QApplicationPrivate::notify_helper(QObject*, QEvent*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#16 0x00007f9ce4a68104 in QApplication::notify(QObject*, QEvent*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#17 0x00007f9ce6d9e9c8 in QCoreApplication::notifyInternal2(QObject*, QEvent*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\r\n#18 0x00007f9ce4a9819a in QWidgetPrivate::sendPaintEvent(QRegion const&) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#19 0x00007f9ce4a9875a in QWidgetPrivate::drawWidget(QPaintDevice*, QRegion const&, QPoint const&, int, QPainter*, QWidgetBackingStore*) () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#20 0x00007f9ce4a6df5b in QWidgetPrivate::repaint_sys(QRegion const&) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#21 0x00007f9ce4a876b2 in QWidgetPrivate::syncBackingStore() () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#22 0x00007f9ce4a9f1b8 in QWidget::event(QEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#23 0x00007f9ce4a6083c in QApplicationPrivate::notify_helper(QObject*, QEvent*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#24 0x00007f9ce4a68104 in QApplication::notify(QObject*, QEvent*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#25 0x00007f9ce6d9e9c8 in QCoreApplication::notifyInternal2(QObject*, QEvent*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\r\n---Type <return> to continue, or q <return> to quit---\r\n#26 0x00007f9ce4a70ec8 in  () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#27 0x00007f9ce4a71f0d in  () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#28 0x00007f9ce4ab906e in  () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\r\n#29 0x00007f9ce6dcd645 in QMetaObject::activate(QObject*, int, int, void**) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\r\n#30 0x00007f9ce149d1bf in QWindow::screenChanged(QScreen*) () at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#31 0x00007f9ce149d9f3 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#32 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#33 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#34 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#35 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#36 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#37 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#38 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#39 0x00007f9ce14a4486 in QWindowPrivate::setTopLevelScreen(QScreen*, bool) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#40 0x00007f9ce1496770 in QGuiApplicationPrivate::processWindowScreenChangedEvent(QWindowSystemInterfacePrivate::WindowScreenChangedEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#41 0x00007f9ce149b0a5 in QGuiApplicationPrivate::processWindowSystemEvent(QWindowSystemInterfacePrivate::WindowSystemEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#42 0x00007f9ce14722eb in QWindowSystemInterface::sendWindowSystemEvents(QFlags<QEventLoop::ProcessEventsFlag>) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\r\n#43 0x00007f9c6378d260 in  () at /usr/lib/x86_64-linux-gnu/libQt5XcbQpa.so.5\r\n#44 0x00007f9cddcb4417 in g_main_context_dispatch () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\r\n#45 0x00007f9cddcb4650 in  () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\r\n#46 0x00007f9cddcb46dc in g_main_context_iteration () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\r\n#47 0x00007f9ce6df797f in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\r\n#48 0x00007f9ce6d9c9fa in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) ()\r\n    at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\r\n#49 0x00007f9ce6da5aa4 in QCoreApplication::exec() () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\r\n#50 0x00007f9ce76f9512 in gazebo::gui::run(int, char**) (_argc=<optimized out>, _argv=0x7ffef1e29778)\r\n    at ./gazebo/gui/GuiIface.cc:442\r\n#51 0x000055b10a9ca8dc in main(int, char**) (_argc=9, _argv=0x7ffef1e29778) at ./gazebo/gui/main.cc:29\r\n```\r\n\r\n\u200c", "markup": "markdown", "html": "<p>This bug doesn\u2019t happen regularly, so it\u2019s probably a timing/livelock issue. It happened when I started gzserver and then gzclient via a single roslaunch file. </p>\n<p>I\u2019m using many custom Gazebo and ROS plugins, but none interfere with lights and the scene I\u2019m loading also has lights untouched compared to empty.world. I\u2019m on Gazebo 9.11.0 installed from OSRF PPA on Ubuntu 18.04.</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span>OGRE EXCEPTION(4:ItemIdentityException): An object of type &#39;Light&#39; with name &#39;sun&#39; already exists. in SceneManager::createMovableObject at /build/ogre-1.9-B6QkmW/ogre-1.9-1.9.0+dfsg1/OgreMain/src/OgreSceneManager.cpp (line 6832)\\nUnable to create a light\\n&quot;\n</pre></div>\n\n\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span>#0  0x00007f9ce5844e97 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n#1  0x00007f9ce5846801 in __GI_abort () at abort.c:79\n#2  0x00007f9ce5e9b957 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3  0x00007f9ce5ea1ab6 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4  0x00007f9ce5ea1af1 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5  0x00007f9ce5ea1d24 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6  0x00007f9ce527f19c in gazebo::rendering::Light::Load() (this=this@entry=0x55b111116b00)\n    at ./gazebo/rendering/Light.cc:93\n#7  0x00007f9ce527f921 in gazebo::rendering::Light::LoadFromMsg(gazebo::msgs::Light const&amp;) (this=0x55b111116b00, _msg=...) at ./gazebo/rendering/Light.cc:175\n#8  0x00007f9ce52b9c91 in gazebo::rendering::Scene::ProcessLightFactoryMsg(boost::shared_ptr&lt;gazebo::msgs::Light const&gt; const&amp;) (this=this@entry=0x55b10e2e7b00, _msg=...) at ./gazebo/rendering/Scene.cc:2943\n#9  0x00007f9ce52c7c8b in gazebo::rendering::Scene::PreRender() (this=0x55b10e2e7b00)\n    at ./gazebo/rendering/Scene.cc:2012\n#10 0x00007f9ce76f1d81 in std::function&lt;void ()&gt;::operator()() const (this=&lt;optimized out&gt;)\n    at /usr/include/c++/7/bits/std_function.h:706\n#11 0x00007f9ce76f1d81 in gazebo::event::EventT&lt;void ()&gt;::Signal() (this=0x7f9ce758b040 &lt;gazebo::event::Events::preRender&gt;) at ./gazebo/common/Event.hh:277\n#12 0x00007f9ce76e95bc in gazebo::event::EventT&lt;void ()&gt;::operator()() (this=&lt;optimized out&gt;)\n    at ./gazebo/common/Event.hh:121\n#13 0x00007f9ce76e95bc in gazebo::gui::GLWidget::paintEvent(QPaintEvent*) (this=&lt;optimized out&gt;, _e=0x7ffef1e28850) at ./gazebo/gui/GLWidget.cc:288\n#14 0x00007f9ce4a9f048 in QWidget::event(QEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#15 0x00007f9ce4a6083c in QApplicationPrivate::notify_helper(QObject*, QEvent*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#16 0x00007f9ce4a68104 in QApplication::notify(QObject*, QEvent*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#17 0x00007f9ce6d9e9c8 in QCoreApplication::notifyInternal2(QObject*, QEvent*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#18 0x00007f9ce4a9819a in QWidgetPrivate::sendPaintEvent(QRegion const&amp;) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#19 0x00007f9ce4a9875a in QWidgetPrivate::drawWidget(QPaintDevice*, QRegion const&amp;, QPoint const&amp;, int, QPainter*, QWidgetBackingStore*) () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#20 0x00007f9ce4a6df5b in QWidgetPrivate::repaint_sys(QRegion const&amp;) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#21 0x00007f9ce4a876b2 in QWidgetPrivate::syncBackingStore() () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#22 0x00007f9ce4a9f1b8 in QWidget::event(QEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#23 0x00007f9ce4a6083c in QApplicationPrivate::notify_helper(QObject*, QEvent*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#24 0x00007f9ce4a68104 in QApplication::notify(QObject*, QEvent*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#25 0x00007f9ce6d9e9c8 in QCoreApplication::notifyInternal2(QObject*, QEvent*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n#26 0x00007f9ce4a70ec8 in  () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#27 0x00007f9ce4a71f0d in  () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#28 0x00007f9ce4ab906e in  () at /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#29 0x00007f9ce6dcd645 in QMetaObject::activate(QObject*, int, int, void**) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#30 0x00007f9ce149d1bf in QWindow::screenChanged(QScreen*) () at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#31 0x00007f9ce149d9f3 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#32 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#33 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#34 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#35 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#36 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#37 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#38 0x00007f9ce149da38 in QWindowPrivate::emitScreenChangedRecursion(QScreen*) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#39 0x00007f9ce14a4486 in QWindowPrivate::setTopLevelScreen(QScreen*, bool) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#40 0x00007f9ce1496770 in QGuiApplicationPrivate::processWindowScreenChangedEvent(QWindowSystemInterfacePrivate::WindowScreenChangedEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#41 0x00007f9ce149b0a5 in QGuiApplicationPrivate::processWindowSystemEvent(QWindowSystemInterfacePrivate::WindowSystemEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#42 0x00007f9ce14722eb in QWindowSystemInterface::sendWindowSystemEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5\n#43 0x00007f9c6378d260 in  () at /usr/lib/x86_64-linux-gnu/libQt5XcbQpa.so.5\n#44 0x00007f9cddcb4417 in g_main_context_dispatch () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n#45 0x00007f9cddcb4650 in  () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n#46 0x00007f9cddcb46dc in g_main_context_iteration () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n#47 0x00007f9ce6df797f in QEventDispatcherGlib::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#48 0x00007f9ce6d9c9fa in QEventLoop::exec(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) ()\n    at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#49 0x00007f9ce6da5aa4 in QCoreApplication::exec() () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#50 0x00007f9ce76f9512 in gazebo::gui::run(int, char**) (_argc=&lt;optimized out&gt;, _argv=0x7ffef1e29778)\n    at ./gazebo/gui/GuiIface.cc:442\n#51 0x000055b10a9ca8dc in main(int, char**) (_argc=9, _argv=0x7ffef1e29778) at ./gazebo/gui/main.cc:29\n</pre></div>\n\n\n<p>\u200c</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "9.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242746.json"}}}, "edited_on": null, "created_on": "2019-11-07T11:50:08.973192+00:00", "milestone": null, "updated_on": "2019-11-07T11:50:08.973192+00:00", "type": "issue", "id": 2668}