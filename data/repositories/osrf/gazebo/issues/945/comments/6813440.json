{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/945/comments/6813440.json"}, "html": {"href": "#!/osrf/gazebo/issues/945#comment-6813440"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/945.json"}}, "type": "issue", "id": 945, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "INTEGRATION_world test failure on gazebo_2.1 branch"}, "content": {"raw": "On my mac it fails at the same place in the test ([world.cc:57](#!/osrf/gazebo/src/bc556c87a28a89ea257cfa33c9a345a6b713197f/test/integration/world.cc?at=gazebo_2.1#cl-57)), but with a memory access error while the plugin is being destroyed:\n~~~\nThread 52 (process 78599):\n#0  0x000000011192c425 in ?? ()\nCannot access memory at address 0x11192c425\n#1  0x000000011192242f in ?? ()\n#2  0x0000000100381f51 in boost::detail::sp_counted_base::release () at /usr/local/Cellar/boost/1.54.0/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\n#3  0x0000000100381f51 in boost::shared_ptr<gazebo::ModelPlugin>::~shared_ptr () at /usr/local/Cellar/boost/1.54.0/include/boost/smart_ptr/detail/shared_count.hpp:371\n#4  0x0000000100381f51 in boost::detail::shared_count::~shared_count () at sp_counted_base_gcc_x86.hpp:722\n#5  0x0000000100381f51 in std::_Destroy<boost::shared_ptr<gazebo::ModelPlugin> > () at /usr/include/c++/4.2.1/bits/stl_construct.h:370\n#6  0x0000000100381f51 in boost::shared_ptr<gazebo::ModelPlugin>::~shared_ptr () at sp_counted_base_gcc_x86.hpp:122\n#7  0x0000000100381f51 in std::_Destroy<boost::shared_ptr<gazebo::ModelPlugin>*, boost::shared_ptr<gazebo::ModelPlugin> > () at sp_counted_base_gcc_x86.hpp:107\n#8  0x0000000100381f51 in std::_Destroy<boost::shared_ptr<gazebo::ModelPlugin>*> () at /usr/include/c++/4.2.1/bits/stl_construct.h:924\n#9  0x0000000100381f51 in std::__destroy_aux<boost::shared_ptr<gazebo::ModelPlugin>*> () at /usr/include/c++/4.2.1/bits/stl_construct.h:182\n#10 0x0000000100381f51 in std::vector<boost::shared_ptr<gazebo::ModelPlugin>, std::allocator<boost::shared_ptr<gazebo::ModelPlugin> > >::_M_erase_at_end () at /usr/include/c++/4.2.1/bits/stl_vector.h:155\n#11 0x0000000100381f51 in std::vector<boost::shared_ptr<gazebo::ModelPlugin>, std::allocator<boost::shared_ptr<gazebo::ModelPlugin> > >::clear () at /usr/include/c++/4.2.1/bits/stl_vector.h:752\n#12 0x0000000100381f51 in gazebo::physics::Model::Fini (this=0x106a0ac00) at sp_counted_base_gcc_x86.hpp:327\n#13 0x000000010031b1e0 in std::vector<boost::shared_ptr<gazebo::physics::Base>, std::allocator<boost::shared_ptr<gazebo::physics::Base> > >::end () at /usr/include/c++/4.2.1/bits/stl_vector.h:210\n#14 0x000000010031b1e0 in std::vector<boost::shared_ptr<gazebo::physics::Base>, std::allocator<boost::shared_ptr<gazebo::physics::Base> > >::erase () at /usr/include/c++/4.2.1/bits/stl_vector.h:111\n#15 0x000000010031b1e0 in gazebo::physics::Base::RemoveChild (this=0x1137321a0, _id=<value temporarily unavailable, due to optimizations>) at /Users/scpeters/ws/gazebo/src/gazebo/gazebo/physics/Base.cc:211\n#16 0x00000001003c2251 in __gnu_cxx::__normal_iterator<boost::shared_ptr<gazebo::physics::Model>*, std::vector<boost::shared_ptr<gazebo::physics::Model>, std::allocator<boost::shared_ptr<gazebo::physics::Model> > > >::operator++ () at /usr/include/c++/4.2.1/bits/stl_iterator.h:736\n#17 0x00000001003c2251 in gazebo::physics::World::ClearModels (this=0x104839800) at /Users/scpeters/ws/gazebo/src/gazebo/gazebo/physics/World.cc:734\n#18 0x00000001003beb85 in gazebo::physics::World::Step (this=<value temporarily unavailable, due to optimizations>) at /Users/scpeters/ws/gazebo/src/gazebo/gazebo/physics/World.cc:572\n#19 0x00000001003bdd88 in gazebo::physics::World::RunLoop (this=<value temporarily unavailable, due to optimizations>) at /Users/scpeters/ws/gazebo/src/gazebo/gazebo/physics/World.cc:404\n#20 0x00000001025dbf49 in thread_proxy (param=<value temporarily unavailable, due to optimizations>) at libs/thread/src/pthread/thread.cpp:164\n#21 0x00007fff90b45772 in _pthread_start ()\n#22 0x00007fff90b321a1 in thread_start ()\n~~~", "markup": "markdown", "html": "<p>On my mac it fails at the same place in the test (<a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/bc556c87a28a89ea257cfa33c9a345a6b713197f/test/integration/world.cc?at=gazebo_2.1#cl-57\" rel=\"nofollow\">world.cc:57</a>), but with a memory access error while the plugin is being destroyed:</p>\n<div class=\"codehilite\"><pre><span></span>Thread 52 (process 78599):\n#0  0x000000011192c425 in ?? ()\nCannot access memory at address 0x11192c425\n#1  0x000000011192242f in ?? ()\n#2  0x0000000100381f51 in boost::detail::sp_counted_base::release () at /usr/local/Cellar/boost/1.54.0/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\n#3  0x0000000100381f51 in boost::shared_ptr&lt;gazebo::ModelPlugin&gt;::~shared_ptr () at /usr/local/Cellar/boost/1.54.0/include/boost/smart_ptr/detail/shared_count.hpp:371\n#4  0x0000000100381f51 in boost::detail::shared_count::~shared_count () at sp_counted_base_gcc_x86.hpp:722\n#5  0x0000000100381f51 in std::_Destroy&lt;boost::shared_ptr&lt;gazebo::ModelPlugin&gt; &gt; () at /usr/include/c++/4.2.1/bits/stl_construct.h:370\n#6  0x0000000100381f51 in boost::shared_ptr&lt;gazebo::ModelPlugin&gt;::~shared_ptr () at sp_counted_base_gcc_x86.hpp:122\n#7  0x0000000100381f51 in std::_Destroy&lt;boost::shared_ptr&lt;gazebo::ModelPlugin&gt;*, boost::shared_ptr&lt;gazebo::ModelPlugin&gt; &gt; () at sp_counted_base_gcc_x86.hpp:107\n#8  0x0000000100381f51 in std::_Destroy&lt;boost::shared_ptr&lt;gazebo::ModelPlugin&gt;*&gt; () at /usr/include/c++/4.2.1/bits/stl_construct.h:924\n#9  0x0000000100381f51 in std::__destroy_aux&lt;boost::shared_ptr&lt;gazebo::ModelPlugin&gt;*&gt; () at /usr/include/c++/4.2.1/bits/stl_construct.h:182\n#10 0x0000000100381f51 in std::vector&lt;boost::shared_ptr&lt;gazebo::ModelPlugin&gt;, std::allocator&lt;boost::shared_ptr&lt;gazebo::ModelPlugin&gt; &gt; &gt;::_M_erase_at_end () at /usr/include/c++/4.2.1/bits/stl_vector.h:155\n#11 0x0000000100381f51 in std::vector&lt;boost::shared_ptr&lt;gazebo::ModelPlugin&gt;, std::allocator&lt;boost::shared_ptr&lt;gazebo::ModelPlugin&gt; &gt; &gt;::clear () at /usr/include/c++/4.2.1/bits/stl_vector.h:752\n#12 0x0000000100381f51 in gazebo::physics::Model::Fini (this=0x106a0ac00) at sp_counted_base_gcc_x86.hpp:327\n#13 0x000000010031b1e0 in std::vector&lt;boost::shared_ptr&lt;gazebo::physics::Base&gt;, std::allocator&lt;boost::shared_ptr&lt;gazebo::physics::Base&gt; &gt; &gt;::end () at /usr/include/c++/4.2.1/bits/stl_vector.h:210\n#14 0x000000010031b1e0 in std::vector&lt;boost::shared_ptr&lt;gazebo::physics::Base&gt;, std::allocator&lt;boost::shared_ptr&lt;gazebo::physics::Base&gt; &gt; &gt;::erase () at /usr/include/c++/4.2.1/bits/stl_vector.h:111\n#15 0x000000010031b1e0 in gazebo::physics::Base::RemoveChild (this=0x1137321a0, _id=&lt;value temporarily unavailable, due to optimizations&gt;) at /Users/scpeters/ws/gazebo/src/gazebo/gazebo/physics/Base.cc:211\n#16 0x00000001003c2251 in __gnu_cxx::__normal_iterator&lt;boost::shared_ptr&lt;gazebo::physics::Model&gt;*, std::vector&lt;boost::shared_ptr&lt;gazebo::physics::Model&gt;, std::allocator&lt;boost::shared_ptr&lt;gazebo::physics::Model&gt; &gt; &gt; &gt;::operator++ () at /usr/include/c++/4.2.1/bits/stl_iterator.h:736\n#17 0x00000001003c2251 in gazebo::physics::World::ClearModels (this=0x104839800) at /Users/scpeters/ws/gazebo/src/gazebo/gazebo/physics/World.cc:734\n#18 0x00000001003beb85 in gazebo::physics::World::Step (this=&lt;value temporarily unavailable, due to optimizations&gt;) at /Users/scpeters/ws/gazebo/src/gazebo/gazebo/physics/World.cc:572\n#19 0x00000001003bdd88 in gazebo::physics::World::RunLoop (this=&lt;value temporarily unavailable, due to optimizations&gt;) at /Users/scpeters/ws/gazebo/src/gazebo/gazebo/physics/World.cc:404\n#20 0x00000001025dbf49 in thread_proxy (param=&lt;value temporarily unavailable, due to optimizations&gt;) at libs/thread/src/pthread/thread.cpp:164\n#21 0x00007fff90b45772 in _pthread_start ()\n#22 0x00007fff90b321a1 in thread_start ()\n</pre></div>", "type": "rendered"}, "created_on": "2013-11-08T20:07:27.496707+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 6813440}