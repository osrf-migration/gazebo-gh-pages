{"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/622/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/622.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/622/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/622/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/622/joint-velocities-are-high-when-the-joint"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/622/vote"}}, "reporter": {"display_name": "Jesper Smith", "uuid": "{61d9fe7d-e554-408c-99fb-faefa9c96114}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B61d9fe7d-e554-408c-99fb-faefa9c96114%7D"}, "html": {"href": "https://bitbucket.org/%7B61d9fe7d-e554-408c-99fb-faefa9c96114%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56b6560717cfbb0f4a2cc0af6e638650d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJS-4.png"}}, "nickname": "jespersmith", "type": "user", "account_id": "557058:2e842f1c-d9d5-48b1-88ae-5dd9e81a6f77"}, "title": "Joint velocities are high when the joint link is in contact and the joint is not rotating", "component": null, "votes": 4, "watches": 9, "content": {"raw": "When a torque is applied on a joint and the joint link is in contact with an object such that the joint is stationary, the joint velocity is non-zero and can be quite large depending on the force.\r\n\r\nI did a simple test using the sandia hands grabbing a cylinder. I've attached a screenshot of the state of the robot. On the joints left_f0_j1 and left_f0_j2 I applied an open loop force of 1.0 Nm using joint->setForce(0, 1.0) in a model plugin.\r\n\r\nFor this test I set the damping of the fingers to 0.1 and disabled the velocity limits. The physics are done using the standard parameters.\r\n\r\nWhen the finger contacts the cyclinder and is in a steady state, the angle is constant and the corresponding joint velocity should also be zero. However, the joint angles and velocities in steady state are\r\n\r\n\r\n```\r\nleft_f0_j1\r\n  - Angle: 0.9 rad\r\n  - Velocity: 5 rad/s\r\nleft_f0_j2\r\n  - Angle: 1 rad\r\n  - Velocity: 8 rad/s\r\n\r\n```\r\n\r\nI've attached the graphs of the test over 6 seconds to this bug report as well.\r\n\r\nIf P(I)D control is used to control the finger angle, it can easily become unstable when the finger hits an object. Depending how the velocity limits are implemented this could also lead to instabilities.\r\n\r\nAll tests are done using the gazebo_1.5 branch.", "markup": "markdown", "html": "<p>When a torque is applied on a joint and the joint link is in contact with an object such that the joint is stationary, the joint velocity is non-zero and can be quite large depending on the force.</p>\n<p>I did a simple test using the sandia hands grabbing a cylinder. I've attached a screenshot of the state of the robot. On the joints left_f0_j1 and left_f0_j2 I applied an open loop force of 1.0 Nm using joint-&gt;setForce(0, 1.0) in a model plugin.</p>\n<p>For this test I set the damping of the fingers to 0.1 and disabled the velocity limits. The physics are done using the standard parameters.</p>\n<p>When the finger contacts the cyclinder and is in a steady state, the angle is constant and the corresponding joint velocity should also be zero. However, the joint angles and velocities in steady state are</p>\n<div class=\"codehilite\"><pre><span></span>left_f0_j1\n  - Angle: 0.9 rad\n  - Velocity: 5 rad/s\nleft_f0_j2\n  - Angle: 1 rad\n  - Velocity: 8 rad/s\n</pre></div>\n\n\n<p>I've attached the graphs of the test over 6 seconds to this bug report as well.</p>\n<p>If P(I)D control is used to control the finger angle, it can easily become unstable when the finger hits an object. Depending how the velocity limits are implemented this could also lead to instabilities.</p>\n<p>All tests are done using the gazebo_1.5 branch.</p>", "type": "rendered"}, "assignee": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "state": "open", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-04-04T21:18:55.712945+00:00", "milestone": null, "updated_on": "2016-09-14T19:20:23.500803+00:00", "type": "issue", "id": 622}