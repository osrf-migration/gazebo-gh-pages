{"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/50/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/50.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/50/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/50/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/50/modeldatabase-getmodelpath-model-foo"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/50/vote"}}, "reporter": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "title": "ModelDatabase::GetModelPath(\"model://foo\") erroneously returns path to local file \"foo\"", "component": null, "votes": 0, "watches": 1, "content": {"raw": "If a request for `model://foo` is made and the current working directory contains a file or directory called `foo`, then `ModelDatabase::GetModelPath()` will end up looking for `$PWD/foo/manifest.xml`.\n\nAn easy demonstration of this problem is the pr2 test: it's a binary called `pr2` and it requests `model://pr2`.  If you run this test from within `build/test/regression`, it will fail.  Run it from somewhere else (some directory not containing a file or directory called `pr2`), it will succeed. This is why the test fails under `make test`; ctest is running each test from the directory where it was compiled to.\n\nI'm not sure what the right behavior here is.  If you want people to shortcut the environment variables to refer to local models via `model://relative/path/to/something`, then there should at least be a check for whether that path, if it exists, is a directory.  But even with that check, I think that having different model-lookup behavior depending on the value of PWD will be confusing.  Better to force people to use GAZEBO_MODEL_PATH.\n\nMarking critical because it's preventing a clean test report from Jenkins.", "markup": "markdown", "html": "<p>If a request for <code>model://foo</code> is made and the current working directory contains a file or directory called <code>foo</code>, then <code>ModelDatabase::GetModelPath()</code> will end up looking for <code>$PWD/foo/manifest.xml</code>.</p>\n<p>An easy demonstration of this problem is the pr2 test: it's a binary called <code>pr2</code> and it requests <code>model://pr2</code>.  If you run this test from within <code>build/test/regression</code>, it will fail.  Run it from somewhere else (some directory not containing a file or directory called <code>pr2</code>), it will succeed. This is why the test fails under <code>make test</code>; ctest is running each test from the directory where it was compiled to.</p>\n<p>I'm not sure what the right behavior here is.  If you want people to shortcut the environment variables to refer to local models via <code>model://relative/path/to/something</code>, then there should at least be a check for whether that path, if it exists, is a directory.  But even with that check, I think that having different model-lookup behavior depending on the value of PWD will be confusing.  Better to force people to use GAZEBO_MODEL_PATH.</p>\n<p>Marking critical because it's preventing a clean test report from Jenkins.</p>", "type": "rendered"}, "assignee": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2012-10-11T07:21:37.721335+00:00", "milestone": null, "updated_on": "2016-09-14T19:43:37.963736+00:00", "type": "issue", "id": 50}