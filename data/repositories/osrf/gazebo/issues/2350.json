{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2350/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2350.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2350/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2350/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2350/gazebo-crashes-if-a-logplaybackcontrol"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2350/vote"}}, "reporter": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "title": "Gazebo crashes if a LogPlaybackControl message is received during simulation mode", "component": {"name": "util::Logging-Playback", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/283119.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "Gazebo  shouldn't be [subscribing](#!/osrf/gazebo/src/58fbe39d9e90bcfabc9f4a2ba911ce934b29b66a/gazebo/physics/World.cc?fileviewer=file-view-default#World.cc-213) to `~/playback_control` unless it's playing back a log.\r\n\r\nIf a playback control  message is received during simulation mode, the message is received by the world, logplay is called... No one realizes there is a problem until the whole thing crashes with this backtrace:\r\n\r\n~~~\r\nThread 12 \"gzserver\" received signal SIGSEGV, Segmentation fault.\r\n[Switching to Thread 0x7fffaf4c9700 (LWP 10225)]\r\n0x00007ffff2676c34 in tinyxml2::XMLNode::LastChildElement(char const*) const () from /usr/lib/x86_64-linux-gnu/libtinyxml2.so.2\r\n(gdb) bt\r\n#0  0x00007ffff2676c34 in tinyxml2::XMLNode::LastChildElement(char const*) const () from /usr/lib/x86_64-linux-gnu/libtinyxml2.so.2\r\n#1  0x00007ffff71a814b in tinyxml2::XMLNode::LastChildElement (value=0x7ffff71c89e9 \"chunk\", this=<optimized out>)\r\n    at /usr/include/tinyxml2.h:739\r\n#2  gazebo::util::LogPlay::Forward (this=this@entry=0x7ffff7dd54e0 <SingletonT<gazebo::util::LogPlay>::GetInstance()::t>)\r\n    at /media/louise/TERA/code/gazebo8/gazebo/util/LogPlay.cc:580\r\n#3  0x00007ffff71a89fa in gazebo::util::LogPlay::Seek (this=0x7ffff7dd54e0 <SingletonT<gazebo::util::LogPlay>::GetInstance()::t>, \r\n    _time=...) at /media/louise/TERA/code/gazebo8/gazebo/util/LogPlay.cc:605\r\n#4  0x00007ffff5a60ae3 in gazebo::physics::World::OnPlaybackControl (this=0x1437de0, _data=...)\r\n    at /media/louise/TERA/code/gazebo8/gazebo/physics/World.cc:1559\r\n#5  0x00007ffff5a781e2 in boost::function1<void, boost::shared_ptr<gazebo::msgs::LogPlaybackControl const> const&>::operator() (a0=..., \r\n    this=0x122b930) at /usr/include/boost/function/function_template.hpp:773\r\n#6  gazebo::transport::CallbackHelperT<gazebo::msgs::LogPlaybackControl>::HandleData(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, boost::function<void (unsigned int)>, unsigned int) (this=0x122b8f0, \r\n    _newdata=\"\\b\\000*\\005\\b\\234\\001\\020\", _cb=..., _id=0) at /media/louise/TERA/code/gazebo8/gazebo/transport/CallbackHelper.hh:149\r\n#7  0x00007ffff5342b56 in gazebo::transport::Node::ProcessIncoming (this=0x13fd1e0)\r\n    at /media/louise/TERA/code/gazebo8/gazebo/transport/Node.cc:223\r\n#8  0x00007ffff5351017 in gazebo::transport::TopicManager::ProcessNodes (\r\n    this=this@entry=0x7ffff7dd5500 <SingletonT<gazebo::transport::TopicManager>::GetInstance()::t>, _onlyOut=_onlyOut@entry=false)\r\n    at /media/louise/TERA/code/gazebo8/gazebo/transport/TopicManager.cc:197\r\n#9  0x00007ffff5339003 in gazebo::transport::ConnectionManager::RunUpdate (\r\n    this=this@entry=0x7ffff7dd52a0 <SingletonT<gazebo::transport::ConnectionManager>::GetInstance()::t>)\r\n    at /media/louise/TERA/code/gazebo8/gazebo/transport/ConnectionManager.cc:283\r\n#10 0x00007ffff5339318 in gazebo::transport::ConnectionManager::Run (\r\n    this=0x7ffff7dd52a0 <SingletonT<gazebo::transport::ConnectionManager>::GetInstance()::t>)\r\n    at /media/louise/TERA/code/gazebo8/gazebo/transport/ConnectionManager.cc:314\r\n#11 0x00007ffff32705d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0\r\n#12 0x00007ffff5dc56ba in start_thread (arg=0x7fffaf4c9700) at pthread_create.c:333\r\n#13 0x00007ffff63d23dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\r\n~~~\r\n\r\nIssueForNewDevelopers", "markup": "markdown", "html": "<p>Gazebo  shouldn't be <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/58fbe39d9e90bcfabc9f4a2ba911ce934b29b66a/gazebo/physics/World.cc?fileviewer=file-view-default#World.cc-213\" rel=\"nofollow\">subscribing</a> to <code>~/playback_control</code> unless it's playing back a log.</p>\n<p>If a playback control  message is received during simulation mode, the message is received by the world, logplay is called... No one realizes there is a problem until the whole thing crashes with this backtrace:</p>\n<div class=\"codehilite\"><pre><span></span>Thread 12 &quot;gzserver&quot; received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7fffaf4c9700 (LWP 10225)]\n0x00007ffff2676c34 in tinyxml2::XMLNode::LastChildElement(char const*) const () from /usr/lib/x86_64-linux-gnu/libtinyxml2.so.2\n(gdb) bt\n#0  0x00007ffff2676c34 in tinyxml2::XMLNode::LastChildElement(char const*) const () from /usr/lib/x86_64-linux-gnu/libtinyxml2.so.2\n#1  0x00007ffff71a814b in tinyxml2::XMLNode::LastChildElement (value=0x7ffff71c89e9 &quot;chunk&quot;, this=&lt;optimized out&gt;)\n    at /usr/include/tinyxml2.h:739\n#2  gazebo::util::LogPlay::Forward (this=this@entry=0x7ffff7dd54e0 &lt;SingletonT&lt;gazebo::util::LogPlay&gt;::GetInstance()::t&gt;)\n    at /media/louise/TERA/code/gazebo8/gazebo/util/LogPlay.cc:580\n#3  0x00007ffff71a89fa in gazebo::util::LogPlay::Seek (this=0x7ffff7dd54e0 &lt;SingletonT&lt;gazebo::util::LogPlay&gt;::GetInstance()::t&gt;, \n    _time=...) at /media/louise/TERA/code/gazebo8/gazebo/util/LogPlay.cc:605\n#4  0x00007ffff5a60ae3 in gazebo::physics::World::OnPlaybackControl (this=0x1437de0, _data=...)\n    at /media/louise/TERA/code/gazebo8/gazebo/physics/World.cc:1559\n#5  0x00007ffff5a781e2 in boost::function1&lt;void, boost::shared_ptr&lt;gazebo::msgs::LogPlaybackControl const&gt; const&amp;&gt;::operator() (a0=..., \n    this=0x122b930) at /usr/include/boost/function/function_template.hpp:773\n#6  gazebo::transport::CallbackHelperT&lt;gazebo::msgs::LogPlaybackControl&gt;::HandleData(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, boost::function&lt;void (unsigned int)&gt;, unsigned int) (this=0x122b8f0, \n    _newdata=&quot;\\b\\000*\\005\\b\\234\\001\\020&quot;, _cb=..., _id=0) at /media/louise/TERA/code/gazebo8/gazebo/transport/CallbackHelper.hh:149\n#7  0x00007ffff5342b56 in gazebo::transport::Node::ProcessIncoming (this=0x13fd1e0)\n    at /media/louise/TERA/code/gazebo8/gazebo/transport/Node.cc:223\n#8  0x00007ffff5351017 in gazebo::transport::TopicManager::ProcessNodes (\n    this=this@entry=0x7ffff7dd5500 &lt;SingletonT&lt;gazebo::transport::TopicManager&gt;::GetInstance()::t&gt;, _onlyOut=_onlyOut@entry=false)\n    at /media/louise/TERA/code/gazebo8/gazebo/transport/TopicManager.cc:197\n#9  0x00007ffff5339003 in gazebo::transport::ConnectionManager::RunUpdate (\n    this=this@entry=0x7ffff7dd52a0 &lt;SingletonT&lt;gazebo::transport::ConnectionManager&gt;::GetInstance()::t&gt;)\n    at /media/louise/TERA/code/gazebo8/gazebo/transport/ConnectionManager.cc:283\n#10 0x00007ffff5339318 in gazebo::transport::ConnectionManager::Run (\n    this=0x7ffff7dd52a0 &lt;SingletonT&lt;gazebo::transport::ConnectionManager&gt;::GetInstance()::t&gt;)\n    at /media/louise/TERA/code/gazebo8/gazebo/transport/ConnectionManager.cc:314\n#11 0x00007ffff32705d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0\n#12 0x00007ffff5dc56ba in start_thread (arg=0x7fffaf4c9700) at pthread_create.c:333\n#13 0x00007ffff63d23dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n</pre></div>\n\n\n<p>IssueForNewDevelopers</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2017-09-15T02:52:11.875254+00:00", "milestone": null, "updated_on": "2017-09-15T02:52:11.875254+00:00", "type": "issue", "id": 2350}