{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2476/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2476.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2476/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2476/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2476/forcetorque-sensor-visualization-seems-to"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2476/vote"}}, "reporter": {"display_name": "Jordan Lack", "uuid": "{a47ca146-169c-4fcf-b59f-8410d9f676ff}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba47ca146-169c-4fcf-b59f-8410d9f676ff%7D"}, "html": {"href": "https://bitbucket.org/%7Ba47ca146-169c-4fcf-b59f-8410d9f676ff%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:82c7a832-85b7-45f4-86fc-e63688f35a2d/e5a6704f-a784-4c66-94ff-f7a9c914403a/128"}}, "nickname": "jordanlack", "type": "user", "account_id": "557058:82c7a832-85b7-45f4-86fc-e63688f35a2d"}, "title": "ForceTorque sensor visualization seems to ignore <pose>", "component": {"name": "sensors", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122877.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "Here is a copy/pasted block from my urdf where I declare my force/torque sensor,\r\n```\r\n<gazebo reference=\"left_arm_j6\">\r\n    <sensor name=\"left_arm_j6_ft_sensor\" type=\"force_torque\">\r\n      <pose>0.0637 -0.202 0.0 0.0 0.0 0.0</pose>\r\n      <always_on>true</always_on>\r\n      <update_rate>1000.0</update_rate>\r\n      <visualize>true</visualize>\r\n      <force_torque>\r\n        <frame>sensor</frame>\r\n        <measure_direction>parent_to_child</measure_direction>\r\n      </force_torque>\r\n    </sensor>\r\n  </gazebo>\r\n```\r\nbut the data that i'm getting off the sensor is not rotated correctly, and instead is aligned with the joint frame.\r\n\r\nYou can see in the attached image that the F/T visualization is exactly aligned with the joint frame. Using gazebo 7.12. The above block results in the following block from the SDF,\r\n```\r\n<joint name='left_arm_j6' type='revolute'>\r\n      <child>left_arm_j6_link</child>\r\n      <parent>left_arm_j5_link</parent>\r\n      <axis>\r\n        <xyz>0 0 -1</xyz>\r\n        <limit>\r\n          <lower>-2.399</lower>\r\n          <upper>1.1344</upper>\r\n          <effort>200</effort>\r\n          <velocity>1</velocity>\r\n        </limit>\r\n        <dynamics>\r\n          <damping>100</damping>\r\n          <friction>10</friction>\r\n          <spring_reference>0</spring_reference>\r\n          <spring_stiffness>0</spring_stiffness>\r\n        </dynamics>\r\n        <use_parent_model_frame>1</use_parent_model_frame>\r\n      </axis>\r\n      <physics>\r\n        <provide_feedback>1</provide_feedback>\r\n        <ode>\r\n          <provide_feedback>1</provide_feedback>\r\n          <implicit_spring_damper>1</implicit_spring_damper>\r\n          <cfm_damping>1</cfm_damping>\r\n          <limit>\r\n            <cfm>0</cfm>\r\n            <erp>0.2</erp>\r\n          </limit>\r\n        </ode>\r\n      </physics>\r\n      <sensor name='left_arm_j6_ft_sensor' type='force_torque'>\r\n        <pose frame=''>0.06375 -0.202146 0 -1.5708 0 0</pose>\r\n        <always_on>1</always_on>\r\n        <update_rate>1000</update_rate>\r\n        <visualize>1</visualize>\r\n        <force_torque>\r\n          <frame>sensor</frame>\r\n          <measure_direction>parent_to_child</measure_direction>\r\n        </force_torque>\r\n      </sensor>\r\n    </joint>\r\n```", "markup": "markdown", "html": "<p>Here is a copy/pasted block from my urdf where I declare my force/torque sensor,</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;gazebo</span> <span class=\"na\">reference=</span><span class=\"s\">&quot;left_arm_j6&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;sensor</span> <span class=\"na\">name=</span><span class=\"s\">&quot;left_arm_j6_ft_sensor&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;force_torque&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;pose&gt;</span>0.0637 -0.202 0.0 0.0 0.0 0.0<span class=\"nt\">&lt;/pose&gt;</span>\n      <span class=\"nt\">&lt;always_on&gt;</span>true<span class=\"nt\">&lt;/always_on&gt;</span>\n      <span class=\"nt\">&lt;update_rate&gt;</span>1000.0<span class=\"nt\">&lt;/update_rate&gt;</span>\n      <span class=\"nt\">&lt;visualize&gt;</span>true<span class=\"nt\">&lt;/visualize&gt;</span>\n      <span class=\"nt\">&lt;force_torque&gt;</span>\n        <span class=\"nt\">&lt;frame&gt;</span>sensor<span class=\"nt\">&lt;/frame&gt;</span>\n        <span class=\"nt\">&lt;measure_direction&gt;</span>parent_to_child<span class=\"nt\">&lt;/measure_direction&gt;</span>\n      <span class=\"nt\">&lt;/force_torque&gt;</span>\n    <span class=\"nt\">&lt;/sensor&gt;</span>\n  <span class=\"nt\">&lt;/gazebo&gt;</span>\n</pre></div>\n\n\n<p>but the data that i'm getting off the sensor is not rotated correctly, and instead is aligned with the joint frame.</p>\n<p>You can see in the attached image that the F/T visualization is exactly aligned with the joint frame. Using gazebo 7.12. The above block results in the following block from the SDF,</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;joint</span> <span class=\"na\">name=</span><span class=\"s\">&#39;left_arm_j6&#39;</span> <span class=\"na\">type=</span><span class=\"s\">&#39;revolute&#39;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;child&gt;</span>left_arm_j6_link<span class=\"nt\">&lt;/child&gt;</span>\n      <span class=\"nt\">&lt;parent&gt;</span>left_arm_j5_link<span class=\"nt\">&lt;/parent&gt;</span>\n      <span class=\"nt\">&lt;axis&gt;</span>\n        <span class=\"nt\">&lt;xyz&gt;</span>0 0 -1<span class=\"nt\">&lt;/xyz&gt;</span>\n        <span class=\"nt\">&lt;limit&gt;</span>\n          <span class=\"nt\">&lt;lower&gt;</span>-2.399<span class=\"nt\">&lt;/lower&gt;</span>\n          <span class=\"nt\">&lt;upper&gt;</span>1.1344<span class=\"nt\">&lt;/upper&gt;</span>\n          <span class=\"nt\">&lt;effort&gt;</span>200<span class=\"nt\">&lt;/effort&gt;</span>\n          <span class=\"nt\">&lt;velocity&gt;</span>1<span class=\"nt\">&lt;/velocity&gt;</span>\n        <span class=\"nt\">&lt;/limit&gt;</span>\n        <span class=\"nt\">&lt;dynamics&gt;</span>\n          <span class=\"nt\">&lt;damping&gt;</span>100<span class=\"nt\">&lt;/damping&gt;</span>\n          <span class=\"nt\">&lt;friction&gt;</span>10<span class=\"nt\">&lt;/friction&gt;</span>\n          <span class=\"nt\">&lt;spring_reference&gt;</span>0<span class=\"nt\">&lt;/spring_reference&gt;</span>\n          <span class=\"nt\">&lt;spring_stiffness&gt;</span>0<span class=\"nt\">&lt;/spring_stiffness&gt;</span>\n        <span class=\"nt\">&lt;/dynamics&gt;</span>\n        <span class=\"nt\">&lt;use_parent_model_frame&gt;</span>1<span class=\"nt\">&lt;/use_parent_model_frame&gt;</span>\n      <span class=\"nt\">&lt;/axis&gt;</span>\n      <span class=\"nt\">&lt;physics&gt;</span>\n        <span class=\"nt\">&lt;provide_feedback&gt;</span>1<span class=\"nt\">&lt;/provide_feedback&gt;</span>\n        <span class=\"nt\">&lt;ode&gt;</span>\n          <span class=\"nt\">&lt;provide_feedback&gt;</span>1<span class=\"nt\">&lt;/provide_feedback&gt;</span>\n          <span class=\"nt\">&lt;implicit_spring_damper&gt;</span>1<span class=\"nt\">&lt;/implicit_spring_damper&gt;</span>\n          <span class=\"nt\">&lt;cfm_damping&gt;</span>1<span class=\"nt\">&lt;/cfm_damping&gt;</span>\n          <span class=\"nt\">&lt;limit&gt;</span>\n            <span class=\"nt\">&lt;cfm&gt;</span>0<span class=\"nt\">&lt;/cfm&gt;</span>\n            <span class=\"nt\">&lt;erp&gt;</span>0.2<span class=\"nt\">&lt;/erp&gt;</span>\n          <span class=\"nt\">&lt;/limit&gt;</span>\n        <span class=\"nt\">&lt;/ode&gt;</span>\n      <span class=\"nt\">&lt;/physics&gt;</span>\n      <span class=\"nt\">&lt;sensor</span> <span class=\"na\">name=</span><span class=\"s\">&#39;left_arm_j6_ft_sensor&#39;</span> <span class=\"na\">type=</span><span class=\"s\">&#39;force_torque&#39;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;pose</span> <span class=\"na\">frame=</span><span class=\"s\">&#39;&#39;</span><span class=\"nt\">&gt;</span>0.06375 -0.202146 0 -1.5708 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n        <span class=\"nt\">&lt;always_on&gt;</span>1<span class=\"nt\">&lt;/always_on&gt;</span>\n        <span class=\"nt\">&lt;update_rate&gt;</span>1000<span class=\"nt\">&lt;/update_rate&gt;</span>\n        <span class=\"nt\">&lt;visualize&gt;</span>1<span class=\"nt\">&lt;/visualize&gt;</span>\n        <span class=\"nt\">&lt;force_torque&gt;</span>\n          <span class=\"nt\">&lt;frame&gt;</span>sensor<span class=\"nt\">&lt;/frame&gt;</span>\n          <span class=\"nt\">&lt;measure_direction&gt;</span>parent_to_child<span class=\"nt\">&lt;/measure_direction&gt;</span>\n        <span class=\"nt\">&lt;/force_torque&gt;</span>\n      <span class=\"nt\">&lt;/sensor&gt;</span>\n    <span class=\"nt\">&lt;/joint&gt;</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "7.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242744.json"}}}, "edited_on": null, "created_on": "2018-05-28T23:58:55.846764+00:00", "milestone": null, "updated_on": "2018-06-08T23:14:19.884226+00:00", "type": "issue", "id": 2476}