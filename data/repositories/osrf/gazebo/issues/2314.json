{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2314/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2314.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2314/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2314/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2314/sonar-sensor-is-not-compatible-with-ray"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2314/vote"}}, "reporter": {"display_name": "narwel_evanli", "uuid": "{747cece9-ce4a-470b-8484-b95fe43b13f3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B747cece9-ce4a-470b-8484-b95fe43b13f3%7D"}, "html": {"href": "https://bitbucket.org/%7B747cece9-ce4a-470b-8484-b95fe43b13f3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/541d2c224ee18e668d88ab2a5b6835b6d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsN-2.png"}}, "nickname": "narwel_evanli", "type": "user", "account_id": "557058:168a414e-dccd-4184-8d32-4d56e613ae23"}, "title": "Sonar sensor is not compatible with ray sensor", "component": {"name": "sensors::RaySensor", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122886.json"}}}, "votes": 1, "watches": 1, "content": {"raw": "Sonar is not compatible with ray sensor , attachment is example you can run with \r\n\r\n```\r\n#!bash\r\n roslaunch sonar.launch \r\n\r\n```\r\n\r\n```\r\n#!xml\r\n\r\n\r\n\r\n<?xml version=\"1.0\"?>\r\n\r\n<robot name=\"sensor\" xmlns:xacro=\"http://www.ros.org/wiki/xacro\">\r\n    <!-- camera -->\r\n\r\n\r\n    <link name=\"base_link\"/>\r\n\r\n    <joint name=\"sonar_joint\" type=\"fixed\">\r\n        <origin xyz=\"0 0 0.0\" rpy=\"0 1.5708 0\"/>\r\n        <parent link=\"base_link\"/>\r\n        <child link=\"sonar_link\"/>\r\n    </joint>\r\n\r\n    <link name=\"sonar_link\">\r\n        <inertial>\r\n            <mass value=\"0.001\"/>\r\n            <origin xyz=\"0 0 0.0\" rpy=\"0 0 0 \"/>\r\n            <inertia ixx=\"0.000000017\" ixy=\"0\" ixz=\"0\" iyy=\"0.000000017\" iyz=\"0\" izz=\"0.000000017\"/>\r\n        </inertial>\r\n        <visual>\r\n            <origin xyz=\"0 0 0.0\" rpy=\"0 0 0\"/>\r\n            <geometry>\r\n                <box size=\"0.10 0.10 0.10\"/>\r\n            </geometry>\r\n        </visual>\r\n        <collision>\r\n            <origin xyz=\"0 0 0.0\" rpy=\"0 0 0\"/>\r\n            <geometry>\r\n                <box size=\"0.10 0.10 0.10\"/>\r\n            </geometry>\r\n        </collision>\r\n    </link>\r\n\r\n    <gazebo reference=\"sonar_link\">\r\n        <sensor name=\"sonar\" type=\"sonar\">\r\n            <pose>0.0 0.10 0.6 0 0 0 0</pose>\r\n            <sonar>\r\n                <min>0</min>\r\n                <max>2.00</max>\r\n                <radius>0.3</radius>\r\n            </sonar>\r\n            <!--<always_on>true</always_on>-->\r\n            <update_rate>30</update_rate>\r\n            <visualize>true</visualize>\r\n        </sensor>\r\n\r\n\r\n    </gazebo>\r\n\r\n\r\n    <joint name=\"laser\" type=\"fixed\">\r\n        <!--<origin xyz=\"-0.122 0.00 0.09165\" rpy=\"0 0 -1.928588823\" />-->\r\n        <origin xyz=\"-0.106 0.00 0.3165\" rpy=\"0 0 0\"/>\r\n        <parent link=\"base_link\"/>\r\n        <child link=\"laser_link\"/>\r\n    </joint>\r\n\r\n    <link name=\"laser_link\">\r\n\r\n        <visual>\r\n            <origin xyz=\"0 0 0.0\" rpy=\"0 0 0\"/>\r\n            <geometry>\r\n                <box size=\"0.01 0.01 0.01\"/>\r\n            </geometry>\r\n        </visual>\r\n\r\n    </link>\r\n\r\n    <gazebo reference=\"laser_link\">\r\n        <sensor type=\"ray\" name=\"laser_sensor\">\r\n            <pose>0 0 0 0 0 0</pose>\r\n            <visualize>true</visualize>\r\n            <update_rate>10</update_rate>\r\n            <ray>\r\n                <scan>\r\n                    <horizontal>\r\n                        <samples>360</samples>\r\n                        <resolution>1</resolution>\r\n                        <min_angle>-3.1415926</min_angle>\r\n                        <max_angle>3.1415926</max_angle>\r\n\r\n                    </horizontal>\r\n                </scan>\r\n                <range>\r\n                    <min>0.0</min>\r\n                    <max>6.0</max>\r\n                    <resolution>0.01</resolution>\r\n                </range>\r\n                <noise>\r\n                    <type>none</type>\r\n                    <!-- Noise parameters based on published spec for Hokuyo laser\r\n                         achieving \"+-30mm\" accuracy at range < 10m.  A mean of 0.0m and\r\n                         stddev of 0.01m will put 99.7% of samples within 0.03m of the true\r\n                         reading. -->\r\n                    <mean>0.0</mean>\r\n                    <stddev>0.0</stddev>\r\n                </noise>\r\n            </ray>\r\n\r\n        </sensor>\r\n    </gazebo>\r\n    <!--sensor_scan parent=\"base_link\"/-->\r\n\r\n</robot>\r\n\r\n```\r\nadd some obstacle to the world , you will see the result as below:\r\n![result.png](data/bitbucket.org/repo/jgXqbo/images/2171133762-result.png)", "markup": "markdown", "html": "<p>Sonar is not compatible with ray sensor , attachment is example you can run with </p>\n<div class=\"codehilite language-bash\"><pre><span></span> roslaunch sonar.launch \n</pre></div>\n\n\n<div class=\"codehilite language-xml\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot;?&gt;</span>\n\n<span class=\"nt\">&lt;robot</span> <span class=\"na\">name=</span><span class=\"s\">&quot;sensor&quot;</span> <span class=\"na\">xmlns:xacro=</span><span class=\"s\">&quot;http://www.ros.org/wiki/xacro&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"c\">&lt;!-- camera --&gt;</span>\n\n\n    <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;base_link&quot;</span><span class=\"nt\">/&gt;</span>\n\n    <span class=\"nt\">&lt;joint</span> <span class=\"na\">name=</span><span class=\"s\">&quot;sonar_joint&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;fixed&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;origin</span> <span class=\"na\">xyz=</span><span class=\"s\">&quot;0 0 0.0&quot;</span> <span class=\"na\">rpy=</span><span class=\"s\">&quot;0 1.5708 0&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;parent</span> <span class=\"na\">link=</span><span class=\"s\">&quot;base_link&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;child</span> <span class=\"na\">link=</span><span class=\"s\">&quot;sonar_link&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/joint&gt;</span>\n\n    <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;sonar_link&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;inertial&gt;</span>\n            <span class=\"nt\">&lt;mass</span> <span class=\"na\">value=</span><span class=\"s\">&quot;0.001&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;origin</span> <span class=\"na\">xyz=</span><span class=\"s\">&quot;0 0 0.0&quot;</span> <span class=\"na\">rpy=</span><span class=\"s\">&quot;0 0 0 &quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;inertia</span> <span class=\"na\">ixx=</span><span class=\"s\">&quot;0.000000017&quot;</span> <span class=\"na\">ixy=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">ixz=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">iyy=</span><span class=\"s\">&quot;0.000000017&quot;</span> <span class=\"na\">iyz=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">izz=</span><span class=\"s\">&quot;0.000000017&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/inertial&gt;</span>\n        <span class=\"nt\">&lt;visual&gt;</span>\n            <span class=\"nt\">&lt;origin</span> <span class=\"na\">xyz=</span><span class=\"s\">&quot;0 0 0.0&quot;</span> <span class=\"na\">rpy=</span><span class=\"s\">&quot;0 0 0&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;geometry&gt;</span>\n                <span class=\"nt\">&lt;box</span> <span class=\"na\">size=</span><span class=\"s\">&quot;0.10 0.10 0.10&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/visual&gt;</span>\n        <span class=\"nt\">&lt;collision&gt;</span>\n            <span class=\"nt\">&lt;origin</span> <span class=\"na\">xyz=</span><span class=\"s\">&quot;0 0 0.0&quot;</span> <span class=\"na\">rpy=</span><span class=\"s\">&quot;0 0 0&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;geometry&gt;</span>\n                <span class=\"nt\">&lt;box</span> <span class=\"na\">size=</span><span class=\"s\">&quot;0.10 0.10 0.10&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/collision&gt;</span>\n    <span class=\"nt\">&lt;/link&gt;</span>\n\n    <span class=\"nt\">&lt;gazebo</span> <span class=\"na\">reference=</span><span class=\"s\">&quot;sonar_link&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;sensor</span> <span class=\"na\">name=</span><span class=\"s\">&quot;sonar&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;sonar&quot;</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;pose&gt;</span>0.0 0.10 0.6 0 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n            <span class=\"nt\">&lt;sonar&gt;</span>\n                <span class=\"nt\">&lt;min&gt;</span>0<span class=\"nt\">&lt;/min&gt;</span>\n                <span class=\"nt\">&lt;max&gt;</span>2.00<span class=\"nt\">&lt;/max&gt;</span>\n                <span class=\"nt\">&lt;radius&gt;</span>0.3<span class=\"nt\">&lt;/radius&gt;</span>\n            <span class=\"nt\">&lt;/sonar&gt;</span>\n            <span class=\"c\">&lt;!--&lt;always_on&gt;true&lt;/always_on&gt;--&gt;</span>\n            <span class=\"nt\">&lt;update_rate&gt;</span>30<span class=\"nt\">&lt;/update_rate&gt;</span>\n            <span class=\"nt\">&lt;visualize&gt;</span>true<span class=\"nt\">&lt;/visualize&gt;</span>\n        <span class=\"nt\">&lt;/sensor&gt;</span>\n\n\n    <span class=\"nt\">&lt;/gazebo&gt;</span>\n\n\n    <span class=\"nt\">&lt;joint</span> <span class=\"na\">name=</span><span class=\"s\">&quot;laser&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;fixed&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"c\">&lt;!--&lt;origin xyz=&quot;-0.122 0.00 0.09165&quot; rpy=&quot;0 0 -1.928588823&quot; /&gt;--&gt;</span>\n        <span class=\"nt\">&lt;origin</span> <span class=\"na\">xyz=</span><span class=\"s\">&quot;-0.106 0.00 0.3165&quot;</span> <span class=\"na\">rpy=</span><span class=\"s\">&quot;0 0 0&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;parent</span> <span class=\"na\">link=</span><span class=\"s\">&quot;base_link&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;child</span> <span class=\"na\">link=</span><span class=\"s\">&quot;laser_link&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/joint&gt;</span>\n\n    <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;laser_link&quot;</span><span class=\"nt\">&gt;</span>\n\n        <span class=\"nt\">&lt;visual&gt;</span>\n            <span class=\"nt\">&lt;origin</span> <span class=\"na\">xyz=</span><span class=\"s\">&quot;0 0 0.0&quot;</span> <span class=\"na\">rpy=</span><span class=\"s\">&quot;0 0 0&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;geometry&gt;</span>\n                <span class=\"nt\">&lt;box</span> <span class=\"na\">size=</span><span class=\"s\">&quot;0.01 0.01 0.01&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/visual&gt;</span>\n\n    <span class=\"nt\">&lt;/link&gt;</span>\n\n    <span class=\"nt\">&lt;gazebo</span> <span class=\"na\">reference=</span><span class=\"s\">&quot;laser_link&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;sensor</span> <span class=\"na\">type=</span><span class=\"s\">&quot;ray&quot;</span> <span class=\"na\">name=</span><span class=\"s\">&quot;laser_sensor&quot;</span><span class=\"nt\">&gt;</span>\n            <span class=\"nt\">&lt;pose&gt;</span>0 0 0 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n            <span class=\"nt\">&lt;visualize&gt;</span>true<span class=\"nt\">&lt;/visualize&gt;</span>\n            <span class=\"nt\">&lt;update_rate&gt;</span>10<span class=\"nt\">&lt;/update_rate&gt;</span>\n            <span class=\"nt\">&lt;ray&gt;</span>\n                <span class=\"nt\">&lt;scan&gt;</span>\n                    <span class=\"nt\">&lt;horizontal&gt;</span>\n                        <span class=\"nt\">&lt;samples&gt;</span>360<span class=\"nt\">&lt;/samples&gt;</span>\n                        <span class=\"nt\">&lt;resolution&gt;</span>1<span class=\"nt\">&lt;/resolution&gt;</span>\n                        <span class=\"nt\">&lt;min_angle&gt;</span>-3.1415926<span class=\"nt\">&lt;/min_angle&gt;</span>\n                        <span class=\"nt\">&lt;max_angle&gt;</span>3.1415926<span class=\"nt\">&lt;/max_angle&gt;</span>\n\n                    <span class=\"nt\">&lt;/horizontal&gt;</span>\n                <span class=\"nt\">&lt;/scan&gt;</span>\n                <span class=\"nt\">&lt;range&gt;</span>\n                    <span class=\"nt\">&lt;min&gt;</span>0.0<span class=\"nt\">&lt;/min&gt;</span>\n                    <span class=\"nt\">&lt;max&gt;</span>6.0<span class=\"nt\">&lt;/max&gt;</span>\n                    <span class=\"nt\">&lt;resolution&gt;</span>0.01<span class=\"nt\">&lt;/resolution&gt;</span>\n                <span class=\"nt\">&lt;/range&gt;</span>\n                <span class=\"nt\">&lt;noise&gt;</span>\n                    <span class=\"nt\">&lt;type&gt;</span>none<span class=\"nt\">&lt;/type&gt;</span>\n                    <span class=\"c\">&lt;!-- Noise parameters based on published spec for Hokuyo laser</span>\n<span class=\"c\">                         achieving &quot;+-30mm&quot; accuracy at range &lt; 10m.  A mean of 0.0m and</span>\n<span class=\"c\">                         stddev of 0.01m will put 99.7% of samples within 0.03m of the true</span>\n<span class=\"c\">                         reading. --&gt;</span>\n                    <span class=\"nt\">&lt;mean&gt;</span>0.0<span class=\"nt\">&lt;/mean&gt;</span>\n                    <span class=\"nt\">&lt;stddev&gt;</span>0.0<span class=\"nt\">&lt;/stddev&gt;</span>\n                <span class=\"nt\">&lt;/noise&gt;</span>\n            <span class=\"nt\">&lt;/ray&gt;</span>\n\n        <span class=\"nt\">&lt;/sensor&gt;</span>\n    <span class=\"nt\">&lt;/gazebo&gt;</span>\n    <span class=\"c\">&lt;!--sensor_scan parent=&quot;base_link&quot;/--&gt;</span>\n\n<span class=\"nt\">&lt;/robot&gt;</span>\n</pre></div>\n\n\n<p>add some obstacle to the world , you will see the result as below:\n<img alt=\"result.png\" src=\"data/bitbucket.org/repo/jgXqbo/images/2171133762-result.png\" /></p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "7.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242744.json"}}}, "edited_on": null, "created_on": "2017-07-07T14:25:23.592275+00:00", "milestone": null, "updated_on": "2017-07-08T00:42:07.091841+00:00", "type": "issue", "id": 2314}