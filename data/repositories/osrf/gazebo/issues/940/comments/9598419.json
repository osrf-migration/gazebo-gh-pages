{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/940/comments/9598419.json"}, "html": {"href": "#!/osrf/gazebo/issues/940#comment-9598419"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/940.json"}}, "type": "issue", "id": 940, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Force Torque sensor (ForceTorqueSensor.cc) does not take into account sensor pose"}, "content": {"raw": "@scpeters yes, requiring to invert the joint to change the direction of the sensor would be quite tedious to do if you import the model from urdf (that is a requirement for us because our inertial parameter identification software outputs its results in a urdf model). \n\nI did a first try on solving this issue in my branch issue_940: https://bitbucket.org/traversaro/gazebo/commits/branch/issue_940 (measure_direction support is commented out because it need a change in sdformat).\n\nI prepared a test under `test/regression/940_force_torque_sensor_frame` that checks the returned values for various f/t sensors placed between two (fixed) stacked cylinders (and also between the cylinders and the torques as an additional test), and compare the obtained measure against analytically obtained values.  \nThe only physics engine that consistently pass the test is `ode`. All the other engines have issues:\n\n* `bullet` normally passes the test, but randomly it measures some crazy torque when it is expected to measure zero torque (this behavior is apparently independent from the number of simulation steps I do before checking the measure).  Could be related to #!/osrf/gazebo/issue/619 ?\n* `simbody` measure is simply broken. \n* `dart` report the correct measure, but It fails because it expresses some of the wrenches returned by method GetForceTorque in the wrong frame. \n\nThe output of a test run when bullet fails : http://pastebin.com/raw.php?i=dZNZT2Fs\n\nThe output of a test run when bullet succeeds : http://pastebin.com/raw.php?i=bNvpy14s ", "markup": "markdown", "html": "<p>@scpeters yes, requiring to invert the joint to change the direction of the sensor would be quite tedious to do if you import the model from urdf (that is a requirement for us because our inertial parameter identification software outputs its results in a urdf model). </p>\n<p>I did a first try on solving this issue in my branch issue_940: <a href=\"https://bitbucket.org/traversaro/gazebo/commits/branch/issue_940\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/traversaro/gazebo/commits/branch/issue_940</a> (measure_direction support is commented out because it need a change in sdformat).</p>\n<p>I prepared a test under <code>test/regression/940_force_torque_sensor_frame</code> that checks the returned values for various f/t sensors placed between two (fixed) stacked cylinders (and also between the cylinders and the torques as an additional test), and compare the obtained measure against analytically obtained values.<br />\nThe only physics engine that consistently pass the test is <code>ode</code>. All the other engines have issues:</p>\n<ul>\n<li><code>bullet</code> normally passes the test, but randomly it measures some crazy torque when it is expected to measure zero torque (this behavior is apparently independent from the number of simulation steps I do before checking the measure).  Could be related to <a href=\"#!/osrf/gazebo/issue/619\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/issue/619</a> ?</li>\n<li><code>simbody</code> measure is simply broken. </li>\n<li><code>dart</code> report the correct measure, but It fails because it expresses some of the wrenches returned by method GetForceTorque in the wrong frame. </li>\n</ul>\n<p>The output of a test run when bullet fails : <a href=\"http://pastebin.com/raw.php?i=dZNZT2Fs\" rel=\"nofollow\" class=\"ap-connect-link\">http://pastebin.com/raw.php?i=dZNZT2Fs</a></p>\n<p>The output of a test run when bullet succeeds : <a href=\"http://pastebin.com/raw.php?i=bNvpy14s\" rel=\"nofollow\" class=\"ap-connect-link\">http://pastebin.com/raw.php?i=bNvpy14s</a> </p>", "type": "rendered"}, "created_on": "2014-04-10T10:45:45.322243+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2014-04-11T11:46:12.603737+00:00", "type": "issue_comment", "id": 9598419}