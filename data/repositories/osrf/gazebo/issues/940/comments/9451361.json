{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/940/comments/9451361.json"}, "html": {"href": "#!/osrf/gazebo/issues/940#comment-9451361"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/940.json"}}, "type": "issue", "id": 940, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Force Torque sensor (ForceTorqueSensor.cc) does not take into account sensor pose"}, "content": {"raw": "Just to articulate more on this issue: the SDF format documentation states that a ForceTorque sensor is described in SDF by a <force_torque> tag [1], that has an optional <frame> tag. This <frame> tag has \"parent\" as a default value (so it is reasonable to suppose that the other possible value for it is \"child\"). \n\nApparently this frame tag is not taken into account in the ForceTorqueSensor [2], that simply returns the body2force/torque elements of the JointWrench object returned by GetForceTorque(). From the JointWrench [3] documentation apparently  this body2force/torque is expressed in the joint Frame, while in GetForceTorque() documentation [4]  it appears that it is the ForceTorque applied by the body2 on body1 expressed in the child Frame. It is also not clear to me the point with respect to which the torque is expressed, but I assume that this point is the joint origin.\n\nI can commit time to fix this issue (and prepare a regression test) as soon as the semantics of the <force_torque> tag (and relative <frame>) and of GetForceTorque() method are clarified. \n\n[1] : http://gazebosim.org/sdf/dev.html#force_torque354 \n\n[2] : #!/osrf/gazebo/src/default/gazebo/sensors/ForceTorqueSensor.cc\n\n[3] : http://gazebosim.org/api/dev/classgazebo_1_1physics_1_1JointWrench.html\n\n[4] : http://gazebosim.org/api/dev/classgazebo_1_1physics_1_1Joint.html#a924807d32ef42bd741911ff33e7f3d53", "markup": "markdown", "html": "<p>Just to articulate more on this issue: the SDF format documentation states that a ForceTorque sensor is described in SDF by a &lt;force_torque&gt; tag [1], that has an optional &lt;frame&gt; tag. This &lt;frame&gt; tag has \"parent\" as a default value (so it is reasonable to suppose that the other possible value for it is \"child\"). </p>\n<p>Apparently this frame tag is not taken into account in the ForceTorqueSensor [2], that simply returns the body2force/torque elements of the JointWrench object returned by GetForceTorque(). From the JointWrench [3] documentation apparently  this body2force/torque is expressed in the joint Frame, while in GetForceTorque() documentation [4]  it appears that it is the ForceTorque applied by the body2 on body1 expressed in the child Frame. It is also not clear to me the point with respect to which the torque is expressed, but I assume that this point is the joint origin.</p>\n<p>I can commit time to fix this issue (and prepare a regression test) as soon as the semantics of the &lt;force_torque&gt; tag (and relative &lt;frame&gt;) and of GetForceTorque() method are clarified. </p>\n<p>[1] : <a href=\"http://gazebosim.org/sdf/dev.html#force_torque354\" rel=\"nofollow\" class=\"ap-connect-link\">http://gazebosim.org/sdf/dev.html#force_torque354</a> </p>\n<p>[2] : <a href=\"#!/osrf/gazebo/src/default/gazebo/sensors/ForceTorqueSensor.cc\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/default/gazebo/sensors/ForceTorqueSensor.cc</a></p>\n<p>[3] : <a href=\"http://gazebosim.org/api/dev/classgazebo_1_1physics_1_1JointWrench.html\" rel=\"nofollow\" class=\"ap-connect-link\">http://gazebosim.org/api/dev/classgazebo_1_1physics_1_1JointWrench.html</a></p>\n<p>[4] : <a href=\"http://gazebosim.org/api/dev/classgazebo_1_1physics_1_1Joint.html#a924807d32ef42bd741911ff33e7f3d53\" rel=\"nofollow\" class=\"ap-connect-link\">http://gazebosim.org/api/dev/classgazebo_1_1physics_1_1Joint.html#a924807d32ef42bd741911ff33e7f3d53</a></p>", "type": "rendered"}, "created_on": "2014-04-02T14:53:48.605360+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2014-04-02T22:52:46.701292+00:00", "type": "issue_comment", "id": 9451361}