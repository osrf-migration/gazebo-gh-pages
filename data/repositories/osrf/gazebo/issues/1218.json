{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1218/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1218.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1218/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1218/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1218/how-to-use-setangularaccel"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1218/vote"}}, "reporter": null, "title": "how to use \"SetAngularAccel\"?", "component": {"name": "physics", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122876.json"}}}, "votes": 0, "watches": 5, "content": {"raw": "I wrote a very simple modelplugin. I just want to see how model moves when I use the method \"SetAngularAccel\" But, nothing happened,\"SetAnfularAccel\"doesn't work, my model still rests there. Please tell me what's wrong,Thank you!\r\n\r\n\r\n\r\n```\r\n#!c++\r\n<?xml version=\"1.0\" ?>\r\n<sdf version=\"1.4\">\r\n  <model name=\"test\">\r\n    <link name=\"Link\">\r\n            <self_collide>true</self_collide>\r\n            <pose>0 0 0.05  0 0 0</pose>\r\n            <inertial>\r\n                <mass> 0.1 </mass>\r\n            </inertial> \r\n            <collision name=\"Base_collision\">\r\n        <geometry>\r\n                    <box>\r\n                        <size>0.1 2 0.1</size>\r\n                    </box>\r\n        </geometry>\r\n      </collision>\r\n      <visual name=\"Visual\">\r\n        <geometry>\r\n                    <box>\r\n                        <size>0.1 2 0.1</size>\r\n                    </box>\r\n        </geometry>\r\n      </visual>\r\n    </link>\r\n    <plugin name=\"df\" filename=\"/home/Dropbox/gazebo/torquetest/dist/Debug/GNU-Linux-x86/libtorquetest.so\"/>\r\n  </model>    \r\n</sdf>\r\n\r\n#include <gazebo/gazebo.hh>\r\n#include <gazebo/physics/physics.hh>\r\n#include <gazebo/common/common.hh>\r\nusing namespace gazebo;\r\nclass Arm_Control : public ModelPlugin\r\n{\r\npublic:~Arm_Control(){}\r\n    public: void Load(physics::ModelPtr _parent, sdf::ElementPtr /*_sdf*/)\r\n    {\r\n        this->model = _parent;\r\n        this->updateConnection = event::Events::ConnectWorldUpdateBegin(boost::bind(&Arm_Control::OnUpdate, this, _1));\r\n    }\r\npublic: void OnUpdate(const common::UpdateInfo & /*_info*/)\r\n    {\r\n    model->GetLink(\"Link\")->SetAngularAccel(math::Vector3(0,0,1.5));\r\n    }\r\n\r\nprivate: \r\n        physics::ModelPtr model;\r\n        event::ConnectionPtr updateConnection;\r\n};\r\n\r\nGZ_REGISTER_MODEL_PLUGIN(Arm_Control)\r\n\r\n```", "markup": "markdown", "html": "<p>I wrote a very simple modelplugin. I just want to see how model moves when I use the method \"SetAngularAccel\" But, nothing happened,\"SetAnfularAccel\"doesn't work, my model still rests there. Please tell me what's wrong,Thank you!</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"o\">&lt;?</span><span class=\"n\">xml</span> <span class=\"n\">version</span><span class=\"o\">=</span><span class=\"s\">&quot;1.0&quot;</span> <span class=\"o\">?&gt;</span>\n<span class=\"o\">&lt;</span><span class=\"n\">sdf</span> <span class=\"n\">version</span><span class=\"o\">=</span><span class=\"s\">&quot;1.4&quot;</span><span class=\"o\">&gt;</span>\n  <span class=\"o\">&lt;</span><span class=\"n\">model</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;test&quot;</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">link</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;Link&quot;</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;</span><span class=\"n\">self_collide</span><span class=\"o\">&gt;</span><span class=\"nb\">true</span><span class=\"o\">&lt;/</span><span class=\"n\">self_collide</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;</span><span class=\"n\">pose</span><span class=\"o\">&gt;</span><span class=\"mi\">0</span> <span class=\"mi\">0</span> <span class=\"mf\">0.05</span>  <span class=\"mi\">0</span> <span class=\"mi\">0</span> <span class=\"mi\">0</span><span class=\"o\">&lt;/</span><span class=\"n\">pose</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;</span><span class=\"n\">inertial</span><span class=\"o\">&gt;</span>\n                <span class=\"o\">&lt;</span><span class=\"n\">mass</span><span class=\"o\">&gt;</span> <span class=\"mf\">0.1</span> <span class=\"o\">&lt;/</span><span class=\"n\">mass</span><span class=\"o\">&gt;</span>\n            <span class=\"o\">&lt;/</span><span class=\"n\">inertial</span><span class=\"o\">&gt;</span> \n            <span class=\"o\">&lt;</span><span class=\"n\">collision</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;Base_collision&quot;</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">geometry</span><span class=\"o\">&gt;</span>\n                    <span class=\"o\">&lt;</span><span class=\"n\">box</span><span class=\"o\">&gt;</span>\n                        <span class=\"o\">&lt;</span><span class=\"n\">size</span><span class=\"o\">&gt;</span><span class=\"mf\">0.1</span> <span class=\"mi\">2</span> <span class=\"mf\">0.1</span><span class=\"o\">&lt;/</span><span class=\"n\">size</span><span class=\"o\">&gt;</span>\n                    <span class=\"o\">&lt;/</span><span class=\"n\">box</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;/</span><span class=\"n\">geometry</span><span class=\"o\">&gt;</span>\n      <span class=\"o\">&lt;/</span><span class=\"n\">collision</span><span class=\"o\">&gt;</span>\n      <span class=\"o\">&lt;</span><span class=\"n\">visual</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;Visual&quot;</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">geometry</span><span class=\"o\">&gt;</span>\n                    <span class=\"o\">&lt;</span><span class=\"n\">box</span><span class=\"o\">&gt;</span>\n                        <span class=\"o\">&lt;</span><span class=\"n\">size</span><span class=\"o\">&gt;</span><span class=\"mf\">0.1</span> <span class=\"mi\">2</span> <span class=\"mf\">0.1</span><span class=\"o\">&lt;/</span><span class=\"n\">size</span><span class=\"o\">&gt;</span>\n                    <span class=\"o\">&lt;/</span><span class=\"n\">box</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;/</span><span class=\"n\">geometry</span><span class=\"o\">&gt;</span>\n      <span class=\"o\">&lt;/</span><span class=\"n\">visual</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">link</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">plugin</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;df&quot;</span> <span class=\"n\">filename</span><span class=\"o\">=</span><span class=\"s\">&quot;/home/Dropbox/gazebo/torquetest/dist/Debug/GNU-Linux-x86/libtorquetest.so&quot;</span><span class=\"o\">/&gt;</span>\n  <span class=\"o\">&lt;/</span><span class=\"n\">model</span><span class=\"o\">&gt;</span>    \n<span class=\"o\">&lt;/</span><span class=\"n\">sdf</span><span class=\"o\">&gt;</span>\n\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;gazebo/gazebo.hh&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;gazebo/physics/physics.hh&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;gazebo/common/common.hh&gt;</span><span class=\"cp\"></span>\n<span class=\"k\">using</span> <span class=\"k\">namespace</span> <span class=\"n\">gazebo</span><span class=\"p\">;</span>\n<span class=\"k\">class</span> <span class=\"nc\">Arm_Control</span> <span class=\"o\">:</span> <span class=\"k\">public</span> <span class=\"n\">ModelPlugin</span>\n<span class=\"p\">{</span>\n<span class=\"k\">public</span><span class=\"o\">:~</span><span class=\"n\">Arm_Control</span><span class=\"p\">(){}</span>\n    <span class=\"k\">public</span><span class=\"o\">:</span> <span class=\"kt\">void</span> <span class=\"n\">Load</span><span class=\"p\">(</span><span class=\"n\">physics</span><span class=\"o\">::</span><span class=\"n\">ModelPtr</span> <span class=\"n\">_parent</span><span class=\"p\">,</span> <span class=\"n\">sdf</span><span class=\"o\">::</span><span class=\"n\">ElementPtr</span> <span class=\"cm\">/*_sdf*/</span><span class=\"p\">)</span>\n    <span class=\"p\">{</span>\n        <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">model</span> <span class=\"o\">=</span> <span class=\"n\">_parent</span><span class=\"p\">;</span>\n        <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">updateConnection</span> <span class=\"o\">=</span> <span class=\"n\">event</span><span class=\"o\">::</span><span class=\"n\">Events</span><span class=\"o\">::</span><span class=\"n\">ConnectWorldUpdateBegin</span><span class=\"p\">(</span><span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">bind</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">Arm_Control</span><span class=\"o\">::</span><span class=\"n\">OnUpdate</span><span class=\"p\">,</span> <span class=\"k\">this</span><span class=\"p\">,</span> <span class=\"n\">_1</span><span class=\"p\">));</span>\n    <span class=\"p\">}</span>\n<span class=\"k\">public</span><span class=\"o\">:</span> <span class=\"kt\">void</span> <span class=\"n\">OnUpdate</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">common</span><span class=\"o\">::</span><span class=\"n\">UpdateInfo</span> <span class=\"o\">&amp;</span> <span class=\"cm\">/*_info*/</span><span class=\"p\">)</span>\n    <span class=\"p\">{</span>\n    <span class=\"n\">model</span><span class=\"o\">-&gt;</span><span class=\"n\">GetLink</span><span class=\"p\">(</span><span class=\"s\">&quot;Link&quot;</span><span class=\"p\">)</span><span class=\"o\">-&gt;</span><span class=\"n\">SetAngularAccel</span><span class=\"p\">(</span><span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">Vector3</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mf\">1.5</span><span class=\"p\">));</span>\n    <span class=\"p\">}</span>\n\n<span class=\"k\">private</span><span class=\"o\">:</span> \n        <span class=\"n\">physics</span><span class=\"o\">::</span><span class=\"n\">ModelPtr</span> <span class=\"n\">model</span><span class=\"p\">;</span>\n        <span class=\"n\">event</span><span class=\"o\">::</span><span class=\"n\">ConnectionPtr</span> <span class=\"n\">updateConnection</span><span class=\"p\">;</span>\n<span class=\"p\">};</span>\n\n<span class=\"n\">GZ_REGISTER_MODEL_PLUGIN</span><span class=\"p\">(</span><span class=\"n\">Arm_Control</span><span class=\"p\">)</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "wontfix", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2014-06-27T00:03:29.102787+00:00", "milestone": null, "updated_on": "2018-03-06T10:19:00.904942+00:00", "type": "issue", "id": 1218}