{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2489/comments/47438282.json"}, "html": {"href": "#!/osrf/gazebo/issues/2489#comment-47438282"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2489.json"}}, "type": "issue", "id": 2489, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Collada loader failing at loading Blender exported dae rigged model with motion tracking animation attached to it."}, "content": {"raw": "Hi Roselle,\n\nI ended up writing a patch for Gazebo that fixed my crash. I wanted to share it with the community I just got caught up with other things.\nI added a checking condition in the ColladaLoader.cc file for Gazebo-9 which had solved my problem if I remember well.\n\nThis just fixed my crash but didn't run my animations, so there is still a problem in what blender generated, however it does work\nwith the default humanoid models gazebo provides (walk.dae found [here](https://github.com/arpg/Gazebo/blob/master/media/models/walk.dae)).\n\nEssentially there was a nullptr for one of the joints and you can add a check for the joint (ColladaLoader.cc line 625):\n```\n        if (animation[targetBone].find(times[i]) == animation[targetBone].end() && _skel->GetNodeById(targetBone) != nullptr)\n          animation[targetBone][times[i]] =\n            _skel->GetNodeById(targetBone)->GetTransforms();\n\n```\n\nYou'll have to recompile gazebo until they release an official fix, maybe try downloading the latest Gazebo they could've fixed it.\n\nHope this helps.\n\nCheers.", "markup": "markdown", "html": "<p>Hi Roselle,</p>\n<p>I ended up writing a patch for Gazebo that fixed my crash. I wanted to share it with the community I just got caught up with other things.\nI added a checking condition in the ColladaLoader.cc file for Gazebo-9 which had solved my problem if I remember well.</p>\n<p>This just fixed my crash but didn't run my animations, so there is still a problem in what blender generated, however it does work\nwith the default humanoid models gazebo provides (walk.dae found <a data-is-external-link=\"true\" href=\"https://github.com/arpg/Gazebo/blob/master/media/models/walk.dae\" rel=\"nofollow\">here</a>).</p>\n<p>Essentially there was a nullptr for one of the joints and you can add a check for the joint (ColladaLoader.cc line 625):</p>\n<div class=\"codehilite\"><pre><span></span>        if (animation[targetBone].find(times[i]) == animation[targetBone].end() &amp;&amp; _skel-&gt;GetNodeById(targetBone) != nullptr)\n          animation[targetBone][times[i]] =\n            _skel-&gt;GetNodeById(targetBone)-&gt;GetTransforms();\n</pre></div>\n\n\n<p>You'll have to recompile gazebo until they release an official fix, maybe try downloading the latest Gazebo they could've fixed it.</p>\n<p>Hope this helps.</p>\n<p>Cheers.</p>", "type": "rendered"}, "created_on": "2018-08-24T19:14:03.925618+00:00", "user": {"display_name": "Lucas MCKENNA", "uuid": "{04c81126-5e89-43cc-a7a1-0e15a3bda5c1}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B04c81126-5e89-43cc-a7a1-0e15a3bda5c1%7D"}, "html": {"href": "https://bitbucket.org/%7B04c81126-5e89-43cc-a7a1-0e15a3bda5c1%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:34645962-e4f3-4c98-a6cf-8cf3008dac93/0b7e8a08-facb-4681-bb8e-63662b0e0356/128"}}, "nickname": "lukes3315", "type": "user", "account_id": "557058:34645962-e4f3-4c98-a6cf-8cf3008dac93"}, "updated_on": null, "type": "issue_comment", "id": 47438282}