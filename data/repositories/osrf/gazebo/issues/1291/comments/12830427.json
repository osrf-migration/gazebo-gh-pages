{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1291/comments/12830427.json"}, "html": {"href": "#!/osrf/gazebo/issues/1291#comment-12830427"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1291.json"}}, "type": "issue", "id": 1291, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "GPU laser and ogre test failures with ATI"}, "content": {"raw": "I added some code in 00b477ae0a7b (branch issue_1291) that prints out lines from the ogre log file that contain error. Here's the result on our bender test machine:\n~~~\n$ DISPLAY=:0 test/integration/INTEGRATION_ogre_log \n[==========] Running 1 test from 1 test case.\n[----------] Global test environment set-up.\n[----------] 1 test from OgreLog\n[ RUN      ] OgreLog.PubSub\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.3.30\n[Dbg] [ServerFixture.cc:144] ServerFixture load in 1.9 seconds, timeout after 600 seconds\n10:37:57: Compiler error: number expected in glsl120.program(18): incorrect float constant declaration\ntest/integration/ogre_log.cc:46: Failure\nValue of: false\n  Actual: false\nExpected: true\n...\n10:37:58: Compiler error: number expected in glsl120.program(18): incorrect float constant declaration\ntest/integration/ogre_log.cc:46: Failure\nValue of: false\n  Actual: false\nExpected: true\n[Dbg] [ServerFixture.cc:95] ServerFixture::Unload\n[  FAILED  ] OgreLog.PubSub (2069 ms)\n[----------] 1 test from OgreLog (2069 ms total)\n\n[----------] Global test environment tear-down\n[==========] 1 test from 1 test case ran. (2069 ms total)\n[  PASSED  ] 0 tests.\n[  FAILED  ] 1 test, listed below:\n[  FAILED  ] OgreLog.PubSub\n\n 1 FAILED TEST\n~~~\n\nIt appears to implicate [glsl120.program](#!/osrf/gazebo/src/4fd182780589a5aeca6fdc974e6dccb4a44d8465/media/materials/scripts/glsl120.program?at=default). I modified this script in f6e3fe37abf9, and it reduces the number of errors, but there are still several remaining.", "markup": "markdown", "html": "<p>I added some code in <a href=\"#!/osrf/gazebo/commits/00b477ae0a7b\" rel=\"nofollow\" class=\"ap-connect-link\">00b477ae0a7b</a> (branch issue_1291) that prints out lines from the ogre log file that contain error. Here's the result on our bender test machine:</p>\n<div class=\"codehilite\"><pre><span></span>$ <span class=\"nv\">DISPLAY</span><span class=\"o\">=</span>:0 test/integration/INTEGRATION_ogre_log \n<span class=\"o\">[==========]</span> Running <span class=\"m\">1</span> <span class=\"nb\">test</span> from <span class=\"m\">1</span> <span class=\"nb\">test</span> <span class=\"k\">case</span>.\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> Global <span class=\"nb\">test</span> environment set-up.\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> <span class=\"m\">1</span> <span class=\"nb\">test</span> from OgreLog\n<span class=\"o\">[</span> RUN      <span class=\"o\">]</span> OgreLog.PubSub\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Waiting <span class=\"k\">for</span> master.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Connected to gazebo master @ http://127.0.0.1:11345\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Publicized address: <span class=\"m\">172</span>.23.3.30\n<span class=\"o\">[</span>Dbg<span class=\"o\">]</span> <span class=\"o\">[</span>ServerFixture.cc:144<span class=\"o\">]</span> ServerFixture load in <span class=\"m\">1</span>.9 seconds, timeout after <span class=\"m\">600</span> seconds\n<span class=\"m\">10</span>:37:57: Compiler error: number expected in glsl120.program<span class=\"o\">(</span><span class=\"m\">18</span><span class=\"o\">)</span>: incorrect float constant declaration\ntest/integration/ogre_log.cc:46: Failure\nValue of: <span class=\"nb\">false</span>\n  Actual: <span class=\"nb\">false</span>\nExpected: <span class=\"nb\">true</span>\n...\n<span class=\"m\">10</span>:37:58: Compiler error: number expected in glsl120.program<span class=\"o\">(</span><span class=\"m\">18</span><span class=\"o\">)</span>: incorrect float constant declaration\ntest/integration/ogre_log.cc:46: Failure\nValue of: <span class=\"nb\">false</span>\n  Actual: <span class=\"nb\">false</span>\nExpected: <span class=\"nb\">true</span>\n<span class=\"o\">[</span>Dbg<span class=\"o\">]</span> <span class=\"o\">[</span>ServerFixture.cc:95<span class=\"o\">]</span> ServerFixture::Unload\n<span class=\"o\">[</span>  FAILED  <span class=\"o\">]</span> OgreLog.PubSub <span class=\"o\">(</span><span class=\"m\">2069</span> ms<span class=\"o\">)</span>\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> <span class=\"m\">1</span> <span class=\"nb\">test</span> from OgreLog <span class=\"o\">(</span><span class=\"m\">2069</span> ms total<span class=\"o\">)</span>\n\n<span class=\"o\">[</span>----------<span class=\"o\">]</span> Global <span class=\"nb\">test</span> environment tear-down\n<span class=\"o\">[==========]</span> <span class=\"m\">1</span> <span class=\"nb\">test</span> from <span class=\"m\">1</span> <span class=\"nb\">test</span> <span class=\"k\">case</span> ran. <span class=\"o\">(</span><span class=\"m\">2069</span> ms total<span class=\"o\">)</span>\n<span class=\"o\">[</span>  PASSED  <span class=\"o\">]</span> <span class=\"m\">0</span> tests.\n<span class=\"o\">[</span>  FAILED  <span class=\"o\">]</span> <span class=\"m\">1</span> test, listed below:\n<span class=\"o\">[</span>  FAILED  <span class=\"o\">]</span> OgreLog.PubSub\n\n <span class=\"m\">1</span> FAILED TEST\n</pre></div>\n\n\n<p>It appears to implicate <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/4fd182780589a5aeca6fdc974e6dccb4a44d8465/media/materials/scripts/glsl120.program?at=default\" rel=\"nofollow\">glsl120.program</a>. I modified this script in <a href=\"#!/osrf/gazebo/commits/f6e3fe37abf9\" rel=\"nofollow\" class=\"ap-connect-link\">f6e3fe37abf9</a>, and it reduces the number of errors, but there are still several remaining.</p>", "type": "rendered"}, "created_on": "2014-10-07T17:57:45.099479+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 12830427}