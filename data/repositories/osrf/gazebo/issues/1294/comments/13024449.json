{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1294/comments/13024449.json"}, "html": {"href": "#!/osrf/gazebo/issues/1294#comment-13024449"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1294.json"}}, "type": "issue", "id": 1294, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Inclusion of magnetic field strength sensor"}, "content": {"raw": "@scpeters, jumping back to the original magnetometer idea...\n\nI think we should keep things simple from the outset. In a similar way to how gravity is dealt with, lets assume that the robots will all experience the same magnetic field, because they are operating over short baselines. This will avoid us needing a world magnetic model, and yet another third party library. I therefore don't think there's the need to declare a manual attribute just quite yet.\n\nSo, we'd have this markup in the world:\n\n```xml\n<physics>\n   <magnetic_field>0.10 0.7 0.1</magnetic_field>\n</physics>\n```\n\n... and this markup in the model...\n\n```xml\n<sensor name=\"HMC5843\" type=\"magnetometer\">\n  <pose>0.01 0 0.03 0 -0 0</pose>\n  <magnetometer>\n    <noise>\n      <type>gaussian</type>\n      <mean>0.0</mean>\n      <stddev>0.01</stddev>\n    </noise>\n  </magnetometer>\n</sensor>\n```\n\nThe sensor would work in much the same way as how gravity influences an IMU accelerometer. The global magnetic vector should be rotated into the body frame, using the orientation of the sensor.\n\nAre you cool with this? If so, are you able to action it, or should I?", "markup": "markdown", "html": "<p>@scpeters, jumping back to the original magnetometer idea...</p>\n<p>I think we should keep things simple from the outset. In a similar way to how gravity is dealt with, lets assume that the robots will all experience the same magnetic field, because they are operating over short baselines. This will avoid us needing a world magnetic model, and yet another third party library. I therefore don't think there's the need to declare a manual attribute just quite yet.</p>\n<p>So, we'd have this markup in the world:</p>\n<div class=\"codehilite language-xml\"><pre><span></span><span class=\"nt\">&lt;physics&gt;</span>\n   <span class=\"nt\">&lt;magnetic_field&gt;</span>0.10 0.7 0.1<span class=\"nt\">&lt;/magnetic_field&gt;</span>\n<span class=\"nt\">&lt;/physics&gt;</span>\n</pre></div>\n\n\n<p>... and this markup in the model...</p>\n<div class=\"codehilite language-xml\"><pre><span></span><span class=\"nt\">&lt;sensor</span> <span class=\"na\">name=</span><span class=\"s\">&quot;HMC5843&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;magnetometer&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;pose&gt;</span>0.01 0 0.03 0 -0 0<span class=\"nt\">&lt;/pose&gt;</span>\n  <span class=\"nt\">&lt;magnetometer&gt;</span>\n    <span class=\"nt\">&lt;noise&gt;</span>\n      <span class=\"nt\">&lt;type&gt;</span>gaussian<span class=\"nt\">&lt;/type&gt;</span>\n      <span class=\"nt\">&lt;mean&gt;</span>0.0<span class=\"nt\">&lt;/mean&gt;</span>\n      <span class=\"nt\">&lt;stddev&gt;</span>0.01<span class=\"nt\">&lt;/stddev&gt;</span>\n    <span class=\"nt\">&lt;/noise&gt;</span>\n  <span class=\"nt\">&lt;/magnetometer&gt;</span>\n<span class=\"nt\">&lt;/sensor&gt;</span>\n</pre></div>\n\n\n<p>The sensor would work in much the same way as how gravity influences an IMU accelerometer. The global magnetic vector should be rotated into the body frame, using the orientation of the sensor.</p>\n<p>Are you cool with this? If so, are you able to action it, or should I?</p>", "type": "rendered"}, "created_on": "2014-10-16T14:18:24.965005+00:00", "user": {"display_name": "Andrew Symington", "uuid": "{db1311fc-02e6-442e-84a1-4bb85dfee5ba}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bdb1311fc-02e6-442e-84a1-4bb85dfee5ba%7D"}, "html": {"href": "https://bitbucket.org/%7Bdb1311fc-02e6-442e-84a1-4bb85dfee5ba%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:cab3b56e-7c24-487c-b07f-05e0600adf54/8a009f21-29b8-4d43-98ed-2677428e17ff/128"}}, "nickname": "asymingt", "type": "user", "account_id": "557058:cab3b56e-7c24-487c-b07f-05e0600adf54"}, "updated_on": "2014-10-16T14:19:11.448391+00:00", "type": "issue_comment", "id": 13024449}