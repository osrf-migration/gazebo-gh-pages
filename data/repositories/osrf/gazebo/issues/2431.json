{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2431/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2431.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2431/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2431/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2431/material-from-model-collada-is-not-loaded"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2431/vote"}}, "reporter": {"display_name": "Cec\u00edlia Costa", "uuid": "{4ab297c4-0de0-49be-90ec-2e85d4b7390b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4ab297c4-0de0-49be-90ec-2e85d4b7390b%7D"}, "html": {"href": "https://bitbucket.org/%7B4ab297c4-0de0-49be-90ec-2e85d4b7390b%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:45c64f1d-b229-4a69-9bc3-5c613f119a56/494526e1-97cd-476c-8922-4cf7814a0d51/128"}}, "nickname": "ceci_costa", "type": "user", "account_id": "557058:45c64f1d-b229-4a69-9bc3-5c613f119a56"}, "title": "Material from model Collada is not loaded", "component": {"name": "gui::ModelEditor", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/222472.json"}}}, "votes": 1, "watches": 2, "content": {"raw": "The material is declared inside the collada file (see bellow) however when the mesh is loaded it is invisible. Opening the the Link inspector for the object shows the that the material was actually not loaded into the visual properties (image attached). \r\n\r\nThis issue was reproduced with the following tutorial:\r\n\thttp://gazebosim.org/tutorials?cat=guided_i&tut=guided_i2 \r\n\r\nSummarized steps:\r\n\t- Download the STEP file from http://velodynelidar.com/docs/drawings/HDL32E_Outline_Model.STEP\r\n\t- Within the Freecad, export the \"HDL32 OUTLINE MODEL\" to Collada\r\n\t- Open the exported file on Blender 1.79, divide the scale per 1000, rotate in the X axis to the top align with the z axis, export the file to Collada.\r\n\t- Add the mesh in a .sdf file as the new geometry for some model. Such as following:\r\n\t\t\r\n\t\t<!-- The visual is mostly a copy of the collision -->\r\n\t\t<visual name=\"base_visual\">\r\n\t\t\t<!-- Offset the visual by have the base's height. We are not rotating\r\n\t\t\t\t   mesh since symmetrical -->\r\n\t\t\t<pose>0 0 -0.029335 0 0 0</pose>\r\n\t\t\t<geometry>\r\n\t\t\t\t<mesh>\r\n\t\t\t\t  <uri>model://velodyne_hdl32/meshes/velodyne_base.dae</uri>\r\n\t\t\t\t</mesh>\r\n\t\t\t</geometry>\r\n\t\t</visual>\r\n\t\t</link>\r\n\t- Add the modified model in gazebo\r\n \r\n\r\n[snippet of Collada mesh File]\r\n\r\n```\r\n#!xml\r\n\r\n<library_effects>\r\n    <effect id=\"mymaterial_002-effect\">\r\n      <profile_COMMON>\r\n        <technique sid=\"common\">\r\n          <phong>\r\n            <emission>\r\n              <color sid=\"emission\">0 0 0 1</color>\r\n            </emission>\r\n            <ambient>\r\n              <color sid=\"ambient\">0 0 0 1</color>\r\n            </ambient>\r\n            <diffuse>\r\n              <color sid=\"diffuse\">0.7 0.7 0.7 1</color>\r\n            </diffuse>\r\n            <specular>\r\n              <color sid=\"specular\">0.5 0.5 0.5 1</color>\r\n            </specular>\r\n            <shininess>\r\n              <float sid=\"shininess\">0</float>\r\n            </shininess>\r\n            <transparent opaque=\"A_ONE\">\r\n              <color>1 1 1 1</color>\r\n            </transparent>\r\n            <index_of_refraction>\r\n              <float sid=\"index_of_refraction\">1</float>\r\n            </index_of_refraction>\r\n          </phong>\r\n        </technique>\r\n      </profile_COMMON>\r\n    </effect>\r\n  </library_effects>\r\n  <library_materials>\r\n    <material id=\"mymaterial_002-material\" name=\"mymaterial_002\">\r\n      <instance_effect url=\"#mymaterial_002-effect\"/>\r\n    </material>\r\n  </library_materials>\r\n```", "markup": "markdown", "html": "<p>The material is declared inside the collada file (see bellow) however when the mesh is loaded it is invisible. Opening the the Link inspector for the object shows the that the material was actually not loaded into the visual properties (image attached). </p>\n<p>This issue was reproduced with the following tutorial:\n    <a href=\"http://gazebosim.org/tutorials?cat=guided_i&amp;tut=guided_i2\" rel=\"nofollow\" class=\"ap-connect-link\">http://gazebosim.org/tutorials?cat=guided_i&amp;tut=guided_i2</a> </p>\n<p>Summarized steps:\n    - Download the STEP file from <a href=\"http://velodynelidar.com/docs/drawings/HDL32E_Outline_Model.STEP\" rel=\"nofollow\" class=\"ap-connect-link\">http://velodynelidar.com/docs/drawings/HDL32E_Outline_Model.STEP</a>\n    - Within the Freecad, export the \"HDL32 OUTLINE MODEL\" to Collada\n    - Open the exported file on Blender 1.79, divide the scale per 1000, rotate in the X axis to the top align with the z axis, export the file to Collada.\n    - Add the mesh in a .sdf file as the new geometry for some model. Such as following:</p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"c\">&lt;!-- The visual is mostly a copy of the collision --&gt;</span>\n    <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&quot;base_visual&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"c\">&lt;!-- Offset the visual by have the base&#39;s height. We are not rotating</span>\n<span class=\"c\">               mesh since symmetrical --&gt;</span>\n        <span class=\"nt\">&lt;pose&gt;</span>0 0 -0.029335 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n        <span class=\"nt\">&lt;geometry&gt;</span>\n            <span class=\"nt\">&lt;mesh&gt;</span>\n              <span class=\"nt\">&lt;uri&gt;</span>model://velodyne_hdl32/meshes/velodyne_base.dae<span class=\"nt\">&lt;/uri&gt;</span>\n            <span class=\"nt\">&lt;/mesh&gt;</span>\n        <span class=\"nt\">&lt;/geometry&gt;</span>\n    <span class=\"nt\">&lt;/visual&gt;</span>\n    <span class=\"nt\">&lt;/link&gt;</span>\n- Add the modified model in gazebo\n</pre></div>\n\n\n<p>[snippet of Collada mesh File]</p>\n<div class=\"codehilite language-xml\"><pre><span></span><span class=\"nt\">&lt;library_effects&gt;</span>\n    <span class=\"nt\">&lt;effect</span> <span class=\"na\">id=</span><span class=\"s\">&quot;mymaterial_002-effect&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;profile_COMMON&gt;</span>\n        <span class=\"nt\">&lt;technique</span> <span class=\"na\">sid=</span><span class=\"s\">&quot;common&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;phong&gt;</span>\n            <span class=\"nt\">&lt;emission&gt;</span>\n              <span class=\"nt\">&lt;color</span> <span class=\"na\">sid=</span><span class=\"s\">&quot;emission&quot;</span><span class=\"nt\">&gt;</span>0 0 0 1<span class=\"nt\">&lt;/color&gt;</span>\n            <span class=\"nt\">&lt;/emission&gt;</span>\n            <span class=\"nt\">&lt;ambient&gt;</span>\n              <span class=\"nt\">&lt;color</span> <span class=\"na\">sid=</span><span class=\"s\">&quot;ambient&quot;</span><span class=\"nt\">&gt;</span>0 0 0 1<span class=\"nt\">&lt;/color&gt;</span>\n            <span class=\"nt\">&lt;/ambient&gt;</span>\n            <span class=\"nt\">&lt;diffuse&gt;</span>\n              <span class=\"nt\">&lt;color</span> <span class=\"na\">sid=</span><span class=\"s\">&quot;diffuse&quot;</span><span class=\"nt\">&gt;</span>0.7 0.7 0.7 1<span class=\"nt\">&lt;/color&gt;</span>\n            <span class=\"nt\">&lt;/diffuse&gt;</span>\n            <span class=\"nt\">&lt;specular&gt;</span>\n              <span class=\"nt\">&lt;color</span> <span class=\"na\">sid=</span><span class=\"s\">&quot;specular&quot;</span><span class=\"nt\">&gt;</span>0.5 0.5 0.5 1<span class=\"nt\">&lt;/color&gt;</span>\n            <span class=\"nt\">&lt;/specular&gt;</span>\n            <span class=\"nt\">&lt;shininess&gt;</span>\n              <span class=\"nt\">&lt;float</span> <span class=\"na\">sid=</span><span class=\"s\">&quot;shininess&quot;</span><span class=\"nt\">&gt;</span>0<span class=\"nt\">&lt;/float&gt;</span>\n            <span class=\"nt\">&lt;/shininess&gt;</span>\n            <span class=\"nt\">&lt;transparent</span> <span class=\"na\">opaque=</span><span class=\"s\">&quot;A_ONE&quot;</span><span class=\"nt\">&gt;</span>\n              <span class=\"nt\">&lt;color&gt;</span>1 1 1 1<span class=\"nt\">&lt;/color&gt;</span>\n            <span class=\"nt\">&lt;/transparent&gt;</span>\n            <span class=\"nt\">&lt;index_of_refraction&gt;</span>\n              <span class=\"nt\">&lt;float</span> <span class=\"na\">sid=</span><span class=\"s\">&quot;index_of_refraction&quot;</span><span class=\"nt\">&gt;</span>1<span class=\"nt\">&lt;/float&gt;</span>\n            <span class=\"nt\">&lt;/index_of_refraction&gt;</span>\n          <span class=\"nt\">&lt;/phong&gt;</span>\n        <span class=\"nt\">&lt;/technique&gt;</span>\n      <span class=\"nt\">&lt;/profile_COMMON&gt;</span>\n    <span class=\"nt\">&lt;/effect&gt;</span>\n  <span class=\"nt\">&lt;/library_effects&gt;</span>\n  <span class=\"nt\">&lt;library_materials&gt;</span>\n    <span class=\"nt\">&lt;material</span> <span class=\"na\">id=</span><span class=\"s\">&quot;mymaterial_002-material&quot;</span> <span class=\"na\">name=</span><span class=\"s\">&quot;mymaterial_002&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;instance_effect</span> <span class=\"na\">url=</span><span class=\"s\">&quot;#mymaterial_002-effect&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/material&gt;</span>\n  <span class=\"nt\">&lt;/library_materials&gt;</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "9.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242746.json"}}}, "edited_on": null, "created_on": "2018-02-27T00:13:37.493798+00:00", "milestone": null, "updated_on": "2018-02-27T00:13:37.493798+00:00", "type": "issue", "id": 2431}