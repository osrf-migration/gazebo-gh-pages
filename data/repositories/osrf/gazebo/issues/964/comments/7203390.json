{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/964/comments/7203390.json"}, "html": {"href": "#!/osrf/gazebo/issues/964#comment-7203390"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/964.json"}}, "type": "issue", "id": 964, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletHingeJoint::SetVelocity not working (commented out)"}, "content": {"raw": "The difference between pull request #852 and pull request pull request #655 is that the first one sets velocity through dynamics using a joint motor, and the second one \"teleports\" the child link of the joint to the new location pretending the joint is experiencing desired joint velocity relative to the parent link.\n\n[Documentation for Joint::SetVelocity](#!/osrf/gazebo/src/577847c43d021f7edc838a30c0eafc99ea312571/gazebo/physics/Joint.hh?at=default#cl-277) does not state which is the desired case.\n\nIt seems the latter (pull request #655) with teleport is more consistent with `Joint::SetPosition`, which teleports joint to target position, but on the other hand [ODEHingeJoint::SetVelocity](#!/osrf/gazebo/src/577847c43d021f7edc838a30c0eafc99ea312571/gazebo/physics/Joint.hh?at=default#cl-277) [sets target joint velocity as a given and let the physics engine handle the dynamics of the rest of the system](#!/osrf/gazebo/src/577847c43d021f7edc838a30c0eafc99ea312571/deps/opende/src/joints/joint.cpp?at=default#cl-633).  We'll have to change one or the other to stay consistent here.\n\nIt looks like we will need multiple versions of `Joint::SetVelocity`, potentially with different names.  Options are:\n\n 1. `Joint::SetVelocity`: Teleport joint (related links) to target velocity ignoring dynamics.\n 1. `Joint::SetVelocityWithID`: Attempt to achieve target velocity through ID leveraging the physics engine solver.\n 1. `Joint::SetVelocityWithPID`: Attempt to achieve target velocity using joint actuation (with a PID controller) and let dynamics take its course.", "markup": "markdown", "html": "<p>The difference between <a href=\"#!/osrf/gazebo/pull-requests/852/fix-for-issue-964-enable-bullet-hing-joint\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #852</a> and pull request <a href=\"#!/osrf/gazebo/pull-requests/655/implement-bullethingejoint-setvelocity-801\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #655</a> is that the first one sets velocity through dynamics using a joint motor, and the second one \"teleports\" the child link of the joint to the new location pretending the joint is experiencing desired joint velocity relative to the parent link.</p>\n<p><a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/577847c43d021f7edc838a30c0eafc99ea312571/gazebo/physics/Joint.hh?at=default#cl-277\" rel=\"nofollow\">Documentation for Joint::SetVelocity</a> does not state which is the desired case.</p>\n<p>It seems the latter (<a href=\"#!/osrf/gazebo/pull-requests/655/implement-bullethingejoint-setvelocity-801\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #655</a>) with teleport is more consistent with <code>Joint::SetPosition</code>, which teleports joint to target position, but on the other hand <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/577847c43d021f7edc838a30c0eafc99ea312571/gazebo/physics/Joint.hh?at=default#cl-277\" rel=\"nofollow\">ODEHingeJoint::SetVelocity</a> <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/577847c43d021f7edc838a30c0eafc99ea312571/deps/opende/src/joints/joint.cpp?at=default#cl-633\" rel=\"nofollow\">sets target joint velocity as a given and let the physics engine handle the dynamics of the rest of the system</a>.  We'll have to change one or the other to stay consistent here.</p>\n<p>It looks like we will need multiple versions of <code>Joint::SetVelocity</code>, potentially with different names.  Options are:</p>\n<ol>\n<li><code>Joint::SetVelocity</code>: Teleport joint (related links) to target velocity ignoring dynamics.</li>\n<li><code>Joint::SetVelocityWithID</code>: Attempt to achieve target velocity through ID leveraging the physics engine solver.</li>\n<li><code>Joint::SetVelocityWithPID</code>: Attempt to achieve target velocity using joint actuation (with a PID controller) and let dynamics take its course.</li>\n</ol>", "type": "rendered"}, "created_on": "2013-12-05T20:38:41.045889+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 7203390}