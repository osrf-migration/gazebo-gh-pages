{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2294/comments/37439426.json"}, "html": {"href": "#!/osrf/gazebo/issues/2294#comment-37439426"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2294.json"}}, "type": "issue", "id": 2294, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "PID controller broken with non-default max_step_size"}, "content": {"raw": "Looking at the [JointController::Update](#!/osrf/gazebo/src/42215f2019f5ae64fc8a0610ef804a0fc53b0740/gazebo/physics/JointController.cc?fileviewer=file-view-default#JointController.cc-112) function, it looks to me like the code is not assuming a time step size, but is inferring it by repeatedly calling `World::GetSimTime`. If you are having problems with `inf` and `nan`, I don't think it is directly coming from the PID calculation.\n\nIt could be that the solver is simply unstable with that combination of gains and timestep, or that the solver is not converging with the specified parameters. Can you try increasing the solver iterations and/or setting the SOR parameter to 1.0?", "markup": "markdown", "html": "<p>Looking at the <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/42215f2019f5ae64fc8a0610ef804a0fc53b0740/gazebo/physics/JointController.cc?fileviewer=file-view-default#JointController.cc-112\" rel=\"nofollow\">JointController::Update</a> function, it looks to me like the code is not assuming a time step size, but is inferring it by repeatedly calling <code>World::GetSimTime</code>. If you are having problems with <code>inf</code> and <code>nan</code>, I don't think it is directly coming from the PID calculation.</p>\n<p>It could be that the solver is simply unstable with that combination of gains and timestep, or that the solver is not converging with the specified parameters. Can you try increasing the solver iterations and/or setting the SOR parameter to 1.0?</p>", "type": "rendered"}, "created_on": "2017-06-07T17:37:53.453074+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 37439426}