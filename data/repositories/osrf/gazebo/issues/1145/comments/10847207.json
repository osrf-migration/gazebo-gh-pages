{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1145/comments/10847207.json"}, "html": {"href": "#!/osrf/gazebo/issues/1145#comment-10847207"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1145.json"}}, "type": "issue", "id": 1145, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "custom main problems with time and loading plugins"}, "content": {"raw": "@scpeters same for me. Using the server spawned by  `gazebo::setupServer(_argc, _argv)` I am able to load the model plugin in `pioneer2dx`. But if I try to load a model that have a sensor in it, I get this error messages:\n```\n[Err] [Model.cc:685] Sensors failed to initialize when loading model[iCub] via the factory mechanism.Plugins for the model will not be loaded.\n[Err] [Model.cc:685] Sensors failed to initialize when loading model[COMAN] via the factory mechanism.Plugins for the model will not be loaded.\n```\n\n\nInspecting the source code, this happens because \n```\nsensors::SensorManager::Instance()->SensorsInitialized()\n``` \nreturns false for 50 iterations. \n\n\nI guess that this happens because in `custom_main.cpp` we just call\n```gazebo::runWorld(world, 100)``` for running the simulation.\n\nBy inspecting the [`Run()` method of the \"real\" server](#!/osrf/gazebo/src/8b2d9259f8d0607f2cbeaf470e9349bbe4efa8c1/gazebo/Server.cc?at=default#cl-430) it appears that several other methods of the `SensorManager` should be called for properly simulating sensors, for example:\n\n * [`sensors::SensorManager::Instance()->RunThreads()` through `sensors::run_threads()`](#!/osrf/gazebo/src/8b2d9259f8d0607f2cbeaf470e9349bbe4efa8c1/gazebo/Server.cc?at=default#cl-447)\n * [`sensors::SensorManager::Instance()->Update()` through  `sensors::run_once()`](#!/osrf/gazebo/src/8b2d9259f8d0607f2cbeaf470e9349bbe4efa8c1/gazebo/Server.cc?at=default#cl-474)", "markup": "markdown", "html": "<p>@scpeters same for me. Using the server spawned by  <code>gazebo::setupServer(_argc, _argv)</code> I am able to load the model plugin in <code>pioneer2dx</code>. But if I try to load a model that have a sensor in it, I get this error messages:</p>\n<div class=\"codehilite\"><pre><span></span>[Err] [Model.cc:685] Sensors failed to initialize when loading model[iCub] via the factory mechanism.Plugins for the model will not be loaded.\n[Err] [Model.cc:685] Sensors failed to initialize when loading model[COMAN] via the factory mechanism.Plugins for the model will not be loaded.\n</pre></div>\n\n\n<p>Inspecting the source code, this happens because </p>\n<div class=\"codehilite\"><pre><span></span>sensors::SensorManager::Instance()-&gt;SensorsInitialized()\n</pre></div>\n\n\n<p>returns false for 50 iterations. </p>\n<p>I guess that this happens because in <code>custom_main.cpp</code> we just call\n<code>gazebo::runWorld(world, 100)</code> for running the simulation.</p>\n<p>By inspecting the <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/8b2d9259f8d0607f2cbeaf470e9349bbe4efa8c1/gazebo/Server.cc?at=default#cl-430\" rel=\"nofollow\"><code>Run()</code> method of the \"real\" server</a> it appears that several other methods of the <code>SensorManager</code> should be called for properly simulating sensors, for example:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/8b2d9259f8d0607f2cbeaf470e9349bbe4efa8c1/gazebo/Server.cc?at=default#cl-447\" rel=\"nofollow\"><code>sensors::SensorManager::Instance()-&gt;RunThreads()</code> through <code>sensors::run_threads()</code></a></li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/8b2d9259f8d0607f2cbeaf470e9349bbe4efa8c1/gazebo/Server.cc?at=default#cl-474\" rel=\"nofollow\"><code>sensors::SensorManager::Instance()-&gt;Update()</code> through  <code>sensors::run_once()</code></a></li>\n</ul>", "type": "rendered"}, "created_on": "2014-06-21T18:31:48.563831+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": null, "type": "issue_comment", "id": 10847207}