{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2134/comments/33535771.json"}, "html": {"href": "#!/osrf/gazebo/issues/2134#comment-33535771"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2134.json"}}, "type": "issue", "id": 2134, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Qt5: No menu shortcuts are working"}, "content": {"raw": "1. `sudo apt purge appmenu-qt5` gets rid of the native menu on Unity (even if the patch above is reverted) and leaves us with only the internal menu, with proper shortcuts.\n\n1. Adding each action to the `MainWindow`, as the example below, makes the shortcut work, but it doesn't show on the menu.\n\n~~~\ndiff -r 1ff0e24c4651 gazebo/gui/MainWindow.cc\n--- a/gazebo/gui/MainWindow.cc\tTue Jan 10 00:00:13 2017 +0100\n+++ b/gazebo/gui/MainWindow.cc\tTue Jan 10 12:10:15 2017 -0800\n@@ -1177,6 +1177,7 @@\n   g_editModelAct->setStatusTip(tr(\"Enter Model Editor Mode\"));\n   g_editModelAct->setCheckable(true);\n   g_editModelAct->setChecked(false);\n+  this->addAction(g_editModelAct);\n \n   g_stepAct = new QAction(QIcon(\":/images/end.png\"), tr(\"Step\"), this);\n   g_stepAct->setStatusTip(tr(\"Step the world\"));\n~~~\n\nI'm leaning towards having the 2 menus for now on Unity. And users can purge `appmenu-qt5` to prevent the native bar from appearing.\n\nThis means we lose some real estate, but it solves an issue users have had in the past where they can't find the menu in unity. I'm preparing a pull request.", "markup": "markdown", "html": "<ol>\n<li>\n<p><code>sudo apt purge appmenu-qt5</code> gets rid of the native menu on Unity (even if the patch above is reverted) and leaves us with only the internal menu, with proper shortcuts.</p>\n</li>\n<li>\n<p>Adding each action to the <code>MainWindow</code>, as the example below, makes the shortcut work, but it doesn't show on the menu.</p>\n</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 1ff0e24c4651 gazebo/gui/MainWindow.cc</span>\n<span class=\"gd\">--- a/gazebo/gui/MainWindow.cc  Tue Jan 10 00:00:13 2017 +0100</span>\n<span class=\"gi\">+++ b/gazebo/gui/MainWindow.cc  Tue Jan 10 12:10:15 2017 -0800</span>\n<span class=\"gu\">@@ -1177,6 +1177,7 @@</span>\n   g_editModelAct-&gt;setStatusTip(tr(&quot;Enter Model Editor Mode&quot;));\n   g_editModelAct-&gt;setCheckable(true);\n   g_editModelAct-&gt;setChecked(false);\n<span class=\"gi\">+  this-&gt;addAction(g_editModelAct);</span>\n\n   g_stepAct = new QAction(QIcon(&quot;:/images/end.png&quot;), tr(&quot;Step&quot;), this);\n   g_stepAct-&gt;setStatusTip(tr(&quot;Step the world&quot;));\n</pre></div>\n\n\n<p>I'm leaning towards having the 2 menus for now on Unity. And users can purge <code>appmenu-qt5</code> to prevent the native bar from appearing.</p>\n<p>This means we lose some real estate, but it solves an issue users have had in the past where they can't find the menu in unity. I'm preparing a pull request.</p>", "type": "rendered"}, "created_on": "2017-01-10T20:31:56.579594+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": null, "type": "issue_comment", "id": 33535771}