{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2048/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2048.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2048/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2048/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2048/gazebo-is-setting-sensors-last-update-time"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2048/vote"}}, "reporter": {"display_name": "Stephan Opfer", "uuid": "{dc375eee-6391-4139-8db5-0615f3e6bf28}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bdc375eee-6391-4139-8db5-0615f3e6bf28%7D"}, "html": {"href": "https://bitbucket.org/%7Bdc375eee-6391-4139-8db5-0615f3e6bf28%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/0c3f9515adfa79c3d8262e40b0833c07d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSO-3.png"}}, "nickname": "Stopfer", "type": "user", "account_id": "557058:7942e601-93bd-456c-ab59-caa04be72986"}, "title": "Gazebo is setting \"sensor's last update time\" to 0", "component": {"name": "sensors", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122877.json"}}}, "votes": 2, "watches": 7, "content": {"raw": "Hi all,\r\n\r\nI found this issue, using ROS, AMCL, TurtleBot Simulation etc. I traced it back to line 191:\r\n\r\n    this->depth_sensor_update_time_ = this->parentSensor->LastUpdateTime();\r\n\r\nin [gazebo_ros_openni_kinect.cpp](https://github.com/ros-simulation/gazebo_ros_pkgs/blob/kinetic-devel/gazebo_plugins/src/gazebo_ros_openni_kinect.cpp). The parentSensor->LastUpdateTime() is 0 at 50% of the time.\r\n\r\nI am using Ubuntu 16.04 LTS and ROS Kinetic with corresponding Gazebo Version 7.0.0. Here is how I reproduced the bug:\r\n\r\n    roslaunch turtlebot_gazebo turtlebot_world.launch\r\n\r\nThis starts gazebo with one turtlebot. For the kinect plugin to send data, you need to subscribe to its ROS topic, because it uses lazy publishing:\r\n\r\n    rostopic echo /camera/depth/image_raw/header\r\n\r\nThis subscribes only to the header of the image message. There you should see, if you can reproduce my issue, that the time stamp is 0 in ~50% of the time. I would expect it to be always the simulation time.\r\n\r\nI hope someone could help here, because I didn't want to setup the whole gazebo project from source, in order to further debug it.\r\n\r\nGreetings,\r\n  Stephan", "markup": "markdown", "html": "<p>Hi all,</p>\n<p>I found this issue, using ROS, AMCL, TurtleBot Simulation etc. I traced it back to line 191:</p>\n<div class=\"codehilite\"><pre><span></span>this-&gt;depth_sensor_update_time_ = this-&gt;parentSensor-&gt;LastUpdateTime();\n</pre></div>\n\n\n<p>in <a data-is-external-link=\"true\" href=\"https://github.com/ros-simulation/gazebo_ros_pkgs/blob/kinetic-devel/gazebo_plugins/src/gazebo_ros_openni_kinect.cpp\" rel=\"nofollow\">gazebo_ros_openni_kinect.cpp</a>. The parentSensor-&gt;LastUpdateTime() is 0 at 50% of the time.</p>\n<p>I am using Ubuntu 16.04 LTS and ROS Kinetic with corresponding Gazebo Version 7.0.0. Here is how I reproduced the bug:</p>\n<div class=\"codehilite\"><pre><span></span>roslaunch turtlebot_gazebo turtlebot_world.launch\n</pre></div>\n\n\n<p>This starts gazebo with one turtlebot. For the kinect plugin to send data, you need to subscribe to its ROS topic, because it uses lazy publishing:</p>\n<div class=\"codehilite\"><pre><span></span>rostopic echo /camera/depth/image_raw/header\n</pre></div>\n\n\n<p>This subscribes only to the header of the image message. There you should see, if you can reproduce my issue, that the time stamp is 0 in ~50% of the time. I would expect it to be always the simulation time.</p>\n<p>I hope someone could help here, because I didn't want to setup the whole gazebo project from source, in order to further debug it.</p>\n<p>Greetings,\n  Stephan</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2016-09-14T08:01:06.088793+00:00", "milestone": null, "updated_on": "2017-10-23T10:32:17.388200+00:00", "type": "issue", "id": 2048}