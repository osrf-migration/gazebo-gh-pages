{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/542/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/542.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/542/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/542/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/542/gzsdf-ignores-or-parses-incorrect-some"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/542/vote"}}, "reporter": {"display_name": "Marcus Liebhardt", "uuid": "{3450c259-a384-4f55-9804-258a3f313f1d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3450c259-a384-4f55-9804-258a3f313f1d%7D"}, "html": {"href": "https://bitbucket.org/%7B3450c259-a384-4f55-9804-258a3f313f1d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dec89fe7edb3199a81905cc8c0ddd658d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsML-5.png"}}, "nickname": "bit-pirate", "type": "user", "account_id": "557058:207d9111-6236-414f-ba53-cda69d89f223"}, "title": "gzsdf ignores or parses incorrect some URDF parameters", "component": null, "votes": 0, "watches": 3, "content": {"raw": "gzsdf in version 1.3 does not translate all parameters inside URDF correctly and ignores some completely.\r\n\r\nIn my URDF description I define a ray sensor like this:\r\n\r\n```\r\n#!xml\r\n\r\n  <gazebo reference=\"cliff_sensor_left_link\">\r\n    <sensor:ray name=\"cliff_sensor_left\">\r\n      <alwaysActive>true</alwaysActive>\r\n      <rayCount>50</rayCount>\r\n      <rangeCount>1</rangeCount>\r\n      <resRange>1.0</resRange>\r\n      <minAngle>-0.04361</minAngle>\r\n      <maxAngle>0.04361</maxAngle>\r\n      <minRange>0.01</minRange>\r\n      <maxRange>0.15</maxRange>\r\n      <displayRays>true</displayRays>\r\n    </sensor:ray>\r\n  </gazebo>\r\n```\r\n\r\nThis gets transformed into the below:\r\n\r\n```\r\n#!xml\r\n\r\n      <sensor name='cliff_sensor_left' type='ray'>\r\n        <ray>\r\n          <scan>\r\n            <horizontal>\r\n              <samples>1</samples>\r\n              <resolution>0.000000</resolution>\r\n              <min_angle>-0.000761</min_angle>\r\n              <max_angle>0.000761</max_angle>\r\n            </horizontal>\r\n            <vertical>\r\n              <samples>1</samples>\r\n              <min_angle>0.000000</min_angle>\r\n              <max_angle>0.000000</max_angle>\r\n            </vertical>\r\n          </scan>\r\n          <range>\r\n            <min>0.010000</min>\r\n            <max>0.150000</max>\r\n            <resolution>1.000000</resolution>\r\n          </range>\r\n        </ray>\r\n        <pose>0.087340 0.136010 0.031600 3.141593 1.570793 3.141593</pose>\r\n      </sensor>\r\n```\r\n\r\nA bunch of things go wrong here:\r\n\r\n* `<alwaysActive>` and  `<displayRays>` are ignored.\r\n* There is a degree to radians conversion happening in the angle parsing.\r\n* `<rayCount>` does not translate to <samples> or <resolution>\r\n* `<resRange>` does not translate to <samples> or <resolution>\r\n\r\n\r\nLooks to me like, the parser doesn't get enough love lately. :-)", "markup": "markdown", "html": "<p>gzsdf in version 1.3 does not translate all parameters inside URDF correctly and ignores some completely.</p>\n<p>In my URDF description I define a ray sensor like this:</p>\n<div class=\"codehilite language-xml\"><pre><span></span>  <span class=\"nt\">&lt;gazebo</span> <span class=\"na\">reference=</span><span class=\"s\">&quot;cliff_sensor_left_link&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;sensor:ray</span> <span class=\"na\">name=</span><span class=\"s\">&quot;cliff_sensor_left&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;alwaysActive&gt;</span>true<span class=\"nt\">&lt;/alwaysActive&gt;</span>\n      <span class=\"nt\">&lt;rayCount&gt;</span>50<span class=\"nt\">&lt;/rayCount&gt;</span>\n      <span class=\"nt\">&lt;rangeCount&gt;</span>1<span class=\"nt\">&lt;/rangeCount&gt;</span>\n      <span class=\"nt\">&lt;resRange&gt;</span>1.0<span class=\"nt\">&lt;/resRange&gt;</span>\n      <span class=\"nt\">&lt;minAngle&gt;</span>-0.04361<span class=\"nt\">&lt;/minAngle&gt;</span>\n      <span class=\"nt\">&lt;maxAngle&gt;</span>0.04361<span class=\"nt\">&lt;/maxAngle&gt;</span>\n      <span class=\"nt\">&lt;minRange&gt;</span>0.01<span class=\"nt\">&lt;/minRange&gt;</span>\n      <span class=\"nt\">&lt;maxRange&gt;</span>0.15<span class=\"nt\">&lt;/maxRange&gt;</span>\n      <span class=\"nt\">&lt;displayRays&gt;</span>true<span class=\"nt\">&lt;/displayRays&gt;</span>\n    <span class=\"nt\">&lt;/sensor:ray&gt;</span>\n  <span class=\"nt\">&lt;/gazebo&gt;</span>\n</pre></div>\n\n\n<p>This gets transformed into the below:</p>\n<div class=\"codehilite language-xml\"><pre><span></span>      <span class=\"nt\">&lt;sensor</span> <span class=\"na\">name=</span><span class=\"s\">&#39;cliff_sensor_left&#39;</span> <span class=\"na\">type=</span><span class=\"s\">&#39;ray&#39;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;ray&gt;</span>\n          <span class=\"nt\">&lt;scan&gt;</span>\n            <span class=\"nt\">&lt;horizontal&gt;</span>\n              <span class=\"nt\">&lt;samples&gt;</span>1<span class=\"nt\">&lt;/samples&gt;</span>\n              <span class=\"nt\">&lt;resolution&gt;</span>0.000000<span class=\"nt\">&lt;/resolution&gt;</span>\n              <span class=\"nt\">&lt;min_angle&gt;</span>-0.000761<span class=\"nt\">&lt;/min_angle&gt;</span>\n              <span class=\"nt\">&lt;max_angle&gt;</span>0.000761<span class=\"nt\">&lt;/max_angle&gt;</span>\n            <span class=\"nt\">&lt;/horizontal&gt;</span>\n            <span class=\"nt\">&lt;vertical&gt;</span>\n              <span class=\"nt\">&lt;samples&gt;</span>1<span class=\"nt\">&lt;/samples&gt;</span>\n              <span class=\"nt\">&lt;min_angle&gt;</span>0.000000<span class=\"nt\">&lt;/min_angle&gt;</span>\n              <span class=\"nt\">&lt;max_angle&gt;</span>0.000000<span class=\"nt\">&lt;/max_angle&gt;</span>\n            <span class=\"nt\">&lt;/vertical&gt;</span>\n          <span class=\"nt\">&lt;/scan&gt;</span>\n          <span class=\"nt\">&lt;range&gt;</span>\n            <span class=\"nt\">&lt;min&gt;</span>0.010000<span class=\"nt\">&lt;/min&gt;</span>\n            <span class=\"nt\">&lt;max&gt;</span>0.150000<span class=\"nt\">&lt;/max&gt;</span>\n            <span class=\"nt\">&lt;resolution&gt;</span>1.000000<span class=\"nt\">&lt;/resolution&gt;</span>\n          <span class=\"nt\">&lt;/range&gt;</span>\n        <span class=\"nt\">&lt;/ray&gt;</span>\n        <span class=\"nt\">&lt;pose&gt;</span>0.087340 0.136010 0.031600 3.141593 1.570793 3.141593<span class=\"nt\">&lt;/pose&gt;</span>\n      <span class=\"nt\">&lt;/sensor&gt;</span>\n</pre></div>\n\n\n<p>A bunch of things go wrong here:</p>\n<ul>\n<li><code>&lt;alwaysActive&gt;</code> and  <code>&lt;displayRays&gt;</code> are ignored.</li>\n<li>There is a degree to radians conversion happening in the angle parsing.</li>\n<li><code>&lt;rayCount&gt;</code> does not translate to &lt;samples&gt; or &lt;resolution&gt;</li>\n<li><code>&lt;resRange&gt;</code> does not translate to &lt;samples&gt; or &lt;resolution&gt;</li>\n</ul>\n<p>Looks to me like, the parser doesn't get enough love lately. :-)</p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-02-28T03:12:52.421611+00:00", "milestone": null, "updated_on": "2016-09-14T19:45:12.416825+00:00", "type": "issue", "id": 542}