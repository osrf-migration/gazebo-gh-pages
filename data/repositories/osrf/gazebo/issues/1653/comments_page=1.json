{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653/comments/20451046.json"}, "html": {"href": "#!/osrf/gazebo/issues/1653#comment-20451046"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653.json"}}, "type": "issue", "id": 1653, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Large heightmaps causes Gazebo to crash"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-07-24T16:48:37.407532+00:00", "user": {"display_name": "Aaron Gokaslan", "uuid": "{c8f96c4f-5232-4920-9e55-b1b22db765b7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc8f96c4f-5232-4920-9e55-b1b22db765b7%7D"}, "html": {"href": "https://bitbucket.org/%7Bc8f96c4f-5232-4920-9e55-b1b22db765b7%7D/"}, "avatar": {"href": "https://bitbucket.org/account/Skylion007/avatar/"}}, "nickname": "Skylion007", "type": "user", "account_id": null}, "updated_on": null, "type": "issue_comment", "id": 20451046}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653/comments/30494884.json"}, "html": {"href": "#!/osrf/gazebo/issues/1653#comment-30494884"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653.json"}}, "type": "issue", "id": 1653, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Large heightmaps causes Gazebo to crash"}, "content": {"raw": "I'm debugging issues with large heightmaps. I haven't observed gazebo crash, and I am able to open `gzserver` without obvious console error messages, but I do start to see problems after opening `gzclient`. Specifically, I see the following message multiple times:\n\n~~~\n[libprotobuf ERROR google/protobuf/io/coded_stream.cc:171]\nA protocol message was rejected because it was too big (more than 67108864 bytes).\nTo increase the limit (or to disable these warnings),\nsee CodedInputStream::SetTotalBytesLimit() in google/protobuf/io/coded_stream.h.\n~~~\n\nTo see what was triggering this message, I set a breakpoint on `google::protobuf::io::CodedInputStream::PrintTotalBytesLimitError` and observed some backtraces. I observed two cases caused by responses to a `scene_info` request, and an additional case caused by parsing a `heightmap_data` response. Maybe `gzclient` should try to load the heightmaps on its own (via the uri) and only resort to a serialized heightmap request if it can't find a matching file?", "markup": "markdown", "html": "<p>I'm debugging issues with large heightmaps. I haven't observed gazebo crash, and I am able to open <code>gzserver</code> without obvious console error messages, but I do start to see problems after opening <code>gzclient</code>. Specifically, I see the following message multiple times:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">[libprotobuf ERROR google/protobuf/io/coded_stream.cc:171]</span>\n<span class=\"na\">A protocol message was rejected because it was too big (more than 67108864 bytes).</span>\n<span class=\"na\">To increase the limit (or to disable these warnings),</span>\n<span class=\"na\">see CodedInputStream::SetTotalBytesLimit() in google/protobuf/io/coded_stream.h.</span>\n</pre></div>\n\n\n<p>To see what was triggering this message, I set a breakpoint on <code>google::protobuf::io::CodedInputStream::PrintTotalBytesLimitError</code> and observed some backtraces. I observed two cases caused by responses to a <code>scene_info</code> request, and an additional case caused by parsing a <code>heightmap_data</code> response. Maybe <code>gzclient</code> should try to load the heightmaps on its own (via the uri) and only resort to a serialized heightmap request if it can't find a matching file?</p>", "type": "rendered"}, "created_on": "2016-09-10T00:28:58.111332+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 30494884}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653/comments/30494962.json"}, "html": {"href": "#!/osrf/gazebo/issues/1653#comment-30494962"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653.json"}}, "type": "issue", "id": 1653, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Large heightmaps causes Gazebo to crash"}, "content": {"raw": "@Skylion007 I just tested the heightmap image that you posted using gazebo7, and I see the following error message:\n\n~~~\n[Err] [HeightmapShape.cc:214] Heightmap data size must be square, with a size of 2^n+1\n~~~\n\nYou've posted a 512x512 png. I resized it to 513x513, and it worked for me. This may only be a requirement for png's, DEM tiff files seem to work with sizes that don't fit this pattern.", "markup": "markdown", "html": "<p>@Skylion007 I just tested the heightmap image that you posted using gazebo7, and I see the following error message:</p>\n<div class=\"codehilite\"><pre><span></span>[Err] [HeightmapShape.cc:214] Heightmap data size must be square, with a size of 2^n+1\n</pre></div>\n\n\n<p>You've posted a 512x512 png. I resized it to 513x513, and it worked for me. This may only be a requirement for png's, DEM tiff files seem to work with sizes that don't fit this pattern.</p>", "type": "rendered"}, "created_on": "2016-09-10T00:42:24.845424+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 30494962}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653/comments/30494986.json"}, "html": {"href": "#!/osrf/gazebo/issues/1653#comment-30494986"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653.json"}}, "type": "issue", "id": 1653, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Large heightmaps causes Gazebo to crash"}, "content": {"raw": "It's particularly silly to serialize the heightmap for the `scene_info` message used by the `ModelListWidget`, since it doesn't even use that data.", "markup": "markdown", "html": "<p>It's particularly silly to serialize the heightmap for the <code>scene_info</code> message used by the <code>ModelListWidget</code>, since it doesn't even use that data.</p>", "type": "rendered"}, "created_on": "2016-09-10T00:49:44.780206+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 30494986}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653/comments/30495027.json"}, "html": {"href": "#!/osrf/gazebo/issues/1653#comment-30495027"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653.json"}}, "type": "issue", "id": 1653, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Large heightmaps causes Gazebo to crash"}, "content": {"raw": "Also, MainWindow isn't using the heightmap info from its `scene_info` request, it's just matching names with entity id's.", "markup": "markdown", "html": "<p>Also, MainWindow isn't using the heightmap info from its <code>scene_info</code> request, it's just matching names with entity id's.</p>", "type": "rendered"}, "created_on": "2016-09-10T00:56:20.888799+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 30495027}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653/comments/30495092.json"}, "html": {"href": "#!/osrf/gazebo/issues/1653#comment-30495092"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653.json"}}, "type": "issue", "id": 1653, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Large heightmaps causes Gazebo to crash"}, "content": {"raw": "The following seems to fix the errors coming from the `scene_info` calls:\n\n~~~\ndiff -r dda7f31f3e70 gazebo/physics/HeightmapShape.cc\n--- a/gazebo/physics/HeightmapShape.cc\tFri Aug 26 14:00:38 2016 -0700\n+++ b/gazebo/physics/HeightmapShape.cc\tFri Sep 09 18:12:56 2016 -0700\n@@ -287,15 +287,6 @@\n   _msg.mutable_heightmap()->set_width(this->vertSize);\n   _msg.mutable_heightmap()->set_height(this->vertSize);\n \n-  for (unsigned int y = 0; y < this->vertSize; ++y)\n-  {\n-    for (unsigned int x = 0; x < this->vertSize; ++x)\n-    {\n-      int index = (this->vertSize - y - 1) * this->vertSize + x;\n-      _msg.mutable_heightmap()->add_heights(this->heights[index]);\n-    }\n-  }\n-\n   msgs::Set(_msg.mutable_heightmap()->mutable_size(), this->GetSize().Ign());\n   msgs::Set(_msg.mutable_heightmap()->mutable_origin(), this->GetPos().Ign());\n   _msg.mutable_heightmap()->set_filename(this->img.GetFilename());\n~~~", "markup": "markdown", "html": "<p>The following seems to fix the errors coming from the <code>scene_info</code> calls:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r dda7f31f3e70 gazebo/physics/HeightmapShape.cc</span>\n<span class=\"gd\">--- a/gazebo/physics/HeightmapShape.cc  Fri Aug 26 14:00:38 2016 -0700</span>\n<span class=\"gi\">+++ b/gazebo/physics/HeightmapShape.cc  Fri Sep 09 18:12:56 2016 -0700</span>\n<span class=\"gu\">@@ -287,15 +287,6 @@</span>\n   _msg.mutable_heightmap()-&gt;set_width(this-&gt;vertSize);\n   _msg.mutable_heightmap()-&gt;set_height(this-&gt;vertSize);\n\n<span class=\"gd\">-  for (unsigned int y = 0; y &lt; this-&gt;vertSize; ++y)</span>\n<span class=\"gd\">-  {</span>\n<span class=\"gd\">-    for (unsigned int x = 0; x &lt; this-&gt;vertSize; ++x)</span>\n<span class=\"gd\">-    {</span>\n<span class=\"gd\">-      int index = (this-&gt;vertSize - y - 1) * this-&gt;vertSize + x;</span>\n<span class=\"gd\">-      _msg.mutable_heightmap()-&gt;add_heights(this-&gt;heights[index]);</span>\n<span class=\"gd\">-    }</span>\n<span class=\"gd\">-  }</span>\n<span class=\"gd\">-</span>\n   msgs::Set(_msg.mutable_heightmap()-&gt;mutable_size(), this-&gt;GetSize().Ign());\n   msgs::Set(_msg.mutable_heightmap()-&gt;mutable_origin(), this-&gt;GetPos().Ign());\n   _msg.mutable_heightmap()-&gt;set_filename(this-&gt;img.GetFilename());\n</pre></div>", "type": "rendered"}, "created_on": "2016-09-10T01:13:17.419626+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 30495092}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653/comments/34464313.json"}, "html": {"href": "#!/osrf/gazebo/issues/1653#comment-34464313"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653.json"}}, "type": "issue", "id": 1653, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Large heightmaps causes Gazebo to crash"}, "content": {"raw": "@scpeters What do you think about closing this issue and referencing it in a new one about gazebo crashing when inserting a heightmap with an invalid resolution?", "markup": "markdown", "html": "<p>@scpeters What do you think about closing this issue and referencing it in a new one about gazebo crashing when inserting a heightmap with an invalid resolution?</p>", "type": "rendered"}, "created_on": "2017-02-16T17:18:22.580069+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": null, "type": "issue_comment", "id": 34464313}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653/comments/34466425.json"}, "html": {"href": "#!/osrf/gazebo/issues/1653#comment-34466425"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653.json"}}, "type": "issue", "id": 1653, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Large heightmaps causes Gazebo to crash"}, "content": {"raw": "Sounds good to me", "markup": "markdown", "html": "<p>Sounds good to me</p>", "type": "rendered"}, "created_on": "2017-02-16T19:18:00.923413+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 34466425}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653/comments/34466712.json"}, "html": {"href": "#!/osrf/gazebo/issues/1653#comment-34466712"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653.json"}}, "type": "issue", "id": 1653, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Large heightmaps causes Gazebo to crash"}, "content": {"raw": "Closing in favor of #2199", "markup": "markdown", "html": "<p>Closing in favor of <a href=\"#!/osrf/gazebo/issues/2199/gazebo-crashes-if-the-heightmap-is-not-of\" rel=\"nofollow\" title=\"Gazebo crashes if the heightmap is not of resolution 2^n+1\" class=\"ap-connect-link\">#2199</a></p>", "type": "rendered"}, "created_on": "2017-02-16T19:35:51.485931+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": null, "type": "issue_comment", "id": 34466712}], "page": 1, "size": 9}