{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653/comments/30495092.json"}, "html": {"href": "#!/osrf/gazebo/issues/1653#comment-30495092"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1653.json"}}, "type": "issue", "id": 1653, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Large heightmaps causes Gazebo to crash"}, "content": {"raw": "The following seems to fix the errors coming from the `scene_info` calls:\n\n~~~\ndiff -r dda7f31f3e70 gazebo/physics/HeightmapShape.cc\n--- a/gazebo/physics/HeightmapShape.cc\tFri Aug 26 14:00:38 2016 -0700\n+++ b/gazebo/physics/HeightmapShape.cc\tFri Sep 09 18:12:56 2016 -0700\n@@ -287,15 +287,6 @@\n   _msg.mutable_heightmap()->set_width(this->vertSize);\n   _msg.mutable_heightmap()->set_height(this->vertSize);\n \n-  for (unsigned int y = 0; y < this->vertSize; ++y)\n-  {\n-    for (unsigned int x = 0; x < this->vertSize; ++x)\n-    {\n-      int index = (this->vertSize - y - 1) * this->vertSize + x;\n-      _msg.mutable_heightmap()->add_heights(this->heights[index]);\n-    }\n-  }\n-\n   msgs::Set(_msg.mutable_heightmap()->mutable_size(), this->GetSize().Ign());\n   msgs::Set(_msg.mutable_heightmap()->mutable_origin(), this->GetPos().Ign());\n   _msg.mutable_heightmap()->set_filename(this->img.GetFilename());\n~~~", "markup": "markdown", "html": "<p>The following seems to fix the errors coming from the <code>scene_info</code> calls:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r dda7f31f3e70 gazebo/physics/HeightmapShape.cc</span>\n<span class=\"gd\">--- a/gazebo/physics/HeightmapShape.cc  Fri Aug 26 14:00:38 2016 -0700</span>\n<span class=\"gi\">+++ b/gazebo/physics/HeightmapShape.cc  Fri Sep 09 18:12:56 2016 -0700</span>\n<span class=\"gu\">@@ -287,15 +287,6 @@</span>\n   _msg.mutable_heightmap()-&gt;set_width(this-&gt;vertSize);\n   _msg.mutable_heightmap()-&gt;set_height(this-&gt;vertSize);\n\n<span class=\"gd\">-  for (unsigned int y = 0; y &lt; this-&gt;vertSize; ++y)</span>\n<span class=\"gd\">-  {</span>\n<span class=\"gd\">-    for (unsigned int x = 0; x &lt; this-&gt;vertSize; ++x)</span>\n<span class=\"gd\">-    {</span>\n<span class=\"gd\">-      int index = (this-&gt;vertSize - y - 1) * this-&gt;vertSize + x;</span>\n<span class=\"gd\">-      _msg.mutable_heightmap()-&gt;add_heights(this-&gt;heights[index]);</span>\n<span class=\"gd\">-    }</span>\n<span class=\"gd\">-  }</span>\n<span class=\"gd\">-</span>\n   msgs::Set(_msg.mutable_heightmap()-&gt;mutable_size(), this-&gt;GetSize().Ign());\n   msgs::Set(_msg.mutable_heightmap()-&gt;mutable_origin(), this-&gt;GetPos().Ign());\n   _msg.mutable_heightmap()-&gt;set_filename(this-&gt;img.GetFilename());\n</pre></div>", "type": "rendered"}, "created_on": "2016-09-10T01:13:17.419626+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 30495092}