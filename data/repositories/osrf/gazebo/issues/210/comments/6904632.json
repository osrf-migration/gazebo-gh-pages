{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/210/comments/6904632.json"}, "html": {"href": "#!/osrf/gazebo/issues/210#comment-6904632"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/210.json"}}, "type": "issue", "id": 210, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Incorporate xacro into SDF"}, "content": {"raw": "I just made a quick test with xml stylesheets:\n~~~\n$ cat cylinder_rigid_body.xml\n<?xml version=\"1.0\" ?>\n<?xml-stylesheet type=\"text/xsl\" href=\"cylinder_rigid_body.xsl\" ?>\n<!--\n  Cylinder centered on z axis\n-->\n<uniform_cylinder>\n  <radius>0.5</radius>\n  <length>10.0</length>\n  <mass>1.0</mass>\n</uniform_cylinder>\n~~~\n~~~\n$ cat cylinder_rigid_body.xsl\n<xsl:stylesheet\n    xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version=\"1.0\">\n<!--\n  sdf model file for a cylinder of uniform mass\n-->\n\n<xsl:output method=\"xml\" omit-xml-declaration=\"no\"/>\n\n<xsl:template match=\"uniform_cylinder\">\n<sdf version=\"1.4\">\n  <model name=\"cylinder\">\n    <link name=\"link\">\n      <inertial>\n        <mass><xsl:value-of select=\"mass\"/></mass>\n        <inertia>\n          <ixx><xsl:value-of select=\"1 div 12 * mass * (3*radius*radius + length*length)\"/></ixx>\n          <iyy><xsl:value-of select=\"1 div 12 * mass * (3*radius*radius + length*length)\"/></iyy>\n          <izz><xsl:value-of select=\"0.5 * mass * radius*radius\"/></izz>\n          <ixy>0.0</ixy>\n          <ixz>0.0</ixz>\n          <iyz>0.0</iyz>\n        </inertia>\n      </inertial>\n      <collision name=\"collision\">\n        <geometry>\n          <cylinder>\n            <radius><xsl:value-of select=\"radius\"/></radius>\n            <length><xsl:value-of select=\"length\"/></length>\n          </cylinder>\n        </geometry>\n      </collision>\n      <visual name=\"visual\">\n        <geometry>\n          <cylinder>\n            <radius><xsl:value-of select=\"radius\"/></radius>\n            <length><xsl:value-of select=\"length\"/></length>\n          </cylinder>\n        </geometry>\n      </visual>\n    </link>\n  </model>\n</sdf>\n</xsl:template>\n</xsl:stylesheet>\n~~~\n~~~\n$ xsltproc cylinder_rigid_body.xsl cylinder_rigid_body.xml \\\n  | xmllint --format -\n<?xml version=\"1.0\"?>\n<sdf version=\"1.4\">\n  <model name=\"cylinder\">\n    <link name=\"link\">\n      <inertial>\n        <mass>1.0</mass>\n        <inertia>\n          <ixx>8.395833333333332</ixx>\n          <iyy>8.395833333333332</iyy>\n          <izz>0.125</izz>\n          <ixy>0.0</ixy>\n          <ixz>0.0</ixz>\n          <iyz>0.0</iyz>\n        </inertia>\n      </inertial>\n      <collision name=\"collision\">\n        <geometry>\n          <cylinder>\n            <radius>0.5</radius>\n            <length>10.0</length>\n          </cylinder>\n        </geometry>\n      </collision>\n      <visual name=\"visual\">\n        <geometry>\n          <cylinder>\n            <radius>0.5</radius>\n            <length>10.0</length>\n          </cylinder>\n        </geometry>\n      </visual>\n    </link>\n  </model>\n</sdf>\n~~~\nThey have about as much math capability as xacro, but they are a w3c standard.", "markup": "markdown", "html": "<p>I just made a quick test with xml stylesheets:</p>\n<div class=\"codehilite\"><pre><span></span>$ cat cylinder_rigid_body.xml\n<span class=\"cp\">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>\n<span class=\"cp\">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;cylinder_rigid_body.xsl&quot; ?&gt;</span>\n<span class=\"c\">&lt;!--</span>\n<span class=\"c\">  Cylinder centered on z axis</span>\n<span class=\"c\">--&gt;</span>\n<span class=\"nt\">&lt;uniform_cylinder&gt;</span>\n  <span class=\"nt\">&lt;radius&gt;</span>0.5<span class=\"nt\">&lt;/radius&gt;</span>\n  <span class=\"nt\">&lt;length&gt;</span>10.0<span class=\"nt\">&lt;/length&gt;</span>\n  <span class=\"nt\">&lt;mass&gt;</span>1.0<span class=\"nt\">&lt;/mass&gt;</span>\n<span class=\"nt\">&lt;/uniform_cylinder&gt;</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>$ cat cylinder_rigid_body.xsl\n<span class=\"k\">&lt;xsl:stylesheet</span>\n    <span class=\"na\">xmlns:xsl=</span><span class=\"s\">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.0&quot;</span><span class=\"nt\">&gt;</span>\n<span class=\"c\">&lt;!--</span>\n<span class=\"c\">  sdf model file for a cylinder of uniform mass</span>\n<span class=\"c\">--&gt;</span>\n\n<span class=\"k\">&lt;xsl:output</span> <span class=\"na\">method=</span><span class=\"s\">&quot;xml&quot;</span> <span class=\"na\">omit-xml-declaration=</span><span class=\"s\">&quot;no&quot;</span><span class=\"nt\">/&gt;</span>\n\n<span class=\"k\">&lt;xsl:template</span> <span class=\"na\">match=</span><span class=\"s\">&quot;uniform_cylinder&quot;</span><span class=\"nt\">&gt;</span>\n<span class=\"nt\">&lt;sdf</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.4&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;model</span> <span class=\"na\">name=</span><span class=\"s\">&quot;cylinder&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;link&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;inertial&gt;</span>\n        <span class=\"nt\">&lt;mass&gt;</span><span class=\"k\">&lt;xsl:value-of</span> <span class=\"na\">select=</span><span class=\"s\">&quot;mass&quot;</span><span class=\"nt\">/&gt;&lt;/mass&gt;</span>\n        <span class=\"nt\">&lt;inertia&gt;</span>\n          <span class=\"nt\">&lt;ixx&gt;</span><span class=\"k\">&lt;xsl:value-of</span> <span class=\"na\">select=</span><span class=\"s\">&quot;1 div 12 * mass * (3*radius*radius + length*length)&quot;</span><span class=\"nt\">/&gt;&lt;/ixx&gt;</span>\n          <span class=\"nt\">&lt;iyy&gt;</span><span class=\"k\">&lt;xsl:value-of</span> <span class=\"na\">select=</span><span class=\"s\">&quot;1 div 12 * mass * (3*radius*radius + length*length)&quot;</span><span class=\"nt\">/&gt;&lt;/iyy&gt;</span>\n          <span class=\"nt\">&lt;izz&gt;</span><span class=\"k\">&lt;xsl:value-of</span> <span class=\"na\">select=</span><span class=\"s\">&quot;0.5 * mass * radius*radius&quot;</span><span class=\"nt\">/&gt;&lt;/izz&gt;</span>\n          <span class=\"nt\">&lt;ixy&gt;</span>0.0<span class=\"nt\">&lt;/ixy&gt;</span>\n          <span class=\"nt\">&lt;ixz&gt;</span>0.0<span class=\"nt\">&lt;/ixz&gt;</span>\n          <span class=\"nt\">&lt;iyz&gt;</span>0.0<span class=\"nt\">&lt;/iyz&gt;</span>\n        <span class=\"nt\">&lt;/inertia&gt;</span>\n      <span class=\"nt\">&lt;/inertial&gt;</span>\n      <span class=\"nt\">&lt;collision</span> <span class=\"na\">name=</span><span class=\"s\">&quot;collision&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;geometry&gt;</span>\n          <span class=\"nt\">&lt;cylinder&gt;</span>\n            <span class=\"nt\">&lt;radius&gt;</span><span class=\"k\">&lt;xsl:value-of</span> <span class=\"na\">select=</span><span class=\"s\">&quot;radius&quot;</span><span class=\"nt\">/&gt;&lt;/radius&gt;</span>\n            <span class=\"nt\">&lt;length&gt;</span><span class=\"k\">&lt;xsl:value-of</span> <span class=\"na\">select=</span><span class=\"s\">&quot;length&quot;</span><span class=\"nt\">/&gt;&lt;/length&gt;</span>\n          <span class=\"nt\">&lt;/cylinder&gt;</span>\n        <span class=\"nt\">&lt;/geometry&gt;</span>\n      <span class=\"nt\">&lt;/collision&gt;</span>\n      <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&quot;visual&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;geometry&gt;</span>\n          <span class=\"nt\">&lt;cylinder&gt;</span>\n            <span class=\"nt\">&lt;radius&gt;</span><span class=\"k\">&lt;xsl:value-of</span> <span class=\"na\">select=</span><span class=\"s\">&quot;radius&quot;</span><span class=\"nt\">/&gt;&lt;/radius&gt;</span>\n            <span class=\"nt\">&lt;length&gt;</span><span class=\"k\">&lt;xsl:value-of</span> <span class=\"na\">select=</span><span class=\"s\">&quot;length&quot;</span><span class=\"nt\">/&gt;&lt;/length&gt;</span>\n          <span class=\"nt\">&lt;/cylinder&gt;</span>\n        <span class=\"nt\">&lt;/geometry&gt;</span>\n      <span class=\"nt\">&lt;/visual&gt;</span>\n    <span class=\"nt\">&lt;/link&gt;</span>\n  <span class=\"nt\">&lt;/model&gt;</span>\n<span class=\"nt\">&lt;/sdf&gt;</span>\n<span class=\"k\">&lt;/xsl:template&gt;</span>\n<span class=\"k\">&lt;/xsl:stylesheet&gt;</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>$ xsltproc cylinder_rigid_body.xsl cylinder_rigid_body.xml \\\n  | xmllint --format -\n<span class=\"cp\">&lt;?xml version=&quot;1.0&quot;?&gt;</span>\n<span class=\"nt\">&lt;sdf</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.4&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;model</span> <span class=\"na\">name=</span><span class=\"s\">&quot;cylinder&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;link&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;inertial&gt;</span>\n        <span class=\"nt\">&lt;mass&gt;</span>1.0<span class=\"nt\">&lt;/mass&gt;</span>\n        <span class=\"nt\">&lt;inertia&gt;</span>\n          <span class=\"nt\">&lt;ixx&gt;</span>8.395833333333332<span class=\"nt\">&lt;/ixx&gt;</span>\n          <span class=\"nt\">&lt;iyy&gt;</span>8.395833333333332<span class=\"nt\">&lt;/iyy&gt;</span>\n          <span class=\"nt\">&lt;izz&gt;</span>0.125<span class=\"nt\">&lt;/izz&gt;</span>\n          <span class=\"nt\">&lt;ixy&gt;</span>0.0<span class=\"nt\">&lt;/ixy&gt;</span>\n          <span class=\"nt\">&lt;ixz&gt;</span>0.0<span class=\"nt\">&lt;/ixz&gt;</span>\n          <span class=\"nt\">&lt;iyz&gt;</span>0.0<span class=\"nt\">&lt;/iyz&gt;</span>\n        <span class=\"nt\">&lt;/inertia&gt;</span>\n      <span class=\"nt\">&lt;/inertial&gt;</span>\n      <span class=\"nt\">&lt;collision</span> <span class=\"na\">name=</span><span class=\"s\">&quot;collision&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;geometry&gt;</span>\n          <span class=\"nt\">&lt;cylinder&gt;</span>\n            <span class=\"nt\">&lt;radius&gt;</span>0.5<span class=\"nt\">&lt;/radius&gt;</span>\n            <span class=\"nt\">&lt;length&gt;</span>10.0<span class=\"nt\">&lt;/length&gt;</span>\n          <span class=\"nt\">&lt;/cylinder&gt;</span>\n        <span class=\"nt\">&lt;/geometry&gt;</span>\n      <span class=\"nt\">&lt;/collision&gt;</span>\n      <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&quot;visual&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;geometry&gt;</span>\n          <span class=\"nt\">&lt;cylinder&gt;</span>\n            <span class=\"nt\">&lt;radius&gt;</span>0.5<span class=\"nt\">&lt;/radius&gt;</span>\n            <span class=\"nt\">&lt;length&gt;</span>10.0<span class=\"nt\">&lt;/length&gt;</span>\n          <span class=\"nt\">&lt;/cylinder&gt;</span>\n        <span class=\"nt\">&lt;/geometry&gt;</span>\n      <span class=\"nt\">&lt;/visual&gt;</span>\n    <span class=\"nt\">&lt;/link&gt;</span>\n  <span class=\"nt\">&lt;/model&gt;</span>\n<span class=\"nt\">&lt;/sdf&gt;</span>\n</pre></div>\n\n\n<p>They have about as much math capability as xacro, but they are a w3c standard.</p>", "type": "rendered"}, "created_on": "2013-11-15T02:07:10.993256+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 6904632}