{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2475/comments/45763737.json"}, "html": {"href": "#!/osrf/gazebo/issues/2475#comment-45763737"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2475.json"}}, "type": "issue", "id": 2475, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Gazebo9 compile error with ogre1.11"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2018-05-28T16:12:35.050940+00:00", "user": {"display_name": "CatchMe", "uuid": "{6fe86e63-7e93-4846-b516-5768583263ae}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6fe86e63-7e93-4846-b516-5768583263ae%7D"}, "html": {"href": "https://bitbucket.org/%7B6fe86e63-7e93-4846-b516-5768583263ae%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/bf6734b1e5b0d10c97955aa78dbb5bbad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsC-3.png"}}, "nickname": "CatchMe_", "type": "user", "account_id": "5b0c1beda655ee23032ecf03"}, "updated_on": null, "type": "issue_comment", "id": 45763737}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2475/comments/45910538.json"}, "html": {"href": "#!/osrf/gazebo/issues/2475#comment-45910538"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2475.json"}}, "type": "issue", "id": 2475, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Gazebo9 compile error with ogre1.11"}, "content": {"raw": "I tried to compile gazebo 9.0.0 against ogre 1.11 on Arch Linux as well and fixed all the compilation errors using the ogre documentation (see below for link to files). \n\nPlease note that this leaves a multitude of deprecation warnings unaddressed. Moreover, I'm neither a gazebo nor an ogre developer, and only followed ogre 1.11's documentation and tried to get rid of the compilation errors. At the moment, gazebo compiles and starts, but gives me only a black screen instead of the 3D view. That may be the result of one of the changes that I introduced.\nIn addition, there are some things were I question gazebo's implementation. For instance, gazebo has almost completely re-implemented (copied?) the ShaderHelper classes (ogre: part of the Terrain component, gazebo: within Heightmap.cc). Because ogre 1.11 doesn't expose the symbols for ShaderHelper\\* any longer in libOgreTerrain.so, gazebo cannot derive its own classes from it. However, because from a source-code level it's almost a 1:1 copy, I don't see the point in having this part of code in gazebo... To solve the compilation issues, I simply removed gazebo's classes that were derived from ShaderHelper\\*. That, however, could be one of the reasons why I get a black screen right now.\n\nYou see, the \"patch\" just fixes the compilation issues, and should be considered only as a starting point right now.\n\n\nAUR package discussion: https://aur.archlinux.org/packages/gazebo/\nPKGBUILD: https://gist.github.com/rochus/547b26bc85a39195e3d1833280798855\nogre-1.11.patch: https://gist.github.com/rochus/003b156bcc8368c8c353be12b748986e", "markup": "markdown", "html": "<p>I tried to compile gazebo 9.0.0 against ogre 1.11 on Arch Linux as well and fixed all the compilation errors using the ogre documentation (see below for link to files). </p>\n<p>Please note that this leaves a multitude of deprecation warnings unaddressed. Moreover, I'm neither a gazebo nor an ogre developer, and only followed ogre 1.11's documentation and tried to get rid of the compilation errors. At the moment, gazebo compiles and starts, but gives me only a black screen instead of the 3D view. That may be the result of one of the changes that I introduced.\nIn addition, there are some things were I question gazebo's implementation. For instance, gazebo has almost completely re-implemented (copied?) the ShaderHelper classes (ogre: part of the Terrain component, gazebo: within Heightmap.cc). Because ogre 1.11 doesn't expose the symbols for ShaderHelper* any longer in libOgreTerrain.so, gazebo cannot derive its own classes from it. However, because from a source-code level it's almost a 1:1 copy, I don't see the point in having this part of code in gazebo... To solve the compilation issues, I simply removed gazebo's classes that were derived from ShaderHelper*. That, however, could be one of the reasons why I get a black screen right now.</p>\n<p>You see, the \"patch\" just fixes the compilation issues, and should be considered only as a starting point right now.</p>\n<p>AUR package discussion: <a href=\"https://aur.archlinux.org/packages/gazebo/\" rel=\"nofollow\" class=\"ap-connect-link\">https://aur.archlinux.org/packages/gazebo/</a>\nPKGBUILD: <a href=\"https://gist.github.com/rochus/547b26bc85a39195e3d1833280798855\" rel=\"nofollow\" class=\"ap-connect-link\">https://gist.github.com/rochus/547b26bc85a39195e3d1833280798855</a>\nogre-1.11.patch: <a href=\"https://gist.github.com/rochus/003b156bcc8368c8c353be12b748986e\" rel=\"nofollow\" class=\"ap-connect-link\">https://gist.github.com/rochus/003b156bcc8368c8c353be12b748986e</a></p>", "type": "rendered"}, "created_on": "2018-06-03T12:07:19.099161+00:00", "user": {"display_name": "Nicolai Waniek", "uuid": "{8b7078a9-b7b6-42e0-bfab-fe568bcaf9c1}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8b7078a9-b7b6-42e0-bfab-fe568bcaf9c1%7D"}, "html": {"href": "https://bitbucket.org/%7B8b7078a9-b7b6-42e0-bfab-fe568bcaf9c1%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:5da02bd2-b6b5-4bfd-a72a-cd24e59d25f9/42739f41-65c2-4d1b-82fb-a9180663016f/128"}}, "nickname": "rochus", "type": "user", "account_id": "557058:5da02bd2-b6b5-4bfd-a72a-cd24e59d25f9"}, "updated_on": "2018-06-03T12:19:24.916410+00:00", "type": "issue_comment", "id": 45910538}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2475/comments/45941419.json"}, "html": {"href": "#!/osrf/gazebo/issues/2475#comment-45941419"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2475.json"}}, "type": "issue", "id": 2475, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Gazebo9 compile error with ogre1.11"}, "content": {"raw": "Regarding the ShaderHelper code in Heightmap.cc. I think the ogre terrain GLSL shader generation code wasn't quite working at the time so we had to subclass it and make some fixes. Over time, we made more changes for it to work on OSX. That was a while ago so hopefully it's better now with ogre-1.11.", "markup": "markdown", "html": "<p>Regarding the ShaderHelper code in Heightmap.cc. I think the ogre terrain GLSL shader generation code wasn't quite working at the time so we had to subclass it and make some fixes. Over time, we made more changes for it to work on OSX. That was a while ago so hopefully it's better now with ogre-1.11.</p>", "type": "rendered"}, "created_on": "2018-06-04T18:50:03.902694+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-06-04T18:50:51.354803+00:00", "type": "issue_comment", "id": 45941419}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2475/comments/46008592.json"}, "html": {"href": "#!/osrf/gazebo/issues/2475#comment-46008592"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2475.json"}}, "type": "issue", "id": 2475, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Gazebo9 compile error with ogre1.11"}, "content": {"raw": "@rochus Tried to compile on Arch Linux with your patch today. Found out that Gazebo still needs one patch in `gazebo/rendering/RenderEngine.cc` at line 427:\n```\n+++\n#if (OGRE_VERSION >= ((1 << 16) | (11 << 8) | 0))\n    plugins.push_back(path+\"/Codec_EXR\");\n    plugins.push_back(path+\"/Codec_FreeImage\");\n#endif\n\n    plugins.push_back(path+\"/RenderSystem_GL\");\n    plugins.push_back(path+\"/Plugin_ParticleFX\");\n    plugins.push_back(path+\"/Plugin_BSPSceneManager\");\n    plugins.push_back(path+\"/Plugin_OctreeSceneManager\");\n\n```\nPlus you need to use `asp export ogre` to get the PKGBUILD of Ogre 1.11 and change the cmake options:\n```\n  cmake .. \\\n    -DCMAKE_INSTALL_PREFIX=/usr \\\n    -DOGRE_BUILD_DEPENDENCIES=FALSE \\\n    -DCMAKE_BUILD_TYPE=RelWithDebInfo \\\n    -DOpenGL_GL_PREFERENCE=GLVND \\\n    -DOGRE_BUILD_PLUGIN_FREEIMAGE=TRUE\n\n```\n\nConfirmed that Gazebo 9.0.0 works seamlessly after these patches.", "markup": "markdown", "html": "<p>@rochus Tried to compile on Arch Linux with your patch today. Found out that Gazebo still needs one patch in <code>gazebo/rendering/RenderEngine.cc</code> at line 427:</p>\n<div class=\"codehilite\"><pre><span></span>+++\n#if (OGRE_VERSION &gt;= ((1 &lt;&lt; 16) | (11 &lt;&lt; 8) | 0))\n    plugins.push_back(path+&quot;/Codec_EXR&quot;);\n    plugins.push_back(path+&quot;/Codec_FreeImage&quot;);\n#endif\n\n    plugins.push_back(path+&quot;/RenderSystem_GL&quot;);\n    plugins.push_back(path+&quot;/Plugin_ParticleFX&quot;);\n    plugins.push_back(path+&quot;/Plugin_BSPSceneManager&quot;);\n    plugins.push_back(path+&quot;/Plugin_OctreeSceneManager&quot;);\n</pre></div>\n\n\n<p>Plus you need to use <code>asp export ogre</code> to get the PKGBUILD of Ogre 1.11 and change the cmake options:</p>\n<div class=\"codehilite\"><pre><span></span>  cmake .. \\\n    -DCMAKE_INSTALL_PREFIX=/usr \\\n    -DOGRE_BUILD_DEPENDENCIES=FALSE \\\n    -DCMAKE_BUILD_TYPE=RelWithDebInfo \\\n    -DOpenGL_GL_PREFERENCE=GLVND \\\n    -DOGRE_BUILD_PLUGIN_FREEIMAGE=TRUE\n</pre></div>\n\n\n<p>Confirmed that Gazebo 9.0.0 works seamlessly after these patches.</p>", "type": "rendered"}, "created_on": "2018-06-07T03:08:56.561153+00:00", "user": {"display_name": "Fan Jiang", "uuid": "{f65659c1-6df5-4fbb-aa86-e4abe468cc0f}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bf65659c1-6df5-4fbb-aa86-e4abe468cc0f%7D"}, "html": {"href": "https://bitbucket.org/%7Bf65659c1-6df5-4fbb-aa86-e4abe468cc0f%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:0c55812b-0e03-4c3a-a8a9-5476e0b962b7/0070d185-95ed-4c7a-a47f-abe3e780a87e/128"}}, "nickname": "proffan", "type": "user", "account_id": "557058:0c55812b-0e03-4c3a-a8a9-5476e0b962b7"}, "updated_on": null, "type": "issue_comment", "id": 46008592}], "page": 1, "size": 4}