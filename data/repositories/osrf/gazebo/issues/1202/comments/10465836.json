{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1202/comments/10465836.json"}, "html": {"href": "#!/osrf/gazebo/issues/1202#comment-10465836"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1202.json"}}, "type": "issue", "id": 1202, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Transitive dependency on protobuf in gazebo's pkg-config file"}, "content": {"raw": "I could broaden this issue to say that no transitive dependencies are included in the gazebo pkg-config file. For example, some of the example plugins are failing to build on mac since pkg-config is used and the boost headers aren't included ([test failures](http://build.osrfoundation.org/job/gazebo-default-devel-homebrew-amd64/85/testReport/)):\n~~~\n195: [  FAILED  ] ExamplePlugins/ExamplePlugins.Build/0, where GetParam() = \"animate_joints\"\n195: [  FAILED  ] ExamplePlugins/ExamplePlugins.Build/1, where GetParam() = \"animate_pose\"\n~~~\nDetailed build errors:\n~~~\n195: [ RUN      ] ExamplePlugins/ExamplePlugins.Build/0\n195: -- The C compiler identification is Clang 5.0.0\n195: -- The CXX compiler identification is Clang 5.0.0\n195: -- Check for working C compiler: /usr/bin/cc\n195: -- Check for working C compiler: /usr/bin/cc -- works\n195: -- Detecting C compiler ABI info\n195: -- Detecting C compiler ABI info - done\n195: -- Check for working CXX compiler: /usr/bin/c++\n195: -- Check for working CXX compiler: /usr/bin/c++ -- works\n195: -- Detecting CXX compiler ABI info\n195: -- Detecting CXX compiler ABI info - done\n195: -- Found PkgConfig: /Users/jenkins/jenkins.xzpq/bin/pkg-config (found version \"0.28\") \n195: -- checking for module 'gazebo'\n195: --   found gazebo, version 3.0.0\n195: -- Boost version: 1.55.0\n195: -- Boost version: 1.55.0\n195: -- Found the following Boost libraries:\n195: --   system\n195: --   filesystem\n195: --   regex\n195: -- Configuring done\n195: -- Generating done\n195: -- Build files have been written to: /tmp/animate_joints-6449-fb8b-3e66-b055\n195: Scanning dependencies of target animate_joints\n195: [100%] Building CXX object CMakeFiles/animate_joints.dir/animate_joints.cc.o\n195: In file included from /Users/jenkins/workspace/gazebo-default-devel-homebrew-amd64/gazebo/examples/plugins/animate_joints/animate_joints.cc:18:\n195: In file included from /Users/jenkins/jenkins.xzpq/Cellar/gazebo/HEAD/include/gazebo-3.0/gazebo/gazebo.hh:20:\n195: In file included from /Users/jenkins/jenkins.xzpq/Cellar/gazebo/HEAD/include/gazebo-3.0/gazebo/gazebo_core.hh:19:\n195: In file included from /Users/jenkins/jenkins.xzpq/Cellar/gazebo/HEAD/include/gazebo-3.0/gazebo/common/common.hh:6:\n195: /Users/jenkins/jenkins.xzpq/Cellar/gazebo/HEAD/include/gazebo-3.0/gazebo/common/Assert.hh:20:10: fatal error: 'boost/assert.hpp' file not found\n195: #include <boost/assert.hpp>\n195:          ^\n195: 1 error generated.\n195: make[3]: *** [CMakeFiles/animate_joints.dir/animate_joints.cc.o] Error 1\n195: make[2]: *** [CMakeFiles/animate_joints.dir/all] Error 2\n195: make[1]: *** [all] Error 2\n195: /Users/jenkins/workspace/gazebo-default-devel-homebrew-amd64/gazebo/test/examples/example_plugins.cc:69: Failure\n195: Value of: 0\n195: Expected: system(cmd)\n195: Which is: 512\n195: [  FAILED  ] ExamplePlugins/ExamplePlugins.Build/0, where GetParam() = \"animate_joints\" (2490 ms)\n~~~\n~~~\n195: [ RUN      ] ExamplePlugins/ExamplePlugins.Build/1\n195: -- The C compiler identification is Clang 5.0.0\n195: -- The CXX compiler identification is Clang 5.0.0\n195: -- Check for working C compiler: /usr/bin/cc\n195: -- Check for working C compiler: /usr/bin/cc -- works\n195: -- Detecting C compiler ABI info\n195: -- Detecting C compiler ABI info - done\n195: -- Check for working CXX compiler: /usr/bin/c++\n195: -- Check for working CXX compiler: /usr/bin/c++ -- works\n195: -- Detecting CXX compiler ABI info\n195: -- Detecting CXX compiler ABI info - done\n195: -- Found PkgConfig: /Users/jenkins/jenkins.xzpq/bin/pkg-config (found version \"0.28\") \n195: -- checking for module 'gazebo'\n195: --   found gazebo, version 3.0.0\n195: -- Boost version: 1.55.0\n195: -- Boost version: 1.55.0\n195: -- Found the following Boost libraries:\n195: --   system\n195: --   filesystem\n195: --   regex\n195: -- Configuring done\n195: -- Generating done\n195: -- Build files have been written to: /tmp/animate_pose-e069-a6f1-0fae-1125\n195: Scanning dependencies of target animate_pose\n195: [100%] Building CXX object CMakeFiles/animate_pose.dir/animate_pose.cc.o\n195: In file included from /Users/jenkins/workspace/gazebo-default-devel-homebrew-amd64/gazebo/examples/plugins/animate_pose/animate_pose.cc:17:\n195: /Users/jenkins/jenkins.xzpq/Cellar/gazebo/HEAD/include/gazebo-3.0/gazebo/common/CommonTypes.hh:23:10: fatal error: 'boost/shared_ptr.hpp' file not found\n195: #include <boost/shared_ptr.hpp>\n195:          ^\n195: 1 error generated.\n195: make[3]: *** [CMakeFiles/animate_pose.dir/animate_pose.cc.o] Error 1\n195: make[2]: *** [CMakeFiles/animate_pose.dir/all] Error 2\n195: make[1]: *** [all] Error 2\n195: /Users/jenkins/workspace/gazebo-default-devel-homebrew-amd64/gazebo/test/examples/example_plugins.cc:69: Failure\n195: Value of: 0\n195: Expected: system(cmd)\n195: Which is: 512\n195: [  FAILED  ] ExamplePlugins/ExamplePlugins.Build/1, where GetParam() = \"animate_pose\" (1744 ms)\n~~~", "markup": "markdown", "html": "<p>I could broaden this issue to say that no transitive dependencies are included in the gazebo pkg-config file. For example, some of the example plugins are failing to build on mac since pkg-config is used and the boost headers aren't included (<a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-default-devel-homebrew-amd64/85/testReport/\" rel=\"nofollow\">test failures</a>):</p>\n<div class=\"codehilite\"><pre><span></span>195: [  FAILED  ] ExamplePlugins/ExamplePlugins.Build/0, where GetParam() = &quot;animate_joints&quot;\n195: [  FAILED  ] ExamplePlugins/ExamplePlugins.Build/1, where GetParam() = &quot;animate_pose&quot;\n</pre></div>\n\n\n<p>Detailed build errors:</p>\n<div class=\"codehilite\"><pre><span></span>195: [ RUN      ] ExamplePlugins/ExamplePlugins.Build/0\n195: -- The C compiler identification is Clang 5.0.0\n195: -- The CXX compiler identification is Clang 5.0.0\n195: -- Check for working C compiler: /usr/bin/cc\n195: -- Check for working C compiler: /usr/bin/cc -- works\n195: -- Detecting C compiler ABI info\n195: -- Detecting C compiler ABI info - done\n195: -- Check for working CXX compiler: /usr/bin/c++\n195: -- Check for working CXX compiler: /usr/bin/c++ -- works\n195: -- Detecting CXX compiler ABI info\n195: -- Detecting CXX compiler ABI info - done\n195: -- Found PkgConfig: /Users/jenkins/jenkins.xzpq/bin/pkg-config (found version &quot;0.28&quot;) \n195: -- checking for module &#39;gazebo&#39;\n195: --   found gazebo, version 3.0.0\n195: -- Boost version: 1.55.0\n195: -- Boost version: 1.55.0\n195: -- Found the following Boost libraries:\n195: --   system\n195: --   filesystem\n195: --   regex\n195: -- Configuring done\n195: -- Generating done\n195: -- Build files have been written to: /tmp/animate_joints-6449-fb8b-3e66-b055\n195: Scanning dependencies of target animate_joints\n195: [100%] Building CXX object CMakeFiles/animate_joints.dir/animate_joints.cc.o\n195: In file included from /Users/jenkins/workspace/gazebo-default-devel-homebrew-amd64/gazebo/examples/plugins/animate_joints/animate_joints.cc:18:\n195: In file included from /Users/jenkins/jenkins.xzpq/Cellar/gazebo/HEAD/include/gazebo-3.0/gazebo/gazebo.hh:20:\n195: In file included from /Users/jenkins/jenkins.xzpq/Cellar/gazebo/HEAD/include/gazebo-3.0/gazebo/gazebo_core.hh:19:\n195: In file included from /Users/jenkins/jenkins.xzpq/Cellar/gazebo/HEAD/include/gazebo-3.0/gazebo/common/common.hh:6:\n195: /Users/jenkins/jenkins.xzpq/Cellar/gazebo/HEAD/include/gazebo-3.0/gazebo/common/Assert.hh:20:10: fatal error: &#39;boost/assert.hpp&#39; file not found\n195: #include &lt;boost/assert.hpp&gt;\n195:          ^\n195: 1 error generated.\n195: make[3]: *** [CMakeFiles/animate_joints.dir/animate_joints.cc.o] Error 1\n195: make[2]: *** [CMakeFiles/animate_joints.dir/all] Error 2\n195: make[1]: *** [all] Error 2\n195: /Users/jenkins/workspace/gazebo-default-devel-homebrew-amd64/gazebo/test/examples/example_plugins.cc:69: Failure\n195: Value of: 0\n195: Expected: system(cmd)\n195: Which is: 512\n195: [  FAILED  ] ExamplePlugins/ExamplePlugins.Build/0, where GetParam() = &quot;animate_joints&quot; (2490 ms)\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>195: [ RUN      ] ExamplePlugins/ExamplePlugins.Build/1\n195: -- The C compiler identification is Clang 5.0.0\n195: -- The CXX compiler identification is Clang 5.0.0\n195: -- Check for working C compiler: /usr/bin/cc\n195: -- Check for working C compiler: /usr/bin/cc -- works\n195: -- Detecting C compiler ABI info\n195: -- Detecting C compiler ABI info - done\n195: -- Check for working CXX compiler: /usr/bin/c++\n195: -- Check for working CXX compiler: /usr/bin/c++ -- works\n195: -- Detecting CXX compiler ABI info\n195: -- Detecting CXX compiler ABI info - done\n195: -- Found PkgConfig: /Users/jenkins/jenkins.xzpq/bin/pkg-config (found version &quot;0.28&quot;) \n195: -- checking for module &#39;gazebo&#39;\n195: --   found gazebo, version 3.0.0\n195: -- Boost version: 1.55.0\n195: -- Boost version: 1.55.0\n195: -- Found the following Boost libraries:\n195: --   system\n195: --   filesystem\n195: --   regex\n195: -- Configuring done\n195: -- Generating done\n195: -- Build files have been written to: /tmp/animate_pose-e069-a6f1-0fae-1125\n195: Scanning dependencies of target animate_pose\n195: [100%] Building CXX object CMakeFiles/animate_pose.dir/animate_pose.cc.o\n195: In file included from /Users/jenkins/workspace/gazebo-default-devel-homebrew-amd64/gazebo/examples/plugins/animate_pose/animate_pose.cc:17:\n195: /Users/jenkins/jenkins.xzpq/Cellar/gazebo/HEAD/include/gazebo-3.0/gazebo/common/CommonTypes.hh:23:10: fatal error: &#39;boost/shared_ptr.hpp&#39; file not found\n195: #include &lt;boost/shared_ptr.hpp&gt;\n195:          ^\n195: 1 error generated.\n195: make[3]: *** [CMakeFiles/animate_pose.dir/animate_pose.cc.o] Error 1\n195: make[2]: *** [CMakeFiles/animate_pose.dir/all] Error 2\n195: make[1]: *** [all] Error 2\n195: /Users/jenkins/workspace/gazebo-default-devel-homebrew-amd64/gazebo/test/examples/example_plugins.cc:69: Failure\n195: Value of: 0\n195: Expected: system(cmd)\n195: Which is: 512\n195: [  FAILED  ] ExamplePlugins/ExamplePlugins.Build/1, where GetParam() = &quot;animate_pose&quot; (1744 ms)\n</pre></div>", "type": "rendered"}, "created_on": "2014-05-30T21:56:56.111399+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 10465836}