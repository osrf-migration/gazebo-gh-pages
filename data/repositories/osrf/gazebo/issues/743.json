{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/743/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/743.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/743/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/743/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/743/collisiontest-in-physicscc-has-incorrect"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/743/vote"}}, "reporter": null, "title": "CollisionTest in physics.cc has incorrect analytical answer", "component": {"name": "physics", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122876.json"}}}, "votes": 0, "watches": 6, "content": {"raw": "(I think John and I fixed this in the simbody branch but I don't want to lose track of it)\r\nThe test called \"CollisionTest\" in physics.cc attempts to provide an analytical solution to compare with the physics engine's result. However the analytical solution actually just duplicates ODE's incorrect answer, making it hard for us good guys to pass the test!\r\n\r\nAn initial impulse of 1 unit is delivered by providing a constant force of 1000 across the first dt=1ms integration step. That results in an acceleration a=f/m during that step. That should give v(.001)=a*dt and x(.001)=1/2 a dt^2. Instead x(.001) is given as v(.001)*dt. That is in fact what ODE will produce since it uses a fixed step first order semi-implicit method. But it is not the right answer. The correct answer is x(.001)=.0005, not .001. Note that this affects the time of impact also -- after 1s the block should be at x=.9995 rather than 1.\r\n\r\nThe test should be fixed to compare the numerical solution to the correct analytical solution. However, this could make it tricky for ODE to pass so will require some thought as to how much error is acceptable.\r\n\r\nSherm", "markup": "markdown", "html": "<p>(I think John and I fixed this in the simbody branch but I don't want to lose track of it)\nThe test called \"CollisionTest\" in physics.cc attempts to provide an analytical solution to compare with the physics engine's result. However the analytical solution actually just duplicates ODE's incorrect answer, making it hard for us good guys to pass the test!</p>\n<p>An initial impulse of 1 unit is delivered by providing a constant force of 1000 across the first dt=1ms integration step. That results in an acceleration a=f/m during that step. That should give v(.001)=a<em>dt and x(.001)=1/2 a dt^2. Instead x(.001) is given as v(.001)</em>dt. That is in fact what ODE will produce since it uses a fixed step first order semi-implicit method. But it is not the right answer. The correct answer is x(.001)=.0005, not .001. Note that this affects the time of impact also -- after 1s the block should be at x=.9995 rather than 1.</p>\n<p>The test should be fixed to compare the numerical solution to the correct analytical solution. However, this could make it tricky for ODE to pass so will require some thought as to how much error is acceptable.</p>\n<p>Sherm</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-06-17T21:10:06.662857+00:00", "milestone": null, "updated_on": "2017-01-17T22:26:30.323092+00:00", "type": "issue", "id": 743}