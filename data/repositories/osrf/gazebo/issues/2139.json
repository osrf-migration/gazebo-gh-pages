{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2139/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2139.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2139/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2139/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2139/nestedmodels-doesnt-find-models-in-tags"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2139/vote"}}, "reporter": {"display_name": "Deanna Hood", "uuid": "{40d490b4-7de9-4c89-ac1c-2219a22057eb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B40d490b4-7de9-4c89-ac1c-2219a22057eb%7D"}, "html": {"href": "https://bitbucket.org/%7B40d490b4-7de9-4c89-ac1c-2219a22057eb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ec666897-79d8-48b4-ae27-4f0e9e56f5b5/f7b56737-eb1f-481f-beb1-50c179565cf4/128"}}, "nickname": "d_hood", "type": "user", "account_id": "557058:ec666897-79d8-48b4-ae27-4f0e9e56f5b5"}, "title": "NestedModels() doesn't find models in <include> tags", "component": null, "votes": 0, "watches": 1, "content": {"raw": "If I have an sdf with:\r\n\r\n```\r\n<!-- AGV1 -->\r\n    <model name =\"agv1\">\r\n      <pose>0.3 3.3 0 0 0 3.1415</pose>\r\n      <include>\r\n        <uri>model://warehouse_robot</uri>\r\n      </include>\r\n      <plugin name=\"agv_plugin\" filename=\"libROSAGVPlugin.so\">\r\n        <submit_tray_service_name>/ariac/submit_tray</submit_tray_service_name>\r\n        <index>1</index>\r\n      </plugin>\r\n\r\n      <!-- a tray for building kits -->\r\n      <include>\r\n        <uri>model://kit_tray</uri>\r\n        <pose>0.0 0.15 0.75 0 0 0</pose>\r\n      </include>\r\n\r\n      <!-- join the tray and agv -->\r\n      <joint name=\"agv_tray\" type=\"fixed\">\r\n          <parent>warehouse_robot::link</parent>\r\n          <child>kit_tray::tray</child>\r\n      </joint>\r\n    </model>\r\n```\r\n\r\nthen NestedModels() on the agv1 model doesn't list `kit_tray`. It will only list the `kit_tray` model if I wrap the include in a <model> tag. I think this is caused by [this line, explicitly looking for <model> tags](#!/osrf/gazebo/src/a20b41536774d4b1c7c019da6ff117c0b921cc70/gazebo/physics/Model.cc?at=default&fileviewer=file-view-default#Model.cc-198)", "markup": "markdown", "html": "<p>If I have an sdf with:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"c\">&lt;!-- AGV1 --&gt;</span>\n    <span class=\"nt\">&lt;model</span> <span class=\"na\">name =</span><span class=\"s\">&quot;agv1&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;pose&gt;</span>0.3 3.3 0 0 0 3.1415<span class=\"nt\">&lt;/pose&gt;</span>\n      <span class=\"nt\">&lt;include&gt;</span>\n        <span class=\"nt\">&lt;uri&gt;</span>model://warehouse_robot<span class=\"nt\">&lt;/uri&gt;</span>\n      <span class=\"nt\">&lt;/include&gt;</span>\n      <span class=\"nt\">&lt;plugin</span> <span class=\"na\">name=</span><span class=\"s\">&quot;agv_plugin&quot;</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;libROSAGVPlugin.so&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;submit_tray_service_name&gt;</span>/ariac/submit_tray<span class=\"nt\">&lt;/submit_tray_service_name&gt;</span>\n        <span class=\"nt\">&lt;index&gt;</span>1<span class=\"nt\">&lt;/index&gt;</span>\n      <span class=\"nt\">&lt;/plugin&gt;</span>\n\n      <span class=\"c\">&lt;!-- a tray for building kits --&gt;</span>\n      <span class=\"nt\">&lt;include&gt;</span>\n        <span class=\"nt\">&lt;uri&gt;</span>model://kit_tray<span class=\"nt\">&lt;/uri&gt;</span>\n        <span class=\"nt\">&lt;pose&gt;</span>0.0 0.15 0.75 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n      <span class=\"nt\">&lt;/include&gt;</span>\n\n      <span class=\"c\">&lt;!-- join the tray and agv --&gt;</span>\n      <span class=\"nt\">&lt;joint</span> <span class=\"na\">name=</span><span class=\"s\">&quot;agv_tray&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;fixed&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;parent&gt;</span>warehouse_robot::link<span class=\"nt\">&lt;/parent&gt;</span>\n          <span class=\"nt\">&lt;child&gt;</span>kit_tray::tray<span class=\"nt\">&lt;/child&gt;</span>\n      <span class=\"nt\">&lt;/joint&gt;</span>\n    <span class=\"nt\">&lt;/model&gt;</span>\n</pre></div>\n\n\n<p>then NestedModels() on the agv1 model doesn't list <code>kit_tray</code>. It will only list the <code>kit_tray</code> model if I wrap the include in a &lt;model&gt; tag. I think this is caused by <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/a20b41536774d4b1c7c019da6ff117c0b921cc70/gazebo/physics/Model.cc?at=default&amp;fileviewer=file-view-default#Model.cc-198\" rel=\"nofollow\">this line, explicitly looking for &lt;model&gt; tags</a></p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-01-13T06:06:44.641287+00:00", "milestone": null, "updated_on": "2017-01-13T17:16:41.635845+00:00", "type": "issue", "id": 2139}