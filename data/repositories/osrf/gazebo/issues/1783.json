{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1783/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1783.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1783/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1783/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1783/unit_gpuraysensor_test-failed-inside"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1783/vote"}}, "reporter": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "title": "UNIT_GPURaySensor_TEST failed inside docker", "component": {"name": "testing", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/128164.json"}}}, "votes": 0, "watches": 2, "content": {"raw": "The tests in failing regularly in jenkins when running inside docker.\r\n\r\nhttp://build.osrfoundation.org/job/gazebo-default-devel-trusty-amd64-docker_test/66/consoleFull \r\n```\r\n215: Test timeout computed to be: 240\r\n215: [==========] Running 1 test from 1 test case.\r\n215: [----------] Global test environment set-up.\r\n215: [----------] 1 test from GPURaySensor_TEST\r\n215: [ RUN      ] GPURaySensor_TEST.CreateLaser\r\n215: \u001b[1;32m[Msg] \u001b[0m\u001b[1;32mWaiting for master.\u001b[0m\u001b[1;32m\r\n215: \u001b[0m\u001b[1;32m\u001b[0m\u001b[1;32m[Msg] \u001b[0m\u001b[1;32mConnected to gazebo master @ \u001b[0m\u001b[1;32mhttp://127.0.0.1:11345\u001b[0m\u001b[1;32m\r\n215: \u001b[0m\u001b[1;32m\u001b[0m\u001b[1;32m[Msg] \u001b[0m\u001b[1;32mPublicized address: \u001b[0m\u001b[1;32m172.17.0.200\u001b[0m\u001b[1;32m\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n[Dbg] [ServerFixture.cc:193] ServerFixture load in 0.7 seconds, timeout after 600 seconds\r\n215: [Err] [Scene.cc:2755] Light [sun] not found. Use topic ~/factory/light to spawn a new light.\r\n215: unknown file: Failure\r\n215: C++ exception with description \"OGRE EXCEPTION(7:InternalErrorException): Cannot create GL vertex buffer in GLHardwareVertexBuffer::GLHardwareVertexBuffer at /build/buildd/ogre-1.8-1.8.1+dfsg/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp (line 46)\" thrown in the test body.\r\n215: \u001b[0m\u001b[1;31m\u001b[0m\r\n215/230 Test #215: UNIT_GpuRaySensor_TEST .................***Exception: SegFault  0.89 sec\r\n```\r\n\r\nAs a workaround I tried to add an sleep after the Load of the world and that fixed the problem. When changing the sleep by a `WaitUntilSensorSpawn()` to wait for the ray sensor, that made the test to fail again. My best approach to the workaround has been to include: `WaitUntilSimTime(common::Time(1000), 100, 100);` to wait for the first second of SimTime. Not sure if there is any better alternative.\r\n\r\nThis could potentially hide a race condition on our testing infrastructure or in the sensor code itself.", "markup": "markdown", "html": "<p>The tests in failing regularly in jenkins when running inside docker.</p>\n<p><a href=\"http://build.osrfoundation.org/job/gazebo-default-devel-trusty-amd64-docker_test/66/consoleFull\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/job/gazebo-default-devel-trusty-amd64-docker_test/66/consoleFull</a> </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"n\">Test</span> <span class=\"n\">timeout</span> <span class=\"n\">computed</span> <span class=\"n\">to</span> <span class=\"n\">be</span><span class=\"o\">:</span> <span class=\"mi\">240</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[==========]</span> <span class=\"n\">Running</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"k\">case</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"n\">Global</span> <span class=\"n\">test</span> <span class=\"n\">environment</span> <span class=\"kd\">set</span><span class=\"o\">-</span><span class=\"n\">up</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"n\">GPURaySensor_TEST</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span> <span class=\"n\">RUN</span>      <span class=\"o\">]</span> <span class=\"n\">GPURaySensor_TEST</span><span class=\"o\">.</span><span class=\"na\">CreateLaser</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">m</span><span class=\"o\">[</span><span class=\"n\">Msg</span><span class=\"o\">]</span> <span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">mWaiting</span> <span class=\"k\">for</span> <span class=\"n\">master</span><span class=\"o\">.</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">m</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">m</span><span class=\"o\">[</span><span class=\"n\">Msg</span><span class=\"o\">]</span> <span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">mConnected</span> <span class=\"n\">to</span> <span class=\"n\">gazebo</span> <span class=\"n\">master</span> <span class=\"err\">@</span> <span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">mhttp</span><span class=\"o\">://</span><span class=\"mf\">127.0</span><span class=\"o\">.</span><span class=\"mf\">0.1</span><span class=\"o\">:</span><span class=\"mi\">11345</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">m</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">m</span><span class=\"o\">[</span><span class=\"n\">Msg</span><span class=\"o\">]</span> <span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">mPublicized</span> <span class=\"n\">address</span><span class=\"o\">:</span> <span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">m172</span><span class=\"o\">.</span><span class=\"mf\">17.0</span><span class=\"o\">.</span><span class=\"mi\">200</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">32</span><span class=\"n\">m</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"o\">[</span><span class=\"n\">Dbg</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">ServerFixture</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">193</span><span class=\"o\">]</span> <span class=\"n\">ServerFixture</span> <span class=\"n\">load</span> <span class=\"k\">in</span> <span class=\"mf\">0.7</span> <span class=\"n\">seconds</span><span class=\"o\">,</span> <span class=\"n\">timeout</span> <span class=\"n\">after</span> <span class=\"mi\">600</span> <span class=\"n\">seconds</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Scene</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">2755</span><span class=\"o\">]</span> <span class=\"n\">Light</span> <span class=\"o\">[</span><span class=\"n\">sun</span><span class=\"o\">]</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">.</span> <span class=\"n\">Use</span> <span class=\"n\">topic</span> <span class=\"o\">~/</span><span class=\"n\">factory</span><span class=\"o\">/</span><span class=\"n\">light</span> <span class=\"n\">to</span> <span class=\"n\">spawn</span> <span class=\"n\">a</span> <span class=\"k\">new</span> <span class=\"n\">light</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"n\">unknown</span> <span class=\"n\">file</span><span class=\"o\">:</span> <span class=\"n\">Failure</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"n\">C</span><span class=\"o\">++</span> <span class=\"n\">exception</span> <span class=\"k\">with</span> <span class=\"n\">description</span> <span class=\"s2\">&quot;OGRE EXCEPTION(7:InternalErrorException): Cannot create GL vertex buffer in GLHardwareVertexBuffer::GLHardwareVertexBuffer at /build/buildd/ogre-1.8-1.8.1+dfsg/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp (line 46)&quot;</span> <span class=\"n\">thrown</span> <span class=\"k\">in</span> <span class=\"n\">the</span> <span class=\"n\">test</span> <span class=\"n\">body</span><span class=\"o\">.</span>\n<span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">;</span><span class=\"mi\">31</span><span class=\"n\">m</span><span class=\"err\">\u001b</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">m</span>\n<span class=\"mi\">215</span><span class=\"o\">/</span><span class=\"mi\">230</span> <span class=\"n\">Test</span> <span class=\"err\">#</span><span class=\"mi\">215</span><span class=\"o\">:</span> <span class=\"n\">UNIT_GpuRaySensor_TEST</span> <span class=\"o\">.................***</span><span class=\"n\">Exception</span><span class=\"o\">:</span> <span class=\"n\">SegFault</span>  <span class=\"mf\">0.89</span> <span class=\"n\">sec</span>\n</pre></div>\n\n\n<p>As a workaround I tried to add an sleep after the Load of the world and that fixed the problem. When changing the sleep by a <code>WaitUntilSensorSpawn()</code> to wait for the ray sensor, that made the test to fail again. My best approach to the workaround has been to include: <code>WaitUntilSimTime(common::Time(1000), 100, 100);</code> to wait for the first second of SimTime. Not sure if there is any better alternative.</p>\n<p>This could potentially hide a race condition on our testing infrastructure or in the sensor code itself.</p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2015-11-16T13:46:41.362303+00:00", "milestone": null, "updated_on": "2016-09-14T19:44:00.744681+00:00", "type": "issue", "id": 1783}