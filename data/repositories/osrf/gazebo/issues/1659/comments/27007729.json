{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1659/comments/27007729.json"}, "html": {"href": "#!/osrf/gazebo/issues/1659#comment-27007729"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1659.json"}}, "type": "issue", "id": 1659, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Create separate plugin for propellors"}, "content": {"raw": "Thanks @nicolaerosia for the input.\nGood point about the aliasing issue. The simulation rates should be at least double arcucopter controller rates for reasonable simulation. But I would also like to double check that it's not a physics instability problem - applying force on a small mass element (like a propeller) potentially attached to a large inertia element (e.g. vehicle chassis) does give maximal coordinate engines a harder time to converge (e.g. ode/bullet). You could try rerun the test with large number of inner iterations (iters ~O(1e3)) or use generalized coordinate engine like simbody or dart (or bullet3) and see if that helps. Whether the problem is indeed a controller aliasing issue or not, we should create a unit test to capture the phenomenon. Can someone provide/suggest a simplified world with a scenario that reproduces the instability?\n\nImproving the plugin to model twisted blade geometry and account for different velocity at different radii will be great. The current implementation is a proof of concept plugin (i.e. dead-simple order of magnitude simulation), I was as surprised to see that the ardupilot controller can maintain stable flight as well as reproduce reasonable looking flight dynamics without the need for crazy aerodynamic coefficients :-) But now that the basic plugin approach works, it is a good time to plan on making improvements to the aerodynamic calculations, as well as adding more unit tests and documentation.\n\nMost of the time, simulation development is driven by application needs. So I suspect I'll be looking for specific flight scenarios that could use some improvements in simulation. For example, how important is blade twist and local transnational velocity relative to ambient flow field? How important is it to model downwash? Compressiblity effects? etc. etc.", "markup": "markdown", "html": "<p>Thanks @nicolaerosia for the input.\nGood point about the aliasing issue. The simulation rates should be at least double arcucopter controller rates for reasonable simulation. But I would also like to double check that it's not a physics instability problem - applying force on a small mass element (like a propeller) potentially attached to a large inertia element (e.g. vehicle chassis) does give maximal coordinate engines a harder time to converge (e.g. ode/bullet). You could try rerun the test with large number of inner iterations (iters ~O(1e3)) or use generalized coordinate engine like simbody or dart (or bullet3) and see if that helps. Whether the problem is indeed a controller aliasing issue or not, we should create a unit test to capture the phenomenon. Can someone provide/suggest a simplified world with a scenario that reproduces the instability?</p>\n<p>Improving the plugin to model twisted blade geometry and account for different velocity at different radii will be great. The current implementation is a proof of concept plugin (i.e. dead-simple order of magnitude simulation), I was as surprised to see that the ardupilot controller can maintain stable flight as well as reproduce reasonable looking flight dynamics without the need for crazy aerodynamic coefficients :-) But now that the basic plugin approach works, it is a good time to plan on making improvements to the aerodynamic calculations, as well as adding more unit tests and documentation.</p>\n<p>Most of the time, simulation development is driven by application needs. So I suspect I'll be looking for specific flight scenarios that could use some improvements in simulation. For example, how important is blade twist and local transnational velocity relative to ambient flow field? How important is it to model downwash? Compressiblity effects? etc. etc.</p>", "type": "rendered"}, "created_on": "2016-04-14T20:41:46.732072+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 27007729}