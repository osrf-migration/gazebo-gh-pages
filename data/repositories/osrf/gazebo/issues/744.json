{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/744/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/744.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/744/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/744/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/744/problems-migrating-plugin-from-gazebo-15"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/744/vote"}}, "reporter": {"display_name": "Piyush Khandelwal", "uuid": "{0aafe920-14b3-4b46-927d-421c6f4e90f2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0aafe920-14b3-4b46-927d-421c6f4e90f2%7D"}, "html": {"href": "https://bitbucket.org/%7B0aafe920-14b3-4b46-927d-421c6f4e90f2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/4c0a1652789850a7953553e6d883eb06d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPK-1.png"}}, "nickname": "piyushk", "type": "user", "account_id": "557058:f6cfe420-cf98-45d4-b1ff-8a554ca13fd0"}, "title": "Problems migrating plugin from Gazebo 1.5 to Gazebo 1.8.6", "component": null, "votes": 0, "watches": 2, "content": {"raw": "Crossposted from here: https://github.com/osrf/gazebo_ros_pkgs/issues/21\r\n\r\nI have a simple differential drive plugin here based on the original differential drive plugin from the erratic_robot package: https://github.com/utexas-bwi/segbot_simulator/blob/master/segbot_gazebo_plugins/src/diff_drive_plugin.cc\r\n\r\nThis works as expected with simulator_gazebo-1.7.12 (Gazebo 1.5), but [GetWorldPose()](https://github.com/utexas-bwi/segbot_simulator/blob/master/segbot_gazebo_plugins/src/diff_drive_plugin.cc#L271) seems to be returning ~0 for position with gazebo_ros_pkgs (Gazebo 1.8.6). The position does not change even slightly over time, and the orientation changes somewhat arbitrarily. On the other hand the world linear and angular velocities are correct (but incorrectly transform to base_footprint as the orientation is arbitrary)\r\n\r\n```\r\npose: \r\n  pose: \r\n    position: \r\n      x: 6.91499350184e-310\r\n      y: 6.91499350199e-310\r\n      z: 0.0\r\n```\r\n\r\nOn the other hand `/gazebo/get_model/state` seems to be returning the correct value. Since it uses the `getWorldPose` under the hood, I am not sure what the difference is.\r\n\r\nPlease let me know if I should provide additional information to help debug this issue.", "markup": "markdown", "html": "<p>Crossposted from here: <a href=\"https://github.com/osrf/gazebo_ros_pkgs/issues/21\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/osrf/gazebo_ros_pkgs/issues/21</a></p>\n<p>I have a simple differential drive plugin here based on the original differential drive plugin from the erratic_robot package: <a href=\"https://github.com/utexas-bwi/segbot_simulator/blob/master/segbot_gazebo_plugins/src/diff_drive_plugin.cc\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/utexas-bwi/segbot_simulator/blob/master/segbot_gazebo_plugins/src/diff_drive_plugin.cc</a></p>\n<p>This works as expected with simulator_gazebo-1.7.12 (Gazebo 1.5), but <a data-is-external-link=\"true\" href=\"https://github.com/utexas-bwi/segbot_simulator/blob/master/segbot_gazebo_plugins/src/diff_drive_plugin.cc#L271\" rel=\"nofollow\">GetWorldPose()</a> seems to be returning ~0 for position with gazebo_ros_pkgs (Gazebo 1.8.6). The position does not change even slightly over time, and the orientation changes somewhat arbitrarily. On the other hand the world linear and angular velocities are correct (but incorrectly transform to base_footprint as the orientation is arbitrary)</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">pose</span><span class=\"o\">:</span> \n  <span class=\"n\">pose</span><span class=\"o\">:</span> \n    <span class=\"n\">position</span><span class=\"o\">:</span> \n      <span class=\"n\">x</span><span class=\"o\">:</span> <span class=\"mf\">6.91499350184</span><span class=\"n\">e</span><span class=\"o\">-</span><span class=\"mi\">310</span>\n      <span class=\"n\">y</span><span class=\"o\">:</span> <span class=\"mf\">6.91499350199</span><span class=\"n\">e</span><span class=\"o\">-</span><span class=\"mi\">310</span>\n      <span class=\"n\">z</span><span class=\"o\">:</span> <span class=\"mf\">0.0</span>\n</pre></div>\n\n\n<p>On the other hand <code>/gazebo/get_model/state</code> seems to be returning the correct value. Since it uses the <code>getWorldPose</code> under the hood, I am not sure what the difference is.</p>\n<p>Please let me know if I should provide additional information to help debug this issue.</p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-06-19T16:02:35.050879+00:00", "milestone": null, "updated_on": "2016-09-14T19:44:37.407293+00:00", "type": "issue", "id": 744}