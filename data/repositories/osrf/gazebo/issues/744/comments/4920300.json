{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/744/comments/4920300.json"}, "html": {"href": "#!/osrf/gazebo/issues/744#comment-4920300"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/744.json"}}, "type": "issue", "id": 744, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Problems migrating plugin from Gazebo 1.5 to Gazebo 1.8.6"}, "content": {"raw": "@hsu You were correct. After removing `ros-groovy-simulator-gazebo`, I immediately found 2 errors with my configuration (both attributed to user error :():\n\n* I forgot to update [CMakeLists.txt](https://github.com/utexas-bwi/segbot_simulator/blob/gazebo-ros-pkg-migration/segbot_gazebo_plugins/CMakeLists.txt) inside [segbot_gazebo_plugins](https://github.com/utexas-bwi/segbot_simulator/tree/gazebo-ros-pkg-migration/segbot_gazebo_plugins) and was using the headers from the gazebo 1.5 installation, which were automatically picked up from the system installation.\n* I was using spawn_model from simulator_gazebo instead of [gazebo_ros_pkgs](https://github.com/osrf/gazebo_ros_pkgs).\n\nAfter fixing both these errors and verifying that the plugin ran correctly with [gazebo_ros_pkgs](https://github.com/osrf/gazebo_ros_pkgs), I reinstalled `ros-groovy-simulator-gazebo`. Everything continued to work correctly (as expected originally). I guess it is just safer removing `ros-groovy-simulator-gazebo` to make sure nothing is missed during migration.\n\nI found one issue after successful migration of [diff_drive_plugin.cc](https://github.com/utexas-bwi/segbot_simulator/blob/gazebo-ros-pkg-migration/segbot_gazebo_plugins/src/diff_drive_plugin.cc). Another plugin in the package [gazebo_ros_video.cc](https://github.com/utexas-bwi/segbot_simulator/blob/gazebo-ros-pkg-migration/segbot_gazebo_plugins/src/gazebo_ros_video.cc) did not compile:\n```\nIn file included from /usr/include/gazebo-1.8/gazebo/rendering/GUIOverlay.hh:25:0,\n                 from /usr/include/gazebo-1.8/gazebo/rendering/rendering.hh:15,\n                 from /nishome/piyushk/navigation_ros/rosbuild_ws/segbot_simulator/segbot_gazebo_plugins/include/segbot_gazebo_plugins/gazebo_ros_video.h:37,\n                 from /nishome/piyushk/navigation_ros/rosbuild_ws/segbot_simulator/segbot_gazebo_plugins/src/gazebo_ros_video.cc:28:\n/usr/include/gazebo-1.8/gazebo/rendering/cegui.h:26:25: fatal error: CEGUI/CEGUI.h: No such file or directory\n```\n\nI have the following questions (which I guess are still relevant to the original bug report title):\n\n* It seems like Gazebo 1.8.6 has shipped with a [gazebo_config.h](#!/osrf/gazebo/src/3750d649321d557d3e5a9350d807d6260534f506/cmake/gazebo_config.h.in?at=default) with `HAVE_CEGUI` set to true. I suspect it might have been available on the build machine, but I don't have it on mine - breaking the system install.\n* To use Gazebo through CMake, I also had to include the header and library paths to OGRE (see [CMakeLists.txt](https://github.com/utexas-bwi/segbot_simulator/blob/gazebo-ros-pkg-migration/segbot_gazebo_plugins/CMakeLists.txt)). Is there some way to avoid this?\n\nThanks for spending time on this!\n\n\n", "markup": "markdown", "html": "<p>@hsu You were correct. After removing <code>ros-groovy-simulator-gazebo</code>, I immediately found 2 errors with my configuration (both attributed to user error :():</p>\n<ul>\n<li>I forgot to update <a data-is-external-link=\"true\" href=\"https://github.com/utexas-bwi/segbot_simulator/blob/gazebo-ros-pkg-migration/segbot_gazebo_plugins/CMakeLists.txt\" rel=\"nofollow\">CMakeLists.txt</a> inside <a data-is-external-link=\"true\" href=\"https://github.com/utexas-bwi/segbot_simulator/tree/gazebo-ros-pkg-migration/segbot_gazebo_plugins\" rel=\"nofollow\">segbot_gazebo_plugins</a> and was using the headers from the gazebo 1.5 installation, which were automatically picked up from the system installation.</li>\n<li>I was using spawn_model from simulator_gazebo instead of <a data-is-external-link=\"true\" href=\"https://github.com/osrf/gazebo_ros_pkgs\" rel=\"nofollow\">gazebo_ros_pkgs</a>.</li>\n</ul>\n<p>After fixing both these errors and verifying that the plugin ran correctly with <a data-is-external-link=\"true\" href=\"https://github.com/osrf/gazebo_ros_pkgs\" rel=\"nofollow\">gazebo_ros_pkgs</a>, I reinstalled <code>ros-groovy-simulator-gazebo</code>. Everything continued to work correctly (as expected originally). I guess it is just safer removing <code>ros-groovy-simulator-gazebo</code> to make sure nothing is missed during migration.</p>\n<p>I found one issue after successful migration of <a data-is-external-link=\"true\" href=\"https://github.com/utexas-bwi/segbot_simulator/blob/gazebo-ros-pkg-migration/segbot_gazebo_plugins/src/diff_drive_plugin.cc\" rel=\"nofollow\">diff_drive_plugin.cc</a>. Another plugin in the package <a data-is-external-link=\"true\" href=\"https://github.com/utexas-bwi/segbot_simulator/blob/gazebo-ros-pkg-migration/segbot_gazebo_plugins/src/gazebo_ros_video.cc\" rel=\"nofollow\">gazebo_ros_video.cc</a> did not compile:</p>\n<div class=\"codehilite\"><pre><span></span>In file included from /usr/include/gazebo-1.8/gazebo/rendering/GUIOverlay.hh:25:0,\n                 from /usr/include/gazebo-1.8/gazebo/rendering/rendering.hh:15,\n                 from /nishome/piyushk/navigation_ros/rosbuild_ws/segbot_simulator/segbot_gazebo_plugins/include/segbot_gazebo_plugins/gazebo_ros_video.h:37,\n                 from /nishome/piyushk/navigation_ros/rosbuild_ws/segbot_simulator/segbot_gazebo_plugins/src/gazebo_ros_video.cc:28:\n/usr/include/gazebo-1.8/gazebo/rendering/cegui.h:26:25: fatal error: CEGUI/CEGUI.h: No such file or directory\n</pre></div>\n\n\n<p>I have the following questions (which I guess are still relevant to the original bug report title):</p>\n<ul>\n<li>It seems like Gazebo 1.8.6 has shipped with a <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/3750d649321d557d3e5a9350d807d6260534f506/cmake/gazebo_config.h.in?at=default\" rel=\"nofollow\">gazebo_config.h</a> with <code>HAVE_CEGUI</code> set to true. I suspect it might have been available on the build machine, but I don't have it on mine - breaking the system install.</li>\n<li>To use Gazebo through CMake, I also had to include the header and library paths to OGRE (see <a data-is-external-link=\"true\" href=\"https://github.com/utexas-bwi/segbot_simulator/blob/gazebo-ros-pkg-migration/segbot_gazebo_plugins/CMakeLists.txt\" rel=\"nofollow\">CMakeLists.txt</a>). Is there some way to avoid this?</li>\n</ul>\n<p>Thanks for spending time on this!</p>", "type": "rendered"}, "created_on": "2013-06-20T21:32:04.325556+00:00", "user": {"display_name": "Piyush Khandelwal", "uuid": "{0aafe920-14b3-4b46-927d-421c6f4e90f2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0aafe920-14b3-4b46-927d-421c6f4e90f2%7D"}, "html": {"href": "https://bitbucket.org/%7B0aafe920-14b3-4b46-927d-421c6f4e90f2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/4c0a1652789850a7953553e6d883eb06d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPK-1.png"}}, "nickname": "piyushk", "type": "user", "account_id": "557058:f6cfe420-cf98-45d4-b1ff-8a554ca13fd0"}, "updated_on": null, "type": "issue_comment", "id": 4920300}