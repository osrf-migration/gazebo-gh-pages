{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/15482005.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-15482005"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "This can be observed by running the [test/worlds/world_step.world](#!/osrf/gazebo/src/default/test/worlds/world_step.world) world file and watching the double pendulum.", "markup": "markdown", "html": "<p>This can be observed by running the <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/default/test/worlds/world_step.world\" rel=\"nofollow\">test/worlds/world_step.world</a> world file and watching the double pendulum.</p>", "type": "rendered"}, "created_on": "2015-02-04T21:55:40.469833+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 15482005}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/15482019.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-15482019"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "@hsu can you try running the world file and give some thoughts about what might be the issue?", "markup": "markdown", "html": "<p>@hsu can you try running the world file and give some thoughts about what might be the issue?</p>", "type": "rendered"}, "created_on": "2015-02-04T21:56:31.847326+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 15482019}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/15510430.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-15510430"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "Actually, it appears that the double pendulum model works for a while if it has an initial rotation, though it eventually will fail. Apply the following diff to see the result:\n~~~\ndiff -r 24e80279f9a5 test/worlds/world_step.world\n--- a/test/worlds/world_step.world\tWed Feb 04 14:58:50 2015 -0800\n+++ b/test/worlds/world_step.world\tThu Feb 05 17:48:41 2015 -0800\n@@ -55,7 +55,8 @@\n       </visual>\n     </link>\n   </model>\n- <model name=\"double_pendulum_with_base\">\n+  <model name=\"double_pendulum_with_base\">\n+    <pose>0 0 0  0 0 1.57</pose>\n     <link name=\"base\">\n       <inertial>\n         <mass>100</mass>\n~~~\nMaybe there is something numerically problematic about simulating the double pendulum without rotating it?", "markup": "markdown", "html": "<p>Actually, it appears that the double pendulum model works for a while if it has an initial rotation, though it eventually will fail. Apply the following diff to see the result:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 24e80279f9a5 test/worlds/world_step.world</span>\n<span class=\"gd\">--- a/test/worlds/world_step.world  Wed Feb 04 14:58:50 2015 -0800</span>\n<span class=\"gi\">+++ b/test/worlds/world_step.world  Thu Feb 05 17:48:41 2015 -0800</span>\n<span class=\"gu\">@@ -55,7 +55,8 @@</span>\n       &lt;/visual&gt;\n     &lt;/link&gt;\n   &lt;/model&gt;\n<span class=\"gd\">- &lt;model name=&quot;double_pendulum_with_base&quot;&gt;</span>\n<span class=\"gi\">+  &lt;model name=&quot;double_pendulum_with_base&quot;&gt;</span>\n<span class=\"gi\">+    &lt;pose&gt;0 0 0  0 0 1.57&lt;/pose&gt;</span>\n     &lt;link name=&quot;base&quot;&gt;\n       &lt;inertial&gt;\n         &lt;mass&gt;100&lt;/mass&gt;\n</pre></div>\n\n\n<p>Maybe there is something numerically problematic about simulating the double pendulum without rotating it?</p>", "type": "rendered"}, "created_on": "2015-02-06T01:51:13.495722+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 15510430}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/15518380.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-15518380"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "Some things are causing the system to arrive at NaN's. one thing to check is if the bilateral CFM's are being set properly.", "markup": "markdown", "html": "<p>Some things are causing the system to arrive at NaN's. one thing to check is if the bilateral CFM's are being set properly.</p>", "type": "rendered"}, "created_on": "2015-02-06T10:55:43.566806+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 15518380}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/15578379.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-15578379"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "There is a dRecip to compute the reciprocal operation inside function dLCP::transfer_i_to_C inside step.cpp that cause the NaN. \nThere is no check on when the denominator is numerically 0, which results in \"Inf\". The \"Inf\" is multiplied with another numerically 0, and cause the NaN. \n", "markup": "markdown", "html": "<p>There is a dRecip to compute the reciprocal operation inside function dLCP::transfer_i_to_C inside step.cpp that cause the NaN. \nThere is no check on when the denominator is numerically 0, which results in \"Inf\". The \"Inf\" is multiplied with another numerically 0, and cause the NaN. </p>", "type": "rendered"}, "created_on": "2015-02-09T18:44:28.104217+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": null, "type": "issue_comment", "id": 15578379}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/15578504.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-15578504"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "@scpeters @hsu    I haven't fully understand the Dantzig implementation yet, so no idea what would be a good way to fix this. Maybe check when the denominator is 0, add a relaxation positive small number? Would you please suggest a way to modify? \n\nUpdate: the transfer_i_to_C is inside the lcp.cpp file ", "markup": "markdown", "html": "<p>@scpeters @hsu    I haven't fully understand the Dantzig implementation yet, so no idea what would be a good way to fix this. Maybe check when the denominator is 0, add a relaxation positive small number? Would you please suggest a way to modify? </p>\n<p>Update: the transfer_i_to_C is inside the lcp.cpp file </p>", "type": "rendered"}, "created_on": "2015-02-09T18:50:49.260588+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": null, "type": "issue_comment", "id": 15578504}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/15580663.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-15580663"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "Are you referring to `dRecip` calls [here](#!/osrf/gazebo/src/4d0adc54a0b6116606ae7e4fee293971c05f2511/deps/opende/src/lcp.cpp?at=default#cl-537) and [here](#!/osrf/gazebo/src/4d0adc54a0b6116606ae7e4fee293971c05f2511/deps/opende/src/lcp.cpp?at=default#cl-585)? Could it be `AROW` is zero because CFM is zero?", "markup": "markdown", "html": "<p>Are you referring to <code>dRecip</code> calls <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/4d0adc54a0b6116606ae7e4fee293971c05f2511/deps/opende/src/lcp.cpp?at=default#cl-537\" rel=\"nofollow\">here</a> and <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/4d0adc54a0b6116606ae7e4fee293971c05f2511/deps/opende/src/lcp.cpp?at=default#cl-585\" rel=\"nofollow\">here</a>? Could it be <code>AROW</code> is zero because CFM is zero?</p>", "type": "rendered"}, "created_on": "2015-02-09T20:41:09.136099+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2015-02-27T22:49:20.053881+00:00", "type": "issue_comment", "id": 15580663}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/15583817.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-15583817"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "Thanks @hsu  for pointing out the cfm. I think the issue is fixed after test. The cfm is polluted during computation of matrix A, and that polluted one was used for the following parts which caused the NaNs. I created a cfm_tmp to avoid the change of cfm, which corrects the \"NaNs\" in the returned solution *lambda*\n ", "markup": "markdown", "html": "<p>Thanks @hsu  for pointing out the cfm. I think the issue is fixed after test. The cfm is polluted during computation of matrix A, and that polluted one was used for the following parts which caused the NaNs. I created a cfm_tmp to avoid the change of cfm, which corrects the \"NaNs\" in the returned solution <em>lambda</em></p>", "type": "rendered"}, "created_on": "2015-02-10T00:11:02.131366+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": null, "type": "issue_comment", "id": 15583817}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/15741799.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-15741799"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "I just added a failing test in branch `issue_1437_test` (f611df837745), based off the test using `test/worlds/revolute_joint_test.world`. It runs the same test, but sets the solver to `world` at the beginning of the test.", "markup": "markdown", "html": "<p>I just added a failing test in branch <code>issue_1437_test</code> (<a href=\"#!/osrf/gazebo/commits/f611df837745\" rel=\"nofollow\" class=\"ap-connect-link\">f611df837745</a>), based off the test using <code>test/worlds/revolute_joint_test.world</code>. It runs the same test, but sets the solver to <code>world</code> at the beginning of the test.</p>", "type": "rendered"}, "created_on": "2015-02-17T09:42:28.385054+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 15741799}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/16186920.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-16186920"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "Just following up on this issue... given [pull request to change default cfm is declined](https://bitbucket.org/osrf/sdformat/pull-request/144/change-default-cfm-parameter-value-from-0/diff), is there plan to check denominators for `dRecip` calls [here](#!/osrf/gazebo/src/4d0adc54a0b6116606ae7e4fee293971c05f2511/deps/opende/src/lcp.cpp?at=default#cl-537) and [here](#!/osrf/gazebo/src/4d0adc54a0b6116606ae7e4fee293971c05f2511/deps/opende/src/lcp.cpp?at=default#cl-585) to prevent divide-by-zero errors?", "markup": "markdown", "html": "<p>Just following up on this issue... given <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/sdformat/pull-request/144/change-default-cfm-parameter-value-from-0/diff\" rel=\"nofollow\">pull request to change default cfm is declined</a>, is there plan to check denominators for <code>dRecip</code> calls <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/4d0adc54a0b6116606ae7e4fee293971c05f2511/deps/opende/src/lcp.cpp?at=default#cl-537\" rel=\"nofollow\">here</a> and <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/4d0adc54a0b6116606ae7e4fee293971c05f2511/deps/opende/src/lcp.cpp?at=default#cl-585\" rel=\"nofollow\">here</a> to prevent divide-by-zero errors?</p>", "type": "rendered"}, "created_on": "2015-03-09T20:17:20.678830+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 16186920}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/16187092.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-16187092"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "I added two lines [here](https://bitbucket.org/rosebudflyaway/gazebo/src/f2c8408f959803c8529d8a8a72f3b6b31e32244c/deps/opende/src/step.cpp?at=asme_ying#cl-402), which should avoid the divide-by-zero errors at the two places of `dRecip`. I will make a pull request on this.  ", "markup": "markdown", "html": "<p>I added two lines <a data-is-external-link=\"true\" href=\"https://bitbucket.org/rosebudflyaway/gazebo/src/f2c8408f959803c8529d8a8a72f3b6b31e32244c/deps/opende/src/step.cpp?at=asme_ying#cl-402\" rel=\"nofollow\">here</a>, which should avoid the divide-by-zero errors at the two places of <code>dRecip</code>. I will make a pull request on this.  </p>", "type": "rendered"}, "created_on": "2015-03-09T20:28:16.200980+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": null, "type": "issue_comment", "id": 16187092}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/16187329.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-16187329"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "great! thanks. Looking at [the proposed change](https://bitbucket.org/rosebudflyaway/gazebo/src/f2c8408f959803c8529d8a8a72f3b6b31e32244c/deps/opende/src/step.cpp?at=asme_ying#cl-402), it modifies global cfm regardless what user specifies; maybe a better fix is to catch `dRecip` calls in those 2 or 4 instances in `lcp.cpp` and prevent them from dividing by zero and spawning, infecting solution with NaNs?  This is an intermediate solution that gets around dividing by zero by relaxing specific constraints. Down the road, an even better solution might be to determine why the direction of the step is infinite, and deal with it *appropriately*...", "markup": "markdown", "html": "<p>great! thanks. Looking at <a data-is-external-link=\"true\" href=\"https://bitbucket.org/rosebudflyaway/gazebo/src/f2c8408f959803c8529d8a8a72f3b6b31e32244c/deps/opende/src/step.cpp?at=asme_ying#cl-402\" rel=\"nofollow\">the proposed change</a>, it modifies global cfm regardless what user specifies; maybe a better fix is to catch <code>dRecip</code> calls in those 2 or 4 instances in <code>lcp.cpp</code> and prevent them from dividing by zero and spawning, infecting solution with NaNs?  This is an intermediate solution that gets around dividing by zero by relaxing specific constraints. Down the road, an even better solution might be to determine why the direction of the step is infinite, and deal with it <em>appropriately</em>...</p>", "type": "rendered"}, "created_on": "2015-03-09T20:45:23.468074+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2015-03-09T20:48:13.784157+00:00", "type": "issue_comment", "id": 16187329}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/16187395.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-16187395"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-03-09T20:49:08.700216+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 16187395}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/16244389.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-16244389"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "I made a [pull request](#!/osrf/gazebo/pull-request/1507/fix-the-drecip-operation-for-when/diff) on this issue. The `dRecip` operation [here](#!/osrf/gazebo/src/4d0adc54a0b6116606ae7e4fee293971c05f2511/deps/opende/src/lcp.cpp?at=default#cl-537) does matters for the double pendulum stability, not only the one two lines below. Similar for the other case. I would look into this further to get an idea why direction of step is infinite. ", "markup": "markdown", "html": "<p>I made a <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/pull-request/1507/fix-the-drecip-operation-for-when/diff\" rel=\"nofollow\">pull request</a> on this issue. The <code>dRecip</code> operation <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/4d0adc54a0b6116606ae7e4fee293971c05f2511/deps/opende/src/lcp.cpp?at=default#cl-537\" rel=\"nofollow\">here</a> does matters for the double pendulum stability, not only the one two lines below. Similar for the other case. I would look into this further to get an idea why direction of step is infinite. </p>", "type": "rendered"}, "created_on": "2015-03-11T23:09:33.702379+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": null, "type": "issue_comment", "id": 16244389}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/16869661.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-16869661"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "backported to 4.1 in pull request #1545", "markup": "markdown", "html": "<p>backported to 4.1 in <a href=\"#!/osrf/gazebo/pull-requests/1545/check-for-divide-by-zero-in-ode-worldstep\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1545</a></p>", "type": "rendered"}, "created_on": "2015-03-24T20:47:44.827081+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 16869661}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/16894656.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-16894656"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": "pull request #1507, pull request #1545, and 3cf0de2b22eb", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/pull-requests/1507/fix-the-drecip-operation-for-when\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1507</a>, <a href=\"#!/osrf/gazebo/pull-requests/1545/check-for-divide-by-zero-in-ode-worldstep\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1545</a>, and <a href=\"#!/osrf/gazebo/commits/3cf0de2b22eb\" rel=\"nofollow\" class=\"ap-connect-link\">3cf0de2b22eb</a></p>", "type": "rendered"}, "created_on": "2015-03-25T18:18:04.808177+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 16894656}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/30610392.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-30610392"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2016-09-14T19:22:30.340373+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 30610392}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437/comments/30612485.json"}, "html": {"href": "#!/osrf/gazebo/issues/1437#comment-30612485"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1437.json"}}, "type": "issue", "id": 1437, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "world step fails to solve bilateral constraints"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2016-09-14T19:44:47.429405+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 30612485}], "page": 1, "size": 18}