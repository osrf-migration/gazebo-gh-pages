cmake_minimum_required(VERSION 2.8 FATAL_ERROR)
find_package(roscpp REQUIRED)
find_package(std_msgs REQUIRED)
include_directories(${roscpp_INCLUDE_DIRS})
include_directories(${std_msgs_INCLUDE_DIRS})


# Find the Ignition_Transport library
find_package(ignition-transport1 QUIET REQUIRED)
find_package(ignition-math2 REQUIRED)
# Find Gazebo
find_package(gazebo REQUIRED)

set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${GAZEBO_CXX_FLAGS} ${IGNITION-TRANSPORT_CXX_FLAGS}")
include_directories(${GAZEBO_INCLUDE_DIRS} ${IGNITION-TRANSPORT_INCLUDE_DIRS} ${IGNITION-MATH_INCLUDE_DIRS})

link_directories(${GAZEBO_LIBRARY_DIRS} ${IGNITION-TRANSPORT_LIBRARY_DIRS})


# Message generation
add_subdirectory(msgs)
set_source_files_properties(${PROTO_SRC} ${PROTO_HEADER}
                            PROPERTIES GENERATED TRUE)
include_directories(${CMAKE_BINARY_DIR})

# Generate examples
add_executable(velodyne_plugin velodyne_plugin.cc ${PROTO_SRC} )
#add_library(velodyne_plugin SHARED velodyne_plugin.cc  )
target_link_libraries(velodyne_plugin ${GAZEBO_LIBRARIES} ${roscpp_LIBRARIES}  ${IGNITION-TRANSPORT_LIBRARIES} ${IGNITION-MATH_LIBRARIES}  )
add_dependencies(velodyne_plugin protobuf_compilation)



