{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/480/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/480.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/480/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/480/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/480/bullet-spheres-roll-differently-along"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/480/vote"}}, "reporter": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "title": "Bullet: spheres roll differently along principal axes than on diagonals", "component": null, "votes": 0, "watches": 1, "content": {"raw": "In the SpawnDropCoGOffset test, adding spheres with c.o.g. offsets along the x or y axis and then dropping them will lead to the spheres rolling without slip back and forth along the direction of the offset in both ODE and Bullet.\r\n\r\nWhen adding spheres with c.o.g. offsets along a diagonal (ie. both x and y offset are nonzero, as in 687a88c), the spheres roll differently in Bullet, though in ODE they roll back and forth in the direction of the offset.\r\n\r\nVideo: [diagonal rolling in ODE](https://vimeo.com/58954332)\r\n\r\nVideo: [diagonal rolling in Bullet](https://vimeo.com/58954336)\r\n\r\nSummary of test failure from 687a88c (note that failure of JointDamping test is captured in issue #479).\r\n~~~\r\n[ RUN      ] PhysicsTest.SpawnDropCoGOffsetBullet\r\nGazebo multi-robot simulator, version 1.4.6\r\n...\r\nDbg Check ground contact and roll without slip of model small_centered_sphere\r\nDbg Check ground contact and roll without slip of model large_centered_sphere\r\nDbg Check ground contact and roll without slip of model lowered_cog_sphere\r\nDbg Check ground contact and roll without slip of model raised_cog_sphere\r\nDbg Check ground contact and roll without slip of model cog_y_offset_sphere\r\nDbg Check ground contact and roll without slip of model cog_x_offset_sphere\r\n\r\nDbg Check ground contact and roll without slip of model cog_xy_45deg_offset_sphere\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:408: Failure\r\nThe difference between vel2.z and 0 is 0.10481198132038116, which exceeds 1e-2, where\r\nvel2.z evaluates to 0.10481198132038116,\r\n0 evaluates to 0, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:435: Failure\r\nThe difference between vel1.x and vel2.y*radius is 0.52470672130584717, which exceeds 1e-2, where\r\nvel1.x evaluates to 2.1195347309112549,\r\nvel2.y*radius evaluates to 2.6442414522171021, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:436: Failure\r\nThe difference between vel1.y and -vel2.x*radius is 1.1582590341567993, which exceeds 1e-2, where\r\nvel1.y evaluates to 2.1328589916229248,\r\n-vel2.x*radius evaluates to 3.2911180257797241, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:442: Failure\r\nThe difference between vel3.x and 0 is 0.52470660209655762, which exceeds 1e-2, where\r\nvel3.x evaluates to -0.52470660209655762,\r\n0 evaluates to 0, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:443: Failure\r\nThe difference between vel3.y and 0 is 1.1582592725753784, which exceeds 1e-2, where\r\nvel3.y evaluates to -1.1582592725753784,\r\n0 evaluates to 0, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:448: Failure\r\nThe difference between vel4.y and 2*vel1.y is 1.158259391784668, which exceeds 1e-2, where\r\nvel4.y evaluates to 5.4239773750305176,\r\n2*vel1.y evaluates to 4.2657179832458496, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:449: Failure\r\nThe difference between vel4.x and 2*vel1.x is 0.52470684051513672, which exceeds 1e-2, where\r\nvel4.x evaluates to 4.7637763023376465,\r\n2*vel1.x evaluates to 4.2390694618225098, and\r\n1e-2 evaluates to 0.01.\r\n\r\n\r\nDbg Check ground contact and roll without slip of model cog_xy_-30deg_offset_sphere\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:408: Failure\r\nThe difference between vel2.z and 0 is 0.048208430409431458, which exceeds 1e-2, where\r\nvel2.z evaluates to -0.048208430409431458,\r\n0 evaluates to 0, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:435: Failure\r\nThe difference between vel1.x and vel2.y*radius is 0.47043097019195557, which exceeds 1e-2, where\r\nvel1.x evaluates to 2.5810449123382568,\r\nvel2.y*radius evaluates to 3.0514758825302124, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:436: Failure\r\nThe difference between vel1.y and -vel2.x*radius is 0.53083974123001099, which exceeds 1e-2, where\r\nvel1.y evaluates to -1.532335638999939,\r\n-vel2.x*radius evaluates to -2.06317538022995, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:442: Failure\r\nThe difference between vel3.x and 0 is 0.47043097019195557, which exceeds 1e-2, where\r\nvel3.x evaluates to -0.47043097019195557,\r\n0 evaluates to 0, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:443: Failure\r\nThe difference between vel3.y and 0 is 0.53083968162536621, which exceeds 1e-2, where\r\nvel3.y evaluates to 0.53083968162536621,\r\n0 evaluates to 0, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:448: Failure\r\nThe difference between vel4.y and 2*vel1.y is 0.53083968162536621, which exceeds 1e-2, where\r\nvel4.y evaluates to -3.5955109596252441,\r\n2*vel1.y evaluates to -3.0646712779998779, and\r\n1e-2 evaluates to 0.01.\r\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:449: Failure\r\nThe difference between vel4.x and 2*vel1.x is 0.47043085098266602, which exceeds 1e-2, where\r\nvel4.x evaluates to 5.6325206756591797,\r\n2*vel1.x evaluates to 5.1620898246765137, and\r\n1e-2 evaluates to 0.01.\r\n[  FAILED  ] PhysicsTest.SpawnDropCoGOffsetBullet (3954 ms)\r\n~~~", "markup": "markdown", "html": "<p>In the SpawnDropCoGOffset test, adding spheres with c.o.g. offsets along the x or y axis and then dropping them will lead to the spheres rolling without slip back and forth along the direction of the offset in both ODE and Bullet.</p>\n<p>When adding spheres with c.o.g. offsets along a diagonal (ie. both x and y offset are nonzero, as in <a href=\"#!/osrf/gazebo/commits/687a88c\" rel=\"nofollow\" class=\"ap-connect-link\">687a88c</a>), the spheres roll differently in Bullet, though in ODE they roll back and forth in the direction of the offset.</p>\n<p>Video: <a data-is-external-link=\"true\" href=\"https://vimeo.com/58954332\" rel=\"nofollow\">diagonal rolling in ODE</a></p>\n<p>Video: <a data-is-external-link=\"true\" href=\"https://vimeo.com/58954336\" rel=\"nofollow\">diagonal rolling in Bullet</a></p>\n<p>Summary of test failure from <a href=\"#!/osrf/gazebo/commits/687a88c\" rel=\"nofollow\" class=\"ap-connect-link\">687a88c</a> (note that failure of JointDamping test is captured in issue <a href=\"#!/osrf/gazebo/issues/479/jointdamping-physics-regression-test-is\" rel=\"nofollow\" title=\"JointDamping physics regression test is brittle\" class=\"ap-connect-link\"><s>#479</s></a>).</p>\n<div class=\"codehilite\"><pre><span></span>[ RUN      ] PhysicsTest.SpawnDropCoGOffsetBullet\nGazebo multi-robot simulator, version 1.4.6\n...\nDbg Check ground contact and roll without slip of model small_centered_sphere\nDbg Check ground contact and roll without slip of model large_centered_sphere\nDbg Check ground contact and roll without slip of model lowered_cog_sphere\nDbg Check ground contact and roll without slip of model raised_cog_sphere\nDbg Check ground contact and roll without slip of model cog_y_offset_sphere\nDbg Check ground contact and roll without slip of model cog_x_offset_sphere\n\nDbg Check ground contact and roll without slip of model cog_xy_45deg_offset_sphere\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:408: Failure\nThe difference between vel2.z and 0 is 0.10481198132038116, which exceeds 1e-2, where\nvel2.z evaluates to 0.10481198132038116,\n0 evaluates to 0, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:435: Failure\nThe difference between vel1.x and vel2.y*radius is 0.52470672130584717, which exceeds 1e-2, where\nvel1.x evaluates to 2.1195347309112549,\nvel2.y*radius evaluates to 2.6442414522171021, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:436: Failure\nThe difference between vel1.y and -vel2.x*radius is 1.1582590341567993, which exceeds 1e-2, where\nvel1.y evaluates to 2.1328589916229248,\n-vel2.x*radius evaluates to 3.2911180257797241, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:442: Failure\nThe difference between vel3.x and 0 is 0.52470660209655762, which exceeds 1e-2, where\nvel3.x evaluates to -0.52470660209655762,\n0 evaluates to 0, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:443: Failure\nThe difference between vel3.y and 0 is 1.1582592725753784, which exceeds 1e-2, where\nvel3.y evaluates to -1.1582592725753784,\n0 evaluates to 0, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:448: Failure\nThe difference between vel4.y and 2*vel1.y is 1.158259391784668, which exceeds 1e-2, where\nvel4.y evaluates to 5.4239773750305176,\n2*vel1.y evaluates to 4.2657179832458496, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:449: Failure\nThe difference between vel4.x and 2*vel1.x is 0.52470684051513672, which exceeds 1e-2, where\nvel4.x evaluates to 4.7637763023376465,\n2*vel1.x evaluates to 4.2390694618225098, and\n1e-2 evaluates to 0.01.\n\n\nDbg Check ground contact and roll without slip of model cog_xy_-30deg_offset_sphere\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:408: Failure\nThe difference between vel2.z and 0 is 0.048208430409431458, which exceeds 1e-2, where\nvel2.z evaluates to -0.048208430409431458,\n0 evaluates to 0, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:435: Failure\nThe difference between vel1.x and vel2.y*radius is 0.47043097019195557, which exceeds 1e-2, where\nvel1.x evaluates to 2.5810449123382568,\nvel2.y*radius evaluates to 3.0514758825302124, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:436: Failure\nThe difference between vel1.y and -vel2.x*radius is 0.53083974123001099, which exceeds 1e-2, where\nvel1.y evaluates to -1.532335638999939,\n-vel2.x*radius evaluates to -2.06317538022995, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:442: Failure\nThe difference between vel3.x and 0 is 0.47043097019195557, which exceeds 1e-2, where\nvel3.x evaluates to -0.47043097019195557,\n0 evaluates to 0, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:443: Failure\nThe difference between vel3.y and 0 is 0.53083968162536621, which exceeds 1e-2, where\nvel3.y evaluates to 0.53083968162536621,\n0 evaluates to 0, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:448: Failure\nThe difference between vel4.y and 2*vel1.y is 0.53083968162536621, which exceeds 1e-2, where\nvel4.y evaluates to -3.5955109596252441,\n2*vel1.y evaluates to -3.0646712779998779, and\n1e-2 evaluates to 0.01.\n/home/scpeters/osrf/gazebo/test/regression/physics.cc:449: Failure\nThe difference between vel4.x and 2*vel1.x is 0.47043085098266602, which exceeds 1e-2, where\nvel4.x evaluates to 5.6325206756591797,\n2*vel1.x evaluates to 5.1620898246765137, and\n1e-2 evaluates to 0.01.\n[  FAILED  ] PhysicsTest.SpawnDropCoGOffsetBullet (3954 ms)\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-02-05T07:26:31.057797+00:00", "milestone": null, "updated_on": "2016-09-14T19:43:56.571625+00:00", "type": "issue", "id": 480}