{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2475/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2475.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2475/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2475/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2475/gazebo9-compile-error-with-ogre111"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2475/vote"}}, "reporter": {"display_name": "CatchMe", "uuid": "{6fe86e63-7e93-4846-b516-5768583263ae}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B6fe86e63-7e93-4846-b516-5768583263ae%7D"}, "html": {"href": "https://bitbucket.org/%7B6fe86e63-7e93-4846-b516-5768583263ae%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/bf6734b1e5b0d10c97955aa78dbb5bbad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsC-3.png"}}, "nickname": "CatchMe_", "type": "user", "account_id": "5b0c1beda655ee23032ecf03"}, "title": "Gazebo9 compile error with ogre1.11", "component": {"name": "rendering::ogre_gazebo", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/153568.json"}}}, "votes": 2, "watches": 6, "content": {"raw": "I got the following error when try to compile gazebo9 with ogre1.11 on Archlinux:\r\n\r\n\r\n\r\n```\r\n#!c++\r\n\r\n/usr/include/OGRE/OgreSimpleRenderable.h:76:22: note:   no known conversion for argument 1 from \u2018std::__cxx11::string\u2019 {aka \u2018std::__cxx11::basic_string<char>\u2019} to \u2018const MaterialPtr&\u2019 {aka \u2018const Ogre::SharedPtr<Ogre::Material>&\u2019}\r\n```\r\n\r\n\r\n\r\nin \r\n\r\n```\r\n#!bash\r\n\r\nsrc/gazebo-9.0.0/gazebo/rendering/ApplyWrenchVisual.cc:178:57: error: no matching function for call to \u2018gazebo::rendering::DynamicLines::setMaterial(std::__cxx11::string&)\u2019\r\n   dPtr->torqueLine->setMaterial(dPtr->unselectedMaterial);\r\n```\r\n```\r\n#!bash\r\n\r\nBuilding CXX object gazebo/rendering/CMakeFiles/gazebo_rendering.dir/ApplyWrenchVisual.cc.o\r\n```\r\n\r\nThen I used this patch\r\n\r\n```\r\n#!patch\r\n\r\n--- src/gazebo-9.0.0/gazebo/rendering/ApplyWrenchVisual.cc\t2018-01-26 00:25:48.000000000 +0200\r\n+++ ApplyWrenchVisual.cc\t2018-05-28 17:58:27.411689473 +0200\r\n@@ -17,7 +17,7 @@\r\n \r\n #include <ignition/math/Color.hh>\r\n #include <ignition/math/Matrix4.hh>\r\n-\r\n+#include <OGRE/OgreMaterialManager.h>\r\n #include \"gazebo/common/MeshManager.hh\"\r\n \r\n #include \"gazebo/rendering/Material.hh\"\r\n@@ -175,7 +175,7 @@\r\n   // Torque line\r\n   dPtr->torqueLine = dPtr->torqueVisual->\r\n       CreateDynamicLine(rendering::RENDERING_LINE_LIST);\r\n-  dPtr->torqueLine->setMaterial(dPtr->unselectedMaterial);\r\n+  dPtr->torqueLine->setMaterial(Ogre::MaterialManager::getSingleton().getByName(dPtr->unselectedMaterial));\r\n   dPtr->torqueLine->AddPoint(0, 0, 0);\r\n   dPtr->torqueLine->AddPoint(0, 0, 0.1);\r\n```\r\n\r\n and it compiled, but got these errorsfor Building CXX object gazebo/rendering/CMakeFiles/gazebo_rendering.dir/Camera.cc.o :\r\n\r\n```\r\n#!error\r\n\r\n\r\n/src/gazebo-9.0.0/gazebo/rendering/Camera.cc:1616:9: error: \u2018class Ogre::AxisAlignedBox\u2019 has no member named \u2018transformAffine\u2019; did you mean \u2018transform\u2019?\r\n     box.transformAffine(_visual->GetSceneNode()->_getFullTransform());\r\n\r\nsrc/gazebo-9.0.0/gazebo/rendering/Camera.cc:1832:32: error: \u2018class Ogre::RenderTarget\u2019 has no member named \u2018getAverageFPS\u2019\r\n     return this->renderTarget->getAverageFPS();\r\n\r\nsrc/gazebo-9.0.0/gazebo/rendering/Camera.cc:1840:30: error: \u2018class Ogre::RenderTarget\u2019 has no member named \u2018getTriangleCount\u2019; did you mean \u2018mFrameCount\u2019?\r\n   return this->renderTarget->getTriangleCount();\r\n\r\n```\r\n\r\nI don't why didi it compile before ogre1.11 and now not?\r\n\r\nThanks in advance", "markup": "markdown", "html": "<p>I got the following error when try to compile gazebo9 with ogre1.11 on Archlinux:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">OGRE</span><span class=\"o\">/</span><span class=\"n\">OgreSimpleRenderable</span><span class=\"p\">.</span><span class=\"nl\">h</span><span class=\"p\">:</span><span class=\"mi\">76</span><span class=\"o\">:</span><span class=\"mi\">22</span><span class=\"o\">:</span> <span class=\"nl\">note</span><span class=\"p\">:</span>   <span class=\"n\">no</span> <span class=\"n\">known</span> <span class=\"n\">conversion</span> <span class=\"k\">for</span> <span class=\"n\">argument</span> <span class=\"mi\">1</span> <span class=\"n\">from</span> <span class=\"err\">\u2018</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">__cxx11</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"err\">\u2019</span> <span class=\"p\">{</span><span class=\"n\">aka</span> <span class=\"err\">\u2018</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">__cxx11</span><span class=\"o\">::</span><span class=\"n\">basic_string</span><span class=\"o\">&lt;</span><span class=\"kt\">char</span><span class=\"o\">&gt;</span><span class=\"err\">\u2019</span><span class=\"p\">}</span> <span class=\"n\">to</span> <span class=\"err\">\u2018</span><span class=\"k\">const</span> <span class=\"n\">MaterialPtr</span><span class=\"o\">&amp;</span><span class=\"err\">\u2019</span> <span class=\"p\">{</span><span class=\"n\">aka</span> <span class=\"err\">\u2018</span><span class=\"k\">const</span> <span class=\"n\">Ogre</span><span class=\"o\">::</span><span class=\"n\">SharedPtr</span><span class=\"o\">&lt;</span><span class=\"n\">Ogre</span><span class=\"o\">::</span><span class=\"n\">Material</span><span class=\"o\">&gt;&amp;</span><span class=\"err\">\u2019</span><span class=\"p\">}</span>\n</pre></div>\n\n\n<p>in </p>\n<div class=\"codehilite language-bash\"><pre><span></span>src/gazebo-9.0.0/gazebo/rendering/ApplyWrenchVisual.cc:178:57: error: no matching <span class=\"k\">function</span> <span class=\"k\">for</span> call to \u2018gazebo::rendering::DynamicLines::setMaterial<span class=\"o\">(</span>std::__cxx11::string<span class=\"p\">&amp;</span><span class=\"o\">)</span>\u2019\n   dPtr-&gt;torqueLine-&gt;setMaterial<span class=\"o\">(</span>dPtr-&gt;unselectedMaterial<span class=\"o\">)</span><span class=\"p\">;</span>\n</pre></div>\n\n\n<div class=\"codehilite language-bash\"><pre><span></span>Building CXX object gazebo/rendering/CMakeFiles/gazebo_rendering.dir/ApplyWrenchVisual.cc.o\n</pre></div>\n\n\n<p>Then I used this patch</p>\n<div class=\"codehilite language-patch\"><pre><span></span><span class=\"gd\">--- src/gazebo-9.0.0/gazebo/rendering/ApplyWrenchVisual.cc  2018-01-26 00:25:48.000000000 +0200</span>\n<span class=\"gi\">+++ ApplyWrenchVisual.cc    2018-05-28 17:58:27.411689473 +0200</span>\n<span class=\"gu\">@@ -17,7 +17,7 @@</span>\n\n #include &lt;ignition/math/Color.hh&gt;\n #include &lt;ignition/math/Matrix4.hh&gt;\n<span class=\"gd\">-</span>\n<span class=\"gi\">+#include &lt;OGRE/OgreMaterialManager.h&gt;</span>\n #include &quot;gazebo/common/MeshManager.hh&quot;\n\n #include &quot;gazebo/rendering/Material.hh&quot;\n<span class=\"gu\">@@ -175,7 +175,7 @@</span>\n   // Torque line\n   dPtr-&gt;torqueLine = dPtr-&gt;torqueVisual-&gt;\n       CreateDynamicLine(rendering::RENDERING_LINE_LIST);\n<span class=\"gd\">-  dPtr-&gt;torqueLine-&gt;setMaterial(dPtr-&gt;unselectedMaterial);</span>\n<span class=\"gi\">+  dPtr-&gt;torqueLine-&gt;setMaterial(Ogre::MaterialManager::getSingleton().getByName(dPtr-&gt;unselectedMaterial));</span>\n   dPtr-&gt;torqueLine-&gt;AddPoint(0, 0, 0);\n   dPtr-&gt;torqueLine-&gt;AddPoint(0, 0, 0.1);\n</pre></div>\n\n\n<p>and it compiled, but got these errorsfor Building CXX object gazebo/rendering/CMakeFiles/gazebo_rendering.dir/Camera.cc.o :</p>\n<div class=\"codehilite language-error\"><pre><span></span><span class=\"o\">/</span><span class=\"nt\">src</span><span class=\"o\">/</span><span class=\"nt\">gazebo-9</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">rendering</span><span class=\"o\">/</span><span class=\"nt\">Camera</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">1616</span><span class=\"p\">:</span><span class=\"nd\">9</span><span class=\"o\">:</span> <span class=\"nt\">error</span><span class=\"o\">:</span> <span class=\"err\">\u2018</span><span class=\"nt\">class</span> <span class=\"nt\">Ogre</span><span class=\"p\">::</span><span class=\"nd\">AxisAlignedBox</span><span class=\"err\">\u2019</span> <span class=\"nt\">has</span> <span class=\"nt\">no</span> <span class=\"nt\">member</span> <span class=\"nt\">named</span> <span class=\"err\">\u2018</span><span class=\"nt\">transformAffine</span><span class=\"err\">\u2019</span><span class=\"o\">;</span> <span class=\"nt\">did</span> <span class=\"nt\">you</span> <span class=\"nt\">mean</span> <span class=\"err\">\u2018</span><span class=\"nt\">transform</span><span class=\"err\">\u2019</span><span class=\"o\">?</span>\n     <span class=\"nt\">box</span><span class=\"p\">.</span><span class=\"nc\">transformAffine</span><span class=\"o\">(</span><span class=\"nt\">_visual-</span><span class=\"o\">&gt;</span><span class=\"nt\">GetSceneNode</span><span class=\"o\">()</span><span class=\"nt\">-</span><span class=\"o\">&gt;</span><span class=\"nt\">_getFullTransform</span><span class=\"o\">());</span>\n\n<span class=\"nt\">src</span><span class=\"o\">/</span><span class=\"nt\">gazebo-9</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">rendering</span><span class=\"o\">/</span><span class=\"nt\">Camera</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">1832</span><span class=\"p\">:</span><span class=\"nd\">32</span><span class=\"o\">:</span> <span class=\"nt\">error</span><span class=\"o\">:</span> <span class=\"err\">\u2018</span><span class=\"nt\">class</span> <span class=\"nt\">Ogre</span><span class=\"p\">::</span><span class=\"nd\">RenderTarget</span><span class=\"err\">\u2019</span> <span class=\"nt\">has</span> <span class=\"nt\">no</span> <span class=\"nt\">member</span> <span class=\"nt\">named</span> <span class=\"err\">\u2018</span><span class=\"nt\">getAverageFPS</span><span class=\"err\">\u2019</span>\n     <span class=\"nt\">return</span> <span class=\"nt\">this-</span><span class=\"o\">&gt;</span><span class=\"nt\">renderTarget-</span><span class=\"o\">&gt;</span><span class=\"nt\">getAverageFPS</span><span class=\"o\">();</span>\n\n<span class=\"nt\">src</span><span class=\"o\">/</span><span class=\"nt\">gazebo-9</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">/</span><span class=\"nt\">gazebo</span><span class=\"o\">/</span><span class=\"nt\">rendering</span><span class=\"o\">/</span><span class=\"nt\">Camera</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">1840</span><span class=\"p\">:</span><span class=\"nd\">30</span><span class=\"o\">:</span> <span class=\"nt\">error</span><span class=\"o\">:</span> <span class=\"err\">\u2018</span><span class=\"nt\">class</span> <span class=\"nt\">Ogre</span><span class=\"p\">::</span><span class=\"nd\">RenderTarget</span><span class=\"err\">\u2019</span> <span class=\"nt\">has</span> <span class=\"nt\">no</span> <span class=\"nt\">member</span> <span class=\"nt\">named</span> <span class=\"err\">\u2018</span><span class=\"nt\">getTriangleCount</span><span class=\"err\">\u2019</span><span class=\"o\">;</span> <span class=\"nt\">did</span> <span class=\"nt\">you</span> <span class=\"nt\">mean</span> <span class=\"err\">\u2018</span><span class=\"nt\">mFrameCount</span><span class=\"err\">\u2019</span><span class=\"o\">?</span>\n   <span class=\"nt\">return</span> <span class=\"nt\">this-</span><span class=\"o\">&gt;</span><span class=\"nt\">renderTarget-</span><span class=\"o\">&gt;</span><span class=\"nt\">getTriangleCount</span><span class=\"o\">();</span>\n</pre></div>\n\n\n<p>I don't why didi it compile before ogre1.11 and now not?</p>\n<p>Thanks in advance</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "9.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242746.json"}}}, "edited_on": null, "created_on": "2018-05-28T16:11:03.453864+00:00", "milestone": null, "updated_on": "2018-06-07T03:08:56.574801+00:00", "type": "issue", "id": 2475}