{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2507/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2507.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2507/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2507/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2507/joint-setforce-is-not-additive-in-simbody"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2507/vote"}}, "reporter": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "title": "Joint::SetForce is not additive in Simbody", "component": {"name": "physics::SimbodyPhysics", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122885.json"}}}, "votes": 1, "watches": 3, "content": {"raw": "[`Joint::SetForce`](http://osrf-distributions.s3.amazonaws.com/gazebo/api/dev/classgazebo_1_1physics_1_1Joint.html#ab2491053d1c5ebb97c377064797af494) docs states that:\r\n\r\n> Force is additive (multiple calls to SetForce to the same joint in the same time step will accumulate forces on that Joint). \r\n\r\nHowever, it seems that this is not true for the `simbody` physics engine, where instead every call to SetForce is overwriting the previous one, even if no update to the physics happened in the meanwhile.\r\n\r\nRelevant code:\r\n\r\n*  #!/osrf/gazebo/src/01c7f8b1d68448bc618b575ad1c7ec13fee2b87f/gazebo/physics/simbody/SimbodyHingeJoint.cc#lines-104 \r\n* http://gazebosim.org/api/dev/classgazebo_1_1physics_1_1SimbodyJoint.html#ad530d5fed74a854064dc377c3df166cd \r\n* https://simtk.org/api_docs/simbody/3.5/classSimTK_1_1Force_1_1DiscreteForces.html#a96a4c79e1209de2053a1508cd0b8264d \r\n\r\nDownstream issue: https://github.com/robotology/gazebo-fmi/issues/4\r\n\r\nSimilar issue, but related to DART: #!/osrf/gazebo/issues/2526/joint-setforce-is-not-additive-in-dart-in .", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"http://osrf-distributions.s3.amazonaws.com/gazebo/api/dev/classgazebo_1_1physics_1_1Joint.html#ab2491053d1c5ebb97c377064797af494\" rel=\"nofollow\"><code>Joint::SetForce</code></a> docs states that:</p>\n<blockquote>\n<p>Force is additive (multiple calls to SetForce to the same joint in the same time step will accumulate forces on that Joint). </p>\n</blockquote>\n<p>However, it seems that this is not true for the <code>simbody</code> physics engine, where instead every call to SetForce is overwriting the previous one, even if no update to the physics happened in the meanwhile.</p>\n<p>Relevant code:</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo/src/01c7f8b1d68448bc618b575ad1c7ec13fee2b87f/gazebo/physics/simbody/SimbodyHingeJoint.cc#lines-104\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/01c7f8b1d68448bc618b575ad1c7ec13fee2b87f/gazebo/physics/simbody/SimbodyHingeJoint.cc#lines-104</a> </li>\n<li><a href=\"http://gazebosim.org/api/dev/classgazebo_1_1physics_1_1SimbodyJoint.html#ad530d5fed74a854064dc377c3df166cd\" rel=\"nofollow\" class=\"ap-connect-link\">http://gazebosim.org/api/dev/classgazebo_1_1physics_1_1SimbodyJoint.html#ad530d5fed74a854064dc377c3df166cd</a> </li>\n<li><a href=\"https://simtk.org/api_docs/simbody/3.5/classSimTK_1_1Force_1_1DiscreteForces.html#a96a4c79e1209de2053a1508cd0b8264d\" rel=\"nofollow\" class=\"ap-connect-link\">https://simtk.org/api_docs/simbody/3.5/classSimTK_1_1Force_1_1DiscreteForces.html#a96a4c79e1209de2053a1508cd0b8264d</a> </li>\n</ul>\n<p>Downstream issue: <a href=\"https://github.com/robotology/gazebo-fmi/issues/4\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/robotology/gazebo-fmi/issues/4</a></p>\n<p>Similar issue, but related to DART: <a href=\"#!/osrf/gazebo/issues/2526/joint-setforce-is-not-additive-in-dart-in\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/issues/2526/joint-setforce-is-not-additive-in-dart-in</a> .</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "9.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242746.json"}}}, "edited_on": null, "created_on": "2018-08-08T09:19:39.360133+00:00", "milestone": null, "updated_on": "2018-09-10T08:46:48.166897+00:00", "type": "issue", "id": 2507}