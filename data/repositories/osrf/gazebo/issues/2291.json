{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2291/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2291.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2291/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2291/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2291/gazebo-sensor-noisecc-no-such-file-or"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2291/vote"}}, "reporter": null, "title": "\"gazebo/sensor/Noise.cc no such file or directory\" when add laser sensor in turtlebot_gazebo", "component": null, "votes": 0, "watches": null, "content": {"raw": "I add the laser sensor to a gazebo as the [instruction](http://amanbreakingthings.blogspot.de/2014/11/adding-hokuyo-lidar-to-turtlebot-in-ros.html) It's almost the same as the official tutorial. And the laser type and plugin is ray without gpu. But when I echo the laser scan topic. There is still segmentation fault.\r\n\r\nIt happened both in local (ubuntu 16.04, gazebo 8.0.0~beta5 from source, ros kinetic).\r\n\r\nThe gdb shows that:\r\n\r\n```\r\n#!c++\r\n\r\nThread 28 \"gzserver\" received signal SIGSEGV, Segmentation fault.\r\n[Switching to Thread 0x7fff5b3fc700 (LWP 19493)]\r\ngazebo::sensors::Noise::Apply (this=0x0, _in=_in@entry=2.4839986511063228) at /tmp/gazebo-8.0.0~beta5/gazebo/sensors/Noise.cc:107\r\n107 /tmp/gazebo-8.0.0~beta5/gazebo/sensors/Noise.cc: No such file or directory.\r\n(gdb) where\r\n#0  gazebo::sensors::Noise::Apply (this=0x0, _in=_in@entry=2.4839986511063228) at /tmp/gazebo-8.0.0~beta5/gazebo/sensors/Noise.cc:107\r\n#1  0x00007ffff606dcc8 in gazebo::sensors::RaySensor::UpdateImpl (this=0x7fff3e4c02c0) at /tmp/gazebo-8.0.0~beta5/gazebo/sensors/RaySensor.cc:491\r\n#2  0x00007ffff6074d29 in gazebo::sensors::Sensor::Update (this=0x7fff3e4c02c0, _force=_force@entry=false)\r\n    at /tmp/gazebo-8.0.0~beta5/gazebo/sensors/Sensor.cc:224\r\n#3  0x00007ffff607bb25 in gazebo::sensors::SensorManager::SensorContainer::Update (this=0xf90310, _force=<optimized out>)\r\n    at /tmp/gazebo-8.0.0~beta5/gazebo/sensors/SensorManager.cc:586\r\n#4  0x00007ffff607f6aa in gazebo::sensors::SensorManager::SensorContainer::RunLoop (this=0xf90310)\r\n    at /tmp/gazebo-8.0.0~beta5/gazebo/sensors/SensorManager.cc:540\r\n#5  0x00007ffff34195d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0\r\n#6  0x00007ffff5dd56ba in start_thread (arg=0x7fff5b3fc700) at pthread_create.c:333\r\n#7  0x00007ffff63e082d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\r\n```\r\n\r\nI also tested it in docker (ubuntu 16.04, gazebo 8.0.0 (apt-get), ros kinetic)\r\n\r\nIt seems that gdb doesn't work here?\r\n\r\n```\r\n#!c++\r\n\r\n/tmp/gdbrun.26113.9.tmp:2: Error in sourced command file:\r\nDuring startup program terminated with signal SIGSEGV, Segmentation fault.\r\n(gdb) where\r\nNo stack.\r\n(gdb) \r\n\r\n```\r\n\r\nThe segfault appeared when I try to echo the laser topic.", "markup": "markdown", "html": "<p>I add the laser sensor to a gazebo as the <a data-is-external-link=\"true\" href=\"http://amanbreakingthings.blogspot.de/2014/11/adding-hokuyo-lidar-to-turtlebot-in-ros.html\" rel=\"nofollow\">instruction</a> It's almost the same as the official tutorial. And the laser type and plugin is ray without gpu. But when I echo the laser scan topic. There is still segmentation fault.</p>\n<p>It happened both in local (ubuntu 16.04, gazebo 8.0.0~beta5 from source, ros kinetic).</p>\n<p>The gdb shows that:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">Thread</span> <span class=\"mi\">28</span> <span class=\"s\">&quot;gzserver&quot;</span> <span class=\"n\">received</span> <span class=\"n\">signal</span> <span class=\"n\">SIGSEGV</span><span class=\"p\">,</span> <span class=\"n\">Segmentation</span> <span class=\"n\">fault</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Switching</span> <span class=\"n\">to</span> <span class=\"n\">Thread</span> <span class=\"mh\">0x7fff5b3fc700</span> <span class=\"p\">(</span><span class=\"n\">LWP</span> <span class=\"mi\">19493</span><span class=\"p\">)]</span>\n<span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">sensors</span><span class=\"o\">::</span><span class=\"n\">Noise</span><span class=\"o\">::</span><span class=\"n\">Apply</span> <span class=\"p\">(</span><span class=\"k\">this</span><span class=\"o\">=</span><span class=\"mh\">0x0</span><span class=\"p\">,</span> <span class=\"n\">_in</span><span class=\"o\">=</span><span class=\"n\">_in</span><span class=\"err\">@</span><span class=\"n\">entry</span><span class=\"o\">=</span><span class=\"mf\">2.4839986511063228</span><span class=\"p\">)</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mf\">8.0.0</span><span class=\"o\">~</span><span class=\"n\">beta5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">Noise</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">107</span>\n<span class=\"mi\">107</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mf\">8.0.0</span><span class=\"o\">~</span><span class=\"n\">beta5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">Noise</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span> <span class=\"n\">No</span> <span class=\"n\">such</span> <span class=\"n\">file</span> <span class=\"n\">or</span> <span class=\"n\">directory</span><span class=\"p\">.</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span> <span class=\"n\">where</span>\n<span class=\"cp\">#0  gazebo::sensors::Noise::Apply (this=0x0, _in=_in@entry=2.4839986511063228) at /tmp/gazebo-8.0.0~beta5/gazebo/sensors/Noise.cc:107</span>\n<span class=\"cp\">#1  0x00007ffff606dcc8 in gazebo::sensors::RaySensor::UpdateImpl (this=0x7fff3e4c02c0) at /tmp/gazebo-8.0.0~beta5/gazebo/sensors/RaySensor.cc:491</span>\n<span class=\"cp\">#2  0x00007ffff6074d29 in gazebo::sensors::Sensor::Update (this=0x7fff3e4c02c0, _force=_force@entry=false)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mf\">8.0.0</span><span class=\"o\">~</span><span class=\"n\">beta5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">Sensor</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">224</span>\n<span class=\"cp\">#3  0x00007ffff607bb25 in gazebo::sensors::SensorManager::SensorContainer::Update (this=0xf90310, _force=&lt;optimized out&gt;)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mf\">8.0.0</span><span class=\"o\">~</span><span class=\"n\">beta5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">SensorManager</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">586</span>\n<span class=\"cp\">#4  0x00007ffff607f6aa in gazebo::sensors::SensorManager::SensorContainer::RunLoop (this=0xf90310)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mf\">8.0.0</span><span class=\"o\">~</span><span class=\"n\">beta5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">SensorManager</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">540</span>\n<span class=\"cp\">#5  0x00007ffff34195d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0</span>\n<span class=\"cp\">#6  0x00007ffff5dd56ba in start_thread (arg=0x7fff5b3fc700) at pthread_create.c:333</span>\n<span class=\"cp\">#7  0x00007ffff63e082d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109</span>\n</pre></div>\n\n\n<p>I also tested it in docker (ubuntu 16.04, gazebo 8.0.0 (apt-get), ros kinetic)</p>\n<p>It seems that gdb doesn't work here?</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">gdbrun</span><span class=\"mf\">.26113.9</span><span class=\"p\">.</span><span class=\"nl\">tmp</span><span class=\"p\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span> <span class=\"n\">Error</span> <span class=\"n\">in</span> <span class=\"n\">sourced</span> <span class=\"n\">command</span> <span class=\"nl\">file</span><span class=\"p\">:</span>\n<span class=\"n\">During</span> <span class=\"n\">startup</span> <span class=\"n\">program</span> <span class=\"n\">terminated</span> <span class=\"n\">with</span> <span class=\"n\">signal</span> <span class=\"n\">SIGSEGV</span><span class=\"p\">,</span> <span class=\"n\">Segmentation</span> <span class=\"n\">fault</span><span class=\"p\">.</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span> <span class=\"n\">where</span>\n<span class=\"n\">No</span> <span class=\"n\">stack</span><span class=\"p\">.</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span> \n</pre></div>\n\n\n<p>The segfault appeared when I try to echo the laser topic.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-06-03T20:22:21.419182+00:00", "milestone": null, "updated_on": "2017-06-03T20:22:21.419182+00:00", "type": "issue", "id": 2291}