{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1076/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1076.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1076/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1076/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1076/system-plugin-loading-issue-since-gazebo"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1076/vote"}}, "reporter": {"display_name": "Andreas Bihlmaier", "uuid": "{5937f01e-6c0d-4cfd-b8d2-6276f312c74c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5937f01e-6c0d-4cfd-b8d2-6276f312c74c%7D"}, "html": {"href": "https://bitbucket.org/%7B5937f01e-6c0d-4cfd-b8d2-6276f312c74c%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/0a70ca141ff43b3d9385a1823f4c265ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsAB-3.png"}}, "nickname": "andreasBihlmaier", "type": "user", "account_id": "557058:32bae45c-b312-4f18-8f77-d15bd9d6f68b"}, "title": "System plugin loading issue since gazebo-current 2.2.2-1~precise", "component": null, "votes": 0, "watches": 4, "content": {"raw": "Since I upgraded Gazebo today, my System Plugins do not work anymore:\r\n```\r\ngzclient: /usr/include/boost/smart_ptr/shared_ptr.hpp:418: T* boost::shared_ptr<T>::operator->() const [with T = gazebo::rendering::Scene]: Assertion `px != 0' failed.\r\n```\r\n\r\nStemming from:\r\n```\r\n#!c++\r\n  void\r\n  GazeboMISGuiPlugin::Init()\r\n  {\r\n    std::cout << \"------------------- GazeboMISGuiPlugin -------------------\" << std::endl;\r\n    rendering::ScenePtr scene = rendering::RenderEngine::Instance()->GetScene();\r\n    Ogre::SceneManager* sceneManager = scene->GetManager();\r\n    // ...\r\n  }\r\n\r\n```\r\nBecause GetScene() returns a NULL Pointer.\r\n\r\nA similar issues exists for another System Plugin:\r\n```\r\nError [PhysicsIface.cc:61] no worlds\r\nError [PhysicsIface.cc:75] Unable to find world by name in physics::get_world[]\r\nException [PhysicsIface.cc:77] Unable to find world by name in physics::get_world(world_name)\r\n```\r\n\r\ncoming from:\r\n```\r\n#!c++\r\n  void\r\n  GazeboMISServerPlugin::Init()\r\n  {\r\n    std::cout << \"------------------- GazeboMISServerPlugin -------------------\" << std::endl;\r\n    physics::WorldPtr world = physics::get_world();\r\n    // ...\r\n  }\r\n\r\n```\r\n\r\nBoth plugins inherit from gazebo::SystemPlugin and are registered through GZ_REGISTER_SYSTEM_PLUGIN().\r\n\r\nBoth plugins work fine with previous package gazebo-current 2.2.1-1~precise.\r\n\r\nMy model plugins still work.", "markup": "markdown", "html": "<p>Since I upgraded Gazebo today, my System Plugins do not work anymore:</p>\n<div class=\"codehilite\"><pre><span></span>gzclient: /usr/include/boost/smart_ptr/shared_ptr.hpp:418: T* boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = gazebo::rendering::Scene]: Assertion `px != 0&#39; failed.\n</pre></div>\n\n\n<p>Stemming from:</p>\n<div class=\"codehilite language-c++\"><pre><span></span>  <span class=\"kt\">void</span>\n  <span class=\"n\">GazeboMISGuiPlugin</span><span class=\"o\">::</span><span class=\"n\">Init</span><span class=\"p\">()</span>\n  <span class=\"p\">{</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cout</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;------------------- GazeboMISGuiPlugin -------------------&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n    <span class=\"n\">rendering</span><span class=\"o\">::</span><span class=\"n\">ScenePtr</span> <span class=\"n\">scene</span> <span class=\"o\">=</span> <span class=\"n\">rendering</span><span class=\"o\">::</span><span class=\"n\">RenderEngine</span><span class=\"o\">::</span><span class=\"n\">Instance</span><span class=\"p\">()</span><span class=\"o\">-&gt;</span><span class=\"n\">GetScene</span><span class=\"p\">();</span>\n    <span class=\"n\">Ogre</span><span class=\"o\">::</span><span class=\"n\">SceneManager</span><span class=\"o\">*</span> <span class=\"n\">sceneManager</span> <span class=\"o\">=</span> <span class=\"n\">scene</span><span class=\"o\">-&gt;</span><span class=\"n\">GetManager</span><span class=\"p\">();</span>\n    <span class=\"c1\">// ...</span>\n  <span class=\"p\">}</span>\n</pre></div>\n\n\n<p>Because GetScene() returns a NULL Pointer.</p>\n<p>A similar issues exists for another System Plugin:</p>\n<div class=\"codehilite\"><pre><span></span>Error [PhysicsIface.cc:61] no worlds\nError [PhysicsIface.cc:75] Unable to find world by name in physics::get_world[]\nException [PhysicsIface.cc:77] Unable to find world by name in physics::get_world(world_name)\n</pre></div>\n\n\n<p>coming from:</p>\n<div class=\"codehilite language-c++\"><pre><span></span>  <span class=\"kt\">void</span>\n  <span class=\"n\">GazeboMISServerPlugin</span><span class=\"o\">::</span><span class=\"n\">Init</span><span class=\"p\">()</span>\n  <span class=\"p\">{</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cout</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;------------------- GazeboMISServerPlugin -------------------&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n    <span class=\"n\">physics</span><span class=\"o\">::</span><span class=\"n\">WorldPtr</span> <span class=\"n\">world</span> <span class=\"o\">=</span> <span class=\"n\">physics</span><span class=\"o\">::</span><span class=\"n\">get_world</span><span class=\"p\">();</span>\n    <span class=\"c1\">// ...</span>\n  <span class=\"p\">}</span>\n</pre></div>\n\n\n<p>Both plugins inherit from gazebo::SystemPlugin and are registered through GZ_REGISTER_SYSTEM_PLUGIN().</p>\n<p>Both plugins work fine with previous package gazebo-current 2.2.1-1~precise.</p>\n<p>My model plugins still work.</p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2014-03-03T08:47:19.327823+00:00", "milestone": null, "updated_on": "2016-09-14T19:45:06.218087+00:00", "type": "issue", "id": 1076}