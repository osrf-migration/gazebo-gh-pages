{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2281/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2281.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2281/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2281/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2281/log-playback-fails-if-there-is-an-tag-in"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2281/vote"}}, "reporter": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "title": "Log playback fails if there is an <sdf> tag in the world file", "component": {"name": "util::Logging-Playback", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/283119.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "Imagine a world which has a model plugin, and that plugin takes a tag called `<sdf>`, for example:\r\n\r\n~~~\r\n<?xml version=\"1.0\" ?>\r\n<sdf version=\"1.5\">\r\n  <world name=\"default\">\r\n    <include>\r\n      <uri>model://ground_plane</uri>\r\n    </include>\r\n    <include>\r\n      <uri>model://sun</uri>\r\n    </include>\r\n    <model name=\"sphere\">\r\n      <pose>0 1.5 20 0 0 0</pose>\r\n      <link name=\"link\">\r\n        <collision name=\"collision\">\r\n          <geometry>\r\n            <sphere>\r\n              <radius>0.5</radius>\r\n            </sphere>\r\n          </geometry>\r\n        </collision>\r\n        <visual name=\"visual\">\r\n          <geometry>\r\n            <sphere>\r\n              <radius>0.5</radius>\r\n            </sphere>\r\n          </geometry>\r\n        </visual>\r\n      </link>\r\n      <plugin name=\"justtesting\" filename=\"libInitialVelocityPlugin.so\">\r\n        <linear>0 0 10</linear>\r\n        <sdf version=\"1.5\">\r\n          <just_testing_sdf_within_plugin/>\r\n        </sdf>\r\n      </plugin>\r\n    </model>\r\n  </world>\r\n</sdf>\r\n~~~\r\n\r\nGazebo works fine and the plugin is able to access that sdf tag normally. (Initial velocity plugin doesn't use it, I'm just using it as an example)\r\n\r\nThe only problem I'm having is when logging that world. It fails to playback because it tries to read the world only up to the first `</sdf>`.\r\n\r\nI believe the problem comes from the logic [here](#!/osrf/gazebo/src/a3a7c53ea929b09fc14730b45ef5ad060c47c7ca/gazebo/util/LogPlayPrivate.hh?fileviewer=file-view-default#LogPlayPrivate.hh-56)", "markup": "markdown", "html": "<p>Imagine a world which has a model plugin, and that plugin takes a tag called <code>&lt;sdf&gt;</code>, for example:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>\n<span class=\"nt\">&lt;sdf</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.5&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;world</span> <span class=\"na\">name=</span><span class=\"s\">&quot;default&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;include&gt;</span>\n      <span class=\"nt\">&lt;uri&gt;</span>model://ground_plane<span class=\"nt\">&lt;/uri&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n    <span class=\"nt\">&lt;include&gt;</span>\n      <span class=\"nt\">&lt;uri&gt;</span>model://sun<span class=\"nt\">&lt;/uri&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n    <span class=\"nt\">&lt;model</span> <span class=\"na\">name=</span><span class=\"s\">&quot;sphere&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;pose&gt;</span>0 1.5 20 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n      <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;link&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;collision</span> <span class=\"na\">name=</span><span class=\"s\">&quot;collision&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;geometry&gt;</span>\n            <span class=\"nt\">&lt;sphere&gt;</span>\n              <span class=\"nt\">&lt;radius&gt;</span>0.5<span class=\"nt\">&lt;/radius&gt;</span>\n            <span class=\"nt\">&lt;/sphere&gt;</span>\n          <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/collision&gt;</span>\n        <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&quot;visual&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;geometry&gt;</span>\n            <span class=\"nt\">&lt;sphere&gt;</span>\n              <span class=\"nt\">&lt;radius&gt;</span>0.5<span class=\"nt\">&lt;/radius&gt;</span>\n            <span class=\"nt\">&lt;/sphere&gt;</span>\n          <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/visual&gt;</span>\n      <span class=\"nt\">&lt;/link&gt;</span>\n      <span class=\"nt\">&lt;plugin</span> <span class=\"na\">name=</span><span class=\"s\">&quot;justtesting&quot;</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;libInitialVelocityPlugin.so&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;linear&gt;</span>0 0 10<span class=\"nt\">&lt;/linear&gt;</span>\n        <span class=\"nt\">&lt;sdf</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.5&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;just_testing_sdf_within_plugin/&gt;</span>\n        <span class=\"nt\">&lt;/sdf&gt;</span>\n      <span class=\"nt\">&lt;/plugin&gt;</span>\n    <span class=\"nt\">&lt;/model&gt;</span>\n  <span class=\"nt\">&lt;/world&gt;</span>\n<span class=\"nt\">&lt;/sdf&gt;</span>\n</pre></div>\n\n\n<p>Gazebo works fine and the plugin is able to access that sdf tag normally. (Initial velocity plugin doesn't use it, I'm just using it as an example)</p>\n<p>The only problem I'm having is when logging that world. It fails to playback because it tries to read the world only up to the first <code>&lt;/sdf&gt;</code>.</p>\n<p>I believe the problem comes from the logic <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/a3a7c53ea929b09fc14730b45ef5ad060c47c7ca/gazebo/util/LogPlayPrivate.hh?fileviewer=file-view-default#LogPlayPrivate.hh-56\" rel=\"nofollow\">here</a></p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "7.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242744.json"}}}, "edited_on": null, "created_on": "2017-05-17T22:20:49.749315+00:00", "milestone": null, "updated_on": "2017-05-19T00:01:03.613569+00:00", "type": "issue", "id": 2281}