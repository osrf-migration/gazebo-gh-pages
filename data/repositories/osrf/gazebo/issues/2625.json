{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2625/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2625.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2625/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2625/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2625/gazebo-sensors-sensor-setactive-not"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2625/vote"}}, "reporter": null, "title": "gazebo::sensors::Sensor::SetActive not working for ray sensor", "component": {"name": "sensors::RaySensor", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122886.json"}}}, "votes": 0, "watches": null, "content": {"raw": "My code is following,\r\n```\r\nvoid MyRaySensorPlugin::Load(gazebo::sensors::SensorPtr _sensor,\r\n                                           sdf::ElementPtr _sdf) {\r\n  _sensor->SetActive(false);\r\n  std::cout << \"sensor activeness : \" << _sensor->IsActive() << \" to \";\r\n  _sensor->SetActive(true);\r\n  std::cout << _sensor->IsActive() << std::endl;\r\n}\r\n```\r\n\r\nMy sdf file is following.\r\n```\r\n<sensor name=\"my_laserscan\" type=\"ray\">\r\n        <always_on>false</always_on>\r\n        <visualize>false</visualize>\r\n        <pose>0 0 0 0 0 0</pose>\r\n        <update_rate>5</update_rate>\r\n        <ray>\r\n          <scan>\r\n            <horizontal>\r\n              <samples>360</samples>\r\n              <resolution>1.000000</resolution>\r\n              <min_angle>0.000000</min_angle>\r\n              <max_angle>6.280000</max_angle>\r\n            </horizontal>\r\n          </scan>\r\n          <range>\r\n            <min>0.120000</min>\r\n            <max>3.5</max>\r\n            <resolution>0.015000</resolution>\r\n          </range>\r\n          <noise>\r\n            <type>gaussian</type>\r\n            <mean>0.0</mean>\r\n            <stddev>0.01</stddev>\r\n          </noise>\r\n        </ray>\r\n        <plugin name=\"my_laserscan_plugin\" filename=\"libmy_laserscan_plugin.so\">\r\n          <ros>\r\n            <namespace>gazebo</namespace>\r\n          </ros>\r\n        </plugin> \r\n        <plugin name=\"gazebo_laserscan\" filename=\"libgazebo_ros_ray_sensor.so\">\r\n          <ros>\r\n            <argument>~/out:=scan</argument>\r\n          </ros>\r\n          <output_type>sensor_msgs/LaserScan</output_type>\r\n          <frame_name>base_scan</frame_name>\r\n        </plugin>\r\n      </sensor>\r\n```\r\n\r\nThe output is always `sensor activeness : 1 to 1`, although the expected output is `sensor activeness : 0 to 1`.", "markup": "markdown", "html": "<p>My code is following,</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">void</span> <span class=\"nt\">MyRaySensorPlugin</span><span class=\"p\">::</span><span class=\"nd\">Load</span><span class=\"o\">(</span><span class=\"nt\">gazebo</span><span class=\"p\">::</span><span class=\"nd\">sensors</span><span class=\"p\">::</span><span class=\"nd\">SensorPtr</span> <span class=\"nt\">_sensor</span><span class=\"o\">,</span>\n                                           <span class=\"nt\">sdf</span><span class=\"p\">::</span><span class=\"nd\">ElementPtr</span> <span class=\"nt\">_sdf</span><span class=\"o\">)</span> <span class=\"p\">{</span>\n  <span class=\"err\">_sensor-&gt;SetActive(false)</span><span class=\"p\">;</span>\n  <span class=\"n\">std</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"n\">cout</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s2\">&quot;sensor activeness : &quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">_sensor-</span><span class=\"o\">&gt;</span><span class=\"nf\">IsActive</span><span class=\"p\">()</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s2\">&quot; to &quot;</span><span class=\"p\">;</span>\n  <span class=\"err\">_sensor-&gt;SetActive(true)</span><span class=\"p\">;</span>\n  <span class=\"n\">std</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"n\">cout</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">_sensor-</span><span class=\"o\">&gt;</span><span class=\"nf\">IsActive</span><span class=\"p\">()</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<p>My sdf file is following.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;sensor</span> <span class=\"na\">name=</span><span class=\"s\">&quot;my_laserscan&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;ray&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;always_on&gt;</span>false<span class=\"nt\">&lt;/always_on&gt;</span>\n        <span class=\"nt\">&lt;visualize&gt;</span>false<span class=\"nt\">&lt;/visualize&gt;</span>\n        <span class=\"nt\">&lt;pose&gt;</span>0 0 0 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n        <span class=\"nt\">&lt;update_rate&gt;</span>5<span class=\"nt\">&lt;/update_rate&gt;</span>\n        <span class=\"nt\">&lt;ray&gt;</span>\n          <span class=\"nt\">&lt;scan&gt;</span>\n            <span class=\"nt\">&lt;horizontal&gt;</span>\n              <span class=\"nt\">&lt;samples&gt;</span>360<span class=\"nt\">&lt;/samples&gt;</span>\n              <span class=\"nt\">&lt;resolution&gt;</span>1.000000<span class=\"nt\">&lt;/resolution&gt;</span>\n              <span class=\"nt\">&lt;min_angle&gt;</span>0.000000<span class=\"nt\">&lt;/min_angle&gt;</span>\n              <span class=\"nt\">&lt;max_angle&gt;</span>6.280000<span class=\"nt\">&lt;/max_angle&gt;</span>\n            <span class=\"nt\">&lt;/horizontal&gt;</span>\n          <span class=\"nt\">&lt;/scan&gt;</span>\n          <span class=\"nt\">&lt;range&gt;</span>\n            <span class=\"nt\">&lt;min&gt;</span>0.120000<span class=\"nt\">&lt;/min&gt;</span>\n            <span class=\"nt\">&lt;max&gt;</span>3.5<span class=\"nt\">&lt;/max&gt;</span>\n            <span class=\"nt\">&lt;resolution&gt;</span>0.015000<span class=\"nt\">&lt;/resolution&gt;</span>\n          <span class=\"nt\">&lt;/range&gt;</span>\n          <span class=\"nt\">&lt;noise&gt;</span>\n            <span class=\"nt\">&lt;type&gt;</span>gaussian<span class=\"nt\">&lt;/type&gt;</span>\n            <span class=\"nt\">&lt;mean&gt;</span>0.0<span class=\"nt\">&lt;/mean&gt;</span>\n            <span class=\"nt\">&lt;stddev&gt;</span>0.01<span class=\"nt\">&lt;/stddev&gt;</span>\n          <span class=\"nt\">&lt;/noise&gt;</span>\n        <span class=\"nt\">&lt;/ray&gt;</span>\n        <span class=\"nt\">&lt;plugin</span> <span class=\"na\">name=</span><span class=\"s\">&quot;my_laserscan_plugin&quot;</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;libmy_laserscan_plugin.so&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;ros&gt;</span>\n            <span class=\"nt\">&lt;namespace&gt;</span>gazebo<span class=\"nt\">&lt;/namespace&gt;</span>\n          <span class=\"nt\">&lt;/ros&gt;</span>\n        <span class=\"nt\">&lt;/plugin&gt;</span> \n        <span class=\"nt\">&lt;plugin</span> <span class=\"na\">name=</span><span class=\"s\">&quot;gazebo_laserscan&quot;</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;libgazebo_ros_ray_sensor.so&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;ros&gt;</span>\n            <span class=\"nt\">&lt;argument&gt;</span>~/out:=scan<span class=\"nt\">&lt;/argument&gt;</span>\n          <span class=\"nt\">&lt;/ros&gt;</span>\n          <span class=\"nt\">&lt;output_type&gt;</span>sensor_msgs/LaserScan<span class=\"nt\">&lt;/output_type&gt;</span>\n          <span class=\"nt\">&lt;frame_name&gt;</span>base_scan<span class=\"nt\">&lt;/frame_name&gt;</span>\n        <span class=\"nt\">&lt;/plugin&gt;</span>\n      <span class=\"nt\">&lt;/sensor&gt;</span>\n</pre></div>\n\n\n<p>The output is always <code>sensor activeness : 1 to 1</code>, although the expected output is <code>sensor activeness : 0 to 1</code>.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "9.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242746.json"}}}, "edited_on": null, "created_on": "2019-05-07T08:50:52.369792+00:00", "milestone": null, "updated_on": "2019-05-07T10:39:10.148266+00:00", "type": "issue", "id": 2625}