{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/449/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/449.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/449/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/449/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/449/potential-regression-in-collada-parser-for"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/449/vote"}}, "reporter": {"display_name": "Jonathan Bohren", "uuid": "{588087c1-4405-46da-b019-43f00b894b30}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B588087c1-4405-46da-b019-43f00b894b30%7D"}, "html": {"href": "https://bitbucket.org/%7B588087c1-4405-46da-b019-43f00b894b30%7D/"}, "avatar": {"href": "https://bitbucket.org/account/jbohren/avatar/"}}, "nickname": "jbohren", "type": "user", "account_id": null}, "title": "Potential regression in Collada Parser for .dae files with unexpected triangle semantics", "component": {"name": "common", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/138866.json"}}}, "votes": 0, "watches": 2, "content": {"raw": "I recently started playing with some old URDFs with Collada meshes with Gazebo 1.3 via the ROS Groovy distribution. I found that it would segfault on some of the models if they had the \"TEXTANGENT\" and \"TEXBINORMAL\" semantics in a `<triangles>` tag. \r\n\r\nSee this Collada file to see the behavior: [wamUpperArmInShoulderLink.DAE](https://github.com/jhu-lcsr/bard/blob/master/bard_urdf/models/componentSTL/wamUpperArmInShoulderLink.DAE#L144)\r\n\r\nWhile the segfault happens in the `math::parseInt` it's actually caused by [ColladaLoader.cc:1321](#!/osrf/gazebo/src/0c8b89b967826b4f9e45baa57d4cdabc3f8e4c56/gazebo/common/ColladaLoader.cc?at=default#cl-1321) when it accesses an out-of-bounds element of `strs`. It looks like it's because it's not parsing the input semantics properly. I'd submit a PR, but I'm not sure how that should be parsed either. \r\n\r\nThat being said, the **current fix is to import the .dae into Blender and re-export.** It might be sufficient to catch that indexing error before it happens, and just display a warning message telling the user that those semantics aren't supported and they should re-export the file.", "markup": "markdown", "html": "<p>I recently started playing with some old URDFs with Collada meshes with Gazebo 1.3 via the ROS Groovy distribution. I found that it would segfault on some of the models if they had the \"TEXTANGENT\" and \"TEXBINORMAL\" semantics in a <code>&lt;triangles&gt;</code> tag. </p>\n<p>See this Collada file to see the behavior: <a data-is-external-link=\"true\" href=\"https://github.com/jhu-lcsr/bard/blob/master/bard_urdf/models/componentSTL/wamUpperArmInShoulderLink.DAE#L144\" rel=\"nofollow\">wamUpperArmInShoulderLink.DAE</a></p>\n<p>While the segfault happens in the <code>math::parseInt</code> it's actually caused by <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/0c8b89b967826b4f9e45baa57d4cdabc3f8e4c56/gazebo/common/ColladaLoader.cc?at=default#cl-1321\" rel=\"nofollow\">ColladaLoader.cc:1321</a> when it accesses an out-of-bounds element of <code>strs</code>. It looks like it's because it's not parsing the input semantics properly. I'd submit a PR, but I'm not sure how that should be parsed either. </p>\n<p>That being said, the <strong>current fix is to import the .dae into Blender and re-export.</strong> It might be sufficient to catch that indexing error before it happens, and just display a warning message telling the user that those semantics aren't supported and they should re-export the file.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-01-26T16:50:42.260076+00:00", "milestone": null, "updated_on": "2017-02-08T17:12:26.195875+00:00", "type": "issue", "id": 449}