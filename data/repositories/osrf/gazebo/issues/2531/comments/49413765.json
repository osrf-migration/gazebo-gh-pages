{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2531/comments/49413765.json"}, "html": {"href": "#!/osrf/gazebo/issues/2531#comment-49413765"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2531.json"}}, "type": "issue", "id": 2531, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Gazebo GUI / Rendering is scaled"}, "content": {"raw": "Now in debug mode, the backtrace points at `gazebo::gui::ModelListWidget::OnSetSelectedEntity` at [ModelListWidget.cc:291](#!/osrf/gazebo/src/297d6947eb79c28c35cf803f1c159b9e7b4f4d1f/gazebo/gui/ModelListWidget.cc?at=gazebo9&fileviewer=file-view-default#ModelListWidget.cc-291). It seems we don't check the light pointer before dereferencing it.\n\n* https://gist.github.com/scpeters/0cdd75fdc72dd0007e1210e278961b32\n\n~~~\n[Wrn] [GuiIface.cc:120] Failed to get QCocoaScreen for NSObject(0x0)\nAssertion failed: (px != 0), function operator->, file /usr/local/include/boost/smart_ptr/shared_ptr.hpp, line 734.\nProcess 34110 stopped\n* thread #1, name = 'ZMQbg/1', queue = 'com.apple.main-thread', stop reason = signal SIGABRT\n    frame #0: 0x00007fff65e7123e libsystem_kernel.dylib`__pthread_kill + 10\nlibsystem_kernel.dylib`__pthread_kill:\n->  0x7fff65e7123e <+10>: jae    0x7fff65e71248            ; <+20>\n    0x7fff65e71240 <+12>: movq   %rax, %rdi\n    0x7fff65e71243 <+15>: jmp    0x7fff65e6b3b7            ; cerror_nocancel\n    0x7fff65e71248 <+20>: retq   \nTarget 0: (gzclient) stopped.\n(lldb) bt\n* thread #1, name = 'ZMQbg/1', queue = 'com.apple.main-thread', stop reason = signal SIGABRT\n  * frame #0: 0x00007fff65e7123e libsystem_kernel.dylib`__pthread_kill + 10\n    frame #1: 0x00007fff65f27c1c libsystem_pthread.dylib`pthread_kill + 285\n    frame #2: 0x00007fff65dda1c9 libsystem_c.dylib`abort + 127\n    frame #3: 0x00007fff65da2868 libsystem_c.dylib`__assert_rtn + 320\n    frame #4: 0x00000001008d7e99 libgazebo_gui.9.dylib`boost::shared_ptr<gazebo::rendering::Light>::operator->(this=0x00007ffeefbfb948) const at shared_ptr.hpp:734\n    frame #5: 0x0000000100968533 libgazebo_gui.9.dylib`gazebo::gui::ModelListWidget::OnSetSelectedEntity(this=0x00000001180cb7b0, _name=\"sun\", (null)=\"normal\") at ModelListWidget.cc:291\n~~~", "markup": "markdown", "html": "<p>Now in debug mode, the backtrace points at <code>gazebo::gui::ModelListWidget::OnSetSelectedEntity</code> at <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/297d6947eb79c28c35cf803f1c159b9e7b4f4d1f/gazebo/gui/ModelListWidget.cc?at=gazebo9&amp;fileviewer=file-view-default#ModelListWidget.cc-291\" rel=\"nofollow\">ModelListWidget.cc:291</a>. It seems we don't check the light pointer before dereferencing it.</p>\n<ul>\n<li><a href=\"https://gist.github.com/scpeters/0cdd75fdc72dd0007e1210e278961b32\" rel=\"nofollow\" class=\"ap-connect-link\">https://gist.github.com/scpeters/0cdd75fdc72dd0007e1210e278961b32</a></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>[Wrn] [GuiIface.cc:120] Failed to get QCocoaScreen for NSObject(0x0)\nAssertion failed: (px != 0), function operator-&gt;, file /usr/local/include/boost/smart_ptr/shared_ptr.hpp, line 734.\nProcess 34110 stopped\n* thread #1, name = &#39;ZMQbg/1&#39;, queue = &#39;com.apple.main-thread&#39;, stop reason = signal SIGABRT\n    frame #0: 0x00007fff65e7123e libsystem_kernel.dylib`__pthread_kill + 10\nlibsystem_kernel.dylib`__pthread_kill:\n-&gt;  0x7fff65e7123e &lt;+10&gt;: jae    0x7fff65e71248            ; &lt;+20&gt;\n    0x7fff65e71240 &lt;+12&gt;: movq   %rax, %rdi\n    0x7fff65e71243 &lt;+15&gt;: jmp    0x7fff65e6b3b7            ; cerror_nocancel\n    0x7fff65e71248 &lt;+20&gt;: retq   \nTarget 0: (gzclient) stopped.\n(lldb) bt\n* thread #1, name = &#39;ZMQbg/1&#39;, queue = &#39;com.apple.main-thread&#39;, stop reason = signal SIGABRT\n  * frame #0: 0x00007fff65e7123e libsystem_kernel.dylib`__pthread_kill + 10\n    frame #1: 0x00007fff65f27c1c libsystem_pthread.dylib`pthread_kill + 285\n    frame #2: 0x00007fff65dda1c9 libsystem_c.dylib`abort + 127\n    frame #3: 0x00007fff65da2868 libsystem_c.dylib`__assert_rtn + 320\n    frame #4: 0x00000001008d7e99 libgazebo_gui.9.dylib`boost::shared_ptr&lt;gazebo::rendering::Light&gt;::operator-&gt;(this=0x00007ffeefbfb948) const at shared_ptr.hpp:734\n    frame #5: 0x0000000100968533 libgazebo_gui.9.dylib`gazebo::gui::ModelListWidget::OnSetSelectedEntity(this=0x00000001180cb7b0, _name=&quot;sun&quot;, (null)=&quot;normal&quot;) at ModelListWidget.cc:291\n</pre></div>", "type": "rendered"}, "created_on": "2018-12-11T21:03:50.359321+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 49413765}