{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1726/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1726.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1726/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1726/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1726/transparency-tag-ignored-when-models"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1726/vote"}}, "reporter": {"display_name": "Cristian Dobra", "uuid": "{623b4463-6f48-4276-8524-c5edb3f849b1}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B623b4463-6f48-4276-8524-c5edb3f849b1%7D"}, "html": {"href": "https://bitbucket.org/%7B623b4463-6f48-4276-8524-c5edb3f849b1%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/0f00c7d6958f4ae488bcf51abea1a0a5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCD-1.png"}}, "nickname": "dobracristian", "type": "user", "account_id": "557058:59f627da-3ae2-426a-b491-181b68b1ad9f"}, "title": "Transparency tag ignored when models loaded from world/programatically", "component": {"name": "rendering", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122881.json"}}}, "votes": 3, "watches": 4, "content": {"raw": "Gazebo ignores transparency tag when models are loaded from world or programatically from a plugin, but if the models are inserted from Insert menu, the models are transparent.\r\n\r\nUsed files:\r\n\r\n * `InsertBox.cc`\r\n```\r\n#include \"gazebo/physics/physics.hh\"\r\n#include \"gazebo/common/common.hh\"\r\n#include \"gazebo/gazebo.hh\"\r\n\r\nnamespace gazebo\r\n{\r\nclass InsertBox : public WorldPlugin\r\n{\r\n  public: void Load(physics::WorldPtr _parent, sdf::ElementPtr /*_sdf*/)\r\n  {\r\n    _parent->InsertModelFile(\"model://box\");\r\n  }\r\n};\r\nGZ_REGISTER_WORLD_PLUGIN(InsertBox)\r\n}\r\n```\r\n\r\n * `insert_box.world`\r\n```\r\n<?xml version=\"1.0\"?>\r\n<sdf version=\"1.4\">\r\n  <world name=\"default\">\r\n    <include>\r\n      <uri>model://ground_plane</uri>\r\n    </include>\r\n\r\n    <include>\r\n      <uri>model://sun</uri>\r\n    </include>\r\n    \r\n     <include>\r\n      <uri>model://box</uri>\r\n       <pose>0 0 2 0 0 0</pose>\r\n    </include>\r\n\r\n    <plugin name=\"InsertBox\" filename=\"libInsertBox.so\"/>\r\n  </world>\r\n</sdf>\r\n```\r\n* `box.sdf`\r\n```\r\n<?xml version=\"1.0\"?>\r\n<sdf version=\"1.4\">\r\n\t\r\n\t <model name=\"box\">\r\n      <pose>0 0 0.5 0 0 0</pose>\r\n      <link name=\"link\">\r\n        <collision name=\"collision\">\r\n          <geometry>\r\n            <box>\r\n              <size>1 1 1</size>\r\n            </box>\r\n          </geometry>\r\n        </collision> \r\n\r\n        <visual name=\"visual\">\r\n          <geometry>\r\n            <box>\r\n              <size>1 1 1</size>\r\n            </box>\r\n          </geometry>\r\n\t         <transparency>0.5</transparency>\r\n        </visual>\r\n      </link>\r\n\r\n\t</model>        \r\n</sdf>\r\n```\r\n![tr2.png](data/bitbucket.org/repo/jgXqbo/images/4207088142-tr2.png)\r\nThe one from the left is added via drag and drop, the two from the right are from the world file.", "markup": "markdown", "html": "<p>Gazebo ignores transparency tag when models are loaded from world or programatically from a plugin, but if the models are inserted from Insert menu, the models are transparent.</p>\n<p>Used files:</p>\n<ul>\n<li><code>InsertBox.cc</code></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><span class=\"err\">#</span><span class=\"nx\">include</span> <span class=\"s2\">&quot;gazebo/physics/physics.hh&quot;</span>\n<span class=\"err\">#</span><span class=\"nx\">include</span> <span class=\"s2\">&quot;gazebo/common/common.hh&quot;</span>\n<span class=\"err\">#</span><span class=\"nx\">include</span> <span class=\"s2\">&quot;gazebo/gazebo.hh&quot;</span>\n\n<span class=\"nx\">namespace</span> <span class=\"nx\">gazebo</span>\n<span class=\"p\">{</span>\n<span class=\"kr\">class</span> <span class=\"nx\">InsertBox</span> : <span class=\"kt\">public</span> <span class=\"nx\">WorldPlugin</span>\n<span class=\"p\">{</span>\n  <span class=\"kr\">public</span><span class=\"o\">:</span> <span class=\"k\">void</span> <span class=\"nx\">Load</span><span class=\"p\">(</span><span class=\"nx\">physics</span><span class=\"o\">::</span><span class=\"nx\">WorldPtr</span> <span class=\"nx\">_parent</span><span class=\"p\">,</span> <span class=\"nx\">sdf</span><span class=\"o\">::</span><span class=\"nx\">ElementPtr</span> <span class=\"cm\">/*_sdf*/</span><span class=\"p\">)</span>\n  <span class=\"p\">{</span>\n    <span class=\"nx\">_parent</span><span class=\"o\">-&gt;</span><span class=\"nx\">InsertModelFile</span><span class=\"p\">(</span><span class=\"s2\">&quot;model://box&quot;</span><span class=\"p\">);</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">};</span>\n<span class=\"nx\">GZ_REGISTER_WORLD_PLUGIN</span><span class=\"p\">(</span><span class=\"nx\">InsertBox</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<ul>\n<li><code>insert_box.world</code></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot;?&gt;</span>\n<span class=\"nt\">&lt;sdf</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.4&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;world</span> <span class=\"na\">name=</span><span class=\"s\">&quot;default&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;include&gt;</span>\n      <span class=\"nt\">&lt;uri&gt;</span>model://ground_plane<span class=\"nt\">&lt;/uri&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n\n    <span class=\"nt\">&lt;include&gt;</span>\n      <span class=\"nt\">&lt;uri&gt;</span>model://sun<span class=\"nt\">&lt;/uri&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n\n     <span class=\"nt\">&lt;include&gt;</span>\n      <span class=\"nt\">&lt;uri&gt;</span>model://box<span class=\"nt\">&lt;/uri&gt;</span>\n       <span class=\"nt\">&lt;pose&gt;</span>0 0 2 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n\n    <span class=\"nt\">&lt;plugin</span> <span class=\"na\">name=</span><span class=\"s\">&quot;InsertBox&quot;</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;libInsertBox.so&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;/world&gt;</span>\n<span class=\"nt\">&lt;/sdf&gt;</span>\n</pre></div>\n\n\n<ul>\n<li><code>box.sdf</code></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot;?&gt;</span>\n<span class=\"nt\">&lt;sdf</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.4&quot;</span><span class=\"nt\">&gt;</span>\n\n     <span class=\"nt\">&lt;model</span> <span class=\"na\">name=</span><span class=\"s\">&quot;box&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;pose&gt;</span>0 0 0.5 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n      <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;link&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;collision</span> <span class=\"na\">name=</span><span class=\"s\">&quot;collision&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;geometry&gt;</span>\n            <span class=\"nt\">&lt;box&gt;</span>\n              <span class=\"nt\">&lt;size&gt;</span>1 1 1<span class=\"nt\">&lt;/size&gt;</span>\n            <span class=\"nt\">&lt;/box&gt;</span>\n          <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/collision&gt;</span> \n\n        <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&quot;visual&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;geometry&gt;</span>\n            <span class=\"nt\">&lt;box&gt;</span>\n              <span class=\"nt\">&lt;size&gt;</span>1 1 1<span class=\"nt\">&lt;/size&gt;</span>\n            <span class=\"nt\">&lt;/box&gt;</span>\n          <span class=\"nt\">&lt;/geometry&gt;</span>\n             <span class=\"nt\">&lt;transparency&gt;</span>0.5<span class=\"nt\">&lt;/transparency&gt;</span>\n        <span class=\"nt\">&lt;/visual&gt;</span>\n      <span class=\"nt\">&lt;/link&gt;</span>\n\n    <span class=\"nt\">&lt;/model&gt;</span>        \n<span class=\"nt\">&lt;/sdf&gt;</span>\n</pre></div>\n\n\n<p><img alt=\"tr2.png\" src=\"data/bitbucket.org/repo/jgXqbo/images/4207088142-tr2.png\" />\nThe one from the left is added via drag and drop, the two from the right are from the world file.</p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "6.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/170782.json"}}}, "edited_on": null, "created_on": "2015-09-02T14:03:15.054117+00:00", "milestone": null, "updated_on": "2016-09-14T19:45:39.194442+00:00", "type": "issue", "id": 1726}