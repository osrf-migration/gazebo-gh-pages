{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/646/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/646.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/646/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/646/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/646/screenshot-action-makes-gzclient-to"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/646/vote"}}, "reporter": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "title": "Screenshot action makes gzclient to segfault", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Pressing the camera button for getting an screenshot is making gzclient to segfault after displaying the message in screen: \"Screenshot saved in ...\"\r\n\r\nInstalled from packages gazebo-1.6.2-1~precise in amd64 machine.\r\n\r\ngdb back trace:\r\n```\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n_int_malloc (av=0x7ffff4017720, bytes=2040849) at malloc.c:3868\r\n3868\tmalloc.c: No such file or directory.\r\n(gdb) bt\r\n#0  _int_malloc (av=0x7ffff4017720, bytes=2040849) at malloc.c:3868\r\n#1  0x00007ffff3ce1fb5 in __GI___libc_malloc (bytes=2040849) at malloc.c:2924\r\n#2  0x00007ffff45e5ded in operator new(unsigned long) ()\r\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#3  0x00007ffff45e5f09 in operator new[](unsigned long) ()\r\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#4  0x00007fffca1879e9 in Ogre::GLXWindow::copyContentsToMemory (\r\n    this=<optimized out>, dst=..., buffer=Ogre::RenderTarget::FB_BACK)\r\n    at /build/buildd/ogre-1.7.4/RenderSystems/GL/src/GLX/OgreGLXWindow.cpp:667\r\n#5  0x00007ffff72fc175 in gazebo::rendering::Camera::PostRender() ()\r\n   from /usr/lib/libgazebo_rendering.so.1\r\n#6  0x00000000004ab54b in gazebo::gui::GLWidget::paintEvent(QPaintEvent*) ()\r\n#7  0x00007ffff60fe0f6 in QWidget::event(QEvent*) ()\r\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n#8  0x00007ffff60ad894 in QApplicationPrivate::notify_helper(QObject*, QEvent*)\r\n    () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n#9  0x00007ffff60b2713 in QApplication::notify(QObject*, QEvent*) ()\r\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n#10 0x00007ffff5b8ae9c in QCoreApplication::notifyInternal(QObject*, QEvent*)\r\n    () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\r\n#11 0x00007ffff60f9d96 in QWidgetPrivate::drawWidget(QPaintDevice*, QRegion cons---Type <return> to continue, or q <return> to quit---\r\nt&, QPoint const&, int, QPainter*, QWidgetBackingStore*) ()\r\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n#12 0x00007ffff62c5787 in QWidgetPrivate::repaint_sys(QRegion const&) ()\r\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n#13 0x00007ffff60f0a64 in QWidgetPrivate::syncBackingStore() ()\r\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n#14 0x00007ffff60fe60c in QWidget::event(QEvent*) ()\r\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n#15 0x00007ffff60ad894 in QApplicationPrivate::notify_helper(QObject*, QEvent*)\r\n    () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n#16 0x00007ffff60b2713 in QApplication::notify(QObject*, QEvent*) ()\r\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n#17 0x00007ffff5b8ae9c in QCoreApplication::notifyInternal(QObject*, QEvent*)\r\n    () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\r\n#18 0x00007ffff5b8ec6a in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\r\n#19 0x00007ffff5bb9f93 in ?? () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\r\n#20 0x00007fffefde5d53 in g_main_context_dispatch ()\r\n   from /lib/x86_64-linux-gnu/libglib-2.0.so.0\r\n#21 0x00007fffefde60a0 in ?? () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\r\n#22 0x00007fffefde6164 in g_main_context_iteration ()\r\n---Type <return> to continue, or q <return> to quit---\r\n   from /lib/x86_64-linux-gnu/libglib-2.0.so.0\r\n#23 0x00007ffff5bba3bf in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\r\n#24 0x00007ffff6155d5e in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n#25 0x00007ffff5b89c82 in QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\r\n#26 0x00007ffff5b89ed7 in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\r\n#27 0x00007ffff5b8ef67 in QCoreApplication::exec() ()\r\n   from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\r\n#28 0x00000000004b4a2c in gazebo::gui::run(int, char**) ()\r\n#29 0x0000000000494a39 in main ()\r\n```\r\n\r\nPlease let me know if you need me to perform more debugging actions.", "markup": "markdown", "html": "<p>Pressing the camera button for getting an screenshot is making gzclient to segfault after displaying the message in screen: \"Screenshot saved in ...\"</p>\n<p>Installed from packages gazebo-1.6.2-1~precise in amd64 machine.</p>\n<p>gdb back trace:</p>\n<div class=\"codehilite\"><pre><span></span>Program received signal SIGSEGV, Segmentation fault.\n_int_malloc (av=0x7ffff4017720, bytes=2040849) at malloc.c:3868\n3868    malloc.c: No such file or directory.\n(gdb) bt\n#0  _int_malloc (av=0x7ffff4017720, bytes=2040849) at malloc.c:3868\n#1  0x00007ffff3ce1fb5 in __GI___libc_malloc (bytes=2040849) at malloc.c:2924\n#2  0x00007ffff45e5ded in operator new(unsigned long) ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3  0x00007ffff45e5f09 in operator new[](unsigned long) ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4  0x00007fffca1879e9 in Ogre::GLXWindow::copyContentsToMemory (\n    this=&lt;optimized out&gt;, dst=..., buffer=Ogre::RenderTarget::FB_BACK)\n    at /build/buildd/ogre-1.7.4/RenderSystems/GL/src/GLX/OgreGLXWindow.cpp:667\n#5  0x00007ffff72fc175 in gazebo::rendering::Camera::PostRender() ()\n   from /usr/lib/libgazebo_rendering.so.1\n#6  0x00000000004ab54b in gazebo::gui::GLWidget::paintEvent(QPaintEvent*) ()\n#7  0x00007ffff60fe0f6 in QWidget::event(QEvent*) ()\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#8  0x00007ffff60ad894 in QApplicationPrivate::notify_helper(QObject*, QEvent*)\n    () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#9  0x00007ffff60b2713 in QApplication::notify(QObject*, QEvent*) ()\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#10 0x00007ffff5b8ae9c in QCoreApplication::notifyInternal(QObject*, QEvent*)\n    () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#11 0x00007ffff60f9d96 in QWidgetPrivate::drawWidget(QPaintDevice*, QRegion cons---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\nt&amp;, QPoint const&amp;, int, QPainter*, QWidgetBackingStore*) ()\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#12 0x00007ffff62c5787 in QWidgetPrivate::repaint_sys(QRegion const&amp;) ()\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#13 0x00007ffff60f0a64 in QWidgetPrivate::syncBackingStore() ()\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#14 0x00007ffff60fe60c in QWidget::event(QEvent*) ()\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#15 0x00007ffff60ad894 in QApplicationPrivate::notify_helper(QObject*, QEvent*)\n    () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#16 0x00007ffff60b2713 in QApplication::notify(QObject*, QEvent*) ()\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#17 0x00007ffff5b8ae9c in QCoreApplication::notifyInternal(QObject*, QEvent*)\n    () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#18 0x00007ffff5b8ec6a in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#19 0x00007ffff5bb9f93 in ?? () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#20 0x00007fffefde5d53 in g_main_context_dispatch ()\n   from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#21 0x00007fffefde60a0 in ?? () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#22 0x00007fffefde6164 in g_main_context_iteration ()\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n   from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#23 0x00007ffff5bba3bf in QEventDispatcherGlib::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#24 0x00007ffff6155d5e in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\n#25 0x00007ffff5b89c82 in QEventLoop::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#26 0x00007ffff5b89ed7 in QEventLoop::exec(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#27 0x00007ffff5b8ef67 in QCoreApplication::exec() ()\n   from /usr/lib/x86_64-linux-gnu/libQtCore.so.4\n#28 0x00000000004b4a2c in gazebo::gui::run(int, char**) ()\n#29 0x0000000000494a39 in main ()\n</pre></div>\n\n\n<p>Please let me know if you need me to perform more debugging actions.</p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-04-15T17:04:19.873679+00:00", "milestone": null, "updated_on": "2016-09-14T19:44:42.295630+00:00", "type": "issue", "id": 646}