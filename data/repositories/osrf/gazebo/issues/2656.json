{"priority": "blocker", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2656/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2656.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2656/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2656/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2656/segmentation-fault-in-gzserver-on-spawning"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2656/vote"}}, "reporter": {"display_name": "rishabh lal", "uuid": "{a2189904-03bc-4407-a50e-76e21d618e28}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba2189904-03bc-4407-a50e-76e21d618e28%7D"}, "html": {"href": "https://bitbucket.org/%7Ba2189904-03bc-4407-a50e-76e21d618e28%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fb7377003cf48b9e05683a406caca93cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsRL-4.png"}}, "nickname": "Riss0", "type": "user", "account_id": "5cf5961323e75a0e7d27cfb7"}, "title": "Segmentation fault in gzserver on spawning pr2 with its controllers using pr2_controller_manager", "component": null, "votes": 0, "watches": 1, "content": {"raw": "I am using gazebo 7 with ros-kinetic on ubuntu xenial .I am trying to spawn pr2 urdf xacro model in gazebo along with its controllers using pr2\\_controller\\_manager. I am facing segmentation fault at :-\r\n\r\n```\r\nThread 28 \"gzserver\" received signal SIGSEGV, Segmentation fault. \r\n[Switching to Thread 0x7fff63ffd700 (LWP 17825)] \r\n0x00007fffc96ac0ed in ros::NodeHandle::destruct() () from /opt/ros/kinetic/lib/libroscpp.so\r\n```\r\n\r\nAnd it's backtrace is\r\n\r\n```\r\n#0  0x00007fffc96ac0ed in ros::NodeHandle::destruct() () from /opt/ros/kinetic/lib/libroscpp.so\r\n#1  0x00007fffc96ac269 in ros::NodeHandle::~NodeHandle() () from /opt/ros/kinetic/lib/libroscpp.so\r\n#2  0x00007fff184b44b4 in pr2_controller_manager::ControllerManager::~ControllerManager() ()\r\n   from /home/deadmanlogan/i_am_from_source/catkin_ws/devel_isolated/pr2_controller_manager/lib/libpr2_controller_manager.so\r\n#3  0x00007fff184b4ed9 in pr2_controller_manager::ControllerManager::~ControllerManager() ()\r\n   from /home/deadmanlogan/i_am_from_source/catkin_ws/devel_isolated/pr2_controller_manager/lib/libpr2_controller_manager.so\r\n#4  0x00007fff105a580a in gazebo::GazeboRosControllerManager::~GazeboRosControllerManager() ()\r\n   from /home/deadmanlogan/i_am_from_source/catkin_ws/devel_isolated/pr2_gazebo_plugins/lib/libgazebo_ros_controller_manager.so\r\n#5  0x00007fff105a5996 in gazebo::GazeboRosControllerManager::~GazeboRosControllerManager() ()\r\n   from /home/deadmanlogan/i_am_from_source/catkin_ws/devel_isolated/pr2_gazebo_plugins/lib/libgazebo_ros_controller_manager.so\r\n#6  0x00007ffff5ba80c9 in boost::checked_delete<gazebo::ModelPlugin> (x=0x7fff0d794610) at /usr/include/boost/core/checked_delete.hpp:34\r\n#7  0x00007ffff5baadd6 in boost::detail::sp_counted_impl_p<gazebo::ModelPlugin>::dispose (this=0x7fff0d793db0)\r\n    at /usr/include/boost/smart_ptr/detail/sp_counted_impl.hpp:78\r\n#8  0x00007ffff59b4efe in boost::detail::sp_counted_base::release (this=0x7fff0d793db0)\r\n    at /usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\r\n#9  0x00007ffff59b4f91 in boost::detail::shared_count::~shared_count (this=0x7fff63ffb3d8, __in_chrg=<optimized out>)\r\n    at /usr/include/boost/smart_ptr/detail/shared_count.hpp:443\r\n#10 0x00007ffff5b9f086 in boost::shared_ptr<gazebo::ModelPlugin>::~shared_ptr (this=0x7fff63ffb3d0, __in_chrg=<optimized out>)\r\n    at /usr/include/boost/smart_ptr/shared_ptr.hpp:323\r\n#11 0x00007ffff5b9a392 in gazebo::physics::Model::LoadPlugin (this=0x7fff3c1794c0, _sdf=std::shared_ptr (count 3, weak 5) 0x7fff368df950)\r\n    at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/Model.cc:1002\r\n#12 0x00007ffff5b999e2 in gazebo::physics::Model::LoadPlugins (this=0x7fff3c1794c0)\r\n---Type <return> to continue, or q <return> to quit---\r\n    at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/Model.cc:915\r\n#13 0x00007ffff5c08bd9 in gazebo::physics::World::ProcessFactoryMsgs (this=0x1654280)\r\n    at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/World.cc:1958\r\n#14 0x00007ffff5c0b9de in gazebo::physics::World::ProcessMessages (this=0x1654280)\r\n    at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/World.cc:2282\r\n#15 0x00007ffff5c0069f in gazebo::physics::World::Step (this=0x1654280) at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/World.cc:688\r\n#16 0x00007ffff5bff06c in gazebo::physics::World::RunLoop (this=0x1654280) at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/World.cc:481\r\n#17 0x00007ffff5c2e413 in boost::_mfi::mf0<void, gazebo::physics::World>::operator() (this=0x12ac178, p=0x1654280)\r\n    at /usr/include/boost/bind/mem_fn_template.hpp:49\r\n#18 0x00007ffff5c2d4be in boost::_bi::list1<boost::_bi::value<gazebo::physics::World*> >::operator()<boost::_mfi::mf0<void, gazebo::physics::World>, boost::_bi::list0> (this=0x12ac188, f=..., a=...) at /usr/include/boost/bind/bind.hpp:253\r\n#19 0x00007ffff5c2b74a in boost::_bi::bind_t<void, boost::_mfi::mf0<void, gazebo::physics::World>, boost::_bi::list1<boost::_bi::value<gazebo::physics::World*> > >::operator() (this=0x12ac178) at /usr/include/boost/bind/bind.hpp:893\r\n#20 0x00007ffff5c3070a in boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, gazebo::physics::World>, boost::_bi::list1<boost::_bi::value<gazebo::physics::World*> > > >::run (this=0x12abfc0) at /usr/include/boost/thread/detail/thread.hpp:116\r\n#21 0x00007ffff35c65d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0\r\n#22 0x00007ffff79086ba in start_thread (arg=0x7fff63ffd700) at pthread_create.c:333\r\n#23 0x00007ffff64c741d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\r\n```", "markup": "markdown", "html": "<p>I am using gazebo 7 with ros-kinetic on ubuntu xenial .I am trying to spawn pr2 urdf xacro model in gazebo along with its controllers using pr2_controller_manager. I am facing segmentation fault at :-</p>\n<div class=\"codehilite\"><pre><span></span>Thread 28 &quot;gzserver&quot; received signal SIGSEGV, Segmentation fault. \n[Switching to Thread 0x7fff63ffd700 (LWP 17825)] \n0x00007fffc96ac0ed in ros::NodeHandle::destruct() () from /opt/ros/kinetic/lib/libroscpp.so\n</pre></div>\n\n\n<p>And it's backtrace is</p>\n<div class=\"codehilite\"><pre><span></span>#0  0x00007fffc96ac0ed in ros::NodeHandle::destruct() () from /opt/ros/kinetic/lib/libroscpp.so\n#1  0x00007fffc96ac269 in ros::NodeHandle::~NodeHandle() () from /opt/ros/kinetic/lib/libroscpp.so\n#2  0x00007fff184b44b4 in pr2_controller_manager::ControllerManager::~ControllerManager() ()\n   from /home/deadmanlogan/i_am_from_source/catkin_ws/devel_isolated/pr2_controller_manager/lib/libpr2_controller_manager.so\n#3  0x00007fff184b4ed9 in pr2_controller_manager::ControllerManager::~ControllerManager() ()\n   from /home/deadmanlogan/i_am_from_source/catkin_ws/devel_isolated/pr2_controller_manager/lib/libpr2_controller_manager.so\n#4  0x00007fff105a580a in gazebo::GazeboRosControllerManager::~GazeboRosControllerManager() ()\n   from /home/deadmanlogan/i_am_from_source/catkin_ws/devel_isolated/pr2_gazebo_plugins/lib/libgazebo_ros_controller_manager.so\n#5  0x00007fff105a5996 in gazebo::GazeboRosControllerManager::~GazeboRosControllerManager() ()\n   from /home/deadmanlogan/i_am_from_source/catkin_ws/devel_isolated/pr2_gazebo_plugins/lib/libgazebo_ros_controller_manager.so\n#6  0x00007ffff5ba80c9 in boost::checked_delete&lt;gazebo::ModelPlugin&gt; (x=0x7fff0d794610) at /usr/include/boost/core/checked_delete.hpp:34\n#7  0x00007ffff5baadd6 in boost::detail::sp_counted_impl_p&lt;gazebo::ModelPlugin&gt;::dispose (this=0x7fff0d793db0)\n    at /usr/include/boost/smart_ptr/detail/sp_counted_impl.hpp:78\n#8  0x00007ffff59b4efe in boost::detail::sp_counted_base::release (this=0x7fff0d793db0)\n    at /usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\n#9  0x00007ffff59b4f91 in boost::detail::shared_count::~shared_count (this=0x7fff63ffb3d8, __in_chrg=&lt;optimized out&gt;)\n    at /usr/include/boost/smart_ptr/detail/shared_count.hpp:443\n#10 0x00007ffff5b9f086 in boost::shared_ptr&lt;gazebo::ModelPlugin&gt;::~shared_ptr (this=0x7fff63ffb3d0, __in_chrg=&lt;optimized out&gt;)\n    at /usr/include/boost/smart_ptr/shared_ptr.hpp:323\n#11 0x00007ffff5b9a392 in gazebo::physics::Model::LoadPlugin (this=0x7fff3c1794c0, _sdf=std::shared_ptr (count 3, weak 5) 0x7fff368df950)\n    at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/Model.cc:1002\n#12 0x00007ffff5b999e2 in gazebo::physics::Model::LoadPlugins (this=0x7fff3c1794c0)\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n    at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/Model.cc:915\n#13 0x00007ffff5c08bd9 in gazebo::physics::World::ProcessFactoryMsgs (this=0x1654280)\n    at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/World.cc:1958\n#14 0x00007ffff5c0b9de in gazebo::physics::World::ProcessMessages (this=0x1654280)\n    at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/World.cc:2282\n#15 0x00007ffff5c0069f in gazebo::physics::World::Step (this=0x1654280) at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/World.cc:688\n#16 0x00007ffff5bff06c in gazebo::physics::World::RunLoop (this=0x1654280) at /home/deadmanlogan/i_am_from_source/Gazebo-7/gazebo/physics/World.cc:481\n#17 0x00007ffff5c2e413 in boost::_mfi::mf0&lt;void, gazebo::physics::World&gt;::operator() (this=0x12ac178, p=0x1654280)\n    at /usr/include/boost/bind/mem_fn_template.hpp:49\n#18 0x00007ffff5c2d4be in boost::_bi::list1&lt;boost::_bi::value&lt;gazebo::physics::World*&gt; &gt;::operator()&lt;boost::_mfi::mf0&lt;void, gazebo::physics::World&gt;, boost::_bi::list0&gt; (this=0x12ac188, f=..., a=...) at /usr/include/boost/bind/bind.hpp:253\n#19 0x00007ffff5c2b74a in boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, gazebo::physics::World&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;gazebo::physics::World*&gt; &gt; &gt;::operator() (this=0x12ac178) at /usr/include/boost/bind/bind.hpp:893\n#20 0x00007ffff5c3070a in boost::detail::thread_data&lt;boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, gazebo::physics::World&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;gazebo::physics::World*&gt; &gt; &gt; &gt;::run (this=0x12abfc0) at /usr/include/boost/thread/detail/thread.hpp:116\n#21 0x00007ffff35c65d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0\n#22 0x00007ffff79086ba in start_thread (arg=0x7fff63ffd700) at pthread_create.c:333\n#23 0x00007ffff64c741d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "7.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242744.json"}}}, "edited_on": null, "created_on": "2019-09-03T10:00:19.133843+00:00", "milestone": null, "updated_on": "2019-09-03T10:00:19.133843+00:00", "type": "issue", "id": 2656}