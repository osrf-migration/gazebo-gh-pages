{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2581/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2581.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2581/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2581/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2581/visualization-of-actors-in-gazebo-has"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2581/vote"}}, "reporter": {"display_name": "Ilea Baltashov", "uuid": "{c494d5a7-3ac7-412d-aa0e-df970a70e8f6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc494d5a7-3ac7-412d-aa0e-df970a70e8f6%7D"}, "html": {"href": "https://bitbucket.org/%7Bc494d5a7-3ac7-412d-aa0e-df970a70e8f6%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/bcbaa5e5462a04b98294ea0c4e6a03c9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsIB-0.png"}}, "nickname": "Baltic1996", "type": "user", "account_id": "5a785dd72d61371e861f6b1e"}, "title": "Visualization of actors in gazebo has friezes if they don\u2019t have skin and there are other moving objects in simulation.", "component": {"name": "gui", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122878.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "There are very strange friezes in object visualization in gazebo-gui when I use \u201cactors\u201d without skin and there are other moving objects in the simulation. This is quite a weird problem. For quick understanding of it you can watch the attached videos problem.mkv or problem_urdf.mkv. \r\n\r\n\r\nHere is some background information:\r\n\r\nNot so long ago I had to test some algorithms for a self-driving car and I decided to create a simple gazebo world with citysim as a basis. When I turned citysim on, I saw that all the cars were moving with some friezes but at the same time people were moving smoothly. Firstly, I tried to use a more powerful machine (i7-8700k+GTX1080) to turn on the simulation but the friezes were still there. Then I started cutting the world file until I thought of the circumstances when the friezes appeared. \r\n\r\nThey only appeared only in 2 conditions: \r\n\r\n1.\tActors have no skin tag or it is empty \u2013 there is only unempty link tag or include tag.\r\n\r\n2.\tThere is another moving object (not actor) added to the simulation. For example I used gazebo model \u00absckoda prius\u00bb or spawn simple ROS urdf file - R2D2.  \r\n\r\nHere are some important details: \r\n\r\n1.\tThe friezes only appear in visualization (gazebo-gui). When I use plot built-in gazebo I see that the position of the box is changing smoothly. Also when I use gazebo_ros_gpu_laser I see a smooth movement of points corresponding to the box in RVIZ. \r\n\r\n2.\tGazebo-gui works approximately on 60 Hz. This means that there are friezes only in some actors.  \r\n\r\n3.\tThe problem appears without the ROS usage (look problem.world). \r\n\r\n4.\tThe degree of the friezes doesn\u2019t depend on the presence and the type of the measuring sensors but depends only on the number of other moving objects (not actors) and number of links they have. The more powerful the PC is, the more objects there are needed (for example, 10 sckoda prius for i7-8700k+GTX1080). \r\n\r\nFor clarity I filmed a couple of simple videos and created two simple worlds (they are attached). Each of them has three actors:\r\n\r\n1.\tanimated_box \u2013 there is only link tag\r\n\r\n2.\tanimated_man \u2013 there is only skin tag\r\n\r\n3.\tanimated_man_box \u2013 there are both link \u0438 skin\r\n\r\nIn the \u00abno_problem.world\u00bb there is nothing else and as you can see all three objects are moving smoothly (see no_problem.mkv).\r\nIn the \u00abproblem.world\u00bb there are 5 added sckoda prius objects, which cause the appearance of the friezes in the visualization of the animated_box while animated_man and animated_man_box are moving smoothly. All other added objects are moving smoothly. (see problem*.mkv).\r\n\r\nI tested it on: \r\nUbuntu 16.04 + i5-6600+GTX1050 + gazebo 9.6 + nvidia 415 \r\nUbuntu 16.04 + i7-8700k+GTX1080 + gazebo 9.6 + nvidia 384", "markup": "markdown", "html": "<p>There are very strange friezes in object visualization in gazebo-gui when I use \u201cactors\u201d without skin and there are other moving objects in the simulation. This is quite a weird problem. For quick understanding of it you can watch the attached videos problem.mkv or problem_urdf.mkv. </p>\n<p>Here is some background information:</p>\n<p>Not so long ago I had to test some algorithms for a self-driving car and I decided to create a simple gazebo world with citysim as a basis. When I turned citysim on, I saw that all the cars were moving with some friezes but at the same time people were moving smoothly. Firstly, I tried to use a more powerful machine (i7-8700k+GTX1080) to turn on the simulation but the friezes were still there. Then I started cutting the world file until I thought of the circumstances when the friezes appeared. </p>\n<p>They only appeared only in 2 conditions: </p>\n<ol>\n<li>\n<p>Actors have no skin tag or it is empty \u2013 there is only unempty link tag or include tag.</p>\n</li>\n<li>\n<p>There is another moving object (not actor) added to the simulation. For example I used gazebo model \u00absckoda prius\u00bb or spawn simple ROS urdf file - R2D2.  </p>\n</li>\n</ol>\n<p>Here are some important details: </p>\n<ol>\n<li>\n<p>The friezes only appear in visualization (gazebo-gui). When I use plot built-in gazebo I see that the position of the box is changing smoothly. Also when I use gazebo_ros_gpu_laser I see a smooth movement of points corresponding to the box in RVIZ. </p>\n</li>\n<li>\n<p>Gazebo-gui works approximately on 60 Hz. This means that there are friezes only in some actors.  </p>\n</li>\n<li>\n<p>The problem appears without the ROS usage (look problem.world). </p>\n</li>\n<li>\n<p>The degree of the friezes doesn\u2019t depend on the presence and the type of the measuring sensors but depends only on the number of other moving objects (not actors) and number of links they have. The more powerful the PC is, the more objects there are needed (for example, 10 sckoda prius for i7-8700k+GTX1080). </p>\n</li>\n</ol>\n<p>For clarity I filmed a couple of simple videos and created two simple worlds (they are attached). Each of them has three actors:</p>\n<ol>\n<li>\n<p>animated_box \u2013 there is only link tag</p>\n</li>\n<li>\n<p>animated_man \u2013 there is only skin tag</p>\n</li>\n<li>\n<p>animated_man_box \u2013 there are both link \u0438 skin</p>\n</li>\n</ol>\n<p>In the \u00abno_problem.world\u00bb there is nothing else and as you can see all three objects are moving smoothly (see no_problem.mkv).\nIn the \u00abproblem.world\u00bb there are 5 added sckoda prius objects, which cause the appearance of the friezes in the visualization of the animated_box while animated_man and animated_man_box are moving smoothly. All other added objects are moving smoothly. (see problem*.mkv).</p>\n<p>I tested it on: \nUbuntu 16.04 + i5-6600+GTX1050 + gazebo 9.6 + nvidia 415 \nUbuntu 16.04 + i7-8700k+GTX1080 + gazebo 9.6 + nvidia 384</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "9.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242746.json"}}}, "edited_on": null, "created_on": "2019-01-05T18:10:23.978328+00:00", "milestone": null, "updated_on": "2019-01-05T18:10:23.978328+00:00", "type": "issue", "id": 2581}