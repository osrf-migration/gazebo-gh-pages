{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2569/comments/49490581.json"}, "html": {"href": "#!/osrf/gazebo/issues/2569#comment-49490581"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2569.json"}}, "type": "issue", "id": 2569, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Support for self-describing messages"}, "content": {"raw": "Dear @nkoenig I tried to follow your suggestion on using ignition Transport. I set up a publisher using ignition Transport Publisher in a plugin and, in another plugin, I setup the Subscriber, also from ignition Transport. I can see that the data is exchanged between the plugins, though, using `ign-tools`, more in specific, the echo tool, again, I am not able to echo any data coming from the publisher.\n\nThe publisher is setup like the following:\n```c++\nignition::transport::Node::Publisher m_baro_pub_ign_;\n...\nm_baro_pub_ign_ = node_ign_.Advertise<sensor_msgs::msgs::Baro>(\"/gazebo/default/\" + m_model->GetName() + m_baro_topic);\n...\nm_baro_pub_ign_.Publish(msg);\n```\n\nthe subscriber is setup as follows:\n```\nnode_ign_.Subscribe(\"/gazebo/default/\" + model_->GetName() + baro_sub_topic_, &GazeboMotorModel::BaroCallback_, this)\n\nvoid GazeboMotorModel::BaroCallback_(const sensor_msgs::msgs::Baro &baro_msg)\n{\n  ...\n}\n```\n\nIf I try to echo the topic using `ign topic --echo -t /gazebo/default/<model_name>/baro`, nothing is echoed, which leads me to think that the `ign-tools` is not able to process custom protobuf messages as gz-tools (only ignition messages or generic protobuf messages).\n\nAlso another note: I am not able to plug a Gazebo Transport publisher with a ignition Transport subscriber and vice-versa, using a custom protobuf messages, so that's why I decided to apply a publisher and a subscriber of the same type (ignition Transport). So I question the compatibility between the legacy Gazebo transport and the ignition Tranport for custom messages.\n\nAny tip you can give here?", "markup": "markdown", "html": "<p>Dear @nkoenig I tried to follow your suggestion on using ignition Transport. I set up a publisher using ignition Transport Publisher in a plugin and, in another plugin, I setup the Subscriber, also from ignition Transport. I can see that the data is exchanged between the plugins, though, using <code>ign-tools</code>, more in specific, the echo tool, again, I am not able to echo any data coming from the publisher.</p>\n<p>The publisher is setup like the following:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Node</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">m_baro_pub_ign_</span><span class=\"p\">;</span>\n<span class=\"p\">...</span>\n<span class=\"n\">m_baro_pub_ign_</span> <span class=\"o\">=</span> <span class=\"n\">node_ign_</span><span class=\"p\">.</span><span class=\"n\">Advertise</span><span class=\"o\">&lt;</span><span class=\"n\">sensor_msgs</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Baro</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"s\">&quot;/gazebo/default/&quot;</span> <span class=\"o\">+</span> <span class=\"n\">m_model</span><span class=\"o\">-&gt;</span><span class=\"n\">GetName</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"n\">m_baro_topic</span><span class=\"p\">);</span>\n<span class=\"p\">...</span>\n<span class=\"n\">m_baro_pub_ign_</span><span class=\"p\">.</span><span class=\"n\">Publish</span><span class=\"p\">(</span><span class=\"n\">msg</span><span class=\"p\">);</span>\n</pre></div>\n\n\n<p>the subscriber is setup as follows:</p>\n<div class=\"codehilite\"><pre><span></span>node_ign_.Subscribe(&quot;/gazebo/default/&quot; + model_-&gt;GetName() + baro_sub_topic_, &amp;GazeboMotorModel::BaroCallback_, this)\n\nvoid GazeboMotorModel::BaroCallback_(const sensor_msgs::msgs::Baro &amp;baro_msg)\n{\n  ...\n}\n</pre></div>\n\n\n<p>If I try to echo the topic using <code>ign topic --echo -t /gazebo/default/&lt;model_name&gt;/baro</code>, nothing is echoed, which leads me to think that the <code>ign-tools</code> is not able to process custom protobuf messages as gz-tools (only ignition messages or generic protobuf messages).</p>\n<p>Also another note: I am not able to plug a Gazebo Transport publisher with a ignition Transport subscriber and vice-versa, using a custom protobuf messages, so that's why I decided to apply a publisher and a subscriber of the same type (ignition Transport). So I question the compatibility between the legacy Gazebo transport and the ignition Tranport for custom messages.</p>\n<p>Any tip you can give here?</p>", "type": "rendered"}, "created_on": "2018-12-16T15:37:33.709968+00:00", "user": {"display_name": "Nuno Marques", "uuid": "{a7356a80-a26a-4ab7-af5b-494fe038a1c7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba7356a80-a26a-4ab7-af5b-494fe038a1c7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba7356a80-a26a-4ab7-af5b-494fe038a1c7%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2ae57099-6545-4ef4-8e48-3cd5f87b7f52/20fd74f9-d763-4f0e-b57f-c4570327e595/128"}}, "nickname": "TSC21", "type": "user", "account_id": "557058:2ae57099-6545-4ef4-8e48-3cd5f87b7f52"}, "updated_on": "2018-12-16T15:41:55.216181+00:00", "type": "issue_comment", "id": 49490581}