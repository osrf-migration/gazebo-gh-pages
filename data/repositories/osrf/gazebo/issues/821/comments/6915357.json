{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/6915357.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-6915357"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "I saw two instances of this test failure during heightmap tests in my overnight testing that seem similar. They were both preceded by the following:\n~~~\nC++ exception with description \"OGRE EXCEPTION(7:InternalErrorException):\nCannot create GL vertex buffer in GLHardwareVertexBuffer::GLHardwareVertexBuffer\nat /build/buildd/ogre-1.7.4/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp \n(line 46)\" thrown in the test body.\n~~~\nFirst failure:\n~~~\n65: Test command: /tmp/gazebo_build/source/build/gazebo/rendering/UNIT_Heightmap_TEST \"--gtest_output=xml:/tmp/gazebo_build/source/build/test_results/UNIT_Heightmap_TEST.xml\"\n65: Test timeout computed to be: 240\n65: [==========] Running 1 test from 1 test case.\n65: [----------] Global test environment set-up.\n65: [----------] 1 test from Heightmap_TEST\n65: [ RUN      ] Heightmap_TEST.splitTerrain\n65: \n65: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n65: Msg Publicized address: 192.168.1.187\n65: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n65: unknown file: Failure\n65: C++ exception with description \"OGRE EXCEPTION(7:InternalErrorException): Cannot create GL vertex buffer in GLHardwareVertexBuffer::GLHardwareVertexBuffer at /build/buildd/ogre-1.7.4/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp (line 46)\" thrown in the test body.\n65: Error [Connection.hh:264] Header is empty\n65: Error [Master.cc:124] Master got empty data message from[43463]\n...\n65: Master Unknown message type[] From[43463]\n...\n65: libprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp, type, serialized_data\n...\n~~~\nSecond failure:\n~~~\n65: Test command: /tmp/gazebo_build/source/build/gazebo/rendering/UNIT_Heightmap_TEST \"--gtest_output=xml:/tmp/gazebo_build/source/build/test_results/UNIT_Heightmap_TEST.xml\"\n65: Test timeout computed to be: 240\n65: [==========] Running 1 test from 1 test case.\n65: [----------] Global test environment set-up.\n65: [----------] 1 test from Heightmap_TEST\n65: [ RUN      ] Heightmap_TEST.splitTerrain\n65: \n65: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n65: Msg Publicized address: 192.168.1.187\n65: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n65: unknown file: Failure\n65: C++ exception with description \"OGRE EXCEPTION(7:InternalErrorException): Cannot create GL vertex buffer in GLHardwareVertexBuffer::GLHardwareVertexBuffer at /build/buildd/ogre-1.7.4/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp (line 46)\" thrown in the test body.\n65: Error [Connection.hh:264] Header is empty\n65: Error [Master.cc:124] Master got empty data message from[44248]\n...\n65: Master Unknown message type[] From[44248]\n65: libprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp, type, serialized_data\n...\n~~~\n~~~\n\n~~~", "markup": "markdown", "html": "<p>I saw two instances of this test failure during heightmap tests in my overnight testing that seem similar. They were both preceded by the following:</p>\n<div class=\"codehilite\"><pre><span></span>C++ exception with description &quot;OGRE EXCEPTION(7:InternalErrorException):\nCannot create GL vertex buffer in GLHardwareVertexBuffer::GLHardwareVertexBuffer\nat /build/buildd/ogre-1.7.4/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp \n(line 46)&quot; thrown in the test body.\n</pre></div>\n\n\n<p>First failure:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">65</span><span class=\"o\">:</span> <span class=\"n\">Test</span> <span class=\"n\">command</span><span class=\"o\">:</span> <span class=\"sr\">/tmp/gazebo_build/source/build/gazebo/rendering/UNIT_Heightmap_TEST &quot;--gtest_output=xml:/tmp/gazebo_build/source/build/test_results/</span><span class=\"n\">UNIT_Heightmap_TEST</span><span class=\"o\">.</span><span class=\"na\">xml</span><span class=\"s2\">&quot;</span>\n<span class=\"s2\">65: Test timeout computed to be: 240</span>\n<span class=\"s2\">65: [==========] Running 1 test from 1 test case.</span>\n<span class=\"s2\">65: [----------] Global test environment set-up.</span>\n<span class=\"s2\">65: [----------] 1 test from Heightmap_TEST</span>\n<span class=\"s2\">65: [ RUN      ] Heightmap_TEST.splitTerrain</span>\n<span class=\"s2\">65: </span>\n<span class=\"s2\">65: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345</span>\n<span class=\"s2\">65: Msg Publicized address: 192.168.1.187</span>\n<span class=\"s2\">65: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds</span>\n<span class=\"s2\">65: unknown file: Failure</span>\n<span class=\"s2\">65: C++ exception with description &quot;</span><span class=\"n\">OGRE</span> <span class=\"n\">EXCEPTION</span><span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"o\">:</span><span class=\"n\">InternalErrorException</span><span class=\"o\">):</span> <span class=\"n\">Cannot</span> <span class=\"n\">create</span> <span class=\"n\">GL</span> <span class=\"n\">vertex</span> <span class=\"n\">buffer</span> <span class=\"k\">in</span> <span class=\"n\">GLHardwareVertexBuffer</span><span class=\"o\">::</span><span class=\"n\">GLHardwareVertexBuffer</span> <span class=\"n\">at</span> <span class=\"sr\">/build/buildd/ogre-1.7.4/RenderSystems/GL/src/</span><span class=\"n\">OgreGLHardwareVertexBuffer</span><span class=\"o\">.</span><span class=\"na\">cpp</span> <span class=\"o\">(</span><span class=\"n\">line</span> <span class=\"mi\">46</span><span class=\"o\">)</span><span class=\"s2\">&quot; thrown in the test body.</span>\n<span class=\"s2\">65: Error [Connection.hh:264] Header is empty</span>\n<span class=\"s2\">65: Error [Master.cc:124] Master got empty data message from[43463]</span>\n<span class=\"s2\">...</span>\n<span class=\"s2\">65: Master Unknown message type[] From[43463]</span>\n<span class=\"s2\">...</span>\n<span class=\"s2\">65: libprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;</span><span class=\"n\">gazebo</span><span class=\"o\">.</span><span class=\"na\">msgs</span><span class=\"o\">.</span><span class=\"na\">Packet</span><span class=\"err\">&quot;</span> <span class=\"n\">because</span> <span class=\"n\">it</span> <span class=\"k\">is</span> <span class=\"n\">missing</span> <span class=\"n\">required</span> <span class=\"n\">fields</span><span class=\"o\">:</span> <span class=\"n\">stamp</span><span class=\"o\">,</span> <span class=\"n\">type</span><span class=\"o\">,</span> <span class=\"n\">serialized_data</span>\n<span class=\"o\">...</span>\n</pre></div>\n\n\n<p>Second failure:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">65</span><span class=\"o\">:</span> <span class=\"n\">Test</span> <span class=\"n\">command</span><span class=\"o\">:</span> <span class=\"sr\">/tmp/gazebo_build/source/build/gazebo/rendering/UNIT_Heightmap_TEST &quot;--gtest_output=xml:/tmp/gazebo_build/source/build/test_results/</span><span class=\"n\">UNIT_Heightmap_TEST</span><span class=\"o\">.</span><span class=\"na\">xml</span><span class=\"s2\">&quot;</span>\n<span class=\"s2\">65: Test timeout computed to be: 240</span>\n<span class=\"s2\">65: [==========] Running 1 test from 1 test case.</span>\n<span class=\"s2\">65: [----------] Global test environment set-up.</span>\n<span class=\"s2\">65: [----------] 1 test from Heightmap_TEST</span>\n<span class=\"s2\">65: [ RUN      ] Heightmap_TEST.splitTerrain</span>\n<span class=\"s2\">65: </span>\n<span class=\"s2\">65: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345</span>\n<span class=\"s2\">65: Msg Publicized address: 192.168.1.187</span>\n<span class=\"s2\">65: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds</span>\n<span class=\"s2\">65: unknown file: Failure</span>\n<span class=\"s2\">65: C++ exception with description &quot;</span><span class=\"n\">OGRE</span> <span class=\"n\">EXCEPTION</span><span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"o\">:</span><span class=\"n\">InternalErrorException</span><span class=\"o\">):</span> <span class=\"n\">Cannot</span> <span class=\"n\">create</span> <span class=\"n\">GL</span> <span class=\"n\">vertex</span> <span class=\"n\">buffer</span> <span class=\"k\">in</span> <span class=\"n\">GLHardwareVertexBuffer</span><span class=\"o\">::</span><span class=\"n\">GLHardwareVertexBuffer</span> <span class=\"n\">at</span> <span class=\"sr\">/build/buildd/ogre-1.7.4/RenderSystems/GL/src/</span><span class=\"n\">OgreGLHardwareVertexBuffer</span><span class=\"o\">.</span><span class=\"na\">cpp</span> <span class=\"o\">(</span><span class=\"n\">line</span> <span class=\"mi\">46</span><span class=\"o\">)</span><span class=\"s2\">&quot; thrown in the test body.</span>\n<span class=\"s2\">65: Error [Connection.hh:264] Header is empty</span>\n<span class=\"s2\">65: Error [Master.cc:124] Master got empty data message from[44248]</span>\n<span class=\"s2\">...</span>\n<span class=\"s2\">65: Master Unknown message type[] From[44248]</span>\n<span class=\"s2\">65: libprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;</span><span class=\"n\">gazebo</span><span class=\"o\">.</span><span class=\"na\">msgs</span><span class=\"o\">.</span><span class=\"na\">Packet</span><span class=\"err\">&quot;</span> <span class=\"n\">because</span> <span class=\"n\">it</span> <span class=\"k\">is</span> <span class=\"n\">missing</span> <span class=\"n\">required</span> <span class=\"n\">fields</span><span class=\"o\">:</span> <span class=\"n\">stamp</span><span class=\"o\">,</span> <span class=\"n\">type</span><span class=\"o\">,</span> <span class=\"n\">serialized_data</span>\n<span class=\"o\">...</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>\n</pre></div>", "type": "rendered"}, "created_on": "2013-11-15T18:26:51.721809+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 6915357}