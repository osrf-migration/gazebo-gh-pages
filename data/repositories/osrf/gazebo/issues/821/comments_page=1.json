{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/5917853.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-5917853"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "I've seen this once, when running a regression test on a feature branch off of default. The test still passed though.\n~~~\n[==========] Running 6 tests from 2 test cases.\n[----------] Global test environment set-up.\n[----------] 3 tests from TestODE/PhysicsMsgsTest\n[ RUN      ] TestODE/PhysicsMsgsTest.SetGravity/0\nMsg Waiting for master\nMsg Connected to gazebo master @ http://127.0.0.1:11345\nMsg Publicized address: 192.168.1.183\nDbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\nError [Connection.hh:264] Header is empty\nError [Master.cc:124] Master got empty data message from[38085]\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp\n[       OK ] TestODE/PhysicsMsgsTest.SetGravity/0 (1260 ms)\n~~~", "markup": "markdown", "html": "<p>I've seen this once, when running a regression test on a feature branch off of default. The test still passed though.</p>\n<div class=\"codehilite\"><pre><span></span>[==========] Running 6 tests from 2 test cases.\n[----------] Global test environment set-up.\n[----------] 3 tests from TestODE/PhysicsMsgsTest\n[ RUN      ] TestODE/PhysicsMsgsTest.SetGravity/0\nMsg Waiting for master\nMsg Connected to gazebo master @ http://127.0.0.1:11345\nMsg Publicized address: 192.168.1.183\nDbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\nError [Connection.hh:264] Header is empty\nError [Master.cc:124] Master got empty data message from[38085]\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp\nlibprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp\n[       OK ] TestODE/PhysicsMsgsTest.SetGravity/0 (1260 ms)\n</pre></div>", "type": "rendered"}, "created_on": "2013-09-03T20:52:58.548654+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 5917853}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/6770666.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-6770666"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2013-11-06T07:44:41.411713+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 6770666}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/6915357.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-6915357"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "I saw two instances of this test failure during heightmap tests in my overnight testing that seem similar. They were both preceded by the following:\n~~~\nC++ exception with description \"OGRE EXCEPTION(7:InternalErrorException):\nCannot create GL vertex buffer in GLHardwareVertexBuffer::GLHardwareVertexBuffer\nat /build/buildd/ogre-1.7.4/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp \n(line 46)\" thrown in the test body.\n~~~\nFirst failure:\n~~~\n65: Test command: /tmp/gazebo_build/source/build/gazebo/rendering/UNIT_Heightmap_TEST \"--gtest_output=xml:/tmp/gazebo_build/source/build/test_results/UNIT_Heightmap_TEST.xml\"\n65: Test timeout computed to be: 240\n65: [==========] Running 1 test from 1 test case.\n65: [----------] Global test environment set-up.\n65: [----------] 1 test from Heightmap_TEST\n65: [ RUN      ] Heightmap_TEST.splitTerrain\n65: \n65: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n65: Msg Publicized address: 192.168.1.187\n65: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n65: unknown file: Failure\n65: C++ exception with description \"OGRE EXCEPTION(7:InternalErrorException): Cannot create GL vertex buffer in GLHardwareVertexBuffer::GLHardwareVertexBuffer at /build/buildd/ogre-1.7.4/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp (line 46)\" thrown in the test body.\n65: Error [Connection.hh:264] Header is empty\n65: Error [Master.cc:124] Master got empty data message from[43463]\n...\n65: Master Unknown message type[] From[43463]\n...\n65: libprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp, type, serialized_data\n...\n~~~\nSecond failure:\n~~~\n65: Test command: /tmp/gazebo_build/source/build/gazebo/rendering/UNIT_Heightmap_TEST \"--gtest_output=xml:/tmp/gazebo_build/source/build/test_results/UNIT_Heightmap_TEST.xml\"\n65: Test timeout computed to be: 240\n65: [==========] Running 1 test from 1 test case.\n65: [----------] Global test environment set-up.\n65: [----------] 1 test from Heightmap_TEST\n65: [ RUN      ] Heightmap_TEST.splitTerrain\n65: \n65: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n65: Msg Publicized address: 192.168.1.187\n65: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n65: unknown file: Failure\n65: C++ exception with description \"OGRE EXCEPTION(7:InternalErrorException): Cannot create GL vertex buffer in GLHardwareVertexBuffer::GLHardwareVertexBuffer at /build/buildd/ogre-1.7.4/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp (line 46)\" thrown in the test body.\n65: Error [Connection.hh:264] Header is empty\n65: Error [Master.cc:124] Master got empty data message from[44248]\n...\n65: Master Unknown message type[] From[44248]\n65: libprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp, type, serialized_data\n...\n~~~\n~~~\n\n~~~", "markup": "markdown", "html": "<p>I saw two instances of this test failure during heightmap tests in my overnight testing that seem similar. They were both preceded by the following:</p>\n<div class=\"codehilite\"><pre><span></span>C++ exception with description &quot;OGRE EXCEPTION(7:InternalErrorException):\nCannot create GL vertex buffer in GLHardwareVertexBuffer::GLHardwareVertexBuffer\nat /build/buildd/ogre-1.7.4/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp \n(line 46)&quot; thrown in the test body.\n</pre></div>\n\n\n<p>First failure:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">65</span><span class=\"o\">:</span> <span class=\"n\">Test</span> <span class=\"n\">command</span><span class=\"o\">:</span> <span class=\"sr\">/tmp/gazebo_build/source/build/gazebo/rendering/UNIT_Heightmap_TEST &quot;--gtest_output=xml:/tmp/gazebo_build/source/build/test_results/</span><span class=\"n\">UNIT_Heightmap_TEST</span><span class=\"o\">.</span><span class=\"na\">xml</span><span class=\"s2\">&quot;</span>\n<span class=\"s2\">65: Test timeout computed to be: 240</span>\n<span class=\"s2\">65: [==========] Running 1 test from 1 test case.</span>\n<span class=\"s2\">65: [----------] Global test environment set-up.</span>\n<span class=\"s2\">65: [----------] 1 test from Heightmap_TEST</span>\n<span class=\"s2\">65: [ RUN      ] Heightmap_TEST.splitTerrain</span>\n<span class=\"s2\">65: </span>\n<span class=\"s2\">65: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345</span>\n<span class=\"s2\">65: Msg Publicized address: 192.168.1.187</span>\n<span class=\"s2\">65: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds</span>\n<span class=\"s2\">65: unknown file: Failure</span>\n<span class=\"s2\">65: C++ exception with description &quot;</span><span class=\"n\">OGRE</span> <span class=\"n\">EXCEPTION</span><span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"o\">:</span><span class=\"n\">InternalErrorException</span><span class=\"o\">):</span> <span class=\"n\">Cannot</span> <span class=\"n\">create</span> <span class=\"n\">GL</span> <span class=\"n\">vertex</span> <span class=\"n\">buffer</span> <span class=\"k\">in</span> <span class=\"n\">GLHardwareVertexBuffer</span><span class=\"o\">::</span><span class=\"n\">GLHardwareVertexBuffer</span> <span class=\"n\">at</span> <span class=\"sr\">/build/buildd/ogre-1.7.4/RenderSystems/GL/src/</span><span class=\"n\">OgreGLHardwareVertexBuffer</span><span class=\"o\">.</span><span class=\"na\">cpp</span> <span class=\"o\">(</span><span class=\"n\">line</span> <span class=\"mi\">46</span><span class=\"o\">)</span><span class=\"s2\">&quot; thrown in the test body.</span>\n<span class=\"s2\">65: Error [Connection.hh:264] Header is empty</span>\n<span class=\"s2\">65: Error [Master.cc:124] Master got empty data message from[43463]</span>\n<span class=\"s2\">...</span>\n<span class=\"s2\">65: Master Unknown message type[] From[43463]</span>\n<span class=\"s2\">...</span>\n<span class=\"s2\">65: libprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;</span><span class=\"n\">gazebo</span><span class=\"o\">.</span><span class=\"na\">msgs</span><span class=\"o\">.</span><span class=\"na\">Packet</span><span class=\"err\">&quot;</span> <span class=\"n\">because</span> <span class=\"n\">it</span> <span class=\"k\">is</span> <span class=\"n\">missing</span> <span class=\"n\">required</span> <span class=\"n\">fields</span><span class=\"o\">:</span> <span class=\"n\">stamp</span><span class=\"o\">,</span> <span class=\"n\">type</span><span class=\"o\">,</span> <span class=\"n\">serialized_data</span>\n<span class=\"o\">...</span>\n</pre></div>\n\n\n<p>Second failure:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">65</span><span class=\"o\">:</span> <span class=\"n\">Test</span> <span class=\"n\">command</span><span class=\"o\">:</span> <span class=\"sr\">/tmp/gazebo_build/source/build/gazebo/rendering/UNIT_Heightmap_TEST &quot;--gtest_output=xml:/tmp/gazebo_build/source/build/test_results/</span><span class=\"n\">UNIT_Heightmap_TEST</span><span class=\"o\">.</span><span class=\"na\">xml</span><span class=\"s2\">&quot;</span>\n<span class=\"s2\">65: Test timeout computed to be: 240</span>\n<span class=\"s2\">65: [==========] Running 1 test from 1 test case.</span>\n<span class=\"s2\">65: [----------] Global test environment set-up.</span>\n<span class=\"s2\">65: [----------] 1 test from Heightmap_TEST</span>\n<span class=\"s2\">65: [ RUN      ] Heightmap_TEST.splitTerrain</span>\n<span class=\"s2\">65: </span>\n<span class=\"s2\">65: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345</span>\n<span class=\"s2\">65: Msg Publicized address: 192.168.1.187</span>\n<span class=\"s2\">65: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds</span>\n<span class=\"s2\">65: unknown file: Failure</span>\n<span class=\"s2\">65: C++ exception with description &quot;</span><span class=\"n\">OGRE</span> <span class=\"n\">EXCEPTION</span><span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"o\">:</span><span class=\"n\">InternalErrorException</span><span class=\"o\">):</span> <span class=\"n\">Cannot</span> <span class=\"n\">create</span> <span class=\"n\">GL</span> <span class=\"n\">vertex</span> <span class=\"n\">buffer</span> <span class=\"k\">in</span> <span class=\"n\">GLHardwareVertexBuffer</span><span class=\"o\">::</span><span class=\"n\">GLHardwareVertexBuffer</span> <span class=\"n\">at</span> <span class=\"sr\">/build/buildd/ogre-1.7.4/RenderSystems/GL/src/</span><span class=\"n\">OgreGLHardwareVertexBuffer</span><span class=\"o\">.</span><span class=\"na\">cpp</span> <span class=\"o\">(</span><span class=\"n\">line</span> <span class=\"mi\">46</span><span class=\"o\">)</span><span class=\"s2\">&quot; thrown in the test body.</span>\n<span class=\"s2\">65: Error [Connection.hh:264] Header is empty</span>\n<span class=\"s2\">65: Error [Master.cc:124] Master got empty data message from[44248]</span>\n<span class=\"s2\">...</span>\n<span class=\"s2\">65: Master Unknown message type[] From[44248]</span>\n<span class=\"s2\">65: libprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;</span><span class=\"n\">gazebo</span><span class=\"o\">.</span><span class=\"na\">msgs</span><span class=\"o\">.</span><span class=\"na\">Packet</span><span class=\"err\">&quot;</span> <span class=\"n\">because</span> <span class=\"n\">it</span> <span class=\"k\">is</span> <span class=\"n\">missing</span> <span class=\"n\">required</span> <span class=\"n\">fields</span><span class=\"o\">:</span> <span class=\"n\">stamp</span><span class=\"o\">,</span> <span class=\"n\">type</span><span class=\"o\">,</span> <span class=\"n\">serialized_data</span>\n<span class=\"o\">...</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>\n</pre></div>", "type": "rendered"}, "created_on": "2013-11-15T18:26:51.721809+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 6915357}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/6918048.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-6918048"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "Pull request #768 may fix this problem", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/pull-requests/768/update-transport-integration-test-and-fix\" rel=\"nofollow\" class=\"ap-connect-link\">Pull request #768</a> may fix this problem</p>", "type": "rendered"}, "created_on": "2013-11-15T23:49:31.054733+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 6918048}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/6983258.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-6983258"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "Speaking of pull request #768, I've been testing it in my overnight scripts, and I found an instance where these error messages occur towards the end of a multi-test sequence:\n~~~\n141: [==========] Running 15 tests from 1 test case.\n141: [----------] Global test environment set-up.\n141: [----------] 15 tests from PhysicsEngines/LaserTest\n...\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserNoise/2\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: Error [Connection.hh:264] Header is empty\n141: Exception [msgs.cc:111] Can't serialize message of type[gazebo.msgs.Publish] because it is missing required fields\n141: \n141: terminate called after throwing an instance of 'gazebo::common::Exception'\n~~~\n\nFull console output\n~~~\n141: [==========] Running 15 tests from 1 test case.\n141: [----------] Global test environment set-up.\n141: [----------] 15 tests from PhysicsEngines/LaserTest\n141: [ RUN      ] PhysicsEngines/LaserTest.EmptyWorld/0\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.1 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.EmptyWorld/0 (3182 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.EmptyWorld/1\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.EmptyWorld/1 (2690 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.EmptyWorld/2\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.EmptyWorld/2 (2682 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserBox/0\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.LaserBox/0 (2359 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserBox/1\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.1 seconds, timeout after 60 seconds\n141: Warning [laser.cc:185] Raising sensor for bullet as workaround for #934\n141: [       OK ] PhysicsEngines/LaserTest.LaserBox/1 (2142 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserBox/2\n141: Error [laser.cc:160] Abort test since simbody does not support ray sensor, Please see issue #867.\n141: [       OK ] PhysicsEngines/LaserTest.LaserBox/2 (1 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserVertical/0\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.LaserVertical/0 (2962 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserVertical/1\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.LaserVertical/1 (1673 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserVertical/2\n141: Error [laser.cc:261] Abort test since simbody does not support ray sensor, Please see issue #867.\n141: [       OK ] PhysicsEngines/LaserTest.LaserVertical/2 (0 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.GroundPlane/0\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.GroundPlane/0 (3570 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.GroundPlane/1\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.GroundPlane/1 (1466 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.GroundPlane/2\n141: [       OK ] PhysicsEngines/LaserTest.GroundPlane/2 (0 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserNoise/0\n141: Error [laser.cc:357] Abort test since simbody does not support ray sensor, Please see issue #867.\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.LaserNoise/0 (1643 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserNoise/1\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.LaserNoise/1 (1441 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserNoise/2\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: Error [Connection.hh:264] Header is empty\n141: Exception [msgs.cc:111] Can't serialize message of type[gazebo.msgs.Publish] because it is missing required fields\n141: \n141: terminate called after throwing an instance of 'gazebo::common::Exception'\n~~~", "markup": "markdown", "html": "<p>Speaking of <a href=\"#!/osrf/gazebo/pull-requests/768/update-transport-integration-test-and-fix\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #768</a>, I've been testing it in my overnight scripts, and I found an instance where these error messages occur towards the end of a multi-test sequence:</p>\n<div class=\"codehilite\"><pre><span></span>141: [==========] Running 15 tests from 1 test case.\n141: [----------] Global test environment set-up.\n141: [----------] 15 tests from PhysicsEngines/LaserTest\n...\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserNoise/2\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: Error [Connection.hh:264] Header is empty\n141: Exception [msgs.cc:111] Can&#39;t serialize message of type[gazebo.msgs.Publish] because it is missing required fields\n141: \n141: terminate called after throwing an instance of &#39;gazebo::common::Exception&#39;\n</pre></div>\n\n\n<p>Full console output</p>\n<div class=\"codehilite\"><pre><span></span>141: [==========] Running 15 tests from 1 test case.\n141: [----------] Global test environment set-up.\n141: [----------] 15 tests from PhysicsEngines/LaserTest\n141: [ RUN      ] PhysicsEngines/LaserTest.EmptyWorld/0\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.1 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.EmptyWorld/0 (3182 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.EmptyWorld/1\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.EmptyWorld/1 (2690 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.EmptyWorld/2\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.EmptyWorld/2 (2682 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserBox/0\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.LaserBox/0 (2359 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserBox/1\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.1 seconds, timeout after 60 seconds\n141: Warning [laser.cc:185] Raising sensor for bullet as workaround for #934\n141: [       OK ] PhysicsEngines/LaserTest.LaserBox/1 (2142 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserBox/2\n141: Error [laser.cc:160] Abort test since simbody does not support ray sensor, Please see issue #867.\n141: [       OK ] PhysicsEngines/LaserTest.LaserBox/2 (1 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserVertical/0\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.LaserVertical/0 (2962 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserVertical/1\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.LaserVertical/1 (1673 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserVertical/2\n141: Error [laser.cc:261] Abort test since simbody does not support ray sensor, Please see issue #867.\n141: [       OK ] PhysicsEngines/LaserTest.LaserVertical/2 (0 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.GroundPlane/0\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.GroundPlane/0 (3570 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.GroundPlane/1\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.GroundPlane/1 (1466 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.GroundPlane/2\n141: [       OK ] PhysicsEngines/LaserTest.GroundPlane/2 (0 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserNoise/0\n141: Error [laser.cc:357] Abort test since simbody does not support ray sensor, Please see issue #867.\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.LaserNoise/0 (1643 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserNoise/1\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: [       OK ] PhysicsEngines/LaserTest.LaserNoise/1 (1441 ms)\n141: [ RUN      ] PhysicsEngines/LaserTest.LaserNoise/2\n141: \n141: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n141: Msg Publicized address: 192.168.1.187\n141: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n141: Error [Connection.hh:264] Header is empty\n141: Exception [msgs.cc:111] Can&#39;t serialize message of type[gazebo.msgs.Publish] because it is missing required fields\n141: \n141: terminate called after throwing an instance of &#39;gazebo::common::Exception&#39;\n</pre></div>", "type": "rendered"}, "created_on": "2013-11-20T18:02:13.093958+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 6983258}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/7379550.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-7379550"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "Just got a backtrace from a test failure showing the following console message ([see everything here](https://gist.github.com/scpeters/7995310)):\n~~~\nError [Connection.hh:264] Header is empty\nException [msgs.cc:111] Can't serialize message of type[gazebo.msgs.Publish]\n because it is missing required fields\n~~~\nFailing thread: gazebo::Master\n~~~\nThread 1 (Thread 0x2b25bfbc1700 (LWP 19084)):\n#0  0x00002b255091f425 in __GI_raise (sig=<optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n#1  0x00002b2550922b8b in __GI_abort () at abort.c:91\n#2  0x00002b2550133e2d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3  0x00002b2550131f26 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4  0x00002b2550131f53 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5  0x00002b255013217e in __cxa_throw () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6  0x00002b254e660879 in gazebo::msgs::Package (type=..., message=...) at /tmp/gazebo_build/source/gazebo/msgs/msgs.cc:110\n#7  0x00000000004a8475 in gazebo::Master::ProcessMessage (this=this@entry=0x2b257095f610, _connectionIndex=0, _data=...)\n    at /tmp/gazebo_build/source/gazebo/Master.cc:175\n#8  0x00000000004a9327 in gazebo::Master::RunOnce (this=this@entry=0x2b257095f610) at /tmp/gazebo_build/source/gazebo/Master.cc:321\n#9  0x00000000004a94f0 in gazebo::Master::Run (this=0x2b257095f610) at /tmp/gazebo_build/source/gazebo/Master.cc:299\n---Type <return> to continue, or q <return> to quit---\n#10 0x00002b254f8336c9 in ?? () from /usr/lib/libboost_thread.so.1.49.0\n#11 0x00002b254eb98e9a in start_thread (arg=0x2b25bfbc1700) at pthread_create.c:308\n#12 0x00002b25509dd3fd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\n#13 0x0000000000000000 in ?? ()\n~~~\nTesting thread is waiting for the world to load at [ServerFixture.cc:171](#!/osrf/gazebo/src/eb6b4778b530fe2a3e46ed4a7f126fb97e8b0ea8/test/ServerFixture.cc?at=default#cl-171):\n~~~\nThread 9 (Thread 0x2b25684df180 (LWP 19001)):\n#0  clock_nanosleep (clock_id=<optimized out>, flags=<optimized out>, req=<optimized out>, rem=<optimized out>)\n    at ../sysdeps/unix/sysv/linux/clock_nanosleep.c:51\n#1  0x00002b254d623026 in gazebo::common::Time::Sleep (_time=...) at /tmp/gazebo_build/source/gazebo/common/Time.cc:195\n#2  0x00002b254d623453 in gazebo::common::Time::MSleep (_ms=<optimized out>) at /tmp/gazebo_build/source/gazebo/common/Time.cc:214\n#3  0x00000000004847a9 in ServerFixture::Load (this=this@entry=0x1790990, _worldFilename=..., _paused=_paused@entry=true, _physics=...)\n    at /tmp/gazebo_build/source/test/ServerFixture.cc:171\n#4  0x0000000000458842 in ImuTest::Stationary_EmptyWorld_Noise (this=this@entry=0x1790990, _physicsEngine=...)\n    at /tmp/gazebo_build/source/test/integration/imu.cc:142\n#5  0x00000000004598fc in ImuTest_EmptyWorldNoise_Test::TestBody (this=0x1790990) at /tmp/gazebo_build/source/test/integration/imu.cc:215\n#6  0x00000000004803ca in HandleSehExceptionsInMethodIfSupported<testing::Test, void> (method=<optimized out>, object=<optimized out>, \n    location=<optimized out>) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2079\n#7  testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void> (object=object@entry=0x1790990, \n    method=&virtual testing::Test::TestBody(), location=location@entry=0x4b1d01 \"the test body\")\n    at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2115\n#8  0x00000000004722b9 in testing::Test::Run (this=this@entry=0x1790990) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2152\n#9  0x0000000000472397 in testing::TestInfo::Run (this=0x17895e0) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2327\n#10 0x00000000004724d5 in testing::TestCase::Run (this=0x1788f30) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2445\n#11 0x0000000000472845 in RunAllTests (this=0x1786bd0) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:4316\n#12 testing::internal::UnitTestImpl::RunAllTests (this=0x1786bd0) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:4223\n#13 0x000000000047ff4a in HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool> (method=<optimized out>, \n    object=<optimized out>, location=<optimized out>) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2079\n#14 testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool> (object=0x1786bd0, method=\n    (bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x472550 <testing::internal::UnitTestImpl::RunAllTests()>, \n    location=location@entry=0x4b2c78 \"auxiliary test code (environments or event listeners)\") at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2115\n#15 0x00000000004719dd in testing::UnitTest::Run (this=0x6df520 <testing::UnitTest::GetInstance()::instance>)\n    at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:3930\n#16 0x00000000004541c0 in RUN_ALL_TESTS () at /tmp/gazebo_build/source/test/gtest/include/gtest/gtest.h:2288\n#17 main (argc=1, argv=0x7fff25a57da8) at /tmp/gazebo_build/source/test/integration/imu.cc:311\n~~~", "markup": "markdown", "html": "<p>Just got a backtrace from a test failure showing the following console message (<a data-is-external-link=\"true\" href=\"https://gist.github.com/scpeters/7995310\" rel=\"nofollow\">see everything here</a>):</p>\n<div class=\"codehilite\"><pre><span></span>Error [Connection.hh:264] Header is empty\nException [msgs.cc:111] Can&#39;t serialize message of type[gazebo.msgs.Publish]\n because it is missing required fields\n</pre></div>\n\n\n<p>Failing thread: gazebo::Master</p>\n<div class=\"codehilite\"><pre><span></span>Thread 1 (Thread 0x2b25bfbc1700 (LWP 19084)):\n#0  0x00002b255091f425 in __GI_raise (sig=&lt;optimized out&gt;) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n#1  0x00002b2550922b8b in __GI_abort () at abort.c:91\n#2  0x00002b2550133e2d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3  0x00002b2550131f26 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4  0x00002b2550131f53 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5  0x00002b255013217e in __cxa_throw () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6  0x00002b254e660879 in gazebo::msgs::Package (type=..., message=...) at /tmp/gazebo_build/source/gazebo/msgs/msgs.cc:110\n#7  0x00000000004a8475 in gazebo::Master::ProcessMessage (this=this@entry=0x2b257095f610, _connectionIndex=0, _data=...)\n    at /tmp/gazebo_build/source/gazebo/Master.cc:175\n#8  0x00000000004a9327 in gazebo::Master::RunOnce (this=this@entry=0x2b257095f610) at /tmp/gazebo_build/source/gazebo/Master.cc:321\n#9  0x00000000004a94f0 in gazebo::Master::Run (this=0x2b257095f610) at /tmp/gazebo_build/source/gazebo/Master.cc:299\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n#10 0x00002b254f8336c9 in ?? () from /usr/lib/libboost_thread.so.1.49.0\n#11 0x00002b254eb98e9a in start_thread (arg=0x2b25bfbc1700) at pthread_create.c:308\n#12 0x00002b25509dd3fd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\n#13 0x0000000000000000 in ?? ()\n</pre></div>\n\n\n<p>Testing thread is waiting for the world to load at <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/eb6b4778b530fe2a3e46ed4a7f126fb97e8b0ea8/test/ServerFixture.cc?at=default#cl-171\" rel=\"nofollow\">ServerFixture.cc:171</a>:</p>\n<div class=\"codehilite\"><pre><span></span>Thread 9 (Thread 0x2b25684df180 (LWP 19001)):\n#0  clock_nanosleep (clock_id=&lt;optimized out&gt;, flags=&lt;optimized out&gt;, req=&lt;optimized out&gt;, rem=&lt;optimized out&gt;)\n    at ../sysdeps/unix/sysv/linux/clock_nanosleep.c:51\n#1  0x00002b254d623026 in gazebo::common::Time::Sleep (_time=...) at /tmp/gazebo_build/source/gazebo/common/Time.cc:195\n#2  0x00002b254d623453 in gazebo::common::Time::MSleep (_ms=&lt;optimized out&gt;) at /tmp/gazebo_build/source/gazebo/common/Time.cc:214\n#3  0x00000000004847a9 in ServerFixture::Load (this=this@entry=0x1790990, _worldFilename=..., _paused=_paused@entry=true, _physics=...)\n    at /tmp/gazebo_build/source/test/ServerFixture.cc:171\n#4  0x0000000000458842 in ImuTest::Stationary_EmptyWorld_Noise (this=this@entry=0x1790990, _physicsEngine=...)\n    at /tmp/gazebo_build/source/test/integration/imu.cc:142\n#5  0x00000000004598fc in ImuTest_EmptyWorldNoise_Test::TestBody (this=0x1790990) at /tmp/gazebo_build/source/test/integration/imu.cc:215\n#6  0x00000000004803ca in HandleSehExceptionsInMethodIfSupported&lt;testing::Test, void&gt; (method=&lt;optimized out&gt;, object=&lt;optimized out&gt;, \n    location=&lt;optimized out&gt;) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2079\n#7  testing::internal::HandleExceptionsInMethodIfSupported&lt;testing::Test, void&gt; (object=object@entry=0x1790990, \n    method=&amp;virtual testing::Test::TestBody(), location=location@entry=0x4b1d01 &quot;the test body&quot;)\n    at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2115\n#8  0x00000000004722b9 in testing::Test::Run (this=this@entry=0x1790990) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2152\n#9  0x0000000000472397 in testing::TestInfo::Run (this=0x17895e0) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2327\n#10 0x00000000004724d5 in testing::TestCase::Run (this=0x1788f30) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2445\n#11 0x0000000000472845 in RunAllTests (this=0x1786bd0) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:4316\n#12 testing::internal::UnitTestImpl::RunAllTests (this=0x1786bd0) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:4223\n#13 0x000000000047ff4a in HandleSehExceptionsInMethodIfSupported&lt;testing::internal::UnitTestImpl, bool&gt; (method=&lt;optimized out&gt;, \n    object=&lt;optimized out&gt;, location=&lt;optimized out&gt;) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2079\n#14 testing::internal::HandleExceptionsInMethodIfSupported&lt;testing::internal::UnitTestImpl, bool&gt; (object=0x1786bd0, method=\n    (bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x472550 &lt;testing::internal::UnitTestImpl::RunAllTests()&gt;, \n    location=location@entry=0x4b2c78 &quot;auxiliary test code (environments or event listeners)&quot;) at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:2115\n#15 0x00000000004719dd in testing::UnitTest::Run (this=0x6df520 &lt;testing::UnitTest::GetInstance()::instance&gt;)\n    at /tmp/gazebo_build/source/test/gtest/src/gtest.cc:3930\n#16 0x00000000004541c0 in RUN_ALL_TESTS () at /tmp/gazebo_build/source/test/gtest/include/gtest/gtest.h:2288\n#17 main (argc=1, argv=0x7fff25a57da8) at /tmp/gazebo_build/source/test/integration/imu.cc:311\n</pre></div>", "type": "rendered"}, "created_on": "2013-12-16T22:27:45.734292+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 7379550}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/7392738.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-7392738"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "Got another backtrace last night, which also failed during `gazebo::Master::ProcessMessage` ([full console output and backtrace here](https://gist.github.com/scpeters/8010059)):\n\nConsole output:\n~~~\n187: [ RUN ] PhysicsEngines/SpeedPR2Test.PR2World/1\n187:\n187: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n187: Msg Publicized address: 192.168.1.188\n187: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n187: Error [Connection.hh:264] Header is empty\n187: Error [Connection.hh:264] Header is empty\n187: Error [Connection.hh:264] Header is empty\n187: Error [Connection.hh:264] Header is empty\n187: Exception [msgs.cc:111] Can't serialize message of type[gazebo.msgs.Publish] because it is missing required fields\n187:\n187: terminate called after throwing an instance of 'gazebo::common::Exception'\n~~~\n\nBacktrace from failing thread:\n~~~\n(gdb) bt\n#0 0x00002af67376c425 in __GI_raise (sig=<optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n#1 0x00002af67376fb8b in __GI_abort () at abort.c:91\n#2 0x00002af672f80e2d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3 0x00002af672f7ef26 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4 0x00002af672f7ef53 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5 0x00002af672f7f17e in __cxa_throw () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6 0x00002af6714ad879 in gazebo::msgs::Package (type=..., message=...) at /tmp/gazebo_build/source/gazebo/msgs/msgs.cc:110\n#7 0x00000000004a1d75 in gazebo::Master::ProcessMessage (this=this@entry=0x2af74691e5c0, _connectionIndex=0, _data=...) at /tmp/gazebo_build/source/gazebo/Master.cc:175\n#8 0x00000000004a2c27 in gazebo::Master::RunOnce (this=this@entry=0x2af74691e5c0) at /tmp/gazebo_build/source/gazebo/Master.cc:321\n#9 0x00000000004a2df0 in gazebo::Master::Run (this=0x2af74691e5c0) at /tmp/gazebo_build/source/gazebo/Master.cc:299\n#10 0x00002af6726806c9 in ?? () from /usr/lib/libboost_thread.so.1.49.0\n#11 0x00002af6719e5e9a in start_thread (arg=0x2af694200700) at pthread_create.c:308\n#12 0x00002af67382a3fd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\n#13 0x0000000000000000 in ?? ()\n(gdb)\n~~~", "markup": "markdown", "html": "<p>Got another backtrace last night, which also failed during <code>gazebo::Master::ProcessMessage</code> (<a data-is-external-link=\"true\" href=\"https://gist.github.com/scpeters/8010059\" rel=\"nofollow\">full console output and backtrace here</a>):</p>\n<p>Console output:</p>\n<div class=\"codehilite\"><pre><span></span>187: [ RUN ] PhysicsEngines/SpeedPR2Test.PR2World/1\n187:\n187: Msg Waiting for masterMsg Connected to gazebo master @ http://127.0.0.1:11345\n187: Msg Publicized address: 192.168.1.188\n187: Dbg ServerFixture load in 0.09 seconds, timeout after 60 seconds\n187: Error [Connection.hh:264] Header is empty\n187: Error [Connection.hh:264] Header is empty\n187: Error [Connection.hh:264] Header is empty\n187: Error [Connection.hh:264] Header is empty\n187: Exception [msgs.cc:111] Can&#39;t serialize message of type[gazebo.msgs.Publish] because it is missing required fields\n187:\n187: terminate called after throwing an instance of &#39;gazebo::common::Exception&#39;\n</pre></div>\n\n\n<p>Backtrace from failing thread:</p>\n<div class=\"codehilite\"><pre><span></span>(gdb) bt\n#0 0x00002af67376c425 in __GI_raise (sig=&lt;optimized out&gt;) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n#1 0x00002af67376fb8b in __GI_abort () at abort.c:91\n#2 0x00002af672f80e2d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3 0x00002af672f7ef26 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4 0x00002af672f7ef53 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5 0x00002af672f7f17e in __cxa_throw () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6 0x00002af6714ad879 in gazebo::msgs::Package (type=..., message=...) at /tmp/gazebo_build/source/gazebo/msgs/msgs.cc:110\n#7 0x00000000004a1d75 in gazebo::Master::ProcessMessage (this=this@entry=0x2af74691e5c0, _connectionIndex=0, _data=...) at /tmp/gazebo_build/source/gazebo/Master.cc:175\n#8 0x00000000004a2c27 in gazebo::Master::RunOnce (this=this@entry=0x2af74691e5c0) at /tmp/gazebo_build/source/gazebo/Master.cc:321\n#9 0x00000000004a2df0 in gazebo::Master::Run (this=0x2af74691e5c0) at /tmp/gazebo_build/source/gazebo/Master.cc:299\n#10 0x00002af6726806c9 in ?? () from /usr/lib/libboost_thread.so.1.49.0\n#11 0x00002af6719e5e9a in start_thread (arg=0x2af694200700) at pthread_create.c:308\n#12 0x00002af67382a3fd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\n#13 0x0000000000000000 in ?? ()\n(gdb)\n</pre></div>", "type": "rendered"}, "created_on": "2013-12-17T18:34:13.311942+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 7392738}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/7533672.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-7533672"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "I've added some console output to my overnight testing that indicates when message parsing fails:\n~~~\ndiff -r 56ef8eb1faaa gazebo/Master.cc\n--- a/gazebo/Master.cc\tTue Dec 17 19:02:34 2013 +0000\n+++ b/gazebo/Master.cc\tFri Dec 20 13:47:13 2013 -0800\n@@ -166,7 +166,13 @@\n   {\n     boost::recursive_mutex::scoped_lock lock(this->connectionMutex);\n     msgs::Publish pub;\n-    pub.ParseFromString(packet.serialized_data());\n+    if (!pub.ParseFromString(packet.serialized_data()))\n+    {\n+      gzerr << \"ParseFromString failed:\"\n+            << \" packet.type() \" << packet.type()\n+            << \" packet.serialized_data() \" << packet.serialized_data()\n+            << std::endl;\n+    }\n \n     Connection_M::iterator iter2;\n     for (iter2 = this->connections.begin();\n~~~\nOver the past few nights, I've noticed that there are many types of messages that can fail this way, which makes me think it's not related to a specific topic or message:\n\nFailing topics:\n~~~\n/gazebo/default/factory\n/gazebo/default/log/control\n/gazebo/default/pr2/head_tilt_link\n/gazebo/default/simple_gripper/joint_cmd\n/gazebo/default/world_control\n~~~\n\nThe list of failing message types is slightly attenuated because many of the messages are truncated:\n~~~\ngazebo.msgs.Factory\ngazebo.msgs.Joi\ngazebo.msgs.LogControl\ngazebo.msgs.WorldControl\n~~~\n\nSo I think these messages are getting truncated somewhere.", "markup": "markdown", "html": "<p>I've added some console output to my overnight testing that indicates when message parsing fails:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 56ef8eb1faaa gazebo/Master.cc</span>\n<span class=\"gd\">--- a/gazebo/Master.cc  Tue Dec 17 19:02:34 2013 +0000</span>\n<span class=\"gi\">+++ b/gazebo/Master.cc  Fri Dec 20 13:47:13 2013 -0800</span>\n<span class=\"gu\">@@ -166,7 +166,13 @@</span>\n   {\n     boost::recursive_mutex::scoped_lock lock(this-&gt;connectionMutex);\n     msgs::Publish pub;\n<span class=\"gd\">-    pub.ParseFromString(packet.serialized_data());</span>\n<span class=\"gi\">+    if (!pub.ParseFromString(packet.serialized_data()))</span>\n<span class=\"gi\">+    {</span>\n<span class=\"gi\">+      gzerr &lt;&lt; &quot;ParseFromString failed:&quot;</span>\n<span class=\"gi\">+            &lt;&lt; &quot; packet.type() &quot; &lt;&lt; packet.type()</span>\n<span class=\"gi\">+            &lt;&lt; &quot; packet.serialized_data() &quot; &lt;&lt; packet.serialized_data()</span>\n<span class=\"gi\">+            &lt;&lt; std::endl;</span>\n<span class=\"gi\">+    }</span>\n\n     Connection_M::iterator iter2;\n     for (iter2 = this-&gt;connections.begin();\n</pre></div>\n\n\n<p>Over the past few nights, I've noticed that there are many types of messages that can fail this way, which makes me think it's not related to a specific topic or message:</p>\n<p>Failing topics:</p>\n<div class=\"codehilite\"><pre><span></span>/gazebo/default/factory\n/gazebo/default/log/control\n/gazebo/default/pr2/head_tilt_link\n/gazebo/default/simple_gripper/joint_cmd\n/gazebo/default/world_control\n</pre></div>\n\n\n<p>The list of failing message types is slightly attenuated because many of the messages are truncated:</p>\n<div class=\"codehilite\"><pre><span></span>gazebo.msgs.Factory\ngazebo.msgs.Joi\ngazebo.msgs.LogControl\ngazebo.msgs.WorldControl\n</pre></div>\n\n\n<p>So I think these messages are getting truncated somewhere.</p>", "type": "rendered"}, "created_on": "2013-12-30T19:37:12.551867+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 7533672}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/21313378.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-21313378"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "I have probably found the cause of this, reported issue #1720 since this one's so old...", "markup": "markdown", "html": "<p>I have probably found the cause of this, reported issue <a href=\"#!/osrf/gazebo/issues/1720/race-condition-in-transport-library\" rel=\"nofollow\" title=\"Race condition in transport library\" class=\"ap-connect-link\"><s>#1720</s></a> since this one's so old...</p>", "type": "rendered"}, "created_on": "2015-08-28T12:26:32.261731+00:00", "user": {"display_name": "Elte Hupkes", "uuid": "{f23aa1a9-ae57-493f-8169-fbb59b3eae43}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bf23aa1a9-ae57-493f-8169-fbb59b3eae43%7D"}, "html": {"href": "https://bitbucket.org/%7Bf23aa1a9-ae57-493f-8169-fbb59b3eae43%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8560ee94d50ba277c411499a45b3d732d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsEH-5.png"}}, "nickname": "ElteHupkes", "type": "user", "account_id": "557058:b758f523-bdaa-4718-964c-03b825bdea8d"}, "updated_on": "2015-08-28T12:26:39.750692+00:00", "type": "issue_comment", "id": 21313378}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/21320654.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-21320654"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "Issue #1720 was marked as a duplicate of this issue.", "markup": "markdown", "html": "<p>Issue <a href=\"#!/osrf/gazebo/issues/1720/race-condition-in-transport-library\" rel=\"nofollow\" title=\"Race condition in transport library\" class=\"ap-connect-link\"><s>#1720</s></a> was marked as a duplicate of this issue.</p>", "type": "rendered"}, "created_on": "2015-08-28T17:12:09.036474+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 21320654}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/21328418.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-21328418"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "This patch should fix the race condition:\r\n\r\n- Moved writing the `headerBuffer` inside the mutex lock\r\n- Using `this->headerBuffer` rather than `headerBuffer` so it is move obvious the buffer is a class variable.", "markup": "markdown", "html": "<p>This patch should fix the race condition:</p>\n<ul>\n<li>Moved writing the <code>headerBuffer</code> inside the mutex lock</li>\n<li>Using <code>this-&gt;headerBuffer</code> rather than <code>headerBuffer</code> so it is move obvious the buffer is a class variable.</li>\n</ul>", "type": "rendered"}, "created_on": "2015-08-29T09:41:45.120377+00:00", "user": {"display_name": "Elte Hupkes", "uuid": "{f23aa1a9-ae57-493f-8169-fbb59b3eae43}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bf23aa1a9-ae57-493f-8169-fbb59b3eae43%7D"}, "html": {"href": "https://bitbucket.org/%7Bf23aa1a9-ae57-493f-8169-fbb59b3eae43%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8560ee94d50ba277c411499a45b3d732d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsEH-5.png"}}, "nickname": "ElteHupkes", "type": "user", "account_id": "557058:b758f523-bdaa-4718-964c-03b825bdea8d"}, "updated_on": null, "type": "issue_comment", "id": 21328418}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/30610663.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-30610663"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2016-09-14T19:23:10.790530+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 30610663}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/31445798.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-31445798"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "I've often seen these bugs, but it's always been hard to reproduce them. I have just found a way to reproduce a particular instance of this bug that is much better than I have seen before. It doesn't happen everytime, but as I said, it's the best I've seen so far.\n\nThe failures seem to occur when making repeated requests from separate processes (I noticed this while debugging some failures of `UNIT_gz_TEST`). Prepare three separate terminal windows:\n\n1. `gzserver --verbose test/worlds/simple_arm.world`\n\n2. ` gz model -i -m simple_arm`\n\n3. ` gz model -i -m simple_arm`\n\nEach `gz` instance creates an `entity_info` request and waits for the response. Repeating those calls in a loop eventually leads to some familiar console errors from `gzserver` or hanging of the `gz` processes:\n\n~~~\nwhile gz model -i -m simple_arm | wc -l; do date; done\n~~~\n\n~~~\n[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:308] OnReadData got empty data!!!\n~~~\n\nCan someone else try this?", "markup": "markdown", "html": "<p>I've often seen these bugs, but it's always been hard to reproduce them. I have just found a way to reproduce a particular instance of this bug that is much better than I have seen before. It doesn't happen everytime, but as I said, it's the best I've seen so far.</p>\n<p>The failures seem to occur when making repeated requests from separate processes (I noticed this while debugging some failures of <code>UNIT_gz_TEST</code>). Prepare three separate terminal windows:</p>\n<ol>\n<li>\n<p><code>gzserver --verbose test/worlds/simple_arm.world</code></p>\n</li>\n<li>\n<p><code>gz model -i -m simple_arm</code></p>\n</li>\n<li>\n<p><code>gz model -i -m simple_arm</code></p>\n</li>\n</ol>\n<p>Each <code>gz</code> instance creates an <code>entity_info</code> request and waits for the response. Repeating those calls in a loop eventually leads to some familiar console errors from <code>gzserver</code> or hanging of the <code>gz</code> processes:</p>\n<div class=\"codehilite\"><pre><span></span>while gz model -i -m simple_arm | wc -l; do date; done\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:267] Header is empty\n[Err] [Connection.hh:308] OnReadData got empty data!!!\n</pre></div>\n\n\n<p>Can someone else try this?</p>", "type": "rendered"}, "created_on": "2016-10-17T23:20:04.200242+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 31445798}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/31445821.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-31445821"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "Also, I tried applying the patch from @ElteHupkes but it doesn't fix this problem.", "markup": "markdown", "html": "<p>Also, I tried applying the patch from @ElteHupkes but it doesn't fix this problem.</p>", "type": "rendered"}, "created_on": "2016-10-17T23:23:59.048027+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 31445821}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/31569193.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-31569193"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "I caught some of these errors in valgrind, which gave some extra info, but as it seems to be memory corruption, each error looks different:\n\nhttps://gist.github.com/scpeters/f0517321f71f11dda0db4dec9e0eb4f6", "markup": "markdown", "html": "<p>I caught some of these errors in valgrind, which gave some extra info, but as it seems to be memory corruption, each error looks different:</p>\n<p><a href=\"https://gist.github.com/scpeters/f0517321f71f11dda0db4dec9e0eb4f6\" rel=\"nofollow\" class=\"ap-connect-link\">https://gist.github.com/scpeters/f0517321f71f11dda0db4dec9e0eb4f6</a></p>", "type": "rendered"}, "created_on": "2016-10-22T02:52:36.686369+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 31569193}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821/comments/34686487.json"}, "html": {"href": "#!/osrf/gazebo/issues/821#comment-34686487"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/821.json"}}, "type": "issue", "id": 821, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Apparent transport race condition on startup"}, "content": {"raw": "I can confirm I occasionally get these errors as well in my Gazebo7 setup:\n\n    [libprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp, type, serialized_data\n    Master Unknown message type[] From[60838]", "markup": "markdown", "html": "<p>I can confirm I occasionally get these errors as well in my Gazebo7 setup:</p>\n<div class=\"codehilite\"><pre><span></span>[libprotobuf ERROR google/protobuf/message_lite.cc:123] Can&#39;t parse message of type &quot;gazebo.msgs.Packet&quot; because it is missing required fields: stamp, type, serialized_data\nMaster Unknown message type[] From[60838]\n</pre></div>", "type": "rendered"}, "created_on": "2017-02-24T23:55:34.456242+00:00", "user": {"display_name": "Dave Coleman", "uuid": "{58f784f8-4b19-4221-b333-670219684927}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B58f784f8-4b19-4221-b333-670219684927%7D"}, "html": {"href": "https://bitbucket.org/%7B58f784f8-4b19-4221-b333-670219684927%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/0a0abfbe6bae9a1d65fe4af19493f423d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDC-3.png"}}, "nickname": "Dave Coleman", "type": "user", "account_id": "557058:113fde7a-8d84-43e3-91d8-20354f36ec42"}, "updated_on": null, "type": "issue_comment", "id": 34686487}], "page": 1, "size": 16}