{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1560/comments/17277663.json"}, "html": {"href": "#!/osrf/gazebo/issues/1560#comment-17277663"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1560.json"}}, "type": "issue", "id": 1560, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Gazebo (gzclient) causes high CPU with an empty world"}, "content": {"raw": "I tried purging all Nvidia drivers from my system and use the open source Nouveau driver instead, and that seems to have helped a little.\n\n`glxinfo` reports I now have OpenGL 2.1 Mesa 8.0.4, so it's older than Nvidia, but CPU usage is way down.\n\nNow my CPU breakdown while running an idle gazebo looks like:\n\n    15% gzclient\n    10% gzserver\n    3% gnome-shell\n    1% Xorg\n\nUnfortunately, now gzclient doesn't render anything.\n\nAbout 90% of the time, all I see is a black square where the scene should be. If I kill and restart it, occasionally it will render correctly, but this is rare. This happened a couple times while using the Nvidia driver, but it usually rendered fine, just with very high CPU usage.\n\nIs there any way to fix that without reverting to the Nvidia driver?\n\nOverall, OpenGL performance seems to be a lot better than with the Nvidia driver. Glxgears under Nvidia ran at 60 FPS, but now it runs at 800 FPS.", "markup": "markdown", "html": "<p>I tried purging all Nvidia drivers from my system and use the open source Nouveau driver instead, and that seems to have helped a little.</p>\n<p><code>glxinfo</code> reports I now have OpenGL 2.1 Mesa 8.0.4, so it's older than Nvidia, but CPU usage is way down.</p>\n<p>Now my CPU breakdown while running an idle gazebo looks like:</p>\n<div class=\"codehilite\"><pre><span></span>15% gzclient\n10% gzserver\n3% gnome-shell\n1% Xorg\n</pre></div>\n\n\n<p>Unfortunately, now gzclient doesn't render anything.</p>\n<p>About 90% of the time, all I see is a black square where the scene should be. If I kill and restart it, occasionally it will render correctly, but this is rare. This happened a couple times while using the Nvidia driver, but it usually rendered fine, just with very high CPU usage.</p>\n<p>Is there any way to fix that without reverting to the Nvidia driver?</p>\n<p>Overall, OpenGL performance seems to be a lot better than with the Nvidia driver. Glxgears under Nvidia ran at 60 FPS, but now it runs at 800 FPS.</p>", "type": "rendered"}, "created_on": "2015-04-09T15:46:30.352603+00:00", "user": {"display_name": "Chris Spencer", "uuid": "{c32a9420-4929-4ae7-8300-194ba69b5d65}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc32a9420-4929-4ae7-8300-194ba69b5d65%7D"}, "html": {"href": "https://bitbucket.org/%7Bc32a9420-4929-4ae7-8300-194ba69b5d65%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/c125f576c3a08c0c1d4330bc565ae28cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCS-6.png"}}, "nickname": "chrisspen", "type": "user", "account_id": "557058:d9f17e7c-8978-4109-847f-21ea64169880"}, "updated_on": "2015-04-09T16:37:36.193227+00:00", "type": "issue_comment", "id": 17277663}