{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1673/comments/20425703.json"}, "html": {"href": "#!/osrf/gazebo/issues/1673#comment-20425703"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1673.json"}}, "type": "issue", "id": 1673, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Add flags to link against test fixture"}, "content": {"raw": "Summary after some discussion with @nkoenig:\n\n* Advantages: Easy to use for the users.\n* Disadvantages: By default we would include in the GAZEBO_LIBRARIES a library that is not strictly necessary for running Gazebo. However, linkers are pretty smart and they don't include a library if it's not really needed except that in our case libgazebo_server_fixture is a static library. This might negatively affect every plugin or test that links with ${GAZEBO_LIBRARIES}.\n\nPotential solutions:\n\n* Learn why libgazebo_server_fixture is static. This might negatively affect the time required to link an integration tests. [This issue](https://bitbucket.org/osrf/robocup3ds/issues/2) might be related. If possible, make libgazebo_server fixture a dynamic library.\n\n* Use an optional list of components when doing `find_package(gazebo)`\n", "markup": "markdown", "html": "<p>Summary after some discussion with @nkoenig:</p>\n<ul>\n<li>Advantages: Easy to use for the users.</li>\n<li>Disadvantages: By default we would include in the GAZEBO_LIBRARIES a library that is not strictly necessary for running Gazebo. However, linkers are pretty smart and they don't include a library if it's not really needed except that in our case libgazebo_server_fixture is a static library. This might negatively affect every plugin or test that links with ${GAZEBO_LIBRARIES}.</li>\n</ul>\n<p>Potential solutions:</p>\n<ul>\n<li>\n<p>Learn why libgazebo_server_fixture is static. This might negatively affect the time required to link an integration tests. <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/robocup3ds/issues/2\" rel=\"nofollow\">This issue</a> might be related. If possible, make libgazebo_server fixture a dynamic library.</p>\n</li>\n<li>\n<p>Use an optional list of components when doing <code>find_package(gazebo)</code></p>\n</li>\n</ul>", "type": "rendered"}, "created_on": "2015-07-23T17:10:41.943293+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": null, "type": "issue_comment", "id": 20425703}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1673/comments/20426047.json"}, "html": {"href": "#!/osrf/gazebo/issues/1673#comment-20426047"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1673.json"}}, "type": "issue", "id": 1673, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Add flags to link against test fixture"}, "content": {"raw": "As I said in the pull request, I'm linking specifically against `gazebo_test_fixture` in the [benchmark repository](https://github.com/scpeters/benchmark/blob/master/tools/TestMacro.cmake#L13-L19). I think the extra work for downstream users in creating integration tests is not just linking against `gazebo_test_fixture`; that part is easy. There's lots of steps, though, that could be simplified:\n\n* add gtest sources to downstream repository\n* compile gtest\n* for each test, create an executable, link against relevant libraries\n* add the test\n* create a `check_test_ran` test to catch seg-faults\n\nWe use some cmake macros to simplify this for ourselves. Would it be desirable to install a cmake helper macro/function intended for downstream use (similar to [osrf/gazebo/cmake/GazeboTestUtils.cmake](#!/osrf/gazebo/src/04c8460a5b855f9719c0cc306adf43f79064ed6a/cmake/GazeboTestUtils.cmake?at=default) or the [TestMacro.cmake](https://github.com/scpeters/benchmark/blob/master/tools/TestMacro.cmake) in the benchmark repository)? I would ask the opinion of @dirk-thomas if we were to do so.", "markup": "markdown", "html": "<p>As I said in the pull request, I'm linking specifically against <code>gazebo_test_fixture</code> in the <a data-is-external-link=\"true\" href=\"https://github.com/scpeters/benchmark/blob/master/tools/TestMacro.cmake#L13-L19\" rel=\"nofollow\">benchmark repository</a>. I think the extra work for downstream users in creating integration tests is not just linking against <code>gazebo_test_fixture</code>; that part is easy. There's lots of steps, though, that could be simplified:</p>\n<ul>\n<li>add gtest sources to downstream repository</li>\n<li>compile gtest</li>\n<li>for each test, create an executable, link against relevant libraries</li>\n<li>add the test</li>\n<li>create a <code>check_test_ran</code> test to catch seg-faults</li>\n</ul>\n<p>We use some cmake macros to simplify this for ourselves. Would it be desirable to install a cmake helper macro/function intended for downstream use (similar to <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/04c8460a5b855f9719c0cc306adf43f79064ed6a/cmake/GazeboTestUtils.cmake?at=default\" rel=\"nofollow\">osrf/gazebo/cmake/GazeboTestUtils.cmake</a> or the <a data-is-external-link=\"true\" href=\"https://github.com/scpeters/benchmark/blob/master/tools/TestMacro.cmake\" rel=\"nofollow\">TestMacro.cmake</a> in the benchmark repository)? I would ask the opinion of @dirk-thomas if we were to do so.</p>", "type": "rendered"}, "created_on": "2015-07-23T17:25:46.433566+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 20426047}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1673/comments/20426515.json"}, "html": {"href": "#!/osrf/gazebo/issues/1673#comment-20426515"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1673.json"}}, "type": "issue", "id": 1673, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Add flags to link against test fixture"}, "content": {"raw": "We should scope the goal of this issue. Is it\n\n1. Make a public facing mechanism to link against the test fixture, and leave the rest of the compilation details up to the user, or\n2. Create an installable cmake helper for using gazebo's test fixture?", "markup": "markdown", "html": "<p>We should scope the goal of this issue. Is it</p>\n<ol>\n<li>Make a public facing mechanism to link against the test fixture, and leave the rest of the compilation details up to the user, or</li>\n<li>Create an installable cmake helper for using gazebo's test fixture?</li>\n</ol>", "type": "rendered"}, "created_on": "2015-07-23T17:49:28.054717+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 20426515}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1673/comments/30611038.json"}, "html": {"href": "#!/osrf/gazebo/issues/1673#comment-30611038"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1673.json"}}, "type": "issue", "id": 1673, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Add flags to link against test fixture"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2016-09-14T19:24:06.989220+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 30611038}], "page": 1, "size": 4}