{"priority": "critical", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1959/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1959.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1959/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1959/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1959/add-ability-to-set-imu-initial-orientation"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1959/vote"}}, "reporter": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "title": "Add ability to set IMU initial Orientation on boot", "component": {"name": "sensors", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122877.json"}}}, "votes": 5, "watches": 6, "content": {"raw": "Current implementation [ImuSensor::SetReferencePose()](#!/osrf/gazebo/src/5436333365e4c1612d91565ae5b421cc057ef7e6/gazebo/sensors/ImuSensor.hh?at=default&fileviewer=file-view-default#ImuSensor.hh-92) is inadequate for typical simulation use.\r\n\r\nUsers desire the ability to specify what [ImuSensor::Orientation()](#!/osrf/gazebo/src/5436333365e4c1612d91565ae5b421cc057ef7e6/gazebo/sensors/ImuSensor.hh?at=default&fileviewer=file-view-default#ImuSensor.hh-89) returns after the sensor is created in the world.\r\n\r\nThe reason being some of the existing IMU sensors in the market returns it's own frame orientation in the NED frame upon boot up, and the ability to do this is in simulation is critical. With existing API, the user would have to first rotate IMU to align with NED frame before calling `ImuSensor::SetReferencePose`.\r\n\r\nProposed solution here is to add\r\n\r\n~~~\r\n      /// \\brief Sets the current reported pose of the IMU\r\n      /// Replaces SetReferencePose.\r\n      /// \\param _orientation current IMU reported orientation\r\n      public: void SetReferenceOrientation(\r\n        const ignition::math::Quaterniond &_orientation =\r\n        ignition::math::Quaterniond());\r\n~~~", "markup": "markdown", "html": "<p>Current implementation <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/5436333365e4c1612d91565ae5b421cc057ef7e6/gazebo/sensors/ImuSensor.hh?at=default&amp;fileviewer=file-view-default#ImuSensor.hh-92\" rel=\"nofollow\">ImuSensor::SetReferencePose()</a> is inadequate for typical simulation use.</p>\n<p>Users desire the ability to specify what <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/5436333365e4c1612d91565ae5b421cc057ef7e6/gazebo/sensors/ImuSensor.hh?at=default&amp;fileviewer=file-view-default#ImuSensor.hh-89\" rel=\"nofollow\">ImuSensor::Orientation()</a> returns after the sensor is created in the world.</p>\n<p>The reason being some of the existing IMU sensors in the market returns it's own frame orientation in the NED frame upon boot up, and the ability to do this is in simulation is critical. With existing API, the user would have to first rotate IMU to align with NED frame before calling <code>ImuSensor::SetReferencePose</code>.</p>\n<p>Proposed solution here is to add</p>\n<div class=\"codehilite\"><pre><span></span>      <span class=\"o\">///</span> <span class=\"err\">\\</span><span class=\"nt\">brief</span> <span class=\"nt\">Sets</span> <span class=\"nt\">the</span> <span class=\"nt\">current</span> <span class=\"nt\">reported</span> <span class=\"nt\">pose</span> <span class=\"nt\">of</span> <span class=\"nt\">the</span> <span class=\"nt\">IMU</span>\n      <span class=\"o\">///</span> <span class=\"nt\">Replaces</span> <span class=\"nt\">SetReferencePose</span><span class=\"o\">.</span>\n      <span class=\"o\">///</span> <span class=\"err\">\\</span><span class=\"nt\">param</span> <span class=\"nt\">_orientation</span> <span class=\"nt\">current</span> <span class=\"nt\">IMU</span> <span class=\"nt\">reported</span> <span class=\"nt\">orientation</span>\n      <span class=\"nt\">public</span><span class=\"o\">:</span> <span class=\"nt\">void</span> <span class=\"nt\">SetReferenceOrientation</span><span class=\"o\">(</span>\n        <span class=\"nt\">const</span> <span class=\"nt\">ignition</span><span class=\"p\">::</span><span class=\"nd\">math</span><span class=\"p\">::</span><span class=\"nd\">Quaterniond</span> <span class=\"o\">&amp;</span><span class=\"nt\">_orientation</span> <span class=\"o\">=</span>\n        <span class=\"nt\">ignition</span><span class=\"p\">::</span><span class=\"nd\">math</span><span class=\"p\">::</span><span class=\"nd\">Quaterniond</span><span class=\"o\">());</span>\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2016-05-12T18:15:40.284054+00:00", "milestone": null, "updated_on": "2020-03-03T18:03:49.672972+00:00", "type": "issue", "id": 1959}