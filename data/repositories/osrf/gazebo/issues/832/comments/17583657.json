{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/832/comments/17583657.json"}, "html": {"href": "#!/osrf/gazebo/issues/832#comment-17583657"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/832.json"}}, "type": "issue", "id": 832, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Segfault of tests in Intel video cards"}, "content": {"raw": "Update: [over 100 tests are currently failing in jenkins with intel gpu](http://build.osrfoundation.org/view/gazebo-gpu/job/gazebo-gazebo_5.0-devel-trusty-amd64-gpu-intel/11/testReport/) (basically any tests that load a server or try to use rendering).\n\nI just did some testing on an [intel NUC](http://www.intel.com/content/www/us/en/nuc/overview.html) that we have connected to a projector in a conference room, and it was able to run gazebo whenever it was actively driving a display. However, it seg-faulted whenever I connected via ssh and the display was inactive. I have a backtrace without debug information:\n~~~\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007fffcba260a8 in ?? () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n(gdb) bt\n#0  0x00007fffcba260a8 in ?? () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n#1  0x00007fffcba2af69 in ?? () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n#2  0x00007fffcba7a05e in Ogre::GLRenderSystem::GLRenderSystem() () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n#3  0x00007fffcba33dc4 in ?? () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n#4  0x00007fffefcf09be in Ogre::Root::installPlugin(Ogre::Plugin*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#5  0x00007fffcba703d6 in dllStartPlugin () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n#6  0x00007fffefcf0c77 in Ogre::Root::loadPlugin(std::string const&) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#7  0x00007ffff02e6408 in gazebo::rendering::RenderEngine::LoadPlugins() () from /usr/lib/x86_64-linux-gnu/libgazebo_rendering.so.5\n#8  0x00007ffff02e868a in gazebo::rendering::RenderEngine::Load() () from /usr/lib/x86_64-linux-gnu/libgazebo_rendering.so.5\n#9  0x00007ffff02ec903 in gazebo::rendering::load() () from /usr/lib/x86_64-linux-gnu/libgazebo_rendering.so.5\n#10 0x000000000042e60d in gazebo::setupServer(int, char**) ()\n#11 0x0000000000416c5f in gazebo::Server::ParseArgs(int, char**) ()\n#12 0x000000000040ddd1 in ?? ()\n#13 0x00007ffff4c1ba40 in __libc_start_main (main=0x40dcd0, argc=2, argv=0x7fffffffe5f8, init=<optimized out>, fini=<optimized out>, \n    rtld_fini=<optimized out>, stack_end=0x7fffffffe5e8) at libc-start.c:289\n#14 0x000000000040fd39 in _start ()\n(gdb)\n~~~\n\nI also compared the `~/.gazebo/ogre.log` for failed and successful runs:\n\nEnd of failed log:\n~~~\n16:30:45: *-*-* OGRE Initialising\n16:30:45: *-*-* Version 1.9.0 (Ghadamon)\n16:30:45: OverlayElementFactory for type Panel registered.\n16:30:45: OverlayElementFactory for type BorderPanel registered.\n16:30:45: OverlayElementFactory for type TextArea registered.\n16:30:45: Registering ResourceManager for type Font\n16:30:45: Loading library /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n16:30:45: Installing plugin: GL RenderSystem\n16:30:45: OpenGL Rendering Subsystem created.\n~~~\n\nMiddle of successful log:\n~~~\n16:33:17: *-*-* OGRE Initialising\n16:33:17: *-*-* Version 1.9.0 (Ghadamon)\n16:33:17: OverlayElementFactory for type Panel registered.\n16:33:17: OverlayElementFactory for type BorderPanel registered.\n16:33:17: OverlayElementFactory for type TextArea registered.\n16:33:17: Registering ResourceManager for type Font\n16:33:17: Loading library /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n16:33:17: Installing plugin: GL RenderSystem\n16:33:17: OpenGL Rendering Subsystem created.\n16:33:17: Plugin successfully installed\n16:33:17: Loading library /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/Plugin_ParticleFX.so\n~~~\n\nIt seems to fail while attempting to install a plugin, as the backtrace seems to indicate.", "markup": "markdown", "html": "<p>Update: <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/gazebo-gpu/job/gazebo-gazebo_5.0-devel-trusty-amd64-gpu-intel/11/testReport/\" rel=\"nofollow\">over 100 tests are currently failing in jenkins with intel gpu</a> (basically any tests that load a server or try to use rendering).</p>\n<p>I just did some testing on an <a data-is-external-link=\"true\" href=\"http://www.intel.com/content/www/us/en/nuc/overview.html\" rel=\"nofollow\">intel NUC</a> that we have connected to a projector in a conference room, and it was able to run gazebo whenever it was actively driving a display. However, it seg-faulted whenever I connected via ssh and the display was inactive. I have a backtrace without debug information:</p>\n<div class=\"codehilite\"><pre><span></span>Program received signal SIGSEGV, Segmentation fault.\n0x00007fffcba260a8 in ?? () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n(gdb) bt\n#0  0x00007fffcba260a8 in ?? () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n#1  0x00007fffcba2af69 in ?? () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n#2  0x00007fffcba7a05e in Ogre::GLRenderSystem::GLRenderSystem() () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n#3  0x00007fffcba33dc4 in ?? () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n#4  0x00007fffefcf09be in Ogre::Root::installPlugin(Ogre::Plugin*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#5  0x00007fffcba703d6 in dllStartPlugin () from /usr/lib/x86_64-linux-gnu/OGRE-1.9.0/RenderSystem_GL.so\n#6  0x00007fffefcf0c77 in Ogre::Root::loadPlugin(std::string const&amp;) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#7  0x00007ffff02e6408 in gazebo::rendering::RenderEngine::LoadPlugins() () from /usr/lib/x86_64-linux-gnu/libgazebo_rendering.so.5\n#8  0x00007ffff02e868a in gazebo::rendering::RenderEngine::Load() () from /usr/lib/x86_64-linux-gnu/libgazebo_rendering.so.5\n#9  0x00007ffff02ec903 in gazebo::rendering::load() () from /usr/lib/x86_64-linux-gnu/libgazebo_rendering.so.5\n#10 0x000000000042e60d in gazebo::setupServer(int, char**) ()\n#11 0x0000000000416c5f in gazebo::Server::ParseArgs(int, char**) ()\n#12 0x000000000040ddd1 in ?? ()\n#13 0x00007ffff4c1ba40 in __libc_start_main (main=0x40dcd0, argc=2, argv=0x7fffffffe5f8, init=&lt;optimized out&gt;, fini=&lt;optimized out&gt;, \n    rtld_fini=&lt;optimized out&gt;, stack_end=0x7fffffffe5e8) at libc-start.c:289\n#14 0x000000000040fd39 in _start ()\n(gdb)\n</pre></div>\n\n\n<p>I also compared the <code>~/.gazebo/ogre.log</code> for failed and successful runs:</p>\n<p>End of failed log:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"o\">*-*-*</span> <span class=\"n\">OGRE</span> <span class=\"n\">Initialising</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"o\">*-*-*</span> <span class=\"n\">Version</span> <span class=\"mf\">1.9</span><span class=\"o\">.</span><span class=\"mi\">0</span> <span class=\"o\">(</span><span class=\"n\">Ghadamon</span><span class=\"o\">)</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"n\">OverlayElementFactory</span> <span class=\"k\">for</span> <span class=\"n\">type</span> <span class=\"n\">Panel</span> <span class=\"n\">registered</span><span class=\"o\">.</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"n\">OverlayElementFactory</span> <span class=\"k\">for</span> <span class=\"n\">type</span> <span class=\"n\">BorderPanel</span> <span class=\"n\">registered</span><span class=\"o\">.</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"n\">OverlayElementFactory</span> <span class=\"k\">for</span> <span class=\"n\">type</span> <span class=\"n\">TextArea</span> <span class=\"n\">registered</span><span class=\"o\">.</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"n\">Registering</span> <span class=\"n\">ResourceManager</span> <span class=\"k\">for</span> <span class=\"n\">type</span> <span class=\"n\">Font</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"n\">Loading</span> <span class=\"n\">library</span> <span class=\"sr\">/usr/lib/x86_64-linux-gnu/OGRE-1.9.0/</span><span class=\"n\">RenderSystem_GL</span><span class=\"o\">.</span><span class=\"na\">so</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"n\">Installing</span> <span class=\"n\">plugin</span><span class=\"o\">:</span> <span class=\"n\">GL</span> <span class=\"n\">RenderSystem</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span> <span class=\"n\">OpenGL</span> <span class=\"n\">Rendering</span> <span class=\"n\">Subsystem</span> <span class=\"n\">created</span><span class=\"o\">.</span>\n</pre></div>\n\n\n<p>Middle of successful log:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">*-*-*</span> <span class=\"n\">OGRE</span> <span class=\"n\">Initialising</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">*-*-*</span> <span class=\"n\">Version</span> <span class=\"mf\">1.9</span><span class=\"o\">.</span><span class=\"mi\">0</span> <span class=\"o\">(</span><span class=\"n\">Ghadamon</span><span class=\"o\">)</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">OverlayElementFactory</span> <span class=\"k\">for</span> <span class=\"n\">type</span> <span class=\"n\">Panel</span> <span class=\"n\">registered</span><span class=\"o\">.</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">OverlayElementFactory</span> <span class=\"k\">for</span> <span class=\"n\">type</span> <span class=\"n\">BorderPanel</span> <span class=\"n\">registered</span><span class=\"o\">.</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">OverlayElementFactory</span> <span class=\"k\">for</span> <span class=\"n\">type</span> <span class=\"n\">TextArea</span> <span class=\"n\">registered</span><span class=\"o\">.</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Registering</span> <span class=\"n\">ResourceManager</span> <span class=\"k\">for</span> <span class=\"n\">type</span> <span class=\"n\">Font</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Loading</span> <span class=\"n\">library</span> <span class=\"sr\">/usr/lib/x86_64-linux-gnu/OGRE-1.9.0/</span><span class=\"n\">RenderSystem_GL</span><span class=\"o\">.</span><span class=\"na\">so</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Installing</span> <span class=\"n\">plugin</span><span class=\"o\">:</span> <span class=\"n\">GL</span> <span class=\"n\">RenderSystem</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">OpenGL</span> <span class=\"n\">Rendering</span> <span class=\"n\">Subsystem</span> <span class=\"n\">created</span><span class=\"o\">.</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Plugin</span> <span class=\"n\">successfully</span> <span class=\"n\">installed</span>\n<span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Loading</span> <span class=\"n\">library</span> <span class=\"sr\">/usr/lib/x86_64-linux-gnu/OGRE-1.9.0/</span><span class=\"n\">Plugin_ParticleFX</span><span class=\"o\">.</span><span class=\"na\">so</span>\n</pre></div>\n\n\n<p>It seems to fail while attempting to install a plugin, as the backtrace seems to indicate.</p>", "type": "rendered"}, "created_on": "2015-04-22T00:24:14.875695+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-04-22T00:24:43.179714+00:00", "type": "issue_comment", "id": 17583657}