{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320/comments/38314304.json"}, "html": {"href": "#!/osrf/gazebo/issues/2320#comment-38314304"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320.json"}}, "type": "issue", "id": 2320, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "PERFORMANCE_transport_stress test times out on gazebo8/default on xenial"}, "content": {"raw": "On a second try, it took 26 minutes, about to try profiling.", "markup": "markdown", "html": "<p>On a second try, it took 26 minutes, about to try profiling.</p>", "type": "rendered"}, "created_on": "2017-07-18T21:00:06.267412+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 38314304}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320/comments/38315661.json"}, "html": {"href": "#!/osrf/gazebo/issues/2320#comment-38315661"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320.json"}}, "type": "issue", "id": 2320, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "PERFORMANCE_transport_stress test times out on gazebo8/default on xenial"}, "content": {"raw": "Here's the console output from that 26 minute run:\n\n~~~\n[==========] Running 2 tests from 1 test case.\n[----------] Global test environment set-up.\n[----------] 2 tests from TransportStressTest\n[ RUN      ] TransportStressTest.LocalPublish\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.2.90\n[Dbg] [ServerFixture.cc:209] ServerFixture load in 1.1 seconds, timeout after 600 seconds\n[Msg] Publish Complete\n/data_fast/scpeters/ws/tmp/gazebo_build/src/gazebo/test/performance/transport_stress.cc:109: Failure\nExpected: (diff.sec) < (g_localPublishMessageCount * 0.0008), actual: 1640 vs 800\n[Msg] Time to publish 1000000 messages = 1640 518320016\n[Dbg] [ServerFixture.cc:135] ServerFixture::Unload\nAL lib: (WW) alcCloseDevice: Releasing context 0x7f115152d0d0\n[  FAILED  ] TransportStressTest.LocalPublish (1641800 ms)\n[ RUN      ] TransportStressTest.ManyNodes\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.2.90\n[Dbg] [ServerFixture.cc:209] ServerFixture load in 1.2 seconds, timeout after 600 seconds\n[Msg] Publish complete\n/data_fast/scpeters/ws/tmp/gazebo_build/src/gazebo/test/performance/transport_stress.cc:224: Failure\nExpected: (pubDiff.sec) <= (2), actual: 12 vs 2\n[Msg] Time to publish 10000 = 12 312717664\n[Msg] Time to receive 10000000 = 12 314618631\n[Dbg] [ServerFixture.cc:135] ServerFixture::Unload\nAL lib: (WW) alcCloseDevice: Releasing context 0x7f1150206140\n[  FAILED  ] TransportStressTest.ManyNodes (15332 ms)\n[----------] 2 tests from TransportStressTest (1657132 ms total)\n\n[----------] Global test environment tear-down\n[==========] 2 tests from 1 test case ran. (1657132 ms total)\n[  PASSED  ] 0 tests.\n[  FAILED  ] 2 tests, listed below:\n[  FAILED  ] TransportStressTest.LocalPublish\n[  FAILED  ] TransportStressTest.ManyNodes\n~~~\n\nThe bulk of the time was spent in the `LocalPublish` test, and profiling showed that it spent more than 50% of its time allocating and freeing memory.", "markup": "markdown", "html": "<p>Here's the console output from that 26 minute run:</p>\n<div class=\"codehilite\"><pre><span></span>[==========] Running 2 tests from 1 test case.\n[----------] Global test environment set-up.\n[----------] 2 tests from TransportStressTest\n[ RUN      ] TransportStressTest.LocalPublish\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.2.90\n[Dbg] [ServerFixture.cc:209] ServerFixture load in 1.1 seconds, timeout after 600 seconds\n[Msg] Publish Complete\n/data_fast/scpeters/ws/tmp/gazebo_build/src/gazebo/test/performance/transport_stress.cc:109: Failure\nExpected: (diff.sec) &lt; (g_localPublishMessageCount * 0.0008), actual: 1640 vs 800\n[Msg] Time to publish 1000000 messages = 1640 518320016\n[Dbg] [ServerFixture.cc:135] ServerFixture::Unload\nAL lib: (WW) alcCloseDevice: Releasing context 0x7f115152d0d0\n[  FAILED  ] TransportStressTest.LocalPublish (1641800 ms)\n[ RUN      ] TransportStressTest.ManyNodes\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.2.90\n[Dbg] [ServerFixture.cc:209] ServerFixture load in 1.2 seconds, timeout after 600 seconds\n[Msg] Publish complete\n/data_fast/scpeters/ws/tmp/gazebo_build/src/gazebo/test/performance/transport_stress.cc:224: Failure\nExpected: (pubDiff.sec) &lt;= (2), actual: 12 vs 2\n[Msg] Time to publish 10000 = 12 312717664\n[Msg] Time to receive 10000000 = 12 314618631\n[Dbg] [ServerFixture.cc:135] ServerFixture::Unload\nAL lib: (WW) alcCloseDevice: Releasing context 0x7f1150206140\n[  FAILED  ] TransportStressTest.ManyNodes (15332 ms)\n[----------] 2 tests from TransportStressTest (1657132 ms total)\n\n[----------] Global test environment tear-down\n[==========] 2 tests from 1 test case ran. (1657132 ms total)\n[  PASSED  ] 0 tests.\n[  FAILED  ] 2 tests, listed below:\n[  FAILED  ] TransportStressTest.LocalPublish\n[  FAILED  ] TransportStressTest.ManyNodes\n</pre></div>\n\n\n<p>The bulk of the time was spent in the <code>LocalPublish</code> test, and profiling showed that it spent more than 50% of its time allocating and freeing memory.</p>", "type": "rendered"}, "created_on": "2017-07-18T22:41:12.308756+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 38315661}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320/comments/38316365.json"}, "html": {"href": "#!/osrf/gazebo/issues/2320#comment-38316365"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320.json"}}, "type": "issue", "id": 2320, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "PERFORMANCE_transport_stress test times out on gazebo8/default on xenial"}, "content": {"raw": "I just compiled gazebo7 from source on my xenial machine, and it has the same failure. I wonder if it is a difference between the protobuf versions?", "markup": "markdown", "html": "<p>I just compiled gazebo7 from source on my xenial machine, and it has the same failure. I wonder if it is a difference between the protobuf versions?</p>", "type": "rendered"}, "created_on": "2017-07-19T00:20:34.942000+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 38316365}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320/comments/38316418.json"}, "html": {"href": "#!/osrf/gazebo/issues/2320#comment-38316418"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320.json"}}, "type": "issue", "id": 2320, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "PERFORMANCE_transport_stress test times out on gazebo8/default on xenial"}, "content": {"raw": "Raising priority since this seems like a significant performance impact", "markup": "markdown", "html": "<p>Raising priority since this seems like a significant performance impact</p>", "type": "rendered"}, "created_on": "2017-07-19T00:33:36.578579+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 38316418}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320/comments/38316526.json"}, "html": {"href": "#!/osrf/gazebo/issues/2320#comment-38316526"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320.json"}}, "type": "issue", "id": 2320, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "PERFORMANCE_transport_stress test times out on gazebo8/default on xenial"}, "content": {"raw": "Confirmed that gazebo7 in a trusty container doesn't have this issue. Weird!", "markup": "markdown", "html": "<p>Confirmed that gazebo7 in a trusty container doesn't have this issue. Weird!</p>", "type": "rendered"}, "created_on": "2017-07-19T00:45:15.960777+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 38316526}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320/comments/43892469.json"}, "html": {"href": "#!/osrf/gazebo/issues/2320#comment-43892469"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2320.json"}}, "type": "issue", "id": 2320, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "PERFORMANCE_transport_stress test times out on gazebo8/default on xenial"}, "content": {"raw": "It could be the difference in protobuf version. I did some profiling, and it seems to be spending most of its time copying the image message in order to call `Publish`", "markup": "markdown", "html": "<p>It could be the difference in protobuf version. I did some profiling, and it seems to be spending most of its time copying the image message in order to call <code>Publish</code></p>", "type": "rendered"}, "created_on": "2018-03-13T19:59:33.030233+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 43892469}], "page": 1, "size": 6}