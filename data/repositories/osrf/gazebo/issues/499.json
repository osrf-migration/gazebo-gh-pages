{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/499/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/499.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/499/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/499/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/499/assert-calls-in-gazebo-code"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/499/vote"}}, "reporter": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "title": "assert calls in gazebo code", "component": null, "votes": 0, "watches": 3, "content": {"raw": "I just ran across an `assert` call in [ODECollision.cc:106](#!/osrf/gazebo/src/972e25123462a9b1844faff1a48aee00f16bd59f/gazebo/physics/ode/ODECollision.cc?at=default#cl-106). A recursive grep identifies a few more assert calls (I've filtered out a few irrelevant lines):\r\n\r\n~~~\r\n$ grep -rnI assert gazebo\r\ngazebo/gui/GLWidget.cc:729:  assert(q_parent);\r\ngazebo/rendering/MovableText.cc:274:  assert(this->font);\r\ngazebo/rendering/MovableText.cc:275:  assert(!this->material.isNull());\r\ngazebo/rendering/MovableText.cc:609:  assert(this->font);\r\ngazebo/rendering/MovableText.cc:610:  assert(!this->material.isNull());\r\ngazebo/rendering/MovableText.cc:636:  assert(this->camera);\r\ngazebo/rendering/MovableText.cc:645:  assert(mParentNode);\r\ngazebo/rendering/MovableText.cc:724:  assert(!this->material.isNull());\r\ngazebo/rendering/deferred_shading/LightMaterialGenerator.hh:258:        assert(false && \"Permutation must have a light type\");\r\ngazebo/common/MeshCSG.cc:196:  assert(gts_surface_inter_check(si, &closed));\r\ngazebo/common/SkeletonAnimation.cc:143:  assert(t >= 0.0 && t <= 1.0);\r\ngazebo/common/SystemPaths.cc:22:#include <assert.h>\r\ngazebo/math/Matrix3.hh:20:#include <assert.h>\r\ngazebo/math/Matrix3.hh:88:                assert(_row < 3);\r\ngazebo/math/Matrix3.hh:97:                assert(_row < 3);\r\ngazebo/math/RotationSpline.cc:54:  assert (_fromIndex < this->points.size() && \"fromIndex out of bounds\");\r\ngazebo/math/RotationSpline.cc:157:  assert (_index < this->points.size() && \"Point index is out of bounds!!\");\r\ngazebo/math/RotationSpline.cc:176:  assert (_index < this->points.size() && \"Point index is out of bounds!!\");\r\ngazebo/math/RotationSpline.hh:47:        /// \\return a quaternion (out of bound index result in assertion)\r\ngazebo/math/Matrix4.hh:20:#include <assert.h>\r\ngazebo/math/Matrix4.hh:163:                assert(_row < 4);\r\ngazebo/math/Matrix4.hh:170:                assert(_row < 4);\r\ngazebo/physics/ode/ODECollision.cc:106:    assert(dGeomGetSpace(this->collisionId) != 0);\r\ngazebo/physics/ode/ODEMultiRayShape.cc:131:    assert(collision1 && collision2);\r\ngazebo/physics/ode/ODEMultiRayShape.cc:147:      assert(rayCollision == NULL);\r\n~~~\r\n\r\nWe should evaluate whether these should be assertions, and switch them over to GZ_ASSERT if so.", "markup": "markdown", "html": "<p>I just ran across an <code>assert</code> call in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/972e25123462a9b1844faff1a48aee00f16bd59f/gazebo/physics/ode/ODECollision.cc?at=default#cl-106\" rel=\"nofollow\">ODECollision.cc:106</a>. A recursive grep identifies a few more assert calls (I've filtered out a few irrelevant lines):</p>\n<div class=\"codehilite\"><pre><span></span>$ grep -rnI assert gazebo\ngazebo/gui/GLWidget.cc:729:  assert<span class=\"o\">(</span>q_parent<span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/rendering/MovableText.cc:274:  assert<span class=\"o\">(</span>this-&gt;font<span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/rendering/MovableText.cc:275:  assert<span class=\"o\">(</span>!this-&gt;material.isNull<span class=\"o\">())</span><span class=\"p\">;</span>\ngazebo/rendering/MovableText.cc:609:  assert<span class=\"o\">(</span>this-&gt;font<span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/rendering/MovableText.cc:610:  assert<span class=\"o\">(</span>!this-&gt;material.isNull<span class=\"o\">())</span><span class=\"p\">;</span>\ngazebo/rendering/MovableText.cc:636:  assert<span class=\"o\">(</span>this-&gt;camera<span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/rendering/MovableText.cc:645:  assert<span class=\"o\">(</span>mParentNode<span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/rendering/MovableText.cc:724:  assert<span class=\"o\">(</span>!this-&gt;material.isNull<span class=\"o\">())</span><span class=\"p\">;</span>\ngazebo/rendering/deferred_shading/LightMaterialGenerator.hh:258:        assert<span class=\"o\">(</span><span class=\"nb\">false</span> <span class=\"o\">&amp;&amp;</span> <span class=\"s2\">&quot;Permutation must have a light type&quot;</span><span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/common/MeshCSG.cc:196:  assert<span class=\"o\">(</span>gts_surface_inter_check<span class=\"o\">(</span>si, <span class=\"p\">&amp;</span>closed<span class=\"o\">))</span><span class=\"p\">;</span>\ngazebo/common/SkeletonAnimation.cc:143:  assert<span class=\"o\">(</span>t &gt;<span class=\"o\">=</span> <span class=\"m\">0</span>.0 <span class=\"o\">&amp;&amp;</span> t &lt;<span class=\"o\">=</span> <span class=\"m\">1</span>.0<span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/common/SystemPaths.cc:22:#include &lt;assert.h&gt;\ngazebo/math/Matrix3.hh:20:#include &lt;assert.h&gt;\ngazebo/math/Matrix3.hh:88:                assert<span class=\"o\">(</span>_row &lt; <span class=\"m\">3</span><span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/math/Matrix3.hh:97:                assert<span class=\"o\">(</span>_row &lt; <span class=\"m\">3</span><span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/math/RotationSpline.cc:54:  assert <span class=\"o\">(</span>_fromIndex &lt; this-&gt;points.size<span class=\"o\">()</span> <span class=\"o\">&amp;&amp;</span> <span class=\"s2\">&quot;fromIndex out of bounds&quot;</span><span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/math/RotationSpline.cc:157:  assert <span class=\"o\">(</span>_index &lt; this-&gt;points.size<span class=\"o\">()</span> <span class=\"o\">&amp;&amp;</span> <span class=\"s2\">&quot;Point index is out of bounds!!&quot;</span><span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/math/RotationSpline.cc:176:  assert <span class=\"o\">(</span>_index &lt; this-&gt;points.size<span class=\"o\">()</span> <span class=\"o\">&amp;&amp;</span> <span class=\"s2\">&quot;Point index is out of bounds!!&quot;</span><span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/math/RotationSpline.hh:47:        /// <span class=\"se\">\\r</span>eturn a quaternion <span class=\"o\">(</span>out of bound index result in assertion<span class=\"o\">)</span>\ngazebo/math/Matrix4.hh:20:#include &lt;assert.h&gt;\ngazebo/math/Matrix4.hh:163:                assert<span class=\"o\">(</span>_row &lt; <span class=\"m\">4</span><span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/math/Matrix4.hh:170:                assert<span class=\"o\">(</span>_row &lt; <span class=\"m\">4</span><span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/physics/ode/ODECollision.cc:106:    assert<span class=\"o\">(</span>dGeomGetSpace<span class=\"o\">(</span>this-&gt;collisionId<span class=\"o\">)</span> !<span class=\"o\">=</span> <span class=\"m\">0</span><span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/physics/ode/ODEMultiRayShape.cc:131:    assert<span class=\"o\">(</span>collision1 <span class=\"o\">&amp;&amp;</span> collision2<span class=\"o\">)</span><span class=\"p\">;</span>\ngazebo/physics/ode/ODEMultiRayShape.cc:147:      assert<span class=\"o\">(</span><span class=\"nv\">rayCollision</span> <span class=\"o\">==</span> NULL<span class=\"o\">)</span><span class=\"p\">;</span>\n</pre></div>\n\n\n<p>We should evaluate whether these should be assertions, and switch them over to GZ_ASSERT if so.</p>", "type": "rendered"}, "assignee": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-02-12T02:15:56.530789+00:00", "milestone": null, "updated_on": "2016-09-14T19:44:47.865592+00:00", "type": "issue", "id": 499}