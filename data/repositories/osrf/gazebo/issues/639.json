{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/639/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/639.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/639/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/639/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/639/multirayshape-misinterprets-ray-sensor"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/639/vote"}}, "reporter": {"display_name": "Sre\u0107ko Juri\u0107-Kavelj", "uuid": "{f192d1b9-5573-4f54-b7f2-b10ef3d6fa04}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bf192d1b9-5573-4f54-b7f2-b10ef3d6fa04%7D"}, "html": {"href": "https://bitbucket.org/%7Bf192d1b9-5573-4f54-b7f2-b10ef3d6fa04%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/5b4ec0230521d006e2ece44fe1d9800bd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSJ-1.png"}}, "nickname": "jksrecko", "type": "user", "account_id": "557058:65fee91f-8dab-4620-a8c7-6fc8b46e732b"}, "title": "MultiRayShape misinterprets ray sensor vertical angles in term of Euler pitch angles", "component": {"name": "sensors::RaySensor", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122886.json"}}}, "votes": 0, "watches": 6, "content": {"raw": "A yaw, pitch, roll (3-2-1) sequence of Euler angles is used to initialize quaternion in gazebo. Illustration is given in [1, Fig. 1].\r\n\r\nMultiRayShape is the pysics element behind the ray sensor, which is described by horizontal and vertical min and max angles. When initializing the individual rays that represent this sensor, it is assumed that horizontal angle of the sensor ray corresponds to Euler yaw angle, and the vertical angle of the sensor ray corresponds to Euler pitch angle. While this is true for the horizintal angle, Euler pitch angle should actually be the negative vertical angle of the ray (assuming a right handed coordinate system). I.e. a positive pitch (rotation around y axis) steers the x axis (ray) downwards (negative vertical angle).\r\n\r\nThe image (PointCloud) from this sensor is upside-down.\r\nA fix for this is simple, a negative pitch angle should be passed on line 94 of gazebo/physics/MultiRayShape.cc (#!/osrf/gazebo/src/dae44f8efd4eddfe5d0e47f614d9b1fb0abfd3bb/gazebo/physics/MultiRayShape.cc?at=default#cl-94).\r\n\r\n[1] http://personal.maths.surrey.ac.uk/st/T.Bridges/SLOSH/3-2-1-Eulerangles.pdf", "markup": "markdown", "html": "<p>A yaw, pitch, roll (3-2-1) sequence of Euler angles is used to initialize quaternion in gazebo. Illustration is given in [1, Fig. 1].</p>\n<p>MultiRayShape is the pysics element behind the ray sensor, which is described by horizontal and vertical min and max angles. When initializing the individual rays that represent this sensor, it is assumed that horizontal angle of the sensor ray corresponds to Euler yaw angle, and the vertical angle of the sensor ray corresponds to Euler pitch angle. While this is true for the horizintal angle, Euler pitch angle should actually be the negative vertical angle of the ray (assuming a right handed coordinate system). I.e. a positive pitch (rotation around y axis) steers the x axis (ray) downwards (negative vertical angle).</p>\n<p>The image (PointCloud) from this sensor is upside-down.\nA fix for this is simple, a negative pitch angle should be passed on line 94 of gazebo/physics/MultiRayShape.cc (<a href=\"#!/osrf/gazebo/src/dae44f8efd4eddfe5d0e47f614d9b1fb0abfd3bb/gazebo/physics/MultiRayShape.cc?at=default#cl-94\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/dae44f8efd4eddfe5d0e47f614d9b1fb0abfd3bb/gazebo/physics/MultiRayShape.cc?at=default#cl-94</a>).</p>\n<p>[1] <a href=\"http://personal.maths.surrey.ac.uk/st/T.Bridges/SLOSH/3-2-1-Eulerangles.pdf\" rel=\"nofollow\" class=\"ap-connect-link\">http://personal.maths.surrey.ac.uk/st/T.Bridges/SLOSH/3-2-1-Eulerangles.pdf</a></p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-04-11T08:41:52.263805+00:00", "milestone": null, "updated_on": "2016-09-14T19:45:09.265800+00:00", "type": "issue", "id": 639}