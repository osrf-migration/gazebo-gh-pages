{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1193/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1193.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1193/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1193/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1193/world-getrealtime-does-not-advance-when"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1193/vote"}}, "reporter": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "title": "World::GetRealTime does not advance when simulation is paused, and World::Step() is called one step at a time.", "component": null, "votes": 0, "watches": 3, "content": {"raw": "example test that leads to failure against gazebo_3.0 branch:\r\n~~~\r\n$ hg diff test/integration/physics.cc \r\ndiff -r 950f53df81f9 test/integration/physics.cc\r\n--- a/test/integration/physics.cc\tTue May 20 15:20:15 2014 -0700\r\n+++ b/test/integration/physics.cc\tTue May 20 18:05:57 2014 -0700\r\n@@ -71,6 +71,15 @@\r\n   EXPECT_GT(dt, 0);\r\n   t = world->GetSimTime().Double();\r\n   EXPECT_GT(t, 0.99*dt*static_cast<double>(steps+1));\r\n+\r\n+  // test World::GetRealTime()\r\n+  world->SetPaused(true);\r\n+  double startRealTime = world->GetRealTime().Double();\r\n+  for(unsigned int i = 0; i < 2000; ++i)\r\n+  {\r\n+    world->Step(1);\r\n+    EXPECT_GT(world->GetRealTime().Double(), startRealTime);\r\n+  }\r\n }\r\n \r\n TEST_P(PhysicsTest, EmptyWorld)\r\n~~~\r\n\r\nDocumentation on what `World::GetRealTime()` should do does not specify if this is the expected behavior.", "markup": "markdown", "html": "<p>example test that leads to failure against gazebo_3.0 branch:</p>\n<div class=\"codehilite\"><pre><span></span>$ hg diff test/integration/physics.cc \ndiff -r 950f53df81f9 test/integration/physics.cc\n--- a/test/integration/physics.cc   Tue May <span class=\"m\">20</span> <span class=\"m\">15</span>:20:15 <span class=\"m\">2014</span> -0700\n+++ b/test/integration/physics.cc   Tue May <span class=\"m\">20</span> <span class=\"m\">18</span>:05:57 <span class=\"m\">2014</span> -0700\n@@ -71,6 +71,15 @@\n   EXPECT_GT<span class=\"o\">(</span>dt, <span class=\"m\">0</span><span class=\"o\">)</span><span class=\"p\">;</span>\n   <span class=\"nv\">t</span> <span class=\"o\">=</span> world-&gt;GetSimTime<span class=\"o\">()</span>.Double<span class=\"o\">()</span><span class=\"p\">;</span>\n   EXPECT_GT<span class=\"o\">(</span>t, <span class=\"m\">0</span>.99*dt*static_cast&lt;double&gt;<span class=\"o\">(</span>steps+1<span class=\"o\">))</span><span class=\"p\">;</span>\n+\n+  // <span class=\"nb\">test</span> World::GetRealTime<span class=\"o\">()</span>\n+  world-&gt;SetPaused<span class=\"o\">(</span><span class=\"nb\">true</span><span class=\"o\">)</span><span class=\"p\">;</span>\n+  double <span class=\"nv\">startRealTime</span> <span class=\"o\">=</span> world-&gt;GetRealTime<span class=\"o\">()</span>.Double<span class=\"o\">()</span><span class=\"p\">;</span>\n+  <span class=\"k\">for</span><span class=\"o\">(</span>unsigned int <span class=\"nv\">i</span> <span class=\"o\">=</span> <span class=\"m\">0</span><span class=\"p\">;</span> i &lt; <span class=\"m\">2000</span><span class=\"p\">;</span> ++i<span class=\"o\">)</span>\n+  <span class=\"o\">{</span>\n+    world-&gt;Step<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span><span class=\"p\">;</span>\n+    EXPECT_GT<span class=\"o\">(</span>world-&gt;GetRealTime<span class=\"o\">()</span>.Double<span class=\"o\">()</span>, startRealTime<span class=\"o\">)</span><span class=\"p\">;</span>\n+  <span class=\"o\">}</span>\n <span class=\"o\">}</span>\n\n TEST_P<span class=\"o\">(</span>PhysicsTest, EmptyWorld<span class=\"o\">)</span>\n</pre></div>\n\n\n<p>Documentation on what <code>World::GetRealTime()</code> should do does not specify if this is the expected behavior.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2014-05-21T01:06:41.661471+00:00", "milestone": null, "updated_on": "2016-09-14T19:24:55.843882+00:00", "type": "issue", "id": 1193}