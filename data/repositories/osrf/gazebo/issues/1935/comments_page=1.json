{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935/comments/27148439.json"}, "html": {"href": "#!/osrf/gazebo/issues/1935#comment-27148439"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935.json"}}, "type": "issue", "id": 1935, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Attach two models via CreateJoint crash (reproducible code included)"}, "content": {"raw": "I've verified the bug or the problem with programming following Sam's instruction with gazebo4 and gazebo7 using ROS Indigo.", "markup": "markdown", "html": "<p>I've verified the bug or the problem with programming following Sam's instruction with gazebo4 and gazebo7 using ROS Indigo.</p>", "type": "rendered"}, "created_on": "2016-04-20T17:49:51.169900+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": null, "type": "issue_comment", "id": 27148439}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935/comments/27164473.json"}, "html": {"href": "#!/osrf/gazebo/issues/1935#comment-27164473"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935.json"}}, "type": "issue", "id": 1935, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Attach two models via CreateJoint crash (reproducible code included)"}, "content": {"raw": "Seems like the problem came from my code, I needed to call SetModel with the second model that the joint needed (I was giving the same model than the one when calling CreateJoint).\n\nThanks for the attention. My final code looks like:\n\n\n```\n#!c++\n// m1 is model1, m2 is model2, l1 is link of model1 and l2 is link of model2\n    this->fixedJoint = this->physics->CreateJoint(\"revolute\", m1);\n    this->fixedJoint->Attach(l1, l2);\n    this->fixedJoint->Load(l1,\n                           l2, math::Pose());\n    this->fixedJoint->SetModel(m2);\n    /*\n     * If SetModel is not done we get:\n     * ***** Internal Program Error - assertion (this->GetParentModel() != __null)\n     failed in void gazebo::physics::Entity::PublishPose():\n     /tmp/buildd/gazebo2-2.2.3/gazebo/physics/Entity.cc(225):\n     An entity without a parent model should not happen\n\n     * If SetModel is given the same model than CreateJoint given\n     * Gazebo crashes with\n     * ***** Internal Program Error - assertion (self->inertial != __null)\n     failed in static void gazebo::physics::ODELink::MoveCallback(dBodyID):\n     /tmp/buildd/gazebo2-2.2.3/gazebo/physics/ode/ODELink.cc(183): Inertial pointer is NULL\n     */\n\n    this->fixedJoint->SetAxis(0, math::Vector3(0, 0, 1));\n    this->fixedJoint->SetHighStop(0, 0);\n    this->fixedJoint->SetLowStop(0, 0);\n    this->fixedJoint->SetName(\"fixedjoint\");\n    this->fixedJoint->Init();\n\n```", "markup": "markdown", "html": "<p>Seems like the problem came from my code, I needed to call SetModel with the second model that the joint needed (I was giving the same model than the one when calling CreateJoint).</p>\n<p>Thanks for the attention. My final code looks like:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"c1\">// m1 is model1, m2 is model2, l1 is link of model1 and l2 is link of model2</span>\n    <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">fixedJoint</span> <span class=\"o\">=</span> <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">physics</span><span class=\"o\">-&gt;</span><span class=\"n\">CreateJoint</span><span class=\"p\">(</span><span class=\"s\">&quot;revolute&quot;</span><span class=\"p\">,</span> <span class=\"n\">m1</span><span class=\"p\">);</span>\n    <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">fixedJoint</span><span class=\"o\">-&gt;</span><span class=\"n\">Attach</span><span class=\"p\">(</span><span class=\"n\">l1</span><span class=\"p\">,</span> <span class=\"n\">l2</span><span class=\"p\">);</span>\n    <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">fixedJoint</span><span class=\"o\">-&gt;</span><span class=\"n\">Load</span><span class=\"p\">(</span><span class=\"n\">l1</span><span class=\"p\">,</span>\n                           <span class=\"n\">l2</span><span class=\"p\">,</span> <span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">Pose</span><span class=\"p\">());</span>\n    <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">fixedJoint</span><span class=\"o\">-&gt;</span><span class=\"n\">SetModel</span><span class=\"p\">(</span><span class=\"n\">m2</span><span class=\"p\">);</span>\n    <span class=\"cm\">/*</span>\n<span class=\"cm\">     * If SetModel is not done we get:</span>\n<span class=\"cm\">     * ***** Internal Program Error - assertion (this-&gt;GetParentModel() != __null)</span>\n<span class=\"cm\">     failed in void gazebo::physics::Entity::PublishPose():</span>\n<span class=\"cm\">     /tmp/buildd/gazebo2-2.2.3/gazebo/physics/Entity.cc(225):</span>\n<span class=\"cm\">     An entity without a parent model should not happen</span>\n\n<span class=\"cm\">     * If SetModel is given the same model than CreateJoint given</span>\n<span class=\"cm\">     * Gazebo crashes with</span>\n<span class=\"cm\">     * ***** Internal Program Error - assertion (self-&gt;inertial != __null)</span>\n<span class=\"cm\">     failed in static void gazebo::physics::ODELink::MoveCallback(dBodyID):</span>\n<span class=\"cm\">     /tmp/buildd/gazebo2-2.2.3/gazebo/physics/ode/ODELink.cc(183): Inertial pointer is NULL</span>\n<span class=\"cm\">     */</span>\n\n    <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">fixedJoint</span><span class=\"o\">-&gt;</span><span class=\"n\">SetAxis</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">Vector3</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">));</span>\n    <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">fixedJoint</span><span class=\"o\">-&gt;</span><span class=\"n\">SetHighStop</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">);</span>\n    <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">fixedJoint</span><span class=\"o\">-&gt;</span><span class=\"n\">SetLowStop</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">);</span>\n    <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">fixedJoint</span><span class=\"o\">-&gt;</span><span class=\"n\">SetName</span><span class=\"p\">(</span><span class=\"s\">&quot;fixedjoint&quot;</span><span class=\"p\">);</span>\n    <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">fixedJoint</span><span class=\"o\">-&gt;</span><span class=\"n\">Init</span><span class=\"p\">();</span>\n</pre></div>", "type": "rendered"}, "created_on": "2016-04-21T10:06:58.176926+00:00", "user": {"display_name": "Sam Pfeiffer", "uuid": "{de0a874a-b569-4840-93e1-ce1590b7ab4b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bde0a874a-b569-4840-93e1-ce1590b7ab4b%7D"}, "html": {"href": "https://bitbucket.org/%7Bde0a874a-b569-4840-93e1-ce1590b7ab4b%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:34577b3a-b3a5-4cbe-a032-e7f00f75244e/e01dd7be-ac01-4d0e-a108-64ae6ec5fb80/128"}}, "nickname": "awesomebytes", "type": "user", "account_id": "557058:34577b3a-b3a5-4cbe-a032-e7f00f75244e"}, "updated_on": null, "type": "issue_comment", "id": 27164473}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935/comments/27164495.json"}, "html": {"href": "#!/osrf/gazebo/issues/1935#comment-27164495"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935.json"}}, "type": "issue", "id": 1935, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Attach two models via CreateJoint crash (reproducible code included)"}, "content": {"raw": "I solved the problem, it was in my code, see the comment I made before for a full explanation.", "markup": "markdown", "html": "<p>I solved the problem, it was in my code, see the comment I made before for a full explanation.</p>", "type": "rendered"}, "created_on": "2016-04-21T10:08:18.165977+00:00", "user": {"display_name": "Sam Pfeiffer", "uuid": "{de0a874a-b569-4840-93e1-ce1590b7ab4b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bde0a874a-b569-4840-93e1-ce1590b7ab4b%7D"}, "html": {"href": "https://bitbucket.org/%7Bde0a874a-b569-4840-93e1-ce1590b7ab4b%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:34577b3a-b3a5-4cbe-a032-e7f00f75244e/e01dd7be-ac01-4d0e-a108-64ae6ec5fb80/128"}}, "nickname": "awesomebytes", "type": "user", "account_id": "557058:34577b3a-b3a5-4cbe-a032-e7f00f75244e"}, "updated_on": null, "type": "issue_comment", "id": 27164495}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935/comments/27176341.json"}, "html": {"href": "#!/osrf/gazebo/issues/1935#comment-27176341"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935.json"}}, "type": "issue", "id": 1935, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Attach two models via CreateJoint crash (reproducible code included)"}, "content": {"raw": "It looks like this could be handled better than just letting Gazebo crash. We should be able to detect the problem, print an error message and not create the joint, I think.", "markup": "markdown", "html": "<p>It looks like this could be handled better than just letting Gazebo crash. We should be able to detect the problem, print an error message and not create the joint, I think.</p>", "type": "rendered"}, "created_on": "2016-04-21T17:16:53.474367+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": null, "type": "issue_comment", "id": 27176341}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935/comments/27196645.json"}, "html": {"href": "#!/osrf/gazebo/issues/1935#comment-27196645"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935.json"}}, "type": "issue", "id": 1935, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Attach two models via CreateJoint crash (reproducible code included)"}, "content": {"raw": "For anyone that may end up here trying to implement the same, in the repo you can find a plugin that through a service call you can attach (and later detach) any two links in the simulation:\nhttps://github.com/pal-robotics/gazebo_ros_link_attacher\n\nThere are also a couple of comments on things that make it crash and with what error, so someone else may end up googling those errors and find my solution.", "markup": "markdown", "html": "<p>For anyone that may end up here trying to implement the same, in the repo you can find a plugin that through a service call you can attach (and later detach) any two links in the simulation:\n<a href=\"https://github.com/pal-robotics/gazebo_ros_link_attacher\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/pal-robotics/gazebo_ros_link_attacher</a></p>\n<p>There are also a couple of comments on things that make it crash and with what error, so someone else may end up googling those errors and find my solution.</p>", "type": "rendered"}, "created_on": "2016-04-22T12:13:44.427634+00:00", "user": {"display_name": "Sam Pfeiffer", "uuid": "{de0a874a-b569-4840-93e1-ce1590b7ab4b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bde0a874a-b569-4840-93e1-ce1590b7ab4b%7D"}, "html": {"href": "https://bitbucket.org/%7Bde0a874a-b569-4840-93e1-ce1590b7ab4b%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:34577b3a-b3a5-4cbe-a032-e7f00f75244e/e01dd7be-ac01-4d0e-a108-64ae6ec5fb80/128"}}, "nickname": "awesomebytes", "type": "user", "account_id": "557058:34577b3a-b3a5-4cbe-a032-e7f00f75244e"}, "updated_on": null, "type": "issue_comment", "id": 27196645}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935/comments/30611140.json"}, "html": {"href": "#!/osrf/gazebo/issues/1935#comment-30611140"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935.json"}}, "type": "issue", "id": 1935, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Attach two models via CreateJoint crash (reproducible code included)"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2016-09-14T19:24:22.266088+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 30611140}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935/comments/30612050.json"}, "html": {"href": "#!/osrf/gazebo/issues/1935#comment-30612050"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1935.json"}}, "type": "issue", "id": 1935, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Attach two models via CreateJoint crash (reproducible code included)"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2016-09-14T19:43:42.914789+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 30612050}], "page": 1, "size": 7}