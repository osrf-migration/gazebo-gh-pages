{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2080/comments/31812601.json"}, "html": {"href": "#!/osrf/gazebo/issues/2080#comment-31812601"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2080.json"}}, "type": "issue", "id": 2080, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "wrench topic prints incorrectly"}, "content": {"raw": "I added the following patch to `tools/gz_topic.cc`:\n\n~~~\ndiff -r ec2881681a3e tools/gz_topic.cc\n--- a/tools/gz_topic.cc\tFri Oct 28 14:11:58 2016 +0000\n+++ b/tools/gz_topic.cc\tMon Oct 31 15:34:35 2016 -0700\n@@ -191,7 +191,11 @@\n     return;\n   }\n \n+  std::cout << \"intended type: \" << msgTypeName << std::endl;\n   this->echoMsg = msgs::MsgFactory::NewMsg(msgTypeName);\n+  std::cout << \"actual type: \" << this->echoMsg->GetTypeName() << std::endl;\n+  std::cout << \"message descriptor: \" << this->echoMsg->GetDescriptor()->DebugString()\n+            << std::endl;\n \n   if (!this->echoMsg)\n   {\n~~~\n\nthen I inserted a box, applied a force torque and gave an echo command:\n\n~~~\n$ gz topic -e /gazebo/default/unit_box/link/wrench\nintended type: gazebo.msgs.Wrench\nactual type: ignition.msgs.Wrench\nmessage descriptor: message Wrench {\n  optional .ignition.msgs.Vector3d force = 1;\n  optional .ignition.msgs.Vector3d torque = 2;\n  optional .ignition.msgs.Vector3d force_offset = 3;\n}\n~~~\n\nsomehow, it is trying to create a `.gazebo.msgs.Wrench` object, but it is getting an ignition one instead.\n", "markup": "markdown", "html": "<p>I added the following patch to <code>tools/gz_topic.cc</code>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r ec2881681a3e tools/gz_topic.cc</span>\n<span class=\"gd\">--- a/tools/gz_topic.cc Fri Oct 28 14:11:58 2016 +0000</span>\n<span class=\"gi\">+++ b/tools/gz_topic.cc Mon Oct 31 15:34:35 2016 -0700</span>\n<span class=\"gu\">@@ -191,7 +191,11 @@</span>\n     return;\n   }\n\n<span class=\"gi\">+  std::cout &lt;&lt; &quot;intended type: &quot; &lt;&lt; msgTypeName &lt;&lt; std::endl;</span>\n   this-&gt;echoMsg = msgs::MsgFactory::NewMsg(msgTypeName);\n<span class=\"gi\">+  std::cout &lt;&lt; &quot;actual type: &quot; &lt;&lt; this-&gt;echoMsg-&gt;GetTypeName() &lt;&lt; std::endl;</span>\n<span class=\"gi\">+  std::cout &lt;&lt; &quot;message descriptor: &quot; &lt;&lt; this-&gt;echoMsg-&gt;GetDescriptor()-&gt;DebugString()</span>\n<span class=\"gi\">+            &lt;&lt; std::endl;</span>\n\n   if (!this-&gt;echoMsg)\n   {\n</pre></div>\n\n\n<p>then I inserted a box, applied a force torque and gave an echo command:</p>\n<div class=\"codehilite\"><pre><span></span>$ gz topic -e /gazebo/default/unit_box/link/wrench\nintended type: gazebo.msgs.Wrench\nactual type: ignition.msgs.Wrench\nmessage descriptor: message Wrench <span class=\"o\">{</span>\n  optional .ignition.msgs.Vector3d <span class=\"nv\">force</span> <span class=\"o\">=</span> <span class=\"m\">1</span><span class=\"p\">;</span>\n  optional .ignition.msgs.Vector3d <span class=\"nv\">torque</span> <span class=\"o\">=</span> <span class=\"m\">2</span><span class=\"p\">;</span>\n  optional .ignition.msgs.Vector3d <span class=\"nv\">force_offset</span> <span class=\"o\">=</span> <span class=\"m\">3</span><span class=\"p\">;</span>\n<span class=\"o\">}</span>\n</pre></div>\n\n\n<p>somehow, it is trying to create a <code>.gazebo.msgs.Wrench</code> object, but it is getting an ignition one instead.</p>", "type": "rendered"}, "created_on": "2016-10-31T22:36:29.412328+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 31812601}