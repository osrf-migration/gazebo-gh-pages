{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1816/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1816.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1816/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1816/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1816/multiple-redundant-jointvisual-s-created"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1816/vote"}}, "reporter": {"display_name": "Elte Hupkes", "uuid": "{f23aa1a9-ae57-493f-8169-fbb59b3eae43}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bf23aa1a9-ae57-493f-8169-fbb59b3eae43%7D"}, "html": {"href": "https://bitbucket.org/%7Bf23aa1a9-ae57-493f-8169-fbb59b3eae43%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8560ee94d50ba277c411499a45b3d732d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsEH-5.png"}}, "nickname": "ElteHupkes", "type": "user", "account_id": "557058:b758f523-bdaa-4718-964c-03b825bdea8d"}, "title": "Multiple redundant `JointVisual`s created", "component": {"name": "rendering", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122881.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "`Scene` has multiple entry points for creating `JointVisual`s - apart from actual `Joint` messages received through the transport library it queues such a message for every `Scene` or `Model` message. Every one of these messages results in the creation of a new `JointVisual`, regardless of whether or not this visual already exists. Apart from the obvious redundancy it also leads to a memory leak when the joint is deleted; the visual gets the ID of the joint and only one visual for each ID is stored or deleted.\r\n\r\nAssuming that it should still be possible to send redundant joint messages, it would suffice to check if the visual for that joint already exists, see:\r\nhttps://bitbucket.org/ElteHupkes/gazebo/commits/0c337d6a36159ace6d17065ce6abc708a93bdf72", "markup": "markdown", "html": "<p><code>Scene</code> has multiple entry points for creating <code>JointVisual</code>s - apart from actual <code>Joint</code> messages received through the transport library it queues such a message for every <code>Scene</code> or <code>Model</code> message. Every one of these messages results in the creation of a new <code>JointVisual</code>, regardless of whether or not this visual already exists. Apart from the obvious redundancy it also leads to a memory leak when the joint is deleted; the visual gets the ID of the joint and only one visual for each ID is stored or deleted.</p>\n<p>Assuming that it should still be possible to send redundant joint messages, it would suffice to check if the visual for that joint already exists, see:\n<a href=\"https://bitbucket.org/ElteHupkes/gazebo/commits/0c337d6a36159ace6d17065ce6abc708a93bdf72\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/ElteHupkes/gazebo/commits/0c337d6a36159ace6d17065ce6abc708a93bdf72</a></p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "6.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/170782.json"}}}, "edited_on": null, "created_on": "2015-12-24T14:31:52.393738+00:00", "milestone": null, "updated_on": "2016-02-17T11:58:46.227089+00:00", "type": "issue", "id": 1816}