{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2697/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2697.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2697/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2697/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2697/gui-plugins-fail-to-load-if-header-file-is"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2697/vote"}}, "reporter": {"display_name": "Bill Fan", "uuid": "{720a702b-4b2f-4898-b7a6-64ee5ef2208c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B720a702b-4b2f-4898-b7a6-64ee5ef2208c%7D"}, "html": {"href": "https://bitbucket.org/%7B720a702b-4b2f-4898-b7a6-64ee5ef2208c%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/bad049ef737f199a83faa95f052d01a2d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsBF-2.png"}}, "nickname": "Bill Fan", "type": "user", "account_id": "5e5c8bf02a59dc0c8fe6ba82"}, "title": "GUI Plugins Fail to Load if Header File is in Sub-Directory", "component": {"name": "plugins", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/332959.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "Hi all,\r\n\r\nI\u2019m not sure if this is actually a bug or if it\u2019s just my inexperience with CMake.\r\n\r\nMy project directory structure:\r\n\r\n```\r\n|- Project/\r\n    |- GUIBugDemo.world\r\n    |- CMakeLists.txt\r\n    |- GUIBugPlugin.cc\r\n    |- include/\r\n        |- GUIBugPlugin.hh\r\n```\r\n\r\nEach of the files are just the bare minimum boilerplate \\(see attached\\).\r\n\r\nWhen I try to run the world I get the following error:\r\n\r\n```\r\n[Err] [Plugin.hh:178] Failed to load plugin ./libGUIBugPlugin.so: ./libGUIBugPlugin.so: undefined symbol: _ZTVN6gazebo12GUIBugPluginE\r\n[Err] [MainWindow.cc:2092] Unable to create gui overlay plugin with filename[./libGUIBugPlugin.so]\r\n```\r\n\r\nThis problem went away when I moved the header file out of `~/Project/include/` and just into `~/Project/`,\r\n\r\nand changed `#include \u201cinclude/GUIBugPlugin.hh\u201d` to `#include \u201cGUIBugPlugin.hh\u201d`\r\n\r\nI did not have this problem with non-GUI plugins. I am running Ubuntu 18.04 and this is Gazebo 9.\r\n\r\nDid I simply miss something in CMake? I already tried adding `~/Project/include/` to `include_directories` in `CMakeLists.txt`", "markup": "markdown", "html": "<p>Hi all,</p>\n<p>I\u2019m not sure if this is actually a bug or if it\u2019s just my inexperience with CMake.</p>\n<p>My project directory structure:</p>\n<div class=\"codehilite\"><pre><span></span>|- Project/\n    |- GUIBugDemo.world\n    |- CMakeLists.txt\n    |- GUIBugPlugin.cc\n    |- include/\n        |- GUIBugPlugin.hh\n</pre></div>\n\n\n<p>Each of the files are just the bare minimum boilerplate (see attached).</p>\n<p>When I try to run the world I get the following error:</p>\n<div class=\"codehilite\"><pre><span></span>[Err] [Plugin.hh:178] Failed to load plugin ./libGUIBugPlugin.so: ./libGUIBugPlugin.so: undefined symbol: _ZTVN6gazebo12GUIBugPluginE\n[Err] [MainWindow.cc:2092] Unable to create gui overlay plugin with filename[./libGUIBugPlugin.so]\n</pre></div>\n\n\n<p>This problem went away when I moved the header file out of <code>~/Project/include/</code> and just into <code>~/Project/</code>,</p>\n<p>and changed <code>#include \u201cinclude/GUIBugPlugin.hh\u201d</code> to <code>#include \u201cGUIBugPlugin.hh\u201d</code></p>\n<p>I did not have this problem with non-GUI plugins. I am running Ubuntu 18.04 and this is Gazebo 9.</p>\n<p>Did I simply miss something in CMake? I already tried adding <code>~/Project/include/</code> to <code>include_directories</code> in <code>CMakeLists.txt</code></p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "9.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242746.json"}}}, "edited_on": null, "created_on": "2020-03-02T05:05:59.903366+00:00", "milestone": null, "updated_on": "2020-03-05T17:28:13.086940+00:00", "type": "issue", "id": 2697}