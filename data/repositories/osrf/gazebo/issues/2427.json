{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2427/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2427.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2427/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2427/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2427/state-log-wont-play-with-gazebo-83-because"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2427/vote"}}, "reporter": {"display_name": "Deanna Hood", "uuid": "{40d490b4-7de9-4c89-ac1c-2219a22057eb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B40d490b4-7de9-4c89-ac1c-2219a22057eb%7D"}, "html": {"href": "https://bitbucket.org/%7B40d490b4-7de9-4c89-ac1c-2219a22057eb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ec666897-79d8-48b4-ae27-4f0e9e56f5b5/f7b56737-eb1f-481f-beb1-50c179565cf4/128"}}, "nickname": "d_hood", "type": "user", "account_id": "557058:ec666897-79d8-48b4-ae27-4f0e9e56f5b5"}, "title": "State log won't play with gazebo 8.3 because of a model plugin", "component": null, "votes": 0, "watches": 1, "content": {"raw": "After upgrading to gazebo 8.3 I am having issues playing existing log files because of a particular model plugin. I think the plugin never used to load during log playback before, but with 8.3 it does.\r\n\r\nThis affects ARIAC logging with the ur10, but I've managed to reproduce an ARIAC-agnostic example.\r\n\r\nUsing the insertion_deletion.log added in #!/osrf/gazebo/pull-requests/2608 (because it's a log file without encoding), if you make the following modification, it will play in gazebo 8.2 but it will not play in gazebo 8.3.\r\n\r\n```\r\ndiff --git a/insertion_deletion.log b/insertion_deletion_plugin.log\r\nindex a946e73..2800a41 100644\r\n--- a/insertion_deletion.log\r\n+++ b/insertion_deletion_plugin.log\r\n@@ -39,6 +39,9 @@\r\n </chunk>\r\n <chunk encoding='txt'>\r\n <![CDATA[<sdf version='1.6'><state world_name='default'><sim_time>1 607000000</sim_time><wall_time>1488833218 801500869</wall_time><real_time>1 658504778</real_time><iterations>1607</iterations><insertions><model name='unit_box'>\r\n+  <plugin name='ros_control' filename='libgazebo_ros_control.so'>\r\n+    <robotNamespace>/</robotNamespace>\r\n+  </plugin>\r\n   <pose frame=''>-0.541687 -2.44761 0.5 0 -0 0</pose>\r\n   <link name='link'>\r\n     <inertial>\r\n```\r\n\r\n---\r\n\r\nI think that model plugins used to be ignored in log playback, because if you change `libgazebo_ros_control.so` to `dummy.so`, nothing changes in gazebo 8.2, while gazebo 8.3 will complain that it can't find the plugin:\r\n```\r\n[Err] [Plugin.hh:180] Failed to load plugin dummy.so: dummy.so: cannot open shared object file: No such file or directory\r\n```\r\n\r\n---\r\n\r\nI can appreciate that there are some plugins for which it makes sense for them to be loaded during playback (e.g. visual plugins), but it doesn't make sense for this particular plugin. Was this behaviour change intentional? If so would it be appropriate to add an option to disable plugin loading at playback?", "markup": "markdown", "html": "<p>After upgrading to gazebo 8.3 I am having issues playing existing log files because of a particular model plugin. I think the plugin never used to load during log playback before, but with 8.3 it does.</p>\n<p>This affects ARIAC logging with the ur10, but I've managed to reproduce an ARIAC-agnostic example.</p>\n<p>Using the insertion_deletion.log added in <a href=\"#!/osrf/gazebo/pull-requests/2608\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/pull-requests/2608</a> (because it's a log file without encoding), if you make the following modification, it will play in gazebo 8.2 but it will not play in gazebo 8.3.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff --git a/insertion_deletion.log b/insertion_deletion_plugin.log</span>\n<span class=\"gh\">index a946e73..2800a41 100644</span>\n<span class=\"gd\">--- a/insertion_deletion.log</span>\n<span class=\"gi\">+++ b/insertion_deletion_plugin.log</span>\n<span class=\"gu\">@@ -39,6 +39,9 @@</span>\n &lt;/chunk&gt;\n &lt;chunk encoding=&#39;txt&#39;&gt;\n &lt;![CDATA[&lt;sdf version=&#39;1.6&#39;&gt;&lt;state world_name=&#39;default&#39;&gt;&lt;sim_time&gt;1 607000000&lt;/sim_time&gt;&lt;wall_time&gt;1488833218 801500869&lt;/wall_time&gt;&lt;real_time&gt;1 658504778&lt;/real_time&gt;&lt;iterations&gt;1607&lt;/iterations&gt;&lt;insertions&gt;&lt;model name=&#39;unit_box&#39;&gt;\n<span class=\"gi\">+  &lt;plugin name=&#39;ros_control&#39; filename=&#39;libgazebo_ros_control.so&#39;&gt;</span>\n<span class=\"gi\">+    &lt;robotNamespace&gt;/&lt;/robotNamespace&gt;</span>\n<span class=\"gi\">+  &lt;/plugin&gt;</span>\n   &lt;pose frame=&#39;&#39;&gt;-0.541687 -2.44761 0.5 0 -0 0&lt;/pose&gt;\n   &lt;link name=&#39;link&#39;&gt;\n     &lt;inertial&gt;\n</pre></div>\n\n\n<hr />\n<p>I think that model plugins used to be ignored in log playback, because if you change <code>libgazebo_ros_control.so</code> to <code>dummy.so</code>, nothing changes in gazebo 8.2, while gazebo 8.3 will complain that it can't find the plugin:</p>\n<div class=\"codehilite\"><pre><span></span>[Err] [Plugin.hh:180] Failed to load plugin dummy.so: dummy.so: cannot open shared object file: No such file or directory\n</pre></div>\n\n\n<hr />\n<p>I can appreciate that there are some plugins for which it makes sense for them to be loaded during playback (e.g. visual plugins), but it doesn't make sense for this particular plugin. Was this behaviour change intentional? If so would it be appropriate to add an option to disable plugin loading at playback?</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-02-14T20:27:29.548336+00:00", "milestone": null, "updated_on": "2018-03-01T21:09:41.351227+00:00", "type": "issue", "id": 2427}