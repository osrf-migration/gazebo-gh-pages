{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2677/comments/55047955.json"}, "html": {"href": "#!/osrf/gazebo/issues/2677#comment-55047955"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2677.json"}}, "type": "issue", "id": 2677, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Compilation fails with new DARTsim release"}, "content": {"raw": "`$ hg diff` gives the following patch on gazebo10 branch\n```diff\ndiff -r 0d2a582e4e14 CMakeLists.txt\n--- a/CMakeLists.txt    Thu Mar 28 05:18:50 2019 +0000\n+++ b/CMakeLists.txt    Mon Dec 02 14:45:38 2019 +0900\n@@ -41,6 +41,7 @@\n # choose -std=c++14.\n # See https://bitbucket.org/ignitionrobotics/ign-cmake/issues/13 for more info.\n set(CMAKE_CXX_EXTENSIONS off)\n+add_definitions(-std=c++14)\n \n ########################################\n # Package Creation:\ndiff -r 0d2a582e4e14 gazebo/physics/dart/DARTHeightmapShape.cc\n--- a/gazebo/physics/dart/DARTHeightmapShape.cc Thu Mar 28 05:18:50 2019 +0000\n+++ b/gazebo/physics/dart/DARTHeightmapShape.cc Mon Dec 02 14:45:38 2019 +0900\n@@ -64,7 +64,7 @@\n   GZ_ASSERT(this->dataPtr->Shape(), \"Shape is NULL\");\n   this->dataPtr->Shape()->setHeightField(this->vertSize, this->vertSize,\n                                          this->heights);\n-  this->dataPtr->Shape()->setScale(Eigen::Vector3d(this->scale.X(),\n+  this->dataPtr->Shape()->setScale(Eigen::Vector3f(this->scale.X(),\n                                                    this->scale.Y(), 1));\n }\n \n@@ -72,6 +72,6 @@\n void DARTHeightmapShape::SetScale(const ignition::math::Vector3d &_scale)\n {\n   GZ_ASSERT(this->dataPtr->Shape(), \"Shape is NULL\");\n-  this->dataPtr->Shape()->setScale(Eigen::Vector3d(_scale.X(), _scale.Y(), 1));\n+  this->dataPtr->Shape()->setScale(Eigen::Vector3f(_scale.X(), _scale.Y(), 1));\n   HeightmapShape::SetScale(_scale);\n }\n```", "markup": "markdown", "html": "<p><code>$ hg diff</code> gives the following patch on gazebo10 branch</p>\n<div class=\"codehilite language-diff\"><pre><span></span><span class=\"gh\">diff -r 0d2a582e4e14 CMakeLists.txt</span>\n<span class=\"gd\">--- a/CMakeLists.txt    Thu Mar 28 05:18:50 2019 +0000</span>\n<span class=\"gi\">+++ b/CMakeLists.txt    Mon Dec 02 14:45:38 2019 +0900</span>\n<span class=\"gu\">@@ -41,6 +41,7 @@</span>\n # choose -std=c++14.\n # See https://bitbucket.org/ignitionrobotics/ign-cmake/issues/13 for more info.\n set(CMAKE_CXX_EXTENSIONS off)\n<span class=\"gi\">+add_definitions(-std=c++14)</span>\n\n ########################################\n # Package Creation:\n<span class=\"gh\">diff -r 0d2a582e4e14 gazebo/physics/dart/DARTHeightmapShape.cc</span>\n<span class=\"gd\">--- a/gazebo/physics/dart/DARTHeightmapShape.cc Thu Mar 28 05:18:50 2019 +0000</span>\n<span class=\"gi\">+++ b/gazebo/physics/dart/DARTHeightmapShape.cc Mon Dec 02 14:45:38 2019 +0900</span>\n<span class=\"gu\">@@ -64,7 +64,7 @@</span>\n   GZ_ASSERT(this-&gt;dataPtr-&gt;Shape(), &quot;Shape is NULL&quot;);\n   this-&gt;dataPtr-&gt;Shape()-&gt;setHeightField(this-&gt;vertSize, this-&gt;vertSize,\n                                          this-&gt;heights);\n<span class=\"gd\">-  this-&gt;dataPtr-&gt;Shape()-&gt;setScale(Eigen::Vector3d(this-&gt;scale.X(),</span>\n<span class=\"gi\">+  this-&gt;dataPtr-&gt;Shape()-&gt;setScale(Eigen::Vector3f(this-&gt;scale.X(),</span>\n                                                    this-&gt;scale.Y(), 1));\n }\n\n<span class=\"gu\">@@ -72,6 +72,6 @@</span>\n void DARTHeightmapShape::SetScale(const ignition::math::Vector3d &amp;_scale)\n {\n   GZ_ASSERT(this-&gt;dataPtr-&gt;Shape(), &quot;Shape is NULL&quot;);\n<span class=\"gd\">-  this-&gt;dataPtr-&gt;Shape()-&gt;setScale(Eigen::Vector3d(_scale.X(), _scale.Y(), 1));</span>\n<span class=\"gi\">+  this-&gt;dataPtr-&gt;Shape()-&gt;setScale(Eigen::Vector3f(_scale.X(), _scale.Y(), 1));</span>\n   HeightmapShape::SetScale(_scale);\n }\n</pre></div>", "type": "rendered"}, "created_on": "2019-12-02T05:48:11.260971+00:00", "user": {"display_name": "Kunal Tyagi", "uuid": "{549058f2-c154-4c9c-a8ac-be524224888a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B549058f2-c154-4c9c-a8ac-be524224888a%7D"}, "html": {"href": "https://bitbucket.org/%7B549058f2-c154-4c9c-a8ac-be524224888a%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:9066091b-9d3b-4f74-a7fe-d994c559b147/d36dc15c-fc09-4288-8b57-d6b17b9f6036/128"}}, "nickname": "kunaltyagi", "type": "user", "account_id": "557058:9066091b-9d3b-4f74-a7fe-d994c559b147"}, "updated_on": null, "type": "issue_comment", "id": 55047955}