{"changes": {"state": {"new": "resolved", "old": "new"}}, "links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2582/changes/50574001.json"}, "html": {"href": "#!/osrf/gazebo/issues/2582#comment-50574001"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2582.json"}}, "type": "issue", "id": 2582, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Unable to load animations"}, "created_on": "2019-02-13T07:49:39.755075+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "message": {"raw": "this fixes the collada loader so models from mixamo.com can be loaded correctly. It should also fix issue #2582.\n\nList of changes:\n- `boost::split(words, line, boost::is_any_of(\"   \"))` in `BVHLoader.cc` and `ColladaLoader.cc` looks like a bug as a result of tab being replaced with spaces, replaced `boost::split(words, line, boost::is_any_of(\" \\t\"));`\n- Scale the skeleton according to the collada's meter parameter\n- Import the whole scene in a Collada file as an actor, because animations may target the scene outside the skeleton, this is required so some animations work correctly\n- Allow `Skeleton` to store data of raw node weights with multiple vertices group. The raw node weights are overwritten when loading a new submesh, while not strictly required becauses submeshes are load sequentially, it is probably more \"correct\" to have the full node weights available.\n- Map the animation to the target bone's name as opposed to the id (target bone is still chosen by the id). Since the skeleton nodes are identified by its name in the rendering process, mapping the animations to id may result in missing animations.\n- Fix loading <transparency> tag, gazebo uses 0 opaque, collada uses 1 opaque. Note that is is separate from the <transparent> tag where the color is defined in the `opaque` attribute.\n- Separate the positions and normals from the texture mapping buffers. When doing software skinning OGRE requires the positions and normal to be in their own buffers, see `https://ogrecave.github.io/ogre/api/1.11/_animation.html` under `Vertex buffer arrangements`.\n\n\u2192 <<cset 10f50fbe857e>>", "markup": "markdown", "html": "<p>this fixes the collada loader so models from mixamo.com can be loaded correctly. It should also fix issue <a href=\"#!/osrf/gazebo/issues/2582/unable-to-load-animations\" rel=\"nofollow\" title=\"Unable to load animations\" class=\"ap-connect-link\"><s>#2582</s></a>.</p>\n<p>List of changes:\n- <code>boost::split(words, line, boost::is_any_of(\"   \"))</code> in <code>BVHLoader.cc</code> and <code>ColladaLoader.cc</code> looks like a bug as a result of tab being replaced with spaces, replaced <code>boost::split(words, line, boost::is_any_of(\" \\t\"));</code>\n- Scale the skeleton according to the collada's meter parameter\n- Import the whole scene in a Collada file as an actor, because animations may target the scene outside the skeleton, this is required so some animations work correctly\n- Allow <code>Skeleton</code> to store data of raw node weights with multiple vertices group. The raw node weights are overwritten when loading a new submesh, while not strictly required becauses submeshes are load sequentially, it is probably more \"correct\" to have the full node weights available.\n- Map the animation to the target bone's name as opposed to the id (target bone is still chosen by the id). Since the skeleton nodes are identified by its name in the rendering process, mapping the animations to id may result in missing animations.\n- Fix loading &lt;transparency&gt; tag, gazebo uses 0 opaque, collada uses 1 opaque. Note that is is separate from the &lt;transparent&gt; tag where the color is defined in the <code>opaque</code> attribute.\n- Separate the positions and normals from the texture mapping buffers. When doing software skinning OGRE requires the positions and normal to be in their own buffers, see <code>https://ogrecave.github.io/ogre/api/1.11/_animation.html</code> under <code>Vertex buffer arrangements</code>.</p>\n<p>\u2192 &lt;&lt;cset <a href=\"#!/osrf/gazebo/commits/10f50fbe857e\" rel=\"nofollow\" class=\"ap-connect-link\">10f50fbe857e</a>&gt;&gt;</p>", "type": "rendered"}, "type": "issue_change", "id": 50574001}