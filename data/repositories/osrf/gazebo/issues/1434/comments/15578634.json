{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1434/comments/15578634.json"}, "html": {"href": "#!/osrf/gazebo/issues/1434#comment-15578634"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1434.json"}}, "type": "issue", "id": 1434, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "GUI Plugins accessing GuiIface, gui::Events disables gui functions"}, "content": {"raw": "In attempting to make a failing test for this issue, I accidentally made a succeeding test.\n\nIn branch [issue_1434](#!/osrf/gazebo/branch/issue_1434), there are two plugins identical but for two things: their names, `Issue1434Plugin` and `Issue1434PluginExample`, and their build process. `Issue1434Plugin` is in `test/plugins` and gets built/installed with the rest of the test suite, and `Issue1434PluginExample` is in `examples/plugins/1434_gui_plugin` and has a standalone CMake build.  (I used the CMakeLists for GUIExampleSpawnWidget as a template for the example plugin.)\n\nTo see the source differences between these plugins:\n```\ndiff test/plugins/Issue1434Plugin.cc examples/plugins/1434_gui_plugin_example/Issue1434PluginExample.cc\ndiff test/plugins/Issue1434Plugin.hh examples/plugins/1434_gui_plugin_example/Issue1434PluginExample.hh\n```\n\nTo build the plugins:\n\n```\ncd examples/plugins/1434_gui_plugin_example\nmkdir build\ncd build\ncmake .. && make -j8\ngazebo --verbose ../issue1434.world\n```\nYou should see a gui overlay with the words \"I am a test widget (example)\". Try clicking on the top toolbar icons. For me, this world reproduces the bug and I am not able to place simple shapes or enter different interaction modes.\n\nIf you built Gazebo with tests, the other plugin will already be built. I'm not sure how to just build the test plugins (@scpeters, @\\_jrivero\\_, how do I build test?)\n\n```\ncd build/test/plugins\ngazebo <gazebo source dir>/test/worlds/issue1434.world\n```\nYou should see a gui overlay with the words \"I am a test widget\". You should also be able to place simple shapes, enter translate/scale/rotate mode, etc. In other words, the plugin built in the test library that is otherwise identical does not reproduce the bug.\n\nThere's also a regression test for Issue1434Plugin, `1434_gui_plugin`, that is failing to fail in this branch.\n\nAnyone who knows more about Cmake or GUI Plugins (@nkoenig, @ichen), feel free to toss out ideas here.", "markup": "markdown", "html": "<p>In attempting to make a failing test for this issue, I accidentally made a succeeding test.</p>\n<p>In branch <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/branch/issue_1434\" rel=\"nofollow\">issue_1434</a>, there are two plugins identical but for two things: their names, <code>Issue1434Plugin</code> and <code>Issue1434PluginExample</code>, and their build process. <code>Issue1434Plugin</code> is in <code>test/plugins</code> and gets built/installed with the rest of the test suite, and <code>Issue1434PluginExample</code> is in <code>examples/plugins/1434_gui_plugin</code> and has a standalone CMake build.  (I used the CMakeLists for GUIExampleSpawnWidget as a template for the example plugin.)</p>\n<p>To see the source differences between these plugins:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff test/plugins/Issue1434Plugin.cc examples/plugins/1434_gui_plugin_example/Issue1434PluginExample.cc</span>\n<span class=\"gh\">diff test/plugins/Issue1434Plugin.hh examples/plugins/1434_gui_plugin_example/Issue1434PluginExample.hh</span>\n</pre></div>\n\n\n<p>To build the plugins:</p>\n<div class=\"codehilite\"><pre><span></span>cd examples/plugins/1434_gui_plugin_example\nmkdir build\ncd build\ncmake .. &amp;&amp; make -j8\ngazebo --verbose ../issue1434.world\n</pre></div>\n\n\n<p>You should see a gui overlay with the words \"I am a test widget (example)\". Try clicking on the top toolbar icons. For me, this world reproduces the bug and I am not able to place simple shapes or enter different interaction modes.</p>\n<p>If you built Gazebo with tests, the other plugin will already be built. I'm not sure how to just build the test plugins (@scpeters, @_jrivero_, how do I build test?)</p>\n<div class=\"codehilite\"><pre><span></span>cd build/test/plugins\ngazebo &lt;gazebo source dir&gt;/test/worlds/issue1434.world\n</pre></div>\n\n\n<p>You should see a gui overlay with the words \"I am a test widget\". You should also be able to place simple shapes, enter translate/scale/rotate mode, etc. In other words, the plugin built in the test library that is otherwise identical does not reproduce the bug.</p>\n<p>There's also a regression test for Issue1434Plugin, <code>1434_gui_plugin</code>, that is failing to fail in this branch.</p>\n<p>Anyone who knows more about Cmake or GUI Plugins (@nkoenig, @ichen), feel free to toss out ideas here.</p>", "type": "rendered"}, "created_on": "2015-02-09T18:58:24.522868+00:00", "user": {"display_name": "Jackie K", "uuid": "{e3d60b62-b7c7-4863-b9b9-cdae9f123cec}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be3d60b62-b7c7-4863-b9b9-cdae9f123cec%7D"}, "html": {"href": "https://bitbucket.org/%7Be3d60b62-b7c7-4863-b9b9-cdae9f123cec%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/ea011fa2919d4bd4568b32b440eda779d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJK-0.png"}}, "nickname": "jacquelinekay", "type": "user", "account_id": "557058:f56c822f-f75c-4665-80f9-6e7764893b9c"}, "updated_on": null, "type": "issue_comment", "id": 15578634}