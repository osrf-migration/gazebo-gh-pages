{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1071/comments/8819636.json"}, "html": {"href": "#!/osrf/gazebo/issues/1071#comment-8819636"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1071.json"}}, "type": "issue", "id": 1071, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Gazebo plugin doesn't build on OS X Mavericks"}, "content": {"raw": "@\\_jrivero_ has been running into some protobuf issues recently.\n\nI'm going to ask for a few things to help with debugging:\n\n* verbose make log, this should show the compiler and linker commands\n~~~\nmake VERBOSE=1\n~~~\n\n* list of protobuf libraries in /usr/local/lib\n~~~\n$ ls -l /usr/local/lib/libproto*\nlrwxr-xr-x  1 scpeters  admin  51 Jul  9  2013 /usr/local/lib/libprotobuf-c.0.dylib -> ../Cellar/protobuf-c/0.15/lib/libprotobuf-c.0.dylib\nlrwxr-xr-x  1 scpeters  admin  45 Jul  9  2013 /usr/local/lib/libprotobuf-c.a -> ../Cellar/protobuf-c/0.15/lib/libprotobuf-c.a\nlrwxr-xr-x  1 scpeters  admin  49 Jul  9  2013 /usr/local/lib/libprotobuf-c.dylib -> ../Cellar/protobuf-c/0.15/lib/libprotobuf-c.dylib\nlrwxr-xr-x  1 scpeters  admin  53 Jul  9  2013 /usr/local/lib/libprotobuf-lite.8.dylib -> ../Cellar/protobuf/2.5.0/lib/libprotobuf-lite.8.dylib\nlrwxr-xr-x  1 scpeters  admin  47 Jul  9  2013 /usr/local/lib/libprotobuf-lite.a -> ../Cellar/protobuf/2.5.0/lib/libprotobuf-lite.a\nlrwxr-xr-x  1 scpeters  admin  51 Jul  9  2013 /usr/local/lib/libprotobuf-lite.dylib -> ../Cellar/protobuf/2.5.0/lib/libprotobuf-lite.dylib\nlrwxr-xr-x  1 scpeters  admin  48 Jul  9  2013 /usr/local/lib/libprotobuf.8.dylib -> ../Cellar/protobuf/2.5.0/lib/libprotobuf.8.dylib\nlrwxr-xr-x  1 scpeters  admin  42 Jul  9  2013 /usr/local/lib/libprotobuf.a -> ../Cellar/protobuf/2.5.0/lib/libprotobuf.a\nlrwxr-xr-x  1 scpeters  admin  46 Jul  9  2013 /usr/local/lib/libprotobuf.dylib -> ../Cellar/protobuf/2.5.0/lib/libprotobuf.dylib\nlrwxr-xr-x  1 scpeters  admin  46 Jul  9  2013 /usr/local/lib/libprotoc.8.dylib -> ../Cellar/protobuf/2.5.0/lib/libprotoc.8.dylib\nlrwxr-xr-x  1 scpeters  admin  40 Jul  9  2013 /usr/local/lib/libprotoc.a -> ../Cellar/protobuf/2.5.0/lib/libprotoc.a\nlrwxr-xr-x  1 scpeters  admin  44 Jul  9  2013 /usr/local/lib/libprotoc.dylib -> ../Cellar/protobuf/2.5.0/lib/libprotoc.dylib\n~~~\n\n* Check file info for libprotobuf-lite.dylib\n~~~\n$ file /usr/local/lib/libprotobuf-lite.dylib \n/usr/local/lib/libprotobuf-lite.dylib: Mach-O 64-bit dynamically linked shared library x86_64\n~~~\n\n* Check which c++ library is linked with libprotobuf-lite.dylib\n~~~\n$ otool -L /usr/local/lib/libprotobuf-lite.dylib | grep c++\n\t/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 56.0.0)\n~~~\n\n* Search for missing symbol in libprotobuf-lite.dylib\n~~~\n$ nm /usr/local/lib/libprotobuf-lite.dylib  | grep ParseFromString\n000000000000a17a T __ZN6google8protobuf11MessageLite15ParseFromStringERKSs\n~~~", "markup": "markdown", "html": "<p>@_jrivero_ has been running into some protobuf issues recently.</p>\n<p>I'm going to ask for a few things to help with debugging:</p>\n<ul>\n<li>verbose make log, this should show the compiler and linker commands</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>make VERBOSE=1\n</pre></div>\n\n\n<ul>\n<li>list of protobuf libraries in /usr/local/lib</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>$ ls -l /usr/local/lib/libproto*\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">51</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotobuf-c.0.dylib -&gt; ../Cellar/protobuf-c/0.15/lib/libprotobuf-c.0.dylib\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">45</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotobuf-c.a -&gt; ../Cellar/protobuf-c/0.15/lib/libprotobuf-c.a\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">49</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotobuf-c.dylib -&gt; ../Cellar/protobuf-c/0.15/lib/libprotobuf-c.dylib\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">53</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotobuf-lite.8.dylib -&gt; ../Cellar/protobuf/2.5.0/lib/libprotobuf-lite.8.dylib\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">47</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotobuf-lite.a -&gt; ../Cellar/protobuf/2.5.0/lib/libprotobuf-lite.a\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">51</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotobuf-lite.dylib -&gt; ../Cellar/protobuf/2.5.0/lib/libprotobuf-lite.dylib\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">48</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotobuf.8.dylib -&gt; ../Cellar/protobuf/2.5.0/lib/libprotobuf.8.dylib\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">42</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotobuf.a -&gt; ../Cellar/protobuf/2.5.0/lib/libprotobuf.a\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">46</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotobuf.dylib -&gt; ../Cellar/protobuf/2.5.0/lib/libprotobuf.dylib\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">46</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotoc.8.dylib -&gt; ../Cellar/protobuf/2.5.0/lib/libprotoc.8.dylib\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">40</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotoc.a -&gt; ../Cellar/protobuf/2.5.0/lib/libprotoc.a\nlrwxr-xr-x  <span class=\"m\">1</span> scpeters  admin  <span class=\"m\">44</span> Jul  <span class=\"m\">9</span>  <span class=\"m\">2013</span> /usr/local/lib/libprotoc.dylib -&gt; ../Cellar/protobuf/2.5.0/lib/libprotoc.dylib\n</pre></div>\n\n\n<ul>\n<li>Check file info for libprotobuf-lite.dylib</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>$ file /usr/local/lib/libprotobuf-lite.dylib \n/usr/local/lib/libprotobuf-lite.dylib: Mach-O <span class=\"m\">64</span>-bit dynamically linked shared library x86_64\n</pre></div>\n\n\n<ul>\n<li>Check which c++ library is linked with libprotobuf-lite.dylib</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>$ otool -L /usr/local/lib/libprotobuf-lite.dylib <span class=\"p\">|</span> grep c++\n    /usr/lib/libstdc++.6.dylib <span class=\"o\">(</span>compatibility version <span class=\"m\">7</span>.0.0, current version <span class=\"m\">56</span>.0.0<span class=\"o\">)</span>\n</pre></div>\n\n\n<ul>\n<li>Search for missing symbol in libprotobuf-lite.dylib</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>$ nm /usr/local/lib/libprotobuf-lite.dylib  <span class=\"p\">|</span> grep ParseFromString\n000000000000a17a T __ZN6google8protobuf11MessageLite15ParseFromStringERKSs\n</pre></div>", "type": "rendered"}, "created_on": "2014-02-28T06:59:05.425635+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 8819636}