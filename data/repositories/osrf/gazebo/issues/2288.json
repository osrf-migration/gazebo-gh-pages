{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2288/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2288.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2288/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2288/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2288/client-relies-on-factory-light-to-know"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2288/vote"}}, "reporter": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "title": "Client relies on ~/factory/light to know about light insertions", "component": {"name": "gui", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122878.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "This has a few consequences:\r\n\r\n## Spawning light through ~/factory doesn't update client\r\n\r\nThere are two ways to insert a light, either passing the light's SDF string to the `~/factory` topic, or sending a light message to the `~/factory/light` topic.\r\n\r\nThe problem is that when using the `~/factory` topic, the scene message in the world is updated, and a `physics::Light` is created in the server, but the client never knows about it.\r\n\r\nOn the other hand, the client reacts to lights spawned through `~/factory/light`, because the `MainWindow` is directly [subscribing](#!/osrf/gazebo/src/42215f2019f5ae64fc8a0610ef804a0fc53b0740/gazebo/gui/MainWindow.cc?fileviewer=file-view-default#MainWindow.cc-358) to that topic.\r\n\r\n## Loading a light on the server doesn't affect the client\r\n\r\nWhen inserting a light by other means than that topic, for example, calling `LoadLight` during log playback, the server gets updated, but the client never knows about the light.\r\n\r\n## Proposed solution\r\n\r\nI think one solution would be to separate the topic which \"requests\" a light insertion, from the topic which \"notifies\" that a light has been inserted. Right now, `~/factory/light` is being used for both functions.", "markup": "markdown", "html": "<p>This has a few consequences:</p>\n<h2 id=\"markdown-header-spawning-light-through-factory-doesnt-update-client\">Spawning light through ~/factory doesn't update client</h2>\n<p>There are two ways to insert a light, either passing the light's SDF string to the <code>~/factory</code> topic, or sending a light message to the <code>~/factory/light</code> topic.</p>\n<p>The problem is that when using the <code>~/factory</code> topic, the scene message in the world is updated, and a <code>physics::Light</code> is created in the server, but the client never knows about it.</p>\n<p>On the other hand, the client reacts to lights spawned through <code>~/factory/light</code>, because the <code>MainWindow</code> is directly <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/42215f2019f5ae64fc8a0610ef804a0fc53b0740/gazebo/gui/MainWindow.cc?fileviewer=file-view-default#MainWindow.cc-358\" rel=\"nofollow\">subscribing</a> to that topic.</p>\n<h2 id=\"markdown-header-loading-a-light-on-the-server-doesnt-affect-the-client\">Loading a light on the server doesn't affect the client</h2>\n<p>When inserting a light by other means than that topic, for example, calling <code>LoadLight</code> during log playback, the server gets updated, but the client never knows about the light.</p>\n<h2 id=\"markdown-header-proposed-solution\">Proposed solution</h2>\n<p>I think one solution would be to separate the topic which \"requests\" a light insertion, from the topic which \"notifies\" that a light has been inserted. Right now, <code>~/factory/light</code> is being used for both functions.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2017-05-30T23:22:06.977097+00:00", "milestone": null, "updated_on": "2018-02-06T21:01:53.834942+00:00", "type": "issue", "id": 2288}