{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/583/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/583.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/583/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/583/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/583/time-divide-by-zero-warning-in"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/583/vote"}}, "reporter": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "title": "\"Time divide by zero\" warning in DiagnosticManager::Update after reset world", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Sometimes the DiagnosticManager::Update function at gazebo/util/Diagnostics.cc:84 throws Time.cc:420 \"Time divide by zero\" warnings after reset world. This is particularly evident by looking at the raw console output of Sensor_TEST.\r\n\r\nPaste from [jenkins build](http://build.osrfoundation.org/job/gazebo-default-devel-precise-amd64/245/console)\r\n~~~\r\n65: \u001b[1;36mDbg\u001b[0m counted 47 hokuyo messages\r\n65: \u001b[1;31mError [Time.cc:420]\u001b[0m Time divide by zero\r\n65: \u001b[1;36mDbg\u001b[0m counted 47 hokuyo messages\r\n65: \u001b[1;31mError [Time.cc:420]\u001b[0m Time divide by zero\r\n65: \u001b[1;36mDbg\u001b[0m counted 47 hokuyo messages\r\n65: \u001b[1;31mError [Time.cc:420]\u001b[0m Time divide by zero\r\n65: [       OK ] Sensor_TEST.ResetWorldStressTest (8769 ms)\r\n65: [----------] 2 tests from Sensor_TEST (31969 ms total)\r\n65: \r\n65: [----------] Global test environment tear-down\r\n65: [==========] 2 tests from 1 test case ran. (31969 ms total)\r\n~~~\r\n\r\nI set a breakpoint at Time.cc:420 and got the following backtrace pointing to gazebo/util/Diagnostics.cc:84:\r\n~~~\r\nBreakpoint 2, gazebo::common::Time::operator/ (this=0x7fffd443afd0, _time=...) at /home/ubuntu/osrf/gazebo/gazebo/common/Time.cc:420\r\n420\t    gzerr << \"Time divide by zero\\n\";\r\n#0  gazebo::common::Time::operator/ (this=0x7fffd443afd0, _time=...) at /home/ubuntu/osrf/gazebo/gazebo/common/Time.cc:420\r\n#1  0x00007ffff3b754ba in gazebo::util::DiagnosticManager::Update (this=0x7ffff78c3e00, _info=...) at /home/ubuntu/osrf/gazebo/gazebo/util/Diagnostics.cc:84\r\n#2  0x00007ffff766dcee in operator() (this=<optimized out>, a0=...) at /usr/include/boost/function/function_template.hpp:1013\r\n#3  Signal<gazebo::common::UpdateInfo> (_p=..., this=<optimized out>) at /home/ubuntu/osrf/gazebo/gazebo/common/Event.hh:264\r\n#4  operator()<gazebo::common::UpdateInfo> (_p=..., this=<optimized out>) at /home/ubuntu/osrf/gazebo/gazebo/common/Event.hh:134\r\n#5  gazebo::physics::World::Update (this=0x7fffd443a920) at /home/ubuntu/osrf/gazebo/gazebo/physics/World.cc:551\r\n#6  0x00007ffff766e621 in gazebo::physics::World::Step (this=0x7fffd443a920) at /home/ubuntu/osrf/gazebo/gazebo/physics/World.cc:489\r\n#7  0x00007ffff766f548 in gazebo::physics::World::RunLoop (this=0x7fffd443a920) at /home/ubuntu/osrf/gazebo/gazebo/physics/World.cc:353\r\n#8  0x00007ffff606bce9 in thread_proxy () from /usr/lib/libboost_thread.so.1.46.1\r\n#9  0x00007ffff656ee9a in start_thread (arg=0x7fffa0d65700) at pthread_create.c:308\r\n#10 0x00007ffff5679cbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\r\n#11 0x0000000000000000 in ?? ()\r\n~~~", "markup": "markdown", "html": "<p>Sometimes the DiagnosticManager::Update function at gazebo/util/Diagnostics.cc:84 throws Time.cc:420 \"Time divide by zero\" warnings after reset world. This is particularly evident by looking at the raw console output of Sensor_TEST.</p>\n<p>Paste from <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-default-devel-precise-amd64/245/console\" rel=\"nofollow\">jenkins build</a></p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">65</span><span class=\"o\">:</span> <span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mDbg</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span> <span class=\"nx\">counted</span> <span class=\"mi\">47</span> <span class=\"nx\">hokuyo</span> <span class=\"nx\">messages</span>\n<span class=\"mi\">65</span><span class=\"p\">:</span> <span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">31</span><span class=\"nx\">mError</span> <span class=\"err\">[</span><span class=\"nx\">Time.cc</span><span class=\"p\">:</span><span class=\"mi\">420</span><span class=\"cp\">]</span><span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span> <span class=\"nx\">Time</span> <span class=\"nx\">divide</span> <span class=\"k\">by</span> <span class=\"nx\">zero</span>\n<span class=\"mi\">65</span><span class=\"p\">:</span> <span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mDbg</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span> <span class=\"nx\">counted</span> <span class=\"mi\">47</span> <span class=\"nx\">hokuyo</span> <span class=\"nx\">messages</span>\n<span class=\"mi\">65</span><span class=\"p\">:</span> <span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">31</span><span class=\"nx\">mError</span> <span class=\"err\">[</span><span class=\"nx\">Time.cc</span><span class=\"p\">:</span><span class=\"mi\">420</span><span class=\"cp\">]</span><span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span> <span class=\"nx\">Time</span> <span class=\"nx\">divide</span> <span class=\"k\">by</span> <span class=\"nx\">zero</span>\n<span class=\"mi\">65</span><span class=\"p\">:</span> <span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mDbg</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span> <span class=\"nx\">counted</span> <span class=\"mi\">47</span> <span class=\"nx\">hokuyo</span> <span class=\"nx\">messages</span>\n<span class=\"mi\">65</span><span class=\"p\">:</span> <span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">31</span><span class=\"nx\">mError</span> <span class=\"err\">[</span><span class=\"nx\">Time.cc</span><span class=\"p\">:</span><span class=\"mi\">420</span><span class=\"cp\">]</span><span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span> <span class=\"nx\">Time</span> <span class=\"nx\">divide</span> <span class=\"k\">by</span> <span class=\"nx\">zero</span>\n<span class=\"mi\">65</span><span class=\"p\">:</span> <span class=\"err\">[</span>       <span class=\"nx\">OK</span> <span class=\"cp\">]</span> <span class=\"nt\">Sensor_TEST</span><span class=\"p\">.</span><span class=\"nc\">ResetWorldStressTest</span> <span class=\"o\">(</span><span class=\"nt\">8769</span> <span class=\"nt\">ms</span><span class=\"o\">)</span>\n<span class=\"nt\">65</span><span class=\"o\">:</span> <span class=\"cp\">[</span><span class=\"o\">----------</span><span class=\"cp\">]</span> <span class=\"nt\">2</span> <span class=\"nt\">tests</span> <span class=\"nt\">from</span> <span class=\"nt\">Sensor_TEST</span> <span class=\"o\">(</span><span class=\"nt\">31969</span> <span class=\"nt\">ms</span> <span class=\"nt\">total</span><span class=\"o\">)</span>\n<span class=\"nt\">65</span><span class=\"o\">:</span> \n<span class=\"nt\">65</span><span class=\"o\">:</span> <span class=\"cp\">[</span><span class=\"o\">----------</span><span class=\"cp\">]</span> <span class=\"nt\">Global</span> <span class=\"nt\">test</span> <span class=\"nt\">environment</span> <span class=\"nt\">tear-down</span>\n<span class=\"nt\">65</span><span class=\"o\">:</span> <span class=\"cp\">[</span><span class=\"o\">==========</span><span class=\"cp\">]</span> <span class=\"nt\">2</span> <span class=\"nt\">tests</span> <span class=\"nt\">from</span> <span class=\"nt\">1</span> <span class=\"nt\">test</span> <span class=\"nt\">case</span> <span class=\"nt\">ran</span><span class=\"o\">.</span> <span class=\"o\">(</span><span class=\"nt\">31969</span> <span class=\"nt\">ms</span> <span class=\"nt\">total</span><span class=\"o\">)</span>\n</pre></div>\n\n\n<p>I set a breakpoint at Time.cc:420 and got the following backtrace pointing to gazebo/util/Diagnostics.cc:84:</p>\n<div class=\"codehilite\"><pre><span></span>Breakpoint 2, gazebo::common::Time::operator/ (this=0x7fffd443afd0, _time=...) at /home/ubuntu/osrf/gazebo/gazebo/common/Time.cc:420\n420     gzerr &lt;&lt; &quot;Time divide by zero\\n&quot;;\n#0  gazebo::common::Time::operator/ (this=0x7fffd443afd0, _time=...) at /home/ubuntu/osrf/gazebo/gazebo/common/Time.cc:420\n#1  0x00007ffff3b754ba in gazebo::util::DiagnosticManager::Update (this=0x7ffff78c3e00, _info=...) at /home/ubuntu/osrf/gazebo/gazebo/util/Diagnostics.cc:84\n#2  0x00007ffff766dcee in operator() (this=&lt;optimized out&gt;, a0=...) at /usr/include/boost/function/function_template.hpp:1013\n#3  Signal&lt;gazebo::common::UpdateInfo&gt; (_p=..., this=&lt;optimized out&gt;) at /home/ubuntu/osrf/gazebo/gazebo/common/Event.hh:264\n#4  operator()&lt;gazebo::common::UpdateInfo&gt; (_p=..., this=&lt;optimized out&gt;) at /home/ubuntu/osrf/gazebo/gazebo/common/Event.hh:134\n#5  gazebo::physics::World::Update (this=0x7fffd443a920) at /home/ubuntu/osrf/gazebo/gazebo/physics/World.cc:551\n#6  0x00007ffff766e621 in gazebo::physics::World::Step (this=0x7fffd443a920) at /home/ubuntu/osrf/gazebo/gazebo/physics/World.cc:489\n#7  0x00007ffff766f548 in gazebo::physics::World::RunLoop (this=0x7fffd443a920) at /home/ubuntu/osrf/gazebo/gazebo/physics/World.cc:353\n#8  0x00007ffff606bce9 in thread_proxy () from /usr/lib/libboost_thread.so.1.46.1\n#9  0x00007ffff656ee9a in start_thread (arg=0x7fffa0d65700) at pthread_create.c:308\n#10 0x00007ffff5679cbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\n#11 0x0000000000000000 in ?? ()\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-03-14T18:01:03.533391+00:00", "milestone": null, "updated_on": "2016-09-14T19:43:51.137061+00:00", "type": "issue", "id": 583}