{"priority": "blocker", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/719/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/719.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/719/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/719/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/719/big-memory-leak-in-gzserver"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/719/vote"}}, "reporter": {"display_name": "GoRobotGo", "uuid": "{2fd8dac8-286d-461a-b7dd-dba99deea025}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2fd8dac8-286d-461a-b7dd-dba99deea025%7D"}, "html": {"href": "https://bitbucket.org/%7B2fd8dac8-286d-461a-b7dd-dba99deea025%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/6431739b101c18640b5a84d359fdd274d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsG-4.png"}}, "nickname": "GoRobotGo", "type": "user", "account_id": "557058:44b40072-c04b-41ae-ad09-376db9ebffa1"}, "title": "Big Memory Leak in gzserver", "component": null, "votes": 0, "watches": 5, "content": {"raw": "I have been seeing quite a bit of crashing of gazebo.  I started watching the process using top and saw that gzserver was continously growing in memory size.  This is with the current released version (1.8.2-1 / 2.6.3-1).  It doesn't show up until our software starts running, but continues even if our software is stopped.  Memory growth is about 0.3% per second for task 2.  Task 1 & task 3 don't show the same growth, so maybe it is a drcsim bug.\r\n\r\nI just spent a some time isolating it.  It is also related to the ladar.  Running the laser_scan_assembler service and a client of that service is what triggers the growth.  Growth does continue after they are stopped.\r\n\r\nI have attached a simple compiled client.  And here is the launch file for the service:\r\n\r\n```\r\n#!c++\r\n\r\n<launch>\r\n  <node type=\"laser_scan_assembler\" pkg=\"laser_assembler\"\r\n        name=\"my_assembler\">\r\n    <remap from=\"scan\" to=\"/multisense_sl/laser/scan\"/>\r\n    <param name=\"max_scans\" type=\"int\" value=\"60\" />\r\n    <param name=\"fixed_frame\" type=\"string\" value=\"/pelvis\" />\r\n    <param name=\"ignore_laser_skew\" type=\"bool\" value=\"false\"/>\r\n  </node>\r\n</launch>\r\n```\r\n", "markup": "markdown", "html": "<p>I have been seeing quite a bit of crashing of gazebo.  I started watching the process using top and saw that gzserver was continously growing in memory size.  This is with the current released version (1.8.2-1 / 2.6.3-1).  It doesn't show up until our software starts running, but continues even if our software is stopped.  Memory growth is about 0.3% per second for task 2.  Task 1 &amp; task 3 don't show the same growth, so maybe it is a drcsim bug.</p>\n<p>I just spent a some time isolating it.  It is also related to the ladar.  Running the laser_scan_assembler service and a client of that service is what triggers the growth.  Growth does continue after they are stopped.</p>\n<p>I have attached a simple compiled client.  And here is the launch file for the service:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"o\">&lt;</span><span class=\"n\">launch</span><span class=\"o\">&gt;</span>\n  <span class=\"o\">&lt;</span><span class=\"n\">node</span> <span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;laser_scan_assembler&quot;</span> <span class=\"n\">pkg</span><span class=\"o\">=</span><span class=\"s\">&quot;laser_assembler&quot;</span>\n        <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;my_assembler&quot;</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">remap</span> <span class=\"n\">from</span><span class=\"o\">=</span><span class=\"s\">&quot;scan&quot;</span> <span class=\"n\">to</span><span class=\"o\">=</span><span class=\"s\">&quot;/multisense_sl/laser/scan&quot;</span><span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">param</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;max_scans&quot;</span> <span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;int&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;60&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">param</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;fixed_frame&quot;</span> <span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;string&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;/pelvis&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">param</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;ignore_laser_skew&quot;</span> <span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;bool&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;false&quot;</span><span class=\"o\">/&gt;</span>\n  <span class=\"o\">&lt;/</span><span class=\"n\">node</span><span class=\"o\">&gt;</span>\n<span class=\"o\">&lt;/</span><span class=\"n\">launch</span><span class=\"o\">&gt;</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-06-04T04:26:07.342686+00:00", "milestone": null, "updated_on": "2016-09-14T19:43:32.325390+00:00", "type": "issue", "id": 719}