{"priority": "trivial", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1201/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1201.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1201/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1201/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1201/setworldpose-timing-with-physics-update"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1201/vote"}}, "reporter": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "title": "SetWorldPose timing with physics update", "component": {"name": "physics", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122876.json"}}}, "votes": 1, "watches": 2, "content": {"raw": "Here is the problem case:\r\n\r\n1. Run a world in one thread.\r\n1. In another thread, set the world pose of a model.\r\n1. In the same thread, get the pose of a child link.\r\n\r\nOccasionally, the returned pose of the child link will be incorrect. \r\n\r\nI believe is happening when the physics engine updates the pose of the link right after the other thread sets the pose of the model.\r\n\r\nSee these [pull request comments](#!/osrf/gazebo/pull-request/1049/fix-collision-getworldpose-1124/activity#comment-1893920) for an example.\r\n\r\nTo replicate the error. Modify the first test in `tests/regression/1124_collision_pose.cc`. Make the world run unpaused, remove the `world-step` function calls, and run the test about 1000 times. ", "markup": "markdown", "html": "<p>Here is the problem case:</p>\n<ol>\n<li>Run a world in one thread.</li>\n<li>In another thread, set the world pose of a model.</li>\n<li>In the same thread, get the pose of a child link.</li>\n</ol>\n<p>Occasionally, the returned pose of the child link will be incorrect. </p>\n<p>I believe is happening when the physics engine updates the pose of the link right after the other thread sets the pose of the model.</p>\n<p>See these <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/pull-request/1049/fix-collision-getworldpose-1124/activity#comment-1893920\" rel=\"nofollow\">pull request comments</a> for an example.</p>\n<p>To replicate the error. Modify the first test in <code>tests/regression/1124_collision_pose.cc</code>. Make the world run unpaused, remove the <code>world-step</code> function calls, and run the test about 1000 times. </p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2014-05-29T20:11:13.315164+00:00", "milestone": null, "updated_on": "2016-09-14T19:24:55.461402+00:00", "type": "issue", "id": 1201}