{"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1284/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1284.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1284/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1284/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1284/strange-pthread-error-when-building"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1284/vote"}}, "reporter": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "title": "strange pthread error when building gazebo_ros_pkgs hydro precise against gazebo_4.0 branch", "component": {"name": "build", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/132954.json"}}}, "votes": 0, "watches": 3, "content": {"raw": "see attached `build.log` for complete build log.  Below is the failed compilation step:\r\n\r\n~~~\r\n/usr/bin/c++  -fPIC -O3 -DNDEBUG  -Wl,-rpath,/usr/local/lib/gazebo-4.0/plugins pthread -L/usr/local/lib -L/usr/local/lib/gazebo-4.0/plugins -lgazebo_transport -lgazebo_physics -lgazebo_sensors -lgazebo_rendering -lgazebo_gui -lgazebo_msgs -lgazebo_math -lgazebo_common -lgazebo -lboost_thread-mt -lboost_signals-mt -lboost_system-mt -lboost_filesystem-mt -lboost_program_options-mt -lboost_regex-mt -lboost_iostreams-mt -lboost_date_time-mt -Wl,-rpath,/usr/local/lib/gazebo-4.0/plugins -L/usr/local/lib -L/usr/local/lib/gazebo-4.0/plugins   -shared -Wl,-soname,libgazebo_ros_paths_plugin.so -o /tmp/ws/devel/lib/libgazebo_ros_paths_plugin.so CMakeFiles/gazebo_ros_paths_plugin.dir/src/gazebo_ros_paths_plugin.cpp.o -lgazebo_transport -lgazebo_physics -lgazebo_sensors -lgazebo_rendering -lgazebo_gui -lgazebo_msgs -lgazebo_math -lgazebo_common -lgazebo -lboost_thread-mt -lboost_signals-mt -lboost_system-mt -lboost_filesystem-mt -lboost_program_options-mt -lboost_regex-mt -lboost_iostreams-mt -lboost_date_time-mt /usr/local/lib/libgazebo.so /usr/local/lib/libgazebo_common.so /usr/local/lib/libgazebo_gimpact.so /usr/local/lib/libgazebo_gui.so /usr/local/lib/libgazebo_gui_building.so /usr/local/lib/libgazebo_gui_viewers.so /usr/local/lib/libgazebo_math.so /usr/local/lib/libgazebo_msgs.so /usr/local/lib/libgazebo_ode.so /usr/local/lib/libgazebo_opcode.so /usr/local/lib/libgazebo_opende_ou.so /usr/local/lib/libgazebo_physics.so /usr/local/lib/libgazebo_physics_ode.so /usr/local/lib/libgazebo_rendering.so /usr/local/lib/libgazebo_selection_buffer.so /usr/local/lib/libgazebo_sensors.so /usr/local/lib/libgazebo_skyx.so /usr/local/lib/libgazebo_transport.so /usr/local/lib/libgazebo_util.so /usr/local/lib/libgazebo_ccd.so -lprotobuf -lsdformat -lsdformat /opt/ros/hydro/lib/libroslib.so /opt/ros/hydro/lib/libtf.so /opt/ros/hydro/lib/libtf2_ros.so /opt/ros/hydro/lib/libactionlib.so /opt/ros/hydro/lib/libmessage_filters.so /opt/ros/hydro/lib/libroscpp.so -lboost_signals-mt -lboost_filesystem-mt /opt/ros/hydro/lib/libxmlrpcpp.so /opt/ros/hydro/lib/libtf2.so /opt/ros/hydro/lib/librosconsole.so /opt/ros/hydro/lib/librosconsole_log4cxx.so /opt/ros/hydro/lib/librosconsole_backend_interface.so -llog4cxx -lboost_regex-mt /opt/ros/hydro/lib/libdynamic_reconfigure_config_init_mutex.so /opt/ros/hydro/lib/libroscpp_serialization.so /opt/ros/hydro/lib/librostime.so -lboost_date_time-mt -lboost_system-mt -lboost_thread-mt -lpthread /opt/ros/hydro/lib/libcpp_common.so /opt/ros/hydro/lib/libconsole_bridge.so -lboost_thread-mt -lpthread /opt/ros/hydro/lib/libcpp_common.so /opt/ros/hydro/lib/libconsole_bridge.so -Wl,-rpath,/usr/local/lib:/opt/ros/hydro/lib:\r\nmake[2]: Leaving directory `/tmp/ws/build'\r\n/usr/bin/cmake -E cmake_progress_report /tmp/ws/build/CMakeFiles\r\n/usr/bin/cmake -E cmake_progress_report /tmp/ws/build/CMakeFiles\r\n~~~\r\n\r\nwith error:\r\n\r\n~~~\r\nc++: error: pthread: No such file or directory\r\n[ 91%] make[2]: *** [/tmp/ws/devel/lib/libgazebo_ros_paths_plugin.so] Error 1\r\nmake[2]: Leaving directory `/tmp/ws/build'\r\nmake[1]: *** [gazebo_ros_pkgs/gazebo_ros/CMakeFiles/gazebo_ros_paths_plugin.dir/all] Error 2\r\nmake[1]: *** Waiting for unfinished jobs....\r\n~~~\r\n\r\nLooking at installed `lib/pkgconfig/gazebo.pc`, there is a `pthread` by itself:\r\n~~~\r\nLibs: -Wl,-rpath,${prefix}/lib/gazebo-4.0/plugins -L${libdir} -L${prefix}/lib/gazebo-4.0/plugins -lgazebo_transport -lgazebo_physics -lgazebo_sensors -lgazebo_rendering -lgazebo_gui -lgazebo_msgs -lgazebo_math -lgazebo_common -lgazebo -L/usr/lib -lboost_thread-mt pthread -lboost_signals-mt -lboost_system-mt -lboost_filesystem-mt -lboost_program_options-mt -lboost_regex-mt -lboost_iostreams-mt -lboost_date_time-mt \r\nCFlags: -I${includedir}/gazebo-4.0 -I/usr/include\r\n~~~\r\n\r\nremoving `pthread` appears to fix compilation.", "markup": "markdown", "html": "<p>see attached <code>build.log</code> for complete build log.  Below is the failed compilation step:</p>\n<div class=\"codehilite\"><pre><span></span>/usr/bin/c++  -fPIC -O3 -DNDEBUG  -Wl,-rpath,/usr/local/lib/gazebo-4.0/plugins pthread -L/usr/local/lib -L/usr/local/lib/gazebo-4.0/plugins -lgazebo_transport -lgazebo_physics -lgazebo_sensors -lgazebo_rendering -lgazebo_gui -lgazebo_msgs -lgazebo_math -lgazebo_common -lgazebo -lboost_thread-mt -lboost_signals-mt -lboost_system-mt -lboost_filesystem-mt -lboost_program_options-mt -lboost_regex-mt -lboost_iostreams-mt -lboost_date_time-mt -Wl,-rpath,/usr/local/lib/gazebo-4.0/plugins -L/usr/local/lib -L/usr/local/lib/gazebo-4.0/plugins   -shared -Wl,-soname,libgazebo_ros_paths_plugin.so -o /tmp/ws/devel/lib/libgazebo_ros_paths_plugin.so CMakeFiles/gazebo_ros_paths_plugin.dir/src/gazebo_ros_paths_plugin.cpp.o -lgazebo_transport -lgazebo_physics -lgazebo_sensors -lgazebo_rendering -lgazebo_gui -lgazebo_msgs -lgazebo_math -lgazebo_common -lgazebo -lboost_thread-mt -lboost_signals-mt -lboost_system-mt -lboost_filesystem-mt -lboost_program_options-mt -lboost_regex-mt -lboost_iostreams-mt -lboost_date_time-mt /usr/local/lib/libgazebo.so /usr/local/lib/libgazebo_common.so /usr/local/lib/libgazebo_gimpact.so /usr/local/lib/libgazebo_gui.so /usr/local/lib/libgazebo_gui_building.so /usr/local/lib/libgazebo_gui_viewers.so /usr/local/lib/libgazebo_math.so /usr/local/lib/libgazebo_msgs.so /usr/local/lib/libgazebo_ode.so /usr/local/lib/libgazebo_opcode.so /usr/local/lib/libgazebo_opende_ou.so /usr/local/lib/libgazebo_physics.so /usr/local/lib/libgazebo_physics_ode.so /usr/local/lib/libgazebo_rendering.so /usr/local/lib/libgazebo_selection_buffer.so /usr/local/lib/libgazebo_sensors.so /usr/local/lib/libgazebo_skyx.so /usr/local/lib/libgazebo_transport.so /usr/local/lib/libgazebo_util.so /usr/local/lib/libgazebo_ccd.so -lprotobuf -lsdformat -lsdformat /opt/ros/hydro/lib/libroslib.so /opt/ros/hydro/lib/libtf.so /opt/ros/hydro/lib/libtf2_ros.so /opt/ros/hydro/lib/libactionlib.so /opt/ros/hydro/lib/libmessage_filters.so /opt/ros/hydro/lib/libroscpp.so -lboost_signals-mt -lboost_filesystem-mt /opt/ros/hydro/lib/libxmlrpcpp.so /opt/ros/hydro/lib/libtf2.so /opt/ros/hydro/lib/librosconsole.so /opt/ros/hydro/lib/librosconsole_log4cxx.so /opt/ros/hydro/lib/librosconsole_backend_interface.so -llog4cxx -lboost_regex-mt /opt/ros/hydro/lib/libdynamic_reconfigure_config_init_mutex.so /opt/ros/hydro/lib/libroscpp_serialization.so /opt/ros/hydro/lib/librostime.so -lboost_date_time-mt -lboost_system-mt -lboost_thread-mt -lpthread /opt/ros/hydro/lib/libcpp_common.so /opt/ros/hydro/lib/libconsole_bridge.so -lboost_thread-mt -lpthread /opt/ros/hydro/lib/libcpp_common.so /opt/ros/hydro/lib/libconsole_bridge.so -Wl,-rpath,/usr/local/lib:/opt/ros/hydro/lib:\nmake[2]: Leaving directory `/tmp/ws/build&#39;\n/usr/bin/cmake -E cmake_progress_report /tmp/ws/build/CMakeFiles\n/usr/bin/cmake -E cmake_progress_report /tmp/ws/build/CMakeFiles\n</pre></div>\n\n\n<p>with error:</p>\n<div class=\"codehilite\"><pre><span></span>c++: error: pthread: No such file or directory\n[ 91%] make[2]: *** [/tmp/ws/devel/lib/libgazebo_ros_paths_plugin.so] Error 1\nmake[2]: Leaving directory `/tmp/ws/build&#39;\nmake[1]: *** [gazebo_ros_pkgs/gazebo_ros/CMakeFiles/gazebo_ros_paths_plugin.dir/all] Error 2\nmake[1]: *** Waiting for unfinished jobs....\n</pre></div>\n\n\n<p>Looking at installed <code>lib/pkgconfig/gazebo.pc</code>, there is a <code>pthread</code> by itself:</p>\n<div class=\"codehilite\"><pre><span></span>Libs: -Wl,-rpath,<span class=\"cp\">${</span><span class=\"n\">prefix</span><span class=\"cp\">}</span>/lib/gazebo-4.0/plugins -L<span class=\"cp\">${</span><span class=\"n\">libdir</span><span class=\"cp\">}</span> -L<span class=\"cp\">${</span><span class=\"n\">prefix</span><span class=\"cp\">}</span>/lib/gazebo-4.0/plugins -lgazebo_transport -lgazebo_physics -lgazebo_sensors -lgazebo_rendering -lgazebo_gui -lgazebo_msgs -lgazebo_math -lgazebo_common -lgazebo -L/usr/lib -lboost_thread-mt pthread -lboost_signals-mt -lboost_system-mt -lboost_filesystem-mt -lboost_program_options-mt -lboost_regex-mt -lboost_iostreams-mt -lboost_date_time-mt \nCFlags: -I<span class=\"cp\">${</span><span class=\"n\">includedir</span><span class=\"cp\">}</span>/gazebo-4.0 -I/usr/include\n</pre></div>\n\n\n<p>removing <code>pthread</code> appears to fix compilation.</p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2014-09-19T21:48:27.456780+00:00", "milestone": null, "updated_on": "2016-09-14T19:44:29.017716+00:00", "type": "issue", "id": 1284}