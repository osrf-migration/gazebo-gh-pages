{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1262/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1262.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1262/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1262/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1262/gzclient-crashes-on-shutdown"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1262/vote"}}, "reporter": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "title": "gzclient crashes on shutdown", "component": null, "votes": 0, "watches": 4, "content": {"raw": "Steps to reproduce\r\n\r\n1. On one terminal, start gzserver\r\n\r\n2. On another terminal, start gzclient\r\n\r\n3. Insert a box\r\n\r\n4. Press Ctrl+Q in gzclient or Ctrl+C in gzclient terminal to quit\r\n\r\ngzclient crashes\r\n\r\n\r\nbacktrace:\r\n\r\n```\r\n#!c++\r\n\r\n\r\nProgram received signal SIGSEGV, Segmentation fault.\r\ngazebo::rendering::Visual::DetachVisual (this=<optimized out>, _name=...)\r\n    at /home/ian/depot/clones/gazebo5/gazebo/rendering/Visual.cc:677\r\n677\t      this->dataPtr->children.erase(iter);\r\n(gdb) bt\r\n#0  gazebo::rendering::Visual::DetachVisual (this=<optimized out>, _name=...)\r\n    at /home/ian/depot/clones/gazebo5/gazebo/rendering/Visual.cc:677\r\n#1  0x00007ffff76266bc in gazebo::rendering::Visual::Fini (this=0x5992320)\r\n    at /home/ian/depot/clones/gazebo5/gazebo/rendering/Visual.cc:202\r\n#2  0x00007ffff75f3ecc in gazebo::rendering::Scene::RemoveVisual (this=0x1764ed0, \r\n    _vis=...) at /home/ian/depot/clones/gazebo5/gazebo/rendering/Scene.cc:2730\r\n#3  0x00007ffff75f64b7 in gazebo::rendering::Scene::Clear (this=0x1764ed0)\r\n    at /home/ian/depot/clones/gazebo5/gazebo/rendering/Scene.cc:194\r\n#4  0x00007ffff75e43f4 in gazebo::rendering::RenderEngine::RemoveScene (this=0x8b18c0, \r\n    _name=...) at /home/ian/depot/clones/gazebo5/gazebo/rendering/RenderEngine.cc:224\r\n#5  0x00007ffff75e461b in gazebo::rendering::RenderEngine::Fini (this=0x8b18c0)\r\n    at /home/ian/depot/clones/gazebo5/gazebo/rendering/RenderEngine.cc:332\r\n#6  0x00007ffff75e9279 in gazebo::rendering::fini ()\r\n    at /home/ian/depot/clones/gazebo5/gazebo/rendering/RenderingIface.cc:66\r\n#7  0x00007fffedce72e0 in gazebo::sensors::fini ()\r\n    at /home/ian/depot/clones/gazebo5/gazebo/sensors/SensorsIface.cc:71\r\n#8  0x00007ffff6567826 in gazebo::shutdown ()\r\n    at /home/ian/depot/clones/gazebo5/gazebo/gazebo.cc:235\r\n#9  0x00007ffff5a874ee in QWidget::event(QEvent*) ()\r\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n#10 0x00007ffff5e60c8b in QMainWindow::event(QEvent*) ()\r\n   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4\r\n\r\n```\r\n\r\n\r\n", "markup": "markdown", "html": "<p>Steps to reproduce</p>\n<ol>\n<li>\n<p>On one terminal, start gzserver</p>\n</li>\n<li>\n<p>On another terminal, start gzclient</p>\n</li>\n<li>\n<p>Insert a box</p>\n</li>\n<li>\n<p>Press Ctrl+Q in gzclient or Ctrl+C in gzclient terminal to quit</p>\n</li>\n</ol>\n<p>gzclient crashes</p>\n<p>backtrace:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">Program</span> <span class=\"n\">received</span> <span class=\"n\">signal</span> <span class=\"n\">SIGSEGV</span><span class=\"p\">,</span> <span class=\"n\">Segmentation</span> <span class=\"n\">fault</span><span class=\"p\">.</span>\n<span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">rendering</span><span class=\"o\">::</span><span class=\"n\">Visual</span><span class=\"o\">::</span><span class=\"n\">DetachVisual</span> <span class=\"p\">(</span><span class=\"k\">this</span><span class=\"o\">=&lt;</span><span class=\"n\">optimized</span> <span class=\"n\">out</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">_name</span><span class=\"o\">=</span><span class=\"p\">...)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ian</span><span class=\"o\">/</span><span class=\"n\">depot</span><span class=\"o\">/</span><span class=\"n\">clones</span><span class=\"o\">/</span><span class=\"n\">gazebo5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">Visual</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">677</span>\n<span class=\"mi\">677</span>       <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">dataPtr</span><span class=\"o\">-&gt;</span><span class=\"n\">children</span><span class=\"p\">.</span><span class=\"n\">erase</span><span class=\"p\">(</span><span class=\"n\">iter</span><span class=\"p\">);</span>\n<span class=\"p\">(</span><span class=\"n\">gdb</span><span class=\"p\">)</span> <span class=\"n\">bt</span>\n<span class=\"cp\">#0  gazebo::rendering::Visual::DetachVisual (this=&lt;optimized out&gt;, _name=...)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ian</span><span class=\"o\">/</span><span class=\"n\">depot</span><span class=\"o\">/</span><span class=\"n\">clones</span><span class=\"o\">/</span><span class=\"n\">gazebo5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">Visual</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">677</span>\n<span class=\"cp\">#1  0x00007ffff76266bc in gazebo::rendering::Visual::Fini (this=0x5992320)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ian</span><span class=\"o\">/</span><span class=\"n\">depot</span><span class=\"o\">/</span><span class=\"n\">clones</span><span class=\"o\">/</span><span class=\"n\">gazebo5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">Visual</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">202</span>\n<span class=\"cp\">#2  0x00007ffff75f3ecc in gazebo::rendering::Scene::RemoveVisual (this=0x1764ed0, </span>\n    <span class=\"n\">_vis</span><span class=\"o\">=</span><span class=\"p\">...)</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ian</span><span class=\"o\">/</span><span class=\"n\">depot</span><span class=\"o\">/</span><span class=\"n\">clones</span><span class=\"o\">/</span><span class=\"n\">gazebo5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">Scene</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">2730</span>\n<span class=\"cp\">#3  0x00007ffff75f64b7 in gazebo::rendering::Scene::Clear (this=0x1764ed0)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ian</span><span class=\"o\">/</span><span class=\"n\">depot</span><span class=\"o\">/</span><span class=\"n\">clones</span><span class=\"o\">/</span><span class=\"n\">gazebo5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">Scene</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">194</span>\n<span class=\"cp\">#4  0x00007ffff75e43f4 in gazebo::rendering::RenderEngine::RemoveScene (this=0x8b18c0, </span>\n    <span class=\"n\">_name</span><span class=\"o\">=</span><span class=\"p\">...)</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ian</span><span class=\"o\">/</span><span class=\"n\">depot</span><span class=\"o\">/</span><span class=\"n\">clones</span><span class=\"o\">/</span><span class=\"n\">gazebo5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">RenderEngine</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">224</span>\n<span class=\"cp\">#5  0x00007ffff75e461b in gazebo::rendering::RenderEngine::Fini (this=0x8b18c0)</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ian</span><span class=\"o\">/</span><span class=\"n\">depot</span><span class=\"o\">/</span><span class=\"n\">clones</span><span class=\"o\">/</span><span class=\"n\">gazebo5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">RenderEngine</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">332</span>\n<span class=\"cp\">#6  0x00007ffff75e9279 in gazebo::rendering::fini ()</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ian</span><span class=\"o\">/</span><span class=\"n\">depot</span><span class=\"o\">/</span><span class=\"n\">clones</span><span class=\"o\">/</span><span class=\"n\">gazebo5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">rendering</span><span class=\"o\">/</span><span class=\"n\">RenderingIface</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">66</span>\n<span class=\"cp\">#7  0x00007fffedce72e0 in gazebo::sensors::fini ()</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ian</span><span class=\"o\">/</span><span class=\"n\">depot</span><span class=\"o\">/</span><span class=\"n\">clones</span><span class=\"o\">/</span><span class=\"n\">gazebo5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">SensorsIface</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">71</span>\n<span class=\"cp\">#8  0x00007ffff6567826 in gazebo::shutdown ()</span>\n    <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ian</span><span class=\"o\">/</span><span class=\"n\">depot</span><span class=\"o\">/</span><span class=\"n\">clones</span><span class=\"o\">/</span><span class=\"n\">gazebo5</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">235</span>\n<span class=\"cp\">#9  0x00007ffff5a874ee in QWidget::event(QEvent*) ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">libQtGui</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.4</span>\n<span class=\"cp\">#10 0x00007ffff5e60c8b in QMainWindow::event(QEvent*) ()</span>\n   <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">libQtGui</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"mf\">.4</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2014-08-14T23:16:45.463331+00:00", "milestone": null, "updated_on": "2016-09-14T19:23:13.125308+00:00", "type": "issue", "id": 1262}