{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/31309950.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-31309950"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "I did some experiments and I found the origin of this issue. \nThe issue is not related with the variable 'fd2' mentioned in above comment (that is a different issue).\nThe computation is wrong because there's a bug in:\n\n```\n   if (fd != math::Vector3::Zero)\n   {\n     // fdir1 is in body local frame, rotate it into world frame\n    fd = _collision1->GetWorldPose().rot.RotateVector(fd);\n   }\n```\nThe method GetWorldPose() does not return the transformation between the **world** and the **collision reference frame**. It returns the transformation between the **origin of the model** and the **collision reference frame**. So if the robot model is rotated respect to the world frame, fd is wrong. I tested this hypotesis by rotating the robot and observing that GetWorldPose() returns always the same value.\n\n\nI thus fixed the code as follow:\n\n```\n   if (fd != math::Vector3::Zero)\n   {\n     // fdir1 is in body local frame, rotate it into world frame\n    fd = _collision1->GetWorldPose().rot.RotateVector(fd);\n    fd = _collision1->GetModel()->GetWorldPose().rot.RotateVector(fd);\n   }\n```\nThis hack fixes the calculation because the first line computes the transformation between the **origin of the model** and the **collision reference frame** frame while the second one returns the transformation between the **world** and the **origin of the model**.\n\nObviously this is just an hack that fixes the simulation. \n\nThe method _collision1->GetWorldPose() has to be fixed.\n\n\n\n\n\n", "markup": "markdown", "html": "<p>I did some experiments and I found the origin of this issue. \nThe issue is not related with the variable 'fd2' mentioned in above comment (that is a different issue).\nThe computation is wrong because there's a bug in:</p>\n<div class=\"codehilite\"><pre><span></span>   if (fd != math::Vector3::Zero)\n   {\n     // fdir1 is in body local frame, rotate it into world frame\n    fd = _collision1-&gt;GetWorldPose().rot.RotateVector(fd);\n   }\n</pre></div>\n\n\n<p>The method GetWorldPose() does not return the transformation between the <strong>world</strong> and the <strong>collision reference frame</strong>. It returns the transformation between the <strong>origin of the model</strong> and the <strong>collision reference frame</strong>. So if the robot model is rotated respect to the world frame, fd is wrong. I tested this hypotesis by rotating the robot and observing that GetWorldPose() returns always the same value.</p>\n<p>I thus fixed the code as follow:</p>\n<div class=\"codehilite\"><pre><span></span>   if (fd != math::Vector3::Zero)\n   {\n     // fdir1 is in body local frame, rotate it into world frame\n    fd = _collision1-&gt;GetWorldPose().rot.RotateVector(fd);\n    fd = _collision1-&gt;GetModel()-&gt;GetWorldPose().rot.RotateVector(fd);\n   }\n</pre></div>\n\n\n<p>This hack fixes the calculation because the first line computes the transformation between the <strong>origin of the model</strong> and the <strong>collision reference frame</strong> frame while the second one returns the transformation between the <strong>world</strong> and the <strong>origin of the model</strong>.</p>\n<p>Obviously this is just an hack that fixes the simulation. </p>\n<p>The method _collision1-&gt;GetWorldPose() has to be fixed.</p>", "type": "rendered"}, "created_on": "2016-10-12T15:01:29.922716+00:00", "user": {"display_name": "Andrea Ruzzenenti", "uuid": "{e1b5ee2b-de45-4d4a-a5e6-a8ac3fbf68e7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be1b5ee2b-de45-4d4a-a5e6-a8ac3fbf68e7%7D"}, "html": {"href": "https://bitbucket.org/%7Be1b5ee2b-de45-4d4a-a5e6-a8ac3fbf68e7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/23c771650185f3cd68d95b67cb829a12d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsAR-5.png"}}, "nickname": "aerydna", "type": "user", "account_id": "557058:4cda65f8-5ec6-402e-9da4-1c7f61e1a152"}, "updated_on": null, "type": "issue_comment", "id": 31309950}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/31384372.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-31384372"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Sorry for the delayed response. I'm surprised that the `fdir1` parameter is not working. We have an integration test for it in [physics_friction.cc](#!/osrf/gazebo/src/ac4b4d639d37218afae1245b4415dab5822d013f/test/integration/physics_friction.cc?fileviewer=file-view-default#physics_friction.cc-367) that spawns several rings of boxes with the friction direction set along with different combinations of model, link, and collision rotation. One friction value is 100, and the other is zero. Then a lateral gravity component is applied, which cause the boxes to all slide along the direction in which friction is zero. The boxes are grouped so that they should travel in a line.\r\n\r\nI've also exported and attached a world file from this test so you can tinker with it. The test is passing in our CI builds, but it could be that the test expectations are incorrect or that the test is too limited to show the error. Please let me know if you have a chance to look at this example.", "markup": "markdown", "html": "<p>Sorry for the delayed response. I'm surprised that the <code>fdir1</code> parameter is not working. We have an integration test for it in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/ac4b4d639d37218afae1245b4415dab5822d013f/test/integration/physics_friction.cc?fileviewer=file-view-default#physics_friction.cc-367\" rel=\"nofollow\">physics_friction.cc</a> that spawns several rings of boxes with the friction direction set along with different combinations of model, link, and collision rotation. One friction value is 100, and the other is zero. Then a lateral gravity component is applied, which cause the boxes to all slide along the direction in which friction is zero. The boxes are grouped so that they should travel in a line.</p>\n<p>I've also exported and attached a world file from this test so you can tinker with it. The test is passing in our CI builds, but it could be that the test expectations are incorrect or that the test is too limited to show the error. Please let me know if you have a chance to look at this example.</p>", "type": "rendered"}, "created_on": "2016-10-15T08:44:48.047581+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 31384372}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/31895255.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-31895255"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "I'm wondering if this might be arise from other issues with contact parameters, specifically the `min_depth` and `max_vel`. If you `View Contacts`, they should ideally be consistent, but with the default parameter values, the contact behavior can be poor. See [this gazebo_models pull request](#!/osrf/gazebo_models/pull-requests/87/fix-contact-parameters-for-wood-blocks/diff) as an example. I'll write a tutorial about setting these parameters.", "markup": "markdown", "html": "<p>I'm wondering if this might be arise from other issues with contact parameters, specifically the <code>min_depth</code> and <code>max_vel</code>. If you <code>View Contacts</code>, they should ideally be consistent, but with the default parameter values, the contact behavior can be poor. See <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo_models/pull-requests/87/fix-contact-parameters-for-wood-blocks/diff\" rel=\"nofollow\">this gazebo_models pull request</a> as an example. I'll write a tutorial about setting these parameters.</p>", "type": "rendered"}, "created_on": "2016-11-04T00:33:25.212430+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 31895255}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/31895653.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-31895653"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "I haven't tried messing with the min_depth or max_vel parameters yet, so I can't comment on if those help or not. However from my recent experience with trying to get a skid steering robot to work in Gazebo, I'm pretty sure there is something wrong with the fdir1 parameter. Here's a  [link](https://drive.google.com/open?id=0Bx21BgDrMVqsRDM2Z2NDMjZfQTA) of the robot transitioning from the x direction to the y direction. As it transitions, the wheel's coefficients of friction in the x and y direction relative to the world appear to remain fixed, resulting in the robot barely being able to turn as it gets closer to the y direction. After implementing Andrea's hack it works as I'd expect it to, here's a [link](https://drive.google.com/open?id=0Bx21BgDrMVqsZlZOSElaQTAza28).", "markup": "markdown", "html": "<p>I haven't tried messing with the min_depth or max_vel parameters yet, so I can't comment on if those help or not. However from my recent experience with trying to get a skid steering robot to work in Gazebo, I'm pretty sure there is something wrong with the fdir1 parameter. Here's a  <a data-is-external-link=\"true\" href=\"https://drive.google.com/open?id=0Bx21BgDrMVqsRDM2Z2NDMjZfQTA\" rel=\"nofollow\">link</a> of the robot transitioning from the x direction to the y direction. As it transitions, the wheel's coefficients of friction in the x and y direction relative to the world appear to remain fixed, resulting in the robot barely being able to turn as it gets closer to the y direction. After implementing Andrea's hack it works as I'd expect it to, here's a <a data-is-external-link=\"true\" href=\"https://drive.google.com/open?id=0Bx21BgDrMVqsZlZOSElaQTAza28\" rel=\"nofollow\">link</a>.</p>", "type": "rendered"}, "created_on": "2016-11-04T01:26:57.024923+00:00", "user": {"display_name": "Jacob Huesman", "uuid": "{f2855b5a-1846-4f9d-ab4c-b41b59993b57}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bf2855b5a-1846-4f9d-ab4c-b41b59993b57%7D"}, "html": {"href": "https://bitbucket.org/%7Bf2855b5a-1846-4f9d-ab4c-b41b59993b57%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:caeb9fdd-8209-4065-b7dd-e07f0247c92d/42d9337c-d2f0-4f7f-b216-4eb62321ac99/128"}}, "nickname": "jacobhuesman", "type": "user", "account_id": "557058:caeb9fdd-8209-4065-b7dd-e07f0247c92d"}, "updated_on": null, "type": "issue_comment", "id": 31895653}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/31919840.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-31919840"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Forgive me; this is going to be one of those utterly useless comments, because I don't have the time to investigate and comment in detail.  However, Steven, I used that world for a while, and I recall clearly being able to get what felt like a 'wrong' result.  That is, if I recall right, it has gravity in x and z, and the friction behaves as expected.  If you shift the gravity to y and z, though, you get a behavior that felt wrong. I specifically recall thinking that it did prove that fdir was in world coordinates, not object relative coordinates.  If I was less lame, I'd retest with Andrea's patch and see if that makes it behave more as I would expect.", "markup": "markdown", "html": "<p>Forgive me; this is going to be one of those utterly useless comments, because I don't have the time to investigate and comment in detail.  However, Steven, I used that world for a while, and I recall clearly being able to get what felt like a 'wrong' result.  That is, if I recall right, it has gravity in x and z, and the friction behaves as expected.  If you shift the gravity to y and z, though, you get a behavior that felt wrong. I specifically recall thinking that it did prove that fdir was in world coordinates, not object relative coordinates.  If I was less lame, I'd retest with Andrea's patch and see if that makes it behave more as I would expect.</p>", "type": "rendered"}, "created_on": "2016-11-04T20:07:02.685603+00:00", "user": {"display_name": "Jeremy White", "uuid": "{abab48b0-35b1-4102-8373-e88a492c5294}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D"}, "html": {"href": "https://bitbucket.org/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2764d3b5adf560de71f57e48a30550bad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJW-3.png"}}, "nickname": "knitfoo", "type": "user", "account_id": "557058:5de786d6-615c-44ef-8e12-f079efa38357"}, "updated_on": null, "type": "issue_comment", "id": 31919840}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/32084646.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-32084646"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Ok, I looked into this a bit more today. I'm pretty confident that `fdir1` is often working as intended, though 1ac3c8b did introduce a bug (when the second collision have `fdir1` set). The broader issue is that I think the friction pyramid model is not well suited to things like a skid-steer robot, even if the `fdir1` parameter is oriented with the wheel. It worked fine in the DRC for the polaris because it has Ackermann steering, but for skid-steer a friction cone model really needs to be used instead of a friction pyramid.\n\nFortunately, gazebo's ODE has a friction cone model added by @rosebudflyaway (pull request #1522)! The only drawback is that the only way to enable it is with a c++ API call to `PhysicsEngine::SetParam`, presumably from a plugin. Here's an example from the [INTEGRATION_physics_friction test](#!/osrf/gazebo/src/6565d89a01c84cba96e1737dab344b6015bd4486/test/integration/physics_friction.cc?fileviewer=file-view-default#physics_friction.cc-299):\n\n~~~\nphysics::PhysicsEnginePtr physics = world->GetPhysicsEngine();\nconst std::string frictionModel = \"cone_model\";\nphysics->SetParam(\"friction_model\", frictionModel);\n~~~\n\nI'll work on making it easier to set this parameter, but can people give this a try to see if it helps with their use cases? Thanks.", "markup": "markdown", "html": "<p>Ok, I looked into this a bit more today. I'm pretty confident that <code>fdir1</code> is often working as intended, though <a href=\"#!/osrf/gazebo/commits/1ac3c8b\" rel=\"nofollow\" class=\"ap-connect-link\">1ac3c8b</a> did introduce a bug (when the second collision have <code>fdir1</code> set). The broader issue is that I think the friction pyramid model is not well suited to things like a skid-steer robot, even if the <code>fdir1</code> parameter is oriented with the wheel. It worked fine in the DRC for the polaris because it has Ackermann steering, but for skid-steer a friction cone model really needs to be used instead of a friction pyramid.</p>\n<p>Fortunately, gazebo's ODE has a friction cone model added by @rosebudflyaway (<a href=\"#!/osrf/gazebo/pull-requests/1522/cone-friction-model\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1522</a>)! The only drawback is that the only way to enable it is with a c++ API call to <code>PhysicsEngine::SetParam</code>, presumably from a plugin. Here's an example from the <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/6565d89a01c84cba96e1737dab344b6015bd4486/test/integration/physics_friction.cc?fileviewer=file-view-default#physics_friction.cc-299\" rel=\"nofollow\">INTEGRATION_physics_friction test</a>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">physics</span><span class=\"p\">::</span><span class=\"nd\">PhysicsEnginePtr</span> <span class=\"nt\">physics</span> <span class=\"o\">=</span> <span class=\"nt\">world-</span><span class=\"o\">&gt;</span><span class=\"nt\">GetPhysicsEngine</span><span class=\"o\">();</span>\n<span class=\"nt\">const</span> <span class=\"nt\">std</span><span class=\"p\">::</span><span class=\"nd\">string</span> <span class=\"nt\">frictionModel</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;cone_model&quot;</span><span class=\"o\">;</span>\n<span class=\"nt\">physics-</span><span class=\"o\">&gt;</span><span class=\"nt\">SetParam</span><span class=\"o\">(</span><span class=\"s2\">&quot;friction_model&quot;</span><span class=\"o\">,</span> <span class=\"nt\">frictionModel</span><span class=\"o\">);</span>\n</pre></div>\n\n\n<p>I'll work on making it easier to set this parameter, but can people give this a try to see if it helps with their use cases? Thanks.</p>", "type": "rendered"}, "created_on": "2016-11-11T09:24:41.755232+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 32084646}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/32102535.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-32102535"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "The changes in pull request #1522 are visible in this commit: 8c05ad64967c", "markup": "markdown", "html": "<p>The changes in <a href=\"#!/osrf/gazebo/pull-requests/1522/cone-friction-model\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1522</a> are visible in this commit: <a href=\"#!/osrf/gazebo/commits/8c05ad64967c\" rel=\"nofollow\" class=\"ap-connect-link\">8c05ad64967c</a></p>", "type": "rendered"}, "created_on": "2016-11-11T21:46:15.640694+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 32102535}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/32126231.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-32126231"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "I'll give it a try on our model sometime this week.", "markup": "markdown", "html": "<p>I'll give it a try on our model sometime this week.</p>", "type": "rendered"}, "created_on": "2016-11-13T22:43:39.418150+00:00", "user": {"display_name": "Jacob Huesman", "uuid": "{f2855b5a-1846-4f9d-ab4c-b41b59993b57}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bf2855b5a-1846-4f9d-ab4c-b41b59993b57%7D"}, "html": {"href": "https://bitbucket.org/%7Bf2855b5a-1846-4f9d-ab4c-b41b59993b57%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:caeb9fdd-8209-4065-b7dd-e07f0247c92d/42d9337c-d2f0-4f7f-b216-4eb62321ac99/128"}}, "nickname": "jacobhuesman", "type": "user", "account_id": "557058:caeb9fdd-8209-4065-b7dd-e07f0247c92d"}, "updated_on": null, "type": "issue_comment", "id": 32126231}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/32874083.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-32874083"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Is there any update about this issue?. I am also facing the same directional frictional problem in my Gazebo 7 project. The fdir1 doesn't work the way it is described at Gazebo help section.", "markup": "markdown", "html": "<p>Is there any update about this issue?. I am also facing the same directional frictional problem in my Gazebo 7 project. The fdir1 doesn't work the way it is described at Gazebo help section.</p>", "type": "rendered"}, "created_on": "2016-12-13T11:31:03.361186+00:00", "user": {"display_name": "Muhammad Haseeb", "uuid": "{78b8fca1-abdc-4f56-9e94-1e9c6ae0694d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B78b8fca1-abdc-4f56-9e94-1e9c6ae0694d%7D"}, "html": {"href": "https://bitbucket.org/%7B78b8fca1-abdc-4f56-9e94-1e9c6ae0694d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/6c575160355186e25163e01d18c366b5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMH-6.png"}}, "nickname": "hashashas", "type": "user", "account_id": "557058:8d7239ef-3bb5-4eb7-80f3-c4dd4cf6cf2e"}, "updated_on": null, "type": "issue_comment", "id": 32874083}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/32888345.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-32888345"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Have you tried running the example code from my comment on Nov 11 inside a plugin? I think that will fix the issue.\n\nI'm also adding an sdformat parameter in [sdformat pull request 294](https://bitbucket.org/osrf/sdformat/pull-requests/294/add-friction_model-parameter-to-ode-solver/diff) to make it easier to set this parameter.", "markup": "markdown", "html": "<p>Have you tried running the example code from my comment on Nov 11 inside a plugin? I think that will fix the issue.</p>\n<p>I'm also adding an sdformat parameter in <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/sdformat/pull-requests/294/add-friction_model-parameter-to-ode-solver/diff\" rel=\"nofollow\">sdformat pull request 294</a> to make it easier to set this parameter.</p>", "type": "rendered"}, "created_on": "2016-12-13T19:10:54.918678+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 32888345}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/34575431.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-34575431"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "@scpeters : I've tried setting the friction cone computation for my tracked robot model and it gives more satisfactory results.\n\nI just wonder why isn't this new functionality mentioned in the changelog.\n\nAnother thing I wonder is what's the meaning of `fdir1` when using the friction cone...", "markup": "markdown", "html": "<p>@scpeters : I've tried setting the friction cone computation for my tracked robot model and it gives more satisfactory results.</p>\n<p>I just wonder why isn't this new functionality mentioned in the changelog.</p>\n<p>Another thing I wonder is what's the meaning of <code>fdir1</code> when using the friction cone...</p>", "type": "rendered"}, "created_on": "2017-02-21T17:37:19.608937+00:00", "user": {"display_name": "Martin Pecka", "uuid": "{41691c43-4ae0-49ba-ba45-3c36439f5af2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D"}, "html": {"href": "https://bitbucket.org/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d1ad32a09564f856909994613fdbc37cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMP-1.png"}}, "nickname": "peci1", "type": "user", "account_id": "557058:434ecab2-e510-4ede-8f9a-1c2a5a4032e1"}, "updated_on": null, "type": "issue_comment", "id": 34575431}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/34578011.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-34578011"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "My apologies that the changes aren't present in the Changelog. I believe the friction cone model was added in version 6.0.0.\n\nI believe the `fdir1` parameter has no effect when the cone model is in use.", "markup": "markdown", "html": "<p>My apologies that the changes aren't present in the Changelog. I believe the friction cone model was added in version 6.0.0.</p>\n<p>I believe the <code>fdir1</code> parameter has no effect when the cone model is in use.</p>", "type": "rendered"}, "created_on": "2017-02-21T19:32:07.283553+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 34578011}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35231426.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35231426"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Hello Steven, I am new to Gazebo, Where do I add the friction_model tag? Is it in the urdf file, or the world file?", "markup": "markdown", "html": "<p>Hello Steven, I am new to Gazebo, Where do I add the friction_model tag? Is it in the urdf file, or the world file?</p>", "type": "rendered"}, "created_on": "2017-03-21T03:05:27.282129+00:00", "user": {"display_name": "zeyi wang", "uuid": "{064d2e6f-6f00-4a4d-baee-8c17d09eb4e7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B064d2e6f-6f00-4a4d-baee-8c17d09eb4e7%7D"}, "html": {"href": "https://bitbucket.org/%7B064d2e6f-6f00-4a4d-baee-8c17d09eb4e7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1de34f8353b39a055042a21b74f9c5e6d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsZW-6.png"}}, "nickname": "zeyiwang", "type": "user", "account_id": "557058:c0a368ad-8bfb-4731-a2ef-862480df5d50"}, "updated_on": null, "type": "issue_comment", "id": 35231426}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35262072.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35262072"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "UPDATE: I misread what @zeyiwang asked in his question. The following describes how to update the friction coefficients of a collision shape, not the friction model of the solver. My apologies.\n\nIf you are creating an sdf model or world file, they should be placed in the `surface` of a `collision`, like in the following example:\n\n* #!/osrf/gazebo_models/src/ae8c18c22b4e3a7b7d4bd86f53bd466141c27408/table/model.sdf?fileviewer=file-view-default#model.sdf-16\n\nIf you are creating a urdf model, then you can use a `<gazebo>` tag with the name of the link to which friction should be added, like the following example:\n\n* [gazebo tags](https://bitbucket.org/osrf/drcsim/src/194be8500fef81593f79607a21ee2badd9700a0e/atlas_description/urdf/atlas_v5.gazebo?at=default&fileviewer=file-view-default#atlas_v5.gazebo-114)\n* [urdf with link definitions](https://bitbucket.org/osrf/drcsim/src/194be8500fef81593f79607a21ee2badd9700a0e/atlas_description/urdf/atlas_v5.urdf?at=default&fileviewer=file-view-default#atlas_v5.urdf-3)", "markup": "markdown", "html": "<p>UPDATE: I misread what @zeyiwang asked in his question. The following describes how to update the friction coefficients of a collision shape, not the friction model of the solver. My apologies.</p>\n<p>If you are creating an sdf model or world file, they should be placed in the <code>surface</code> of a <code>collision</code>, like in the following example:</p>\n<ul>\n<li><a href=\"#!/osrf/gazebo_models/src/ae8c18c22b4e3a7b7d4bd86f53bd466141c27408/table/model.sdf?fileviewer=file-view-default#model.sdf-16\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo_models/src/ae8c18c22b4e3a7b7d4bd86f53bd466141c27408/table/model.sdf?fileviewer=file-view-default#model.sdf-16</a></li>\n</ul>\n<p>If you are creating a urdf model, then you can use a <code>&lt;gazebo&gt;</code> tag with the name of the link to which friction should be added, like the following example:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/drcsim/src/194be8500fef81593f79607a21ee2badd9700a0e/atlas_description/urdf/atlas_v5.gazebo?at=default&amp;fileviewer=file-view-default#atlas_v5.gazebo-114\" rel=\"nofollow\">gazebo tags</a></li>\n<li><a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/drcsim/src/194be8500fef81593f79607a21ee2badd9700a0e/atlas_description/urdf/atlas_v5.urdf?at=default&amp;fileviewer=file-view-default#atlas_v5.urdf-3\" rel=\"nofollow\">urdf with link definitions</a></li>\n</ul>", "type": "rendered"}, "created_on": "2017-03-22T00:01:15.688733+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-03-22T22:08:23.209125+00:00", "type": "issue_comment", "id": 35262072}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35276797.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35276797"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "@scpeters I'm not sure you're right... It seems to me this is a world-wide setting in `<world><physics><solver><ode><friction_model>` ... If I look at `SurfaceParams` and `ODESurfaceParams`, there is no mention of the friction model setting.", "markup": "markdown", "html": "<p>@scpeters I'm not sure you're right... It seems to me this is a world-wide setting in <code>&lt;world&gt;&lt;physics&gt;&lt;solver&gt;&lt;ode&gt;&lt;friction_model&gt;</code> ... If I look at <code>SurfaceParams</code> and <code>ODESurfaceParams</code>, there is no mention of the friction model setting.</p>", "type": "rendered"}, "created_on": "2017-03-22T13:29:35.488509+00:00", "user": {"display_name": "Martin Pecka", "uuid": "{41691c43-4ae0-49ba-ba45-3c36439f5af2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D"}, "html": {"href": "https://bitbucket.org/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d1ad32a09564f856909994613fdbc37cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMP-1.png"}}, "nickname": "peci1", "type": "user", "account_id": "557058:434ecab2-e510-4ede-8f9a-1c2a5a4032e1"}, "updated_on": null, "type": "issue_comment", "id": 35276797}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35283322.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35283322"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Anyways, there's still something rotten here even using `cone_model`.\n\nI compared two vehicles. For the one to the left, I compute friction direction myself between collision checking and physics update. The vehicle to the right is just an omniwheel. Both are commanded the same commands - to rotate around their z axis. \n\nThe left vehicle has no problems using either `pyramid_model` or `cone_model`.\n\nMy investigation shows, that `mu` and `mu2` are treated incorrectly in both `pyramid_model` with directional friction and `cone_model`.\n\n# Asymmetric friction coefficients #\n\n`mu = 2`, `mu2 = 0.5`\n\nThe vehicle to the right has the more serious problems, the more it is aligned with x axis - in both models.\n\nHere with `pyramid_model` and `direction1` set to `[1, 0, 0]`:\nhttps://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VEZzY1B1bE4wc00/view?usp=drivesdk\n\nHere with `cone_model`:\nhttps://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VlQ3dEptdmljZkU/view?usp=drivesdk\n\nIt is evident that the `cone_model` helps a lot, but it's still not perfect.\n\n# Symmetric friction coefficients #\n\n`mu = mu2 = 0.5`\n\nIn this case, `cone_model` works as expected, while `pyramid_model` still has issues.\n\nHere with `pyramid_model` and `direction1` set to `[1, 0, 0]`: \nhttps://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7clNqb1RQamFUVms/view?usp=drivesdk\n\nHere with `cone_model`:\nhttps://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7YXZwY3lnOGV0bW8/view?usp=drivesdk\n\n# Notes #\n\nI looked into the `physics_friction.cc` test, but I can't easily tell what's different in this case that it works in the test and not in my experiment. The only thing is torque comes into play in my experiments. I don't set torsional friction in any way, so I'd expect it behave the same in all cases.", "markup": "markdown", "html": "<p>Anyways, there's still something rotten here even using <code>cone_model</code>.</p>\n<p>I compared two vehicles. For the one to the left, I compute friction direction myself between collision checking and physics update. The vehicle to the right is just an omniwheel. Both are commanded the same commands - to rotate around their z axis. </p>\n<p>The left vehicle has no problems using either <code>pyramid_model</code> or <code>cone_model</code>.</p>\n<p>My investigation shows, that <code>mu</code> and <code>mu2</code> are treated incorrectly in both <code>pyramid_model</code> with directional friction and <code>cone_model</code>.</p>\n<h1 id=\"markdown-header-asymmetric-friction-coefficients\">Asymmetric friction coefficients</h1>\n<p><code>mu = 2</code>, <code>mu2 = 0.5</code></p>\n<p>The vehicle to the right has the more serious problems, the more it is aligned with x axis - in both models.</p>\n<p>Here with <code>pyramid_model</code> and <code>direction1</code> set to <code>[1, 0, 0]</code>:\n<a href=\"https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VEZzY1B1bE4wc00/view?usp=drivesdk\" rel=\"nofollow\" class=\"ap-connect-link\">https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VEZzY1B1bE4wc00/view?usp=drivesdk</a></p>\n<p>Here with <code>cone_model</code>:\n<a href=\"https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VlQ3dEptdmljZkU/view?usp=drivesdk\" rel=\"nofollow\" class=\"ap-connect-link\">https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VlQ3dEptdmljZkU/view?usp=drivesdk</a></p>\n<p>It is evident that the <code>cone_model</code> helps a lot, but it's still not perfect.</p>\n<h1 id=\"markdown-header-symmetric-friction-coefficients\">Symmetric friction coefficients</h1>\n<p><code>mu = mu2 = 0.5</code></p>\n<p>In this case, <code>cone_model</code> works as expected, while <code>pyramid_model</code> still has issues.</p>\n<p>Here with <code>pyramid_model</code> and <code>direction1</code> set to <code>[1, 0, 0]</code>: \n<a href=\"https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7clNqb1RQamFUVms/view?usp=drivesdk\" rel=\"nofollow\" class=\"ap-connect-link\">https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7clNqb1RQamFUVms/view?usp=drivesdk</a></p>\n<p>Here with <code>cone_model</code>:\n<a href=\"https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7YXZwY3lnOGV0bW8/view?usp=drivesdk\" rel=\"nofollow\" class=\"ap-connect-link\">https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7YXZwY3lnOGV0bW8/view?usp=drivesdk</a></p>\n<h1 id=\"markdown-header-notes\">Notes</h1>\n<p>I looked into the <code>physics_friction.cc</code> test, but I can't easily tell what's different in this case that it works in the test and not in my experiment. The only thing is torque comes into play in my experiments. I don't set torsional friction in any way, so I'd expect it behave the same in all cases.</p>", "type": "rendered"}, "created_on": "2017-03-22T17:10:05.007319+00:00", "user": {"display_name": "Martin Pecka", "uuid": "{41691c43-4ae0-49ba-ba45-3c36439f5af2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D"}, "html": {"href": "https://bitbucket.org/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d1ad32a09564f856909994613fdbc37cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMP-1.png"}}, "nickname": "peci1", "type": "user", "account_id": "557058:434ecab2-e510-4ede-8f9a-1c2a5a4032e1"}, "updated_on": null, "type": "issue_comment", "id": 35283322}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35289080.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35289080"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "My apologies @peci1, I totally misread the comment by @zeyiwang. I thought he was asking how to change the friction coefficients on a collision, but he obviously wasn't in retrospect.\n\nThe friction model is indeed a global property of the solver. We have added an sdformat tag to [physics.sdf](https://bitbucket.org/osrf/sdformat/src/381906579ad4ce6959b64b37b52cb7ba31f03a0c/sdf/1.6/physics.sdf?at=sdf4&fileviewer=file-view-default#physics.sdf-187) as you noted, though it not yet checked when a physics engine is loaded. So the only way to set it currently is with a c++ API call to `PhysicsEngine::SetParam`. I had intended to make a pull request for this sooner, but I must have gotten distracted.", "markup": "markdown", "html": "<p>My apologies @peci1, I totally misread the comment by @zeyiwang. I thought he was asking how to change the friction coefficients on a collision, but he obviously wasn't in retrospect.</p>\n<p>The friction model is indeed a global property of the solver. We have added an sdformat tag to <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/sdformat/src/381906579ad4ce6959b64b37b52cb7ba31f03a0c/sdf/1.6/physics.sdf?at=sdf4&amp;fileviewer=file-view-default#physics.sdf-187\" rel=\"nofollow\">physics.sdf</a> as you noted, though it not yet checked when a physics engine is loaded. So the only way to set it currently is with a c++ API call to <code>PhysicsEngine::SetParam</code>. I had intended to make a pull request for this sooner, but I must have gotten distracted.</p>", "type": "rendered"}, "created_on": "2017-03-22T22:15:08.246770+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 35289080}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35496094.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35496094"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Hi Steven  and Martin, I figured how to use the cone model, but the result is still a bit less than perfect. Is it necessary to do the fix from Andrea (the first post)? If so, where is that fix implemented? I googled and found that piece in ODEPhysics.cc, but I couldn't find that file though...", "markup": "markdown", "html": "<p>Hi Steven  and Martin, I figured how to use the cone model, but the result is still a bit less than perfect. Is it necessary to do the fix from Andrea (the first post)? If so, where is that fix implemented? I googled and found that piece in ODEPhysics.cc, but I couldn't find that file though...</p>", "type": "rendered"}, "created_on": "2017-03-31T02:07:32.277499+00:00", "user": {"display_name": "zeyi wang", "uuid": "{064d2e6f-6f00-4a4d-baee-8c17d09eb4e7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B064d2e6f-6f00-4a4d-baee-8c17d09eb4e7%7D"}, "html": {"href": "https://bitbucket.org/%7B064d2e6f-6f00-4a4d-baee-8c17d09eb4e7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1de34f8353b39a055042a21b74f9c5e6d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsZW-6.png"}}, "nickname": "zeyiwang", "type": "user", "account_id": "557058:c0a368ad-8bfb-4731-a2ef-862480df5d50"}, "updated_on": null, "type": "issue_comment", "id": 35496094}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35502560.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35502560"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "[here](#!/osrf/gazebo/src/01bfc1f85995b3c42e5c01731a7dd010cfde7b62/gazebo/physics/ode/?at=default)", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/01bfc1f85995b3c42e5c01731a7dd010cfde7b62/gazebo/physics/ode/?at=default\" rel=\"nofollow\">here</a></p>", "type": "rendered"}, "created_on": "2017-03-31T08:48:09.164855+00:00", "user": {"display_name": "Martin Pecka", "uuid": "{41691c43-4ae0-49ba-ba45-3c36439f5af2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D"}, "html": {"href": "https://bitbucket.org/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d1ad32a09564f856909994613fdbc37cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMP-1.png"}}, "nickname": "peci1", "type": "user", "account_id": "557058:434ecab2-e510-4ede-8f9a-1c2a5a4032e1"}, "updated_on": null, "type": "issue_comment", "id": 35502560}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35509084.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35509084"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Thank you for your reply Martin!  So is ODEPhysics.cc in my computer? I went to gazebo/physics/ode in my computer and only found the header file ODEPhysics.hh. I have no idea where to implement that fix provided by Andrea.", "markup": "markdown", "html": "<p>Thank you for your reply Martin!  So is ODEPhysics.cc in my computer? I went to gazebo/physics/ode in my computer and only found the header file ODEPhysics.hh. I have no idea where to implement that fix provided by Andrea.</p>", "type": "rendered"}, "created_on": "2017-03-31T12:22:33.506112+00:00", "user": {"display_name": "zeyi wang", "uuid": "{064d2e6f-6f00-4a4d-baee-8c17d09eb4e7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B064d2e6f-6f00-4a4d-baee-8c17d09eb4e7%7D"}, "html": {"href": "https://bitbucket.org/%7B064d2e6f-6f00-4a4d-baee-8c17d09eb4e7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1de34f8353b39a055042a21b74f9c5e6d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsZW-6.png"}}, "nickname": "zeyiwang", "type": "user", "account_id": "557058:c0a368ad-8bfb-4731-a2ef-862480df5d50"}, "updated_on": null, "type": "issue_comment", "id": 35509084}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35509869.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35509869"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Ah, so... You'll need to [build Gazebo from source](http://gazebosim.org/tutorials?tut=install_from_source&cat=install) to apply the fix. Make sure you have at least 10 gigs of disk space, 4 gigs of RAM, and >2 hours of free time =)", "markup": "markdown", "html": "<p>Ah, so... You'll need to <a data-is-external-link=\"true\" href=\"http://gazebosim.org/tutorials?tut=install_from_source&amp;cat=install\" rel=\"nofollow\">build Gazebo from source</a> to apply the fix. Make sure you have at least 10 gigs of disk space, 4 gigs of RAM, and &gt;2 hours of free time =)</p>", "type": "rendered"}, "created_on": "2017-03-31T12:55:45.400054+00:00", "user": {"display_name": "Martin Pecka", "uuid": "{41691c43-4ae0-49ba-ba45-3c36439f5af2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D"}, "html": {"href": "https://bitbucket.org/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d1ad32a09564f856909994613fdbc37cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMP-1.png"}}, "nickname": "peci1", "type": "user", "account_id": "557058:434ecab2-e510-4ede-8f9a-1c2a5a4032e1"}, "updated_on": null, "type": "issue_comment", "id": 35509869}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35509915.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35509915"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Thanks!!!", "markup": "markdown", "html": "<p>Thanks!!!</p>", "type": "rendered"}, "created_on": "2017-03-31T12:57:47.087059+00:00", "user": {"display_name": "zeyi wang", "uuid": "{064d2e6f-6f00-4a4d-baee-8c17d09eb4e7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B064d2e6f-6f00-4a4d-baee-8c17d09eb4e7%7D"}, "html": {"href": "https://bitbucket.org/%7B064d2e6f-6f00-4a4d-baee-8c17d09eb4e7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1de34f8353b39a055042a21b74f9c5e6d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsZW-6.png"}}, "nickname": "zeyiwang", "type": "user", "account_id": "557058:c0a368ad-8bfb-4731-a2ef-862480df5d50"}, "updated_on": null, "type": "issue_comment", "id": 35509915}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35965378.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35965378"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "As I look at this more closely, @aerydna was absolutely correct from the beginning. My apologies for not noticing this sooner. I was somewhat blinded by the fact that I wrote a test that covers a very similar case with boxes at many different angles with the friction direction set. That test didn't catch this bug, though, because the boxes don't rotate during the test.\n\nI will start by updating the test and then implement the fix suggested by @aerydna. Thanks for your patience with the `cone_model` suggestions.", "markup": "markdown", "html": "<p>As I look at this more closely, @aerydna was absolutely correct from the beginning. My apologies for not noticing this sooner. I was somewhat blinded by the fact that I wrote a test that covers a very similar case with boxes at many different angles with the friction direction set. That test didn't catch this bug, though, because the boxes don't rotate during the test.</p>\n<p>I will start by updating the test and then implement the fix suggested by @aerydna. Thanks for your patience with the <code>cone_model</code> suggestions.</p>", "type": "rendered"}, "created_on": "2017-04-13T23:16:45.730293+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 35965378}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35980846.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35980846"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "A little more detail, this bug doesn't affect the first link defined in a model, so my test absolutely couldn't demonstrate this bug because all the models had only a single link. I'll add a model with multiple links next.", "markup": "markdown", "html": "<p>A little more detail, this bug doesn't affect the first link defined in a model, so my test absolutely couldn't demonstrate this bug because all the models had only a single link. I'll add a model with multiple links next.</p>", "type": "rendered"}, "created_on": "2017-04-14T19:14:31.326711+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 35980846}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/39783566.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-39783566"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "fixed by pull request #2702", "markup": "markdown", "html": "<p>fixed by <a href=\"#!/osrf/gazebo/pull-requests/2702/fix-collision-getworldpose-for-non\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #2702</a></p>", "type": "rendered"}, "created_on": "2017-09-11T19:12:16.414661+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 39783566}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/54807725.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-54807725"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "There\u2019s still something broken about friction in Gazebo 9. And you don\u2019t even need to play around with custom friction directions.\n\nYou can play with it yourself in Gazebo 9. Just make a copy of worlds/tracked\\_vehicle\\_wheeled.world, find the `wheel_tracked_vehicle_controller` plugin, and edit `<track_mu>` to  2.0 . Then use WSAD keys to rotate around. You\u2019ll see that the robot is kind of prevented rotating \u201cover\u201d diagonals of the world. The plugin itself doesn\u2019t touch anything else than `<mu>`, `<mu2>` and velocity of the joints. It also changes friction model to cone, but even leaving the default suffers from the same bug \\(even more\\).\n\nHere\u2019s a video: [https://vimeo.com/373156495](https://vimeo.com/373156495) . Sorry for the \u201cjumping\u201d glitches in the video. This is just how my Gazebo records MP4 or OGV videos. Do you have any recommendations on how to get better videos?", "markup": "markdown", "html": "<p>There\u2019s still something broken about friction in Gazebo 9. And you don\u2019t even need to play around with custom friction directions.</p>\n<p>You can play with it yourself in Gazebo 9. Just make a copy of worlds/tracked_vehicle_wheeled.world, find the <code>wheel_tracked_vehicle_controller</code> plugin, and edit <code>&lt;track_mu&gt;</code> to  2.0 . Then use WSAD keys to rotate around. You\u2019ll see that the robot is kind of prevented rotating \u201cover\u201d diagonals of the world. The plugin itself doesn\u2019t touch anything else than <code>&lt;mu&gt;</code>, <code>&lt;mu2&gt;</code> and velocity of the joints. It also changes friction model to cone, but even leaving the default suffers from the same bug (even more).</p>\n<p>Here\u2019s a video: <a data-is-external-link=\"true\" href=\"https://vimeo.com/373156495\" rel=\"nofollow\">https://vimeo.com/373156495</a> . Sorry for the \u201cjumping\u201d glitches in the video. This is just how my Gazebo records MP4 or OGV videos. Do you have any recommendations on how to get better videos?</p>", "type": "rendered"}, "created_on": "2019-11-14T15:47:32.525200+00:00", "user": {"display_name": "Martin Pecka", "uuid": "{41691c43-4ae0-49ba-ba45-3c36439f5af2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D"}, "html": {"href": "https://bitbucket.org/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d1ad32a09564f856909994613fdbc37cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMP-1.png"}}, "nickname": "peci1", "type": "user", "account_id": "557058:434ecab2-e510-4ede-8f9a-1c2a5a4032e1"}, "updated_on": null, "type": "issue_comment", "id": 54807725}], "page": 1, "size": 26}