{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068/comments/35283322.json"}, "html": {"href": "#!/osrf/gazebo/issues/2068#comment-35283322"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2068.json"}}, "type": "issue", "id": 2068, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Directional friction still broken."}, "content": {"raw": "Anyways, there's still something rotten here even using `cone_model`.\n\nI compared two vehicles. For the one to the left, I compute friction direction myself between collision checking and physics update. The vehicle to the right is just an omniwheel. Both are commanded the same commands - to rotate around their z axis. \n\nThe left vehicle has no problems using either `pyramid_model` or `cone_model`.\n\nMy investigation shows, that `mu` and `mu2` are treated incorrectly in both `pyramid_model` with directional friction and `cone_model`.\n\n# Asymmetric friction coefficients #\n\n`mu = 2`, `mu2 = 0.5`\n\nThe vehicle to the right has the more serious problems, the more it is aligned with x axis - in both models.\n\nHere with `pyramid_model` and `direction1` set to `[1, 0, 0]`:\nhttps://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VEZzY1B1bE4wc00/view?usp=drivesdk\n\nHere with `cone_model`:\nhttps://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VlQ3dEptdmljZkU/view?usp=drivesdk\n\nIt is evident that the `cone_model` helps a lot, but it's still not perfect.\n\n# Symmetric friction coefficients #\n\n`mu = mu2 = 0.5`\n\nIn this case, `cone_model` works as expected, while `pyramid_model` still has issues.\n\nHere with `pyramid_model` and `direction1` set to `[1, 0, 0]`: \nhttps://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7clNqb1RQamFUVms/view?usp=drivesdk\n\nHere with `cone_model`:\nhttps://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7YXZwY3lnOGV0bW8/view?usp=drivesdk\n\n# Notes #\n\nI looked into the `physics_friction.cc` test, but I can't easily tell what's different in this case that it works in the test and not in my experiment. The only thing is torque comes into play in my experiments. I don't set torsional friction in any way, so I'd expect it behave the same in all cases.", "markup": "markdown", "html": "<p>Anyways, there's still something rotten here even using <code>cone_model</code>.</p>\n<p>I compared two vehicles. For the one to the left, I compute friction direction myself between collision checking and physics update. The vehicle to the right is just an omniwheel. Both are commanded the same commands - to rotate around their z axis. </p>\n<p>The left vehicle has no problems using either <code>pyramid_model</code> or <code>cone_model</code>.</p>\n<p>My investigation shows, that <code>mu</code> and <code>mu2</code> are treated incorrectly in both <code>pyramid_model</code> with directional friction and <code>cone_model</code>.</p>\n<h1 id=\"markdown-header-asymmetric-friction-coefficients\">Asymmetric friction coefficients</h1>\n<p><code>mu = 2</code>, <code>mu2 = 0.5</code></p>\n<p>The vehicle to the right has the more serious problems, the more it is aligned with x axis - in both models.</p>\n<p>Here with <code>pyramid_model</code> and <code>direction1</code> set to <code>[1, 0, 0]</code>:\n<a href=\"https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VEZzY1B1bE4wc00/view?usp=drivesdk\" rel=\"nofollow\" class=\"ap-connect-link\">https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VEZzY1B1bE4wc00/view?usp=drivesdk</a></p>\n<p>Here with <code>cone_model</code>:\n<a href=\"https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VlQ3dEptdmljZkU/view?usp=drivesdk\" rel=\"nofollow\" class=\"ap-connect-link\">https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7VlQ3dEptdmljZkU/view?usp=drivesdk</a></p>\n<p>It is evident that the <code>cone_model</code> helps a lot, but it's still not perfect.</p>\n<h1 id=\"markdown-header-symmetric-friction-coefficients\">Symmetric friction coefficients</h1>\n<p><code>mu = mu2 = 0.5</code></p>\n<p>In this case, <code>cone_model</code> works as expected, while <code>pyramid_model</code> still has issues.</p>\n<p>Here with <code>pyramid_model</code> and <code>direction1</code> set to <code>[1, 0, 0]</code>: \n<a href=\"https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7clNqb1RQamFUVms/view?usp=drivesdk\" rel=\"nofollow\" class=\"ap-connect-link\">https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7clNqb1RQamFUVms/view?usp=drivesdk</a></p>\n<p>Here with <code>cone_model</code>:\n<a href=\"https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7YXZwY3lnOGV0bW8/view?usp=drivesdk\" rel=\"nofollow\" class=\"ap-connect-link\">https://drive.google.com/a/fel.cvut.cz/file/d/0B_WCOb_4cMD7YXZwY3lnOGV0bW8/view?usp=drivesdk</a></p>\n<h1 id=\"markdown-header-notes\">Notes</h1>\n<p>I looked into the <code>physics_friction.cc</code> test, but I can't easily tell what's different in this case that it works in the test and not in my experiment. The only thing is torque comes into play in my experiments. I don't set torsional friction in any way, so I'd expect it behave the same in all cases.</p>", "type": "rendered"}, "created_on": "2017-03-22T17:10:05.007319+00:00", "user": {"display_name": "Martin Pecka", "uuid": "{41691c43-4ae0-49ba-ba45-3c36439f5af2}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D"}, "html": {"href": "https://bitbucket.org/%7B41691c43-4ae0-49ba-ba45-3c36439f5af2%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d1ad32a09564f856909994613fdbc37cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMP-1.png"}}, "nickname": "peci1", "type": "user", "account_id": "557058:434ecab2-e510-4ede-8f9a-1c2a5a4032e1"}, "updated_on": null, "type": "issue_comment", "id": 35283322}