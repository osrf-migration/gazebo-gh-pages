{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1013/comments/9317634.json"}, "html": {"href": "#!/osrf/gazebo/issues/1013#comment-9317634"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1013.json"}}, "type": "issue", "id": 1013, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Gripper test sometimes fails (transport/msgs related)"}, "content": {"raw": "After adding some debug messages in  2f95f1a, I found that when a non-ending run occurs, the output is:\n\n```\n\u001b[1;36m265[Dbg] \u001b[0m\u001b[1;36m[\u001b[0m\u001b[1;36mOnContacts Unlock\u001b[0m\u001b[1;36mServerFixture.cc\u001b[0m\u001b[1;36m\n\u001b[0m\u001b[1;\u001b[1;3636mm:\u001b[0m:\u001b[0m\u001b[1;36m\u001b[0m\u001b[1;36m\u001b[0m\u001b[1;36m] \u001b[0m\u001b[1;36mServerFixture::Unload\u001b[0m\u001b[1;36m\n\u001b[0m\u001b[1;36m\u001b[0m\u001b[1;36m[Dbg] \u001b[0m\u001b[1;36m[\u001b[0m\u001b[1;36mGripper.cc\u001b[0m\u001b[1;36m:\u001b[0m\u001b[1;36m261\u001b[0m\u001b[1;36m] \u001b[0m\u001b[1;36mOnContacts Lock\u001b[0m\u001b[1;36m\n\u001b[0m\u001b[1;36m\u001b[0m\u001b[1;36m[Dbg] \u001b[0m\u001b[1;36m[\u001b[0m\u001b[1;36mGripper.cc\u001b[0m\u001b[1;36m:\u001b[0m\u001b[1;36m265\u001b[0m\u001b[1;36m] \u001b[0m\u001b[1;36mOnContacts Unlock\u001b[0m\u001b[1;36m\n\u001b[0m\u001b[1;36m\u001b[0m\u001b[1;36m[Dbg] \u001b[0m\u001b[1;36m[\u001b[0m\u001b[1;36mGripper.cc\u001b[0m\u001b[1;36m:\u001b[0m\u001b[1;36m261\u001b[0m\u001b[1;36m] \u001b[0m\u001b[1;36mOnContacts Lock\u001b[0m\u001b[1;36m\n\u001b[0m\u001b[1;36m\u001b[0m\u001b[1;36m[Dbg] \u001b[0m\u001b[1;36m[\u001b[0m\u001b[1;36mGripper.cc\u001b[0m\u001b[1;36m:\u001b[0m\u001b[1;36m265\u001b[0m\u001b[1;36m] \u001b[0m\u001b[1;36mOnContacts Unlock\u001b[0m\u001b[1;36m\n```\n \nThe test is not really hanging, at least not the thread that runs the OnContacts function and the ServerFixture is running the Unload method.", "markup": "markdown", "html": "<p>After adding some debug messages in  <a href=\"#!/osrf/gazebo/commits/2f95f1a\" rel=\"nofollow\" class=\"ap-connect-link\">2f95f1a</a>, I found that when a non-ending run occurs, the output is:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m265</span><span class=\"err\">[</span><span class=\"nx\">Dbg</span><span class=\"cp\">]</span> <span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">[\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mOnContacts</span> <span class=\"nx\">Unlock</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mServerFixture.cc</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span>\n<span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">3636</span><span class=\"nx\">mm</span><span class=\"p\">:</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"p\">:</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"cp\">]</span> <span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mServerFixture</span><span class=\"nl\">::Unload</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span>\n<span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">[</span><span class=\"nx\">Dbg</span><span class=\"cp\">]</span> <span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">[\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mGripper.cc</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"p\">:</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m261</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"cp\">]</span> <span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mOnContacts</span> <span class=\"nx\">Lock</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span>\n<span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">[</span><span class=\"nx\">Dbg</span><span class=\"cp\">]</span> <span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">[\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mGripper.cc</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"p\">:</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m265</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"cp\">]</span> <span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mOnContacts</span> <span class=\"nx\">Unlock</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span>\n<span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">[</span><span class=\"nx\">Dbg</span><span class=\"cp\">]</span> <span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">[\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mGripper.cc</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"p\">:</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m261</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"cp\">]</span> <span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mOnContacts</span> <span class=\"nx\">Lock</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span>\n<span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">[</span><span class=\"nx\">Dbg</span><span class=\"cp\">]</span> <span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"err\">[\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mGripper.cc</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"p\">:</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m265</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span><span class=\"cp\">]</span> <span class=\"err\">\u001b</span><span class=\"cp\">[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">mOnContacts</span> <span class=\"nx\">Unlock</span><span class=\"err\">\u001b[</span><span class=\"mi\">0</span><span class=\"nx\">m</span><span class=\"err\">\u001b[</span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"mi\">36</span><span class=\"nx\">m</span>\n</pre></div>\n\n\n<p>The test is not really hanging, at least not the thread that runs the OnContacts function and the ServerFixture is running the Unload method.</p>", "type": "rendered"}, "created_on": "2014-03-25T23:26:13.310317+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": null, "type": "issue_comment", "id": 9317634}