{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2603/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2603.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2603/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2603/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2603/texture-scaling-on-heightmaps-does-not"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2603/vote"}}, "reporter": {"display_name": "Tully Foote", "uuid": "{3d90dbd4-b845-466f-b5bd-068566f7ff50}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d90dbd4-b845-466f-b5bd-068566f7ff50%7D"}, "html": {"href": "https://bitbucket.org/%7B3d90dbd4-b845-466f-b5bd-068566f7ff50%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/3bc6528f8fe1fef6b6ecc7312ee0cf04d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTF-2.png"}}, "nickname": "Tully Foote", "type": "user", "account_id": "557058:e2bf789f-2138-4a4e-ba39-3d618078e20b"}, "title": "texture scaling on heightmaps does not appear to be accurate", "component": null, "votes": 0, "watches": 1, "content": {"raw": "I created a height map and texture from ground truth data. They were validated as accurately aligned in qgis and similarly scaled. However when I rendered it in gazebo I had to adjust the texture size argument to 6000m from 7700m to render correctly. This number was determined by measuring the scaling difference between features in the rendering. \r\n\r\nFirst measuring the width. (also note that the depth and texture are both rendered and nicely aligned)\r\n\r\n![half_true_width.png](data/bitbucket.org/repo/jgXqbo/images/2525364132-half_true_width.png)\r\n\r\nThe original render\r\n\r\n              <texture>\r\n                <diffuse>file://media/textures/yosemite_color.png</diffuse>\r\n                <normal>file://media/materials/textures/flat_normal.png</normal>\r\n                <size>7700</size>\r\n              </texture>\r\n\r\n![half_accurate_width_bad_rendering.png](data/bitbucket.org/repo/jgXqbo/images/3075180811-half_accurate_width_bad_rendering.png)\r\n\r\nMeasuring the offset\r\n![half_measured_width_to_scale_texture.png](data/bitbucket.org/repo/jgXqbo/images/2465943214-half_measured_width_to_scale_texture.png)\r\n\r\nRerendered with \r\n\r\n              <texture>\r\n                <diffuse>file://media/textures/yosemite_color.png</diffuse>\r\n                <normal>file://media/materials/textures/flat_normal.png</normal>\r\n                <size>6000</size>\r\n              </texture>\r\n\r\n![half_scaled_down_accurate_rendering.png](data/bitbucket.org/repo/jgXqbo/images/3220111716-half_scaled_down_accurate_rendering.png)\r\n\r\nFor testing this world is available here: https://github.com/osrf/uav_testing/tree/master/yosemite_valley", "markup": "markdown", "html": "<p>I created a height map and texture from ground truth data. They were validated as accurately aligned in qgis and similarly scaled. However when I rendered it in gazebo I had to adjust the texture size argument to 6000m from 7700m to render correctly. This number was determined by measuring the scaling difference between features in the rendering. </p>\n<p>First measuring the width. (also note that the depth and texture are both rendered and nicely aligned)</p>\n<p><img alt=\"half_true_width.png\" src=\"data/bitbucket.org/repo/jgXqbo/images/2525364132-half_true_width.png\" /></p>\n<p>The original render</p>\n<div class=\"codehilite\"><pre><span></span>          <span class=\"nt\">&lt;texture&gt;</span>\n            <span class=\"nt\">&lt;diffuse&gt;</span>file://media/textures/yosemite_color.png<span class=\"nt\">&lt;/diffuse&gt;</span>\n            <span class=\"nt\">&lt;normal&gt;</span>file://media/materials/textures/flat_normal.png<span class=\"nt\">&lt;/normal&gt;</span>\n            <span class=\"nt\">&lt;size&gt;</span>7700<span class=\"nt\">&lt;/size&gt;</span>\n          <span class=\"nt\">&lt;/texture&gt;</span>\n</pre></div>\n\n\n<p><img alt=\"half_accurate_width_bad_rendering.png\" src=\"data/bitbucket.org/repo/jgXqbo/images/3075180811-half_accurate_width_bad_rendering.png\" /></p>\n<p>Measuring the offset\n<img alt=\"half_measured_width_to_scale_texture.png\" src=\"data/bitbucket.org/repo/jgXqbo/images/2465943214-half_measured_width_to_scale_texture.png\" /></p>\n<p>Rerendered with </p>\n<div class=\"codehilite\"><pre><span></span>          <span class=\"nt\">&lt;texture&gt;</span>\n            <span class=\"nt\">&lt;diffuse&gt;</span>file://media/textures/yosemite_color.png<span class=\"nt\">&lt;/diffuse&gt;</span>\n            <span class=\"nt\">&lt;normal&gt;</span>file://media/materials/textures/flat_normal.png<span class=\"nt\">&lt;/normal&gt;</span>\n            <span class=\"nt\">&lt;size&gt;</span>6000<span class=\"nt\">&lt;/size&gt;</span>\n          <span class=\"nt\">&lt;/texture&gt;</span>\n</pre></div>\n\n\n<p><img alt=\"half_scaled_down_accurate_rendering.png\" src=\"data/bitbucket.org/repo/jgXqbo/images/3220111716-half_scaled_down_accurate_rendering.png\" /></p>\n<p>For testing this world is available here: <a href=\"https://github.com/osrf/uav_testing/tree/master/yosemite_valley\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/osrf/uav_testing/tree/master/yosemite_valley</a></p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2019-03-08T22:55:09.844297+00:00", "milestone": null, "updated_on": "2019-03-08T22:55:09.844297+00:00", "type": "issue", "id": 2603}