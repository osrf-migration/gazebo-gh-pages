{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2034/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2034.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2034/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2034/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2034/flaky-seg-fault-when-detaching"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2034/vote"}}, "reporter": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "title": "Flaky seg-fault when detaching HarnessPlugin", "component": {"name": "plugins", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/332959.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "The `HarnessPlugin` was added in pull request #2346 released in gazebo 7.3.0. When detaching the harness joint, it can seg-fault due to a race condition. The race condition can be exacerbated by unthrottling the real-time update rate, and can also be avoided by pausing before detaching.\r\n\r\nHere is a backtrace of the relevant threads:\r\n\r\n`World::RunLoop` thread that received the seg-fault\r\n~~~\r\nThread 1 (Thread 0x7f584ebfc700 (LWP 19220)):\r\n#0  0x00007f58b3476c37 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\r\n#1  0x00007f58b347a028 in __GI_abort () at abort.c:89\r\n#2  0x00007f58b346fbf6 in __assert_fail_base (fmt=0x7f58b35c03b8 \"%s%s%s:%u: %s%sAssertion `%s' failed.\\n%n\", assertion=assertion@entry=0x7f584d9f1379 \"px != 0\", file=file@entry=0x7f584d9f0ef0 \"/usr/include/boost/smart_ptr/shared_ptr.hpp\", line=line@entry=653, function=function@entry=0x7f584d9f2900 <boost::shared_ptr<gazebo::physics::Joint>::operator->() const::__PRETTY_FUNCTION__> \"typename boost::detail::sp_member_access<T>::type boost::shared_ptr<T>::operator->() const [with T = gazebo::physics::Joint; typename boost::detail::sp_member_access<T>::type = gazebo::physics::Joint*\"...) at assert.c:92\r\n#3  0x00007f58b346fca2 in __GI___assert_fail (assertion=0x7f584d9f1379 \"px != 0\", file=0x7f584d9f0ef0 \"/usr/include/boost/smart_ptr/shared_ptr.hpp\", line=653, function=0x7f584d9f2900 <boost::shared_ptr<gazebo::physics::Joint>::operator->() const::__PRETTY_FUNCTION__> \"typename boost::detail::sp_member_access<T>::type boost::shared_ptr<T>::operator->() const [with T = gazebo::physics::Joint; typename boost::detail::sp_member_access<T>::type = gazebo::physics::Joint*\"...) at assert.c:101\r\n#4  0x00007f584d9e5a43 in boost::shared_ptr<gazebo::physics::Joint>::operator-> (this=<optimized out>) at /usr/include/boost/smart_ptr/shared_ptr.hpp:653\r\n#5  0x00007f584d9e85ae in operator-> (this=<optimized out>) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/plugins/HarnessPlugin.cc:267\r\n#6  gazebo::HarnessPlugin::OnUpdate (this=0x7f582c008560, _info=...) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/plugins/HarnessPlugin.cc:246\r\n#7  0x00007f58b2eb74b9 in operator() (a0=..., this=<optimized out>) at /usr/include/boost/function/function_template.hpp:767\r\n#8  gazebo::event::EventT<void (gazebo::common::UpdateInfo const&)>::Signal<gazebo::common::UpdateInfo>(gazebo::common::UpdateInfo const&) (this=0x7f58b47498c0 <gazebo::event::Events::worldUpdateBegin>, _p=...) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/common/Event.hh:385\r\n#9  0x00007f58b2ea4681 in operator()<gazebo::common::UpdateInfo> (_p=..., this=<optimized out>) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/common/Event.hh:221\r\n#10 gazebo::physics::World::Update (this=this@entry=0x1cf7760) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/World.cc:725\r\n#11 0x00007f58b2eb246b in gazebo::physics::World::Step (this=this@entry=0x1cf7760) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/World.cc:656\r\n#12 0x00007f58b2eb289d in gazebo::physics::World::RunLoop (this=0x1cf7760) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/World.cc:465\r\n#13 0x00007f58b0ea6a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#14 0x00007f58b2181184 in start_thread (arg=0x7f584ebfc700) at pthread_create.c:312\r\n#15 0x00007f58b353a37d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n~~~\r\n\r\nTransport thread that calls `HarnessPlugin::OnDetach`:\r\n~~~\r\nThread 13 (Thread 0x7f5890b4c700 (LWP 19180)):\r\n#0  boost::variant<bool, char, std::string, int, unsigned long, unsigned int, double, float, sdf::Time, sdf::Color, sdf::Vector3, sdf::Vector2i, sdf::Vector2d, sdf::Quaternion, sdf::Pose, ignition::math::Vector3<double>, ignition::math::Vector2<int>, ignition::math::Vector2<double>, ignition::math::Quaternion<double>, ignition::math::Pose3<double> >::internal_apply_visitor<boost::detail::variant::destroyer> (this=0x7f582c0361b0, visitor=...) at /usr/include/boost/variant/variant.hpp:2337\r\n#1  0x00007f58b1ac5046 in destroy_content (this=0x7f582c0361b0) at /usr/include/boost/variant/variant.hpp:1373\r\n#2  ~variant (this=0x7f582c0361b0, __in_chrg=<optimized out>) at /usr/include/boost/variant/variant.hpp:1380\r\n#3  ~ParamPrivate (this=0x7f582c036120, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Param.hh:204\r\n#4  sdf::Param::~Param (this=0x7f582c035860, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Param.cc:166\r\n#5  0x00007f58b1ac50c9 in sdf::Param::~Param (this=0x7f582c035860, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Param.cc:168\r\n#6  0x00007f58b1a846a2 in _M_release (this=0x7f582c037460) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\r\n#7  ~__shared_count (this=0x7f582c036218, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\r\n#8  ~__shared_ptr (this=0x7f582c036210, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\r\n#9  ~shared_ptr (this=0x7f582c036210, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr.h:93\r\n#10 _Destroy<std::shared_ptr<sdf::Param> > (__pointer=0x7f582c036210) at /usr/include/c++/4.8/bits/stl_construct.h:93\r\n#11 __destroy<std::shared_ptr<sdf::Param>*> (__last=<optimized out>, __first=0x7f582c036210) at /usr/include/c++/4.8/bits/stl_construct.h:103\r\n#12 _Destroy<std::shared_ptr<sdf::Param>*> (__last=<optimized out>, __first=<optimized out>) at /usr/include/c++/4.8/bits/stl_construct.h:126\r\n#13 _Destroy<std::shared_ptr<sdf::Param>*, std::shared_ptr<sdf::Param> > (__last=0x7f582c036220, __first=<optimized out>) at /usr/include/c++/4.8/bits/stl_construct.h:151\r\n#14 ~vector (this=0x7f582c035730, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/stl_vector.h:415\r\n#15 ~ElementPrivate (this=0x7f582c035700, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Element.hh:282\r\n#16 sdf::Element::~Element (this=0x7f582c033bb0, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:34\r\n#17 0x00007f58b1a84a09 in sdf::Element::~Element (this=0x7f582c033bb0, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:36\r\n#18 0x00007f58b1a844d2 in _M_release (this=0x7f582c0357a0) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\r\n#19 ~__shared_count (this=0x7f582c035928, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\r\n#20 ~__shared_ptr (this=0x7f582c035920, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\r\n#21 ~shared_ptr (this=0x7f582c035920, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr.h:93\r\n#22 _Destroy<std::shared_ptr<sdf::Element> > (__pointer=0x7f582c035920) at /usr/include/c++/4.8/bits/stl_construct.h:93\r\n#23 __destroy<std::shared_ptr<sdf::Element>*> (__last=<optimized out>, __first=0x7f582c035920) at /usr/include/c++/4.8/bits/stl_construct.h:103\r\n#24 _Destroy<std::shared_ptr<sdf::Element>*> (__last=<optimized out>, __first=<optimized out>) at /usr/include/c++/4.8/bits/stl_construct.h:126\r\n#25 _Destroy<std::shared_ptr<sdf::Element>*, std::shared_ptr<sdf::Element> > (__last=0x7f582c035930, __first=<optimized out>) at /usr/include/c++/4.8/bits/stl_construct.h:151\r\n#26 ~vector (this=0x7f582c035670, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/stl_vector.h:415\r\n#27 ~ElementPrivate (this=0x7f582c035600, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Element.hh:282\r\n#28 sdf::Element::~Element (this=0x7f582c034110, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:34\r\n#29 0x00007f58b1a84a09 in sdf::Element::~Element (this=0x7f582c034110, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:36\r\n#30 0x00007f58b1a844d2 in _M_release (this=0x7f582c0356a0) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\r\n#31 ~__shared_count (this=0x7f582c034d38, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\r\n#32 ~__shared_ptr (this=0x7f582c034d30, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\r\n#33 ~shared_ptr (this=0x7f582c034d30, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr.h:93\r\n#34 _Destroy<std::shared_ptr<sdf::Element> > (__pointer=0x7f582c034d30) at /usr/include/c++/4.8/bits/stl_construct.h:93\r\n#35 __destroy<std::shared_ptr<sdf::Element>*> (__last=<optimized out>, __first=0x7f582c034d30) at /usr/include/c++/4.8/bits/stl_construct.h:103\r\n#36 _Destroy<std::shared_ptr<sdf::Element>*> (__last=<optimized out>, __first=<optimized out>) at /usr/include/c++/4.8/bits/stl_construct.h:126\r\n#37 _Destroy<std::shared_ptr<sdf::Element>*, std::shared_ptr<sdf::Element> > (__last=0x7f582c034d50, __first=<optimized out>) at /usr/include/c++/4.8/bits/stl_construct.h:151\r\n#38 ~vector (this=0x7f582c033ad0, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/stl_vector.h:415\r\n#39 ~ElementPrivate (this=0x7f582c033a60, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Element.hh:282\r\n#40 sdf::Element::~Element (this=0x7f582c0338e0, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:34\r\n#41 0x00007f58b1a84a09 in sdf::Element::~Element (this=0x7f582c0338e0, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:36\r\n#42 0x00007f58b1a844d2 in _M_release (this=0x7f582c034f90) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\r\n#43 ~__shared_count (this=0x7f582c062078, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\r\n#44 ~__shared_ptr (this=0x7f582c062070, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\r\n#45 ~shared_ptr (this=0x7f582c062070, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr.h:93\r\n#46 _Destroy<std::shared_ptr<sdf::Element> > (__pointer=0x7f582c062070) at /usr/include/c++/4.8/bits/stl_construct.h:93\r\n#47 __destroy<std::shared_ptr<sdf::Element>*> (__last=<optimized out>, __first=0x7f582c062070) at /usr/include/c++/4.8/bits/stl_construct.h:103\r\n#48 _Destroy<std::shared_ptr<sdf::Element>*> (__last=<optimized out>, __first=<optimized out>) at /usr/include/c++/4.8/bits/stl_construct.h:126\r\n#49 _Destroy<std::shared_ptr<sdf::Element>*, std::shared_ptr<sdf::Element> > (__last=0x7f582c062140, __first=<optimized out>) at /usr/include/c++/4.8/bits/stl_construct.h:151\r\n#50 ~vector (this=0x7f582c02d660, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/stl_vector.h:415\r\n#51 ~ElementPrivate (this=0x7f582c02d5f0, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Element.hh:282\r\n#52 sdf::Element::~Element (this=0x7f582c02c5c0, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:34\r\n#53 0x00007f58b1a84a09 in sdf::Element::~Element (this=0x7f582c02c5c0, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:36\r\n#54 0x00007f58b1a844d2 in _M_release (this=0x7f582c02c520) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\r\n#55 ~__shared_count (this=0x7f582c02dc48, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\r\n#56 ~__shared_ptr (this=0x7f582c02dc40, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\r\n#57 ~shared_ptr (this=0x7f582c02dc40, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr.h:93\r\n#58 _Destroy<std::shared_ptr<sdf::Element> > (__pointer=0x7f582c02dc40) at /usr/include/c++/4.8/bits/stl_construct.h:93\r\n#59 __destroy<std::shared_ptr<sdf::Element>*> (__last=<optimized out>, __first=0x7f582c02dc40) at /usr/include/c++/4.8/bits/stl_construct.h:103\r\n#60 _Destroy<std::shared_ptr<sdf::Element>*> (__last=<optimized out>, __first=<optimized out>) at /usr/include/c++/4.8/bits/stl_construct.h:126\r\n#61 _Destroy<std::shared_ptr<sdf::Element>*, std::shared_ptr<sdf::Element> > (__last=0x7f582c02dc50, __first=<optimized out>) at /usr/include/c++/4.8/bits/stl_construct.h:151\r\n#62 ~vector (this=0x7f582c00a400, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/stl_vector.h:415\r\n#63 ~ElementPrivate (this=0x7f582c00a390, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Element.hh:282\r\n#64 sdf::Element::~Element (this=0x7f582c009dc0, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:34\r\n#65 0x00007f58b1a84a09 in sdf::Element::~Element (this=0x7f582c009dc0, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:36\r\n#66 0x00007f58b476b8f9 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release (this=0x7f582c009cb0) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\r\n#67 0x00007f58b2e40962 in ~__shared_count (this=<optimized out>, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\r\n#68 ~__shared_ptr (this=<optimized out>, __in_chrg=<optimized out>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\r\n#69 reset (this=0x7f58b31cd420 <gazebo::physics::Joint::sdfJoint>) at /usr/include/c++/4.8/bits/shared_ptr_base.h:882\r\n#70 gazebo::physics::Joint::Fini (this=this@entry=0x7f582c009e90) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/Joint.cc:426\r\n#71 0x00007f58b2d8e658 in gazebo::physics::ODEJoint::Fini (this=this@entry=0x7f582c009e90) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/ode/ODEJoint.cc:76\r\n#72 0x00007f58b2d8e677 in gazebo::physics::ODEJoint::~ODEJoint (this=0x7f582c009e90, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/ode/ODEJoint.cc:58\r\n#73 0x00007f58b2db68d9 in gazebo::physics::ODESliderJoint::~ODESliderJoint (this=0x7f582c009e90, __in_chrg=<optimized out>) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/ode/ODESliderJoint.cc:46\r\n#74 0x00007f584d9ea0ae in boost::detail::sp_counted_base::release (this=0x7f582c0461c0) at /usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\r\n#75 0x00007f584d9e5a9a in ~shared_count (this=<optimized out>, __in_chrg=<optimized out>) at /usr/include/boost/smart_ptr/detail/shared_count.hpp:371\r\n#76 ~shared_ptr (this=<optimized out>, __in_chrg=<optimized out>) at /usr/include/boost/smart_ptr/shared_ptr.hpp:328\r\n#77 reset (this=<optimized out>) at /usr/include/boost/smart_ptr/shared_ptr.hpp:619\r\n#78 gazebo::HarnessPlugin::Detach (this=0x7f582c008560) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/plugins/HarnessPlugin.cc:273\r\n#79 0x00007f584d9ec125 in operator() (a0=..., this=0x7f582c009ac0) at /usr/include/boost/function/function_template.hpp:767\r\n#80 gazebo::transport::CallbackHelperT<gazebo::msgs::GzString>::HandleData(std::string const&, boost::function<void (unsigned int)>, unsigned int) (this=0x7f582c009a80, _newdata=\"\\n\\004true\", _cb=..., _id=0) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/transport/CallbackHelper.hh:149\r\n#81 0x00007f58b320f8c6 in gazebo::transport::Node::ProcessIncoming (this=0x7f582c0086e0) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/transport/Node.cc:223\r\n#82 0x00007f58b321904b in gazebo::transport::TopicManager::ProcessNodes (this=0x7f58b498bfa0 <SingletonT<gazebo::transport::TopicManager>::GetInstance()::t>, _onlyOut=_onlyOut@entry=false) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/transport/TopicManager.cc:197\r\n#83 0x00007f58b32087b6 in gazebo::transport::ConnectionManager::RunUpdate (this=this@entry=0x7f58b498bda0 <SingletonT<gazebo::transport::ConnectionManager>::GetInstance()::t>) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/transport/ConnectionManager.cc:283\r\n#84 0x00007f58b3208955 in gazebo::transport::ConnectionManager::Run (this=0x7f58b498bda0 <SingletonT<gazebo::transport::ConnectionManager>::GetInstance()::t>) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/transport/ConnectionManager.cc:314\r\n#85 0x00007f58b0ea6a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#86 0x00007f58b2181184 in start_thread (arg=0x7f5890b4c700) at pthread_create.c:312\r\n#87 0x00007f58b353a37d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n~~~", "markup": "markdown", "html": "<p>The <code>HarnessPlugin</code> was added in <a href=\"#!/osrf/gazebo/pull-requests/2346/added-a-harness-plugin\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #2346</a> released in gazebo 7.3.0. When detaching the harness joint, it can seg-fault due to a race condition. The race condition can be exacerbated by unthrottling the real-time update rate, and can also be avoided by pausing before detaching.</p>\n<p>Here is a backtrace of the relevant threads:</p>\n<p><code>World::RunLoop</code> thread that received the seg-fault</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">Thread</span> <span class=\"nt\">1</span> <span class=\"o\">(</span><span class=\"nt\">Thread</span> <span class=\"nt\">0x7f584ebfc700</span> <span class=\"o\">(</span><span class=\"nt\">LWP</span> <span class=\"nt\">19220</span><span class=\"o\">)):</span>\n<span class=\"p\">#</span><span class=\"nn\">0</span>  <span class=\"nt\">0x00007f58b3476c37</span> <span class=\"nt\">in</span> <span class=\"nt\">__GI_raise</span> <span class=\"o\">(</span><span class=\"nt\">sig</span><span class=\"o\">=</span><span class=\"nt\">sig</span><span class=\"p\">@</span><span class=\"k\">entry</span><span class=\"o\">=</span><span class=\"nt\">6</span><span class=\"o\">)</span> <span class=\"nt\">at</span> <span class=\"o\">../</span><span class=\"nt\">nptl</span><span class=\"o\">/</span><span class=\"nt\">sysdeps</span><span class=\"o\">/</span><span class=\"nt\">unix</span><span class=\"o\">/</span><span class=\"nt\">sysv</span><span class=\"o\">/</span><span class=\"nt\">linux</span><span class=\"o\">/</span><span class=\"nt\">raise</span><span class=\"p\">.</span><span class=\"nc\">c</span><span class=\"p\">:</span><span class=\"nd\">56</span>\n<span class=\"p\">#</span><span class=\"nn\">1</span>  <span class=\"nt\">0x00007f58b347a028</span> <span class=\"nt\">in</span> <span class=\"nt\">__GI_abort</span> <span class=\"o\">()</span> <span class=\"nt\">at</span> <span class=\"nt\">abort</span><span class=\"p\">.</span><span class=\"nc\">c</span><span class=\"p\">:</span><span class=\"nd\">89</span>\n<span class=\"p\">#</span><span class=\"nn\">2</span>  <span class=\"nt\">0x00007f58b346fbf6</span> <span class=\"nt\">in</span> <span class=\"nt\">__assert_fail_base</span> <span class=\"o\">(</span><span class=\"nt\">fmt</span><span class=\"o\">=</span><span class=\"nt\">0x7f58b35c03b8</span> <span class=\"s2\">&quot;%s%s%s:%u: %s%sAssertion `%s&#39; failed.\\n%n&quot;</span><span class=\"o\">,</span> <span class=\"nt\">assertion</span><span class=\"o\">=</span><span class=\"nt\">assertion</span><span class=\"p\">@</span><span class=\"k\">entry</span><span class=\"o\">=</span><span class=\"nt\">0x7f584d9f1379</span> <span class=\"s2\">&quot;px != 0&quot;</span><span class=\"o\">,</span> <span class=\"nt\">file</span><span class=\"o\">=</span><span class=\"nt\">file</span><span class=\"p\">@</span><span class=\"k\">entry</span><span class=\"o\">=</span><span class=\"nt\">0x7f584d9f0ef0</span> <span class=\"s2\">&quot;/usr/include/boost/smart_ptr/shared_ptr.hpp&quot;</span><span class=\"o\">,</span> <span class=\"nt\">line</span><span class=\"o\">=</span><span class=\"nt\">line</span><span class=\"p\">@</span><span class=\"k\">entry</span><span class=\"o\">=</span><span class=\"nt\">653</span><span class=\"o\">,</span> <span class=\"nt\">function</span><span class=\"o\">=</span><span class=\"nt\">function</span><span class=\"p\">@</span><span class=\"k\">entry</span><span class=\"o\">=</span><span class=\"nt\">0x7f584d9f2900</span> <span class=\"o\">&lt;</span><span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"nt\">gazebo</span><span class=\"p\">::</span><span class=\"nd\">physics</span><span class=\"p\">::</span><span class=\"nd\">Joint</span><span class=\"o\">&gt;</span><span class=\"p\">::</span><span class=\"nd\">operator-</span><span class=\"o\">&gt;()</span> <span class=\"nt\">const</span><span class=\"p\">::</span><span class=\"nd\">__PRETTY_FUNCTION__</span><span class=\"o\">&gt;</span> <span class=\"err\">&quot;</span><span class=\"nt\">typename</span> <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">detail</span><span class=\"p\">::</span><span class=\"nd\">sp_member_access</span><span class=\"o\">&lt;</span><span class=\"nt\">T</span><span class=\"o\">&gt;</span><span class=\"p\">::</span><span class=\"nd\">type</span> <span class=\"nt\">boost</span><span class=\"p\">::</span><span class=\"nd\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"nt\">T</span><span class=\"o\">&gt;</span><span class=\"p\">::</span><span class=\"nd\">operator-</span><span class=\"o\">&gt;()</span> <span class=\"nt\">const</span> <span class=\"cp\">[</span><span class=\"k\">with</span> <span class=\"n\">T</span><span class=\"o\"> =</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::physics::Joint</span><span class=\"p\">;</span> <span class=\"nx\">typename</span> <span class=\"nx\">boost</span><span class=\"nl\">::detail::sp_member_access</span><span class=\"o\">&lt;</span><span class=\"nx\">T</span><span class=\"o\">&gt;</span><span class=\"nl\">::type</span> <span class=\"o\">=</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::physics::Joint</span><span class=\"o\">*</span><span class=\"s2\">&quot;...) at assert.c:92</span>\n<span class=\"s2\">#3  0x00007f58b346fca2 in __GI___assert_fail (assertion=0x7f584d9f1379 &quot;</span><span class=\"nx\">px</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"s2\">&quot;, file=0x7f584d9f0ef0 &quot;</span><span class=\"p\">/</span><span class=\"nx\">usr</span><span class=\"p\">/</span><span class=\"nb\">include</span><span class=\"p\">/</span><span class=\"nx\">boost</span><span class=\"p\">/</span><span class=\"nx\">smart_ptr</span><span class=\"p\">/</span><span class=\"nx\">shared_ptr.hpp</span><span class=\"s2\">&quot;, line=653, function=0x7f584d9f2900 &lt;boost::shared_ptr&lt;gazebo::physics::Joint&gt;::operator-&gt;() const::__PRETTY_FUNCTION__&gt; &quot;</span><span class=\"nx\">typename</span> <span class=\"nx\">boost</span><span class=\"nl\">::detail::sp_member_access</span><span class=\"o\">&lt;</span><span class=\"nx\">T</span><span class=\"o\">&gt;</span><span class=\"nl\">::type</span> <span class=\"nx\">boost</span><span class=\"nl\">::shared_ptr</span><span class=\"o\">&lt;</span><span class=\"nx\">T</span><span class=\"o\">&gt;</span><span class=\"nl\">::operator</span><span class=\"o\">-&gt;</span><span class=\"p\">()</span> <span class=\"nx\">const</span> <span class=\"err\">[</span><span class=\"k\">with</span> <span class=\"n\">T</span><span class=\"o\"> =</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::physics::Joint</span><span class=\"p\">;</span> <span class=\"nx\">typename</span> <span class=\"nx\">boost</span><span class=\"nl\">::detail::sp_member_access</span><span class=\"o\">&lt;</span><span class=\"nx\">T</span><span class=\"o\">&gt;</span><span class=\"nl\">::type</span> <span class=\"o\">=</span> <span class=\"nx\">gazebo</span><span class=\"nl\">::physics::Joint</span><span class=\"o\">*</span><span class=\"s2\">&quot;...) at assert.c:101</span>\n<span class=\"s2\">#4  0x00007f584d9e5a43 in boost::shared_ptr&lt;gazebo::physics::Joint&gt;::operator-&gt; (this=&lt;optimized out&gt;) at /usr/include/boost/smart_ptr/shared_ptr.hpp:653</span>\n<span class=\"s2\">#5  0x00007f584d9e85ae in operator-&gt; (this=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/plugins/HarnessPlugin.cc:267</span>\n<span class=\"s2\">#6  gazebo::HarnessPlugin::OnUpdate (this=0x7f582c008560, _info=...) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/plugins/HarnessPlugin.cc:246</span>\n<span class=\"s2\">#7  0x00007f58b2eb74b9 in operator() (a0=..., this=&lt;optimized out&gt;) at /usr/include/boost/function/function_template.hpp:767</span>\n<span class=\"s2\">#8  gazebo::event::EventT&lt;void (gazebo::common::UpdateInfo const&amp;)&gt;::Signal&lt;gazebo::common::UpdateInfo&gt;(gazebo::common::UpdateInfo const&amp;) (this=0x7f58b47498c0 &lt;gazebo::event::Events::worldUpdateBegin&gt;, _p=...) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/common/Event.hh:385</span>\n<span class=\"s2\">#9  0x00007f58b2ea4681 in operator()&lt;gazebo::common::UpdateInfo&gt; (_p=..., this=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/common/Event.hh:221</span>\n<span class=\"s2\">#10 gazebo::physics::World::Update (this=this@entry=0x1cf7760) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/World.cc:725</span>\n<span class=\"s2\">#11 0x00007f58b2eb246b in gazebo::physics::World::Step (this=this@entry=0x1cf7760) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/World.cc:656</span>\n<span class=\"s2\">#12 0x00007f58b2eb289d in gazebo::physics::World::RunLoop (this=0x1cf7760) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/World.cc:465</span>\n<span class=\"s2\">#13 0x00007f58b0ea6a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0</span>\n<span class=\"s2\">#14 0x00007f58b2181184 in start_thread (arg=0x7f584ebfc700) at pthread_create.c:312</span>\n<span class=\"s2\">#15 0x00007f58b353a37d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111</span>\n</pre></div>\n\n\n<p>Transport thread that calls <code>HarnessPlugin::OnDetach</code>:</p>\n<div class=\"codehilite\"><pre><span></span>Thread 13 (Thread 0x7f5890b4c700 (LWP 19180)):\n#0  boost::variant&lt;bool, char, std::string, int, unsigned long, unsigned int, double, float, sdf::Time, sdf::Color, sdf::Vector3, sdf::Vector2i, sdf::Vector2d, sdf::Quaternion, sdf::Pose, ignition::math::Vector3&lt;double&gt;, ignition::math::Vector2&lt;int&gt;, ignition::math::Vector2&lt;double&gt;, ignition::math::Quaternion&lt;double&gt;, ignition::math::Pose3&lt;double&gt; &gt;::internal_apply_visitor&lt;boost::detail::variant::destroyer&gt; (this=0x7f582c0361b0, visitor=...) at /usr/include/boost/variant/variant.hpp:2337\n#1  0x00007f58b1ac5046 in destroy_content (this=0x7f582c0361b0) at /usr/include/boost/variant/variant.hpp:1373\n#2  ~variant (this=0x7f582c0361b0, __in_chrg=&lt;optimized out&gt;) at /usr/include/boost/variant/variant.hpp:1380\n#3  ~ParamPrivate (this=0x7f582c036120, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Param.hh:204\n#4  sdf::Param::~Param (this=0x7f582c035860, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Param.cc:166\n#5  0x00007f58b1ac50c9 in sdf::Param::~Param (this=0x7f582c035860, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Param.cc:168\n#6  0x00007f58b1a846a2 in _M_release (this=0x7f582c037460) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\n#7  ~__shared_count (this=0x7f582c036218, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\n#8  ~__shared_ptr (this=0x7f582c036210, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\n#9  ~shared_ptr (this=0x7f582c036210, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr.h:93\n#10 _Destroy&lt;std::shared_ptr&lt;sdf::Param&gt; &gt; (__pointer=0x7f582c036210) at /usr/include/c++/4.8/bits/stl_construct.h:93\n#11 __destroy&lt;std::shared_ptr&lt;sdf::Param&gt;*&gt; (__last=&lt;optimized out&gt;, __first=0x7f582c036210) at /usr/include/c++/4.8/bits/stl_construct.h:103\n#12 _Destroy&lt;std::shared_ptr&lt;sdf::Param&gt;*&gt; (__last=&lt;optimized out&gt;, __first=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_construct.h:126\n#13 _Destroy&lt;std::shared_ptr&lt;sdf::Param&gt;*, std::shared_ptr&lt;sdf::Param&gt; &gt; (__last=0x7f582c036220, __first=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_construct.h:151\n#14 ~vector (this=0x7f582c035730, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_vector.h:415\n#15 ~ElementPrivate (this=0x7f582c035700, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Element.hh:282\n#16 sdf::Element::~Element (this=0x7f582c033bb0, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:34\n#17 0x00007f58b1a84a09 in sdf::Element::~Element (this=0x7f582c033bb0, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:36\n#18 0x00007f58b1a844d2 in _M_release (this=0x7f582c0357a0) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\n#19 ~__shared_count (this=0x7f582c035928, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\n#20 ~__shared_ptr (this=0x7f582c035920, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\n#21 ~shared_ptr (this=0x7f582c035920, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr.h:93\n#22 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt; &gt; (__pointer=0x7f582c035920) at /usr/include/c++/4.8/bits/stl_construct.h:93\n#23 __destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*&gt; (__last=&lt;optimized out&gt;, __first=0x7f582c035920) at /usr/include/c++/4.8/bits/stl_construct.h:103\n#24 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*&gt; (__last=&lt;optimized out&gt;, __first=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_construct.h:126\n#25 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*, std::shared_ptr&lt;sdf::Element&gt; &gt; (__last=0x7f582c035930, __first=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_construct.h:151\n#26 ~vector (this=0x7f582c035670, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_vector.h:415\n#27 ~ElementPrivate (this=0x7f582c035600, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Element.hh:282\n#28 sdf::Element::~Element (this=0x7f582c034110, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:34\n#29 0x00007f58b1a84a09 in sdf::Element::~Element (this=0x7f582c034110, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:36\n#30 0x00007f58b1a844d2 in _M_release (this=0x7f582c0356a0) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\n#31 ~__shared_count (this=0x7f582c034d38, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\n#32 ~__shared_ptr (this=0x7f582c034d30, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\n#33 ~shared_ptr (this=0x7f582c034d30, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr.h:93\n#34 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt; &gt; (__pointer=0x7f582c034d30) at /usr/include/c++/4.8/bits/stl_construct.h:93\n#35 __destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*&gt; (__last=&lt;optimized out&gt;, __first=0x7f582c034d30) at /usr/include/c++/4.8/bits/stl_construct.h:103\n#36 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*&gt; (__last=&lt;optimized out&gt;, __first=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_construct.h:126\n#37 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*, std::shared_ptr&lt;sdf::Element&gt; &gt; (__last=0x7f582c034d50, __first=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_construct.h:151\n#38 ~vector (this=0x7f582c033ad0, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_vector.h:415\n#39 ~ElementPrivate (this=0x7f582c033a60, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Element.hh:282\n#40 sdf::Element::~Element (this=0x7f582c0338e0, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:34\n#41 0x00007f58b1a84a09 in sdf::Element::~Element (this=0x7f582c0338e0, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:36\n#42 0x00007f58b1a844d2 in _M_release (this=0x7f582c034f90) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\n#43 ~__shared_count (this=0x7f582c062078, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\n#44 ~__shared_ptr (this=0x7f582c062070, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\n#45 ~shared_ptr (this=0x7f582c062070, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr.h:93\n#46 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt; &gt; (__pointer=0x7f582c062070) at /usr/include/c++/4.8/bits/stl_construct.h:93\n#47 __destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*&gt; (__last=&lt;optimized out&gt;, __first=0x7f582c062070) at /usr/include/c++/4.8/bits/stl_construct.h:103\n#48 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*&gt; (__last=&lt;optimized out&gt;, __first=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_construct.h:126\n#49 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*, std::shared_ptr&lt;sdf::Element&gt; &gt; (__last=0x7f582c062140, __first=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_construct.h:151\n#50 ~vector (this=0x7f582c02d660, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_vector.h:415\n#51 ~ElementPrivate (this=0x7f582c02d5f0, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Element.hh:282\n#52 sdf::Element::~Element (this=0x7f582c02c5c0, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:34\n#53 0x00007f58b1a84a09 in sdf::Element::~Element (this=0x7f582c02c5c0, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:36\n#54 0x00007f58b1a844d2 in _M_release (this=0x7f582c02c520) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\n#55 ~__shared_count (this=0x7f582c02dc48, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\n#56 ~__shared_ptr (this=0x7f582c02dc40, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\n#57 ~shared_ptr (this=0x7f582c02dc40, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr.h:93\n#58 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt; &gt; (__pointer=0x7f582c02dc40) at /usr/include/c++/4.8/bits/stl_construct.h:93\n#59 __destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*&gt; (__last=&lt;optimized out&gt;, __first=0x7f582c02dc40) at /usr/include/c++/4.8/bits/stl_construct.h:103\n#60 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*&gt; (__last=&lt;optimized out&gt;, __first=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_construct.h:126\n#61 _Destroy&lt;std::shared_ptr&lt;sdf::Element&gt;*, std::shared_ptr&lt;sdf::Element&gt; &gt; (__last=0x7f582c02dc50, __first=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_construct.h:151\n#62 ~vector (this=0x7f582c00a400, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/stl_vector.h:415\n#63 ~ElementPrivate (this=0x7f582c00a390, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/include/sdf/Element.hh:282\n#64 sdf::Element::~Element (this=0x7f582c009dc0, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:34\n#65 0x00007f58b1a84a09 in sdf::Element::~Element (this=0x7f582c009dc0, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/sdformat4-debbuilder/build/sdformat-4.1.1/src/Element.cc:36\n#66 0x00007f58b476b8f9 in std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release (this=0x7f582c009cb0) at /usr/include/c++/4.8/bits/shared_ptr_base.h:144\n#67 0x00007f58b2e40962 in ~__shared_count (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:546\n#68 ~__shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:781\n#69 reset (this=0x7f58b31cd420 &lt;gazebo::physics::Joint::sdfJoint&gt;) at /usr/include/c++/4.8/bits/shared_ptr_base.h:882\n#70 gazebo::physics::Joint::Fini (this=this@entry=0x7f582c009e90) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/Joint.cc:426\n#71 0x00007f58b2d8e658 in gazebo::physics::ODEJoint::Fini (this=this@entry=0x7f582c009e90) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/ode/ODEJoint.cc:76\n#72 0x00007f58b2d8e677 in gazebo::physics::ODEJoint::~ODEJoint (this=0x7f582c009e90, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/ode/ODEJoint.cc:58\n#73 0x00007f58b2db68d9 in gazebo::physics::ODESliderJoint::~ODESliderJoint (this=0x7f582c009e90, __in_chrg=&lt;optimized out&gt;) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/physics/ode/ODESliderJoint.cc:46\n#74 0x00007f584d9ea0ae in boost::detail::sp_counted_base::release (this=0x7f582c0461c0) at /usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:146\n#75 0x00007f584d9e5a9a in ~shared_count (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/boost/smart_ptr/detail/shared_count.hpp:371\n#76 ~shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/boost/smart_ptr/shared_ptr.hpp:328\n#77 reset (this=&lt;optimized out&gt;) at /usr/include/boost/smart_ptr/shared_ptr.hpp:619\n#78 gazebo::HarnessPlugin::Detach (this=0x7f582c008560) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/plugins/HarnessPlugin.cc:273\n#79 0x00007f584d9ec125 in operator() (a0=..., this=0x7f582c009ac0) at /usr/include/boost/function/function_template.hpp:767\n#80 gazebo::transport::CallbackHelperT&lt;gazebo::msgs::GzString&gt;::HandleData(std::string const&amp;, boost::function&lt;void (unsigned int)&gt;, unsigned int) (this=0x7f582c009a80, _newdata=&quot;\\n\\004true&quot;, _cb=..., _id=0) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/transport/CallbackHelper.hh:149\n#81 0x00007f58b320f8c6 in gazebo::transport::Node::ProcessIncoming (this=0x7f582c0086e0) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/transport/Node.cc:223\n#82 0x00007f58b321904b in gazebo::transport::TopicManager::ProcessNodes (this=0x7f58b498bfa0 &lt;SingletonT&lt;gazebo::transport::TopicManager&gt;::GetInstance()::t&gt;, _onlyOut=_onlyOut@entry=false) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/transport/TopicManager.cc:197\n#83 0x00007f58b32087b6 in gazebo::transport::ConnectionManager::RunUpdate (this=this@entry=0x7f58b498bda0 &lt;SingletonT&lt;gazebo::transport::ConnectionManager&gt;::GetInstance()::t&gt;) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/transport/ConnectionManager.cc:283\n#84 0x00007f58b3208955 in gazebo::transport::ConnectionManager::Run (this=0x7f58b498bda0 &lt;SingletonT&lt;gazebo::transport::ConnectionManager&gt;::GetInstance()::t&gt;) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/transport/ConnectionManager.cc:314\n#85 0x00007f58b0ea6a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#86 0x00007f58b2181184 in start_thread (arg=0x7f5890b4c700) at pthread_create.c:312\n#87 0x00007f58b353a37d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2016-08-22T21:02:27.729958+00:00", "milestone": null, "updated_on": "2017-08-16T20:28:57.257252+00:00", "type": "issue", "id": 2034}