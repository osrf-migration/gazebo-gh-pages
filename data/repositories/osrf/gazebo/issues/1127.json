{"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1127/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1127.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1127/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1127/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1127/gazebo-rendering-camera-isvisible-is"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1127/vote"}}, "reporter": {"display_name": "Andrew Hundt", "uuid": "{1e508588-c010-4693-87e5-4923df91390d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1e508588-c010-4693-87e5-4923df91390d%7D"}, "html": {"href": "https://bitbucket.org/%7B1e508588-c010-4693-87e5-4923df91390d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fb975596131ce08ea7e7472f09b8209dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsAH-1.png"}}, "nickname": "ahundt", "type": "user", "account_id": "557058:f565cbf4-e097-4b3f-b4db-4889856f7417"}, "title": "gazebo::rendering::Camera::IsVisible()  is Broken", "component": {"name": "rendering", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122881.json"}}}, "votes": 1, "watches": 2, "content": {"raw": "It appears gazebo::rendering::Camera::IsVisible() is broken for models and joints. I've attached images demonstrating 3 test cases and the code to create them, and the Camera box is selected with the triad in all 3 cases:\r\n\r\n1.  Camera pointing at 2 visible boxes, one with a joint. \r\n      - The sphere attached to the joint and the \"visible\" tagged model component of the sdf are both not marked visible when they should be.\r\n2. Camera pointing at the original start location of the boxes, but the boxes were moved behind the camera box.\r\n      - Both of the boxes are marked visible, when they are not actually visible.\r\n3. Camera rotated ~100 degrees away from the client camera\r\n      - Everything is correctly marked as not visible\r\n\r\nThis seems to mean that the isVisible() function does not update correctly when a human moves models using gzclient. However, I have not tested moving the correctness of moving models in an animation. Perhaps the scene graph isn't updating?\r\n\r\nThe second critical issue here is that isVisible() does not work at all for an entire \"link\", \"visible\" components of links, or \"collision\" components of links. \r\n\r\nIn my use case it is important that individual visible models each be testable with isVisible, because my camera is close to an extremely large object, and so cannot see the complete entity, and I need to verify what links are actually visible in ground truth. Perhaps there is an alternative workaround?\r\n\r\nI am on commit 9e1054fd54b4, with the parent de20d7921de6 on the default branch. \r\n\r\nhttp://gazebosim.org/api/dev/classgazebo_1_1rendering_1_1Camera.html#af0044dea16bbc2733777ed1ca46ba21e", "markup": "markdown", "html": "<p>It appears gazebo::rendering::Camera::IsVisible() is broken for models and joints. I've attached images demonstrating 3 test cases and the code to create them, and the Camera box is selected with the triad in all 3 cases:</p>\n<ol>\n<li>Camera pointing at 2 visible boxes, one with a joint. <ul>\n<li>The sphere attached to the joint and the \"visible\" tagged model component of the sdf are both not marked visible when they should be.</li>\n</ul>\n</li>\n<li>Camera pointing at the original start location of the boxes, but the boxes were moved behind the camera box.<ul>\n<li>Both of the boxes are marked visible, when they are not actually visible.</li>\n</ul>\n</li>\n<li>Camera rotated ~100 degrees away from the client camera<ul>\n<li>Everything is correctly marked as not visible</li>\n</ul>\n</li>\n</ol>\n<p>This seems to mean that the isVisible() function does not update correctly when a human moves models using gzclient. However, I have not tested moving the correctness of moving models in an animation. Perhaps the scene graph isn't updating?</p>\n<p>The second critical issue here is that isVisible() does not work at all for an entire \"link\", \"visible\" components of links, or \"collision\" components of links. </p>\n<p>In my use case it is important that individual visible models each be testable with isVisible, because my camera is close to an extremely large object, and so cannot see the complete entity, and I need to verify what links are actually visible in ground truth. Perhaps there is an alternative workaround?</p>\n<p>I am on commit <a href=\"#!/osrf/gazebo/commits/9e1054fd54b4\" rel=\"nofollow\" class=\"ap-connect-link\">9e1054fd54b4</a>, with the parent <a href=\"#!/osrf/gazebo/commits/de20d7921de6\" rel=\"nofollow\" class=\"ap-connect-link\">de20d7921de6</a> on the default branch. </p>\n<p><a href=\"http://gazebosim.org/api/dev/classgazebo_1_1rendering_1_1Camera.html#af0044dea16bbc2733777ed1ca46ba21e\" rel=\"nofollow\" class=\"ap-connect-link\">http://gazebosim.org/api/dev/classgazebo_1_1rendering_1_1Camera.html#af0044dea16bbc2733777ed1ca46ba21e</a></p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "3.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/100247.json"}}}, "edited_on": null, "created_on": "2014-03-25T22:10:01.412074+00:00", "milestone": null, "updated_on": "2016-09-14T19:45:40.804027+00:00", "type": "issue", "id": 1127}