{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2601/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2601.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2601/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2601/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2601/height-scale-when-using-png-image-as"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2601/vote"}}, "reporter": {"display_name": "R. Omar Chavez Garcia", "uuid": "{bd1d6fd3-7284-4e1f-9b21-dcd1a12a7a7b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bbd1d6fd3-7284-4e1f-9b21-dcd1a12a7a7b%7D"}, "html": {"href": "https://bitbucket.org/%7Bbd1d6fd3-7284-4e1f-9b21-dcd1a12a7a7b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8b14a30147556fb2d7a0d75e93a4499ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsRG-5.png"}}, "nickname": "romarcg", "type": "user", "account_id": "557058:7bb24244-cedd-402e-8269-4efc20babea4"}, "title": "Height scale when using png image as heightmap", "component": {"name": "common", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/138866.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "I have been analysing how gazebo (v7.0) renders a `png` image when included as heightmap in a world file.\r\n\r\nAssuming we have a `513x513 8bit png` where its maximum value is `127` and its minimum `0`. When I indicate the size of the collision/geometry element as `10 10 0.5`:\r\n\r\n```\r\n#!html\r\n\r\n       <collision name=\"collision\">\r\n          <geometry>\r\n            <heightmap>\r\n              <uri>model://worlds/steps.png</uri>\r\n              <size>10 10 0.5</size>\r\n              <pos>0 0 0</pos>\r\n            </heightmap>\r\n          </geometry>\r\n        </collision>\r\n```\r\n*(Note: I indicate the same size in the visual/geometry/heightmap element of the world file)*\r\n\r\nI expect the image to be rendered as a 10 x10m map with a maximum height value of  `0.5` meters. However it maximum height is around `0.25m`. Documentation mentions that the size either for collision or visual elements for a `heightmap` indicates the scale the heightmap to which it will be rendered in gazebo. It properly renders width and length but height seems unreliable. Am I missing something regarding how `Z` element in `size` is treated?\r\n\r\nI have analysed other maps (same png size but different max/min values) and some times I get the height properly rendered, specially when the max value in the png is 255 and I want to render it to 1.0m.", "markup": "markdown", "html": "<p>I have been analysing how gazebo (v7.0) renders a <code>png</code> image when included as heightmap in a world file.</p>\n<p>Assuming we have a <code>513x513 8bit png</code> where its maximum value is <code>127</code> and its minimum <code>0</code>. When I indicate the size of the collision/geometry element as <code>10 10 0.5</code>:</p>\n<div class=\"codehilite language-html\"><pre><span></span>       <span class=\"p\">&lt;</span><span class=\"nt\">collision</span> <span class=\"na\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;collision&quot;</span><span class=\"p\">&gt;</span>\n          <span class=\"p\">&lt;</span><span class=\"nt\">geometry</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;</span><span class=\"nt\">heightmap</span><span class=\"p\">&gt;</span>\n              <span class=\"p\">&lt;</span><span class=\"nt\">uri</span><span class=\"p\">&gt;</span>model://worlds/steps.png<span class=\"p\">&lt;/</span><span class=\"nt\">uri</span><span class=\"p\">&gt;</span>\n              <span class=\"p\">&lt;</span><span class=\"nt\">size</span><span class=\"p\">&gt;</span>10 10 0.5<span class=\"p\">&lt;/</span><span class=\"nt\">size</span><span class=\"p\">&gt;</span>\n              <span class=\"p\">&lt;</span><span class=\"nt\">pos</span><span class=\"p\">&gt;</span>0 0 0<span class=\"p\">&lt;/</span><span class=\"nt\">pos</span><span class=\"p\">&gt;</span>\n            <span class=\"p\">&lt;/</span><span class=\"nt\">heightmap</span><span class=\"p\">&gt;</span>\n          <span class=\"p\">&lt;/</span><span class=\"nt\">geometry</span><span class=\"p\">&gt;</span>\n        <span class=\"p\">&lt;/</span><span class=\"nt\">collision</span><span class=\"p\">&gt;</span>\n</pre></div>\n\n\n<p><em>(Note: I indicate the same size in the visual/geometry/heightmap element of the world file)</em></p>\n<p>I expect the image to be rendered as a 10 x10m map with a maximum height value of  <code>0.5</code> meters. However it maximum height is around <code>0.25m</code>. Documentation mentions that the size either for collision or visual elements for a <code>heightmap</code> indicates the scale the heightmap to which it will be rendered in gazebo. It properly renders width and length but height seems unreliable. Am I missing something regarding how <code>Z</code> element in <code>size</code> is treated?</p>\n<p>I have analysed other maps (same png size but different max/min values) and some times I get the height properly rendered, specially when the max value in the png is 255 and I want to render it to 1.0m.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "7.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242744.json"}}}, "edited_on": null, "created_on": "2019-02-26T10:29:27.745156+00:00", "milestone": null, "updated_on": "2019-02-26T22:26:52.097743+00:00", "type": "issue", "id": 2601}