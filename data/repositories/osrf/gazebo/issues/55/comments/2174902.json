{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/55/comments/2174902.json"}, "html": {"href": "#!/osrf/gazebo/issues/55#comment-2174902"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/55.json"}}, "type": "issue", "id": 55, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Deleting pr2 model causes segmentation fault"}, "content": {"raw": "in latest default branch (1.2.0), deletion is fixed, but segfaults upon re-spawn of the PR2 model.\n\n\n    Program received signal SIGSEGV, Segmentation fault.\n    0x00007fcd6a7cc280 in Opcode::RayCollider::Collide (this=0x289f488, world_ray=..., \n        model=..., world=0x7fff590ad0a0, cache=0x0)\n        at /home/hsu/projects/gazebo_john/deps/opende/OPCODE/OPC_RayCollider.cpp:301\n    301\t\t\t\tmCenterCoeff\t= Tree->mCenterCoeff;\n    (gdb) bt\n    #0  0x00007fcd6a7cc280 in Opcode::RayCollider::Collide (this=0x289f488, \n        world_ray=..., model=..., world=0x7fff590ad0a0, cache=0x0)\n        at /home/hsu/projects/gazebo_john/deps/opende/OPCODE/OPC_RayCollider.cpp:301\n    #1  0x00007fcd6e54d7b5 in dCollideRTL (g1=0x7fcd30fe9640, RayGeom=0x7fcd31e8f920, \n        Flags=1, Contacts=0x7fff590ad300, Stride=96)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_trimesh_ray.cpp:79\n    #2  0x00007fcd6e531b3e in dCollide (o1=0x7fcd31e8f920, o2=0x7fcd30fe9640, flags=1, \n        contact=0x7fff590ad300, skip=96)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_kernel.cpp:320\n    #3  0x00007fcd6e069257 in gazebo::physics::ODEMultiRayShape::UpdateCallback (\n        _data=0x7fcd31464ba0, _o1=0x7fcd31e8f920, _o2=0x7fcd30fe9640)\n        at /home/hsu/projects/gazebo_john/gazebo/physics/ode/ODEMultiRayShape.cc:150\n    #4  0x00007fcd6e53b11f in swap_callback (data=0x7fff590ad4b0, g1=0x7fcd30fe9640, \n        g2=0x7fcd31e8f920)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:774\n    #5  0x00007fcd6e539649 in collideAABBs (g1=0x7fcd30fe9640, g2=0x7fcd31e8f920, \n        data=0x7fff590ad4b0, \n        callback=0x7fcd6e53b0e3 <swap_callback(void*, dxGeom*, dxGeom*)>)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space_internal.h:81\n    #6  0x00007fcd6e539ff6 in dxSimpleSpace::collide2 (this=0x7fcd30fec5f0, \n        _data=0x7fff590ad4b0, geom=0x7fcd31e8f920, \n        callback=0x7fcd6e53b0e3 <swap_callback(void*, dxGeom*, dxGeom*)>)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:288\n    #7  0x00007fcd6e53b356 in dSpaceCollide2 (g1=0x7fcd31e8f920, g2=0x7fcd30fec5f0, \n        data=0x7fcd31464ba0, \n        callback=0x7fcd6e068eea <gazebo::physics::ODEMultiRayShape::UpdateCallback(void*, dxGeom*, dxGeom*)>)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:833\n    #8  0x00007fcd6e06905e in gazebo::physics::ODEMultiRayShape::UpdateCallback (\n        _data=0x7fcd31464ba0, _o1=0x7fcd31e8f920, _o2=0x7fcd30fec5f0)\n        at /home/hsu/projects/gazebo_john/gazebo/physics/ode/ODEMultiRayShape.cc:98\n    #9  0x00007fcd6e539649 in collideAABBs (g1=0x7fcd31e8f920, g2=0x7fcd30fec5f0, \n        data=0x7fcd31464ba0, \n        callback=0x7fcd6e068eea <gazebo::physics::ODEMultiRayShape::UpdateCallback(void*, dxGeom*, dxGeom*)>)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space_internal.h:81\n    #10 0x00007fcd6e539ff6 in dxSimpleSpace::collide2 (this=0x7fcd31464fc0, \n        _data=0x7fcd31464ba0, geom=0x7fcd30fec5f0, \n        callback=0x7fcd6e068eea <gazebo::physics::ODEMultiRayShape::UpdateCallback(void*, dxGeom*, dxGeom*)>)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:288\n    #11 0x00007fcd6e53b2d5 in dSpaceCollide2 (g1=0x7fcd31464fc0, g2=0x7fcd300958c0, \n        data=0x7fcd31464ba0, \n        callback=0x7fcd6e068eea <gazebo::physics::ODEMultiRayShape::UpdateCallback(void*, dxGeom*, dxGeom*)>)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:819\n    #12 0x00007fcd6e068fe5 in gazebo::physics::ODEMultiRayShape::UpdateCallback (\n        _data=0x7fcd31464ba0, _o1=0x7fcd31464fc0, _o2=0x7fcd300958c0)\n        at /home/hsu/projects/gazebo_john/gazebo/physics/ode/ODEMultiRayShape.cc:94\n    #13 0x00007fcd6e53b11f in swap_callback (data=0x7fff590ad8d0, g1=0x7fcd300958c0, \n        g2=0x7fcd31464fc0)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:774\n    #14 0x00007fcd6e539649 in collideAABBs (g1=0x7fcd300958c0, g2=0x7fcd31464fc0, \n        data=0x7fff590ad8d0, \n        callback=0x7fcd6e53b0e3 <swap_callback(void*, dxGeom*, dxGeom*)>)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space_internal.h:81\n    #15 0x00007fcd6e53ada0 in dxHashSpace::collide2 (this=0x289f770, \n        _data=0x7fff590ad8d0, geom=0x7fcd31464fc0, \n        callback=0x7fcd6e53b0e3 <swap_callback(void*, dxGeom*, dxGeom*)>)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:610\n    #16 0x00007fcd6e53b283 in dSpaceCollide2 (g1=0x7fcd31464ec0, g2=0x289f770, \n        data=0x7fcd31464ba0, \n        callback=0x7fcd6e068eea <gazebo::physics::ODEMultiRayShape::UpdateCallback(void*, dxGeom*, dxGeom*)>)\n        at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:814\n    #17 0x00007fcd6e068e4d in gazebo::physics::ODEMultiRayShape::UpdateRays (\n        this=0x7fcd31464ba0)\n        at /home/hsu/projects/gazebo_john/gazebo/physics/ode/ODEMultiRayShape.cc:74\n    #18 0x00007fcd71cc9cd1 in gazebo::physics::MultiRayShape::Update (\n        this=0x7fcd31464ba0)\n        at /home/hsu/projects/gazebo_john/gazebo/physics/MultiRayShape.cc:165\n    #19 0x00007fcd718c8f51 in gazebo::sensors::RaySensor::UpdateImpl (\n        this=0x7fcd30047bb0)\n        at /home/hsu/projects/gazebo_john/gazebo/sensors/RaySensor.cc:242\n    #20 0x00007fcd718abfca in gazebo::sensors::Sensor::Update (this=0x7fcd30047bb0, \n        _force=true) at /home/hsu/projects/gazebo_john/gazebo/sensors/Sensor.cc:130\n    #21 0x00007fcd718b9ea6 in gazebo::sensors::SensorManager::Update (\n        this=0x7fcd71f750a0, force=true)\n        at /home/hsu/projects/gazebo_john/gazebo/sensors/SensorManager.cc:100\n    #22 0x00007fcd718a811d in gazebo::sensors::run_once (_force=true)\n        at /home/hsu/projects/gazebo_john/gazebo/sensors/Sensors.cc:88\n    #23 0x0000000000464f73 in gazebo::Server::Run (this=0x2416c50)\n        at /home/hsu/projects/gazebo_john/gazebo/Server.cc:294\n    #24 0x000000000046175e in main (argc=1, argv=0x7fff590adf08)\n        at /home/hsu/projects/gazebo_john/gazebo/server_main.cc:26\n    (gdb) \n", "markup": "markdown", "html": "<p>in latest default branch (1.2.0), deletion is fixed, but segfaults upon re-spawn of the PR2 model.</p>\n<div class=\"codehilite\"><pre><span></span>Program received signal SIGSEGV, Segmentation fault.\n0x00007fcd6a7cc280 in Opcode::RayCollider::Collide (this=0x289f488, world_ray=..., \n    model=..., world=0x7fff590ad0a0, cache=0x0)\n    at /home/hsu/projects/gazebo_john/deps/opende/OPCODE/OPC_RayCollider.cpp:301\n301             mCenterCoeff    = Tree-&gt;mCenterCoeff;\n(gdb) bt\n#0  0x00007fcd6a7cc280 in Opcode::RayCollider::Collide (this=0x289f488, \n    world_ray=..., model=..., world=0x7fff590ad0a0, cache=0x0)\n    at /home/hsu/projects/gazebo_john/deps/opende/OPCODE/OPC_RayCollider.cpp:301\n#1  0x00007fcd6e54d7b5 in dCollideRTL (g1=0x7fcd30fe9640, RayGeom=0x7fcd31e8f920, \n    Flags=1, Contacts=0x7fff590ad300, Stride=96)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_trimesh_ray.cpp:79\n#2  0x00007fcd6e531b3e in dCollide (o1=0x7fcd31e8f920, o2=0x7fcd30fe9640, flags=1, \n    contact=0x7fff590ad300, skip=96)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_kernel.cpp:320\n#3  0x00007fcd6e069257 in gazebo::physics::ODEMultiRayShape::UpdateCallback (\n    _data=0x7fcd31464ba0, _o1=0x7fcd31e8f920, _o2=0x7fcd30fe9640)\n    at /home/hsu/projects/gazebo_john/gazebo/physics/ode/ODEMultiRayShape.cc:150\n#4  0x00007fcd6e53b11f in swap_callback (data=0x7fff590ad4b0, g1=0x7fcd30fe9640, \n    g2=0x7fcd31e8f920)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:774\n#5  0x00007fcd6e539649 in collideAABBs (g1=0x7fcd30fe9640, g2=0x7fcd31e8f920, \n    data=0x7fff590ad4b0, \n    callback=0x7fcd6e53b0e3 &lt;swap_callback(void*, dxGeom*, dxGeom*)&gt;)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space_internal.h:81\n#6  0x00007fcd6e539ff6 in dxSimpleSpace::collide2 (this=0x7fcd30fec5f0, \n    _data=0x7fff590ad4b0, geom=0x7fcd31e8f920, \n    callback=0x7fcd6e53b0e3 &lt;swap_callback(void*, dxGeom*, dxGeom*)&gt;)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:288\n#7  0x00007fcd6e53b356 in dSpaceCollide2 (g1=0x7fcd31e8f920, g2=0x7fcd30fec5f0, \n    data=0x7fcd31464ba0, \n    callback=0x7fcd6e068eea &lt;gazebo::physics::ODEMultiRayShape::UpdateCallback(void*, dxGeom*, dxGeom*)&gt;)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:833\n#8  0x00007fcd6e06905e in gazebo::physics::ODEMultiRayShape::UpdateCallback (\n    _data=0x7fcd31464ba0, _o1=0x7fcd31e8f920, _o2=0x7fcd30fec5f0)\n    at /home/hsu/projects/gazebo_john/gazebo/physics/ode/ODEMultiRayShape.cc:98\n#9  0x00007fcd6e539649 in collideAABBs (g1=0x7fcd31e8f920, g2=0x7fcd30fec5f0, \n    data=0x7fcd31464ba0, \n    callback=0x7fcd6e068eea &lt;gazebo::physics::ODEMultiRayShape::UpdateCallback(void*, dxGeom*, dxGeom*)&gt;)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space_internal.h:81\n#10 0x00007fcd6e539ff6 in dxSimpleSpace::collide2 (this=0x7fcd31464fc0, \n    _data=0x7fcd31464ba0, geom=0x7fcd30fec5f0, \n    callback=0x7fcd6e068eea &lt;gazebo::physics::ODEMultiRayShape::UpdateCallback(void*, dxGeom*, dxGeom*)&gt;)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:288\n#11 0x00007fcd6e53b2d5 in dSpaceCollide2 (g1=0x7fcd31464fc0, g2=0x7fcd300958c0, \n    data=0x7fcd31464ba0, \n    callback=0x7fcd6e068eea &lt;gazebo::physics::ODEMultiRayShape::UpdateCallback(void*, dxGeom*, dxGeom*)&gt;)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:819\n#12 0x00007fcd6e068fe5 in gazebo::physics::ODEMultiRayShape::UpdateCallback (\n    _data=0x7fcd31464ba0, _o1=0x7fcd31464fc0, _o2=0x7fcd300958c0)\n    at /home/hsu/projects/gazebo_john/gazebo/physics/ode/ODEMultiRayShape.cc:94\n#13 0x00007fcd6e53b11f in swap_callback (data=0x7fff590ad8d0, g1=0x7fcd300958c0, \n    g2=0x7fcd31464fc0)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:774\n#14 0x00007fcd6e539649 in collideAABBs (g1=0x7fcd300958c0, g2=0x7fcd31464fc0, \n    data=0x7fff590ad8d0, \n    callback=0x7fcd6e53b0e3 &lt;swap_callback(void*, dxGeom*, dxGeom*)&gt;)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space_internal.h:81\n#15 0x00007fcd6e53ada0 in dxHashSpace::collide2 (this=0x289f770, \n    _data=0x7fff590ad8d0, geom=0x7fcd31464fc0, \n    callback=0x7fcd6e53b0e3 &lt;swap_callback(void*, dxGeom*, dxGeom*)&gt;)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:610\n#16 0x00007fcd6e53b283 in dSpaceCollide2 (g1=0x7fcd31464ec0, g2=0x289f770, \n    data=0x7fcd31464ba0, \n    callback=0x7fcd6e068eea &lt;gazebo::physics::ODEMultiRayShape::UpdateCallback(void*, dxGeom*, dxGeom*)&gt;)\n    at /home/hsu/projects/gazebo_john/deps/opende/src/collision_space.cpp:814\n#17 0x00007fcd6e068e4d in gazebo::physics::ODEMultiRayShape::UpdateRays (\n    this=0x7fcd31464ba0)\n    at /home/hsu/projects/gazebo_john/gazebo/physics/ode/ODEMultiRayShape.cc:74\n#18 0x00007fcd71cc9cd1 in gazebo::physics::MultiRayShape::Update (\n    this=0x7fcd31464ba0)\n    at /home/hsu/projects/gazebo_john/gazebo/physics/MultiRayShape.cc:165\n#19 0x00007fcd718c8f51 in gazebo::sensors::RaySensor::UpdateImpl (\n    this=0x7fcd30047bb0)\n    at /home/hsu/projects/gazebo_john/gazebo/sensors/RaySensor.cc:242\n#20 0x00007fcd718abfca in gazebo::sensors::Sensor::Update (this=0x7fcd30047bb0, \n    _force=true) at /home/hsu/projects/gazebo_john/gazebo/sensors/Sensor.cc:130\n#21 0x00007fcd718b9ea6 in gazebo::sensors::SensorManager::Update (\n    this=0x7fcd71f750a0, force=true)\n    at /home/hsu/projects/gazebo_john/gazebo/sensors/SensorManager.cc:100\n#22 0x00007fcd718a811d in gazebo::sensors::run_once (_force=true)\n    at /home/hsu/projects/gazebo_john/gazebo/sensors/Sensors.cc:88\n#23 0x0000000000464f73 in gazebo::Server::Run (this=0x2416c50)\n    at /home/hsu/projects/gazebo_john/gazebo/Server.cc:294\n#24 0x000000000046175e in main (argc=1, argv=0x7fff590adf08)\n    at /home/hsu/projects/gazebo_john/gazebo/server_main.cc:26\n(gdb)\n</pre></div>", "type": "rendered"}, "created_on": "2012-10-17T00:36:12.191127+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 2174902}