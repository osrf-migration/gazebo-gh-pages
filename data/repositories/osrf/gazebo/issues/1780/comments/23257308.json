{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1780/comments/23257308.json"}, "html": {"href": "#!/osrf/gazebo/issues/1780#comment-23257308"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1780.json"}}, "type": "issue", "id": 1780, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "ODE collision space not deleted when model is removed from the world"}, "content": {"raw": "@iche033 No problem, I really need this to work so my motives are rather selfish ;).\n\nI just realized there might be some issues with applying these patches. I am working on a custom branch which I tend to merge with the last stable tag of Gazebo available (currently it's 6.5.1) to fix any and all issues I run into when I find them. Especially the first patch was from before I merged 6.5.1 though so it might be hard to integrate. In addition I've some other fixes and workarounds in place in order to, frankly, just get this to work.\n\nThe truth is that fixing this issue does not even matter without some of the other fixes I implemented:\n\n- Issue #1142 (I replaced Entity::parentEntity with a weak pointer to prevent reference loops)\n- When links are connected with joints, the link <- joint -> link also results in a circular reference. I found that in order for things to be properly deleted you need to:\n    - Change the `Link` joint lists to use weak pointer (either that or change the `Joint` link references to use weak pointers, but the latter is more work and affects all joint implementations in all physics engines).\n    - Change `JointControllerPrivate::model` and `Joint::model` to weak pointers\n\nI want to share all these but I've both limited time and limited knowledge of Mercurial so I'm not sure how to approach this.", "markup": "markdown", "html": "<p>@iche033 No problem, I really need this to work so my motives are rather selfish ;).</p>\n<p>I just realized there might be some issues with applying these patches. I am working on a custom branch which I tend to merge with the last stable tag of Gazebo available (currently it's 6.5.1) to fix any and all issues I run into when I find them. Especially the first patch was from before I merged 6.5.1 though so it might be hard to integrate. In addition I've some other fixes and workarounds in place in order to, frankly, just get this to work.</p>\n<p>The truth is that fixing this issue does not even matter without some of the other fixes I implemented:</p>\n<ul>\n<li>Issue <a href=\"#!/osrf/gazebo/issues/1142/potential-for-smart-pointer-reference\" rel=\"nofollow\" title=\"Potential for smart pointer reference loops in physics::Base\" class=\"ap-connect-link\">#1142</a> (I replaced Entity::parentEntity with a weak pointer to prevent reference loops)</li>\n<li>When links are connected with joints, the link &lt;- joint -&gt; link also results in a circular reference. I found that in order for things to be properly deleted you need to:<ul>\n<li>Change the <code>Link</code> joint lists to use weak pointer (either that or change the <code>Joint</code> link references to use weak pointers, but the latter is more work and affects all joint implementations in all physics engines).</li>\n<li>Change <code>JointControllerPrivate::model</code> and <code>Joint::model</code> to weak pointers</li>\n</ul>\n</li>\n</ul>\n<p>I want to share all these but I've both limited time and limited knowledge of Mercurial so I'm not sure how to approach this.</p>", "type": "rendered"}, "created_on": "2015-11-12T13:25:33.117548+00:00", "user": {"display_name": "Elte Hupkes", "uuid": "{f23aa1a9-ae57-493f-8169-fbb59b3eae43}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bf23aa1a9-ae57-493f-8169-fbb59b3eae43%7D"}, "html": {"href": "https://bitbucket.org/%7Bf23aa1a9-ae57-493f-8169-fbb59b3eae43%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8560ee94d50ba277c411499a45b3d732d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsEH-5.png"}}, "nickname": "ElteHupkes", "type": "user", "account_id": "557058:b758f523-bdaa-4718-964c-03b825bdea8d"}, "updated_on": "2015-11-12T13:26:55.543679+00:00", "type": "issue_comment", "id": 23257308}