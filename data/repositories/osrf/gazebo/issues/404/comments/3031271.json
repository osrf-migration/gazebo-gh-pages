{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/404/comments/3031271.json"}, "html": {"href": "#!/osrf/gazebo/issues/404#comment-3031271"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/404.json"}}, "type": "issue", "id": 404, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "collada texture transparency bug"}, "content": {"raw": "When setting scene blend to alpha blend and disabling depth write through a material script [1] the texture's transparency gets visualized correctly and solid objects behind transparent parts of the model show up correctly (see http://i.imgur.com/M8zP9yj.png). The only problem that persists is incorrect ordering of transparent parts within a model (multiple models with transparent parts occlude each other correctly, but transparent parts within the same model don't get ordered correctly and distant transparent parts are often rendered in front of closer parts, see above image). When rendering with depth write on (instead of off) faces with transparent textures are rendered in the correct order but the transparent parts of their texture ignores other transparent objects behind it and it also seems to ignore textured models (see http://i.imgur.com/vM7Iln0.png ... the textured polaris gets incorrectly occluded while the non-textured polaris shows up correctly). And last but not least the tree with alpha blending disabled (which is the way the model is loaded without explicitly specifying it through a materials script): http://i.imgur.com/x9BmRqE.png\n\nSo there seems to be two problems:\n\n- For models with transparent textures alpha blending needs to be turned on and depth write needs to be turned off.\n\n- There doesn't seem to be an easy fix for the sorting problem as Ogre apparently only sorts by entities (models) and not by faces which causes transparent faces within a model and intersecting models with transparent faces to be rendered in random (? or at least incorrect) order. \n\n[1] http://www.ogre3d.org/tikiwiki/tiki-index.php?page=-material#Transparency", "markup": "markdown", "html": "<p>When setting scene blend to alpha blend and disabling depth write through a material script [1] the texture's transparency gets visualized correctly and solid objects behind transparent parts of the model show up correctly (see <a href=\"http://i.imgur.com/M8zP9yj.png\" rel=\"nofollow\" class=\"ap-connect-link\">http://i.imgur.com/M8zP9yj.png</a>). The only problem that persists is incorrect ordering of transparent parts within a model (multiple models with transparent parts occlude each other correctly, but transparent parts within the same model don't get ordered correctly and distant transparent parts are often rendered in front of closer parts, see above image). When rendering with depth write on (instead of off) faces with transparent textures are rendered in the correct order but the transparent parts of their texture ignores other transparent objects behind it and it also seems to ignore textured models (see <a href=\"http://i.imgur.com/vM7Iln0.png\" rel=\"nofollow\" class=\"ap-connect-link\">http://i.imgur.com/vM7Iln0.png</a> ... the textured polaris gets incorrectly occluded while the non-textured polaris shows up correctly). And last but not least the tree with alpha blending disabled (which is the way the model is loaded without explicitly specifying it through a materials script): <a href=\"http://i.imgur.com/x9BmRqE.png\" rel=\"nofollow\" class=\"ap-connect-link\">http://i.imgur.com/x9BmRqE.png</a></p>\n<p>So there seems to be two problems:</p>\n<ul>\n<li>\n<p>For models with transparent textures alpha blending needs to be turned on and depth write needs to be turned off.</p>\n</li>\n<li>\n<p>There doesn't seem to be an easy fix for the sorting problem as Ogre apparently only sorts by entities (models) and not by faces which causes transparent faces within a model and intersecting models with transparent faces to be rendered in random (? or at least incorrect) order. </p>\n</li>\n</ul>\n<p>[1] <a href=\"http://www.ogre3d.org/tikiwiki/tiki-index.php?page=-material#Transparency\" rel=\"nofollow\" class=\"ap-connect-link\">http://www.ogre3d.org/tikiwiki/tiki-index.php?page=-material#Transparency</a></p>", "type": "rendered"}, "created_on": "2013-02-04T10:42:30.665832+00:00", "user": {"display_name": "Thomas Koletschka", "uuid": "{b33092ac-6376-48d1-9803-d9e6de445d1a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bb33092ac-6376-48d1-9803-d9e6de445d1a%7D"}, "html": {"href": "https://bitbucket.org/%7Bb33092ac-6376-48d1-9803-d9e6de445d1a%7D/"}, "avatar": {"href": "https://bitbucket.org/account/thomasko/avatar/"}}, "nickname": "thomasko", "type": "user", "account_id": null}, "updated_on": null, "type": "issue_comment", "id": 3031271}