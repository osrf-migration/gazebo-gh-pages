{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1278/comments/18702711.json"}, "html": {"href": "#!/osrf/gazebo/issues/1278#comment-18702711"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1278.json"}}, "type": "issue", "id": 1278, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "support fixed joint types in Gazebo"}, "content": {"raw": "I had some time to spent on this and I decided to go on and implement the fixed joint support also on the other physics engine, because the amount of physics engine-specific code necessary was surprisingly limited.\n\n## Simbody\nSimbody implementation seems to work fine, using `SimTK::MobilizedBody::Weld`.\n\n## DART\nDART was implemented using `dart::dynamics::WeldJoint` and it seems to work fine.\n\n## ODE \nODE was implemented using the `Fixed` joint. If for any reason this fixed joint is more unstable than the Hinge joint with 0 max and min limits that we use now, we can use the hinge joint even for implementing `ODEFixedJoint`.\n\n## Bullet \nI used `btGeneric6DofSpringConstraint` with all limits set to 0, mainly because there is a comment in bullet source code that mentions problems with the `btFixedConstraint` [1]. I don't know if this problems are fixed in `btGeneric6DofSpringConstraint` or just in `btGeneric6DofSpring2Constraint`, but adding support for `btGeneric6DofSpring2Constraint` if we use Bullet 2.83 will be trivial. \n\nCurrently the `BulletFixedJoint::GetForceTorque` function is returning `NaN`, so the branch is still not ready for opening a PR, but for anyone interested is already available at https://bitbucket.org/traversaro/gazebo-fork/branch/issue_1278 .\n\n[1] : https://github.com/bulletphysics/bullet3/blob/master/examples/Importers/ImportURDFDemo/URDF2Bullet.cpp#L304", "markup": "markdown", "html": "<p>I had some time to spent on this and I decided to go on and implement the fixed joint support also on the other physics engine, because the amount of physics engine-specific code necessary was surprisingly limited.</p>\n<h2 id=\"markdown-header-simbody\">Simbody</h2>\n<p>Simbody implementation seems to work fine, using <code>SimTK::MobilizedBody::Weld</code>.</p>\n<h2 id=\"markdown-header-dart\">DART</h2>\n<p>DART was implemented using <code>dart::dynamics::WeldJoint</code> and it seems to work fine.</p>\n<h2 id=\"markdown-header-ode\">ODE</h2>\n<p>ODE was implemented using the <code>Fixed</code> joint. If for any reason this fixed joint is more unstable than the Hinge joint with 0 max and min limits that we use now, we can use the hinge joint even for implementing <code>ODEFixedJoint</code>.</p>\n<h2 id=\"markdown-header-bullet\">Bullet</h2>\n<p>I used <code>btGeneric6DofSpringConstraint</code> with all limits set to 0, mainly because there is a comment in bullet source code that mentions problems with the <code>btFixedConstraint</code> [1]. I don't know if this problems are fixed in <code>btGeneric6DofSpringConstraint</code> or just in <code>btGeneric6DofSpring2Constraint</code>, but adding support for <code>btGeneric6DofSpring2Constraint</code> if we use Bullet 2.83 will be trivial. </p>\n<p>Currently the <code>BulletFixedJoint::GetForceTorque</code> function is returning <code>NaN</code>, so the branch is still not ready for opening a PR, but for anyone interested is already available at <a href=\"https://bitbucket.org/traversaro/gazebo-fork/branch/issue_1278\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/traversaro/gazebo-fork/branch/issue_1278</a> .</p>\n<p>[1] : <a href=\"https://github.com/bulletphysics/bullet3/blob/master/examples/Importers/ImportURDFDemo/URDF2Bullet.cpp#L304\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/bulletphysics/bullet3/blob/master/examples/Importers/ImportURDFDemo/URDF2Bullet.cpp#L304</a></p>", "type": "rendered"}, "created_on": "2015-06-09T22:36:01.534008+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": null, "type": "issue_comment", "id": 18702711}