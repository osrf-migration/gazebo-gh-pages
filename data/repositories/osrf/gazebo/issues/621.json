{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/621/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/621.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/621/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/621/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/621/current-sensor_test-fails-without-a"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/621/vote"}}, "reporter": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "title": "Current Sensor_TEST fails without a display", "component": null, "votes": 0, "watches": 1, "content": {"raw": "When running the test suite in a machine without a display, it can not run properly the Sensor_TEST (see [default devel 285 jenkins job](http://build.osrfoundation.org/job/gazebo-default-devel-precise-amd64/285/consoleFull) and [default devel 284 jenkins job](http://build.osrfoundation.org/job/gazebo-default-devel-precise-amd64/284/consoleFull))\r\n\r\nError:\r\n```\r\n81: Error [RenderEngine.cc:608] Can't open display: \r\n81: Warning [RenderEngine.cc:87] Unable to create X window. Rendering will be disabled\r\n81: Warning [ServerFixture.hh:141] ServerFixture load in 0.18 seconds, timeout after 60 seconds\r\n81: /home/yos/code/gazebo/gazebo/sensors/Sensor_TEST.cc:158: Failure\r\n81: Value of: sensor != NULL\r\n81:   Actual: false\r\n81: Expected: true\r\n81: Error [SensorManager.cc:330] Unable to remove sensor[default::hokuyo::link::laser] because it does not exist.\r\n```\r\n\r\nLooks like the SensorManager is returning null pointer when trying to get the hokuyo sensor defined in the world file. This does not happen when running with a valid display.\r\n\r\nMost obvious fix is moved it to gz_build_gui_test but I want to be sure that this is expected by design.", "markup": "markdown", "html": "<p>When running the test suite in a machine without a display, it can not run properly the Sensor_TEST (see <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-default-devel-precise-amd64/285/consoleFull\" rel=\"nofollow\">default devel 285 jenkins job</a> and <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-default-devel-precise-amd64/284/consoleFull\" rel=\"nofollow\">default devel 284 jenkins job</a>)</p>\n<p>Error:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">81</span><span class=\"o\">:</span> <span class=\"n\">Error</span> <span class=\"o\">[</span><span class=\"n\">RenderEngine</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">608</span><span class=\"o\">]</span> <span class=\"n\">Can</span><span class=\"err\">&#39;</span><span class=\"n\">t</span> <span class=\"n\">open</span> <span class=\"n\">display</span><span class=\"o\">:</span> \n<span class=\"mi\">81</span><span class=\"o\">:</span> <span class=\"n\">Warning</span> <span class=\"o\">[</span><span class=\"n\">RenderEngine</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">87</span><span class=\"o\">]</span> <span class=\"n\">Unable</span> <span class=\"n\">to</span> <span class=\"n\">create</span> <span class=\"n\">X</span> <span class=\"n\">window</span><span class=\"o\">.</span> <span class=\"n\">Rendering</span> <span class=\"n\">will</span> <span class=\"n\">be</span> <span class=\"n\">disabled</span>\n<span class=\"mi\">81</span><span class=\"o\">:</span> <span class=\"n\">Warning</span> <span class=\"o\">[</span><span class=\"n\">ServerFixture</span><span class=\"o\">.</span><span class=\"na\">hh</span><span class=\"o\">:</span><span class=\"mi\">141</span><span class=\"o\">]</span> <span class=\"n\">ServerFixture</span> <span class=\"n\">load</span> <span class=\"k\">in</span> <span class=\"mf\">0.18</span> <span class=\"n\">seconds</span><span class=\"o\">,</span> <span class=\"n\">timeout</span> <span class=\"n\">after</span> <span class=\"mi\">60</span> <span class=\"n\">seconds</span>\n<span class=\"mi\">81</span><span class=\"o\">:</span> <span class=\"sr\">/home/yos/code/gazebo/gazebo/sensors/</span><span class=\"n\">Sensor_TEST</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">158</span><span class=\"o\">:</span> <span class=\"n\">Failure</span>\n<span class=\"mi\">81</span><span class=\"o\">:</span> <span class=\"n\">Value</span> <span class=\"n\">of</span><span class=\"o\">:</span> <span class=\"n\">sensor</span> <span class=\"o\">!=</span> <span class=\"n\">NULL</span>\n<span class=\"mi\">81</span><span class=\"o\">:</span>   <span class=\"n\">Actual</span><span class=\"o\">:</span> <span class=\"kc\">false</span>\n<span class=\"mi\">81</span><span class=\"o\">:</span> <span class=\"n\">Expected</span><span class=\"o\">:</span> <span class=\"kc\">true</span>\n<span class=\"mi\">81</span><span class=\"o\">:</span> <span class=\"n\">Error</span> <span class=\"o\">[</span><span class=\"n\">SensorManager</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">330</span><span class=\"o\">]</span> <span class=\"n\">Unable</span> <span class=\"n\">to</span> <span class=\"n\">remove</span> <span class=\"n\">sensor</span><span class=\"o\">[</span><span class=\"k\">default</span><span class=\"o\">::</span><span class=\"n\">hokuyo</span><span class=\"o\">::</span><span class=\"n\">link</span><span class=\"o\">::</span><span class=\"n\">laser</span><span class=\"o\">]</span> <span class=\"n\">because</span> <span class=\"n\">it</span> <span class=\"n\">does</span> <span class=\"n\">not</span> <span class=\"n\">exist</span><span class=\"o\">.</span>\n</pre></div>\n\n\n<p>Looks like the SensorManager is returning null pointer when trying to get the hokuyo sensor defined in the world file. This does not happen when running with a valid display.</p>\n<p>Most obvious fix is moved it to gz_build_gui_test but I want to be sure that this is expected by design.</p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-04-03T18:20:03.497377+00:00", "milestone": null, "updated_on": "2016-09-14T19:43:36.604620+00:00", "type": "issue", "id": 621}