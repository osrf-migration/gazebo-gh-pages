{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/741/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/741.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/741/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/741/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/741/gazebo-occassional-deadlocks-when-stopping"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/741/vote"}}, "reporter": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "title": "gazebo occassional deadlocks when stopping contact visualization", "component": null, "votes": 0, "watches": 2, "content": {"raw": "Running with gazebo 1.8.6-1~precise and drcsim 2.6.7-1~precise.\r\n\r\nSometimes switching off visualization of contacts will cause gazebo to hang.\r\n\r\ngzserver bt:\r\n\r\n~~~\r\n(gdb) bt\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:162\r\n#1  0x00007fa36c91d7cb in ?? () from /usr/lib/libgazebo_transport.so.1\r\n#2  0x00007fa36c91d9ac in gazebo::transport::Node::RemoveCallback(std::string const&, unsigned int) () from /usr/lib/libgazebo_transport.so.1\r\n#3  0x00007fa36c92802c in gazebo::transport::Subscriber::~Subscriber() () from /usr/lib/libgazebo_transport.so.1\r\n#4  0x00007fa36c928139 in gazebo::transport::Subscriber::~Subscriber() () from /usr/lib/libgazebo_transport.so.1\r\n#5  0x000000000042dc29 in boost::detail::shared_count::~shared_count() ()\r\n#6  0x00007fa368275638 in gazebo::rendering::ContactVisual::SetEnabled(bool) () from /usr/lib/libgazebo_rendering.so.1\r\n#7  0x00007fa3682ceb8a in gazebo::rendering::Scene::ShowContacts(bool) () from /usr/lib/libgazebo_rendering.so.1\r\n#8  0x00007fa3682cf35a in gazebo::rendering::Scene::ProcessRequestMsg(boost::shared_ptr<gazebo::msgs::Request const> const&) () from /usr/lib/libgazebo_rendering.so.1\r\n#9  0x00007fa3682d35b9 in gazebo::rendering::Scene::PreRender() () from /usr/lib/libgazebo_rendering.so.1\r\n#10 0x00007fa36c35084e in gazebo::sensors::SensorManager::ImageSensorContainer::Update(bool) () from /usr/lib/libgazebo_sensors.so.1\r\n#11 0x00007fa36c352dd4 in gazebo::sensors::SensorManager::Update(bool) () from /usr/lib/libgazebo_sensors.so.1\r\n#12 0x0000000000424e88 in gazebo::Server::Run() ()\r\n#13 0x00000000004212c3 in main ()\r\n(gdb) \r\n~~~\r\n\r\ngzclient bt:\r\n\r\n~~~\r\n(gdb) bt\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:162\r\n#1  0x00007ffbed5dd0c6 in gazebo::transport::request(std::string const&, std::string const&, std::string const&) () from /usr/lib/libgazebo_transport.so.1\r\n#2  0x00000000004b8434 in gazebo::gui::JointControlWidget::SetModelName(std::string const&) ()\r\n#3  0x000000000049f9ae in gazebo::gui::GLWidget::OnMouseReleaseNormal() ()\r\n#4  0x00000000004a06e8 in gazebo::gui::GLWidget::OnMouseRelease(gazebo::common::MouseEvent const&) ()\r\n#5  0x00000000004f71b0 in gazebo::gui::MouseEventHandler::Handle(gazebo::common::MouseEvent const&, std::list<gazebo::gui::MouseEventHandler::Filter, std::allocator<gazebo::gui::MouseEventHandler::Filter> >&) ()\r\n#6  0x000000000049c0ca in gazebo::gui::GLWidget::mouseReleaseEvent(QMouseEvent*) ()\r\n#7  0x00007ffbeb863144 in QWidget::event (this=0x1aee520, event=0x7fffb94680c0) at kernel/qwidget.cpp:8362\r\n#8  0x00007ffbeb812894 in notify_helper (e=0x7fffb94680c0, receiver=0x1aee520, this=0x142a0f0) at kernel/qapplication.cpp:4559\r\n#9  QApplicationPrivate::notify_helper (this=0x142a0f0, receiver=0x1aee520, e=0x7fffb94680c0) at kernel/qapplication.cpp:4531\r\n#10 0x00007ffbeb8180bf in QApplication::notify (this=<optimized out>, receiver=0x1aef5d0, e=0x7fffb9468480) at kernel/qapplication.cpp:4102\r\n#11 0x00007ffbeb2efe9c in QCoreApplication::notifyInternal (this=0x144f660, receiver=0x1aef5d0, event=0x7fffb9468480) at kernel/qcoreapplication.cpp:876\r\n#12 0x00007ffbeb813862 in sendEvent (event=<optimized out>, receiver=<optimized out>) at ../../include/QtCore/../../src/corelib/kernel/qcoreapplication.h:231\r\n#13 QApplicationPrivate::sendMouseEvent (receiver=0x1aef5d0, event=0x7fffb9468480, alienWidget=0x0, nativeWidget=0x1aef5d0, buttonDown=0x0, lastMouseReceiver=..., spontaneous=true)\r\n    at kernel/qapplication.cpp:3170\r\n#14 0x00007ffbeb892bf5 in QETWidget::translateMouseEvent (this=0x1aef5d0, event=<optimized out>) at kernel/qapplication_x11.cpp:4617\r\n#15 0x00007ffbeb891bae in QApplication::x11ProcessEvent (this=0x144f660, event=0x7fffb9468d50) at kernel/qapplication_x11.cpp:3732\r\n#16 0x00007ffbeb8bb0d2 in x11EventSourceDispatch (s=0x142b220, callback=0, user_data=0x0) at kernel/qguieventdispatcher_glib.cpp:146\r\n#17 0x00007ffbe4bc8d53 in g_main_context_dispatch () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\r\n#18 0x00007ffbe4bc90a0 in ?? () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\r\n#19 0x00007ffbe4bc9164 in g_main_context_iteration () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\r\n#20 0x00007ffbeb31f3bf in QEventDispatcherGlib::processEvents (this=0x1461750, flags=...) at kernel/qeventdispatcher_glib.cpp:424\r\n#21 0x00007ffbeb8bad5e in QGuiEventDispatcherGlib::processEvents (this=<optimized out>, flags=...) at kernel/qguieventdispatcher_glib.cpp:204\r\n#22 0x00007ffbeb2eec82 in QEventLoop::processEvents (this=<optimized out>, flags=...) at kernel/qeventloop.cpp:149\r\n#23 0x00007ffbeb2eeed7 in QEventLoop::exec (this=0x7fffb94690f0, flags=...) at kernel/qeventloop.cpp:204\r\n#24 0x00007ffbeb2f3f67 in QCoreApplication::exec () at kernel/qcoreapplication.cpp:1148\r\n#25 0x00000000004a9b9c in gazebo::gui::run(int, char**) ()\r\n#26 0x0000000000489a29 in main ()\r\n(gdb) \r\n~~~", "markup": "markdown", "html": "<p>Running with gazebo 1.8.6-1~precise and drcsim 2.6.7-1~precise.</p>\n<p>Sometimes switching off visualization of contacts will cause gazebo to hang.</p>\n<p>gzserver bt:</p>\n<div class=\"codehilite\"><pre><span></span>(gdb) bt\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:162\n#1  0x00007fa36c91d7cb in ?? () from /usr/lib/libgazebo_transport.so.1\n#2  0x00007fa36c91d9ac in gazebo::transport::Node::RemoveCallback(std::string const&amp;, unsigned int) () from /usr/lib/libgazebo_transport.so.1\n#3  0x00007fa36c92802c in gazebo::transport::Subscriber::~Subscriber() () from /usr/lib/libgazebo_transport.so.1\n#4  0x00007fa36c928139 in gazebo::transport::Subscriber::~Subscriber() () from /usr/lib/libgazebo_transport.so.1\n#5  0x000000000042dc29 in boost::detail::shared_count::~shared_count() ()\n#6  0x00007fa368275638 in gazebo::rendering::ContactVisual::SetEnabled(bool) () from /usr/lib/libgazebo_rendering.so.1\n#7  0x00007fa3682ceb8a in gazebo::rendering::Scene::ShowContacts(bool) () from /usr/lib/libgazebo_rendering.so.1\n#8  0x00007fa3682cf35a in gazebo::rendering::Scene::ProcessRequestMsg(boost::shared_ptr&lt;gazebo::msgs::Request const&gt; const&amp;) () from /usr/lib/libgazebo_rendering.so.1\n#9  0x00007fa3682d35b9 in gazebo::rendering::Scene::PreRender() () from /usr/lib/libgazebo_rendering.so.1\n#10 0x00007fa36c35084e in gazebo::sensors::SensorManager::ImageSensorContainer::Update(bool) () from /usr/lib/libgazebo_sensors.so.1\n#11 0x00007fa36c352dd4 in gazebo::sensors::SensorManager::Update(bool) () from /usr/lib/libgazebo_sensors.so.1\n#12 0x0000000000424e88 in gazebo::Server::Run() ()\n#13 0x00000000004212c3 in main ()\n(gdb) \n</pre></div>\n\n\n<p>gzclient bt:</p>\n<div class=\"codehilite\"><pre><span></span>(gdb) bt\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:162\n#1  0x00007ffbed5dd0c6 in gazebo::transport::request(std::string const&amp;, std::string const&amp;, std::string const&amp;) () from /usr/lib/libgazebo_transport.so.1\n#2  0x00000000004b8434 in gazebo::gui::JointControlWidget::SetModelName(std::string const&amp;) ()\n#3  0x000000000049f9ae in gazebo::gui::GLWidget::OnMouseReleaseNormal() ()\n#4  0x00000000004a06e8 in gazebo::gui::GLWidget::OnMouseRelease(gazebo::common::MouseEvent const&amp;) ()\n#5  0x00000000004f71b0 in gazebo::gui::MouseEventHandler::Handle(gazebo::common::MouseEvent const&amp;, std::list&lt;gazebo::gui::MouseEventHandler::Filter, std::allocator&lt;gazebo::gui::MouseEventHandler::Filter&gt; &gt;&amp;) ()\n#6  0x000000000049c0ca in gazebo::gui::GLWidget::mouseReleaseEvent(QMouseEvent*) ()\n#7  0x00007ffbeb863144 in QWidget::event (this=0x1aee520, event=0x7fffb94680c0) at kernel/qwidget.cpp:8362\n#8  0x00007ffbeb812894 in notify_helper (e=0x7fffb94680c0, receiver=0x1aee520, this=0x142a0f0) at kernel/qapplication.cpp:4559\n#9  QApplicationPrivate::notify_helper (this=0x142a0f0, receiver=0x1aee520, e=0x7fffb94680c0) at kernel/qapplication.cpp:4531\n#10 0x00007ffbeb8180bf in QApplication::notify (this=&lt;optimized out&gt;, receiver=0x1aef5d0, e=0x7fffb9468480) at kernel/qapplication.cpp:4102\n#11 0x00007ffbeb2efe9c in QCoreApplication::notifyInternal (this=0x144f660, receiver=0x1aef5d0, event=0x7fffb9468480) at kernel/qcoreapplication.cpp:876\n#12 0x00007ffbeb813862 in sendEvent (event=&lt;optimized out&gt;, receiver=&lt;optimized out&gt;) at ../../include/QtCore/../../src/corelib/kernel/qcoreapplication.h:231\n#13 QApplicationPrivate::sendMouseEvent (receiver=0x1aef5d0, event=0x7fffb9468480, alienWidget=0x0, nativeWidget=0x1aef5d0, buttonDown=0x0, lastMouseReceiver=..., spontaneous=true)\n    at kernel/qapplication.cpp:3170\n#14 0x00007ffbeb892bf5 in QETWidget::translateMouseEvent (this=0x1aef5d0, event=&lt;optimized out&gt;) at kernel/qapplication_x11.cpp:4617\n#15 0x00007ffbeb891bae in QApplication::x11ProcessEvent (this=0x144f660, event=0x7fffb9468d50) at kernel/qapplication_x11.cpp:3732\n#16 0x00007ffbeb8bb0d2 in x11EventSourceDispatch (s=0x142b220, callback=0, user_data=0x0) at kernel/qguieventdispatcher_glib.cpp:146\n#17 0x00007ffbe4bc8d53 in g_main_context_dispatch () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#18 0x00007ffbe4bc90a0 in ?? () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#19 0x00007ffbe4bc9164 in g_main_context_iteration () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#20 0x00007ffbeb31f3bf in QEventDispatcherGlib::processEvents (this=0x1461750, flags=...) at kernel/qeventdispatcher_glib.cpp:424\n#21 0x00007ffbeb8bad5e in QGuiEventDispatcherGlib::processEvents (this=&lt;optimized out&gt;, flags=...) at kernel/qguieventdispatcher_glib.cpp:204\n#22 0x00007ffbeb2eec82 in QEventLoop::processEvents (this=&lt;optimized out&gt;, flags=...) at kernel/qeventloop.cpp:149\n#23 0x00007ffbeb2eeed7 in QEventLoop::exec (this=0x7fffb94690f0, flags=...) at kernel/qeventloop.cpp:204\n#24 0x00007ffbeb2f3f67 in QCoreApplication::exec () at kernel/qcoreapplication.cpp:1148\n#25 0x00000000004a9b9c in gazebo::gui::run(int, char**) ()\n#26 0x0000000000489a29 in main ()\n(gdb) \n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-06-17T17:29:55.946965+00:00", "milestone": null, "updated_on": "2016-09-14T19:39:36.937978+00:00", "type": "issue", "id": 741}