{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/560/comments/3351237.json"}, "html": {"href": "#!/osrf/gazebo/issues/560#comment-3351237"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/560.json"}}, "type": "issue", "id": 560, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "RGB Images for DepthCameras"}, "content": {"raw": "The problem seems to be the class image_transport::ImageTransport. In simulator_gazebo/gazebo_plugin/gazebo_ros_camera_utils.cpp we advertise the image service with:\n\n  this->image_pub_ = this->itnode_->advertise(\n    this->image_topic_name_,1,\n    boost::bind( &GazeboRosCameraUtils::ImageConnect,this),\n    boost::bind( &GazeboRosCameraUtils::ImageDisconnect,this),\n    ros::VoidPtr(), &this->camera_queue_);\n\nHowever, the ImageConnect and ImageDisconnect methods are never called. So the variable image_connect_count_ always remains 0. I'm currently ignoring this value so it always publishes the image information even if no one is listening. This is not very efficient but works for now.\n\nimage_common is a ROS package, so maybe this is a task they need to solve?", "markup": "markdown", "html": "<p>The problem seems to be the class image_transport::ImageTransport. In simulator_gazebo/gazebo_plugin/gazebo_ros_camera_utils.cpp we advertise the image service with:</p>\n<p>this-&gt;image_pub_ = this-&gt;itnode_-&gt;advertise(\n    this-&gt;image_topic_name_,1,\n    boost::bind( &amp;GazeboRosCameraUtils::ImageConnect,this),\n    boost::bind( &amp;GazeboRosCameraUtils::ImageDisconnect,this),\n    ros::VoidPtr(), &amp;this-&gt;camera_queue_);</p>\n<p>However, the ImageConnect and ImageDisconnect methods are never called. So the variable image_connect_count_ always remains 0. I'm currently ignoring this value so it always publishes the image information even if no one is listening. This is not very efficient but works for now.</p>\n<p>image_common is a ROS package, so maybe this is a task they need to solve?</p>", "type": "rendered"}, "created_on": "2013-03-08T14:08:32.257903+00:00", "user": {"display_name": "bram_ridder", "uuid": "{58c0325c-5323-4d93-a832-9bfc49dca731}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B58c0325c-5323-4d93-a832-9bfc49dca731%7D"}, "html": {"href": "https://bitbucket.org/%7B58c0325c-5323-4d93-a832-9bfc49dca731%7D/"}, "avatar": {"href": "https://bitbucket.org/account/bram_ridder/avatar/"}}, "nickname": "bram_ridder", "type": "user", "account_id": null}, "updated_on": "2013-03-08T14:09:50.132448+00:00", "type": "issue_comment", "id": 3351237}