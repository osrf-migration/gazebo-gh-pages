{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2506/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2506.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2506/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2506/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2506/bullet-heightmap-transform-is-wrong"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2506/vote"}}, "reporter": {"display_name": "Jennifer Buehler", "uuid": "{5949baad-8c43-4d52-9a82-bb8c3511fed8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D"}, "html": {"href": "https://bitbucket.org/%7B5949baad-8c43-4d52-9a82-bb8c3511fed8%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b28ae0e95eada6ee16f0860c1fa59fdcd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJB-4.png"}}, "nickname": "JenniferBuehler", "type": "user", "account_id": "557058:96bd489a-ec14-4a06-8d31-7bb6d46d1209"}, "title": "Bullet heightmap transform is wrong", "component": {"name": "physics::BulletPhysics", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122884.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "Collision with heightmaps in Bullet is not working properly at the moment. The terrain is not at the right transform.\r\n\r\nI think this is due to the [MotionState::setWorldTransform() in BulletHeightmapShape](https://bitbucket.org/JenniferBuehler/gazebo/src/00e746ff2fc08ad46d2641475b29ddd8b2a10803/gazebo/physics/bullet/BulletHeightmapShape.cc#lines-108) (see comment in linked line) not actually doing anything with the parameter (bullet\u2019s terrain has to be translated, see also comment in [btHeightfieldTerrainShape](https://github.com/bulletphysics/bullet3/blob/ab4b6638002c86d7d0c5d4a1b8e5728a227a92e3/src/BulletCollision/CollisionShapes/btHeightfieldTerrainShape.h#L44)).\r\n\r\nThis relates to pull request #2956 in which  I\u2019ve added a heightmap test and some test worlds. I have added a branch named [bullet_heightmap_transform_error](https://bitbucket.org/JenniferBuehler/gazebo/src/bullet_heightmap_transform_error/) which basically includes all changes of pull request #2956, with the exception that the TerrainCollision test is **not** skipped for bullet, so that it can be shown that this new test fails.", "markup": "markdown", "html": "<p>Collision with heightmaps in Bullet is not working properly at the moment. The terrain is not at the right transform.</p>\n<p>I think this is due to the <a data-is-external-link=\"true\" href=\"https://bitbucket.org/JenniferBuehler/gazebo/src/00e746ff2fc08ad46d2641475b29ddd8b2a10803/gazebo/physics/bullet/BulletHeightmapShape.cc#lines-108\" rel=\"nofollow\">MotionState::setWorldTransform() in BulletHeightmapShape</a> (see comment in linked line) not actually doing anything with the parameter (bullet\u2019s terrain has to be translated, see also comment in <a data-is-external-link=\"true\" href=\"https://github.com/bulletphysics/bullet3/blob/ab4b6638002c86d7d0c5d4a1b8e5728a227a92e3/src/BulletCollision/CollisionShapes/btHeightfieldTerrainShape.h#L44\" rel=\"nofollow\">btHeightfieldTerrainShape</a>).</p>\n<p>This relates to <a href=\"#!/osrf/gazebo/pull-requests/2956/dart-heightmap-with-bullet-and-ode\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #2956</a> in which  I\u2019ve added a heightmap test and some test worlds. I have added a branch named <a data-is-external-link=\"true\" href=\"https://bitbucket.org/JenniferBuehler/gazebo/src/bullet_heightmap_transform_error/\" rel=\"nofollow\">bullet_heightmap_transform_error</a> which basically includes all changes of <a href=\"#!/osrf/gazebo/pull-requests/2956/dart-heightmap-with-bullet-and-ode\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #2956</a>, with the exception that the TerrainCollision test is <strong>not</strong> skipped for bullet, so that it can be shown that this new test fails.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2018-08-07T15:18:39.126373+00:00", "milestone": null, "updated_on": "2018-08-08T12:33:38.079850+00:00", "type": "issue", "id": 2506}