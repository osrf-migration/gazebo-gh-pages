{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/955/comments/6919793.json"}, "html": {"href": "#!/osrf/gazebo/issues/955#comment-6919793"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/955.json"}}, "type": "issue", "id": 955, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Speed up gazebo test compilation"}, "content": {"raw": "Currently testing the following:\n~~~\ndiff -r dcc0bc096d85 cmake/GazeboTestUtils.cmake\n--- a/cmake/GazeboTestUtils.cmake\tFri Nov 15 00:07:39 2013 -0800\n+++ b/cmake/GazeboTestUtils.cmake\tFri Nov 15 23:46:18 2013 -0800\n@@ -10,7 +10,8 @@\n     if(USE_LOW_MEMORY_TESTS)\n       add_definitions(-DUSE_LOW_MEMORY_TESTS=1)\n     endif(USE_LOW_MEMORY_TESTS)\n-    add_executable(${BINARY_NAME} ${GTEST_SOURCE_file} ${GZ_BUILD_TESTS_EXTRA_EXE_SRCS})\n+    #add_executable(${BINARY_NAME} ${GTEST_SOURCE_file} ${GZ_BUILD_TESTS_EXTRA_EXE_SRCS})\n+    add_executable(${BINARY_NAME} ${GTEST_SOURCE_file})\n \n     add_dependencies(${BINARY_NAME}\n       gtest gtest_main\n@@ -21,12 +22,14 @@\n       gazebo_rendering\n       gazebo_msgs\n       gazebo_transport\n+      server_fixture\n       )\n \n \n     target_link_libraries(${BINARY_NAME}\n       libgtest.a\n       libgtest_main.a\n+      libserver_fixture.a\n       gazebo_common\n       gazebo_math\n       gazebo_physics\ndiff -r dcc0bc096d85 test/CMakeLists.txt\n--- a/test/CMakeLists.txt\tFri Nov 15 00:07:39 2013 -0800\n+++ b/test/CMakeLists.txt\tFri Nov 15 23:46:18 2013 -0800\n@@ -29,6 +29,16 @@\n set(GTEST_LIBRARY \"${PROJECT_BINARY_DIR}/test/libgtest.a\")\n set(GTEST_MAIN_LIBRARY \"${PROJECT_BINARY_DIR}/test/libgtest_main.a\")\n \n+# Build static ServerFixture library\n+set(ServerFixtureSources\n+  ${PROJECT_SOURCE_DIR}/gazebo/Server.cc\n+  ${PROJECT_SOURCE_DIR}/gazebo/Master.cc\n+  ${PROJECT_SOURCE_DIR}/gazebo/gazebo.cc\n+  ${PROJECT_SOURCE_DIR}/test/ServerFixture.cc\n+)\n+add_library(server_fixture STATIC ${ServerFixtureSources})\n+set(SERVER_FIXTURE_LIBRARY \"${PROJECT_BINARY_DIR}/test/libserver_fixture.a\")\n+\n execute_process(COMMAND cmake -E remove_directory ${CMAKE_BINARY_DIR}/test_results)\n execute_process(COMMAND cmake -E make_directory ${CMAKE_BINARY_DIR}/test_results)\n include_directories(${GTEST_INCLUDE_DIRS})\n~~~", "markup": "markdown", "html": "<p>Currently testing the following:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r dcc0bc096d85 cmake/GazeboTestUtils.cmake</span>\n<span class=\"gd\">--- a/cmake/GazeboTestUtils.cmake   Fri Nov 15 00:07:39 2013 -0800</span>\n<span class=\"gi\">+++ b/cmake/GazeboTestUtils.cmake   Fri Nov 15 23:46:18 2013 -0800</span>\n<span class=\"gu\">@@ -10,7 +10,8 @@</span>\n     if(USE_LOW_MEMORY_TESTS)\n       add_definitions(-DUSE_LOW_MEMORY_TESTS=1)\n     endif(USE_LOW_MEMORY_TESTS)\n<span class=\"gd\">-    add_executable(${BINARY_NAME} ${GTEST_SOURCE_file} ${GZ_BUILD_TESTS_EXTRA_EXE_SRCS})</span>\n<span class=\"gi\">+    #add_executable(${BINARY_NAME} ${GTEST_SOURCE_file} ${GZ_BUILD_TESTS_EXTRA_EXE_SRCS})</span>\n<span class=\"gi\">+    add_executable(${BINARY_NAME} ${GTEST_SOURCE_file})</span>\n\n     add_dependencies(${BINARY_NAME}\n       gtest gtest_main\n<span class=\"gu\">@@ -21,12 +22,14 @@</span>\n       gazebo_rendering\n       gazebo_msgs\n       gazebo_transport\n<span class=\"gi\">+      server_fixture</span>\n       )\n\n\n     target_link_libraries(${BINARY_NAME}\n       libgtest.a\n       libgtest_main.a\n<span class=\"gi\">+      libserver_fixture.a</span>\n       gazebo_common\n       gazebo_math\n       gazebo_physics\n<span class=\"gh\">diff -r dcc0bc096d85 test/CMakeLists.txt</span>\n<span class=\"gd\">--- a/test/CMakeLists.txt   Fri Nov 15 00:07:39 2013 -0800</span>\n<span class=\"gi\">+++ b/test/CMakeLists.txt   Fri Nov 15 23:46:18 2013 -0800</span>\n<span class=\"gu\">@@ -29,6 +29,16 @@</span>\n set(GTEST_LIBRARY &quot;${PROJECT_BINARY_DIR}/test/libgtest.a&quot;)\n set(GTEST_MAIN_LIBRARY &quot;${PROJECT_BINARY_DIR}/test/libgtest_main.a&quot;)\n\n<span class=\"gi\">+# Build static ServerFixture library</span>\n<span class=\"gi\">+set(ServerFixtureSources</span>\n<span class=\"gi\">+  ${PROJECT_SOURCE_DIR}/gazebo/Server.cc</span>\n<span class=\"gi\">+  ${PROJECT_SOURCE_DIR}/gazebo/Master.cc</span>\n<span class=\"gi\">+  ${PROJECT_SOURCE_DIR}/gazebo/gazebo.cc</span>\n<span class=\"gi\">+  ${PROJECT_SOURCE_DIR}/test/ServerFixture.cc</span>\n<span class=\"gi\">+)</span>\n<span class=\"gi\">+add_library(server_fixture STATIC ${ServerFixtureSources})</span>\n<span class=\"gi\">+set(SERVER_FIXTURE_LIBRARY &quot;${PROJECT_BINARY_DIR}/test/libserver_fixture.a&quot;)</span>\n<span class=\"gi\">+</span>\n execute_process(COMMAND cmake -E remove_directory ${CMAKE_BINARY_DIR}/test_results)\n execute_process(COMMAND cmake -E make_directory ${CMAKE_BINARY_DIR}/test_results)\n include_directories(${GTEST_INCLUDE_DIRS})\n</pre></div>", "type": "rendered"}, "created_on": "2013-11-16T07:47:27.846913+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 6919793}