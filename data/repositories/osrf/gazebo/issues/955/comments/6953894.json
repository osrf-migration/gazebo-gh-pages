{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/955/comments/6953894.json"}, "html": {"href": "#!/osrf/gazebo/issues/955#comment-6953894"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/955.json"}}, "type": "issue", "id": 955, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Speed up gazebo test compilation"}, "content": {"raw": "I did some further refactoring of ServerFixture, moving the code out of the header file and into ServerFixture.cc. This gives even greater speed-ups, leading to a total speed-up of 30% and a 500 MB reduction in build folder size.\n\nTiming info on quantal with ccache enabled:\n\nReference build, gazebo_2.1 branch, `make -j4`\n~~~\n$ time make -j4 && du -hs . && hg branch\nreal\t12m38.220s\nuser\t47m7.221s\nsys\t2m13.696s\n2.7G\t.\ngazebo_2.1\n~~~\n\n9% speed-up with [issue_955 branch](#!/osrf/gazebo/compare/issue_955..gazebo_2.1#diff)\n~~~\n$ time make -j4 && du -hs . && hg branch\nreal\t11m42.127s\nuser\t43m23.879s\nsys\t2m4.920s\n2.4G\t.\nissue_955\n~~~\n\n30% speed-up with [issue_955_refactor branch](#!/osrf/gazebo/compare/issue_955_refactor..gazebo_2.1#diff)\n~~~\nreal\t8m53.228s\nuser\t32m41.979s\nsys\t1m43.094s\n2.2G\t.\nissue_955_refactor\n~~~", "markup": "markdown", "html": "<p>I did some further refactoring of ServerFixture, moving the code out of the header file and into ServerFixture.cc. This gives even greater speed-ups, leading to a total speed-up of 30% and a 500 MB reduction in build folder size.</p>\n<p>Timing info on quantal with ccache enabled:</p>\n<p>Reference build, gazebo_2.1 branch, <code>make -j4</code></p>\n<div class=\"codehilite\"><pre><span></span>$ <span class=\"nb\">time</span> make -j4 <span class=\"o\">&amp;&amp;</span> du -hs . <span class=\"o\">&amp;&amp;</span> hg branch\nreal    12m38.220s\nuser    47m7.221s\nsys 2m13.696s\n<span class=\"m\">2</span>.7G    .\ngazebo_2.1\n</pre></div>\n\n\n<p>9% speed-up with <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/compare/issue_955..gazebo_2.1#diff\" rel=\"nofollow\">issue_955 branch</a></p>\n<div class=\"codehilite\"><pre><span></span>$ <span class=\"nb\">time</span> make -j4 <span class=\"o\">&amp;&amp;</span> du -hs . <span class=\"o\">&amp;&amp;</span> hg branch\nreal    11m42.127s\nuser    43m23.879s\nsys 2m4.920s\n<span class=\"m\">2</span>.4G    .\nissue_955\n</pre></div>\n\n\n<p>30% speed-up with <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/compare/issue_955_refactor..gazebo_2.1#diff\" rel=\"nofollow\">issue_955_refactor branch</a></p>\n<div class=\"codehilite\"><pre><span></span>real    8m53.228s\nuser    32m41.979s\nsys 1m43.094s\n2.2G    .\nissue_955_refactor\n</pre></div>", "type": "rendered"}, "created_on": "2013-11-19T02:17:50.036668+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 6953894}