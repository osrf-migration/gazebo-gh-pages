{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2125/comments/55001114.json"}, "html": {"href": "#!/osrf/gazebo/issues/2125#comment-55001114"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2125.json"}}, "type": "issue", "id": 2125, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Depth sensor noise model"}, "content": {"raw": "Hi @{557058:434ecab2-e510-4ede-8f9a-1c2a5a4032e1} , unfortunately, I am no longer collaborating with Gazebo as I was doing before since I started a different project, but I will gladly make some comments to help you if I can. Keep in mind that this feature is already implemented in [ignition sensors](https://bitbucket.org/ignitionrobotics/ign-sensors/src/a7228f37710470cdf8c01343eb5a3ecb7d32b41f/src/DepthCameraSensor.cc#lines-341) and it will be available on gazebo 11. If you want to contribute to previous versions of Gazebo, which are going to have support for several years, as [far as I know, ](http://gazebosim.org/blog/gazebo9)you can use what it was done for the [Render Noise Pass](https://bitbucket.org/ignitionrobotics/ign-rendering/src/abea3c1b8bb71d143d5c1da4eac75bda4156cd99/ogre/src/OgreGaussianNoisePass.cc#lines-33).   \n  \nThe correct approach, in my opinion, would be to do something similar in [DepthCamera](#!/osrf/gazebo/src/be467c68f241a0fa31509972b9bf0076a809330c/gazebo/rendering/DepthCamera.cc#lines-364), since it can not be solved using a different shader for opengl in DepthCamera, I don\u2019t remember why we can not use the shader to add the noise. A quick solution could be to iterate over the data in the sensor and add the noise there as it is done on the [Lidar](#!/osrf/gazebo/src/be467c68f241a0fa31509972b9bf0076a809330c/gazebo/sensors/GpuRaySensor.cc#lines-644). What you did is similar, but if that is the case, I would actually work with the output data without using opengl and adding the noise [here](#!/osrf/gazebo/src/be467c68f241a0fa31509972b9bf0076a809330c/gazebo/sensors/DepthCameraSensor.cc#lines-169).", "markup": "markdown", "html": "<p>Hi <span class=\"ap-mention\" data-atlassian-id=\"557058:434ecab2-e510-4ede-8f9a-1c2a5a4032e1\">@Martin Pecka</span> , unfortunately, I am no longer collaborating with Gazebo as I was doing before since I started a different project, but I will gladly make some comments to help you if I can. Keep in mind that this feature is already implemented in <a data-is-external-link=\"true\" href=\"https://bitbucket.org/ignitionrobotics/ign-sensors/src/a7228f37710470cdf8c01343eb5a3ecb7d32b41f/src/DepthCameraSensor.cc#lines-341\" rel=\"nofollow\">ignition sensors</a> and it will be available on gazebo 11. If you want to contribute to previous versions of Gazebo, which are going to have support for several years, as <a data-is-external-link=\"true\" href=\"http://gazebosim.org/blog/gazebo9\" rel=\"nofollow\">far as I know, </a>you can use what it was done for the <a data-is-external-link=\"true\" href=\"https://bitbucket.org/ignitionrobotics/ign-rendering/src/abea3c1b8bb71d143d5c1da4eac75bda4156cd99/ogre/src/OgreGaussianNoisePass.cc#lines-33\" rel=\"nofollow\">Render Noise Pass</a>.   </p>\n<p>The correct approach, in my opinion, would be to do something similar in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/be467c68f241a0fa31509972b9bf0076a809330c/gazebo/rendering/DepthCamera.cc#lines-364\" rel=\"nofollow\">DepthCamera</a>, since it can not be solved using a different shader for opengl in DepthCamera, I don\u2019t remember why we can not use the shader to add the noise. A quick solution could be to iterate over the data in the sensor and add the noise there as it is done on the <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/be467c68f241a0fa31509972b9bf0076a809330c/gazebo/sensors/GpuRaySensor.cc#lines-644\" rel=\"nofollow\">Lidar</a>. What you did is similar, but if that is the case, I would actually work with the output data without using opengl and adding the noise <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/be467c68f241a0fa31509972b9bf0076a809330c/gazebo/sensors/DepthCameraSensor.cc#lines-169\" rel=\"nofollow\">here</a>.</p>", "type": "rendered"}, "created_on": "2019-11-27T23:37:38.209086+00:00", "user": {"display_name": "Javier Iv\u00e1n Choclin", "uuid": "{745acb37-6a3b-4169-8ba9-2c142a7408fb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B745acb37-6a3b-4169-8ba9-2c142a7408fb%7D"}, "html": {"href": "https://bitbucket.org/%7B745acb37-6a3b-4169-8ba9-2c142a7408fb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2279399d-3c75-4e1e-b818-4fb8339b2939/26f5815d-5477-4106-ba9b-ac56ee23e175/128"}}, "nickname": "Javier Choclin", "type": "user", "account_id": "557058:2279399d-3c75-4e1e-b818-4fb8339b2939"}, "updated_on": null, "type": "issue_comment", "id": 55001114}