{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1529/comments/16795759.json"}, "html": {"href": "#!/osrf/gazebo/issues/1529#comment-16795759"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1529.json"}}, "type": "issue", "id": 1529, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Alternative approach to including ign-math (formerly pull request #1535)"}, "content": {"raw": "I'll start with a preamble to clarify this issue, then I'll get into the pros and cons of this issue compared to pull request #1534.\n\nThe original text of this issue comes from Steve, and was originally submitted as pull request. It was move to an issue because pull requests are meant for code that is ready for integration, and this was meant to have a discussion. I have to admit that I have also seen and thought about the approach suggested here for a few days before submitting pull request #1534.\n\nI'll refer to the strategy suggested here as Option A and the strategy in pull request #1534 as Option B.\n\n** Option A ** \n\n*Timeline*\n\n1. Gazebo6 \n    1. `gazebo/math` modified to match `ignition/math` API.\n    1. libignition-math is an optional dependency.\n1. Gazebo7\n    1. libignition-math is a required dependency, but using the `ignition::math` namespace is optional. \n    1. Remove the deprecated `gazebo/math` functions. \n    1. Deprecate the gazebo API that uses `gazebo::math`, and swap in 'ignition::math'\n1. Gazebo8\n    1. Remove the deprecated gazebo API functions\n\n*Pros*\n\n1. The initial impact on users will be fairly minimal.\n\n*Cons*\n\n1. Users will have to change their code twice. The first time will be with Gazebo6's math API change, the second when we change the rest of gazebo's API. **Note:** We could keep the typedefs, and never change gazebo's api to use the `ignition::math` namespace. This would require more maintenance on our part, would eventually become technically impractical, and serves no purpose other than to hide `ignition::math` from users.\n\n1. This is a very complicated strategy that will cause confusion. It will be possible for users to take different migration paths that span different version of gazebo. For example:\n\n    * User A: chooses to adopt `ignition::math` in gazebo7\n    * User B: Switches some code in Gazebo6 to `ignition::math` and other code in Gazebo7 \n\n**Option B**\n\n*Timeline*\n\n1. Gazebo6 \n    1. Deprecate the gazebo API that uses the `gazebo::math`, and swap in 'ignition::math'\n1. Gazebo7 \n    1. Remove the deprecated gazebo API functions. \n    1. Deprecate all the classes in `gazebo/math`\n1. Gazebo8\n    1. Remove `gazebo/math`\n\n*Pros*\n\n1. Simple and excepted method of changing an API.\n1. Users only have to change their code once, following a clear migration path. **Note** There might be a small group of people who directly use gazebo's math library, in which case they would have to switch to something else in gazebo8. Realistically, this population is zero or extremely close to zero.\n\n*Cons*\n\n1. The initial change is larger than OptionA.\n\n\n** Summary **\n\nOption A will make users' lives a bit easier at first. The downside is that users will have a harder time migrating their code in the long run, and this will entail a larger development effort on our part.\n\nOption B has more up-front work, for both OSRF and users. The benefit is less complexity and less confusion. ", "markup": "markdown", "html": "<p>I'll start with a preamble to clarify this issue, then I'll get into the pros and cons of this issue compared to <a href=\"#!/osrf/gazebo/pull-requests/1534/first-step-in-transition-to-ign-math\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1534</a>.</p>\n<p>The original text of this issue comes from Steve, and was originally submitted as pull request. It was move to an issue because pull requests are meant for code that is ready for integration, and this was meant to have a discussion. I have to admit that I have also seen and thought about the approach suggested here for a few days before submitting <a href=\"#!/osrf/gazebo/pull-requests/1534/first-step-in-transition-to-ign-math\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1534</a>.</p>\n<p>I'll refer to the strategy suggested here as Option A and the strategy in <a href=\"#!/osrf/gazebo/pull-requests/1534/first-step-in-transition-to-ign-math\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1534</a> as Option B.</p>\n<p><strong> Option A </strong> </p>\n<p><em>Timeline</em></p>\n<ol>\n<li>Gazebo6 <ol>\n<li><code>gazebo/math</code> modified to match <code>ignition/math</code> API.</li>\n<li>libignition-math is an optional dependency.</li>\n</ol>\n</li>\n<li>Gazebo7<ol>\n<li>libignition-math is a required dependency, but using the <code>ignition::math</code> namespace is optional. </li>\n<li>Remove the deprecated <code>gazebo/math</code> functions. </li>\n<li>Deprecate the gazebo API that uses <code>gazebo::math</code>, and swap in 'ignition::math'</li>\n</ol>\n</li>\n<li>Gazebo8<ol>\n<li>Remove the deprecated gazebo API functions</li>\n</ol>\n</li>\n</ol>\n<p><em>Pros</em></p>\n<ol>\n<li>The initial impact on users will be fairly minimal.</li>\n</ol>\n<p><em>Cons</em></p>\n<ol>\n<li>\n<p>Users will have to change their code twice. The first time will be with Gazebo6's math API change, the second when we change the rest of gazebo's API. <strong>Note:</strong> We could keep the typedefs, and never change gazebo's api to use the <code>ignition::math</code> namespace. This would require more maintenance on our part, would eventually become technically impractical, and serves no purpose other than to hide <code>ignition::math</code> from users.</p>\n</li>\n<li>\n<p>This is a very complicated strategy that will cause confusion. It will be possible for users to take different migration paths that span different version of gazebo. For example:</p>\n<ul>\n<li>User A: chooses to adopt <code>ignition::math</code> in gazebo7</li>\n<li>User B: Switches some code in Gazebo6 to <code>ignition::math</code> and other code in Gazebo7 </li>\n</ul>\n</li>\n</ol>\n<p><strong>Option B</strong></p>\n<p><em>Timeline</em></p>\n<ol>\n<li>Gazebo6 <ol>\n<li>Deprecate the gazebo API that uses the <code>gazebo::math</code>, and swap in 'ignition::math'</li>\n</ol>\n</li>\n<li>Gazebo7 <ol>\n<li>Remove the deprecated gazebo API functions. </li>\n<li>Deprecate all the classes in <code>gazebo/math</code></li>\n</ol>\n</li>\n<li>Gazebo8<ol>\n<li>Remove <code>gazebo/math</code></li>\n</ol>\n</li>\n</ol>\n<p><em>Pros</em></p>\n<ol>\n<li>Simple and excepted method of changing an API.</li>\n<li>Users only have to change their code once, following a clear migration path. <strong>Note</strong> There might be a small group of people who directly use gazebo's math library, in which case they would have to switch to something else in gazebo8. Realistically, this population is zero or extremely close to zero.</li>\n</ol>\n<p><em>Cons</em></p>\n<ol>\n<li>The initial change is larger than OptionA.</li>\n</ol>\n<p><strong> Summary </strong></p>\n<p>Option A will make users' lives a bit easier at first. The downside is that users will have a harder time migrating their code in the long run, and this will entail a larger development effort on our part.</p>\n<p>Option B has more up-front work, for both OSRF and users. The benefit is less complexity and less confusion. </p>", "type": "rendered"}, "created_on": "2015-03-21T17:22:48.677654+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 16795759}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1529/comments/16867778.json"}, "html": {"href": "#!/osrf/gazebo/issues/1529#comment-16867778"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1529.json"}}, "type": "issue", "id": 1529, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Alternative approach to including ign-math (formerly pull request #1535)"}, "content": {"raw": "I'll respond to one point:\n\n* Option A: Con 1: \"We could keep the typedefs, and never change gazebo's api to use the ignition::math namespace. This would require more maintenance on our part, would eventually become technically impractical, and serves no purpose other than to hide ignition::math from users.\"\n\nI personally don't see the harm in keeping the typedefs. Without specific examples, these points (more maintenance, impracticality) sound hypothetical to me. Also, they wouldn't be serving \"no other purpose\", they would be providing a compatibility layer to minimize required changes in downstream code.\n\nI think the biggest downstream package that would be affected by this is [gazebo_ros_pkgs](https://github.com/ros-simulation/gazebo_ros_pkgs). If we choose Option B, we need to make sure the tick-tock aligns with ROS cycle. Also, it may make it impractical to support multiple gazebo versions `ros-jade-gazeboX-ros-pkgs` during the tick-tock without `ifdef`'s. I suspect that the majority of `gazebo_ros_pkgs` users use the default ROS version of gazebo, so this should affect a minority of users (not sure how big a minority).\n\nHere I'll include an example of how long-term migration could look with `gazebo::math::` typedefs:\n\n~~~\n// gazebo5 API\ngazebo::math::Vector3 vec;\nvec.z = -5.0;\n~~~\n\nSince ignition uses templates for Vector3, the `gazebo::math::Vector3` symbol would point to `ignition::math::Vector3d`, which should work. The API has changed, with attribute access removed, so this code would give warnings and should be changed:\n\n~~~\n// gazebo6 transition API\ngazebo::math::Vector3 vec;\nvec.Z() = -5.0;\n~~~\n\nIf the user wants to use the templated form of Vector3, they would need to use the `ignition::math::Vector3` class.\n\nIf this is too confusing to users, so be it; we can use Option B. I just want to have a fair discussion and give consideration to an option that may be easier to implement.", "markup": "markdown", "html": "<p>I'll respond to one point:</p>\n<ul>\n<li>Option A: Con 1: \"We could keep the typedefs, and never change gazebo's api to use the ignition::math namespace. This would require more maintenance on our part, would eventually become technically impractical, and serves no purpose other than to hide ignition::math from users.\"</li>\n</ul>\n<p>I personally don't see the harm in keeping the typedefs. Without specific examples, these points (more maintenance, impracticality) sound hypothetical to me. Also, they wouldn't be serving \"no other purpose\", they would be providing a compatibility layer to minimize required changes in downstream code.</p>\n<p>I think the biggest downstream package that would be affected by this is <a data-is-external-link=\"true\" href=\"https://github.com/ros-simulation/gazebo_ros_pkgs\" rel=\"nofollow\">gazebo_ros_pkgs</a>. If we choose Option B, we need to make sure the tick-tock aligns with ROS cycle. Also, it may make it impractical to support multiple gazebo versions <code>ros-jade-gazeboX-ros-pkgs</code> during the tick-tock without <code>ifdef</code>'s. I suspect that the majority of <code>gazebo_ros_pkgs</code> users use the default ROS version of gazebo, so this should affect a minority of users (not sure how big a minority).</p>\n<p>Here I'll include an example of how long-term migration could look with <code>gazebo::math::</code> typedefs:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"o\">//</span> <span class=\"nt\">gazebo5</span> <span class=\"nt\">API</span>\n<span class=\"nt\">gazebo</span><span class=\"p\">::</span><span class=\"nd\">math</span><span class=\"p\">::</span><span class=\"nd\">Vector3</span> <span class=\"nt\">vec</span><span class=\"o\">;</span>\n<span class=\"nt\">vec</span><span class=\"p\">.</span><span class=\"nc\">z</span> <span class=\"o\">=</span> <span class=\"nt\">-5</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">;</span>\n</pre></div>\n\n\n<p>Since ignition uses templates for Vector3, the <code>gazebo::math::Vector3</code> symbol would point to <code>ignition::math::Vector3d</code>, which should work. The API has changed, with attribute access removed, so this code would give warnings and should be changed:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"o\">//</span> <span class=\"nt\">gazebo6</span> <span class=\"nt\">transition</span> <span class=\"nt\">API</span>\n<span class=\"nt\">gazebo</span><span class=\"p\">::</span><span class=\"nd\">math</span><span class=\"p\">::</span><span class=\"nd\">Vector3</span> <span class=\"nt\">vec</span><span class=\"o\">;</span>\n<span class=\"nt\">vec</span><span class=\"p\">.</span><span class=\"nc\">Z</span><span class=\"o\">()</span> <span class=\"o\">=</span> <span class=\"nt\">-5</span><span class=\"p\">.</span><span class=\"nc\">0</span><span class=\"o\">;</span>\n</pre></div>\n\n\n<p>If the user wants to use the templated form of Vector3, they would need to use the <code>ignition::math::Vector3</code> class.</p>\n<p>If this is too confusing to users, so be it; we can use Option B. I just want to have a fair discussion and give consideration to an option that may be easier to implement.</p>", "type": "rendered"}, "created_on": "2015-03-24T19:20:59.514365+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 16867778}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1529/comments/20564261.json"}, "html": {"href": "#!/osrf/gazebo/issues/1529#comment-20564261"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1529.json"}}, "type": "issue", "id": 1529, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Alternative approach to including ign-math (formerly pull request #1535)"}, "content": {"raw": "we aren't using this alternative approach", "markup": "markdown", "html": "<p>we aren't using this alternative approach</p>", "type": "rendered"}, "created_on": "2015-07-29T19:43:20.396464+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 20564261}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1529/comments/30610712.json"}, "html": {"href": "#!/osrf/gazebo/issues/1529#comment-30610712"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1529.json"}}, "type": "issue", "id": 1529, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Alternative approach to including ign-math (formerly pull request #1535)"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2016-09-14T19:23:17.778927+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 30610712}], "page": 1, "size": 4}