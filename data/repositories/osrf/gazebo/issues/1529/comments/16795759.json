{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1529/comments/16795759.json"}, "html": {"href": "#!/osrf/gazebo/issues/1529#comment-16795759"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1529.json"}}, "type": "issue", "id": 1529, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Alternative approach to including ign-math (formerly pull request #1535)"}, "content": {"raw": "I'll start with a preamble to clarify this issue, then I'll get into the pros and cons of this issue compared to pull request #1534.\n\nThe original text of this issue comes from Steve, and was originally submitted as pull request. It was move to an issue because pull requests are meant for code that is ready for integration, and this was meant to have a discussion. I have to admit that I have also seen and thought about the approach suggested here for a few days before submitting pull request #1534.\n\nI'll refer to the strategy suggested here as Option A and the strategy in pull request #1534 as Option B.\n\n** Option A ** \n\n*Timeline*\n\n1. Gazebo6 \n    1. `gazebo/math` modified to match `ignition/math` API.\n    1. libignition-math is an optional dependency.\n1. Gazebo7\n    1. libignition-math is a required dependency, but using the `ignition::math` namespace is optional. \n    1. Remove the deprecated `gazebo/math` functions. \n    1. Deprecate the gazebo API that uses `gazebo::math`, and swap in 'ignition::math'\n1. Gazebo8\n    1. Remove the deprecated gazebo API functions\n\n*Pros*\n\n1. The initial impact on users will be fairly minimal.\n\n*Cons*\n\n1. Users will have to change their code twice. The first time will be with Gazebo6's math API change, the second when we change the rest of gazebo's API. **Note:** We could keep the typedefs, and never change gazebo's api to use the `ignition::math` namespace. This would require more maintenance on our part, would eventually become technically impractical, and serves no purpose other than to hide `ignition::math` from users.\n\n1. This is a very complicated strategy that will cause confusion. It will be possible for users to take different migration paths that span different version of gazebo. For example:\n\n    * User A: chooses to adopt `ignition::math` in gazebo7\n    * User B: Switches some code in Gazebo6 to `ignition::math` and other code in Gazebo7 \n\n**Option B**\n\n*Timeline*\n\n1. Gazebo6 \n    1. Deprecate the gazebo API that uses the `gazebo::math`, and swap in 'ignition::math'\n1. Gazebo7 \n    1. Remove the deprecated gazebo API functions. \n    1. Deprecate all the classes in `gazebo/math`\n1. Gazebo8\n    1. Remove `gazebo/math`\n\n*Pros*\n\n1. Simple and excepted method of changing an API.\n1. Users only have to change their code once, following a clear migration path. **Note** There might be a small group of people who directly use gazebo's math library, in which case they would have to switch to something else in gazebo8. Realistically, this population is zero or extremely close to zero.\n\n*Cons*\n\n1. The initial change is larger than OptionA.\n\n\n** Summary **\n\nOption A will make users' lives a bit easier at first. The downside is that users will have a harder time migrating their code in the long run, and this will entail a larger development effort on our part.\n\nOption B has more up-front work, for both OSRF and users. The benefit is less complexity and less confusion. ", "markup": "markdown", "html": "<p>I'll start with a preamble to clarify this issue, then I'll get into the pros and cons of this issue compared to <a href=\"#!/osrf/gazebo/pull-requests/1534/first-step-in-transition-to-ign-math\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1534</a>.</p>\n<p>The original text of this issue comes from Steve, and was originally submitted as pull request. It was move to an issue because pull requests are meant for code that is ready for integration, and this was meant to have a discussion. I have to admit that I have also seen and thought about the approach suggested here for a few days before submitting <a href=\"#!/osrf/gazebo/pull-requests/1534/first-step-in-transition-to-ign-math\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1534</a>.</p>\n<p>I'll refer to the strategy suggested here as Option A and the strategy in <a href=\"#!/osrf/gazebo/pull-requests/1534/first-step-in-transition-to-ign-math\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1534</a> as Option B.</p>\n<p><strong> Option A </strong> </p>\n<p><em>Timeline</em></p>\n<ol>\n<li>Gazebo6 <ol>\n<li><code>gazebo/math</code> modified to match <code>ignition/math</code> API.</li>\n<li>libignition-math is an optional dependency.</li>\n</ol>\n</li>\n<li>Gazebo7<ol>\n<li>libignition-math is a required dependency, but using the <code>ignition::math</code> namespace is optional. </li>\n<li>Remove the deprecated <code>gazebo/math</code> functions. </li>\n<li>Deprecate the gazebo API that uses <code>gazebo::math</code>, and swap in 'ignition::math'</li>\n</ol>\n</li>\n<li>Gazebo8<ol>\n<li>Remove the deprecated gazebo API functions</li>\n</ol>\n</li>\n</ol>\n<p><em>Pros</em></p>\n<ol>\n<li>The initial impact on users will be fairly minimal.</li>\n</ol>\n<p><em>Cons</em></p>\n<ol>\n<li>\n<p>Users will have to change their code twice. The first time will be with Gazebo6's math API change, the second when we change the rest of gazebo's API. <strong>Note:</strong> We could keep the typedefs, and never change gazebo's api to use the <code>ignition::math</code> namespace. This would require more maintenance on our part, would eventually become technically impractical, and serves no purpose other than to hide <code>ignition::math</code> from users.</p>\n</li>\n<li>\n<p>This is a very complicated strategy that will cause confusion. It will be possible for users to take different migration paths that span different version of gazebo. For example:</p>\n<ul>\n<li>User A: chooses to adopt <code>ignition::math</code> in gazebo7</li>\n<li>User B: Switches some code in Gazebo6 to <code>ignition::math</code> and other code in Gazebo7 </li>\n</ul>\n</li>\n</ol>\n<p><strong>Option B</strong></p>\n<p><em>Timeline</em></p>\n<ol>\n<li>Gazebo6 <ol>\n<li>Deprecate the gazebo API that uses the <code>gazebo::math</code>, and swap in 'ignition::math'</li>\n</ol>\n</li>\n<li>Gazebo7 <ol>\n<li>Remove the deprecated gazebo API functions. </li>\n<li>Deprecate all the classes in <code>gazebo/math</code></li>\n</ol>\n</li>\n<li>Gazebo8<ol>\n<li>Remove <code>gazebo/math</code></li>\n</ol>\n</li>\n</ol>\n<p><em>Pros</em></p>\n<ol>\n<li>Simple and excepted method of changing an API.</li>\n<li>Users only have to change their code once, following a clear migration path. <strong>Note</strong> There might be a small group of people who directly use gazebo's math library, in which case they would have to switch to something else in gazebo8. Realistically, this population is zero or extremely close to zero.</li>\n</ol>\n<p><em>Cons</em></p>\n<ol>\n<li>The initial change is larger than OptionA.</li>\n</ol>\n<p><strong> Summary </strong></p>\n<p>Option A will make users' lives a bit easier at first. The downside is that users will have a harder time migrating their code in the long run, and this will entail a larger development effort on our part.</p>\n<p>Option B has more up-front work, for both OSRF and users. The benefit is less complexity and less confusion. </p>", "type": "rendered"}, "created_on": "2015-03-21T17:22:48.677654+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 16795759}