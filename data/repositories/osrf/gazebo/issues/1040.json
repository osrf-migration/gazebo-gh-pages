{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1040/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1040.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1040/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1040/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1040/plugins-in-test-plugins-not-found-by"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1040/vote"}}, "reporter": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "title": "Plugins in test/plugins not found by SpringDamperTest", "component": {"name": "testing", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/128164.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "Console output from [Jenkins test failure](http://build.osrfoundation.org/job/gazebo-default-devel-quantal-amd64-gpu-nvidia/lastCompletedBuild/testReport/%28root%29/PhysicsEngines_JointTest/SpringDamperTest_0/):\r\n~~~\r\n153: [Err] [Plugin.hh:152] Failed to load plugin libSpringTestPlugin.so:\r\nlibSpringTestPlugin.so: cannot open shared object file: No such file or directory\r\n~~~\r\nThis plugin used to be in `plugins`, but it got moved to `test/plugins` in pull request #874. I tested that on my local machine, which had an old copy of that plugin installed, but with clean installs, it not able to be found.\r\n\r\nThe pull request attempted to solve the problem by assuming the build folder location (bad idea actually) and adding `build/test/plugins` to the gazebo system paths, which actually won't work, since [Plugin.hh calls SystemPaths::GetPluginPaths()](#!/osrf/gazebo/src/c2be69776af1f88bf11d69680600b2b4018e6161/gazebo/common/Plugin.hh?at=default#cl-118), which itself only checks the [GAZEBO_PLUGIN_PATH environment variable](#!/osrf/gazebo/src/c2be69776af1f88bf11d69680600b2b4018e6161/gazebo/common/SystemPaths.cc?at=default#cl-199).\r\n\r\nSo to fix this we should use the actual build folder location `CMAKE_BINARY_DIR` and then update the environment variable with this value? Or is there a better way?", "markup": "markdown", "html": "<p>Console output from <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/gazebo-default-devel-quantal-amd64-gpu-nvidia/lastCompletedBuild/testReport/%28root%29/PhysicsEngines_JointTest/SpringDamperTest_0/\" rel=\"nofollow\">Jenkins test failure</a>:</p>\n<div class=\"codehilite\"><pre><span></span>153: [Err] [Plugin.hh:152] Failed to load plugin libSpringTestPlugin.so:\nlibSpringTestPlugin.so: cannot open shared object file: No such file or directory\n</pre></div>\n\n\n<p>This plugin used to be in <code>plugins</code>, but it got moved to <code>test/plugins</code> in <a href=\"#!/osrf/gazebo/pull-requests/874/consolidated-test-files\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #874</a>. I tested that on my local machine, which had an old copy of that plugin installed, but with clean installs, it not able to be found.</p>\n<p>The pull request attempted to solve the problem by assuming the build folder location (bad idea actually) and adding <code>build/test/plugins</code> to the gazebo system paths, which actually won't work, since <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/c2be69776af1f88bf11d69680600b2b4018e6161/gazebo/common/Plugin.hh?at=default#cl-118\" rel=\"nofollow\">Plugin.hh calls SystemPaths::GetPluginPaths()</a>, which itself only checks the <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/c2be69776af1f88bf11d69680600b2b4018e6161/gazebo/common/SystemPaths.cc?at=default#cl-199\" rel=\"nofollow\">GAZEBO_PLUGIN_PATH environment variable</a>.</p>\n<p>So to fix this we should use the actual build folder location <code>CMAKE_BINARY_DIR</code> and then update the environment variable with this value? Or is there a better way?</p>", "type": "rendered"}, "assignee": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2014-02-06T17:31:25.503512+00:00", "milestone": null, "updated_on": "2016-09-14T19:43:40.547965+00:00", "type": "issue", "id": 1040}