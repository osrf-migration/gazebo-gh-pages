{"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2320/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2320.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2320/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2320/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2320/performance_transport_stress-test-times"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2320/vote"}}, "reporter": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "title": "PERFORMANCE_transport_stress test times out on gazebo8/default on xenial", "component": {"name": "transport", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122882.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "Until recently, I was building the `gazebo7` branch every night on my trusty machine and running `make test` in a loop. I recently switched to running `gazebo8` on xenial and have noticed that the `PERFORMANCE_transport_stress` test fails to complete with the gazebo8 / xenial combination.\r\n\r\nFurthermore, I have noticed that this test also fails in jenkins with default / xenial. The current oldest build is from [Feb 11, 2017](https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-performance-default-xenial-amd64/10/), and the most recent build is from [July 18, 2017](https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-performance-default-xenial-amd64/39/), and the transport stress test failed in both cases.\r\n\r\nThe last time I ran gazebo7 / trusty was July 11, 2017, and the test passed in 8.667 seconds with the following JUnit result file:\r\n\r\n~~~\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<testsuites tests=\"2\" failures=\"0\" disabled=\"0\" errors=\"0\" timestamp=\"2017-07-12T05:32:52\" time=\"8.667\" name=\"AllTests\">\r\n  <testsuite name=\"TransportStressTest\" tests=\"2\" failures=\"0\" disabled=\"0\" errors=\"0\" time=\"8.667\">\r\n    <testcase name=\"LocalPublish\" status=\"run\" time=\"3.302\" classname=\"TransportStressTest\" />\r\n    <testcase name=\"ManyNodes\" status=\"run\" time=\"5.364\" classname=\"TransportStressTest\" />\r\n  </testsuite>\r\n</testsuites>\r\n~~~\r\n\r\nI just ran the test manually without the `make test` invocation so that it isn't subject to the timeout, and it took over 30 minutes. I'll try to do some profiling to identify what is causing the slowdown.", "markup": "markdown", "html": "<p>Until recently, I was building the <code>gazebo7</code> branch every night on my trusty machine and running <code>make test</code> in a loop. I recently switched to running <code>gazebo8</code> on xenial and have noticed that the <code>PERFORMANCE_transport_stress</code> test fails to complete with the gazebo8 / xenial combination.</p>\n<p>Furthermore, I have noticed that this test also fails in jenkins with default / xenial. The current oldest build is from <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-performance-default-xenial-amd64/10/\" rel=\"nofollow\">Feb 11, 2017</a>, and the most recent build is from <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/view/main/view/gazebo/job/gazebo-performance-default-xenial-amd64/39/\" rel=\"nofollow\">July 18, 2017</a>, and the transport stress test failed in both cases.</p>\n<p>The last time I ran gazebo7 / trusty was July 11, 2017, and the test passed in 8.667 seconds with the following JUnit result file:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class=\"nt\">&lt;testsuites</span> <span class=\"na\">tests=</span><span class=\"s\">&quot;2&quot;</span> <span class=\"na\">failures=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">disabled=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">errors=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">timestamp=</span><span class=\"s\">&quot;2017-07-12T05:32:52&quot;</span> <span class=\"na\">time=</span><span class=\"s\">&quot;8.667&quot;</span> <span class=\"na\">name=</span><span class=\"s\">&quot;AllTests&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;testsuite</span> <span class=\"na\">name=</span><span class=\"s\">&quot;TransportStressTest&quot;</span> <span class=\"na\">tests=</span><span class=\"s\">&quot;2&quot;</span> <span class=\"na\">failures=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">disabled=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">errors=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">time=</span><span class=\"s\">&quot;8.667&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;testcase</span> <span class=\"na\">name=</span><span class=\"s\">&quot;LocalPublish&quot;</span> <span class=\"na\">status=</span><span class=\"s\">&quot;run&quot;</span> <span class=\"na\">time=</span><span class=\"s\">&quot;3.302&quot;</span> <span class=\"na\">classname=</span><span class=\"s\">&quot;TransportStressTest&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;testcase</span> <span class=\"na\">name=</span><span class=\"s\">&quot;ManyNodes&quot;</span> <span class=\"na\">status=</span><span class=\"s\">&quot;run&quot;</span> <span class=\"na\">time=</span><span class=\"s\">&quot;5.364&quot;</span> <span class=\"na\">classname=</span><span class=\"s\">&quot;TransportStressTest&quot;</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;/testsuite&gt;</span>\n<span class=\"nt\">&lt;/testsuites&gt;</span>\n</pre></div>\n\n\n<p>I just ran the test manually without the <code>make test</code> invocation so that it isn't subject to the timeout, and it took over 30 minutes. I'll try to do some profiling to identify what is causing the slowdown.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-07-18T20:09:12.675993+00:00", "milestone": null, "updated_on": "2018-03-13T19:59:33.041016+00:00", "type": "issue", "id": 2320}