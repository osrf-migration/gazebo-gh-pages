{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1748/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1748.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1748/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1748/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1748/significant-sensor-data-timestamp-accuracy"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1748/vote"}}, "reporter": {"display_name": "Stefan Kohlbrecher", "uuid": "{db06b03e-7b31-4483-9018-534df5bd723f}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bdb06b03e-7b31-4483-9018-534df5bd723f%7D"}, "html": {"href": "https://bitbucket.org/%7Bdb06b03e-7b31-4483-9018-534df5bd723f%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/414f1c364e6406dde31a6ef70fbd3d21d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSK-6.png"}}, "nickname": "Stefan_Kohlbrecher", "type": "user", "account_id": "557058:e39b6a62-9eb0-45ca-b27e-4f6445009d3f"}, "title": "Significant sensor data timestamp accuracy regression from Gazebo2 to Gazebo4", "component": {"name": "sensors", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122877.json"}}}, "votes": 4, "watches": 10, "content": {"raw": "It appears there is a (fairly significant) regression in how (camera) sensor data are timestamped. With Gazebo2, things work as would be expected from a simulator that \"perfectly\" timestamps camera data. With Gazebo4, we observe lots of artifacts that can be explained by timestamps for sensor data being off.\r\n\r\nHere are two video of a robot using a simulated RGB-D sensor to map the environment:\r\n\r\n* using [Gazebo2](https://youtu.be/0ppujsO-nX8)\r\n\r\n* using [Gazebo4](https://youtu.be/8LcvWGm3fHI)\r\n\r\nThere have been absolutely no changes to the software apart from installing Gazebo4 (from .debs) and recompiling custom gazebo plugins accordingly. It can clearly be seen that the obstacle map generated with Gazebo4 contains artifacts that are explainable by timestamps between camera sensor data and joint data being not consistent. Here are two screenshots highlighting the difference:\r\n\r\nwith Gazebo2, everything looks as expected:\r\n\r\n![gazebo2.png](data/bitbucket.org/repo/jgXqbo/images/3455278104-gazebo2.png)\r\n\r\nwith Gazebo4, artifacts consistently appear that cause spurious obstacles (circled red using my mad Gimp skills):\r\n\r\n![gazebo4.png](data/bitbucket.org/repo/jgXqbo/images/2802050232-gazebo4.png)\r\n\r\nThis is a subtle bug that will not have major effect as long as simulated cameras are not moving too fast, but once they do, it will introduce erroneous measurements that users do not expect. In our use case for instance, the robot will occasionally fail to explore the environment because of the phantom obstacles introduced by the bug.\r\n\r\nI haven't tested this specifically with Gazebo6 (or newer versions) yet, but I seem to remember to see the same issue with Gazebo6.", "markup": "markdown", "html": "<p>It appears there is a (fairly significant) regression in how (camera) sensor data are timestamped. With Gazebo2, things work as would be expected from a simulator that \"perfectly\" timestamps camera data. With Gazebo4, we observe lots of artifacts that can be explained by timestamps for sensor data being off.</p>\n<p>Here are two video of a robot using a simulated RGB-D sensor to map the environment:</p>\n<ul>\n<li>\n<p>using <a data-is-external-link=\"true\" href=\"https://youtu.be/0ppujsO-nX8\" rel=\"nofollow\">Gazebo2</a></p>\n</li>\n<li>\n<p>using <a data-is-external-link=\"true\" href=\"https://youtu.be/8LcvWGm3fHI\" rel=\"nofollow\">Gazebo4</a></p>\n</li>\n</ul>\n<p>There have been absolutely no changes to the software apart from installing Gazebo4 (from .debs) and recompiling custom gazebo plugins accordingly. It can clearly be seen that the obstacle map generated with Gazebo4 contains artifacts that are explainable by timestamps between camera sensor data and joint data being not consistent. Here are two screenshots highlighting the difference:</p>\n<p>with Gazebo2, everything looks as expected:</p>\n<p><img alt=\"gazebo2.png\" src=\"data/bitbucket.org/repo/jgXqbo/images/3455278104-gazebo2.png\" /></p>\n<p>with Gazebo4, artifacts consistently appear that cause spurious obstacles (circled red using my mad Gimp skills):</p>\n<p><img alt=\"gazebo4.png\" src=\"data/bitbucket.org/repo/jgXqbo/images/2802050232-gazebo4.png\" /></p>\n<p>This is a subtle bug that will not have major effect as long as simulated cameras are not moving too fast, but once they do, it will introduce erroneous measurements that users do not expect. In our use case for instance, the robot will occasionally fail to explore the environment because of the phantom obstacles introduced by the bug.</p>\n<p>I haven't tested this specifically with Gazebo6 (or newer versions) yet, but I seem to remember to see the same issue with Gazebo6.</p>", "type": "rendered"}, "assignee": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "state": "resolved", "version": {"name": "8.1", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/243455.json"}}}, "edited_on": null, "created_on": "2015-09-23T08:13:23.269859+00:00", "milestone": null, "updated_on": "2017-02-22T20:32:56.469184+00:00", "type": "issue", "id": 1748}