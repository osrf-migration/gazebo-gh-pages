{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2427/comments/43296791.json"}, "html": {"href": "#!/osrf/gazebo/issues/2427#comment-43296791"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/2427.json"}}, "type": "issue", "id": 2427, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "State log won't play with gazebo 8.3 because of a model plugin"}, "content": {"raw": "Ohh nice catch! Now inserted models are loaded through `World::SetState` and plugins are loaded too.\n\nSo my assumption was wrong, some plugins have not been loaded during playback until now. This was definitely an unintended change in behaviour. I know for a fact that GUI plugins are loaded, and I think @tfoote has been recently using a world/system plugin during log playback. \n\nI tried adding a plugin both to a model which starts in the world and one that is inserted, and I only get an error message for `grape` on 8.3:\n\n~~~\ndiff -r 0a1ef02bdc96 test/logs/insertion_deletion.log\n--- a/test/logs/insertion_deletion.log\tSat Feb 10 11:22:45 2018 -0800\n+++ b/test/logs/insertion_deletion.log\tWed Feb 14 16:20:59 2018 -0800\n@@ -33,6 +33,10 @@\n     <elevation>0</elevation>\n     <heading_deg>0</heading_deg>\n   </spherical_coordinates>\n+  <model name=\"banana\">\n+    <plugin name='banana' filename='banana.so'>\n+    </plugin>\n+  </model>\n </world>\n </sdf>\n ]]>\n@@ -89,6 +93,10 @@\n     <kinematic>0</kinematic>\n   </link>\n </model>\n+  <model name=\"grape\">\n+    <plugin name='grape' filename='grape.so'>\n+    </plugin>\n+  </model>\n~~~\n\nWe need a consistent behaviour between preexistent models and inserted ones. Let me try something out.\n\nIn any case, it would be nice to document somewhere which plugins are loaded during playback.", "markup": "markdown", "html": "<p>Ohh nice catch! Now inserted models are loaded through <code>World::SetState</code> and plugins are loaded too.</p>\n<p>So my assumption was wrong, some plugins have not been loaded during playback until now. This was definitely an unintended change in behaviour. I know for a fact that GUI plugins are loaded, and I think @tfoote has been recently using a world/system plugin during log playback. </p>\n<p>I tried adding a plugin both to a model which starts in the world and one that is inserted, and I only get an error message for <code>grape</code> on 8.3:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 0a1ef02bdc96 test/logs/insertion_deletion.log</span>\n<span class=\"gd\">--- a/test/logs/insertion_deletion.log  Sat Feb 10 11:22:45 2018 -0800</span>\n<span class=\"gi\">+++ b/test/logs/insertion_deletion.log  Wed Feb 14 16:20:59 2018 -0800</span>\n<span class=\"gu\">@@ -33,6 +33,10 @@</span>\n     &lt;elevation&gt;0&lt;/elevation&gt;\n     &lt;heading_deg&gt;0&lt;/heading_deg&gt;\n   &lt;/spherical_coordinates&gt;\n<span class=\"gi\">+  &lt;model name=&quot;banana&quot;&gt;</span>\n<span class=\"gi\">+    &lt;plugin name=&#39;banana&#39; filename=&#39;banana.so&#39;&gt;</span>\n<span class=\"gi\">+    &lt;/plugin&gt;</span>\n<span class=\"gi\">+  &lt;/model&gt;</span>\n &lt;/world&gt;\n &lt;/sdf&gt;\n ]]&gt;\n<span class=\"gu\">@@ -89,6 +93,10 @@</span>\n     &lt;kinematic&gt;0&lt;/kinematic&gt;\n   &lt;/link&gt;\n &lt;/model&gt;\n<span class=\"gi\">+  &lt;model name=&quot;grape&quot;&gt;</span>\n<span class=\"gi\">+    &lt;plugin name=&#39;grape&#39; filename=&#39;grape.so&#39;&gt;</span>\n<span class=\"gi\">+    &lt;/plugin&gt;</span>\n<span class=\"gi\">+  &lt;/model&gt;</span>\n</pre></div>\n\n\n<p>We need a consistent behaviour between preexistent models and inserted ones. Let me try something out.</p>\n<p>In any case, it would be nice to document somewhere which plugins are loaded during playback.</p>", "type": "rendered"}, "created_on": "2018-02-15T00:28:26.959081+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": null, "type": "issue_comment", "id": 43296791}