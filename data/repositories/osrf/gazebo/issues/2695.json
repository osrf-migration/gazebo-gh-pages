{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2695/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2695.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2695/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2695/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2695/error-about-px4_sitl-in-gazebo"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2695/vote"}}, "reporter": null, "title": "error about px4_sitl in gazebo", "component": null, "votes": 0, "watches": null, "content": {"raw": "# Hello everyone, I am new to px4_sitl in gazebo ,though it can run successfully before, But I got this error now:\r\n```\r\ngzserver: symbol lookup error: /home/wzy/src/Firmware/build/px4_sitl_default/build_gazebo/libgazebo_multirotor_base_plugin.so: undefined symbol: _ZN8mav_msgs4msgs10MotorSpeedC1Ev\r\n```\r\nAfter I open gazebo ,it seems normal.\r\n\r\nBut when I launch my model , px4 and mavros in a launch file below, I got this error.\r\nand I am mot edit libgazebo_multirotor_base_plugin relevant .cpp or .hpp\r\n\r\nI see some help in [gazebo](#!/osrf/gazebo/issues/2448/problem-running-gazebo7),  I even reinstall my ~/src/Firmware \r\n\r\n\r\nBut it is not work for me ,thanks for any help !\r\n# my launch\r\n```\r\n    <arg name=\"vehicle\" default=\"iris\"/>\r\n    <!--<arg name=\"my_model\" default=\"my_iris_fpv_lidar\"/>-->\r\n    <arg name=\"my_model\" default=\"iris\"/>\r\n    <arg name=\"sdf\" default=\"$(find mavlink_sitl_gazebo)/models/$(arg my_model)/$(arg my_model).sdf\"/>\r\n    <arg name=\"est\" default=\"ekf2\"/>\r\n    <env name=\"PX4_SIM_MODEL\" value=\"$(arg vehicle)\" />\r\n    <env name=\"PX4_ESTIMATOR\" value=\"$(arg est)\" />\r\n    <node name=\"plane\" pkg=\"gazebo_ros\" type=\"spawn_model\" output=\"screen\" args=\"-sdf -file $(arg sdf) -model $(arg vehicle) -x 1 -y 1 -z 0 -R 0 -P 0 -Y 0\"/>\r\n\r\n    <arg name=\"fcu_url\" default=\"udp://:14540@127.0.0.1:14557\"/>\r\n    <arg name=\"respawn_mavros\" default=\"false\"/>\r\n    <!-- PX4 configs -->\r\n    <arg name=\"interactive\" default=\"true\"/>\r\n    <arg unless=\"$(arg interactive)\" name=\"px4_command_arg1\" value=\"-d\"/>\r\n    <arg     if=\"$(arg interactive)\" name=\"px4_command_arg1\" value=\"\"/>\r\n    <node name=\"sitl\" pkg=\"px4\" type=\"px4\" output=\"screen\"\r\n          args=\"$(find px4)/ROMFS/px4fmu_common -s etc/init.d-posix/rcS $(arg px4_command_arg1)\" required=\"true\"/>\r\n\r\n    <!-- MAVROS -->\r\n    <!-- GCS link is provided by SITL -->\r\n    <arg name=\"gcs_url\" value=\"\"/>\r\n<!--    <arg name=\"fcu_url\" value=\"$(arg fcu_url)\"/>-->\r\n    <arg name=\"tgt_system\" default=\"1\" />\r\n    <arg name=\"tgt_component\" default=\"1\" />\r\n    <arg name=\"log_output\" default=\"screen\" />\r\n    <arg name=\"fcu_protocol\" default=\"v2.0\" />\r\n    <!--<arg name=\"respawn_mavros\" default=\"false\" />-->\r\n    <!--px4_config.yaml-->\r\n    <arg name=\"pluginlists_yaml\" value=\"$(find mavros)/launch/px4_pluginlists.yaml\" />\r\n    <arg name=\"config_yaml\" value=\"$(find mavros)/launch/px4_config.yaml\" />\r\n    <!-- mavros node.launch-->\r\n    <node pkg=\"mavros\" type=\"mavros_node\" name=\"mavros\" required=\"$(eval not respawn_mavros)\" clear_params=\"true\" output=\"$(arg log_output)\" respawn=\"$(arg respawn_mavros)\">\r\n        <param name=\"fcu_url\" value=\"$(arg fcu_url)\" />\r\n        <param name=\"gcs_url\" value=\"$(arg gcs_url)\" />\r\n        <param name=\"target_system_id\" value=\"$(arg tgt_system)\" />\r\n        <param name=\"target_component_id\" value=\"$(arg tgt_component)\" />\r\n        <param name=\"fcu_protocol\" value=\"$(arg fcu_protocol)\" />\r\n\r\n        <!-- load blacklist, config -->\r\n        <rosparam command=\"load\" file=\"$(arg pluginlists_yaml)\" />\r\n        <rosparam command=\"load\" file=\"$(arg config_yaml)\" />\r\n    </node>\r\n```", "markup": "markdown", "html": "<h1 id=\"markdown-header-hello-everyone-i-am-new-to-px4_sitl-in-gazebo-though-it-can-run-successfully-before-but-i-got-this-error-now\">Hello everyone, I am new to px4_sitl in gazebo ,though it can run successfully before, But I got this error now:</h1>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">gzserver</span><span class=\"o\">:</span> <span class=\"n\">symbol</span> <span class=\"n\">lookup</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"sr\">/home/wzy/src/Firmware/build/px4_sitl_default/build_gazebo/</span><span class=\"n\">libgazebo_multirotor_base_plugin</span><span class=\"o\">.</span><span class=\"na\">so</span><span class=\"o\">:</span> <span class=\"kc\">undefined</span> <span class=\"n\">symbol</span><span class=\"o\">:</span> <span class=\"n\">_ZN8mav_msgs4msgs10MotorSpeedC1Ev</span>\n</pre></div>\n\n\n<p>After I open gazebo ,it seems normal.</p>\n<p>But when I launch my model , px4 and mavros in a launch file below, I got this error.\nand I am mot edit libgazebo_multirotor_base_plugin relevant .cpp or .hpp</p>\n<p>I see some help in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/issues/2448/problem-running-gazebo7\" rel=\"nofollow\">gazebo</a>,  I even reinstall my ~/src/Firmware </p>\n<p>But it is not work for me ,thanks for any help !</p>\n<h1 id=\"markdown-header-my-launch\">my launch</h1>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;vehicle&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;iris&quot;</span><span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;!--&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;my_model&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;my_iris_fpv_lidar&quot;</span><span class=\"o\">/&gt;--&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;my_model&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;iris&quot;</span><span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;sdf&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;$(find mavlink_sitl_gazebo)/models/$(arg my_model)/$(arg my_model).sdf&quot;</span><span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;est&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;ekf2&quot;</span><span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">env</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;PX4_SIM_MODEL&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg vehicle)&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">env</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;PX4_ESTIMATOR&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg est)&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">node</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;plane&quot;</span> <span class=\"n\">pkg</span><span class=\"o\">=</span><span class=\"s\">&quot;gazebo_ros&quot;</span> <span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;spawn_model&quot;</span> <span class=\"n\">output</span><span class=\"o\">=</span><span class=\"s\">&quot;screen&quot;</span> <span class=\"n\">args</span><span class=\"o\">=</span><span class=\"s\">&quot;-sdf -file $(arg sdf) -model $(arg vehicle) -x 1 -y 1 -z 0 -R 0 -P 0 -Y 0&quot;</span><span class=\"o\">/&gt;</span>\n\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;fcu_url&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;udp://:14540@127.0.0.1:14557&quot;</span><span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;respawn_mavros&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;false&quot;</span><span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;!--</span> <span class=\"n\">PX4</span> <span class=\"n\">configs</span> <span class=\"o\">--&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;interactive&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;true&quot;</span><span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">unless</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg interactive)&quot;</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;px4_command_arg1&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;-d&quot;</span><span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span>     <span class=\"k\">if</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg interactive)&quot;</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;px4_command_arg1&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;&quot;</span><span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">node</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;sitl&quot;</span> <span class=\"n\">pkg</span><span class=\"o\">=</span><span class=\"s\">&quot;px4&quot;</span> <span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;px4&quot;</span> <span class=\"n\">output</span><span class=\"o\">=</span><span class=\"s\">&quot;screen&quot;</span>\n          <span class=\"n\">args</span><span class=\"o\">=</span><span class=\"s\">&quot;$(find px4)/ROMFS/px4fmu_common -s etc/init.d-posix/rcS $(arg px4_command_arg1)&quot;</span> <span class=\"n\">required</span><span class=\"o\">=</span><span class=\"s\">&quot;true&quot;</span><span class=\"o\">/&gt;</span>\n\n    <span class=\"o\">&lt;!--</span> <span class=\"n\">MAVROS</span> <span class=\"o\">--&gt;</span>\n    <span class=\"o\">&lt;!--</span> <span class=\"n\">GCS</span> <span class=\"n\">link</span> <span class=\"n\">is</span> <span class=\"n\">provided</span> <span class=\"n\">by</span> <span class=\"n\">SITL</span> <span class=\"o\">--&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;gcs_url&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;&quot;</span><span class=\"o\">/&gt;</span>\n<span class=\"o\">&lt;!--</span>    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;fcu_url&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg fcu_url)&quot;</span><span class=\"o\">/&gt;--&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;tgt_system&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;1&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;tgt_component&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;1&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;log_output&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;screen&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;fcu_protocol&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;v2.0&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;!--&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;respawn_mavros&quot;</span> <span class=\"k\">default</span><span class=\"o\">=</span><span class=\"s\">&quot;false&quot;</span> <span class=\"o\">/&gt;--&gt;</span>\n    <span class=\"o\">&lt;!--</span><span class=\"n\">px4_config</span><span class=\"p\">.</span><span class=\"n\">yaml</span><span class=\"o\">--&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;pluginlists_yaml&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;$(find mavros)/launch/px4_pluginlists.yaml&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">arg</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;config_yaml&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;$(find mavros)/launch/px4_config.yaml&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;!--</span> <span class=\"n\">mavros</span> <span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">launch</span><span class=\"o\">--&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">node</span> <span class=\"n\">pkg</span><span class=\"o\">=</span><span class=\"s\">&quot;mavros&quot;</span> <span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;mavros_node&quot;</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;mavros&quot;</span> <span class=\"n\">required</span><span class=\"o\">=</span><span class=\"s\">&quot;$(eval not respawn_mavros)&quot;</span> <span class=\"n\">clear_params</span><span class=\"o\">=</span><span class=\"s\">&quot;true&quot;</span> <span class=\"n\">output</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg log_output)&quot;</span> <span class=\"n\">respawn</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg respawn_mavros)&quot;</span><span class=\"o\">&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">param</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;fcu_url&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg fcu_url)&quot;</span> <span class=\"o\">/&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">param</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;gcs_url&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg gcs_url)&quot;</span> <span class=\"o\">/&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">param</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;target_system_id&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg tgt_system)&quot;</span> <span class=\"o\">/&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">param</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;target_component_id&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg tgt_component)&quot;</span> <span class=\"o\">/&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">param</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;fcu_protocol&quot;</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg fcu_protocol)&quot;</span> <span class=\"o\">/&gt;</span>\n\n        <span class=\"o\">&lt;!--</span> <span class=\"n\">load</span> <span class=\"n\">blacklist</span><span class=\"p\">,</span> <span class=\"n\">config</span> <span class=\"o\">--&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">rosparam</span> <span class=\"n\">command</span><span class=\"o\">=</span><span class=\"s\">&quot;load&quot;</span> <span class=\"n\">file</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg pluginlists_yaml)&quot;</span> <span class=\"o\">/&gt;</span>\n        <span class=\"o\">&lt;</span><span class=\"n\">rosparam</span> <span class=\"n\">command</span><span class=\"o\">=</span><span class=\"s\">&quot;load&quot;</span> <span class=\"n\">file</span><span class=\"o\">=</span><span class=\"s\">&quot;$(arg config_yaml)&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">node</span><span class=\"o\">&gt;</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "9.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/242746.json"}}}, "edited_on": null, "created_on": "2020-02-15T12:37:08.077953+00:00", "milestone": null, "updated_on": "2020-02-15T12:37:08.077953+00:00", "type": "issue", "id": 2695}