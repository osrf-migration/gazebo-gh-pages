{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/609/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/609.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/609/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/609/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/609/segfault-when-deleting-noisy-camera"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/609/vote"}}, "reporter": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "title": "Segfault when deleting noisy camera", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Using the camera noise support from pull request #412, deleting a noisy camera causes a segfault.  Backtrace below.  Deleting a non-noisy camera doesn't have this problem.  Must be something with the compositor chain resources.\r\n\r\n    #0  0x00007fffed8194a9 in glDeleteFramebuffersEXT () from /usr/lib/nvidia-current/libGL.so.1\r\n    #1  0x00007fffe02d6cc0 in Ogre::GLFrameBufferObject::~GLFrameBufferObject() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\r\n    #2  0x00007fffe02d6172 in Ogre::GLFBORenderTexture::~GLFBORenderTexture() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\r\n    #3  0x00007fffe02e36c4 in Ogre::GLTextureBuffer::~GLTextureBuffer() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\r\n    #4  0x00007fffe02e3749 in Ogre::GLTextureBuffer::~GLTextureBuffer() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\r\n    #5  0x00007ffff2d5676f in Ogre::SharedPtr<Ogre::HardwarePixelBuffer>::destroy (this=0x7fffe0fc6b68) at /usr/include/OGRE/OgreSharedPtr.h:232\r\n    #6  0x00007ffff2d58f25 in release (this=0x7fffe0fc6b68) at /usr/include/OGRE/OgreSharedPtr.h:218\r\n    #7  ~SharedPtr (this=0x7fffe0fc6b68, __in_chrg=<optimized out>) at /usr/include/OGRE/OgreSharedPtr.h:155\r\n    #8  Ogre::HardwarePixelBufferSharedPtr::~HardwarePixelBufferSharedPtr (this=<optimized out>, __in_chrg=<optimized out>)\r\n        at /usr/include/OGRE/OgreHardwarePixelBuffer.h:195\r\n    #9  0x00007fffe02f4084 in Ogre::GLTexture::freeInternalResourcesImpl() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\r\n    #10 0x00007fffeded5099 in Ogre::Texture::freeInternalResources() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\r\n    #11 0x00007fffeddfebc8 in Ogre::Resource::unload() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\r\n    #12 0x00007fffe02f47b5 in Ogre::GLTexture::~GLTexture() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\r\n    #13 0x00007fffe02f4829 in Ogre::GLTexture::~GLTexture() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\r\n    #14 0x00007fffedca0fff in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\r\n    #15 0x00007fffedca1261 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\r\n    #16 0x00007fffedca6f5f in Ogre::CompositorInstance::freeResources(bool, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\r\n    #17 0x00007fffedca7112 in Ogre::CompositorInstance::~CompositorInstance() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\r\n    #18 0x00007fffedca7229 in Ogre::CompositorInstance::~CompositorInstance() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\r\n    #19 0x00007fffedca29a6 in Ogre::CompositorChain::removeAllCompositors() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\r\n    #20 0x00007fffedca38e8 in Ogre::CompositorChain::destroyResources() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\r\n    #21 0x00007fffeddfb04e in Ogre::RenderTarget::fireViewportRemoved(Ogre::Viewport*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\r\n    #22 0x00007fffeddfaf21 in Ogre::RenderTarget::removeAllViewports() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\r\n    #23 0x00007ffff2d4b838 in gazebo::rendering::Camera::Fini (this=0x279caf0) at /home/gerkey/code/drc/gazebo/gazebo/rendering/Camera.cc:279\r\n    #24 0x00007ffff702c8ed in gazebo::sensors::CameraSensor::Fini (this=0x7fff80056d20) at /home/gerkey/code/drc/gazebo/gazebo/sensors/CameraSensor.cc:150\r\n    #25 0x00007ffff704e9a5 in gazebo::sensors::SensorManager::SensorContainer::RemoveSensor (this=0xd94a50, _name=...)\r\n        at /home/gerkey/code/drc/gazebo/gazebo/sensors/SensorManager.cc:565\r\n    #26 0x00007ffff704eb26 in gazebo::sensors::SensorManager::RemoveSensor (this=0x7ffff75bb1e0, _name=...)\r\n        at /home/gerkey/code/drc/gazebo/gazebo/sensors/SensorManager.cc:315\r\n    #27 0x00007ffff731d7dc in gazebo::physics::Link::Fini (this=0x7fff80055af0) at /home/gerkey/code/drc/gazebo/gazebo/physics/Link.cc:242\r\n    #28 0x00007ffff32f27b6 in gazebo::physics::ODELink::Fini (this=0x7fff80055af0) at /home/gerkey/code/drc/gazebo/gazebo/physics/ode/ODELink.cc:198\r\n    #29 0x00007ffff72e91ce in gazebo::physics::Base::Fini (this=0x7fff8001bcf0) at /home/gerkey/code/drc/gazebo/gazebo/physics/Base.cc:102\r\n    #30 0x00007ffff72f69aa in gazebo::physics::Entity::Fini (this=0x7fff8001bcf0) at /home/gerkey/code/drc/gazebo/gazebo/physics/Entity.cc:516\r\n    #31 0x00007ffff7330d92 in gazebo::physics::Model::Fini (this=0x7fff8001bcf0) at /home/gerkey/code/drc/gazebo/gazebo/physics/Model.cc:319\r\n    #32 0x00007ffff72eb3d8 in gazebo::physics::Base::RemoveChild (this=0xaa0ef0, _name=...) at /home/gerkey/code/drc/gazebo/gazebo/physics/Base.cc:252\r\n    #33 0x00007ffff7358477 in gazebo::physics::World::ProcessEntityMsgs (this=0x8743e0) at /home/gerkey/code/drc/gazebo/gazebo/physics/World.cc:1257\r\n    #34 0x00007ffff736377e in gazebo::physics::World::ProcessMessages (this=0x8743e0) at /home/gerkey/code/drc/gazebo/gazebo/physics/World.cc:1740\r\n    #35 0x00007ffff7363fd7 in gazebo::physics::World::Step (this=0x8743e0) at /home/gerkey/code/drc/gazebo/gazebo/physics/World.cc:500\r\n    #36 0x00007ffff7364ed8 in gazebo::physics::World::RunLoop (this=0x8743e0) at /home/gerkey/code/drc/gazebo/gazebo/physics/World.cc:353\r\n    #37 0x00007ffff5f42ce9 in thread_proxy () from /usr/lib/libboost_thread.so.1.46.1\r\n    #38 0x00007ffff6aace9a in start_thread (arg=0x7fff8affd700) at pthread_create.c:308\r\n    #39 0x00007ffff52ebcbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\r\n    #40 0x0000000000000000 in ?? ()\r\n", "markup": "markdown", "html": "<p>Using the camera noise support from <a href=\"#!/osrf/gazebo/pull-requests/412/add-gaussian-noise-to-cameras-issue-608\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #412</a>, deleting a noisy camera causes a segfault.  Backtrace below.  Deleting a non-noisy camera doesn't have this problem.  Must be something with the compositor chain resources.</p>\n<div class=\"codehilite\"><pre><span></span>#0  0x00007fffed8194a9 in glDeleteFramebuffersEXT () from /usr/lib/nvidia-current/libGL.so.1\n#1  0x00007fffe02d6cc0 in Ogre::GLFrameBufferObject::~GLFrameBufferObject() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\n#2  0x00007fffe02d6172 in Ogre::GLFBORenderTexture::~GLFBORenderTexture() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\n#3  0x00007fffe02e36c4 in Ogre::GLTextureBuffer::~GLTextureBuffer() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\n#4  0x00007fffe02e3749 in Ogre::GLTextureBuffer::~GLTextureBuffer() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\n#5  0x00007ffff2d5676f in Ogre::SharedPtr&lt;Ogre::HardwarePixelBuffer&gt;::destroy (this=0x7fffe0fc6b68) at /usr/include/OGRE/OgreSharedPtr.h:232\n#6  0x00007ffff2d58f25 in release (this=0x7fffe0fc6b68) at /usr/include/OGRE/OgreSharedPtr.h:218\n#7  ~SharedPtr (this=0x7fffe0fc6b68, __in_chrg=&lt;optimized out&gt;) at /usr/include/OGRE/OgreSharedPtr.h:155\n#8  Ogre::HardwarePixelBufferSharedPtr::~HardwarePixelBufferSharedPtr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;)\n    at /usr/include/OGRE/OgreHardwarePixelBuffer.h:195\n#9  0x00007fffe02f4084 in Ogre::GLTexture::freeInternalResourcesImpl() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\n#10 0x00007fffeded5099 in Ogre::Texture::freeInternalResources() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\n#11 0x00007fffeddfebc8 in Ogre::Resource::unload() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\n#12 0x00007fffe02f47b5 in Ogre::GLTexture::~GLTexture() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\n#13 0x00007fffe02f4829 in Ogre::GLTexture::~GLTexture() () from /usr/lib/x86_64-linux-gnu/OGRE-1.7.4/RenderSystem_GL.so\n#14 0x00007fffedca0fff in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\n#15 0x00007fffedca1261 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\n#16 0x00007fffedca6f5f in Ogre::CompositorInstance::freeResources(bool, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\n#17 0x00007fffedca7112 in Ogre::CompositorInstance::~CompositorInstance() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\n#18 0x00007fffedca7229 in Ogre::CompositorInstance::~CompositorInstance() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\n#19 0x00007fffedca29a6 in Ogre::CompositorChain::removeAllCompositors() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\n#20 0x00007fffedca38e8 in Ogre::CompositorChain::destroyResources() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\n#21 0x00007fffeddfb04e in Ogre::RenderTarget::fireViewportRemoved(Ogre::Viewport*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\n#22 0x00007fffeddfaf21 in Ogre::RenderTarget::removeAllViewports() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.7.4\n#23 0x00007ffff2d4b838 in gazebo::rendering::Camera::Fini (this=0x279caf0) at /home/gerkey/code/drc/gazebo/gazebo/rendering/Camera.cc:279\n#24 0x00007ffff702c8ed in gazebo::sensors::CameraSensor::Fini (this=0x7fff80056d20) at /home/gerkey/code/drc/gazebo/gazebo/sensors/CameraSensor.cc:150\n#25 0x00007ffff704e9a5 in gazebo::sensors::SensorManager::SensorContainer::RemoveSensor (this=0xd94a50, _name=...)\n    at /home/gerkey/code/drc/gazebo/gazebo/sensors/SensorManager.cc:565\n#26 0x00007ffff704eb26 in gazebo::sensors::SensorManager::RemoveSensor (this=0x7ffff75bb1e0, _name=...)\n    at /home/gerkey/code/drc/gazebo/gazebo/sensors/SensorManager.cc:315\n#27 0x00007ffff731d7dc in gazebo::physics::Link::Fini (this=0x7fff80055af0) at /home/gerkey/code/drc/gazebo/gazebo/physics/Link.cc:242\n#28 0x00007ffff32f27b6 in gazebo::physics::ODELink::Fini (this=0x7fff80055af0) at /home/gerkey/code/drc/gazebo/gazebo/physics/ode/ODELink.cc:198\n#29 0x00007ffff72e91ce in gazebo::physics::Base::Fini (this=0x7fff8001bcf0) at /home/gerkey/code/drc/gazebo/gazebo/physics/Base.cc:102\n#30 0x00007ffff72f69aa in gazebo::physics::Entity::Fini (this=0x7fff8001bcf0) at /home/gerkey/code/drc/gazebo/gazebo/physics/Entity.cc:516\n#31 0x00007ffff7330d92 in gazebo::physics::Model::Fini (this=0x7fff8001bcf0) at /home/gerkey/code/drc/gazebo/gazebo/physics/Model.cc:319\n#32 0x00007ffff72eb3d8 in gazebo::physics::Base::RemoveChild (this=0xaa0ef0, _name=...) at /home/gerkey/code/drc/gazebo/gazebo/physics/Base.cc:252\n#33 0x00007ffff7358477 in gazebo::physics::World::ProcessEntityMsgs (this=0x8743e0) at /home/gerkey/code/drc/gazebo/gazebo/physics/World.cc:1257\n#34 0x00007ffff736377e in gazebo::physics::World::ProcessMessages (this=0x8743e0) at /home/gerkey/code/drc/gazebo/gazebo/physics/World.cc:1740\n#35 0x00007ffff7363fd7 in gazebo::physics::World::Step (this=0x8743e0) at /home/gerkey/code/drc/gazebo/gazebo/physics/World.cc:500\n#36 0x00007ffff7364ed8 in gazebo::physics::World::RunLoop (this=0x8743e0) at /home/gerkey/code/drc/gazebo/gazebo/physics/World.cc:353\n#37 0x00007ffff5f42ce9 in thread_proxy () from /usr/lib/libboost_thread.so.1.46.1\n#38 0x00007ffff6aace9a in start_thread (arg=0x7fff8affd700) at pthread_create.c:308\n#39 0x00007ffff52ebcbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\n#40 0x0000000000000000 in ?? ()\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "state": "closed", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2013-03-27T03:29:53.891075+00:00", "milestone": null, "updated_on": "2016-09-14T19:43:50.189387+00:00", "type": "issue", "id": 609}