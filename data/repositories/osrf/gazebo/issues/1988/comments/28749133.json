{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1988/comments/28749133.json"}, "html": {"href": "#!/osrf/gazebo/issues/1988#comment-28749133"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1988.json"}}, "type": "issue", "id": 1988, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Insert actors from the left panel"}, "content": {"raw": "This patch allows it to insert an actor (like [this](#!/osrf/gazebo_models/src/325bca9f10f7a3aeefa2ec9affc67f5a5b8983bb/actor_walk/?at=actor_walk) one for example) from the left panel, but the preview is a sphere and the clicked pose is ignored by the animation, which is hardcoded in the actor.\n\n~~~\ndiff -r ddbff1c9bcb0 gazebo/gui/ModelMaker.cc\n--- a/gazebo/gui/ModelMaker.cc\tTue Jun 21 09:26:34 2016 -0700\n+++ b/gazebo/gui/ModelMaker.cc\tThu Jun 23 10:58:39 2016 -0700\n@@ -188,9 +188,11 @@\n     modelElem = this->dataPtr->modelSDF->Root()->GetElement(\"model\");\n   else if (this->dataPtr->modelSDF->Root()->HasElement(\"light\"))\n     modelElem = this->dataPtr->modelSDF->Root()->GetElement(\"light\");\n+  else if (this->dataPtr->modelSDF->Root()->HasElement(\"actor\"))\n+    modelElem = this->dataPtr->modelSDF->Root()->GetElement(\"actor\");\n   else\n   {\n-    gzerr << \"No model or light in SDF\\n\";\n+    gzerr << \"No model, actor or light in SDF\\n\";\n     return false;\n   }\n \n@@ -216,6 +218,10 @@\n   {\n     this->dataPtr->modelVisual->AttachMesh(\"unit_sphere\");\n   }\n+  else if (modelElem->GetName() == \"actor\")\n+  {\n+    this->dataPtr->modelVisual->AttachMesh(\"unit_sphere\");\n+  }\n   else\n   {\n     return false;\n@@ -357,6 +363,10 @@\n     {\n       modelElem = this->dataPtr->modelSDF->Root()->GetElement(\"model\");\n     }\n+    else if (this->dataPtr->modelSDF->Root()->HasElement(\"actor\"))\n+    {\n+      modelElem = this->dataPtr->modelSDF->Root()->GetElement(\"actor\");\n+    }\n     else\n     {\n       gzerr << \"Couldn't find model element in sdf, won't create entity.\"\n~~~", "markup": "markdown", "html": "<p>This patch allows it to insert an actor (like <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo_models/src/325bca9f10f7a3aeefa2ec9affc67f5a5b8983bb/actor_walk/?at=actor_walk\" rel=\"nofollow\">this</a> one for example) from the left panel, but the preview is a sphere and the clicked pose is ignored by the animation, which is hardcoded in the actor.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r ddbff1c9bcb0 gazebo/gui/ModelMaker.cc</span>\n<span class=\"gd\">--- a/gazebo/gui/ModelMaker.cc  Tue Jun 21 09:26:34 2016 -0700</span>\n<span class=\"gi\">+++ b/gazebo/gui/ModelMaker.cc  Thu Jun 23 10:58:39 2016 -0700</span>\n<span class=\"gu\">@@ -188,9 +188,11 @@</span>\n     modelElem = this-&gt;dataPtr-&gt;modelSDF-&gt;Root()-&gt;GetElement(&quot;model&quot;);\n   else if (this-&gt;dataPtr-&gt;modelSDF-&gt;Root()-&gt;HasElement(&quot;light&quot;))\n     modelElem = this-&gt;dataPtr-&gt;modelSDF-&gt;Root()-&gt;GetElement(&quot;light&quot;);\n<span class=\"gi\">+  else if (this-&gt;dataPtr-&gt;modelSDF-&gt;Root()-&gt;HasElement(&quot;actor&quot;))</span>\n<span class=\"gi\">+    modelElem = this-&gt;dataPtr-&gt;modelSDF-&gt;Root()-&gt;GetElement(&quot;actor&quot;);</span>\n   else\n   {\n<span class=\"gd\">-    gzerr &lt;&lt; &quot;No model or light in SDF\\n&quot;;</span>\n<span class=\"gi\">+    gzerr &lt;&lt; &quot;No model, actor or light in SDF\\n&quot;;</span>\n     return false;\n   }\n\n<span class=\"gu\">@@ -216,6 +218,10 @@</span>\n   {\n     this-&gt;dataPtr-&gt;modelVisual-&gt;AttachMesh(&quot;unit_sphere&quot;);\n   }\n<span class=\"gi\">+  else if (modelElem-&gt;GetName() == &quot;actor&quot;)</span>\n<span class=\"gi\">+  {</span>\n<span class=\"gi\">+    this-&gt;dataPtr-&gt;modelVisual-&gt;AttachMesh(&quot;unit_sphere&quot;);</span>\n<span class=\"gi\">+  }</span>\n   else\n   {\n     return false;\n<span class=\"gu\">@@ -357,6 +363,10 @@</span>\n     {\n       modelElem = this-&gt;dataPtr-&gt;modelSDF-&gt;Root()-&gt;GetElement(&quot;model&quot;);\n     }\n<span class=\"gi\">+    else if (this-&gt;dataPtr-&gt;modelSDF-&gt;Root()-&gt;HasElement(&quot;actor&quot;))</span>\n<span class=\"gi\">+    {</span>\n<span class=\"gi\">+      modelElem = this-&gt;dataPtr-&gt;modelSDF-&gt;Root()-&gt;GetElement(&quot;actor&quot;);</span>\n<span class=\"gi\">+    }</span>\n     else\n     {\n       gzerr &lt;&lt; &quot;Couldn&#39;t find model element in sdf, won&#39;t create entity.&quot;\n</pre></div>", "type": "rendered"}, "created_on": "2016-06-23T18:02:35.726768+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": null, "type": "issue_comment", "id": 28749133}