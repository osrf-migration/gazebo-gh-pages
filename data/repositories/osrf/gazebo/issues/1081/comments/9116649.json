{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9116649.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9116649"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "Hi, John. This reminds me of the problem we had before with one of the contact tests. That test case hard coded the wrong answer as produced by ODE, then tested against that. Wouldn't the right answer in this case be ```v=v0+h*f/m, x=x0+dt*v0+(dt^2/2)*f/m```?\n \nThe test instead specifies \n```x=x0+dt*v0+(dt^2)*f/m```\n (missing the final divide by 2) so it is too large. Are you sure that Simbody and/or Bullet are not getting closer to the right answer? (I believe we are using error control in Simbody so it might well have taken several smaller steps at the start, rather than a single step as ODE would have done.)\n\nIMO it would be better to have the test cases use the correct physical answers as standards and then require that the various engines achieve that to within some acceptable tolerance. Can this test be reworked so it is less ODE-centric?\n\nRegards,\nSherm", "markup": "markdown", "html": "<p>Hi, John. This reminds me of the problem we had before with one of the contact tests. That test case hard coded the wrong answer as produced by ODE, then tested against that. Wouldn't the right answer in this case be <code>v=v0+h*f/m, x=x0+dt*v0+(dt^2/2)*f/m</code>?</p>\n<p>The test instead specifies \n<code>x=x0+dt*v0+(dt^2)*f/m</code>\n (missing the final divide by 2) so it is too large. Are you sure that Simbody and/or Bullet are not getting closer to the right answer? (I believe we are using error control in Simbody so it might well have taken several smaller steps at the start, rather than a single step as ODE would have done.)</p>\n<p>IMO it would be better to have the test cases use the correct physical answers as standards and then require that the various engines achieve that to within some acceptable tolerance. Can this test be reworked so it is less ODE-centric?</p>\n<p>Regards,\nSherm</p>", "type": "rendered"}, "created_on": "2014-03-14T03:29:23.694148+00:00", "user": {"display_name": "Michael Sherman", "uuid": "{997c6f1e-e2a3-4f0e-8fa4-fed745840d50}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D"}, "html": {"href": "https://bitbucket.org/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/355dea43ed612b7be3c9361df2d52213d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMS-2.png"}}, "nickname": "sherm1", "type": "user", "account_id": "557058:4590c319-b75f-4187-93d4-6cec61da74f7"}, "updated_on": "2014-03-14T03:33:07.667347+00:00", "type": "issue_comment", "id": 9116649}