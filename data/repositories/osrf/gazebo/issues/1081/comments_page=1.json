{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9114791.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9114791"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "Same is true with `GetWorldPose` when using bullet.\n\nDebugging by taking one step and printing out [`BulletMotionState::pose` ](#!/osrf/gazebo/src/e01a9d50cbf7add0d4b81111a7fd9e7a69b6b178/gazebo/physics/bullet/BulletMotionState.cc?at=default#cl-60).  It appears bullet internals is one step behind.  Looks like a bug in bullet.", "markup": "markdown", "html": "<p>Same is true with <code>GetWorldPose</code> when using bullet.</p>\n<p>Debugging by taking one step and printing out <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/e01a9d50cbf7add0d4b81111a7fd9e7a69b6b178/gazebo/physics/bullet/BulletMotionState.cc?at=default#cl-60\" rel=\"nofollow\"><code>BulletMotionState::pose</code> </a>.  It appears bullet internals is one step behind.  Looks like a bug in bullet.</p>", "type": "rendered"}, "created_on": "2014-03-13T23:09:15.143955+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2014-03-13T23:57:30.561835+00:00", "type": "issue_comment", "id": 9114791}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9115162.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9115162"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2014-03-13T23:59:29.922654+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 9115162}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9115374.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9115374"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "Added a test in b806c84 called `SimplePushTest`, which basically applies a force to an object for one time step and measures resulting velocity and position.\n\nBullet and Simbody are having trouble with this test.\n\n@sherm1, @erwincoumans \nany hints on what might be wrong?\nThanks!", "markup": "markdown", "html": "<p>Added a test in <a href=\"#!/osrf/gazebo/commits/b806c84\" rel=\"nofollow\" class=\"ap-connect-link\">b806c84</a> called <code>SimplePushTest</code>, which basically applies a force to an object for one time step and measures resulting velocity and position.</p>\n<p>Bullet and Simbody are having trouble with this test.</p>\n<p>@sherm1, @erwincoumans \nany hints on what might be wrong?\nThanks!</p>", "type": "rendered"}, "created_on": "2014-03-14T00:38:56.140833+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2014-03-14T00:49:18.142690+00:00", "type": "issue_comment", "id": 9115374}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9116649.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9116649"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "Hi, John. This reminds me of the problem we had before with one of the contact tests. That test case hard coded the wrong answer as produced by ODE, then tested against that. Wouldn't the right answer in this case be ```v=v0+h*f/m, x=x0+dt*v0+(dt^2/2)*f/m```?\n \nThe test instead specifies \n```x=x0+dt*v0+(dt^2)*f/m```\n (missing the final divide by 2) so it is too large. Are you sure that Simbody and/or Bullet are not getting closer to the right answer? (I believe we are using error control in Simbody so it might well have taken several smaller steps at the start, rather than a single step as ODE would have done.)\n\nIMO it would be better to have the test cases use the correct physical answers as standards and then require that the various engines achieve that to within some acceptable tolerance. Can this test be reworked so it is less ODE-centric?\n\nRegards,\nSherm", "markup": "markdown", "html": "<p>Hi, John. This reminds me of the problem we had before with one of the contact tests. That test case hard coded the wrong answer as produced by ODE, then tested against that. Wouldn't the right answer in this case be <code>v=v0+h*f/m, x=x0+dt*v0+(dt^2/2)*f/m</code>?</p>\n<p>The test instead specifies \n<code>x=x0+dt*v0+(dt^2)*f/m</code>\n (missing the final divide by 2) so it is too large. Are you sure that Simbody and/or Bullet are not getting closer to the right answer? (I believe we are using error control in Simbody so it might well have taken several smaller steps at the start, rather than a single step as ODE would have done.)</p>\n<p>IMO it would be better to have the test cases use the correct physical answers as standards and then require that the various engines achieve that to within some acceptable tolerance. Can this test be reworked so it is less ODE-centric?</p>\n<p>Regards,\nSherm</p>", "type": "rendered"}, "created_on": "2014-03-14T03:29:23.694148+00:00", "user": {"display_name": "Michael Sherman", "uuid": "{997c6f1e-e2a3-4f0e-8fa4-fed745840d50}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D"}, "html": {"href": "https://bitbucket.org/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/355dea43ed612b7be3c9361df2d52213d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMS-2.png"}}, "nickname": "sherm1", "type": "user", "account_id": "557058:4590c319-b75f-4187-93d4-6cec61da74f7"}, "updated_on": "2014-03-14T03:33:07.667347+00:00", "type": "issue_comment", "id": 9116649}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9117274.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9117274"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "Sorry Sherm, false alarm.  I just realized some implementations such as `SimbodyLink::AddForce` were still missing.  Now that things are moving, I'll try re-implementing 1D integration used by simbody in the test.\n\nThanks!", "markup": "markdown", "html": "<p>Sorry Sherm, false alarm.  I just realized some implementations such as <code>SimbodyLink::AddForce</code> were still missing.  Now that things are moving, I'll try re-implementing 1D integration used by simbody in the test.</p>\n<p>Thanks!</p>", "type": "rendered"}, "created_on": "2014-03-14T04:58:24.135347+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 9117274}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9117292.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9117292"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "Great!", "markup": "markdown", "html": "<p>Great!</p>", "type": "rendered"}, "created_on": "2014-03-14T05:01:54.551172+00:00", "user": {"display_name": "Michael Sherman", "uuid": "{997c6f1e-e2a3-4f0e-8fa4-fed745840d50}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D"}, "html": {"href": "https://bitbucket.org/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/355dea43ed612b7be3c9361df2d52213d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMS-2.png"}}, "nickname": "sherm1", "type": "user", "account_id": "557058:4590c319-b75f-4187-93d4-6cec61da74f7"}, "updated_on": null, "type": "issue_comment", "id": 9117292}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9117407.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9117407"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "[the simbody integrator that passes the test](#!/osrf/gazebo/commits/e26b70e02893#Ltest/integration/physics.ccT1441)", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/commits/e26b70e02893#Ltest/integration/physics.ccT1441\" rel=\"nofollow\">the simbody integrator that passes the test</a></p>", "type": "rendered"}, "created_on": "2014-03-14T05:17:20.096426+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 9117407}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9127226.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9127226"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "Is that because it took two half-steps?\n\nThis test sees to have the property that it will fail if anyone improves their solver. For example, if Simbody switches to using a 2nd order method (as opposed to two small 1st-order steps) it will fail that test since it would then get the correct result. \n\nIf this is what you want to test, you might consider renaming the test to something that conveys \"make sure physics engine is using the expected solver\". Then it would fail if the solver changed. If it is to test integration, why not use the true answer and take enough steps to make sure all the physics engines are approximating that reasonably?", "markup": "markdown", "html": "<p>Is that because it took two half-steps?</p>\n<p>This test sees to have the property that it will fail if anyone improves their solver. For example, if Simbody switches to using a 2nd order method (as opposed to two small 1st-order steps) it will fail that test since it would then get the correct result. </p>\n<p>If this is what you want to test, you might consider renaming the test to something that conveys \"make sure physics engine is using the expected solver\". Then it would fail if the solver changed. If it is to test integration, why not use the true answer and take enough steps to make sure all the physics engines are approximating that reasonably?</p>", "type": "rendered"}, "created_on": "2014-03-14T15:35:41.225014+00:00", "user": {"display_name": "Michael Sherman", "uuid": "{997c6f1e-e2a3-4f0e-8fa4-fed745840d50}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D"}, "html": {"href": "https://bitbucket.org/%7B997c6f1e-e2a3-4f0e-8fa4-fed745840d50%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/355dea43ed612b7be3c9361df2d52213d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMS-2.png"}}, "nickname": "sherm1", "type": "user", "account_id": "557058:4590c319-b75f-4187-93d4-6cec61da74f7"}, "updated_on": null, "type": "issue_comment", "id": 9127226}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9129845.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9129845"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "I think so, the algebra worked out that way.\n\nThis test was added because I wanted to catch physics update that was one step behind.\n\nOnce the physics params PR is in, and the different integrator options are hooked up, we should definitely think about extending this test to do the same sanity checks against different integrators.\n\nMore tests that check against analytical accuracy ([like the existing simple pendulum test](#!/osrf/gazebo/src/a31bea1209aa66877598ca11847b5bd5dd43175a/test/integration/joint_revolute.cc?at=default#cl-578)) are needed, as well as checks on basic numerical convergence / consistency / stability / etc.\n", "markup": "markdown", "html": "<p>I think so, the algebra worked out that way.</p>\n<p>This test was added because I wanted to catch physics update that was one step behind.</p>\n<p>Once the physics params PR is in, and the different integrator options are hooked up, we should definitely think about extending this test to do the same sanity checks against different integrators.</p>\n<p>More tests that check against analytical accuracy (<a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/a31bea1209aa66877598ca11847b5bd5dd43175a/test/integration/joint_revolute.cc?at=default#cl-578\" rel=\"nofollow\">like the existing simple pendulum test</a>) are needed, as well as checks on basic numerical convergence / consistency / stability / etc.</p>", "type": "rendered"}, "created_on": "2014-03-14T18:30:19.576434+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 9129845}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9170587.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9170587"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "Failing tests that depends on this fix:\n\n  * [PhysicsLinkTest::SetVelocity](#!/osrf/gazebo/src/bcf8ac5600111f9f4f4093826c4574e961e88db8/test/integration/physics_link.cc?at=bullet_screw_joint#cl-82)\n  * [PhysicsTest::SimplePushTest](#!/osrf/gazebo/src/bcf8ac5600111f9f4f4093826c4574e961e88db8/test/integration/physics.cc?at=bullet_screw_joint#cl-1333)\n  * [JointTestScrew::ScrewJointForce](#!/osrf/gazebo/src/bcf8ac5600111f9f4f4093826c4574e961e88db8/test/integration/joint_screw.cc?at=bullet_screw_joint#cl-171)\n  * [JointTestUniversal::UniversalJointForce](#!/osrf/gazebo/src/4a4dc5c940cbb977700040c5492eb1401625da4f/test/integration/joint_universal.cc?at=bullet_universal_joint#cl-246)\n  * [JointTestUniversal::UniversalJointSetWorldPose](#!/osrf/gazebo/src/066f8bc2b2ad6320843412b161792229bff31229/test/integration/joint_universal.cc?at=bullet_universal_joint#cl-238)", "markup": "markdown", "html": "<p>Failing tests that depends on this fix:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/bcf8ac5600111f9f4f4093826c4574e961e88db8/test/integration/physics_link.cc?at=bullet_screw_joint#cl-82\" rel=\"nofollow\">PhysicsLinkTest::SetVelocity</a></li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/bcf8ac5600111f9f4f4093826c4574e961e88db8/test/integration/physics.cc?at=bullet_screw_joint#cl-1333\" rel=\"nofollow\">PhysicsTest::SimplePushTest</a></li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/bcf8ac5600111f9f4f4093826c4574e961e88db8/test/integration/joint_screw.cc?at=bullet_screw_joint#cl-171\" rel=\"nofollow\">JointTestScrew::ScrewJointForce</a></li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/4a4dc5c940cbb977700040c5492eb1401625da4f/test/integration/joint_universal.cc?at=bullet_universal_joint#cl-246\" rel=\"nofollow\">JointTestUniversal::UniversalJointForce</a></li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/066f8bc2b2ad6320843412b161792229bff31229/test/integration/joint_universal.cc?at=bullet_universal_joint#cl-238\" rel=\"nofollow\">JointTestUniversal::UniversalJointSetWorldPose</a></li>\n</ul>", "type": "rendered"}, "created_on": "2014-03-17T16:06:57.185187+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2014-03-18T21:23:59.824720+00:00", "type": "issue_comment", "id": 9170587}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/9378465.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-9378465"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "I moved the SimplePushTest to branch issue_1081 in 6082035.\n\nI think I would like the test to be set up a little differently, since it seems like more of a test about the specific integrator and not a generic physics test.", "markup": "markdown", "html": "<p>I moved the SimplePushTest to branch issue_1081 in <a href=\"#!/osrf/gazebo/commits/6082035\" rel=\"nofollow\" class=\"ap-connect-link\">6082035</a>.</p>\n<p>I think I would like the test to be set up a little differently, since it seems like more of a test about the specific integrator and not a generic physics test.</p>", "type": "rendered"}, "created_on": "2014-03-28T22:53:38.833302+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 9378465}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/10298774.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-10298774"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "split off issue #1194 for the problem being one step behind.", "markup": "markdown", "html": "<p>split off issue <a href=\"#!/osrf/gazebo/issues/1194/bullet-states-lagging-behind-by-one-step\" rel=\"nofollow\" title=\"Bullet states lagging behind by one step (simulation timestep)\" class=\"ap-connect-link\">#1194</a> for the problem being one step behind.</p>", "type": "rendered"}, "created_on": "2014-05-21T20:10:43.053427+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 10298774}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/11644955.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-11644955"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "I've tracked this down to our use of bullet motion states to get updated poses. The [btDiscreteDynamicsWorld::synchronizeSingleMotionState function](https://github.com/bulletphysics/bullet3/blob/master/src/BulletDynamics/Dynamics/btDiscreteDynamicsWorld.cpp#L349-L368) does some interpolation, and it appears to send the old transform to setWorldTransform. I have a fix in mind.\n\n@erwincoumans perhaps we're using the bullet motion states wrong? Note that we call [stepSimulation](#!/osrf/gazebo/src/fccdeb63fb46c23087876f4e10780c7e7898650d/gazebo/physics/bullet/BulletPhysics.cc?at=default#cl-475) with:\n~~~\nthis->dynamicsWorld->stepSimulation(this->maxStepSize, 1, this->maxStepSize)\n~~~\n\n", "markup": "markdown", "html": "<p>I've tracked this down to our use of bullet motion states to get updated poses. The <a data-is-external-link=\"true\" href=\"https://github.com/bulletphysics/bullet3/blob/master/src/BulletDynamics/Dynamics/btDiscreteDynamicsWorld.cpp#L349-L368\" rel=\"nofollow\">btDiscreteDynamicsWorld::synchronizeSingleMotionState function</a> does some interpolation, and it appears to send the old transform to setWorldTransform. I have a fix in mind.</p>\n<p>@erwincoumans perhaps we're using the bullet motion states wrong? Note that we call <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/fccdeb63fb46c23087876f4e10780c7e7898650d/gazebo/physics/bullet/BulletPhysics.cc?at=default#cl-475\" rel=\"nofollow\">stepSimulation</a> with:</p>\n<div class=\"codehilite\"><pre><span></span>this-&gt;dynamicsWorld-&gt;stepSimulation(this-&gt;maxStepSize, 1, this-&gt;maxStepSize)\n</pre></div>", "type": "rendered"}, "created_on": "2014-08-06T18:41:52.798714+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 11644955}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/12281761.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-12281761"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "see pull request #1199", "markup": "markdown", "html": "<p>see <a href=\"#!/osrf/gazebo/pull-requests/1199/partial-fixes-for-bullet-off-by-one\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1199</a></p>", "type": "rendered"}, "created_on": "2014-09-11T00:47:26.213928+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 12281761}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/14685871.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-14685871"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": "pull request #1199", "markup": "markdown", "html": "<p><a href=\"#!/osrf/gazebo/pull-requests/1199/partial-fixes-for-bullet-off-by-one\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #1199</a></p>", "type": "rendered"}, "created_on": "2015-01-08T14:02:20.034967+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 14685871}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/30610865.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-30610865"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2016-09-14T19:23:40.671607+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 30610865}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081/comments/30612077.json"}, "html": {"href": "#!/osrf/gazebo/issues/1081#comment-30612077"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1081.json"}}, "type": "issue", "id": 1081, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "BulletLink::SetLinearVel is off by one timestep"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2016-09-14T19:43:46.835125+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 30612077}], "page": 1, "size": 17}