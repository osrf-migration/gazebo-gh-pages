{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1776/comments/25621803.json"}, "html": {"href": "#!/osrf/gazebo/issues/1776#comment-25621803"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1776.json"}}, "type": "issue", "id": 1776, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Windows compilation errors related to WideAngleCamera"}, "content": {"raw": "Hi, \nI've managed to compile gazebo version 7 and all the plugins and lib under windows 7 MCVS12 64bits\nI'll probably make a pull request but I didn't did it in a very elegant way so I don't what it's worth.\n\nHere's a list of the modification I did but I'm afraid I forgot to note some:\n\nChange configure.bat according to paths and compilers used. Need to be runned 2 times ... dunno why.\n\nWorking compilations (in order of dependencies)\ngazebomsgs_out .........OK\ngazebo_math ............OK\ngazebo_common ..........OK\ngazebo_msgs ............OK\ngazebo_transport .......OK\ngzqtpropertybrowser ....OK\ngazebo_util ............OK\ngazebo_rendering .......OK  --> very long compilation time\ngazebo_gui .............OK\ngzclient ...............OK\n\nDON'T FORGET TO SET BUILD_TYPE TO RELEASE WHEN COMPILING UNDER VS\n\n\nin D:\\gz-ws\\boost_1_56_0\\boost\\utility\\detail\\result_of_iterate.hpp \n\tadd typename at l128:\n\t\ttypedef decltype(\n\n\nin WideAngleCamera.hh\n\tadd in includes\n\t\t#include \"gazebo/rendering/CameraLensPrivate.hh\"\n\tcomment l66:\n\t\tpublic: ~CameraLens() = default;\n\n\nin CMakeList.txt of gazebo_msgs\n\tthe output gazebomsgs_out.exe is created under ./Release instead of the directory, provoking errors because protoc.exe, which uses \n\tgazebomsgs_out.exe as a pluging couldn't find it. As a way to fix that, changed in the CMakeList.txt the path to the pluging\n\t-->Need to make it proper so that when using NMake instead of MCVS it looks in the current dir and not Release.\n\n\nin GLWidget.cc\n\tl920 change to:\n\t\togreHandle = std::to_string((int)this->winId());\n\n\nin rest_response.proto\n\tchange the variable ERROR to _ERROR to avoid collision with existing define \n\n\n\nin CameraLensPrivate.hh\n\tadd\n\t\t#include <functional>\n\t\t\n\n```\n#!c++\n\n#define decltype(...) std::common_type<decltype(__VA_ARGS__)>::type\n```\n\n\tworkaround for a VS bug (cf doc)\n\tadd \t\n\n```\n#!c++\n\n#undef decltype(...) std::common_type<decltype(__VA_ARGS__)>::type\n```\n\n\totherwise provoke error in boost when declare type in result_of_iterate.hpp\n\n\nin CMakeList.txt general\n\treduced warning from all to 4 (Wall to W4) it was warning for padding ....\n\n\nGood luck with that", "markup": "markdown", "html": "<p>Hi, \nI've managed to compile gazebo version 7 and all the plugins and lib under windows 7 MCVS12 64bits\nI'll probably make a pull request but I didn't did it in a very elegant way so I don't what it's worth.</p>\n<p>Here's a list of the modification I did but I'm afraid I forgot to note some:</p>\n<p>Change configure.bat according to paths and compilers used. Need to be runned 2 times ... dunno why.</p>\n<p>Working compilations (in order of dependencies)\ngazebomsgs_out .........OK\ngazebo_math ............OK\ngazebo_common ..........OK\ngazebo_msgs ............OK\ngazebo_transport .......OK\ngzqtpropertybrowser ....OK\ngazebo_util ............OK\ngazebo_rendering .......OK  --&gt; very long compilation time\ngazebo_gui .............OK\ngzclient ...............OK</p>\n<p>DON'T FORGET TO SET BUILD_TYPE TO RELEASE WHEN COMPILING UNDER VS</p>\n<p>in D:\\gz-ws\\boost_1_56_0\\boost\\utility\\detail\\result_of_iterate.hpp \n    add typename at l128:\n        typedef decltype(</p>\n<p>in WideAngleCamera.hh\n    add in includes\n        #include \"gazebo/rendering/CameraLensPrivate.hh\"\n    comment l66:\n        public: ~CameraLens() = default;</p>\n<p>in CMakeList.txt of gazebo_msgs\n    the output gazebomsgs_out.exe is created under ./Release instead of the directory, provoking errors because protoc.exe, which uses \n    gazebomsgs_out.exe as a pluging couldn't find it. As a way to fix that, changed in the CMakeList.txt the path to the pluging\n    --&gt;Need to make it proper so that when using NMake instead of MCVS it looks in the current dir and not Release.</p>\n<p>in GLWidget.cc\n    l920 change to:\n        ogreHandle = std::to_string((int)this-&gt;winId());</p>\n<p>in rest_response.proto\n    change the variable ERROR to _ERROR to avoid collision with existing define </p>\n<p>in CameraLensPrivate.hh\n    add\n        #include &lt;functional&gt;</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"cp\">#define decltype(...) std::common_type&lt;decltype(__VA_ARGS__)&gt;::type</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>workaround for a VS bug (cf doc)\nadd\n</pre></div>\n\n\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"cp\">#undef decltype(...) std::common_type&lt;decltype(__VA_ARGS__)&gt;::type</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>otherwise provoke error in boost when declare type in result_of_iterate.hpp\n</pre></div>\n\n\n<p>in CMakeList.txt general\n    reduced warning from all to 4 (Wall to W4) it was warning for padding ....</p>\n<p>Good luck with that</p>", "type": "rendered"}, "created_on": "2016-02-19T16:58:55.043805+00:00", "user": {"display_name": "XB32Z", "uuid": "{256c5193-3bf3-4409-936c-3dd8b397ede3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B256c5193-3bf3-4409-936c-3dd8b397ede3%7D"}, "html": {"href": "https://bitbucket.org/%7B256c5193-3bf3-4409-936c-3dd8b397ede3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8feaac46b6e59fd8b5553b0a08b1a555d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsX-3.png"}}, "nickname": "XB32Z", "type": "user", "account_id": "557058:5cdc187a-ac66-4d49-a809-fc8d5c36b512"}, "updated_on": "2016-02-19T17:00:31.062698+00:00", "type": "issue_comment", "id": 25621803}