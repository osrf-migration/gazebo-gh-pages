{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1858/comments/48982492.json"}, "html": {"href": "#!/osrf/gazebo/issues/1858#comment-48982492"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1858.json"}}, "type": "issue", "id": 1858, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "Road texture does not show in camera sensor data"}, "content": {"raw": "Hi,\n\nthis issue appears with Gazebo 6.5.1 as well as with Gazebo 8.6.0. We have implemented a WorldPlugin, which parses a RoadNetwork and then heuristically converts the roads into road messages, which are published over a registered publisher:\n\n```\n#!c++\n\n  m_road_publisher = m_node->Advertise<msgs::Road>(\"~/roads\", 10000); // publish for visualization\n```\nIrrespectively, wether custom or the default gazebo road textures are used, such message looks like:\n\n```\n#!\n\nname: \"Road_1_3531551\"\nwidth: 6\npoint {\n  x: -358.30692360555969\n  y: 196.53521005846258\n  z: 0.05\n}\npoint {\n  x: -334.35436988133006\n  y: 183.50174461258575\n  z: 0.05\n}\npoint {\n  x: -305.99414504831657\n  y: 167.79828227683902\n  z: 0.05\n}\npoint {\n  x: -288.27405962743796\n  y: 158.47638747887686\n  z: 0.05\n}\npoint {\n  x: -277.98349802428856\n  y: 152.77515100967139\n  z: 0.05\n}\n[...]\n\nmaterial {\n  script {\n    uri: \"file://media/materials/scripts/gazebo.material\"\n    name: \"Gazebo/Primary\"\n  }\n}\n\n```\nWe have recognized that the gzclient as well as the server gets problems, if we publish a bunch of messages, starting from publishing ~20 messages (for each road segment or intersection a separate one): Some roads are visualized and some are not. This even differs between the gzclient and the elements visualized on the gzserver (captured by a virtual camera). We attached an exemplary screenshot to demonstrate this effect: \n\n![Road_errors.png](data/bitbucket.org/repo/jgXqbo/images/138041364-Road_errors.png)\n\nVarying the publishing rate of the publisher to 50, but also 100Hz seems also to worsen the problem. We assume that this is due to lost messages between the pugin's publisher and the gzclient and gzserver-specific subscriber.", "markup": "markdown", "html": "<p>Hi,</p>\n<p>this issue appears with Gazebo 6.5.1 as well as with Gazebo 8.6.0. We have implemented a WorldPlugin, which parses a RoadNetwork and then heuristically converts the roads into road messages, which are published over a registered publisher:</p>\n<div class=\"codehilite language-c++\"><pre><span></span>  <span class=\"n\">m_road_publisher</span> <span class=\"o\">=</span> <span class=\"n\">m_node</span><span class=\"o\">-&gt;</span><span class=\"n\">Advertise</span><span class=\"o\">&lt;</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Road</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"s\">&quot;~/roads&quot;</span><span class=\"p\">,</span> <span class=\"mi\">10000</span><span class=\"p\">);</span> <span class=\"c1\">// publish for visualization</span>\n</pre></div>\n\n\n<p>Irrespectively, wether custom or the default gazebo road textures are used, such message looks like:</p>\n<div class=\"codehilite\"><pre><span></span>name: &quot;Road_1_3531551&quot;\nwidth: 6\npoint {\n  x: -358.30692360555969\n  y: 196.53521005846258\n  z: 0.05\n}\npoint {\n  x: -334.35436988133006\n  y: 183.50174461258575\n  z: 0.05\n}\npoint {\n  x: -305.99414504831657\n  y: 167.79828227683902\n  z: 0.05\n}\npoint {\n  x: -288.27405962743796\n  y: 158.47638747887686\n  z: 0.05\n}\npoint {\n  x: -277.98349802428856\n  y: 152.77515100967139\n  z: 0.05\n}\n[...]\n\nmaterial {\n  script {\n    uri: &quot;file://media/materials/scripts/gazebo.material&quot;\n    name: &quot;Gazebo/Primary&quot;\n  }\n}\n</pre></div>\n\n\n<p>We have recognized that the gzclient as well as the server gets problems, if we publish a bunch of messages, starting from publishing ~20 messages (for each road segment or intersection a separate one): Some roads are visualized and some are not. This even differs between the gzclient and the elements visualized on the gzserver (captured by a virtual camera). We attached an exemplary screenshot to demonstrate this effect: </p>\n<p><img alt=\"Road_errors.png\" src=\"data/bitbucket.org/repo/jgXqbo/images/138041364-Road_errors.png\" /></p>\n<p>Varying the publishing rate of the publisher to 50, but also 100Hz seems also to worsen the problem. We assume that this is due to lost messages between the pugin's publisher and the gzclient and gzserver-specific subscriber.</p>", "type": "rendered"}, "created_on": "2018-11-17T05:47:17.627898+00:00", "user": {"display_name": "MarcZofka", "uuid": "{8e492043-1cf9-4b92-b4a3-fddba650d752}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8e492043-1cf9-4b92-b4a3-fddba650d752%7D"}, "html": {"href": "https://bitbucket.org/%7B8e492043-1cf9-4b92-b4a3-fddba650d752%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/464aedaf98009220dfbcb95b5611ec90d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsM-5.png"}}, "nickname": "GzMRZ", "type": "user", "account_id": "557058:d819a9eb-8b76-48aa-9fd8-c23583587a7b"}, "updated_on": "2018-11-17T05:48:45.010702+00:00", "type": "issue_comment", "id": 48982492}