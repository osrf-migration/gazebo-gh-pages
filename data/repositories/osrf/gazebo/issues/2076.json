{"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2076/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2076.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2076/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2076/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2076/segmentation-fault-when-using"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2076/vote"}}, "reporter": null, "title": "Segmentation fault when using  -D_GLIBCXX_DEBUG flag with model plugins on latest (7.4.0) release", "component": null, "votes": 1, "watches": 2, "content": {"raw": "To reproduce: On 7.4.0 using Ubuntu 16.04LTS, when using the -D_GLIBCXX_DEBUG compiler flag with the model plugin example on the Gazebo website, there is a seg fault. Backtrace from GDB below.\r\n\r\n~~~\r\n#0  0x00007fff909e8854 in std::less<int>::operator()(int const&, int const&) const () from /home/evan/Downloads/libmodel_push.so\r\n#1  0x00007fff909eaf02 in std::_Rb_tree<int, std::pair<int const, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> > >, std::_Select1st<std::pair<int const, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> > > >, std::less<int>, std::allocator<std::pair<int const, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> > > > >::_M_lower_bound(std::_Rb_tree_node<std::pair<int const, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> > > >*, std::_Rb_tree_node<std::pair<int const, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> > > >*, int const&) () from /home/evan/Downloads/libmodel_push.so\r\n#2  0x00007fff909ea573 in std::_Rb_tree<int, std::pair<int const, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> > >, std::_Select1st<std::pair<int const, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> > > >, std::less<int>, std::allocator<std::pair<int const, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> > > > >::lower_bound(int const&) () from /home/evan/Downloads/libmodel_push.so\r\n#3  0x00007fff909e996d in std::__cxx1998::map<int, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> >, std::less<int>, std::allocator<std::pair<int const, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> > > > >::lower_bound(int const&) () from /home/evan/Downloads/libmodel_push.so\r\n#4  0x00007fff909e8a79 in std::__cxx1998::map<int, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> >, std::less<int>, std::allocator<std::pair<int const, std::shared_ptr<gazebo::event::EventConnection<void (gazebo::common::UpdateInfo const&)> > > > >::operator[](int const&) () from /home/evan/Downloads/libmodel_push.so\r\n#5  0x00007fff909e7c5e in gazebo::event::EventT<void (gazebo::common::UpdateInfo const&)>::Connect(boost::function<void (gazebo::common::UpdateInfo const&)> const&) () from /home/evan/Downloads/libmodel_push.so\r\n#6  0x00007fff909e6917 in boost::shared_ptr<gazebo::event::Connection> gazebo::event::Events::ConnectWorldUpdateBegin<boost::_bi::bind_t<void, boost::_mfi::mf1<void, gazebo::ModelPush, gazebo::common::UpdateInfo const&>, boost::_bi::list2<boost::_bi::value<gazebo::ModelPush*>, boost::arg<1> > > >(boost::_bi::bind_t<void, boost::_mfi::mf1<void, gazebo::ModelPush, gazebo::common::UpdateInfo const&>, boost::_bi::list2<boost::_bi::value<gazebo::ModelPush*>, boost::arg<1> > >) () from /home/evan/Downloads/libmodel_push.so\r\n#7  0x00007fff909e564b in gazebo::ModelPush::Load(boost::shared_ptr<gazebo::physics::Model>, std::shared_ptr<sdf::Element>) ()\r\n   from /home/evan/Downloads/libmodel_push.so\r\n#8  0x00007ffff624aefc in gazebo::physics::Model::LoadPlugin(std::shared_ptr<sdf::Element>) ()\r\n   from /usr/lib/x86_64-linux-gnu/libgazebo_physics.so.7\r\n#9  0x00007ffff624de30 in gazebo::physics::Model::LoadPlugins() () from /usr/lib/x86_64-linux-gnu/libgazebo_physics.so.7\r\n#10 0x00007ffff6292b05 in gazebo::physics::World::LoadPlugins() () from /usr/lib/x86_64-linux-gnu/libgazebo_physics.so.7\r\n#11 0x00007ffff62a4fd5 in gazebo::physics::World::Step() () from /usr/lib/x86_64-linux-gnu/libgazebo_physics.so.7\r\n#12 0x00007ffff62a5365 in gazebo::physics::World::RunLoop() () from /usr/lib/x86_64-linux-gnu/libgazebo_physics.so.7\r\n#13 0x00007ffff40525d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0\r\n#14 0x00007ffff65c46fa in start_thread (arg=0x7fff91bf8700) at pthread_create.c:333\r\n#15 0x00007ffff6bcdb5d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\r\n~~~", "markup": "markdown", "html": "<p>To reproduce: On 7.4.0 using Ubuntu 16.04LTS, when using the -D_GLIBCXX_DEBUG compiler flag with the model plugin example on the Gazebo website, there is a seg fault. Backtrace from GDB below.</p>\n<div class=\"codehilite\"><pre><span></span>#0  0x00007fff909e8854 in std::less&lt;int&gt;::operator()(int const&amp;, int const&amp;) const () from /home/evan/Downloads/libmodel_push.so\n#1  0x00007fff909eaf02 in std::_Rb_tree&lt;int, std::pair&lt;int const, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt; &gt;, std::_Select1st&lt;std::pair&lt;int const, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt; &gt; &gt;, std::less&lt;int&gt;, std::allocator&lt;std::pair&lt;int const, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt; &gt; &gt; &gt;::_M_lower_bound(std::_Rb_tree_node&lt;std::pair&lt;int const, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt; &gt; &gt;*, std::_Rb_tree_node&lt;std::pair&lt;int const, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt; &gt; &gt;*, int const&amp;) () from /home/evan/Downloads/libmodel_push.so\n#2  0x00007fff909ea573 in std::_Rb_tree&lt;int, std::pair&lt;int const, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt; &gt;, std::_Select1st&lt;std::pair&lt;int const, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt; &gt; &gt;, std::less&lt;int&gt;, std::allocator&lt;std::pair&lt;int const, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt; &gt; &gt; &gt;::lower_bound(int const&amp;) () from /home/evan/Downloads/libmodel_push.so\n#3  0x00007fff909e996d in std::__cxx1998::map&lt;int, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt;, std::less&lt;int&gt;, std::allocator&lt;std::pair&lt;int const, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt; &gt; &gt; &gt;::lower_bound(int const&amp;) () from /home/evan/Downloads/libmodel_push.so\n#4  0x00007fff909e8a79 in std::__cxx1998::map&lt;int, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt;, std::less&lt;int&gt;, std::allocator&lt;std::pair&lt;int const, std::shared_ptr&lt;gazebo::event::EventConnection&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; &gt; &gt; &gt; &gt;::operator[](int const&amp;) () from /home/evan/Downloads/libmodel_push.so\n#5  0x00007fff909e7c5e in gazebo::event::EventT&lt;void (gazebo::common::UpdateInfo const&amp;)&gt;::Connect(boost::function&lt;void (gazebo::common::UpdateInfo const&amp;)&gt; const&amp;) () from /home/evan/Downloads/libmodel_push.so\n#6  0x00007fff909e6917 in boost::shared_ptr&lt;gazebo::event::Connection&gt; gazebo::event::Events::ConnectWorldUpdateBegin&lt;boost::_bi::bind_t&lt;void, boost::_mfi::mf1&lt;void, gazebo::ModelPush, gazebo::common::UpdateInfo const&amp;&gt;, boost::_bi::list2&lt;boost::_bi::value&lt;gazebo::ModelPush*&gt;, boost::arg&lt;1&gt; &gt; &gt; &gt;(boost::_bi::bind_t&lt;void, boost::_mfi::mf1&lt;void, gazebo::ModelPush, gazebo::common::UpdateInfo const&amp;&gt;, boost::_bi::list2&lt;boost::_bi::value&lt;gazebo::ModelPush*&gt;, boost::arg&lt;1&gt; &gt; &gt;) () from /home/evan/Downloads/libmodel_push.so\n#7  0x00007fff909e564b in gazebo::ModelPush::Load(boost::shared_ptr&lt;gazebo::physics::Model&gt;, std::shared_ptr&lt;sdf::Element&gt;) ()\n   from /home/evan/Downloads/libmodel_push.so\n#8  0x00007ffff624aefc in gazebo::physics::Model::LoadPlugin(std::shared_ptr&lt;sdf::Element&gt;) ()\n   from /usr/lib/x86_64-linux-gnu/libgazebo_physics.so.7\n#9  0x00007ffff624de30 in gazebo::physics::Model::LoadPlugins() () from /usr/lib/x86_64-linux-gnu/libgazebo_physics.so.7\n#10 0x00007ffff6292b05 in gazebo::physics::World::LoadPlugins() () from /usr/lib/x86_64-linux-gnu/libgazebo_physics.so.7\n#11 0x00007ffff62a4fd5 in gazebo::physics::World::Step() () from /usr/lib/x86_64-linux-gnu/libgazebo_physics.so.7\n#12 0x00007ffff62a5365 in gazebo::physics::World::RunLoop() () from /usr/lib/x86_64-linux-gnu/libgazebo_physics.so.7\n#13 0x00007ffff40525d5 in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0\n#14 0x00007ffff65c46fa in start_thread (arg=0x7fff91bf8700) at pthread_create.c:333\n#15 0x00007ffff6bcdb5d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2016-10-19T19:03:46.453516+00:00", "milestone": null, "updated_on": "2016-10-19T19:10:18.172708+00:00", "type": "issue", "id": 2076}