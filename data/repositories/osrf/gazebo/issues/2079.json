{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2079/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2079.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2079/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2079/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2079/gzserver-hang-during-shutdown"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2079/vote"}}, "reporter": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "title": "gzserver hang during shutdown", "component": {"name": "transport", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122882.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "Recently, gzserver has been less responsive to `Ctrl+C`. I recently attached to a hanging process (running [test/worlds/revolute_joint_test.world](#!/osrf/gazebo/src/192a57657ec0d4873f695a3dec026064aec0240e/test/worlds/revolute_joint_test.world?fileviewer=file-view-default)) and got a backtrace showing that it is stuck in an infinite loop in `Publisher::Fini`:\r\n\r\n~~~\r\n(gdb) bt\r\n#0  __clock_nanosleep (clock_id=0, flags=0, req=0x7ffd5d1a9040, rem=0xffffffffffffffff) at ../sysdeps/unix/sysv/linux/clock_nanosleep.c:49\r\n#1  0x00007f2cbad3c393 in gazebo::common::Time::Sleep (_time=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:427\r\n#2  0x00007f2cbad3c557 in gazebo::common::Time::MSleep (_ms=_ms@entry=10) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:446\r\n#3  0x00007f2cb9a222a7 in gazebo::transport::Publisher::Fini (this=0x35cb520) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/Publisher.cc:266\r\n#4  0x00007f2cb9a199e0 in gazebo::transport::Node::Fini (this=0x35cb370) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/Node.cc:60\r\n#5  0x00007f2cb960dff7 in gazebo::physics::Entity::Fini (this=this@entry=0x35cafc0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:597\r\n#6  0x00007f2cb95fd073 in gazebo::physics::Collision::Fini (this=0x35cafc0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Collision.cc:99\r\n#7  0x00007f2cb95fb250 in gazebo::physics::Base::RemoveChild (this=this@entry=0x35b76f0, _child=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:248\r\n#8  0x00007f2cb95fb496 in gazebo::physics::Base::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:107\r\n#9  0x00007f2cb960e0d0 in gazebo::physics::Entity::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:610\r\n#10 0x00007f2cb963ab63 in gazebo::physics::Link::Fini (this=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Link.cc:302\r\n#11 0x00007f2cb95fb250 in gazebo::physics::Base::RemoveChild (this=this@entry=0x3014680, _child=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:248\r\n#12 0x00007f2cb95fb6b1 in gazebo::physics::Base::RemoveChild (this=0x3014680, _id=<optimized out>) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:203\r\n#13 0x00007f2cb95fb450 in gazebo::physics::Base::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:100\r\n#14 0x00007f2cb960e0d0 in gazebo::physics::Entity::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:610\r\n#15 0x00007f2cb963ab63 in gazebo::physics::Link::Fini (this=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Link.cc:302\r\n#16 0x00007f2cb965347e in gazebo::physics::Model::Fini (this=0x3014680) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Model.cc:440\r\n#17 0x00007f2cb9690ae6 in gazebo::physics::World::Fini (this=0x154c210) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/World.cc:857\r\n#18 0x00007f2cb9667a01 in gazebo::physics::remove_worlds () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/PhysicsIface.cc:155\r\n#19 0x00007f2cb9667a99 in gazebo::physics::fini () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/PhysicsIface.cc:49\r\n#20 0x00007f2cbafa4507 in gazebo::shutdown () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/gazebo.cc:140\r\n#21 0x00007f2cbaf910cd in gazebo::Server::Run (this=0xb96130) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/Server.cc:578\r\n#22 0x0000000000402229 in __cxa_free_exception@plt ()\r\n#23 0x00000000006057b0 in ?? ()\r\n#24 0x00000000004025da in main (argc=3, argv=0x7ffd5d1a9e08) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/server_main.cc:25\r\n~~~\r\n\r\nHere's the full backtrace; maybe the TopicManager has already died?\r\n\r\n~~~\r\n(gdb) thread apply all bt\r\n\r\nThread 19 (Thread 0x7f2c978ad700 (LWP 13263)):\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\r\n#1  0x00007f2cbad1171b in boost::condition_variable::wait (this=0xb29228, m=...) at /usr/include/boost/thread/pthread/condition_variable.hpp:73\r\n#2  0x00007f2cbad0bbdf in gazebo::common::ModelDatabase::UpdateModelCache (this=0x7f2cbb1b8560 <SingletonT<gazebo::common::ModelDatabase>::GetInstance()::t>, _fetchImmediately=false) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/ModelDatabase.cc:284\r\n#3  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#4  0x00007f2cb8922184 in start_thread (arg=0x7f2c978ad700) at pthread_create.c:312\r\n#5  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 18 (Thread 0x7f2c96de3700 (LWP 13264)):\r\n#0  0x00007f2cb9d45a13 in epoll_wait () at ../sysdeps/unix/syscall-template.S:81\r\n#1  0x00007f2cb9a04dc8 in boost::asio::detail::epoll_reactor::run (this=0xbba540, block=<optimized out>, ops=...) at /usr/include/boost/asio/detail/impl/epoll_reactor.ipp:392\r\n#2  0x00007f2cb9a0a558 in do_run_one (ec=..., this_thread=..., lock=..., this=<optimized out>) at /usr/include/boost/asio/detail/impl/task_io_service.ipp:368\r\n#3  boost::asio::detail::task_io_service::run (this=0xbba0b0, ec=...) at /usr/include/boost/asio/detail/impl/task_io_service.ipp:153\r\n#4  0x00007f2cb9a192c6 in boost::asio::io_service::run (this=0xbb9700) at /usr/include/boost/asio/impl/io_service.ipp:59\r\n#5  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#6  0x00007f2cb8922184 in start_thread (arg=0x7f2c96de3700) at pthread_create.c:312\r\n#7  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 17 (Thread 0x7f2c965e2700 (LWP 13265)):\r\n#0  __clock_nanosleep (clock_id=0, flags=0, req=0x7f2c965e1d10, rem=0xffffffffffffffff) at ../sysdeps/unix/sysv/linux/clock_nanosleep.c:49\r\n#1  0x00007f2cbad3c393 in gazebo::common::Time::Sleep (_time=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:427\r\n#2  0x00007f2cbad3c557 in gazebo::common::Time::MSleep (_ms=_ms@entry=10) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:446\r\n#3  0x00007f2cbafa02f5 in gazebo::Master::Run (this=0xbb91b0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/Master.cc:382\r\n#4  0x00007f2cba5dda60 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\r\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c965e2700) at pthread_create.c:312\r\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 16 (Thread 0x7f2c8f05f700 (LWP 13268)):\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\r\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8f05f700) at pthread_create.c:312\r\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 15 (Thread 0x7f2c8e85e700 (LWP 13269)):\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\r\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8e85e700) at pthread_create.c:312\r\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 14 (Thread 0x7f2c8e05d700 (LWP 13270)):\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\r\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8e05d700) at pthread_create.c:312\r\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 13 (Thread 0x7f2c8d85c700 (LWP 13271)):\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\r\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8d85c700) at pthread_create.c:312\r\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 12 (Thread 0x7f2c8d05b700 (LWP 13272)):\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\r\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8d05b700) at pthread_create.c:312\r\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 11 (Thread 0x7f2c8c85a700 (LWP 13273)):\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\r\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8c85a700) at pthread_create.c:312\r\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 10 (Thread 0x7f2c77fff700 (LWP 13274)):\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\r\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c77fff700) at pthread_create.c:312\r\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 9 (Thread 0x7f2c777fe700 (LWP 13275)):\r\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\r\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\r\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\r\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c777fe700) at pthread_create.c:312\r\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 8 (Thread 0x7f2c74600700 (LWP 13279)):\r\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\r\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\r\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\r\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c74600700) at pthread_create.c:312\r\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 7 (Thread 0x7f2c6bfff700 (LWP 13280)):\r\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\r\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\r\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\r\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6bfff700) at pthread_create.c:312\r\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 6 (Thread 0x7f2c6bbfe700 (LWP 13281)):\r\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\r\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\r\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\r\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6bbfe700) at pthread_create.c:312\r\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 5 (Thread 0x7f2c6b7fd700 (LWP 13282)):\r\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\r\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\r\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\r\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6b7fd700) at pthread_create.c:312\r\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 4 (Thread 0x7f2c6b3fc700 (LWP 13284)):\r\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\r\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\r\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\r\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6b3fc700) at pthread_create.c:312\r\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 3 (Thread 0x7f2c6affb700 (LWP 13283)):\r\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\r\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\r\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\r\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6affb700) at pthread_create.c:312\r\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 2 (Thread 0x7f2c6abfa700 (LWP 13285)):\r\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\r\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\r\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\r\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6abfa700) at pthread_create.c:312\r\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\r\n\r\nThread 1 (Thread 0x7f2cbb350880 (LWP 13262)):\r\n#0  __clock_nanosleep (clock_id=0, flags=0, req=0x7ffd5d1a9040, rem=0xffffffffffffffff) at ../sysdeps/unix/sysv/linux/clock_nanosleep.c:49\r\n#1  0x00007f2cbad3c393 in gazebo::common::Time::Sleep (_time=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:427\r\n#2  0x00007f2cbad3c557 in gazebo::common::Time::MSleep (_ms=_ms@entry=10) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:446\r\n#3  0x00007f2cb9a222a7 in gazebo::transport::Publisher::Fini (this=0x35cb520) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/Publisher.cc:266\r\n#4  0x00007f2cb9a199e0 in gazebo::transport::Node::Fini (this=0x35cb370) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/Node.cc:60\r\n#5  0x00007f2cb960dff7 in gazebo::physics::Entity::Fini (this=this@entry=0x35cafc0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:597\r\n#6  0x00007f2cb95fd073 in gazebo::physics::Collision::Fini (this=0x35cafc0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Collision.cc:99\r\n#7  0x00007f2cb95fb250 in gazebo::physics::Base::RemoveChild (this=this@entry=0x35b76f0, _child=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:248\r\n#8  0x00007f2cb95fb496 in gazebo::physics::Base::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:107\r\n#9  0x00007f2cb960e0d0 in gazebo::physics::Entity::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:610\r\n#10 0x00007f2cb963ab63 in gazebo::physics::Link::Fini (this=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Link.cc:302\r\n#11 0x00007f2cb95fb250 in gazebo::physics::Base::RemoveChild (this=this@entry=0x3014680, _child=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:248\r\n#12 0x00007f2cb95fb6b1 in gazebo::physics::Base::RemoveChild (this=0x3014680, _id=<optimized out>) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:203\r\n#13 0x00007f2cb95fb450 in gazebo::physics::Base::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:100\r\n#14 0x00007f2cb960e0d0 in gazebo::physics::Entity::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:610\r\n#15 0x00007f2cb963ab63 in gazebo::physics::Link::Fini (this=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Link.cc:302\r\n#16 0x00007f2cb965347e in gazebo::physics::Model::Fini (this=0x3014680) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Model.cc:440\r\n#17 0x00007f2cb9690ae6 in gazebo::physics::World::Fini (this=0x154c210) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/World.cc:857\r\n#18 0x00007f2cb9667a01 in gazebo::physics::remove_worlds () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/PhysicsIface.cc:155\r\n#19 0x00007f2cb9667a99 in gazebo::physics::fini () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/PhysicsIface.cc:49\r\n#20 0x00007f2cbafa4507 in gazebo::shutdown () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/gazebo.cc:140\r\n#21 0x00007f2cbaf910cd in gazebo::Server::Run (this=0xb96130) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/Server.cc:578\r\n#22 0x0000000000402229 in __cxa_free_exception@plt ()\r\n#23 0x00000000006057b0 in ?? ()\r\n#24 0x00000000004025da in main (argc=3, argv=0x7ffd5d1a9e08) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/server_main.cc:25\r\n(gdb) \r\n~~~", "markup": "markdown", "html": "<p>Recently, gzserver has been less responsive to <code>Ctrl+C</code>. I recently attached to a hanging process (running <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/192a57657ec0d4873f695a3dec026064aec0240e/test/worlds/revolute_joint_test.world?fileviewer=file-view-default\" rel=\"nofollow\">test/worlds/revolute_joint_test.world</a>) and got a backtrace showing that it is stuck in an infinite loop in <code>Publisher::Fini</code>:</p>\n<div class=\"codehilite\"><pre><span></span>(gdb) bt\n#0  __clock_nanosleep (clock_id=0, flags=0, req=0x7ffd5d1a9040, rem=0xffffffffffffffff) at ../sysdeps/unix/sysv/linux/clock_nanosleep.c:49\n#1  0x00007f2cbad3c393 in gazebo::common::Time::Sleep (_time=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:427\n#2  0x00007f2cbad3c557 in gazebo::common::Time::MSleep (_ms=_ms@entry=10) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:446\n#3  0x00007f2cb9a222a7 in gazebo::transport::Publisher::Fini (this=0x35cb520) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/Publisher.cc:266\n#4  0x00007f2cb9a199e0 in gazebo::transport::Node::Fini (this=0x35cb370) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/Node.cc:60\n#5  0x00007f2cb960dff7 in gazebo::physics::Entity::Fini (this=this@entry=0x35cafc0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:597\n#6  0x00007f2cb95fd073 in gazebo::physics::Collision::Fini (this=0x35cafc0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Collision.cc:99\n#7  0x00007f2cb95fb250 in gazebo::physics::Base::RemoveChild (this=this@entry=0x35b76f0, _child=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:248\n#8  0x00007f2cb95fb496 in gazebo::physics::Base::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:107\n#9  0x00007f2cb960e0d0 in gazebo::physics::Entity::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:610\n#10 0x00007f2cb963ab63 in gazebo::physics::Link::Fini (this=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Link.cc:302\n#11 0x00007f2cb95fb250 in gazebo::physics::Base::RemoveChild (this=this@entry=0x3014680, _child=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:248\n#12 0x00007f2cb95fb6b1 in gazebo::physics::Base::RemoveChild (this=0x3014680, _id=&lt;optimized out&gt;) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:203\n#13 0x00007f2cb95fb450 in gazebo::physics::Base::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:100\n#14 0x00007f2cb960e0d0 in gazebo::physics::Entity::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:610\n#15 0x00007f2cb963ab63 in gazebo::physics::Link::Fini (this=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Link.cc:302\n#16 0x00007f2cb965347e in gazebo::physics::Model::Fini (this=0x3014680) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Model.cc:440\n#17 0x00007f2cb9690ae6 in gazebo::physics::World::Fini (this=0x154c210) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/World.cc:857\n#18 0x00007f2cb9667a01 in gazebo::physics::remove_worlds () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/PhysicsIface.cc:155\n#19 0x00007f2cb9667a99 in gazebo::physics::fini () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/PhysicsIface.cc:49\n#20 0x00007f2cbafa4507 in gazebo::shutdown () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/gazebo.cc:140\n#21 0x00007f2cbaf910cd in gazebo::Server::Run (this=0xb96130) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/Server.cc:578\n#22 0x0000000000402229 in __cxa_free_exception@plt ()\n#23 0x00000000006057b0 in ?? ()\n#24 0x00000000004025da in main (argc=3, argv=0x7ffd5d1a9e08) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/server_main.cc:25\n</pre></div>\n\n\n<p>Here's the full backtrace; maybe the TopicManager has already died?</p>\n<div class=\"codehilite\"><pre><span></span>(gdb) thread apply all bt\n\nThread 19 (Thread 0x7f2c978ad700 (LWP 13263)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x00007f2cbad1171b in boost::condition_variable::wait (this=0xb29228, m=...) at /usr/include/boost/thread/pthread/condition_variable.hpp:73\n#2  0x00007f2cbad0bbdf in gazebo::common::ModelDatabase::UpdateModelCache (this=0x7f2cbb1b8560 &lt;SingletonT&lt;gazebo::common::ModelDatabase&gt;::GetInstance()::t&gt;, _fetchImmediately=false) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/ModelDatabase.cc:284\n#3  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#4  0x00007f2cb8922184 in start_thread (arg=0x7f2c978ad700) at pthread_create.c:312\n#5  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 18 (Thread 0x7f2c96de3700 (LWP 13264)):\n#0  0x00007f2cb9d45a13 in epoll_wait () at ../sysdeps/unix/syscall-template.S:81\n#1  0x00007f2cb9a04dc8 in boost::asio::detail::epoll_reactor::run (this=0xbba540, block=&lt;optimized out&gt;, ops=...) at /usr/include/boost/asio/detail/impl/epoll_reactor.ipp:392\n#2  0x00007f2cb9a0a558 in do_run_one (ec=..., this_thread=..., lock=..., this=&lt;optimized out&gt;) at /usr/include/boost/asio/detail/impl/task_io_service.ipp:368\n#3  boost::asio::detail::task_io_service::run (this=0xbba0b0, ec=...) at /usr/include/boost/asio/detail/impl/task_io_service.ipp:153\n#4  0x00007f2cb9a192c6 in boost::asio::io_service::run (this=0xbb9700) at /usr/include/boost/asio/impl/io_service.ipp:59\n#5  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#6  0x00007f2cb8922184 in start_thread (arg=0x7f2c96de3700) at pthread_create.c:312\n#7  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 17 (Thread 0x7f2c965e2700 (LWP 13265)):\n#0  __clock_nanosleep (clock_id=0, flags=0, req=0x7f2c965e1d10, rem=0xffffffffffffffff) at ../sysdeps/unix/sysv/linux/clock_nanosleep.c:49\n#1  0x00007f2cbad3c393 in gazebo::common::Time::Sleep (_time=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:427\n#2  0x00007f2cbad3c557 in gazebo::common::Time::MSleep (_ms=_ms@entry=10) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:446\n#3  0x00007f2cbafa02f5 in gazebo::Master::Run (this=0xbb91b0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/Master.cc:382\n#4  0x00007f2cba5dda60 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c965e2700) at pthread_create.c:312\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 16 (Thread 0x7f2c8f05f700 (LWP 13268)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8f05f700) at pthread_create.c:312\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 15 (Thread 0x7f2c8e85e700 (LWP 13269)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8e85e700) at pthread_create.c:312\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 14 (Thread 0x7f2c8e05d700 (LWP 13270)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8e05d700) at pthread_create.c:312\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 13 (Thread 0x7f2c8d85c700 (LWP 13271)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8d85c700) at pthread_create.c:312\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 12 (Thread 0x7f2c8d05b700 (LWP 13272)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8d05b700) at pthread_create.c:312\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 11 (Thread 0x7f2c8c85a700 (LWP 13273)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c8c85a700) at pthread_create.c:312\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 10 (Thread 0x7f2c77fff700 (LWP 13274)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c77fff700) at pthread_create.c:312\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 9 (Thread 0x7f2c777fe700 (LWP 13275)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x00007f2cb114c690 in ?? () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#2  0x00007f2cb114b6af in Ogre::DefaultWorkQueue::waitForNextRequest() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#3  0x00007f2cb114bb24 in Ogre::DefaultWorkQueue::_threadMain() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.8.1\n#4  0x00007f2cb7647a4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#5  0x00007f2cb8922184 in start_thread (arg=0x7f2c777fe700) at pthread_create.c:312\n#6  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 8 (Thread 0x7f2c74600700 (LWP 13279)):\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c74600700) at pthread_create.c:312\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 7 (Thread 0x7f2c6bfff700 (LWP 13280)):\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6bfff700) at pthread_create.c:312\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 6 (Thread 0x7f2c6bbfe700 (LWP 13281)):\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6bbfe700) at pthread_create.c:312\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 5 (Thread 0x7f2c6b7fd700 (LWP 13282)):\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6b7fd700) at pthread_create.c:312\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 4 (Thread 0x7f2c6b3fc700 (LWP 13284)):\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6b3fc700) at pthread_create.c:312\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 3 (Thread 0x7f2c6affb700 (LWP 13283)):\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6affb700) at pthread_create.c:312\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 2 (Thread 0x7f2c6abfa700 (LWP 13285)):\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\n#1  0x00007f2cb84fa2db in ?? () from /usr/lib/libtbb.so.2\n#2  0x00007f2cb84fa2f9 in ?? () from /usr/lib/libtbb.so.2\n#3  0x00007f2cb8922184 in start_thread (arg=0x7f2c6abfa700) at pthread_create.c:312\n#4  0x00007f2cb9d4537d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\nThread 1 (Thread 0x7f2cbb350880 (LWP 13262)):\n#0  __clock_nanosleep (clock_id=0, flags=0, req=0x7ffd5d1a9040, rem=0xffffffffffffffff) at ../sysdeps/unix/sysv/linux/clock_nanosleep.c:49\n#1  0x00007f2cbad3c393 in gazebo::common::Time::Sleep (_time=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:427\n#2  0x00007f2cbad3c557 in gazebo::common::Time::MSleep (_ms=_ms@entry=10) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/common/Time.cc:446\n#3  0x00007f2cb9a222a7 in gazebo::transport::Publisher::Fini (this=0x35cb520) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/Publisher.cc:266\n#4  0x00007f2cb9a199e0 in gazebo::transport::Node::Fini (this=0x35cb370) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/transport/Node.cc:60\n#5  0x00007f2cb960dff7 in gazebo::physics::Entity::Fini (this=this@entry=0x35cafc0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:597\n#6  0x00007f2cb95fd073 in gazebo::physics::Collision::Fini (this=0x35cafc0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Collision.cc:99\n#7  0x00007f2cb95fb250 in gazebo::physics::Base::RemoveChild (this=this@entry=0x35b76f0, _child=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:248\n#8  0x00007f2cb95fb496 in gazebo::physics::Base::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:107\n#9  0x00007f2cb960e0d0 in gazebo::physics::Entity::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:610\n#10 0x00007f2cb963ab63 in gazebo::physics::Link::Fini (this=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Link.cc:302\n#11 0x00007f2cb95fb250 in gazebo::physics::Base::RemoveChild (this=this@entry=0x3014680, _child=...) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:248\n#12 0x00007f2cb95fb6b1 in gazebo::physics::Base::RemoveChild (this=0x3014680, _id=&lt;optimized out&gt;) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:203\n#13 0x00007f2cb95fb450 in gazebo::physics::Base::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Base.cc:100\n#14 0x00007f2cb960e0d0 in gazebo::physics::Entity::Fini (this=this@entry=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Entity.cc:610\n#15 0x00007f2cb963ab63 in gazebo::physics::Link::Fini (this=0x35b76f0) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Link.cc:302\n#16 0x00007f2cb965347e in gazebo::physics::Model::Fini (this=0x3014680) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/Model.cc:440\n#17 0x00007f2cb9690ae6 in gazebo::physics::World::Fini (this=0x154c210) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/World.cc:857\n#18 0x00007f2cb9667a01 in gazebo::physics::remove_worlds () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/PhysicsIface.cc:155\n#19 0x00007f2cb9667a99 in gazebo::physics::fini () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/physics/PhysicsIface.cc:49\n#20 0x00007f2cbafa4507 in gazebo::shutdown () at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/gazebo.cc:140\n#21 0x00007f2cbaf910cd in gazebo::Server::Run (this=0xb96130) at /data_fast/scpeters/ws/gazebo7/src/gazebo/gazebo/Server.cc:578\n#22 0x0000000000402229 in __cxa_free_exception@plt ()\n#23 0x00000000006057b0 in ?? ()\n#24 0x00000000004025da in main (argc=3, argv=0x7ffd5d1a9e08) at /var/lib/jenkins/workspace/gazebo7-debbuilder/build/gazebo-7.3.1/gazebo/server_main.cc:25\n(gdb) \n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2016-10-25T19:24:41.602510+00:00", "milestone": null, "updated_on": "2016-10-25T19:24:41.602510+00:00", "type": "issue", "id": 2079}