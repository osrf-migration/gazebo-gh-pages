{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636/comments/18890423.json"}, "html": {"href": "#!/osrf/gazebo/issues/1636#comment-18890423"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636.json"}}, "type": "issue", "id": 1636, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "ODE threaded islands sometimes slower on Ubuntu"}, "content": {"raw": "To reproduce the error, run the `INTEGRATION_speed_thread_islands` test on the [thread_islands_ode](#!/osrf/gazebo/branches/compare/thread_islands_ode%0Ddefault) branch. It passes on homebrew but often fails on Ubuntu.\n\nTo debug the problem, I recommend building against sdformat branch `island_threads` and gazebo branch `diagnostics_scpeters`. You can also consider building gazebo with `-DENABLE_DIAGNOSTICS=1` if you want diagnostic timing data. Then use the following procedure:\n\nLaunch the `revolute_joint_test.world`\n~~~\ngzserver --verbose test/worlds/revolute_joint_test.world\n~~~\n\nIn a separate terminal, open `gz stats` to watch the real-time factor:\n~~~\ngz stats\n~~~\n\nIn a separate terminal, use `gz physics` to change the physics parameters:\n~~~\ngz physics -o unthrottled0 # unthrottled, no threading, should be fastest\ngz physics -o unthrottled2 # unthrottled, with 2 island threads, should be faster, but strangely slows down\n~~~\n\nwith the `unthrottled2` profile, opening a gzclient or echoing high-bandwidth topics seems to speed it up\n~~~\ngzclient\ngz topic -e /gazebo/default/pose/local/info\ngz topic -e /gazebo/default/pose/info\ngz topic -e /gazebo/default/physics/contacts\n~~~\n", "markup": "markdown", "html": "<p>To reproduce the error, run the <code>INTEGRATION_speed_thread_islands</code> test on the <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/branches/compare/thread_islands_ode%0Ddefault\" rel=\"nofollow\">thread_islands_ode</a> branch. It passes on homebrew but often fails on Ubuntu.</p>\n<p>To debug the problem, I recommend building against sdformat branch <code>island_threads</code> and gazebo branch <code>diagnostics_scpeters</code>. You can also consider building gazebo with <code>-DENABLE_DIAGNOSTICS=1</code> if you want diagnostic timing data. Then use the following procedure:</p>\n<p>Launch the <code>revolute_joint_test.world</code></p>\n<div class=\"codehilite\"><pre><span></span>gzserver --verbose test/worlds/revolute_joint_test.world\n</pre></div>\n\n\n<p>In a separate terminal, open <code>gz stats</code> to watch the real-time factor:</p>\n<div class=\"codehilite\"><pre><span></span>gz stats\n</pre></div>\n\n\n<p>In a separate terminal, use <code>gz physics</code> to change the physics parameters:</p>\n<div class=\"codehilite\"><pre><span></span>gz physics -o unthrottled0 # unthrottled, no threading, should be fastest\ngz physics -o unthrottled2 # unthrottled, with 2 island threads, should be faster, but strangely slows down\n</pre></div>\n\n\n<p>with the <code>unthrottled2</code> profile, opening a gzclient or echoing high-bandwidth topics seems to speed it up</p>\n<div class=\"codehilite\"><pre><span></span>gzclient\ngz topic -e /gazebo/default/pose/local/info\ngz topic -e /gazebo/default/pose/info\ngz topic -e /gazebo/default/physics/contacts\n</pre></div>", "type": "rendered"}, "created_on": "2015-06-17T18:23:57.571839+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 18890423}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636/comments/30610990.json"}, "html": {"href": "#!/osrf/gazebo/issues/1636#comment-30610990"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636.json"}}, "type": "issue", "id": 1636, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "ODE threaded islands sometimes slower on Ubuntu"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2016-09-14T19:23:58.113747+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 30610990}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636/comments/38134489.json"}, "html": {"href": "#!/osrf/gazebo/issues/1636#comment-38134489"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636.json"}}, "type": "issue", "id": 1636, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "ODE threaded islands sometimes slower on Ubuntu"}, "content": {"raw": "\"I've observed some strange behavior on Ubuntu: sometimes using multiple island threads with a headless gzserver is slower than the unthreaded case, but connecting a gzclient causes it to speed up. Closing the gzclient would cause it to revert to the slower speed.\" \n@scpeters I noticed this behavior as well on both Gazebo 7 with island threads and without the threads. It [seems](#!/osrf/gazebo/issues/2316/pausing-the-physics-in-sensors-onupdate) that in the headless mode when I SetPause the world from a sensor the pause can take a couple of seconds (I saw it going all the way up to 4 seconds simulation time) which breaks the sensor update. On the other hand, this is not the case when gzclient is running. Did you manage to find a proper fix for this? Thank you.", "markup": "markdown", "html": "<p>\"I've observed some strange behavior on Ubuntu: sometimes using multiple island threads with a headless gzserver is slower than the unthreaded case, but connecting a gzclient causes it to speed up. Closing the gzclient would cause it to revert to the slower speed.\" \n@scpeters I noticed this behavior as well on both Gazebo 7 with island threads and without the threads. It <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/issues/2316/pausing-the-physics-in-sensors-onupdate\" rel=\"nofollow\">seems</a> that in the headless mode when I SetPause the world from a sensor the pause can take a couple of seconds (I saw it going all the way up to 4 seconds simulation time) which breaks the sensor update. On the other hand, this is not the case when gzclient is running. Did you manage to find a proper fix for this? Thank you.</p>", "type": "rendered"}, "created_on": "2017-07-10T16:43:39.292153+00:00", "user": {"display_name": "Hamza Merzi\u0107", "uuid": "{2100f54d-6bc6-4db0-ada5-db7be9320606}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2100f54d-6bc6-4db0-ada5-db7be9320606%7D"}, "html": {"href": "https://bitbucket.org/%7B2100f54d-6bc6-4db0-ada5-db7be9320606%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:172a2e1e-2bf2-4054-9b9b-9d541ddc8e4e/ab842f18-c8ca-4a0c-a82a-6d4d39ffdb37/128"}}, "nickname": "hamzaethz", "type": "user", "account_id": "557058:172a2e1e-2bf2-4054-9b9b-9d541ddc8e4e"}, "updated_on": null, "type": "issue_comment", "id": 38134489}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636/comments/39835858.json"}, "html": {"href": "#!/osrf/gazebo/issues/1636#comment-39835858"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636.json"}}, "type": "issue", "id": 1636, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "ODE threaded islands sometimes slower on Ubuntu"}, "content": {"raw": "This is to confirm that even without thread island, i.e.  $ gz physics -o unthrottled0     \nThe simulation is slower when close the gzclient and faster when start the gzclient    \nThis means this slowness when close gzclient is not only related to the number of thread island, but also an issue when we are not using thread island (unthrottled0)   \nI will investigate and see how to fix this!", "markup": "markdown", "html": "<p>This is to confirm that even without thread island, i.e.  $ gz physics -o unthrottled0   <br />\nThe simulation is slower when close the gzclient and faster when start the gzclient  <br />\nThis means this slowness when close gzclient is not only related to the number of thread island, but also an issue when we are not using thread island (unthrottled0) <br />\nI will investigate and see how to fix this!</p>", "type": "rendered"}, "created_on": "2017-09-13T18:52:13.369183+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": null, "type": "issue_comment", "id": 39835858}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636/comments/39939434.json"}, "html": {"href": "#!/osrf/gazebo/issues/1636#comment-39939434"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636.json"}}, "type": "issue", "id": 1636, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "ODE threaded islands sometimes slower on Ubuntu"}, "content": {"raw": "Since merging the `thread_islands_ode` branch to gazebo7, I haven't been able to reproduce this error. I'm going to make a pull request for this branch.", "markup": "markdown", "html": "<p>Since merging the <code>thread_islands_ode</code> branch to gazebo7, I haven't been able to reproduce this error. I'm going to make a pull request for this branch.</p>", "type": "rendered"}, "created_on": "2017-09-18T19:21:11.816776+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 39939434}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636/comments/39939494.json"}, "html": {"href": "#!/osrf/gazebo/issues/1636#comment-39939494"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636.json"}}, "type": "issue", "id": 1636, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "ODE threaded islands sometimes slower on Ubuntu"}, "content": {"raw": "Running a CI build first: https://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/615/", "markup": "markdown", "html": "<p>Running a CI build first: <a href=\"https://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/615/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/gazebo-ci-pr_any-xenial-amd64-gpu-none/615/</a></p>", "type": "rendered"}, "created_on": "2017-09-18T19:25:11.637740+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 39939494}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636/comments/39939517.json"}, "html": {"href": "#!/osrf/gazebo/issues/1636#comment-39939517"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636.json"}}, "type": "issue", "id": 1636, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "ODE threaded islands sometimes slower on Ubuntu"}, "content": {"raw": "This error is related to the real time increase when start gzclient, and should not affect the test at all. I was not able to reproduce the failing tests as well. I will approve the PR once the CI passes", "markup": "markdown", "html": "<p>This error is related to the real time increase when start gzclient, and should not affect the test at all. I was not able to reproduce the failing tests as well. I will approve the PR once the CI passes</p>", "type": "rendered"}, "created_on": "2017-09-18T19:27:03.117876+00:00", "user": {"display_name": "Ying Lu", "uuid": "{11ec131e-4af6-4228-beaf-167b1c8d1c2c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D"}, "html": {"href": "https://bitbucket.org/%7B11ec131e-4af6-4228-beaf-167b1c8d1c2c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:659bfe31-d941-44f5-aa6d-00058b070ea8/c88d5925-8a09-40c7-8684-c02aeafe0f59/128"}}, "nickname": "rosebudflyaway", "type": "user", "account_id": "557058:659bfe31-d941-44f5-aa6d-00058b070ea8"}, "updated_on": null, "type": "issue_comment", "id": 39939517}, {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636/comments/39942413.json"}, "html": {"href": "#!/osrf/gazebo/issues/1636#comment-39942413"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1636.json"}}, "type": "issue", "id": 1636, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "ODE threaded islands sometimes slower on Ubuntu"}, "content": {"raw": "I can't reproduce this problem; created pull request #2775 for this branch", "markup": "markdown", "html": "<p>I can't reproduce this problem; created <a href=\"#!/osrf/gazebo/pull-requests/2775/parallelize-ode-physics-with-threaded\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #2775</a> for this branch</p>", "type": "rendered"}, "created_on": "2017-09-18T22:58:09.393745+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 39942413}], "page": 1, "size": 8}