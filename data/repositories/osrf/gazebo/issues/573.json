{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/573/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/573.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/573/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/573/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/573/standalone-executable-crashes-when-gazebo"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/573/vote"}}, "reporter": {"display_name": "Dereck Wonnacott", "uuid": "{a9f76668-8beb-4cc2-a518-99a40d29a8fc}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba9f76668-8beb-4cc2-a518-99a40d29a8fc%7D"}, "html": {"href": "https://bitbucket.org/%7Ba9f76668-8beb-4cc2-a518-99a40d29a8fc%7D/"}, "avatar": {"href": "https://bitbucket.org/account/dawonn/avatar/"}}, "nickname": "dawonn", "type": "user", "account_id": null}, "title": "Standalone executable crashes when gazebo is not yet started", "component": null, "votes": 0, "watches": 1, "content": {"raw": "If you try to ::init() before gazebo has started, it promptly dies.  Here's a workaround but I'm not sure exactly how to 'fix' it...\r\n\r\n```\r\n#!diff\r\n\r\nhg diff\r\ndiff -r 9c55354cbb52 gazebo/transport/Connection.cc\r\n--- a/gazebo/transport/Connection.cc\tSat Mar 09 15:02:07 2013 -0500\r\n+++ b/gazebo/transport/Connection.cc\tSat Mar 09 20:48:47 2013 -0500\r\n@@ -148,8 +148,8 @@\r\n   if (!this->connectCondition.timed_wait(lock,\r\n         boost::posix_time::milliseconds(60000)) || this->connectError)\r\n   {\r\n-    gzlog << \"Failed to create connection to remote host[\"\r\n-          << host << \":\" << _port << \"]\\n\";\r\n+    //gzlog << \"Failed to create connection to remote host[\"\r\n+    //      << host << \":\" << _port << \"]\\n\";\r\n     this->socket->close();\r\n     return false;\r\n   }\r\n```\r\n\r\nBasically, gzlog has not yet been initialized when the initial connection to Master is attempted, so it bombs. ", "markup": "markdown", "html": "<p>If you try to ::init() before gazebo has started, it promptly dies.  Here's a workaround but I'm not sure exactly how to 'fix' it...</p>\n<div class=\"codehilite language-diff\"><pre><span></span>hg diff\n<span class=\"gh\">diff -r 9c55354cbb52 gazebo/transport/Connection.cc</span>\n<span class=\"gd\">--- a/gazebo/transport/Connection.cc    Sat Mar 09 15:02:07 2013 -0500</span>\n<span class=\"gi\">+++ b/gazebo/transport/Connection.cc    Sat Mar 09 20:48:47 2013 -0500</span>\n<span class=\"gu\">@@ -148,8 +148,8 @@</span>\n   if (!this-&gt;connectCondition.timed_wait(lock,\n         boost::posix_time::milliseconds(60000)) || this-&gt;connectError)\n   {\n<span class=\"gd\">-    gzlog &lt;&lt; &quot;Failed to create connection to remote host[&quot;</span>\n<span class=\"gd\">-          &lt;&lt; host &lt;&lt; &quot;:&quot; &lt;&lt; _port &lt;&lt; &quot;]\\n&quot;;</span>\n<span class=\"gi\">+    //gzlog &lt;&lt; &quot;Failed to create connection to remote host[&quot;</span>\n<span class=\"gi\">+    //      &lt;&lt; host &lt;&lt; &quot;:&quot; &lt;&lt; _port &lt;&lt; &quot;]\\n&quot;;</span>\n     this-&gt;socket-&gt;close();\n     return false;\n   }\n</pre></div>\n\n\n<p>Basically, gzlog has not yet been initialized when the initial connection to Master is attempted, so it bombs. </p>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "1.5", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/49332.json"}}}, "edited_on": null, "created_on": "2013-03-10T01:51:06.107718+00:00", "milestone": null, "updated_on": "2016-09-14T19:45:35.337139+00:00", "type": "issue", "id": 573}