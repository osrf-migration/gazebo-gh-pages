{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1186/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1186.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1186/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1186/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1186/cant-get-animate_joints-plugin-working"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1186/vote"}}, "reporter": {"display_name": "Andrew Symington", "uuid": "{db1311fc-02e6-442e-84a1-4bb85dfee5ba}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bdb1311fc-02e6-442e-84a1-4bb85dfee5ba%7D"}, "html": {"href": "https://bitbucket.org/%7Bdb1311fc-02e6-442e-84a1-4bb85dfee5ba%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:cab3b56e-7c24-487c-b07f-05e0600adf54/8a009f21-29b8-4d43-98ed-2677428e17ff/128"}}, "nickname": "asymingt", "type": "user", "account_id": "557058:cab3b56e-7c24-487c-b07f-05e0600adf54"}, "title": "Can't get animate_joints plugin working", "component": {"name": "physics", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122876.json"}}}, "votes": 0, "watches": 2, "content": {"raw": "Hi There\r\n\r\nI'm modelling a quadrotor in gazebo, and I would like some nice spinning blades for visual effect. However, I don't want the blades to have any physical effect on the dynamics of the platform.\r\n\r\nMy idea is to have a gravity effected body with mass connected by revolute joints to massless, static blades. I then used a simple NumericAnimation to animate the joints. I got this working in gazebo 2, but it stopped working in gazebo3.\r\n\r\nIs there a known issue with NumericAnimation that prevents this from working. I tried to update the animate_joint.world example (see below) with no luck. Is there a new trick to animating a revolute joint between dynamic and static models?\r\n\r\nCheers\r\nAndrew\r\n\r\n```\r\n<?xml version=\"1.0\"?>\r\n<sdf version=\"1.5\">\r\n  <world name=\"test\">\r\n   \r\n    <!-- Physics -->\r\n    <physics type=\"ode\">\r\n      <max_step_size>0.02</max_step_size>\r\n      <real_time_factor>1.0</real_time_factor>\r\n      <real_time_update_rate>50</real_time_update_rate>\r\n    </physics>\r\n\r\n    <!-- Setup a basic scene with a sky and clouds -->\r\n    <scene>\r\n      <sky>\r\n        <time>12.00</time>\r\n        <sunrise>06.23</sunrise>\r\n        <sunset>17.59</sunset>\r\n        <clouds>\r\n          <speed>12</speed>\r\n        </clouds>\r\n      </sky>\r\n      <shadows>false</shadows>\r\n    </scene>\r\n\r\n    <!-- Sun -->\r\n    <include>\r\n      <uri>model://sun</uri>\r\n    </include>\r\n\r\n    <include>\r\n      <uri>model://ground_plane</uri>\r\n    </include>\r\n\r\n    <model name=\"box\">\r\n\r\n      <static>true</static>\r\n\r\n      <link name=\"base_link\">\r\n\r\n        <pose>0 0 0.5 0 0 0</pose>\r\n\r\n        <inertial>\r\n          <mass>1</mass>\r\n        </inertial>\r\n\r\n        <collision name=\"collision\">\r\n          <geometry>\r\n            <box>\r\n              <size>1 1 1</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n\r\n        <visual name=\"visual\">\r\n          <geometry>\r\n            <box>\r\n              <size>1 1 1</size>\r\n            </box>\r\n          </geometry>\r\n        </visual>\r\n\r\n      </link>\r\n\r\n      <link name=\"top_link\">\r\n\r\n        <pose>0 0 1.3 0 0 0</pose>\r\n\r\n        <inertial>\r\n          <mass>1</mass>\r\n        </inertial>\r\n\r\n        <collision name=\"collision\">\r\n          <geometry>\r\n            <box>\r\n              <size>.5 .5 .5</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        \r\n        <visual name=\"visual\">\r\n          <geometry>\r\n            <box>\r\n              <size>.5 .5 .5</size>\r\n            </box>\r\n          </geometry>\r\n        </visual>\r\n      \r\n      </link>\r\n\r\n      <joint name=\"my_joint\" type=\"prismatic\">\r\n        <parent>base_link</parent>\r\n        <child>top_link</child>\r\n        <axis>\r\n          <xyz>0 0 1</xyz>\r\n        </axis>\r\n      </joint>\r\n\r\n      <plugin name=\"animate_joints\" filename=\"libanimate_joints.so\"/>\r\n\r\n    </model>\r\n\r\n  </world>\r\n</sdf>\r\n```\r\n", "markup": "markdown", "html": "<p>Hi There</p>\n<p>I'm modelling a quadrotor in gazebo, and I would like some nice spinning blades for visual effect. However, I don't want the blades to have any physical effect on the dynamics of the platform.</p>\n<p>My idea is to have a gravity effected body with mass connected by revolute joints to massless, static blades. I then used a simple NumericAnimation to animate the joints. I got this working in gazebo 2, but it stopped working in gazebo3.</p>\n<p>Is there a known issue with NumericAnimation that prevents this from working. I tried to update the animate_joint.world example (see below) with no luck. Is there a new trick to animating a revolute joint between dynamic and static models?</p>\n<p>Cheers\nAndrew</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot;?&gt;</span>\n<span class=\"nt\">&lt;sdf</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.5&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;world</span> <span class=\"na\">name=</span><span class=\"s\">&quot;test&quot;</span><span class=\"nt\">&gt;</span>\n\n    <span class=\"c\">&lt;!-- Physics --&gt;</span>\n    <span class=\"nt\">&lt;physics</span> <span class=\"na\">type=</span><span class=\"s\">&quot;ode&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;max_step_size&gt;</span>0.02<span class=\"nt\">&lt;/max_step_size&gt;</span>\n      <span class=\"nt\">&lt;real_time_factor&gt;</span>1.0<span class=\"nt\">&lt;/real_time_factor&gt;</span>\n      <span class=\"nt\">&lt;real_time_update_rate&gt;</span>50<span class=\"nt\">&lt;/real_time_update_rate&gt;</span>\n    <span class=\"nt\">&lt;/physics&gt;</span>\n\n    <span class=\"c\">&lt;!-- Setup a basic scene with a sky and clouds --&gt;</span>\n    <span class=\"nt\">&lt;scene&gt;</span>\n      <span class=\"nt\">&lt;sky&gt;</span>\n        <span class=\"nt\">&lt;time&gt;</span>12.00<span class=\"nt\">&lt;/time&gt;</span>\n        <span class=\"nt\">&lt;sunrise&gt;</span>06.23<span class=\"nt\">&lt;/sunrise&gt;</span>\n        <span class=\"nt\">&lt;sunset&gt;</span>17.59<span class=\"nt\">&lt;/sunset&gt;</span>\n        <span class=\"nt\">&lt;clouds&gt;</span>\n          <span class=\"nt\">&lt;speed&gt;</span>12<span class=\"nt\">&lt;/speed&gt;</span>\n        <span class=\"nt\">&lt;/clouds&gt;</span>\n      <span class=\"nt\">&lt;/sky&gt;</span>\n      <span class=\"nt\">&lt;shadows&gt;</span>false<span class=\"nt\">&lt;/shadows&gt;</span>\n    <span class=\"nt\">&lt;/scene&gt;</span>\n\n    <span class=\"c\">&lt;!-- Sun --&gt;</span>\n    <span class=\"nt\">&lt;include&gt;</span>\n      <span class=\"nt\">&lt;uri&gt;</span>model://sun<span class=\"nt\">&lt;/uri&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n\n    <span class=\"nt\">&lt;include&gt;</span>\n      <span class=\"nt\">&lt;uri&gt;</span>model://ground_plane<span class=\"nt\">&lt;/uri&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n\n    <span class=\"nt\">&lt;model</span> <span class=\"na\">name=</span><span class=\"s\">&quot;box&quot;</span><span class=\"nt\">&gt;</span>\n\n      <span class=\"nt\">&lt;static&gt;</span>true<span class=\"nt\">&lt;/static&gt;</span>\n\n      <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;base_link&quot;</span><span class=\"nt\">&gt;</span>\n\n        <span class=\"nt\">&lt;pose&gt;</span>0 0 0.5 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n\n        <span class=\"nt\">&lt;inertial&gt;</span>\n          <span class=\"nt\">&lt;mass&gt;</span>1<span class=\"nt\">&lt;/mass&gt;</span>\n        <span class=\"nt\">&lt;/inertial&gt;</span>\n\n        <span class=\"nt\">&lt;collision</span> <span class=\"na\">name=</span><span class=\"s\">&quot;collision&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;geometry&gt;</span>\n            <span class=\"nt\">&lt;box&gt;</span>\n              <span class=\"nt\">&lt;size&gt;</span>1 1 1<span class=\"nt\">&lt;/size&gt;</span>\n            <span class=\"nt\">&lt;/box&gt;</span>\n          <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/collision&gt;</span>\n\n        <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&quot;visual&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;geometry&gt;</span>\n            <span class=\"nt\">&lt;box&gt;</span>\n              <span class=\"nt\">&lt;size&gt;</span>1 1 1<span class=\"nt\">&lt;/size&gt;</span>\n            <span class=\"nt\">&lt;/box&gt;</span>\n          <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/visual&gt;</span>\n\n      <span class=\"nt\">&lt;/link&gt;</span>\n\n      <span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;top_link&quot;</span><span class=\"nt\">&gt;</span>\n\n        <span class=\"nt\">&lt;pose&gt;</span>0 0 1.3 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n\n        <span class=\"nt\">&lt;inertial&gt;</span>\n          <span class=\"nt\">&lt;mass&gt;</span>1<span class=\"nt\">&lt;/mass&gt;</span>\n        <span class=\"nt\">&lt;/inertial&gt;</span>\n\n        <span class=\"nt\">&lt;collision</span> <span class=\"na\">name=</span><span class=\"s\">&quot;collision&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;geometry&gt;</span>\n            <span class=\"nt\">&lt;box&gt;</span>\n              <span class=\"nt\">&lt;size&gt;</span>.5 .5 .5<span class=\"nt\">&lt;/size&gt;</span>\n            <span class=\"nt\">&lt;/box&gt;</span>\n          <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/collision&gt;</span>\n\n        <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&quot;visual&quot;</span><span class=\"nt\">&gt;</span>\n          <span class=\"nt\">&lt;geometry&gt;</span>\n            <span class=\"nt\">&lt;box&gt;</span>\n              <span class=\"nt\">&lt;size&gt;</span>.5 .5 .5<span class=\"nt\">&lt;/size&gt;</span>\n            <span class=\"nt\">&lt;/box&gt;</span>\n          <span class=\"nt\">&lt;/geometry&gt;</span>\n        <span class=\"nt\">&lt;/visual&gt;</span>\n\n      <span class=\"nt\">&lt;/link&gt;</span>\n\n      <span class=\"nt\">&lt;joint</span> <span class=\"na\">name=</span><span class=\"s\">&quot;my_joint&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;prismatic&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;parent&gt;</span>base_link<span class=\"nt\">&lt;/parent&gt;</span>\n        <span class=\"nt\">&lt;child&gt;</span>top_link<span class=\"nt\">&lt;/child&gt;</span>\n        <span class=\"nt\">&lt;axis&gt;</span>\n          <span class=\"nt\">&lt;xyz&gt;</span>0 0 1<span class=\"nt\">&lt;/xyz&gt;</span>\n        <span class=\"nt\">&lt;/axis&gt;</span>\n      <span class=\"nt\">&lt;/joint&gt;</span>\n\n      <span class=\"nt\">&lt;plugin</span> <span class=\"na\">name=</span><span class=\"s\">&quot;animate_joints&quot;</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;libanimate_joints.so&quot;</span><span class=\"nt\">/&gt;</span>\n\n    <span class=\"nt\">&lt;/model&gt;</span>\n\n  <span class=\"nt\">&lt;/world&gt;</span>\n<span class=\"nt\">&lt;/sdf&gt;</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "closed", "version": {"name": "3.0", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/100247.json"}}}, "edited_on": null, "created_on": "2014-05-14T12:36:40.592053+00:00", "milestone": null, "updated_on": "2016-09-14T19:43:24.901894+00:00", "type": "issue", "id": 1186}