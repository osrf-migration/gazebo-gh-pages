{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1723/comments/21360395.json"}, "html": {"href": "#!/osrf/gazebo/issues/1723#comment-21360395"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1723.json"}}, "type": "issue", "id": 1723, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "DART link destruction segfault"}, "content": {"raw": "looking at relevant threads, this happens when removing a model from running simulation:\n\n~~~\n[Dbg] [ServerFixture.cc:169] ServerFixture load in 0.8 seconds, timeout after 600 seconds\n***** Internal Program Error - assertion (dartLink2.get() != __null) failed in virtual void gazebo::physics::DARTPhysics::UpdateCollision():\n/home/hsu/projects/gazebo_default/gazebo/physics/dart/DARTPhysics.cc(156): dartLink2 in collision pare is NULL\n\nProgram received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fff84f08700 (LWP 32372)]\n0x00007ffff4a6bcc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\n56\t../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) thread apply all bt\n\n\nThread 137 (Thread 0x7fff84f08700 (LWP 32372)):\n#0  0x00007ffff4a6bcc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\n#1  0x00007ffff4a6f0d8 in __GI_abort () at abort.c:89\n#2  0x00007ffff7981856 in boost::assertion::detail::assertion_failed_msg (\n    expr=expr@entry=0x7ffff7af3f7b \"dartLink2.get() != __null\", \n    msg=msg@entry=0x7ffff7af3ec0 \"dartLink2 in collision pare is NULL\", \n    function=function@entry=0x7ffff7af5ec0 <gazebo::physics::DARTPhysics::UpdateCollision()::__PRETTY_FUNCTION__> \"virtual void gazebo::physics::DARTPhysics::UpdateCollision()\", \n    file=file@entry=0x7ffff7af3e28 \"/home/hsu/projects/gazebo_default/gazebo/physics/dart/DARTPhysics.cc\", line=line@entry=156)\n    at /usr/include/boost/assert.hpp:108\n#3  0x00007ffff79f8d13 in gazebo::physics::DARTPhysics::UpdateCollision (this=0x7fff39326520)\n    at /home/hsu/projects/gazebo_default/gazebo/physics/dart/DARTPhysics.cc:156\n#4  0x00007ffff7ab1502 in gazebo::physics::World::Update (this=this@entry=0x7fff3994e350)\n    at /home/hsu/projects/gazebo_default/gazebo/physics/World.cc:776\n#5  0x00007ffff7abc6db in gazebo::physics::World::Step (this=this@entry=0x7fff3994e350)\n    at /home/hsu/projects/gazebo_default/gazebo/physics/World.cc:698\n#6  0x00007ffff7abcb85 in gazebo::physics::World::RunLoop (this=0x7fff3994e350)\n    at /home/hsu/projects/gazebo_default/gazebo/physics/World.cc:467\n#7  0x00007ffff5a3fa4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#8  0x00007ffff7174182 in start_thread (arg=0x7fff84f08700) at pthread_create.c:312\n#9  0x00007ffff4b2f47d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\n\n\nThread 1 (Thread 0x7ffff7f6b880 (LWP 32227)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007ffff7176672 in _L_lock_953 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007ffff71764da in __GI___pthread_mutex_lock (mutex=0x7fff392c7e10) at ../nptl/pthread_mutex_lock.c:114\n#3  0x00007ffff79af570 in lock (this=<optimized out>) at /usr/include/boost/thread/pthread/recursive_mutex.hpp:110\n#4  boost::unique_lock<boost::recursive_mutex>::lock (this=this@entry=0x7fffffffce10)\n    at /usr/include/boost/thread/lock_types.hpp:346\n#5  0x00007ffff7ab1269 in unique_lock (m_=..., this=0x7fffffffce10) at /usr/include/boost/thread/lock_types.hpp:124\n#6  gazebo::physics::World::Step (this=0x7fff3994e350, _steps=_steps@entry=1)\n    at /home/hsu/projects/gazebo_default/gazebo/physics/World.cc:741\n#7  0x00000000004119f1 in Issue1702Test::SpawnDeleteSpawnAgain (this=this@entry=0x758e80, _physicsEngine=...)\n    at /home/hsu/projects/gazebo_default/test/regression/1702_remove_model_scene_nodes.cc:94\n#8  0x0000000000412d29 in Issue1702Test_SpawnDeleteSpawnAgain_Test::TestBody (this=0x758e80)\n---Type <return> to continue, or q <return> to quit---\n    at /home/hsu/projects/gazebo_default/test/regression/1702_remove_model_scene_nodes.cc:141\n#9  0x0000000000451463 in HandleSehExceptionsInMethodIfSupported<testing::Test, void> (location=0x45a727 \"the test body\", \n    method=<optimized out>, object=<optimized out>) at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2079\n#10 testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void> (object=object@entry=0x758e80, \n    method=<optimized out>, location=location@entry=0x45a727 \"the test body\")\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2115\n#11 0x00000000004440c7 in testing::Test::Run (this=this@entry=0x758e80)\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2152\n#12 0x0000000000444166 in testing::TestInfo::Run (this=0x759e10)\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2327\n#13 0x000000000044426d in testing::TestCase::Run (this=0x759930)\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2445\n#14 0x00000000004444fd in testing::internal::UnitTestImpl::RunAllTests (this=0x7581d0)\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:4316\n#15 0x00000000004447fe in HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool> (\n    location=<optimized out>, method=<optimized out>, object=<optimized out>)\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2079\n#16 HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool> (\n    location=0x45bb90 \"auxiliary test code (environments or event listeners)\", \n    method=(bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x4442e0 <testing::internal::UnitTestImpl::RunAllTests()>, object=0x7581d0) at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2115\n#17 testing::UnitTest::Run (this=<optimized out>) at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:3930\n#18 0x000000000040f69f in RUN_ALL_TESTS () at /home/hsu/projects/gazebo_default/test/gtest/include/gtest/gtest.h:2288\n#19 main (argc=1, argv=<optimized out>)\n    at /home/hsu/projects/gazebo_default/test/regression/1702_remove_model_scene_nodes.cc:151\n(gdb) \n~~~", "markup": "markdown", "html": "<p>looking at relevant threads, this happens when removing a model from running simulation:</p>\n<div class=\"codehilite\"><pre><span></span>[Dbg] [ServerFixture.cc:169] ServerFixture load in 0.8 seconds, timeout after 600 seconds\n***** Internal Program Error - assertion (dartLink2.get() != __null) failed in virtual void gazebo::physics::DARTPhysics::UpdateCollision():\n/home/hsu/projects/gazebo_default/gazebo/physics/dart/DARTPhysics.cc(156): dartLink2 in collision pare is NULL\n\nProgram received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fff84f08700 (LWP 32372)]\n0x00007ffff4a6bcc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\n56  ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) thread apply all bt\n\n\nThread 137 (Thread 0x7fff84f08700 (LWP 32372)):\n#0  0x00007ffff4a6bcc9 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\n#1  0x00007ffff4a6f0d8 in __GI_abort () at abort.c:89\n#2  0x00007ffff7981856 in boost::assertion::detail::assertion_failed_msg (\n    expr=expr@entry=0x7ffff7af3f7b &quot;dartLink2.get() != __null&quot;, \n    msg=msg@entry=0x7ffff7af3ec0 &quot;dartLink2 in collision pare is NULL&quot;, \n    function=function@entry=0x7ffff7af5ec0 &lt;gazebo::physics::DARTPhysics::UpdateCollision()::__PRETTY_FUNCTION__&gt; &quot;virtual void gazebo::physics::DARTPhysics::UpdateCollision()&quot;, \n    file=file@entry=0x7ffff7af3e28 &quot;/home/hsu/projects/gazebo_default/gazebo/physics/dart/DARTPhysics.cc&quot;, line=line@entry=156)\n    at /usr/include/boost/assert.hpp:108\n#3  0x00007ffff79f8d13 in gazebo::physics::DARTPhysics::UpdateCollision (this=0x7fff39326520)\n    at /home/hsu/projects/gazebo_default/gazebo/physics/dart/DARTPhysics.cc:156\n#4  0x00007ffff7ab1502 in gazebo::physics::World::Update (this=this@entry=0x7fff3994e350)\n    at /home/hsu/projects/gazebo_default/gazebo/physics/World.cc:776\n#5  0x00007ffff7abc6db in gazebo::physics::World::Step (this=this@entry=0x7fff3994e350)\n    at /home/hsu/projects/gazebo_default/gazebo/physics/World.cc:698\n#6  0x00007ffff7abcb85 in gazebo::physics::World::RunLoop (this=0x7fff3994e350)\n    at /home/hsu/projects/gazebo_default/gazebo/physics/World.cc:467\n#7  0x00007ffff5a3fa4a in ?? () from /usr/lib/x86_64-linux-gnu/libboost_thread.so.1.54.0\n#8  0x00007ffff7174182 in start_thread (arg=0x7fff84f08700) at pthread_create.c:312\n#9  0x00007ffff4b2f47d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n\n\n\nThread 1 (Thread 0x7ffff7f6b880 (LWP 32227)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007ffff7176672 in _L_lock_953 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007ffff71764da in __GI___pthread_mutex_lock (mutex=0x7fff392c7e10) at ../nptl/pthread_mutex_lock.c:114\n#3  0x00007ffff79af570 in lock (this=&lt;optimized out&gt;) at /usr/include/boost/thread/pthread/recursive_mutex.hpp:110\n#4  boost::unique_lock&lt;boost::recursive_mutex&gt;::lock (this=this@entry=0x7fffffffce10)\n    at /usr/include/boost/thread/lock_types.hpp:346\n#5  0x00007ffff7ab1269 in unique_lock (m_=..., this=0x7fffffffce10) at /usr/include/boost/thread/lock_types.hpp:124\n#6  gazebo::physics::World::Step (this=0x7fff3994e350, _steps=_steps@entry=1)\n    at /home/hsu/projects/gazebo_default/gazebo/physics/World.cc:741\n#7  0x00000000004119f1 in Issue1702Test::SpawnDeleteSpawnAgain (this=this@entry=0x758e80, _physicsEngine=...)\n    at /home/hsu/projects/gazebo_default/test/regression/1702_remove_model_scene_nodes.cc:94\n#8  0x0000000000412d29 in Issue1702Test_SpawnDeleteSpawnAgain_Test::TestBody (this=0x758e80)\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n    at /home/hsu/projects/gazebo_default/test/regression/1702_remove_model_scene_nodes.cc:141\n#9  0x0000000000451463 in HandleSehExceptionsInMethodIfSupported&lt;testing::Test, void&gt; (location=0x45a727 &quot;the test body&quot;, \n    method=&lt;optimized out&gt;, object=&lt;optimized out&gt;) at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2079\n#10 testing::internal::HandleExceptionsInMethodIfSupported&lt;testing::Test, void&gt; (object=object@entry=0x758e80, \n    method=&lt;optimized out&gt;, location=location@entry=0x45a727 &quot;the test body&quot;)\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2115\n#11 0x00000000004440c7 in testing::Test::Run (this=this@entry=0x758e80)\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2152\n#12 0x0000000000444166 in testing::TestInfo::Run (this=0x759e10)\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2327\n#13 0x000000000044426d in testing::TestCase::Run (this=0x759930)\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2445\n#14 0x00000000004444fd in testing::internal::UnitTestImpl::RunAllTests (this=0x7581d0)\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:4316\n#15 0x00000000004447fe in HandleSehExceptionsInMethodIfSupported&lt;testing::internal::UnitTestImpl, bool&gt; (\n    location=&lt;optimized out&gt;, method=&lt;optimized out&gt;, object=&lt;optimized out&gt;)\n    at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2079\n#16 HandleExceptionsInMethodIfSupported&lt;testing::internal::UnitTestImpl, bool&gt; (\n    location=0x45bb90 &quot;auxiliary test code (environments or event listeners)&quot;, \n    method=(bool (testing::internal::UnitTestImpl::*)(testing::internal::UnitTestImpl * const)) 0x4442e0 &lt;testing::internal::UnitTestImpl::RunAllTests()&gt;, object=0x7581d0) at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:2115\n#17 testing::UnitTest::Run (this=&lt;optimized out&gt;) at /home/hsu/projects/gazebo_default/test/gtest/src/gtest.cc:3930\n#18 0x000000000040f69f in RUN_ALL_TESTS () at /home/hsu/projects/gazebo_default/test/gtest/include/gtest/gtest.h:2288\n#19 main (argc=1, argv=&lt;optimized out&gt;)\n    at /home/hsu/projects/gazebo_default/test/regression/1702_remove_model_scene_nodes.cc:151\n(gdb) \n</pre></div>", "type": "rendered"}, "created_on": "2015-08-31T06:27:00.602142+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 21360395}