{"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1723/comments/51494082.json"}, "html": {"href": "#!/osrf/gazebo/issues/1723#comment-51494082"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo/issues/1723.json"}}, "type": "issue", "id": 1723, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "title": "DART link destruction segfault"}, "content": {"raw": "I want to provide a little more information, as this bug is a blocker for our lab right now and we would really appreciate some guidance on how it could be fixed. Here is the best description we can give of the issue:\n\n1. A simulation is running in Gazebo 7 using the DART 5.1 physics engine.\n2. An object is spawned into the running simulation.\n3. The object is deleted in the Gazebo GUI by right clicking the object and selecting \"Delete\".\n4. Gazebo crashes with the error.\n\nThe error we get is\n\n    gzserver: /home/adam/gazebo_dart_ws/src/gazebo/gazebo/physics/dart/DARTPhysics.cc:150: \n    virtual void gazebo::physics::DARTPhysics::UpdateCollision(): Assertion `(dartLink2.get() != \n    nullptr)&&(\"dartLink2 in collision pair is null\")' failed.\n    Aborted (core dumped)\n\nI'll note also that when we spawn our robot in Gazebo with DART, we see warnings like\n\n    Warning [BodyNode.cpp:468] [BodyNode::addCollisionShape] Attempting to add a nullptr as a collision shape\n\nAdditionally, the problem occurs even when spawning into a paused simulation, or deleting on a paused simulation. In fact, if you spawn into a paused simulation, immediately delete it, and then unpause the simulation, the error occurs exactly when the simulation is unpaused.\n\nAny idea what can be going wrong here, or the best place to start debugging? We are interested in providing a fix for this, but would like some expert input on what might be the root cause before we burn time unnecessarily trying to hunt it down ourselves.", "markup": "markdown", "html": "<p>I want to provide a little more information, as this bug is a blocker for our lab right now and we would really appreciate some guidance on how it could be fixed. Here is the best description we can give of the issue:</p>\n<ol>\n<li>A simulation is running in Gazebo 7 using the DART 5.1 physics engine.</li>\n<li>An object is spawned into the running simulation.</li>\n<li>The object is deleted in the Gazebo GUI by right clicking the object and selecting \"Delete\".</li>\n<li>Gazebo crashes with the error.</li>\n</ol>\n<p>The error we get is</p>\n<div class=\"codehilite\"><pre><span></span>gzserver: /home/adam/gazebo_dart_ws/src/gazebo/gazebo/physics/dart/DARTPhysics.cc:150: \nvirtual void gazebo::physics::DARTPhysics::UpdateCollision(): Assertion `(dartLink2.get() != \nnullptr)&amp;&amp;(&quot;dartLink2 in collision pair is null&quot;)&#39; failed.\nAborted (core dumped)\n</pre></div>\n\n\n<p>I'll note also that when we spawn our robot in Gazebo with DART, we see warnings like</p>\n<div class=\"codehilite\"><pre><span></span>Warning [BodyNode.cpp:468] [BodyNode::addCollisionShape] Attempting to add a nullptr as a collision shape\n</pre></div>\n\n\n<p>Additionally, the problem occurs even when spawning into a paused simulation, or deleting on a paused simulation. In fact, if you spawn into a paused simulation, immediately delete it, and then unpause the simulation, the error occurs exactly when the simulation is unpaused.</p>\n<p>Any idea what can be going wrong here, or the best place to start debugging? We are interested in providing a fix for this, but would like some expert input on what might be the root cause before we burn time unnecessarily trying to hunt it down ourselves.</p>", "type": "rendered"}, "created_on": "2019-04-04T23:13:40.082851+00:00", "user": {"display_name": "Adam Conkey", "uuid": "{2e296255-0eac-4cbf-9a47-673da7758531}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e296255-0eac-4cbf-9a47-673da7758531%7D"}, "html": {"href": "https://bitbucket.org/%7B2e296255-0eac-4cbf-9a47-673da7758531%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:5db2d282-60fa-412f-b501-6ee272731284/228f8b80-d945-4772-b27c-6163131ec5fc/128"}}, "nickname": "adamconkey", "type": "user", "account_id": "557058:5db2d282-60fa-412f-b501-6ee272731284"}, "updated_on": null, "type": "issue_comment", "id": 51494082}