{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2092/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2092.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2092/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2092/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2092/simbody-crash-on-joint-setforce"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2092/vote"}}, "reporter": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "title": "Simbody crash on Joint::SetForce", "component": {"name": "physics::SimbodyPhysics", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122885.json"}}}, "votes": 0, "watches": 2, "content": {"raw": "While implementing  the `INTEGRATION_keys_to_joints` test for pull request #2490 I noticed that calling `SimbodyJoint::SetForce` results in crashes with a few different errors for each run.\r\n\r\nSome of the errors I got:\r\n\r\n~~~\r\nterminate called after throwing an instance of 'SimTK::Exception::StageTooLow'\r\n  what():  SimTK Exception thrown at StateImpl.h:1667:\r\n  Expected stage to be at least Dynamics in StateImpl::getCacheEntry() but current stage was Velocity\r\n~~~\r\n\r\n~~~\r\ngzserver: /tmp/buildd/simbody-3.5.1/SimTKcommon/Simulation/src/State.cpp:471: void SimTK::StateImpl::advanceSystemToStage(SimTK::Stage) const: Assertion `allSubsystemsAtLeastAtStage(stg)' failed.\r\n~~~\r\n\r\n~~~\r\ngzserver: /tmp/buildd/simbody-3.5.1/SimTKcommon/Simulation/include/SimTKcommon/internal/StateImpl.h:410: void SimTK::PerSubsystemInfo::advanceToStage(SimTK::Stage) const: Assertion `currentStage == g.prev()' failed.\r\n~~~\r\n\r\nTo reproduce, open `test/worlds/keys_to_joints.world` from that pull request using Simbody, press `o` and/or `l` a few times and get the crash.", "markup": "markdown", "html": "<p>While implementing  the <code>INTEGRATION_keys_to_joints</code> test for <a href=\"#!/osrf/gazebo/pull-requests/2490/keys-to-joints-plugin\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #2490</a> I noticed that calling <code>SimbodyJoint::SetForce</code> results in crashes with a few different errors for each run.</p>\n<p>Some of the errors I got:</p>\n<div class=\"codehilite\"><pre><span></span>terminate called after throwing an instance of &#39;SimTK::Exception::StageTooLow&#39;\n  what():  SimTK Exception thrown at StateImpl.h:1667:\n  Expected stage to be at least Dynamics in StateImpl::getCacheEntry() but current stage was Velocity\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>gzserver: /tmp/buildd/simbody-3.5.1/SimTKcommon/Simulation/src/State.cpp:471: void SimTK::StateImpl::advanceSystemToStage(SimTK::Stage) const: Assertion `allSubsystemsAtLeastAtStage(stg)&#39; failed.\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>gzserver: /tmp/buildd/simbody-3.5.1/SimTKcommon/Simulation/include/SimTKcommon/internal/StateImpl.h:410: void SimTK::PerSubsystemInfo::advanceToStage(SimTK::Stage) const: Assertion `currentStage == g.prev()&#39; failed.\n</pre></div>\n\n\n<p>To reproduce, open <code>test/worlds/keys_to_joints.world</code> from that pull request using Simbody, press <code>o</code> and/or <code>l</code> a few times and get the crash.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2016-11-04T17:08:34.110679+00:00", "milestone": null, "updated_on": "2016-11-11T23:18:37.112651+00:00", "type": "issue", "id": 2092}