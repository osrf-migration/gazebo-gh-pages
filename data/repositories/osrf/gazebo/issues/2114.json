{"priority": "critical", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2114/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2114.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2114/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2114/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2114/attaching-objects-to-gripper-does-not-work"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2114/vote"}}, "reporter": {"display_name": "Yuki Furuta", "uuid": "{d129e72e-2ce2-4d79-866d-84e334453e55}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd129e72e-2ce2-4d79-866d-84e334453e55%7D"}, "html": {"href": "https://bitbucket.org/%7Bd129e72e-2ce2-4d79-866d-84e334453e55%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e9a033d36f99501a670a2fd504bbdbd4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsYF-6.png"}}, "nickname": "furushchev", "type": "user", "account_id": "557058:f0479e8b-bed5-4316-9f20-53e41207e140"}, "title": "Attaching objects to Gripper does not work in effect.", "component": {"name": "physics", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122876.json"}}}, "votes": 0, "watches": 3, "content": {"raw": "Current grasp checking algorithm for gripper is:\r\n\r\n- check contacts between objects and gripper links on every updates (update rate is `0.75` sec [1])\r\n- if contacts exists continuously (`attach_steps` parameter is used), it starts to compute distance of every contacts. [2] \r\n- Latest `10` differences from the distance of contacts and one on previous time is collected. [3] (`Gripper::HandleAttach`)\r\n- If none of these differences and their variance exceeds threshold `1e-5`, then the object are attached to the gripper link. [4]\r\n\r\nThe problem is there is hard-coded parameter `10` for computing a maximum of the latest differences of collision distances, which means we must call method `Gripper::HandleAttach` at least 10 times for regarding that objects should be attached to the gripper.\r\nAs the update rate for grippers are not so high, method `Gripper::HandleAttach` may not be called 10 times on grasp action.\r\nSo it should be better to provide option to change update rate for gripper and the hard-coded parameter `10`.\r\nThis may need to change the specification of sdformat.\r\nHow do you think about it?\r\nAnd how can we change?\r\n\r\n- [1] #!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&fileviewer=file-view-default#Gripper.cc-57\r\n- [2] #!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&fileviewer=file-view-default#Gripper.cc-161\r\n- [3] #!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&fileviewer=file-view-default#Gripper.cc-227\r\n- [4] #!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&fileviewer=file-view-default#Gripper.cc-231", "markup": "markdown", "html": "<p>Current grasp checking algorithm for gripper is:</p>\n<ul>\n<li>check contacts between objects and gripper links on every updates (update rate is <code>0.75</code> sec [1])</li>\n<li>if contacts exists continuously (<code>attach_steps</code> parameter is used), it starts to compute distance of every contacts. [2] </li>\n<li>Latest <code>10</code> differences from the distance of contacts and one on previous time is collected. [3] (<code>Gripper::HandleAttach</code>)</li>\n<li>If none of these differences and their variance exceeds threshold <code>1e-5</code>, then the object are attached to the gripper link. [4]</li>\n</ul>\n<p>The problem is there is hard-coded parameter <code>10</code> for computing a maximum of the latest differences of collision distances, which means we must call method <code>Gripper::HandleAttach</code> at least 10 times for regarding that objects should be attached to the gripper.\nAs the update rate for grippers are not so high, method <code>Gripper::HandleAttach</code> may not be called 10 times on grasp action.\nSo it should be better to provide option to change update rate for gripper and the hard-coded parameter <code>10</code>.\nThis may need to change the specification of sdformat.\nHow do you think about it?\nAnd how can we change?</p>\n<ul>\n<li>[1] <a href=\"#!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&amp;fileviewer=file-view-default#Gripper.cc-57\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&amp;fileviewer=file-view-default#Gripper.cc-57</a></li>\n<li>[2] <a href=\"#!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&amp;fileviewer=file-view-default#Gripper.cc-161\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&amp;fileviewer=file-view-default#Gripper.cc-161</a></li>\n<li>[3] <a href=\"#!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&amp;fileviewer=file-view-default#Gripper.cc-227\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&amp;fileviewer=file-view-default#Gripper.cc-227</a></li>\n<li>[4] <a href=\"#!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&amp;fileviewer=file-view-default#Gripper.cc-231\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/gazebo/src/26e59bf273b5c942023552f7095a5f2d75a0a43c/gazebo/physics/Gripper.cc?at=default&amp;fileviewer=file-view-default#Gripper.cc-231</a></li>\n</ul>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2016-12-16T10:27:00.889116+00:00", "milestone": null, "updated_on": "2016-12-16T10:27:00.889116+00:00", "type": "issue", "id": 2114}