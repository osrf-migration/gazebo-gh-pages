{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/1008/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/1008.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1008/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/1008/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/1008/modeldatabase-sometimes-loads-models-with"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/1008/vote"}}, "reporter": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "title": "ModelDatabase sometimes loads models with older sdf version", "component": {"name": "common", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/138866.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "For models with multiple sdf files listed in the model.config ([sun](#!/osrf/gazebo_models/src/default/sun/model.config) for example), gazebo will sometimes load the oldest version of the model.\r\n\r\nThis occurs when the `SDF_VERSION` does not match any of the specified sdf versions in the `model.config` file. When this occurs, gazebo simply chooses the first one in the list.\r\n\r\nIs this intended? I would expect it to choose the most recent version that it can support.\r\n\r\nTo reproduce the issue, simply remove the line giving the file name for the `1.4` version of the sun, and observe that gazebo loads the `1.2` version rather than `1.3`.\r\n~~~\r\ndiff -r cec564005240 sun/model.config\r\n--- a/sun/model.config\tMon Dec 02 11:34:20 2013 -0800\r\n+++ b/sun/model.config\tThu Jan 16 16:54:57 2014 -0800\r\n@@ -5,7 +5,6 @@\r\n   <version>1.0</version>\r\n   <sdf version=\"1.2\">model-1_2.sdf</sdf>\r\n   <sdf version=\"1.3\">model-1_3.sdf</sdf>\r\n-  <sdf version=\"1.4\">model.sdf</sdf>\r\n \r\n   <author>\r\n     <name>Nate Koenig</name>\r\n~~~\r\n~~~\r\n$ gazebo\r\n\u2026\r\nWarning [parser.cc:340] Converting a deprecated source[/Users/scpeters/osrf/gazebo_models/sun/model-1_2.sdf].\r\nWarning [Converter.cc:59]   Version[1.2] to Version[1.4]\r\n  Please use the gzsdf tool to update your SDF files.\r\n    $ gzsdf convert [sdf_file]\r\n~~~\r\nI thought this was a known issue, but I couldn't find an existing one that matched this. The code to change is in [ModelDatabase::GetModelFile](#!/osrf/gazebo/src/6f357235d464f26f5ffc61f90e17e67f788703f5/gazebo/common/ModelDatabase.cc?at=default#cl-623).", "markup": "markdown", "html": "<p>For models with multiple sdf files listed in the model.config (<a data-is-external-link=\"true\" href=\"#!/osrf/gazebo_models/src/default/sun/model.config\" rel=\"nofollow\">sun</a> for example), gazebo will sometimes load the oldest version of the model.</p>\n<p>This occurs when the <code>SDF_VERSION</code> does not match any of the specified sdf versions in the <code>model.config</code> file. When this occurs, gazebo simply chooses the first one in the list.</p>\n<p>Is this intended? I would expect it to choose the most recent version that it can support.</p>\n<p>To reproduce the issue, simply remove the line giving the file name for the <code>1.4</code> version of the sun, and observe that gazebo loads the <code>1.2</code> version rather than <code>1.3</code>.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r cec564005240 sun/model.config</span>\n<span class=\"gd\">--- a/sun/model.config  Mon Dec 02 11:34:20 2013 -0800</span>\n<span class=\"gi\">+++ b/sun/model.config  Thu Jan 16 16:54:57 2014 -0800</span>\n<span class=\"gu\">@@ -5,7 +5,6 @@</span>\n   &lt;version&gt;1.0&lt;/version&gt;\n   &lt;sdf version=&quot;1.2&quot;&gt;model-1_2.sdf&lt;/sdf&gt;\n   &lt;sdf version=&quot;1.3&quot;&gt;model-1_3.sdf&lt;/sdf&gt;\n<span class=\"gd\">-  &lt;sdf version=&quot;1.4&quot;&gt;model.sdf&lt;/sdf&gt;</span>\n\n   &lt;author&gt;\n     &lt;name&gt;Nate Koenig&lt;/name&gt;\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>$ gazebo\n\u2026\nWarning <span class=\"o\">[</span>parser.cc:340<span class=\"o\">]</span> Converting a deprecated source<span class=\"o\">[</span>/Users/scpeters/osrf/gazebo_models/sun/model-1_2.sdf<span class=\"o\">]</span>.\nWarning <span class=\"o\">[</span>Converter.cc:59<span class=\"o\">]</span>   Version<span class=\"o\">[</span><span class=\"m\">1</span>.2<span class=\"o\">]</span> to Version<span class=\"o\">[</span><span class=\"m\">1</span>.4<span class=\"o\">]</span>\n  Please use the gzsdf tool to update your SDF files.\n    $ gzsdf convert <span class=\"o\">[</span>sdf_file<span class=\"o\">]</span>\n</pre></div>\n\n\n<p>I thought this was a known issue, but I couldn't find an existing one that matched this. The code to change is in <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/6f357235d464f26f5ffc61f90e17e67f788703f5/gazebo/common/ModelDatabase.cc?at=default#cl-623\" rel=\"nofollow\">ModelDatabase::GetModelFile</a>.</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2014-01-17T00:58:56.406567+00:00", "milestone": null, "updated_on": "2018-01-06T02:00:13.201385+00:00", "type": "issue", "id": 1008}