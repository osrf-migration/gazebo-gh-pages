{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo.json"}, "html": {"href": "#!/osrf/gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}ts=1694483"}}, "type": "repository", "name": "gazebo", "full_name": "osrf/gazebo", "uuid": "{51a0cd5d-8697-4eb1-8b08-e919ee881e1c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo/issues/2627/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo/issues/2627.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2627/watch"}, "comments": {"href": "data/repositories/osrf/gazebo/issues/2627/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo/issues/2627/physics-link-fini-leaves-zombie-update"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo/issues/2627/vote"}}, "reporter": {"display_name": "Yoshito Okada", "uuid": "{2e58a2cb-6966-47eb-a7d1-c8cc34145c58}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e58a2cb-6966-47eb-a7d1-c8cc34145c58%7D"}, "html": {"href": "https://bitbucket.org/%7B2e58a2cb-6966-47eb-a7d1-c8cc34145c58%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fb8c0275908650f37e3d783c0938f5a1d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsYO-5.png"}}, "nickname": "yoshito-okada", "type": "user", "account_id": "5a2e0944c6bd4a32df3b14d2"}, "title": "physics::Link::Fini() leaves zombie update functions in sdf", "component": {"name": "physics", "links": {"self": {"href": "data/repositories/osrf/gazebo/components/122876.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "Some member functions of physics::Link set update functions for the link\u2019s sdf \\(ex. [#!/osrf/gazebo/src/7c2936c66a23e6c6707fe4c7790458e75824407e/gazebo/physics/Link.cc?at=default#lines-159](#!/osrf/gazebo/src/7c2936c66a23e6c6707fe4c7790458e75824407e/gazebo/physics/Link.cc?at=default#lines-159) \\).    And these update functions remains after the link has been removed by physics::Model::RemoveChild\\(\\) or others.   If these zombie update functions are called by Update\\(\\) of a parent model\u2019s sdf or others, a runtime error or segmentation fault occur.\r\n\r\nIn my opinion, physics::Link::Fini\\(\\) should make the final call of Update\\(\\) to write link\u2019s final states to the sdf, and then detach update functions from the sdf.\r\n\r\nFinally, this is an issue not only for physics::Link, but also for all classes which set update functions \\(as of now, Battery, Inertial, Link and Model\\).", "markup": "markdown", "html": "<p>Some member functions of physics::Link set update functions for the link\u2019s sdf (ex. <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo/src/7c2936c66a23e6c6707fe4c7790458e75824407e/gazebo/physics/Link.cc?at=default#lines-159\" rel=\"nofollow\">#!/osrf/gazebo/src/7c2936c66a23e6c6707fe4c7790458e75824407e/gazebo/physics/Link.cc?at=default#lines-159</a> ).    And these update functions remains after the link has been removed by physics::Model::RemoveChild() or others.   If these zombie update functions are called by Update() of a parent model\u2019s sdf or others, a runtime error or segmentation fault occur.</p>\n<p>In my opinion, physics::Link::Fini() should make the final call of Update() to write link\u2019s final states to the sdf, and then detach update functions from the sdf.</p>\n<p>Finally, this is an issue not only for physics::Link, but also for all classes which set update functions (as of now, Battery, Inertial, Link and Model).</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": {"name": "all", "links": {"self": {"href": "data/repositories/osrf/gazebo/versions/225575.json"}}}, "edited_on": null, "created_on": "2019-05-11T00:53:33.764681+00:00", "milestone": null, "updated_on": "2019-05-11T00:53:33.764681+00:00", "type": "issue", "id": 2627}